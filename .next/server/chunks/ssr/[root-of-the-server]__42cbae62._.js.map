{"version":3,"sources":["turbopack:///[project]/src/app/api/apiHelper.ts","turbopack:///[project]/node_modules/@heroicons/react/24/outline/esm/UserIcon.js","turbopack:///[project]/node_modules/@heroicons/react/24/outline/esm/XMarkIcon.js","turbopack:///[project]/src/lib/storage/storege.js"],"sourcesContent":["// app/api/apiHelper.ts\nimport axios, { AxiosRequestConfig } from \"axios\";\n\nconst MAIN = typeof window !== \"undefined\" ? (process.env.NEXT_PUBLIC_MAIN || \"\") : (process.env.NEXT_PUBLIC_MAIN || \"\");\n\n// helper to normalize final URL\nfunction buildURL(pathOrUrl: string) {\n  if (!pathOrUrl) throw new Error(\"Empty pathOrUrl passed to apiHelper\");\n  // if it's already a full URL, return as-is\n  if (/^https?:\\/\\//i.test(pathOrUrl)) {\n    return pathOrUrl;\n  }\n\n  // ensure path starts with single slash\n  const path = pathOrUrl.startsWith(\"/\") ? pathOrUrl : `/${pathOrUrl}`;\n\n  // if MAIN empty -> relative path (same origin)\n  if (!MAIN) return path;\n\n  // normalize MAIN: remove trailing slash if present\n  const base = MAIN.endsWith(\"/\") ? MAIN.slice(0, -1) : MAIN;\n\n  // avoid double /api/api etc by simply concatenating\n  return `${base}${path}`;\n}\n\n// single axios instance (no baseURL so we can pass full url each time)\nconst api = axios.create({\n  timeout: 20000,\n  headers: {\n    Accept: \"application/json\",\n  },\n});\n\n// attach token from localStorage for each request\napi.interceptors.request.use((config) => {\n  try {\n    if (typeof window !== \"undefined\") {\n      const token = localStorage.getItem(\"accessToken\");\n      if (token) {\n        config.headers = config.headers || {};\n        if (!(\"Authorization\" in config.headers)) {\n          config.headers[\"Authorization\"] = `Bearer ${token}`;\n        }\n      }\n    }\n  } catch (e) {\n    // ignore storage errors\n  }\n  return config;\n});\n\n// simple debug logger to help track final URLs when 404/Network issues happen\nfunction debugLogRequest(method: string, finalUrl: string, config?: AxiosRequestConfig) {\n  // Only log in development\n  if (process.env.NODE_ENV !== \"production\") {\n    console.debug(`[apiHelper] ${method.toUpperCase()} -> ${finalUrl}`, config || \"\");\n  }\n}\n\nasync function request(method: string, pathOrUrl: string, data?: any, config?: AxiosRequestConfig) {\n  const finalUrl = buildURL(pathOrUrl);\n  debugLogRequest(method, finalUrl, config);\n  const axiosConfig: AxiosRequestConfig = {\n    url: finalUrl,\n    method: method as any,\n    ...config,\n  };\n  if (method === \"get\" || method === \"delete\") {\n    axiosConfig.params = data;\n  } else {\n    axiosConfig.data = data;\n  }\n  return api.request(axiosConfig);\n}\n\n// exported helpers â€” accepts EITHER full URL or path (like \"/api/projects/1/tasks\" or \"/projects/1/tasks\")\nexport async function getAPI(pathOrUrl: string, config?: AxiosRequestConfig) {\n  return request(\"get\", pathOrUrl, undefined, config);\n}\nexport async function postAPI(pathOrUrl: string, data?: any, config?: AxiosRequestConfig) {\n  return request(\"post\", pathOrUrl, data, config);\n}\nexport async function putAPI(pathOrUrl: string, data?: any, config?: AxiosRequestConfig) {\n  return request(\"put\", pathOrUrl, data, config);\n}\nexport async function deleteAPI(pathOrUrl: string, config?: AxiosRequestConfig) {\n  return request(\"delete\", pathOrUrl, undefined, config);\n}\n\nexport function setAuthToken(token: string | null) {\n  if (token) {\n    if (typeof window !== \"undefined\") localStorage.setItem(\"accessToken\", token);\n    api.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n  } else {\n    if (typeof window !== \"undefined\") localStorage.removeItem(\"accessToken\");\n    delete api.defaults.headers.common[\"Authorization\"];\n  }\n}\n\nexport default api;\n","import * as React from \"react\";\nfunction UserIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(UserIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction XMarkIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M6 18 18 6M6 6l12 12\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(XMarkIcon);\nexport default ForwardRef;","const key ='auth'\nexport function setStorage(data){\n    localStorage.setItem(key,JSON.stringify(data))\n}\nexport function getStorage(){\n    if(localStorage.getItem(key)){\n        return JSON.parse(localStorage.getItem(key))\n    }\n}\nexport function clearStorage(){\n    localStorage.removeItem(key)\n}"],"names":[],"mappings":"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","ignoreList":[1,2]}