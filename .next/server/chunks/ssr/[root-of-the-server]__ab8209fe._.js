module.exports=[814747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},224361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},47349,(a,b,c)=>{"use strict";var d=a.r(572131);"function"==typeof Object.is&&Object.is,d.useState,d.useEffect,d.useLayoutEffect,d.useDebugValue,c.useSyncExternalStore=void 0!==d.useSyncExternalStore?d.useSyncExternalStore:function(a,b){return b()}},487610,(a,b,c)=>{"use strict";b.exports=a.r(47349)},633508,a=>{"use strict";a.s(["X",()=>b.default]);var b=a.i(562213)},417755,a=>{"use strict";a.s(["MoreHorizontal",()=>b],417755);let b=(0,a.i(883706).default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},613749,50522,a=>{"use strict";a.s(["ChevronLeft",()=>b],613749);let b=(0,a.i(883706).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);a.s(["ChevronRight",()=>c.default],50522);var c=a.i(111989)},510448,a=>{"use strict";a.s(["Edit2",()=>b],510448);let b=(0,a.i(883706).default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},84218,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(883706).default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},879360,a=>{"use strict";a.s(["MoreVertical",()=>b.default]);var b=a.i(84218)},781560,a=>{"use strict";a.s(["Trash2",()=>b],781560);let b=(0,a.i(883706).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},177156,a=>{"use strict";a.s(["Eye",()=>b],177156);let b=(0,a.i(883706).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},369012,a=>{"use strict";a.s(["Filter",()=>b],369012);let b=(0,a.i(883706).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},688947,(a,b,c)=>{b.exports=a.x("stream",()=>require("stream"))},921517,(a,b,c)=>{b.exports=a.x("http",()=>require("http"))},524836,(a,b,c)=>{b.exports=a.x("https",()=>require("https"))},792509,(a,b,c)=>{b.exports=a.x("url",()=>require("url"))},254799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},427699,(a,b,c)=>{b.exports=a.x("events",()=>require("events"))},782066,a=>{"use strict";a.s(["deleteAPI",()=>h,"postAPI",()=>f,"putAPI",()=>g,"setAuthToken",()=>i]);var b=a.i(83490);let c="https://6jnqmj85-80.inc1.devtunnels.ms",d=b.default.create({timeout:2e4,headers:{Accept:"application/json"}});async function e(a,b,e,f){let g=function(a){if(!a)throw Error("Empty pathOrUrl passed to apiHelper");if(/^https?:\/\//i.test(a))return a;let b=a.startsWith("/")?a:`/${a}`,d=c.endsWith("/")?c.slice(0,-1):c;return`${d}${b}`}(b),h={url:g,method:a,...f};return"get"===a||"delete"===a?h.params=e:h.data=e,d.request(h)}async function f(a,b,c){return e("post",a,b,c)}async function g(a,b,c){return e("put",a,b,c)}async function h(a,b){return e("delete",a,void 0,b)}function i(a){a?d.defaults.headers.common.Authorization=`Bearer ${a}`:delete d.defaults.headers.common.Authorization}d.interceptors.request.use(a=>a)},886330,89329,a=>{"use strict";a.s(["UserIcon",()=>c],886330);var b=a.i(572131);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))});a.s(["XMarkIcon",()=>d],89329);let d=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))})},362495,a=>{"use strict";a.s(["mutate",()=>b.j]);var b=a.i(28971)},457580,a=>{"use strict";a.s(["default",()=>g]);var b=a.i(187924),c=a.i(572131),d=a.i(571987),e=a.i(417755);let f="https://6jnqmj85-80.inc1.devtunnels.ms";function g({employeeId:a,authToken:g}){let h=(0,c.useRef)(null),[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)({}),[q,r]=(0,c.useState)(null);(0,c.useEffect)(()=>{let b=!0;return l(!0),r(null),fetch(`${f}/employee/${a}/documents`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}}).then(a=>a.json()).then(a=>{b&&j((Array.isArray(a)?a:[]).map(a=>({id:a.id,filename:a.filename,url:a.url,mimeType:a.mimeType,size:a.size,uploadedBy:a.uploadedBy,createdAt:a.createdAt})))}).catch(()=>r("Failed to load files")).finally(()=>b&&l(!1)),()=>{b=!1}},[a,g]);let s=async b=>{let c=b.target.files?.[0];if(!c)return;let d=`local-${Date.now()}`,e=c.type.startsWith("image/")?URL.createObjectURL(c):null;j(a=>[{id:d,filename:c.name,url:e,mimeType:c.type},...a]),p(a=>({...a,[d]:!0})),r(null);try{let b=new FormData;b.append("file",c);let e=await fetch(`${f}/employee/${a}/documents`,{method:"POST",body:b,headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(!e.ok)throw Error("Upload failed");let g=await e.json();j(a=>a.map(a=>a.id===d?{id:g.id,filename:g.filename,url:g.url,mimeType:g.mimeType,size:g.size,uploadedBy:g.uploadedBy,createdAt:g.createdAt}:a))}catch(a){j(a=>a.filter(a=>a.id!==d)),r("Upload failed")}finally{p(a=>{let b={...a};return delete b[d],b}),h.current&&(h.current.value="")}},t=async b=>{j(a=>a.filter(a=>a.id!==b));try{await fetch(`${f}/employee/${a}/documents/${b}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}})}catch{r("Delete failed")}},u=(a,b,c)=>{if(!a)return;let d=document.createElement("a");d.href=a,d.target="_blank",b&&(d.download=c||"file"),document.body.appendChild(d),d.click(),d.remove()};return(0,b.jsxs)("div",{className:"bg-white rounded-lg border p-5",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Upload file"}),(0,b.jsxs)("div",{onClick:()=>h.current?.click(),className:"border-2 border-dashed rounded-lg h-28 flex items-center justify-center cursor-pointer text-gray-500",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",fill:"#bdbdbd",viewBox:"0 0 24 24",className:"mx-auto mb-2",children:(0,b.jsx)("path",{d:"M12 16a1 1 0 0 1-1-1v-4.586l-1.293 1.293a1 1 0 1 1-1.414-1.414l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.414L13 10.414V15a1 1 0 0 1-1 1Zm7-1a5 5 0 0 0-4.546-4.978A7 7 0 0 0 5.062 9.2 5 5 0 0 0 6 19h13a4 4 0 0 0 0-8Z"})}),(0,b.jsx)("div",{className:"text-sm font-medium",children:"Choose a file"})]}),(0,b.jsx)("input",{ref:h,type:"file",className:"hidden",onChange:s})]}),k&&(0,b.jsx)("p",{className:"text-sm mt-3 text-gray-500",children:"Loading…"}),q&&(0,b.jsx)("p",{className:"text-sm mt-3 text-red-500",children:q}),(0,b.jsx)("div",{className:"mt-6 grid grid-cols-6 gap-4",children:i.map(a=>(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"h-20 border rounded bg-gray-50 flex items-center justify-center overflow-hidden",children:a.url&&a.mimeType?.startsWith("image/")?(0,b.jsx)(d.default,{src:a.url,alt:a.filename||"file",fill:!0,className:"object-cover",unoptimized:!0}):(0,b.jsx)("span",{className:"text-xs text-gray-400",children:"File"})}),(0,b.jsx)("button",{onClick:()=>n(m===a.id?null:a.id),className:"absolute top-1 right-1 p-1 rounded hover:bg-white",children:(0,b.jsx)(e.MoreHorizontal,{size:16})}),m===a.id&&(0,b.jsxs)("div",{className:"absolute right-0 mt-7 w-36 bg-white border rounded shadow z-20",children:[(0,b.jsx)("button",{className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:()=>u(a.url,!0,a.filename||void 0),children:"Download"}),(0,b.jsx)("button",{className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:()=>u(a.url),children:"View"}),(0,b.jsx)("button",{className:"w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-gray-50",onClick:()=>t(a.id),children:"Delete"})]})]}),(0,b.jsx)("div",{className:"mt-2 text-sm",children:(0,b.jsxs)("div",{className:"font-medium truncate",children:[a.filename||"Untitled",o[String(a.id)]&&(0,b.jsxs)("span",{className:"text-xs text-gray-400",children:[" ","· uploading…"]})]})})]},String(a.id)))})]})}},28270,a=>{"use strict";a.s(["default",()=>j],28270);var b=a.i(187924),c=a.i(972596),d=a.i(572131);let e="https://6jnqmj85-80.inc1.devtunnels.ms";function f({open:a,onClose:f,employeeId:h,onSuccess:i}){let[j,k]=(0,d.useState)({oldDepartmentId:"",oldDesignationId:"",newDepartmentId:"",newDesignationId:"",remarks:"",isPromotion:!0,sendNotification:!0}),[l,m]=(0,d.useState)(!1),{data:n}=(0,c.default)(`${e}/admin/departments`,g),{data:o}=(0,c.default)(`${e}/admin/designations`,g);if(!a)return null;let p=async()=>{m(!0);let a=localStorage.getItem("accessToken");await fetch(`${e}/admin/api/promotions/employee/${h}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({oldDepartmentId:Number(j.oldDepartmentId),oldDesignationId:Number(j.oldDesignationId),newDepartmentId:Number(j.newDepartmentId),newDesignationId:Number(j.newDesignationId),isPromotion:!0,sendNotification:!0,remarks:j.remarks})}),m(!1),i(),f()};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl w-full max-w-lg p-6 space-y-4",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Add Promotion"}),(0,b.jsxs)("select",{className:"border rounded px-3 py-2 w-full",value:j.oldDepartmentId,onChange:a=>k({...j,oldDepartmentId:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"Old Department"}),n?.map(a=>(0,b.jsx)("option",{value:a.id,children:a.departmentName},a.id))]}),(0,b.jsxs)("select",{className:"border rounded px-3 py-2 w-full",value:j.oldDesignationId,onChange:a=>k({...j,oldDesignationId:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"Old Designation"}),o?.map(a=>(0,b.jsx)("option",{value:a.id,children:a.designationName},a.id))]}),(0,b.jsxs)("select",{className:"border rounded px-3 py-2 w-full",value:j.newDepartmentId,onChange:a=>k({...j,newDepartmentId:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"New Department"}),n?.map(a=>(0,b.jsx)("option",{value:a.id,children:a.departmentName},a.id))]}),(0,b.jsxs)("select",{className:"border rounded px-3 py-2 w-full",value:j.newDesignationId,onChange:a=>k({...j,newDesignationId:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"New Designation"}),o?.map(a=>(0,b.jsx)("option",{value:a.id,children:a.designationName},a.id))]}),(0,b.jsx)("textarea",{className:"border rounded px-3 py-2 w-full",placeholder:"Remarks",value:j.remarks,onChange:a=>k({...j,remarks:a.target.value})}),(0,b.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,b.jsx)("button",{onClick:f,className:"px-4 py-2 border rounded",children:"Cancel"}),(0,b.jsx)("button",{disabled:l,onClick:p,className:"px-4 py-2 bg-blue-600 text-white rounded",children:l?"Saving...":"Save Promotion"})]})]})})}async function g(a){let b=localStorage.getItem("accessToken"),c=await fetch(a,{headers:{Authorization:`Bearer ${b}`}});if(!c.ok)throw Error("Fetch failed");return c.json()}var h=a.i(879360);let i=async a=>{let b=localStorage.getItem("accessToken");if(!b)throw Error("No token");let c=await fetch(a,{headers:{Authorization:`Bearer ${b}`}});if(!c.ok)throw Error("Failed to fetch promotions");return c.json()};function j({employeeId:a}){let[e,g]=(0,d.useState)(!1),{data:j,isLoading:k,error:l,mutate:m}=(0,c.default)(`https://6jnqmj85-80.inc1.devtunnels.ms/admin/api/promotions/employee/${a}`,i,{revalidateOnFocus:!1});return(0,b.jsxs)("div",{className:"bg-white border rounded-xl p-6 space-y-4",children:[(0,b.jsx)("div",{className:"flex justify-between",children:(0,b.jsx)("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm",children:"+ Add Promotions"})}),(0,b.jsx)(f,{open:e,onClose:()=>g(!1),employeeId:a,onSuccess:m}),k&&(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Loading promotions…"}),l&&(0,b.jsx)("div",{className:"text-sm text-red-500",children:"Failed to load promotions"}),!k&&j?.length===0&&(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"No promotions found"}),(0,b.jsx)("div",{className:"space-y-4",children:j?.map((a,c)=>(0,b.jsxs)("div",{className:"border rounded-lg p-4 flex justify-between items-start",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,b.jsx)("span",{className:"px-2 py-0.5 bg-gray-200 rounded text-xs",children:c+1}),(0,b.jsxs)("span",{children:[new Date(a.createdAt).toLocaleDateString()," ( Promotion From Today )"]})]}),(0,b.jsx)("span",{className:"inline-block px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-xs",children:"Promotion"}),(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("span",{className:"text-blue-600",children:a.oldDesignationName})," ","→"," ",(0,b.jsx)("span",{className:"text-green-600",children:a.newDesignationName})," ",(0,b.jsx)("span",{className:"text-gray-500",children:"(Designation)"})]}),(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("span",{className:"text-blue-600",children:a.oldDepartmentName})," ","→"," ",(0,b.jsx)("span",{className:"text-green-600",children:a.newDepartmentName})]}),a.remarks&&(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a.remarks})]}),(0,b.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded-full",children:(0,b.jsx)(h.MoreVertical,{className:"w-4 h-4 text-gray-500"})})]},a.id))})]})}},19487,a=>{"use strict";a.s(["default",()=>d]);var b=a.i(187924),c=a.i(572131);function d({open:a,onClose:d,employeeId:e,onSuccess:f}){let[g,h]=(0,c.useState)({name:"",email:"",mobile:"",relationship:"",address:""}),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(null);if(!a)return null;let m=async()=>{if(!g.name||!g.email||!g.mobile||!g.relationship)return void l("All required fields must be filled");try{j(!0),l(null);let a=localStorage.getItem("accessToken");if(!a)throw Error("Unauthorized");if(!(await fetch(`https://6jnqmj85-80.inc1.devtunnels.ms/employee/${e}/emergency-contacts`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(g)})).ok)throw Error("Failed to create contact");f(),d()}catch(a){l(a.message)}finally{j(!1)}};return(0,b.jsx)("div",{className:"fixed inset-0 z-50 bg-black/40 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"bg-white w-full max-w-lg rounded-xl p-6 space-y-4",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Add Emergency Contact"}),k&&(0,b.jsx)("div",{className:"text-sm text-red-600",children:k}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)("input",{placeholder:"Name *",className:"border rounded px-3 py-2",value:g.name,onChange:a=>h({...g,name:a.target.value})}),(0,b.jsx)("input",{placeholder:"Relationship *",className:"border rounded px-3 py-2",value:g.relationship,onChange:a=>h({...g,relationship:a.target.value})}),(0,b.jsx)("input",{placeholder:"Email *",className:"border rounded px-3 py-2",value:g.email,onChange:a=>h({...g,email:a.target.value})}),(0,b.jsx)("input",{placeholder:"Mobile *",className:"border rounded px-3 py-2",value:g.mobile,onChange:a=>h({...g,mobile:a.target.value})})]}),(0,b.jsx)("textarea",{placeholder:"Address",className:"border rounded px-3 py-2 w-full min-h-[80px]",value:g.address,onChange:a=>h({...g,address:a.target.value})}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,b.jsx)("button",{onClick:d,className:"px-4 py-2 border rounded-lg",children:"Cancel"}),(0,b.jsx)("button",{onClick:m,disabled:i,className:"px-5 py-2 bg-blue-600 text-white rounded-lg",children:i?"Saving...":"Save"})]})]})})}},922250,a=>{"use strict";a.s(["default",()=>l],922250);var b=a.i(187924),c=a.i(972596),d=a.i(572131),e=a.i(19487),f=a.i(362495);function g({onView:a,onEdit:c,onDelete:e}){let[f,g]=(0,d.useState)(!1);return(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("button",{onClick:()=>g(a=>!a),className:"px-2 py-1 text-gray-600 hover:text-black",children:"⋮"}),f&&(0,b.jsxs)("div",{className:"absolute right-0 mt-1 w-32 bg-white border rounded shadow z-10",children:[(0,b.jsx)("button",{onClick:()=>{a(),g(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100",children:"View"}),(0,b.jsx)("button",{onClick:()=>{c(),g(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100",children:"Edit"}),(0,b.jsx)("button",{onClick:()=>{e(),g(!1)},className:"w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-red-50",children:"Delete"})]})]})}function h({open:a,onClose:c,contact:e,employeeId:f,onSuccess:g}){let[h,i]=(0,d.useState)({name:"",mobile:"",address:"",relationship:""}),[j,k]=(0,d.useState)(!1);if((0,d.useEffect)(()=>{e&&i({name:e.name??"",mobile:e.mobile??"",address:e.address??"",relationship:e.relationship??""})},[e]),!a||!h)return null;let l=async()=>{k(!0);let a=localStorage.getItem("accessToken");await fetch(`/employee/${f}/emergency-contacts/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(h)}),k(!1),g(),c()};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl w-full max-w-lg p-6 space-y-4",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Edit Emergency Contact"}),["name","mobile","relationship","address"].map(a=>(0,b.jsx)("input",{className:"border rounded px-3 py-2 w-full",placeholder:a,value:h[a],onChange:b=>i({...h,[a]:b.target.value})},a)),(0,b.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,b.jsx)("button",{onClick:c,className:"px-4 py-2 border rounded",children:"Cancel"}),(0,b.jsx)("button",{onClick:l,disabled:j,className:"px-4 py-2 bg-blue-600 text-white rounded",children:j?"Saving...":"Update"})]})]})})}function i({open:a,onClose:c,contact:d}){return a&&d?(0,b.jsx)("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"bg-white w-full max-w-md rounded-xl p-6 space-y-3",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Emergency Contact"}),[["Name",d.name],["Relationship",d.relationship],["Email",d.email],["Mobile",d.mobile],["Address",d.address]].map(([a,c])=>(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:a}),(0,b.jsx)("p",{className:"text-sm",children:c||"--"})]},a)),(0,b.jsx)("div",{className:"flex justify-end pt-4",children:(0,b.jsx)("button",{onClick:c,className:"px-4 py-2 border rounded-lg",children:"Close"})})]})}):null}let j="https://6jnqmj85-80.inc1.devtunnels.ms",k=async a=>{let b=localStorage.getItem("accessToken");if(!b)throw Error("No token");let c=await fetch(a,{headers:{Authorization:`Bearer ${b}`}});if(!c.ok)throw Error("Failed to fetch emergency contacts");return c.json()};function l({employeeId:a}){let[l,m]=(0,d.useState)(null),[n,o]=(0,d.useState)(null),[p,q]=(0,d.useState)(!1),{data:r,isLoading:s,error:t}=(0,c.default)(`${j}/employee/${a}/emergency-contacts`,k,{revalidateOnFocus:!1}),u=async b=>{let c=localStorage.getItem("accessToken");await fetch(`${j}/employee/${a}/emergency-contacts/${b}`,{method:"DELETE",headers:{Authorization:`Bearer ${c}`}}),(0,f.mutate)(`${j}/employee/${a}/emergency-contacts`)};return(0,b.jsxs)("div",{className:"bg-white border rounded-xl p-6 space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("button",{onClick:()=>q(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm",children:"+ Create New"}),(0,b.jsx)(e.default,{open:p,onClose:()=>q(!1),employeeId:a,onSuccess:()=>(0,f.mutate)(`${j}/employee/${a}/emergency-contacts`)})]}),(0,b.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{className:"bg-blue-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"Name"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"Email"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"Mobile"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"Relationship"}),(0,b.jsx)("th",{className:"px-4 py-3 text-center font-medium",children:"Action"})]})}),(0,b.jsxs)("tbody",{children:[s&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:5,className:"px-4 py-6 text-center text-gray-500",children:"Loading emergency contacts…"})}),t&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:5,className:"px-4 py-6 text-center text-red-500",children:"Failed to load emergency contacts"})}),!s&&r?.length===0&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:5,className:"px-4 py-6 text-center text-gray-500",children:"No emergency contacts found"})}),r?.map(a=>(0,b.jsxs)("tr",{className:"border-t",children:[(0,b.jsx)("td",{className:"px-4 py-3",children:a.name}),(0,b.jsx)("td",{className:"px-4 py-3",children:a.email}),(0,b.jsx)("td",{className:"px-4 py-3",children:a.mobile}),(0,b.jsx)("td",{className:"px-4 py-3",children:a.relationship}),(0,b.jsx)("td",{className:"px-4 py-3 text-center",children:(0,b.jsx)(g,{onView:()=>m(a),onEdit:()=>o(a),onDelete:()=>u(a.id)})})]},a.id))]})]})}),(0,b.jsx)(i,{open:!!l,contact:l,onClose:()=>m(null)}),(0,b.jsx)(h,{open:!!n,contact:n,employeeId:a,onClose:()=>o(null),onSuccess:()=>(0,f.mutate)(`${j}/employee/${a}/emergency-contacts`)})]})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__ab8209fe._.js.map