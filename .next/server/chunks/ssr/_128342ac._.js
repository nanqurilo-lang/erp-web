module.exports=[47349,(a,b,c)=>{"use strict";var d=a.r(572131);"function"==typeof Object.is&&Object.is,d.useState,d.useEffect,d.useLayoutEffect,d.useDebugValue,c.useSyncExternalStore=void 0!==d.useSyncExternalStore?d.useSyncExternalStore:function(a,b){return b()}},487610,(a,b,c)=>{"use strict";b.exports=a.r(47349)},427964,a=>{"use strict";a.s(["default",()=>k],427964);var b=a.i(187924),c=a.i(972596),d=a.i(572131);function e({open:a,onClose:c,data:d}){if(!a||!d)return null;let e=a=>a?new Date(`1970-01-01T${a}`).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"--",i=d.clockInTime&&d.clockOutTime?function(a,b){let c=new Date(`1970-01-01T${a}`),d=(new Date(`1970-01-01T${b}`).getTime()-c.getTime())/1e3,e=Math.floor(d/3600),f=Math.floor(d%3600/60);return`${e}h ${f}m`}(d.clockInTime,d.clockOutTime):"â€”";return(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:(0,b.jsxs)("div",{className:"bg-white w-full max-w-4xl rounded-xl shadow-lg",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center px-6 py-4 border-b",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Attendance Details"}),(0,b.jsx)("button",{onClick:c,className:"text-2xl",children:"Ã—"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-6 p-6",children:[(0,b.jsxs)("div",{className:"border rounded-lg p-4 space-y-4",children:[(0,b.jsxs)("h3",{className:"font-medium",children:["Date â€“ ",d.date," (",new Date(d.date).toLocaleDateString("en-US",{weekday:"long"}),")"]}),(0,b.jsx)(f,{label:"Clock In",value:e(d.clockInTime)}),(0,b.jsx)("div",{className:"flex justify-center py-6",children:(0,b.jsx)("div",{className:"w-32 h-32 rounded-full border-4 border-blue-500 flex items-center justify-center text-lg font-semibold",children:i})}),(0,b.jsx)(f,{label:"Clock Out",value:e(d.clockOutTime)})]}),(0,b.jsxs)("div",{className:"border rounded-lg p-4 space-y-6",children:[(0,b.jsx)("h3",{className:"font-medium",children:"Activity"}),(0,b.jsx)(g,{title:"Clock In",time:e(d.clockInTime),location:d.clockInLocation,workingFrom:d.clockInWorkingFrom,late:d.late}),(0,b.jsx)(g,{title:"Clock Out",time:d.clockOutTime?e(d.clockOutTime):"Did not clock out",location:d.clockOutLocation,workingFrom:d.clockOutWorkingFrom}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 pt-2 text-sm",children:[d.holiday&&h("Holiday","â­"),d.leave&&h("Leave","â›”"),d.late&&h("Late","â°"),d.halfDay&&h("Half Day","Â½"),d.isPresent&&h("Present","âœ”")]})]})]})]})})}let f=({label:a,value:c})=>(0,b.jsxs)("div",{className:"bg-gray-50 border rounded-lg p-3",children:[(0,b.jsx)("div",{className:"text-sm text-gray-500",children:a}),(0,b.jsx)("div",{className:"font-medium",children:c})]}),g=({title:a,time:c,location:d,workingFrom:e,late:f})=>(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a}),(0,b.jsxs)("div",{className:"text-sm text-gray-600 flex gap-3 items-center",children:["â± ",c,d&&(0,b.jsxs)(b.Fragment,{children:["ðŸ“ ",d]}),e&&(0,b.jsxs)(b.Fragment,{children:["(",e,")"]}),f&&(0,b.jsx)("span",{className:"text-red-500",children:"âš  Late"})]})]}),h=(a,c)=>(0,b.jsxs)("span",{className:"flex items-center gap-1 px-2 py-1 border rounded text-xs",children:[c," ",a]}),i=async a=>{let b=localStorage.getItem("accessToken");if(!b)throw Error("No token");let c=await fetch(a,{headers:{Authorization:`Bearer ${b}`}});if(!c.ok)throw Error("Failed to fetch attendance");return c.json()},j={PRESENT:(0,b.jsx)("span",{className:"text-green-600",children:"âœ”"}),HOLIDAY:(0,b.jsx)("span",{className:"text-yellow-500",children:"â˜…"}),LEAVE:(0,b.jsx)("span",{className:"text-red-500",children:"â›”"}),ABSENT:(0,b.jsx)("span",{className:"text-gray-400",children:"â€”"})};function k(){let a=new Date,[f,g]=(0,d.useState)(a.getMonth()+1),[h,k]=(0,d.useState)(a.getFullYear()),[l,m]=(0,d.useState)(!1),[n,o]=(0,d.useState)(null),[p,q]=(0,d.useState)(!1),{data:r,isLoading:s}=(0,c.default)("https://6jnqmj85-80.inc1.devtunnels.ms/employee/attendance/me",i,{revalidateOnFocus:!1}),t=(0,d.useMemo)(()=>{let a={};return r?.forEach(b=>{a[b.employeeId]||(a[b.employeeId]={employeeName:b.employeeName,profilePictureUrl:b.profilePictureUrl,records:{}}),a[b.employeeId].records[b.date]=b}),a},[r]),u=new Date(h,f,0).getDate();return s?(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Loading attendanceâ€¦"}):(0,b.jsxs)("div",{className:"bg-white border rounded-lg p-4 space-y-4",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)("select",{value:f,onChange:a=>g(Number(a.target.value)),className:"border rounded px-2 py-1",children:Array.from({length:12}).map((a,c)=>(0,b.jsx)("option",{value:c+1,children:new Date(0,c).toLocaleString("default",{month:"long"})},c))}),(0,b.jsx)("select",{value:h,onChange:a=>k(Number(a.target.value)),className:"border rounded px-2 py-1",children:[2024,2025,2026].map(a=>(0,b.jsx)("option",{children:a},a))})]})}),(0,b.jsxs)("div",{className:"flex gap-4 text-xs text-gray-600",children:[(0,b.jsx)("span",{children:"â˜… Holiday"}),(0,b.jsx)("span",{children:"âœ” Present"}),(0,b.jsx)("span",{children:"â›” Leave"}),(0,b.jsx)("span",{children:"â° Late"}),(0,b.jsx)("span",{children:"Â½ Half Day"})]}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full border text-xs",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-3 py-2 text-left",children:"Employee"}),Array.from({length:u}).map((a,c)=>(0,b.jsx)("th",{className:"px-2 py-2 text-center",children:c+1},c)),(0,b.jsx)("th",{className:"px-3 py-2",children:"Total"})]})}),(0,b.jsx)("tbody",{children:Object.entries(t).map(([a,c])=>(0,b.jsxs)("tr",{className:"border-t",children:[(0,b.jsxs)("td",{className:"px-3 py-2 font-medium flex items-center gap-2",children:[c.profilePictureUrl&&(0,b.jsx)("img",{src:c.profilePictureUrl,className:"w-6 h-6 rounded-full",alt:""}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{children:c.employeeName}),(0,b.jsx)("div",{className:"text-[10px] text-gray-500",children:a})]})]}),Array.from({length:u}).map((a,d)=>{let e=String(d+1).padStart(2,"0"),g=`${h}-${String(f).padStart(2,"0")}-${e}`,i=c.records[g];return(0,b.jsx)("td",{className:"px-2 py-2 text-center",children:i?(0,b.jsxs)("button",{onClick:()=>{o(i),q(!0)},className:"flex flex-col items-center text-xs hover:scale-110 transition",children:[j[i.status],i.late&&(0,b.jsx)("span",{children:"â°"}),i.halfDay&&(0,b.jsx)("span",{children:"Â½"})]}):"--"},d)}),(0,b.jsxs)("td",{className:"px-3 py-2 text-center font-semibold",children:[Object.values(c.records).filter(a=>"PRESENT"===a.status&&a.date.startsWith(`${h}-${String(f).padStart(2,"0")}`)).length,"/",u]})]},a))})]})}),(0,b.jsx)(e,{open:p,onClose:()=>q(!1),data:n})]})}}];

//# sourceMappingURL=_128342ac._.js.map