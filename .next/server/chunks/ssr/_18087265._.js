module.exports=[591119,a=>{"use strict";a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f]);var b=a.i(187924),c=a.i(368114);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}},47349,(a,b,c)=>{"use strict";var d=a.r(572131);"function"==typeof Object.is&&Object.is,d.useState,d.useEffect,d.useLayoutEffect,d.useDebugValue,c.useSyncExternalStore=void 0!==d.useSyncExternalStore?d.useSyncExternalStore:function(a,b){return b()}},487610,(a,b,c)=>{"use strict";b.exports=a.r(47349)},367329,a=>{"use strict";a.s(["List",()=>b],367329);let b=(0,a.i(883706).default)("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]])},870430,a=>{"use strict";a.s(["Label",()=>g],870430);var b=a.i(187924),c=a.i(572131),d=a.i(30553),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(368114);function g({className:a,...c}){return(0,b.jsx)(e,{"data-slot":"label",className:(0,f.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}},587532,a=>{"use strict";a.s(["Search",()=>b],587532);let b=(0,a.i(883706).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},781560,a=>{"use strict";a.s(["Trash2",()=>b],781560);let b=(0,a.i(883706).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},84218,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(883706).default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},814574,a=>{"use strict";a.s(["Dialog",()=>f,"DialogContent",()=>j,"DialogHeader",()=>k,"DialogTitle",()=>l,"DialogTrigger",()=>g]);var b=a.i(187924),c=a.i(897942),d=a.i(422262),e=a.i(368114);function f({...a}){return(0,b.jsx)(c.Root,{"data-slot":"dialog",...a})}function g({...a}){return(0,b.jsx)(c.Trigger,{"data-slot":"dialog-trigger",...a})}function h({...a}){return(0,b.jsx)(c.Portal,{"data-slot":"dialog-portal",...a})}function i({className:a,...d}){return(0,b.jsx)(c.Overlay,{"data-slot":"dialog-overlay",className:(0,e.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...d})}function j({className:a,children:f,showCloseButton:g=!0,...j}){return(0,b.jsxs)(h,{"data-slot":"dialog-portal",children:[(0,b.jsx)(i,{}),(0,b.jsxs)(c.Content,{"data-slot":"dialog-content",className:(0,e.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...j,children:[f,g&&(0,b.jsxs)(c.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,b.jsx)(d.XIcon,{}),(0,b.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function k({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"dialog-header",className:(0,e.cn)("flex flex-col gap-2 text-center sm:text-left",a),...c})}function l({className:a,...d}){return(0,b.jsx)(c.Title,{"data-slot":"dialog-title",className:(0,e.cn)("text-lg leading-none font-semibold",a),...d})}},997514,(a,b,c)=>{"use strict";var d=a.r(572131),e=a.r(487610),f="function"==typeof Object.is?Object.is:function(a,b){return a===b&&(0!==a||1/a==1/b)||a!=a&&b!=b},g=e.useSyncExternalStore,h=d.useRef,i=d.useEffect,j=d.useMemo,k=d.useDebugValue;c.useSyncExternalStoreWithSelector=function(a,b,c,d,e){var l=h(null);if(null===l.current){var m={hasValue:!1,value:null};l.current=m}else m=l.current;var n=g(a,(l=j(function(){function a(a){if(!i){if(i=!0,g=a,a=d(a),void 0!==e&&m.hasValue){var b=m.value;if(e(b,a))return h=b}return h=a}if(b=h,f(g,a))return b;var c=d(a);return void 0!==e&&e(b,c)?(g=a,b):(g=a,h=c)}var g,h,i=!1,j=void 0===c?null:c;return[function(){return a(b())},null===j?void 0:function(){return a(j())}]},[b,c,d,e]))[0],l[1]);return i(function(){m.hasValue=!0,m.value=n},[n]),k(n),n}},864442,(a,b,c)=>{"use strict";b.exports=a.r(997514)},225581,a=>{"use strict";function b(a,b){return a*=1,b*=1,function(c){return a*(1-c)+b*c}}a.s(["default",()=>b])},439776,516936,a=>{"use strict";function b(a,b,c){a.prototype=b.prototype=c,c.constructor=a}function c(a,b){var c=Object.create(a.prototype);for(var d in b)c[d]=b[d];return c}function d(){}a.s(["color",()=>r],439776),a.s(["default",()=>r,"rgb",()=>u],516936);var e="\\s*([+-]?\\d+)\\s*",f="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",g="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",h=/^#([0-9a-f]{3,8})$/,i=RegExp(`^rgb\\(${e},${e},${e}\\)$`),j=RegExp(`^rgb\\(${g},${g},${g}\\)$`),k=RegExp(`^rgba\\(${e},${e},${e},${f}\\)$`),l=RegExp(`^rgba\\(${g},${g},${g},${f}\\)$`),m=RegExp(`^hsl\\(${f},${g},${g}\\)$`),n=RegExp(`^hsla\\(${f},${g},${g},${f}\\)$`),o={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function p(){return this.rgb().formatHex()}function q(){return this.rgb().formatRgb()}function r(a){var b,c;return a=(a+"").trim().toLowerCase(),(b=h.exec(a))?(c=b[1].length,b=parseInt(b[1],16),6===c?s(b):3===c?new v(b>>8&15|b>>4&240,b>>4&15|240&b,(15&b)<<4|15&b,1):8===c?t(b>>24&255,b>>16&255,b>>8&255,(255&b)/255):4===c?t(b>>12&15|b>>8&240,b>>8&15|b>>4&240,b>>4&15|240&b,((15&b)<<4|15&b)/255):null):(b=i.exec(a))?new v(b[1],b[2],b[3],1):(b=j.exec(a))?new v(255*b[1]/100,255*b[2]/100,255*b[3]/100,1):(b=k.exec(a))?t(b[1],b[2],b[3],b[4]):(b=l.exec(a))?t(255*b[1]/100,255*b[2]/100,255*b[3]/100,b[4]):(b=m.exec(a))?B(b[1],b[2]/100,b[3]/100,1):(b=n.exec(a))?B(b[1],b[2]/100,b[3]/100,b[4]):o.hasOwnProperty(a)?s(o[a]):"transparent"===a?new v(NaN,NaN,NaN,0):null}function s(a){return new v(a>>16&255,a>>8&255,255&a,1)}function t(a,b,c,d){return d<=0&&(a=b=c=NaN),new v(a,b,c,d)}function u(a,b,c,e){var f;return 1==arguments.length?((f=a)instanceof d||(f=r(f)),f)?new v((f=f.rgb()).r,f.g,f.b,f.opacity):new v:new v(a,b,c,null==e?1:e)}function v(a,b,c,d){this.r=+a,this.g=+b,this.b=+c,this.opacity=+d}function w(){return`#${A(this.r)}${A(this.g)}${A(this.b)}`}function x(){let a=y(this.opacity);return`${1===a?"rgb(":"rgba("}${z(this.r)}, ${z(this.g)}, ${z(this.b)}${1===a?")":`, ${a})`}`}function y(a){return isNaN(a)?1:Math.max(0,Math.min(1,a))}function z(a){return Math.max(0,Math.min(255,Math.round(a)||0))}function A(a){return((a=z(a))<16?"0":"")+a.toString(16)}function B(a,b,c,d){return d<=0?a=b=c=NaN:c<=0||c>=1?a=b=NaN:b<=0&&(a=NaN),new D(a,b,c,d)}function C(a){if(a instanceof D)return new D(a.h,a.s,a.l,a.opacity);if(a instanceof d||(a=r(a)),!a)return new D;if(a instanceof D)return a;var b=(a=a.rgb()).r/255,c=a.g/255,e=a.b/255,f=Math.min(b,c,e),g=Math.max(b,c,e),h=NaN,i=g-f,j=(g+f)/2;return i?(h=b===g?(c-e)/i+(c<e)*6:c===g?(e-b)/i+2:(b-c)/i+4,i/=j<.5?g+f:2-g-f,h*=60):i=j>0&&j<1?0:h,new D(h,i,j,a.opacity)}function D(a,b,c,d){this.h=+a,this.s=+b,this.l=+c,this.opacity=+d}function E(a){return(a=(a||0)%360)<0?a+360:a}function F(a){return Math.max(0,Math.min(1,a||0))}function G(a,b,c){return(a<60?b+(c-b)*a/60:a<180?c:a<240?b+(c-b)*(240-a)/60:b)*255}b(d,r,{copy(a){return Object.assign(new this.constructor,this,a)},displayable(){return this.rgb().displayable()},hex:p,formatHex:p,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return C(this).formatHsl()},formatRgb:q,toString:q}),b(v,u,c(d,{brighter(a){return a=null==a?1.4285714285714286:Math.pow(1.4285714285714286,a),new v(this.r*a,this.g*a,this.b*a,this.opacity)},darker(a){return a=null==a?.7:Math.pow(.7,a),new v(this.r*a,this.g*a,this.b*a,this.opacity)},rgb(){return this},clamp(){return new v(z(this.r),z(this.g),z(this.b),y(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:w,formatHex:w,formatHex8:function(){return`#${A(this.r)}${A(this.g)}${A(this.b)}${A((isNaN(this.opacity)?1:this.opacity)*255)}`},formatRgb:x,toString:x})),b(D,function(a,b,c,d){return 1==arguments.length?C(a):new D(a,b,c,null==d?1:d)},c(d,{brighter(a){return a=null==a?1.4285714285714286:Math.pow(1.4285714285714286,a),new D(this.h,this.s,this.l*a,this.opacity)},darker(a){return a=null==a?.7:Math.pow(.7,a),new D(this.h,this.s,this.l*a,this.opacity)},rgb(){var a=this.h%360+(this.h<0)*360,b=isNaN(a)||isNaN(this.s)?0:this.s,c=this.l,d=c+(c<.5?c:1-c)*b,e=2*c-d;return new v(G(a>=240?a-240:a+120,e,d),G(a,e,d),G(a<120?a+240:a-120,e,d),this.opacity)},clamp(){return new D(E(this.h),F(this.s),F(this.l),y(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let a=y(this.opacity);return`${1===a?"hsl(":"hsla("}${E(this.h)}, ${100*F(this.s)}%, ${100*F(this.l)}%${1===a?")":`, ${a})`}`}}))},871131,a=>{"use strict";a.s(["interpolateNumber",()=>b.default]);var b=a.i(225581)},519473,705572,a=>{"use strict";a.s(["default",()=>f],519473);var b=a.i(516936);function c(a,b,c,d,e){var f=a*a,g=f*a;return((1-3*a+3*f-g)*b+(4-6*f+3*g)*c+(1+3*a+3*f-3*g)*d+g*e)/6}a.s(["default",()=>d],705572);let d=a=>()=>a;function e(a,b){var c=b-a;return c?function(b){return a+b*c}:d(isNaN(a)?b:a)}let f=function a(c){var f,g=1==(f=+c)?e:function(a,b){var c,e,g;return b-a?(c=a,e=b,c=Math.pow(c,g=f),e=Math.pow(e,g)-c,g=1/g,function(a){return Math.pow(c+a*e,g)}):d(isNaN(a)?b:a)};function h(a,c){var d=g((a=(0,b.rgb)(a)).r,(c=(0,b.rgb)(c)).r),f=g(a.g,c.g),h=g(a.b,c.b),i=e(a.opacity,c.opacity);return function(b){return a.r=d(b),a.g=f(b),a.b=h(b),a.opacity=i(b),a+""}}return h.gamma=a,h}(1);function g(a){return function(c){var d,e,f=c.length,g=Array(f),h=Array(f),i=Array(f);for(d=0;d<f;++d)e=(0,b.rgb)(c[d]),g[d]=e.r||0,h[d]=e.g||0,i[d]=e.b||0;return g=a(g),h=a(h),i=a(i),e.opacity=1,function(a){return e.r=g(a),e.g=h(a),e.b=i(a),e+""}}}g(function(a){var b=a.length-1;return function(d){var e=d<=0?d=0:d>=1?(d=1,b-1):Math.floor(d*b),f=a[e],g=a[e+1],h=e>0?a[e-1]:2*f-g,i=e<b-1?a[e+2]:2*g-f;return c((d-e/b)*b,h,f,g,i)}}),g(function(a){var b=a.length;return function(d){var e=Math.floor(((d%=1)<0?++d:d)*b),f=a[(e+b-1)%b],g=a[e%b],h=a[(e+1)%b],i=a[(e+2)%b];return c((d-e/b)*b,f,g,h,i)}})},738916,a=>{"use strict";a.s(["default",()=>e]);var b=a.i(225581),c=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,d=RegExp(c.source,"g");function e(a,e){var f,g,h,i,j,k=c.lastIndex=d.lastIndex=0,l=-1,m=[],n=[];for(a+="",e+="";(h=c.exec(a))&&(i=d.exec(e));)(j=i.index)>k&&(j=e.slice(k,j),m[l]?m[l]+=j:m[++l]=j),(h=h[0])===(i=i[0])?m[l]?m[l]+=i:m[++l]=i:(m[++l]=null,n.push({i:l,x:(0,b.default)(h,i)})),k=d.lastIndex;return k<e.length&&(j=e.slice(k),m[l]?m[l]+=j:m[++l]=j),m.length<2?n[0]?(f=n[0].x,function(a){return f(a)+""}):(g=e,function(){return g}):(e=n.length,function(a){for(var b,c=0;c<e;++c)m[(b=n[c]).i]=b.x(a);return m.join("")})}},806709,882883,a=>{"use strict";a.s(["EllipsisVertical",()=>b.default],806709);var b=a.i(84218);a.s(["PencilLine",()=>c],882883);let c=(0,a.i(883706).default)("pencil-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},726027,a=>{"use strict";a.s(["CreateDepartmentForm",()=>i]);var b=a.i(187924),c=a.i(572131),d=a.i(699570),e=a.i(866718),f=a.i(870430),g=a.i(580701),h=a.i(823292);function i({parents:a,initialName:i="",initialParentId:j=null,editId:k=null,onSuccess:l}){let[m,n]=(0,c.useState)(i),[o,p]=(0,c.useState)(j),[q,r]=(0,c.useState)(!1);(0,c.useEffect)(()=>{n(i)},[i]),(0,c.useEffect)(()=>{p(j)},[j]);let s=(0,c.useMemo)(()=>a.sort((a,b)=>a.departmentName.localeCompare(b.departmentName)),[a]),t=async a=>{if(a.preventDefault(),!m.trim())return void h.toast.error("Department name is required");try{throw r(!0),Error("Access token not found")}catch(a){h.toast.error("Request failed",{description:a.message})}finally{r(!1)}};return(0,b.jsxs)("form",{onSubmit:t,className:"grid gap-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(f.Label,{htmlFor:"dept-name",children:"Department name"}),(0,b.jsx)(e.Input,{id:"dept-name",value:m,onChange:a=>n(a.target.value),placeholder:"e.g. Marketing"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(f.Label,{children:"Parent department"}),(0,b.jsxs)(g.Select,{value:null===o?"none":String(o),onValueChange:a=>p("none"===a?null:Number(a)),children:[(0,b.jsx)(g.SelectTrigger,{children:(0,b.jsx)(g.SelectValue,{placeholder:"No parent"})}),(0,b.jsxs)(g.SelectContent,{children:[(0,b.jsx)(g.SelectItem,{value:"none",children:"No parent"}),s.map(a=>(0,b.jsx)(g.SelectItem,{value:String(a.id),children:a.departmentName},a.id))]})]})]}),(0,b.jsx)(d.Button,{type:"submit",disabled:q,children:q?k?"Updating...":"Creating...":k?"Update Department":"Create Department"})]})}},616642,a=>{"use strict";a.s(["default",()=>E],616642);var b=a.i(187924),c=a.i(572131),d=a.i(972596),e=a.i(699570),f=a.i(591119),g=a.i(512998),h=a.i(814574),i=a.i(866718),j=a.i(505084),k=a.i(367329),l=a.i(862214),m=a.i(587532),n=a.i(726027),o=a.i(50944),p=a.i(206015),q=a.i(335732),r=a.i(806709),s=a.i(781560),t=a.i(882883),u=a.i(823292);function v({data:a,onDeleted:c}){let d=(0,o.useRouter)(),f=async a=>{if(confirm("Delete this department?"))try{let b=localStorage.getItem("accessToken");if(!b)throw Error("Access token not found");let d=await fetch(`https://6jnqmj85-80.inc1.devtunnels.ms/admin/departments/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}});if(!d.ok){let a=await d.json().catch(()=>({}));throw Error(a.error||"Failed to delete department")}u.toast.success("Department deleted"),c?.()}catch(a){u.toast.error("Delete failed",{description:a.message})}};return(0,b.jsx)("div",{className:"rounded-lg border bg-card",children:(0,b.jsxs)(p.Table,{children:[(0,b.jsx)(p.TableHeader,{children:(0,b.jsxs)(p.TableRow,{children:[(0,b.jsx)(p.TableHead,{className:"w-[45%]",children:"Name"}),(0,b.jsx)(p.TableHead,{className:"w-[45%]",children:"Parent Department"}),(0,b.jsx)(p.TableHead,{className:"text-left w-[10%]",children:"Action"})]})}),(0,b.jsxs)(p.TableBody,{children:[a.map(a=>(0,b.jsxs)(p.TableRow,{children:[(0,b.jsx)(p.TableCell,{className:"font-medium",children:a.departmentName}),(0,b.jsx)(p.TableCell,{className:"text-muted-foreground",children:a.parentDepartmentName??"--"}),(0,b.jsx)(p.TableCell,{className:"text-left",children:(0,b.jsxs)(q.DropdownMenu,{children:[(0,b.jsx)(q.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(r.EllipsisVertical,{className:"h-5 w-5"})})}),(0,b.jsxs)(q.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(q.DropdownMenuLabel,{children:"Actions"}),(0,b.jsx)(q.DropdownMenuSeparator,{}),(0,b.jsxs)(q.DropdownMenuItem,{onClick:()=>{var b;return b=a.id,void d.push(`/hr/department/${b}`)},children:[(0,b.jsx)(t.PencilLine,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,b.jsx)(q.DropdownMenuSeparator,{}),(0,b.jsxs)(q.DropdownMenuItem,{className:"text-destructive focus:text-destructive",onClick:()=>f(a.id),children:[(0,b.jsx)(s.Trash2,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},a.id)),0===a.length&&(0,b.jsx)(p.TableRow,{children:(0,b.jsx)(p.TableCell,{colSpan:3,className:"text-center text-muted-foreground",children:"No departments found"})})]})]})})}var w=a.i(115742),x=a.i(874054),y=a.i(192229),z=a.i(759960),A=a.i(77627);function B(a,b,c="TB"){let d=new A.default.graphlib.Graph;return d.setGraph({rankdir:c}),d.setDefaultEdgeLabel(()=>({})),a.forEach(a=>d.setNode(a.id,{width:220,height:80})),b.forEach(a=>d.setEdge(a.source,a.target)),A.default.layout(d),{nodes:a.map(a=>{let b=d.node(a.id);return b?{...a,position:{x:b.x-110,y:b.y-40}}:a}),edges:b}}function C({data:a,onReorder:d}){let{getIntersectingNodes:e}=(0,g.useReactFlow)(),[f]=(0,c.useState)("TB"),[h,i]=(0,c.useState)(0),j=(0,c.useMemo)(()=>a.map(a=>({id:a.id.toString(),type:"default",data:{label:a.departmentName},position:{x:0,y:0},style:{padding:10,borderRadius:8,background:"#fff",border:"1px solid #888"}})),[a]),k=(0,c.useMemo)(()=>a.filter(a=>a.parentDepartmentId).map(a=>({id:`edge-${a.parentDepartmentId}-${a.id}`,source:a.parentDepartmentId.toString(),target:a.id.toString(),animated:!0})),[a]),{nodes:l,edges:m}=(0,c.useMemo)(()=>B(j,k,f),[j,k,f]),[n,o,p]=(0,g.useNodesState)(l),[q,r,s]=(0,g.useEdgesState)(m);(0,c.useEffect)(()=>{let{nodes:a,edges:b}=B(j,k,f);o(a),r(b),i(a=>a+1)},[a]);let t=(0,c.useCallback)(async(b,c)=>{let f=e(c);if(0===f.length)return;let g=f[0],h=Number(c.id),i=Number(g.id),j=a.find(a=>a.id===h);if(!j)return;let k=localStorage.getItem("accessToken");await fetch(`https://6jnqmj85-80.inc1.devtunnels.ms/admin/departments/${h}`,{method:"PUT",headers:{Authorization:`Bearer ${k}`,"Content-Type":"application/json"},body:JSON.stringify({departmentName:j.departmentName,parentDepartmentId:i})}),await d?.()},[e,a,d]);return(0,b.jsx)("div",{className:"w-full h-[700px] border rounded-lg bg-white",children:(0,b.jsxs)(w.default,{nodes:n,edges:q,fitView:!0,onNodesChange:p,onEdgesChange:s,onNodeDragStop:t,children:[(0,b.jsx)(z.MiniMap,{}),(0,b.jsx)(y.Controls,{}),(0,b.jsx)(x.Background,{})]},h)})}let D=async a=>{throw Error("Access token not found")};function E(){let{data:a,error:o,isLoading:p,mutate:q}=(0,d.default)("/api/hr/department",D),[r,s]=c.useState(""),[t,u]=c.useState(!1),[w,x]=c.useState("list"),y=c.useMemo(()=>{if(!a)return[];let b=r.trim().toLowerCase();return b?a.filter(a=>{let c=a.departmentName.toLowerCase().includes(b),d=String(a.id)===b,e=a.parentDepartmentName?.toLowerCase().includes(b);return c||e||d}):a},[a,r]);return(0,b.jsxs)("main",{className:"container mx-auto max-w-6xl p-4 md:p-6",children:[(0,b.jsxs)("header",{className:"mb-4 flex items-center justify-between",children:[(0,b.jsxs)(h.Dialog,{open:t,onOpenChange:u,children:[(0,b.jsx)(h.DialogTrigger,{asChild:!0,children:(0,b.jsx)(e.Button,{children:"+ Add Department"})}),(0,b.jsxs)(h.DialogContent,{children:[(0,b.jsx)(h.DialogHeader,{children:(0,b.jsx)(h.DialogTitle,{children:"Add Department"})}),(0,b.jsx)(n.CreateDepartmentForm,{parents:a??[],onSuccess:async()=>{u(!1),await q()}})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("div",{className:"relative w-64",children:[(0,b.jsx)(m.Search,{className:"absolute left-2 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(i.Input,{placeholder:"Search departments...",className:"pl-8",value:r,onChange:a=>s(a.target.value)})]}),(0,b.jsx)(e.Button,{variant:"list"===w?"default":"outline",size:"icon","aria-label":"List View",onClick:()=>x("list"),children:(0,b.jsx)(k.List,{className:"h-4 w-4"})}),(0,b.jsx)(e.Button,{variant:"tree"===w?"default":"outline",size:"icon","aria-label":"Hierarchy View",onClick:()=>x("tree"),children:(0,b.jsx)(l.Network,{className:"h-4 w-4"})})]})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{className:"text-pretty",children:"list"===w?"Departments":"Department Hierarchy"})}),(0,b.jsxs)(f.CardContent,{className:"space-y-4",children:[p&&(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Loading departments..."}),o&&(0,b.jsxs)("div",{className:"text-sm text-destructive",children:["Failed to load: ",String(o)]}),!p&&!o&&"list"===w&&(0,b.jsx)(v,{data:y,onDeleted:async()=>q()}),"tree"===w&&(0,b.jsx)(g.ReactFlowProvider,{children:(0,b.jsx)(C,{data:a??[],onReorder:q})}),(0,b.jsx)(j.Separator,{}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[(0,b.jsx)("span",{children:"Result per page - 9"}),(0,b.jsx)("span",{children:"Page 1 of 1"})]})]})]})]})}}];

//# sourceMappingURL=_18087265._.js.map