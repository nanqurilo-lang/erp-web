module.exports=[47349,(a,b,c)=>{"use strict";var d=a.r(572131);"function"==typeof Object.is&&Object.is,d.useState,d.useEffect,d.useLayoutEffect,d.useDebugValue,c.useSyncExternalStore=void 0!==d.useSyncExternalStore?d.useSyncExternalStore:function(a,b){return b()}},487610,(a,b,c)=>{"use strict";b.exports=a.r(47349)},362495,a=>{"use strict";a.s(["mutate",()=>b.j]);var b=a.i(28971)},47772,a=>{"use strict";a.s(["default",()=>d]);var b=a.i(187924),c=a.i(572131);function d({open:a,onClose:d,employeeId:e,onSuccess:f}){let[g,h]=(0,c.useState)({name:"",email:"",mobile:"",relationship:"",address:""}),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(null);if(!a)return null;let m=async()=>{if(!g.name||!g.email||!g.mobile||!g.relationship)return void l("All required fields must be filled");try{j(!0),l(null);let a=localStorage.getItem("accessToken");if(!a)throw Error("Unauthorized");if(!(await fetch(`https://6jnqmj85-80.inc1.devtunnels.ms/employee/${e}/emergency-contacts`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(g)})).ok)throw Error("Failed to create contact");f(),d()}catch(a){l(a.message)}finally{j(!1)}};return(0,b.jsx)("div",{className:"fixed inset-0 z-50 bg-black/40 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"bg-white w-full max-w-lg rounded-xl p-6 space-y-4",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Add Emergency Contact"}),k&&(0,b.jsx)("div",{className:"text-sm text-red-600",children:k}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)("input",{placeholder:"Name *",className:"border rounded px-3 py-2",value:g.name,onChange:a=>h({...g,name:a.target.value})}),(0,b.jsx)("input",{placeholder:"Relationship *",className:"border rounded px-3 py-2",value:g.relationship,onChange:a=>h({...g,relationship:a.target.value})}),(0,b.jsx)("input",{placeholder:"Email *",className:"border rounded px-3 py-2",value:g.email,onChange:a=>h({...g,email:a.target.value})}),(0,b.jsx)("input",{placeholder:"Mobile *",className:"border rounded px-3 py-2",value:g.mobile,onChange:a=>h({...g,mobile:a.target.value})})]}),(0,b.jsx)("textarea",{placeholder:"Address",className:"border rounded px-3 py-2 w-full min-h-[80px]",value:g.address,onChange:a=>h({...g,address:a.target.value})}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,b.jsx)("button",{onClick:d,className:"px-4 py-2 border rounded-lg",children:"Cancel"}),(0,b.jsx)("button",{onClick:m,disabled:i,className:"px-5 py-2 bg-blue-600 text-white rounded-lg",children:i?"Saving...":"Save"})]})]})})}},549852,a=>{"use strict";a.s(["default",()=>l],549852);var b=a.i(187924),c=a.i(972596),d=a.i(572131),e=a.i(47772),f=a.i(362495);function g({onView:a,onEdit:c,onDelete:e}){let[f,g]=(0,d.useState)(!1);return(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("button",{onClick:()=>g(a=>!a),className:"px-2 py-1 text-gray-600 hover:text-black",children:"⋮"}),f&&(0,b.jsxs)("div",{className:"absolute right-0 mt-1 w-32 bg-white border rounded shadow z-10",children:[(0,b.jsx)("button",{onClick:()=>{a(),g(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100",children:"View"}),(0,b.jsx)("button",{onClick:()=>{c(),g(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100",children:"Edit"}),(0,b.jsx)("button",{onClick:()=>{e(),g(!1)},className:"w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-red-50",children:"Delete"})]})]})}function h({open:a,onClose:c,contact:e,employeeId:f,onSuccess:g}){let[h,i]=(0,d.useState)({name:"",mobile:"",address:"",relationship:""}),[j,k]=(0,d.useState)(!1);if((0,d.useEffect)(()=>{e&&i({name:e.name??"",mobile:e.mobile??"",address:e.address??"",relationship:e.relationship??""})},[e]),!a||!h)return null;let l=async()=>{k(!0);let a=localStorage.getItem("accessToken");await fetch(`/employee/${f}/emergency-contacts/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(h)}),k(!1),g(),c()};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl w-full max-w-lg p-6 space-y-4",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Edit Emergency Contact"}),["name","mobile","relationship","address"].map(a=>(0,b.jsx)("input",{className:"border rounded px-3 py-2 w-full",placeholder:a,value:h[a],onChange:b=>i({...h,[a]:b.target.value})},a)),(0,b.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,b.jsx)("button",{onClick:c,className:"px-4 py-2 border rounded",children:"Cancel"}),(0,b.jsx)("button",{onClick:l,disabled:j,className:"px-4 py-2 bg-blue-600 text-white rounded",children:j?"Saving...":"Update"})]})]})})}function i({open:a,onClose:c,contact:d}){return a&&d?(0,b.jsx)("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"bg-white w-full max-w-md rounded-xl p-6 space-y-3",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Emergency Contact"}),[["Name",d.name],["Relationship",d.relationship],["Email",d.email],["Mobile",d.mobile],["Address",d.address]].map(([a,c])=>(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:a}),(0,b.jsx)("p",{className:"text-sm",children:c||"--"})]},a)),(0,b.jsx)("div",{className:"flex justify-end pt-4",children:(0,b.jsx)("button",{onClick:c,className:"px-4 py-2 border rounded-lg",children:"Close"})})]})}):null}let j="https://6jnqmj85-80.inc1.devtunnels.ms",k=async a=>{let b=localStorage.getItem("accessToken");if(!b)throw Error("No token");let c=await fetch(a,{headers:{Authorization:`Bearer ${b}`}});if(!c.ok)throw Error("Failed to fetch emergency contacts");return c.json()};function l({employeeId:a}){let[l,m]=(0,d.useState)(null),[n,o]=(0,d.useState)(null),[p,q]=(0,d.useState)(!1),{data:r,isLoading:s,error:t}=(0,c.default)(`${j}/employee/${a}/emergency-contacts`,k,{revalidateOnFocus:!1}),u=async b=>{let c=localStorage.getItem("accessToken");await fetch(`${j}/employee/${a}/emergency-contacts/${b}`,{method:"DELETE",headers:{Authorization:`Bearer ${c}`}}),(0,f.mutate)(`${j}/employee/${a}/emergency-contacts`)};return(0,b.jsxs)("div",{className:"bg-white border rounded-xl p-6 space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("button",{onClick:()=>q(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm",children:"+ Create New"}),(0,b.jsx)(e.default,{open:p,onClose:()=>q(!1),employeeId:a,onSuccess:()=>(0,f.mutate)(`${j}/employee/${a}/emergency-contacts`)})]}),(0,b.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{className:"bg-blue-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"Name"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"Email"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"Mobile"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left font-medium",children:"Relationship"}),(0,b.jsx)("th",{className:"px-4 py-3 text-center font-medium",children:"Action"})]})}),(0,b.jsxs)("tbody",{children:[s&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:5,className:"px-4 py-6 text-center text-gray-500",children:"Loading emergency contacts…"})}),t&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:5,className:"px-4 py-6 text-center text-red-500",children:"Failed to load emergency contacts"})}),!s&&r?.length===0&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:5,className:"px-4 py-6 text-center text-gray-500",children:"No emergency contacts found"})}),r?.map(a=>(0,b.jsxs)("tr",{className:"border-t",children:[(0,b.jsx)("td",{className:"px-4 py-3",children:a.name}),(0,b.jsx)("td",{className:"px-4 py-3",children:a.email}),(0,b.jsx)("td",{className:"px-4 py-3",children:a.mobile}),(0,b.jsx)("td",{className:"px-4 py-3",children:a.relationship}),(0,b.jsx)("td",{className:"px-4 py-3 text-center",children:(0,b.jsx)(g,{onView:()=>m(a),onEdit:()=>o(a),onDelete:()=>u(a.id)})})]},a.id))]})]})}),(0,b.jsx)(i,{open:!!l,contact:l,onClose:()=>m(null)}),(0,b.jsx)(h,{open:!!n,contact:n,employeeId:a,onClose:()=>o(null),onSuccess:()=>(0,f.mutate)(`${j}/employee/${a}/emergency-contacts`)})]})}}];

//# sourceMappingURL=_18c4a0f2._.js.map