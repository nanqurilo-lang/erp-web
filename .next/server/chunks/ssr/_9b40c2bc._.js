module.exports=[941675,a=>{"use strict";a.s(["Calendar",()=>b],941675);let b=(0,a.i(883706).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},367329,a=>{"use strict";a.s(["List",()=>b],367329);let b=(0,a.i(883706).default)("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]])},509839,a=>{"use strict";a.s(["default",()=>i],509839);var b=a.i(187924),c=a.i(699570),d=a.i(941675),e=a.i(367329),f=a.i(572131);function g({holidays:a,year:c,month:d}){let e=new Date(c,d-1,1),f=new Date(c,d,0),g=e.getDay(),h=f.getDate(),i={};a.forEach(a=>{i[a.date]=i[a.date]?[...i[a.date],a]:[a]});let j=[];for(let a=0;a<g;a++)j.push(null);for(let a=1;a<=h;a++)j.push(a);return(0,b.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,b.jsx)("div",{className:"grid grid-cols-7 bg-gray-100 text-center text-sm font-medium",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(a=>(0,b.jsx)("div",{className:"py-2 border-r",children:a},a))}),(0,b.jsx)("div",{className:"grid grid-cols-7",children:j.map((a,e)=>{if(!a)return(0,b.jsx)("div",{className:"h-28 border"},e);let f=i[`${c}-${String(d).padStart(2,"0")}-${String(a).padStart(2,"0")}`]||[];return(0,b.jsxs)("div",{className:"h-28 border p-1 text-sm",children:[(0,b.jsx)("div",{className:"font-semibold",children:a}),f.map(a=>(0,b.jsx)("div",{className:"mt-1 px-1 py-0.5 bg-blue-100 text-blue-800 rounded text-xs truncate",title:a.occasion,children:a.occasion},a.id))]},e)})})]})}let h="https://6jnqmj85-80.inc1.devtunnels.ms";function i(){let[a,i]=(0,f.useState)([]),[j,k]=(0,f.useState)([]),[l,m]=(0,f.useState)(!0),[n,o]=(0,f.useState)(!1),[p,q]=(0,f.useState)(""),[r,s]=(0,f.useState)(new Date().getFullYear()),[t,u]=(0,f.useState)(new Date().getMonth()+1),[v,w]=(0,f.useState)(""),[x,y]=(0,f.useState)(!1),[z,A]=(0,f.useState)([{date:"",occasion:""}]),[B,C]=(0,f.useState)(null),[D,E]=(0,f.useState)(null),[F,G]=(0,f.useState)("list"),H=async()=>{try{m(!0);let a=localStorage.getItem("accessToken"),b=await fetch(`${h}/employee/api/holidays`,{headers:{Authorization:`Bearer ${a}`}});if(!b.ok)throw Error("Failed to fetch holidays");i(await b.json())}catch(a){q(a.message)}finally{m(!1)}};(0,f.useEffect)(()=>{H()},[]),(0,f.useEffect)(()=>{let b=a;(r||t)&&(b=b.filter(a=>{let[b,c]=a.date.split("-").map(Number);return(!r||b===r)&&(!t||c===t)})),v.trim()&&(b=b.filter(a=>a.occasion.toLowerCase().includes(v.toLowerCase()))),k(b)},[a,r,t,v]);let I=(a,b,c)=>{let d=[...z];d[a][b]=c,A(d)},J=async()=>{let a=z.filter(a=>a.date&&a.occasion.trim());if(!a.length)return void q("At least one holiday is required");try{o(!0),q("");let b=localStorage.getItem("accessToken");if(!b)return void q("Authentication required");let c=await fetch("https://6jnqmj85-80.inc1.devtunnels.ms/employee/api/holidays/bulk",{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"},body:JSON.stringify({holidays:a})});if(!c.ok){let a=await c.text();throw Error(a||"Failed to add holidays")}await H(),y(!1),A([{date:"",occasion:""}])}catch(a){q(a.message)}finally{o(!1)}},K=async()=>{if(B)try{o(!0);let a=localStorage.getItem("accessToken");await fetch(`${h}/employee/api/holidays/${B.id}`,{method:"PUT",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({date:B.date,occasion:B.occasion})}),await H(),C(null)}finally{o(!1)}},L=async a=>{if(confirm("Delete this holiday?"))try{o(!0);let b=localStorage.getItem("accessToken");await fetch(`${h}/employee/api/holidays/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}}),await H()}finally{o(!1)}};return((0,f.useEffect)(()=>{E(null),C(null)},[F]),l)?(0,b.jsx)("p",{className:"p-6",children:"Loading…"}):(0,b.jsxs)("div",{className:"p-6 max-w-7xl mx-auto bg-white rounded-lg border",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsx)("button",{onClick:()=>{y(!0),A([{date:"",occasion:""}])},className:"bg-blue-600 text-white px-4 py-2 rounded-md",children:"+ Add Holiday"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(c.Button,{size:"icon",variant:"list"===F?"default":"outline",onClick:()=>G("list"),"aria-label":"List View",children:(0,b.jsx)(e.List,{className:"h-4 w-4"})}),(0,b.jsx)(c.Button,{size:"icon",variant:"calendar"===F?"default":"outline",onClick:()=>G("calendar"),"aria-label":"Calendar View",children:(0,b.jsx)(d.Calendar,{className:"h-4 w-4"})})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 mb-4",children:[(0,b.jsx)("input",{type:"number",value:r,onChange:a=>s(+a.target.value),className:"border px-2 py-1 rounded w-24"}),(0,b.jsxs)("select",{value:t,onChange:a=>u(a.target.value?+a.target.value:""),className:"border px-2 py-1 rounded",children:[(0,b.jsx)("option",{value:"",children:"All Months"}),Array.from({length:12}).map((a,c)=>(0,b.jsx)("option",{value:c+1,children:new Date(0,c).toLocaleString("default",{month:"long"})},c))]}),(0,b.jsx)("input",{value:v,onChange:a=>w(a.target.value),placeholder:"Search occasion",className:"border px-3 py-1 rounded flex-1"})]}),"list"===F?(0,b.jsxs)("table",{className:"w-full border rounded-lg overflow-hidden",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-2 text-left",children:"Date"}),(0,b.jsx)("th",{className:"px-4 py-2 text-left",children:"Day"}),(0,b.jsx)("th",{className:"px-4 py-2 text-left",children:"Occasion"}),(0,b.jsx)("th",{className:"px-4 py-2 text-left",children:"Action"})]})}),(0,b.jsx)("tbody",{children:j.map(a=>(0,b.jsxs)("tr",{className:"border-t",children:[(0,b.jsx)("td",{className:"px-4 py-2",children:B?.id===a.id?(0,b.jsx)("input",{type:"date",value:B.date,onChange:a=>C({...B,date:a.target.value}),className:"border px-2 py-1 rounded w-full"}):a.date}),(0,b.jsx)("td",{className:"px-4 py-2",children:a.day}),(0,b.jsx)("td",{className:"px-4 py-2",children:B?.id===a.id?(0,b.jsx)("input",{value:B.occasion,onChange:a=>C({...B,occasion:a.target.value}),className:"border px-2 py-1 rounded w-full"}):a.occasion}),(0,b.jsx)("td",{className:"px-4 py-2 relative",children:B?.id===a.id?(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:K,className:"bg-green-600 text-white px-3 py-1 rounded",children:"Save"}),(0,b.jsx)("button",{onClick:()=>C(null),className:"bg-gray-300 px-3 py-1 rounded",children:"Cancel"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>E(D===a.id?null:a.id),className:"px-2 py-1",children:"⋮"}),D===a.id&&(0,b.jsxs)("div",{className:"absolute right-0 mt-2 w-32 bg-white border rounded shadow z-20",children:[(0,b.jsx)("button",{onClick:()=>{C(a),E(null)},className:"block w-full text-left px-3 py-2 hover:bg-gray-100",children:"Edit"}),(0,b.jsx)("button",{onClick:()=>{L(a.id),E(null)},className:"block w-full text-left px-3 py-2 text-red-600 hover:bg-red-50",children:"Delete"})]})]})})]},a.id))})]}):(0,b.jsx)(g,{holidays:j,year:r,month:t||new Date().getMonth()+1}),x&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"bg-white w-full max-w-3xl rounded-lg shadow-lg",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center p-4 border-b",children:[(0,b.jsx)("h2",{className:"font-semibold",children:"Add Holidays"}),(0,b.jsx)("button",{onClick:()=>y(!1),children:"✕"})]}),(0,b.jsxs)("div",{className:"p-6 space-y-4",children:[z.map((a,c)=>(0,b.jsxs)("div",{className:"grid grid-cols-5 gap-3",children:[(0,b.jsx)("input",{type:"date",value:a.date,onChange:a=>I(c,"date",a.target.value),className:"border px-2 py-1 rounded col-span-2"}),(0,b.jsx)("input",{value:a.occasion,onChange:a=>I(c,"occasion",a.target.value),className:"border px-2 py-1 rounded col-span-2",placeholder:"Occasion"}),z.length>1&&(0,b.jsx)("button",{onClick:()=>A(z.filter((a,b)=>b!==c)),className:"bg-red-500 text-white rounded",children:"✕"})]},c)),(0,b.jsx)("button",{onClick:()=>A([...z,{date:"",occasion:""}]),className:"text-blue-600",children:"+ Add Row"})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 p-4 border-t",children:[(0,b.jsx)("button",{onClick:()=>y(!1),className:"px-4 py-2 bg-gray-200 rounded",children:"Cancel"}),(0,b.jsx)("button",{onClick:J,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Save"})]})]})})]})}}];

//# sourceMappingURL=_9b40c2bc._.js.map