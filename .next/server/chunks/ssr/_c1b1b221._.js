module.exports=[591119,a=>{"use strict";a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f]);var b=a.i(187924),c=a.i(368114);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}},47349,(a,b,c)=>{"use strict";var d=a.r(572131);"function"==typeof Object.is&&Object.is,d.useState,d.useEffect,d.useLayoutEffect,d.useDebugValue,c.useSyncExternalStore=void 0!==d.useSyncExternalStore?d.useSyncExternalStore:function(a,b){return b()}},487610,(a,b,c)=>{"use strict";b.exports=a.r(47349)},781560,a=>{"use strict";a.s(["Trash2",()=>b],781560);let b=(0,a.i(883706).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},177156,a=>{"use strict";a.s(["Eye",()=>b],177156);let b=(0,a.i(883706).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},786304,a=>{"use strict";a.s(["Badge",()=>g]);var b=a.i(187924),c=a.i(811011),d=a.i(400187),e=a.i(368114);let f=(0,d.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function g({className:a,variant:d,asChild:g=!1,...h}){let i=g?c.Slot:"span";return(0,b.jsx)(i,{"data-slot":"badge",className:(0,e.cn)(f({variant:d}),a),...h})}},417755,a=>{"use strict";a.s(["MoreHorizontal",()=>b],417755);let b=(0,a.i(883706).default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},824569,a=>{"use strict";a.s(["Edit",()=>b],824569);let b=(0,a.i(883706).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},872233,a=>{"use strict";a.s(["Avatar",()=>v,"AvatarFallback",()=>x,"AvatarImage",()=>w],872233);var b=a.i(187924),c=a.i(572131),d=a.i(750104),e=a.i(746872),f=a.i(872752),g=a.i(30553),h=a.i(487610);function i(){return()=>{}}var j="Avatar",[k,l]=(0,d.createContextScope)(j),[m,n]=k(j),o=c.forwardRef((a,d)=>{let{__scopeAvatar:e,...f}=a,[h,i]=c.useState("idle");return(0,b.jsx)(m,{scope:e,imageLoadingStatus:h,onImageLoadingStatusChange:i,children:(0,b.jsx)(g.Primitive.span,{...f,ref:d})})});o.displayName=j;var p="AvatarImage",q=c.forwardRef((a,d)=>{let{__scopeAvatar:j,src:k,onLoadingStatusChange:l=()=>{},...m}=a,o=n(p,j),q=function(a,{referrerPolicy:b,crossOrigin:d}){let e=(0,h.useSyncExternalStore)(i,()=>!0,()=>!1),g=c.useRef(null),j=e?(g.current||(g.current=new window.Image),g.current):null,[k,l]=c.useState(()=>t(j,a));return(0,f.useLayoutEffect)(()=>{l(t(j,a))},[j,a]),(0,f.useLayoutEffect)(()=>{let a=a=>()=>{l(a)};if(!j)return;let c=a("loaded"),e=a("error");return j.addEventListener("load",c),j.addEventListener("error",e),b&&(j.referrerPolicy=b),"string"==typeof d&&(j.crossOrigin=d),()=>{j.removeEventListener("load",c),j.removeEventListener("error",e)}},[j,d,b]),k}(k,m),r=(0,e.useCallbackRef)(a=>{l(a),o.onImageLoadingStatusChange(a)});return(0,f.useLayoutEffect)(()=>{"idle"!==q&&r(q)},[q,r]),"loaded"===q?(0,b.jsx)(g.Primitive.img,{...m,ref:d,src:k}):null});q.displayName=p;var r="AvatarFallback",s=c.forwardRef((a,d)=>{let{__scopeAvatar:e,delayMs:f,...h}=a,i=n(r,e),[j,k]=c.useState(void 0===f);return c.useEffect(()=>{if(void 0!==f){let a=window.setTimeout(()=>k(!0),f);return()=>window.clearTimeout(a)}},[f]),j&&"loaded"!==i.imageLoadingStatus?(0,b.jsx)(g.Primitive.span,{...h,ref:d}):null});function t(a,b){return a?b?(a.src!==b&&(a.src=b),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}s.displayName=r;var u=a.i(368114);function v({className:a,...c}){return(0,b.jsx)(o,{"data-slot":"avatar",className:(0,u.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",a),...c})}function w({className:a,...c}){return(0,b.jsx)(q,{"data-slot":"avatar-image",className:(0,u.cn)("aspect-square size-full",a),...c})}function x({className:a,...c}){return(0,b.jsx)(s,{"data-slot":"avatar-fallback",className:(0,u.cn)("bg-muted flex size-full items-center justify-center rounded-full",a),...c})}},956512,a=>{"use strict";a.s(["default",()=>q],956512);var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(591119),f=a.i(872233),g=a.i(786304),h=a.i(206015),i=a.i(699570),j=a.i(417755),k=a.i(177156),l=a.i(824569);let m=(0,a.i(883706).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);var n=a.i(781560),o=a.i(335732);let p="https://6jnqmj85-80.inc1.devtunnels.ms";function q(){let[a,q]=(0,c.useState)([]),[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)(!0),[v,w]=(0,c.useState)(null),x=(0,d.useRouter)(),[y,z]=(0,c.useState)("all"),[A,B]=(0,c.useState)("all"),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)(1),[G,H]=(0,c.useState)(10),[I,J]=(0,c.useState)("All"),[K,L]=(0,c.useState)("All"),M=(0,c.useCallback)(async()=>{u(!0),w(null);try{let a=localStorage.getItem("accessToken");if(!a){w("Token missing — please login again."),u(!1);return}let b=await fetch(`${p}/clients`,{headers:{Authorization:`Bearer ${a}`}});if(!b.ok)throw Error(`Failed to fetch clients: ${b.status}`);let c=await b.json();q(Array.isArray(c)?c:[]),s(Array.isArray(c)?c:[])}catch(a){w(a.message||"Error fetching clients")}finally{u(!1)}},[]);(0,c.useEffect)(()=>{M()},[M]),(0,c.useEffect)(()=>{let a=a=>{"clients:refresh"===a.key&&M()},b=()=>{M()},c=()=>{"visible"===document.visibilityState&&M()};return window.addEventListener("storage",a),window.addEventListener("clients:refresh",b),document.addEventListener("visibilitychange",c),()=>{window.removeEventListener("storage",a),window.removeEventListener("clients:refresh",b),document.removeEventListener("visibilitychange",c)}},[M]),(0,c.useEffect)(()=>{let b=[...a];if(C){let a=C.toLowerCase();b=b.filter(b=>(b.name||"").toLowerCase().includes(a)||(b.email||"").toLowerCase().includes(a)||(b.clientId||"").toLowerCase().includes(a))}"all"!==y&&(b=b.filter(a=>a.status===y)),"all"!==A&&(b=b.filter(a=>a.category===A)),"All"!==I&&(b=b.filter(a=>a.name===I)),"All"!==K&&(b=b.filter(a=>a.category===K)),s(b),F(1)},[C,y,A,I,K,a]);let N=Math.ceil(r.length/G),O=r.slice((E-1)*G,E*G),P=async a=>{if(confirm(`Delete ${a.name}?`))try{if(!(await fetch(`${p}/clients/${a.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}})).ok)throw Error("Delete failed");M()}catch(a){alert("Failed to delete")}};return t?(0,b.jsx)("div",{className:"h-screen flex justify-center items-center",children:"Loading..."}):v?(0,b.jsx)("div",{className:"h-screen flex justify-center items-center text-red-600",children:v}):(0,b.jsxs)("div",{className:"container mx-auto py-6 px-4",children:[(0,b.jsx)("div",{className:"mb-4 flex justify-end",children:(0,b.jsx)(i.Button,{onClick:()=>x.push("/clients/new"),children:"+ Add Client"})}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{children:["Clients (",r.length,")"]})}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableHead,{children:"Client ID"}),(0,b.jsx)(h.TableHead,{children:"Name"}),(0,b.jsx)(h.TableHead,{children:"Email"}),(0,b.jsx)(h.TableHead,{children:"Mobile"}),(0,b.jsx)(h.TableHead,{children:"Category"}),(0,b.jsx)(h.TableHead,{children:"Created"}),(0,b.jsx)(h.TableHead,{children:"Action"})]})}),(0,b.jsx)(h.TableBody,{children:O.map(a=>(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableCell,{children:a.clientId}),(0,b.jsx)(h.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(f.Avatar,{children:[(0,b.jsx)(f.AvatarImage,{src:a.profilePictureUrl||"/placeholder.png"}),(0,b.jsx)(f.AvatarFallback,{children:a.name?.[0]?.toUpperCase()??"?"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-semibold",children:a.name}),a.company?.companyName&&(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:a.company.companyName})]})]})}),(0,b.jsx)(h.TableCell,{children:a.email}),(0,b.jsx)(h.TableCell,{children:a.mobile??"—"}),(0,b.jsx)(h.TableCell,{children:a.category?(0,b.jsx)(g.Badge,{children:a.category}):"—"}),(0,b.jsx)(h.TableCell,{children:a.createdAt?new Date(a.createdAt).toLocaleDateString():"—"}),(0,b.jsx)(h.TableCell,{children:(0,b.jsxs)(o.DropdownMenu,{children:[(0,b.jsx)(o.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(i.Button,{variant:"ghost",size:"sm",children:(0,b.jsx)(j.MoreHorizontal,{})})}),(0,b.jsxs)(o.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(o.DropdownMenuItem,{onClick:()=>{let b;return b=a.id,x.push(`/clients/${b}`)},children:[(0,b.jsx)(k.Eye,{className:"mr-2 h-4 w-4"})," View"]}),(0,b.jsxs)(o.DropdownMenuItem,{onClick:()=>{let b;return b=a.id,x.push(`/clients/${b}/edit`)},children:[(0,b.jsx)(l.Edit,{className:"mr-2 h-4 w-4"})," Edit"]}),(0,b.jsxs)(o.DropdownMenuItem,{onClick:()=>(a.id,x.push("/deals/create")),children:[(0,b.jsx)(m,{className:"mr-2 h-4 w-4"})," Move to Deal"]}),(0,b.jsx)(o.DropdownMenuSeparator,{}),(0,b.jsxs)(o.DropdownMenuItem,{className:"text-red-600",onClick:()=>P(a),children:[(0,b.jsx)(n.Trash2,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]},a.id))})]}),(0,b.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:["Page ",E," of ",Math.max(1,N)]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(i.Button,{onClick:()=>F(a=>Math.max(1,a-1)),disabled:E<=1,children:"Prev"}),(0,b.jsx)(i.Button,{onClick:()=>F(a=>Math.min(N,a+1)),disabled:E>=N,children:"Next"})]})]})]})]})]})}}];

//# sourceMappingURL=_c1b1b221._.js.map