{"version":3,"sources":["turbopack:///[project]/src/components/ui/badge.tsx","turbopack:///[project]/node_modules/lucide-react/src/icons/arrow-left.ts","turbopack:///[project]/src/app/(dashboard)/finance/invoices/credit-notes/page.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",\n        destructive:\n          \"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"span\"> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"span\"\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm12 19-7-7 7-7', key: '1l729n' }],\n  ['path', { d: 'M19 12H5', key: 'x3x0zl' }],\n];\n\n/**\n * @component @name ArrowLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTIgMTktNy03IDctNyIgLz4KICA8cGF0aCBkPSJNMTkgMTJINSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowLeft = createLucideIcon('arrow-left', __iconNode);\n\nexport default ArrowLeft;\n","\"use client\";\r\n\r\nimport { Suspense, useEffect, useState } from \"react\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport Image from \"next/image\";\r\nimport { ArrowLeft, Eye, Download, Mail } from \"lucide-react\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\ntype Company = {\r\n  companyName: string;\r\n  website: string;\r\n  officePhone: string;\r\n  taxName: string;\r\n  gstVatNo: string;\r\n  address: string;\r\n  city: string;\r\n  state: string;\r\n  postalCode: string;\r\n  shippingAddress: string;\r\n  companyLogoUrl: string;\r\n  country: string | null;\r\n};\r\n\r\ntype Client = {\r\n  clientId: string;\r\n  name: string;\r\n  profilePictureUrl: string;\r\n  email: string;\r\n  mobile: string;\r\n  companyName: string;\r\n  address: string;\r\n  country: string;\r\n  company: Company;\r\n};\r\n\r\ntype Project = {\r\n  projectName: string;\r\n  projectCode: string;\r\n  startDate: string;\r\n  deadline: string;\r\n  budget: number;\r\n  currency: string;\r\n};\r\n\r\ntype CreditNote = {\r\n  id: number;\r\n  creditNoteNumber: string;\r\n  creditNoteDate: string;\r\n  currency: string;\r\n  adjustment: number;\r\n  adjustmentPositive: boolean;\r\n  tax: number;\r\n  amount: number;\r\n  notes: string;\r\n  fileUrl: string;\r\n  client: Client;\r\n  project: Project;\r\n  totalAmount: number;\r\n  createdAt: string;\r\n};\r\n\r\nfunction InvoiceCreditNotesListInner() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const invoiceNumber = searchParams.get(\"invoiceNumber\");\r\n  const [creditNotes, setCreditNotes] = useState<CreditNote[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  async function fetchCreditNotes() {\r\n    if (!invoiceNumber) {\r\n      setError(\"No invoice number provided\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(\r\n        `${process.env.NEXT_PUBLIC_MAIN}/api/invoices/${invoiceNumber}/credit-notes`,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\") || \"\"}`,\r\n          },\r\n        }\r\n      );\r\n\r\n      if (!res.ok) {\r\n        throw new Error(`Failed to fetch credit notes: ${res.statusText}`);\r\n      }\r\n\r\n      const data = await res.json();\r\n      setCreditNotes(Array.isArray(data) ? data : []);\r\n    } catch (err: any) {\r\n      console.error(err);\r\n      setError(err?.message || \"Something went wrong while fetching credit notes.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchCreditNotes();\r\n  }, [invoiceNumber]);\r\n\r\n  const getAdjustmentBadge = (positive: boolean) => {\r\n    if (positive) {\r\n      return <Badge className=\"bg-green-100 text-green-800\">Credit</Badge>;\r\n    }\r\n    return <Badge className=\"bg-red-100 text-red-800\">Debit</Badge>;\r\n  };\r\n\r\n  const formatDate = (dateString: string) => {\r\n    if (!dateString) return \"N/A\";\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString(\"en-US\", {\r\n      year: \"numeric\",\r\n      month: \"short\",\r\n      day: \"numeric\",\r\n    });\r\n  };\r\n\r\n  const handleDownload = (fileUrl: string) => {\r\n    window.open(fileUrl, \"_blank\");\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"container mx-auto p-6\">\r\n        <p className=\"text-center text-gray-600\">Loading credit notes...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"container mx-auto p-6\">\r\n        <p className=\"text-center text-red-500\">Error: {error}</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-6\">\r\n      <div className=\"mb-6\">\r\n        <Button\r\n          variant=\"ghost\"\r\n          onClick={() => router.push(`/finance/invoices/${invoiceNumber}`)}\r\n          className=\"mb-2\"\r\n        >\r\n          <ArrowLeft className=\"h-4 w-4 mr-2\" /> Back to Invoice\r\n        </Button>\r\n        <h1 className=\"text-3xl font-bold text-gray-900\">\r\n          Credit Notes for Invoice {invoiceNumber}\r\n        </h1>\r\n        <p className=\"text-gray-600 mt-1\">\r\n          Manage credit notes associated with invoice {invoiceNumber}\r\n        </p>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n        {creditNotes.length === 0 ? (\r\n          <p className=\"text-center text-gray-500 col-span-full\">\r\n            No credit notes found for this invoice\r\n          </p>\r\n        ) : (\r\n          creditNotes.map((cn) => (\r\n            <div\r\n              key={cn.id}\r\n              className=\"bg-white border rounded-lg shadow-sm p-4 flex flex-col justify-between hover:shadow-md transition\"\r\n            >\r\n              <div>\r\n                <div className=\"flex justify-between items-start mb-2\">\r\n                  <h2 className=\"text-lg font-semibold\">{cn.creditNoteNumber}</h2>\r\n                  {getAdjustmentBadge(cn.adjustmentPositive)}\r\n                </div>\r\n\r\n                <p className=\"text-sm text-gray-500 mb-1\">\r\n                  Project: {cn.project?.projectName || \"N/A\"} ({cn.project?.projectCode || \"N/A\"})\r\n                </p>\r\n\r\n                <div className=\"flex items-center gap-3 mb-2\">\r\n                  {cn.client?.company?.companyLogoUrl ? (\r\n                    <Image\r\n                      src={cn.client.company.companyLogoUrl}\r\n                      alt={cn.client.company.companyName || \"Company\"}\r\n                      width={32}\r\n                      height={32}\r\n                      className=\"rounded-full\"\r\n                    />\r\n                  ) : (\r\n                    <div className=\"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0\">\r\n                      <span className=\"text-sm font-semibold text-gray-600\">\r\n                        {cn.client?.name?.charAt(0)?.toUpperCase() || \"?\"}\r\n                      </span>\r\n                    </div>\r\n                  )}\r\n                  <div>\r\n                    <p className=\"font-medium text-sm\">{cn.client?.name || \"N/A\"}</p>\r\n                    <p className=\"text-xs text-gray-500\">\r\n                      {cn.client?.company?.companyName || \"\"}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n\r\n                <p className=\"text-sm text-gray-500\">\r\n                  Credit Note Date: {formatDate(cn.creditNoteDate)}\r\n                </p>\r\n                <p className=\"text-sm text-gray-500 mt-1\">\r\n                  Total Amount: {cn.currency} {cn.totalAmount.toFixed(2)}\r\n                </p>\r\n                <p className=\"text-sm text-gray-500\">\r\n                  Adjustment: {cn.currency} {cn.adjustmentPositive ? \"+\" : \"-\"}\r\n                  {cn.adjustment.toFixed(2)}\r\n                </p>\r\n              </div>\r\n\r\n\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function InvoiceCreditNotesList() {\r\n  return (\r\n    <Suspense>\r\n      <InvoiceCreditNotesListInner />\r\n    </Suspense>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","ignoreList":[1]}