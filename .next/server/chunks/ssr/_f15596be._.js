module.exports=[47349,(a,b,c)=>{"use strict";var d=a.r(572131);"function"==typeof Object.is&&Object.is,d.useState,d.useEffect,d.useLayoutEffect,d.useDebugValue,c.useSyncExternalStore=void 0!==d.useSyncExternalStore?d.useSyncExternalStore:function(a,b){return b()}},487610,(a,b,c)=>{"use strict";b.exports=a.r(47349)},84218,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(883706).default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},879360,a=>{"use strict";a.s(["MoreVertical",()=>b.default]);var b=a.i(84218)},28270,a=>{"use strict";a.s(["default",()=>j],28270);var b=a.i(187924),c=a.i(972596),d=a.i(572131);let e="https://6jnqmj85-80.inc1.devtunnels.ms";function f({open:a,onClose:f,employeeId:h,onSuccess:i}){let[j,k]=(0,d.useState)({oldDepartmentId:"",oldDesignationId:"",newDepartmentId:"",newDesignationId:"",remarks:"",isPromotion:!0,sendNotification:!0}),[l,m]=(0,d.useState)(!1),{data:n}=(0,c.default)(`${e}/admin/departments`,g),{data:o}=(0,c.default)(`${e}/admin/designations`,g);if(!a)return null;let p=async()=>{m(!0);let a=localStorage.getItem("accessToken");await fetch(`${e}/admin/api/promotions/employee/${h}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({oldDepartmentId:Number(j.oldDepartmentId),oldDesignationId:Number(j.oldDesignationId),newDepartmentId:Number(j.newDepartmentId),newDesignationId:Number(j.newDesignationId),isPromotion:!0,sendNotification:!0,remarks:j.remarks})}),m(!1),i(),f()};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl w-full max-w-lg p-6 space-y-4",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Add Promotion"}),(0,b.jsxs)("select",{className:"border rounded px-3 py-2 w-full",value:j.oldDepartmentId,onChange:a=>k({...j,oldDepartmentId:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"Old Department"}),n?.map(a=>(0,b.jsx)("option",{value:a.id,children:a.departmentName},a.id))]}),(0,b.jsxs)("select",{className:"border rounded px-3 py-2 w-full",value:j.oldDesignationId,onChange:a=>k({...j,oldDesignationId:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"Old Designation"}),o?.map(a=>(0,b.jsx)("option",{value:a.id,children:a.designationName},a.id))]}),(0,b.jsxs)("select",{className:"border rounded px-3 py-2 w-full",value:j.newDepartmentId,onChange:a=>k({...j,newDepartmentId:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"New Department"}),n?.map(a=>(0,b.jsx)("option",{value:a.id,children:a.departmentName},a.id))]}),(0,b.jsxs)("select",{className:"border rounded px-3 py-2 w-full",value:j.newDesignationId,onChange:a=>k({...j,newDesignationId:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"New Designation"}),o?.map(a=>(0,b.jsx)("option",{value:a.id,children:a.designationName},a.id))]}),(0,b.jsx)("textarea",{className:"border rounded px-3 py-2 w-full",placeholder:"Remarks",value:j.remarks,onChange:a=>k({...j,remarks:a.target.value})}),(0,b.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,b.jsx)("button",{onClick:f,className:"px-4 py-2 border rounded",children:"Cancel"}),(0,b.jsx)("button",{disabled:l,onClick:p,className:"px-4 py-2 bg-blue-600 text-white rounded",children:l?"Saving...":"Save Promotion"})]})]})})}async function g(a){let b=localStorage.getItem("accessToken"),c=await fetch(a,{headers:{Authorization:`Bearer ${b}`}});if(!c.ok)throw Error("Fetch failed");return c.json()}var h=a.i(879360);let i=async a=>{let b=localStorage.getItem("accessToken");if(!b)throw Error("No token");let c=await fetch(a,{headers:{Authorization:`Bearer ${b}`}});if(!c.ok)throw Error("Failed to fetch promotions");return c.json()};function j({employeeId:a}){let[e,g]=(0,d.useState)(!1),{data:j,isLoading:k,error:l,mutate:m}=(0,c.default)(`https://6jnqmj85-80.inc1.devtunnels.ms/admin/api/promotions/employee/${a}`,i,{revalidateOnFocus:!1});return(0,b.jsxs)("div",{className:"bg-white border rounded-xl p-6 space-y-4",children:[(0,b.jsx)("div",{className:"flex justify-between",children:(0,b.jsx)("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm",children:"+ Add Promotions"})}),(0,b.jsx)(f,{open:e,onClose:()=>g(!1),employeeId:a,onSuccess:m}),k&&(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Loading promotions…"}),l&&(0,b.jsx)("div",{className:"text-sm text-red-500",children:"Failed to load promotions"}),!k&&j?.length===0&&(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"No promotions found"}),(0,b.jsx)("div",{className:"space-y-4",children:j?.map((a,c)=>(0,b.jsxs)("div",{className:"border rounded-lg p-4 flex justify-between items-start",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,b.jsx)("span",{className:"px-2 py-0.5 bg-gray-200 rounded text-xs",children:c+1}),(0,b.jsxs)("span",{children:[new Date(a.createdAt).toLocaleDateString()," ( Promotion From Today )"]})]}),(0,b.jsx)("span",{className:"inline-block px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-xs",children:"Promotion"}),(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("span",{className:"text-blue-600",children:a.oldDesignationName})," ","→"," ",(0,b.jsx)("span",{className:"text-green-600",children:a.newDesignationName})," ",(0,b.jsx)("span",{className:"text-gray-500",children:"(Designation)"})]}),(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("span",{className:"text-blue-600",children:a.oldDepartmentName})," ","→"," ",(0,b.jsx)("span",{className:"text-green-600",children:a.newDepartmentName})]}),a.remarks&&(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a.remarks})]}),(0,b.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded-full",children:(0,b.jsx)(h.MoreVertical,{className:"w-4 h-4 text-gray-500"})})]},a.id))})]})}}];

//# sourceMappingURL=_f15596be._.js.map