{"version":3,"sources":["turbopack:///[project]/src/app/(employee)/employees/hr/employee/[id]/emergency-contacts/add/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\n\nconst BASE_URL = process.env.NEXT_PUBLIC_MAIN\n\ntype Props = {\n  open: boolean\n  onClose: () => void\n  employeeId: string\n  onSuccess: () => void\n}\n\nexport default function AddEmergencyContactModal({\n  open,\n  onClose,\n  employeeId,\n  onSuccess,\n}: Props) {\n  const [form, setForm] = useState({\n    name: \"\",\n    email: \"\",\n    mobile: \"\",\n    relationship: \"\",\n    address: \"\",\n  })\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  if (!open) return null\n\n  const submit = async () => {\n    if (!form.name || !form.email || !form.mobile || !form.relationship) {\n      setError(\"All required fields must be filled\")\n      return\n    }\n\n    try {\n      setLoading(true)\n      setError(null)\n\n      const token = localStorage.getItem(\"accessToken\")\n      if (!token) throw new Error(\"Unauthorized\")\n\n      const res = await fetch(\n        `${BASE_URL}/employee/${employeeId}/emergency-contacts`,\n        {\n          method: \"POST\",\n          headers: {\n            Authorization: `Bearer ${token}`,\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify(form),\n        }\n      )\n\n      if (!res.ok) throw new Error(\"Failed to create contact\")\n\n      onSuccess()\n      onClose()\n    } catch (e: any) {\n      setError(e.message)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"fixed inset-0 z-50 bg-black/40 flex items-center justify-center\">\n      <div className=\"bg-white w-full max-w-lg rounded-xl p-6 space-y-4\">\n        <h2 className=\"text-lg font-semibold\">Add Emergency Contact</h2>\n\n        {error && <div className=\"text-sm text-red-600\">{error}</div>}\n\n        <div className=\"grid grid-cols-2 gap-4\">\n          <input\n            placeholder=\"Name *\"\n            className=\"border rounded px-3 py-2\"\n            value={form.name}\n            onChange={(e) => setForm({ ...form, name: e.target.value })}\n          />\n          <input\n            placeholder=\"Relationship *\"\n            className=\"border rounded px-3 py-2\"\n            value={form.relationship}\n            onChange={(e) =>\n              setForm({ ...form, relationship: e.target.value })\n            }\n          />\n          <input\n            placeholder=\"Email *\"\n            className=\"border rounded px-3 py-2\"\n            value={form.email}\n            onChange={(e) => setForm({ ...form, email: e.target.value })}\n          />\n          <input\n            placeholder=\"Mobile *\"\n            className=\"border rounded px-3 py-2\"\n            value={form.mobile}\n            onChange={(e) => setForm({ ...form, mobile: e.target.value })}\n          />\n        </div>\n\n        <textarea\n          placeholder=\"Address\"\n          className=\"border rounded px-3 py-2 w-full min-h-[80px]\"\n          value={form.address}\n          onChange={(e) => setForm({ ...form, address: e.target.value })}\n        />\n\n        <div className=\"flex justify-end gap-3 pt-4\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 border rounded-lg\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={submit}\n            disabled={loading}\n            className=\"px-5 py-2 bg-blue-600 text-white rounded-lg\"\n          >\n            {loading ? \"Saving...\" : \"Save\"}\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}