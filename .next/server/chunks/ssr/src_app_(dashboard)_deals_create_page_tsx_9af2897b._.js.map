{"version":3,"sources":["turbopack:///[project]/src/app/(dashboard)/deals/create/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/navigation\";\nimport { Stage } from \"@/types/stages\";\n\ntype Employee = {\n  employeeId: string;\n  name: string;\n};\n\ntype Lead = {\n  id: number;\n  name: string;\n  email?: string | null;\n  companyName?: string | null;\n};\n\nexport default function CreateDealPage() {\n  const router = useRouter();\n  const [formData, setFormData] = useState({\n    title: \"\",\n    leadId: \"\",\n    pipeline: \"\",\n    dealStage: \"\",\n    dealCategory: \"\",\n    dealAgent: \"\",\n    dealWatchers: [] as string[],\n    value: \"\",\n    expectedCloseDate: \"\",\n    dealContact: \"\",\n  });\n\n  const [employees, setEmployees] = useState<Employee[]>([]);\n  const [stages, setStages] = useState<Stage[]>([]);\n  const [leads, setLeads] = useState<Lead[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [stagesLoading, setStagesLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState<string | null>(null);\n\n  // NEW: categories state + modal flag\n  const [categories, setCategories] = useState<string[]>([\"General\", \"Corporate\", \"Retail\"]);\n  const [showCategoryModal, setShowCategoryModal] = useState(false);\n  const [newCategoryInput, setNewCategoryInput] = useState(\"\");\n\n  const API_BASE =  `${process.env.NEXT_PUBLIC_MAIN}`;\n\n  // Fetch employees, stages and leads\n  useEffect(() => {\n    const fetchEmployeesStagesLeads = async () => {\n      try {\n        const token = localStorage.getItem(\"accessToken\");\n        if (!token) {\n          setError(\"No access token found. Please log in.\");\n          return;\n        }\n\n        // Fetch employees\n        const empRes = await fetch(\"/api/hr/employee\", {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        if (!empRes.ok) throw new Error(\"Failed to fetch employees\");\n        const empData = await empRes.json();\n        setEmployees(empData.content || []);\n\n        // Fetch stages\n        const stageRes = await fetch(\"/api/deals/stages\", {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        if (!stageRes.ok) throw new Error(\"Failed to fetch deal stages\");\n        const stageData: Stage[] = await stageRes.json();\n        setStages(stageData);\n        if (stageData.length > 0) {\n          setFormData((prev) => ({ ...prev, dealStage: stageData[0].name }));\n        }\n\n        // Fetch leads from provided base URL\n        const leadsRes = await fetch(`${API_BASE}/leads`, {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        if (!leadsRes.ok) {\n          // do not fail the whole form if leads endpoint fails â€” set empty leads and continue\n          console.warn(\"Failed to fetch leads for dropdown\");\n          setLeads([]);\n        } else {\n          const leadsData = await leadsRes.json();\n          // Expecting array as you provided; map to Lead[]\n          setLeads(Array.isArray(leadsData) ? leadsData : []);\n        }\n      } catch (err) {\n        console.error(err);\n        setError(\"Failed to load data. Please try again later.\");\n      } finally {\n        setStagesLoading(false);\n      }\n    };\n\n    fetchEmployeesStagesLeads();\n  }, []);\n\n  const handleInputChange = (\n    e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>\n  ) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({ ...prev, [name]: value }));\n  };\n\n  const handleWatcherChange = (employeeId: string, checked: boolean) => {\n    setFormData((prev) => {\n      const current = prev.dealWatchers || [];\n      const updated = checked ? [...current, employeeId] : current.filter((id) => id !== employeeId);\n      return { ...prev, dealWatchers: updated };\n    });\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n    setSuccess(null);\n\n    if (\n      !formData.title ||\n      !formData.pipeline ||\n      !formData.dealStage ||\n      !formData.dealCategory ||\n      !formData.dealAgent ||\n      !formData.value ||\n      !formData.expectedCloseDate\n    ) {\n      setError(\"Please fill all required fields.\");\n      setLoading(false);\n      return;\n    }\n\n    try {\n      const token = localStorage.getItem(\"accessToken\");\n      if (!token) {\n        setError(\"No access token found. Please log in.\");\n        setLoading(false);\n        return;\n      }\n\n      const payload = {\n        title: formData.title,\n        leadId: formData.leadId ? Number(formData.leadId) : undefined,\n        pipeline: formData.pipeline,\n        dealStage: formData.dealStage,\n        dealCategory: formData.dealCategory,\n        dealAgent: formData.dealAgent,\n        dealWatchers: formData.dealWatchers,\n        value: parseFloat(formData.value),\n        expectedCloseDate: formData.expectedCloseDate,\n        dealContact: formData.dealContact,\n      };\n\n      const res = await fetch(\"/api/deals/create\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(payload),\n      });\n\n      if (!res.ok) throw new Error(\"Failed to create deal\");\n\n      setSuccess(\"Deal created successfully!\");\n      // keep same behavior: redirect to deals listing after success\n      setTimeout(() => router.push(\"/deals/get\"), 1000);\n    } catch (err) {\n      console.error(err);\n      setError(\"Failed to create deal. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (stagesLoading) {\n    return (\n      <div className=\"flex justify-center items-center min-h-screen text-lg font-semibold\">\n        Loading form...\n      </div>\n    );\n  }\n\n  // ---------- CATEGORY MODAL HELPERS (NEW) ----------\n  const openCategoryModal = () => {\n    setNewCategoryInput(\"\");\n    setShowCategoryModal(true);\n  };\n\n  const closeCategoryModal = () => {\n    setShowCategoryModal(false);\n    setNewCategoryInput(\"\");\n  };\n\n  const saveCategory = () => {\n    const name = newCategoryInput.trim();\n    if (!name) return;\n    // avoid duplicates\n    if (!categories.includes(name)) {\n      setCategories((prev) => [...prev, name]);\n      setFormData((prev) => ({ ...prev, dealCategory: name })); // set selected category to new one\n    } else {\n      // if exists, just select it\n      setFormData((prev) => ({ ...prev, dealCategory: name }));\n    }\n    closeCategoryModal();\n  };\n\n  const deleteCategory = (name: string) => {\n    if (!confirm(`Delete category \"${name}\"?`)) return;\n    setCategories((prev) => prev.filter((c) => c !== name));\n    // if the deleted category was selected, clear selection\n    setFormData((prev) => (prev.dealCategory === name ? { ...prev, dealCategory: \"\" } : prev));\n  };\n  // --------------------------------------------------\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex items-start justify-center py-10 px-4\">\n      {/* Outer centered container to mimic a modal page */}\n      <div className=\"w-full max-w-4xl\">\n        {/* Header similar to modal top */}\n        <div className=\"flex items-center justify-between mb-4\">\n          <h1 className=\"text-2xl font-semibold\">Add Deal Information</h1>\n          <button\n            onClick={() => router.back()}\n            aria-label=\"Close\"\n            className=\"text-gray-400 hover:text-gray-600\"\n          >\n            <svg className=\"w-6 h-6\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n              <path strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n\n        {/* Main rounded card */}\n        <form onSubmit={handleSubmit} className=\"bg-white border rounded-2xl shadow-sm\">\n          {/* inner rounded panel */}\n          <div className=\"rounded-lg border mx-6 my-6 p-6\">\n            <h3 className=\"text-base font-medium mb-4\">Deal Details</h3>\n\n            {/* 3-column layout like image */}\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              {/* Lead Contact (POPULATED FROM /leads) */}\n              <div>\n                <label className=\"block text-xs text-gray-500 mb-2\">Lead Contact *</label>\n                <select\n                  name=\"leadId\"\n                  value={formData.leadId}\n                  onChange={handleInputChange}\n                  className=\"w-full p-2 border rounded-md bg-white\"\n                >\n                  <option value=\"\">{/* default empty like screenshot */}--</option>\n                  {leads.map((lead) => (\n                    <option key={lead.id} value={String(lead.id)}>\n                      {lead.name || `#${lead.id}`}{lead.companyName ? ` â€” ${lead.companyName}` : \"\"}\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              {/* Deal Name */}\n              <div>\n                <label className=\"block text-xs text-gray-500 mb-2\">Deal Name *</label>\n                <input\n                  type=\"text\"\n                  name=\"title\"\n                  value={formData.title}\n                  onChange={handleInputChange}\n                  className=\"w-full p-2 border rounded-md\"\n                  placeholder=\"--\"\n                />\n              </div>\n\n              {/* Pipeline */}\n              <div>\n                <label className=\"block text-xs text-gray-500 mb-2\">Pipeline *</label>\n                <select\n                  name=\"pipeline\"\n                  value={formData.pipeline}\n                  onChange={handleInputChange}\n                  className=\"w-full p-2 border rounded-md bg-white\"\n                >\n                  <option value=\"\">--</option>\n                  <option value=\"Default Pipeline\">Default Pipeline</option>\n                  <option value=\"Sales\">Sales</option>\n                </select>\n              </div>\n\n              {/* Deal Stages */}\n              <div>\n                <label className=\"block text-xs text-gray-500 mb-2\">Deal Stages *</label>\n                <select\n                  name=\"dealStage\"\n                  value={formData.dealStage}\n                  onChange={handleInputChange}\n                  className=\"w-full p-2 border rounded-md bg-white\"\n                >\n                  {stages.map((s) => (\n                    <option key={s.id} value={s.name}>\n                      {s.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              {/* Deal Category with small Add button */}\n              <div className=\"flex items-center gap-2\">\n                <div className=\"flex-1\">\n                  <label className=\"block text-xs text-gray-500 mb-2\">Deal Category</label>\n                  <select\n                    name=\"dealCategory\"\n                    value={formData.dealCategory}\n                    onChange={handleInputChange}\n                    className=\"w-full p-2 border rounded-md bg-white\"\n                  >\n                    <option value=\"\">--</option>\n                    {categories.map((c) => (\n                      <option key={c} value={c}>\n                        {c}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n                {/* REPLACED: alert -> modal opener */}\n                <button\n                  type=\"button\"\n                  className=\"px-3 py-2 bg-gray-200 rounded-md text-sm\"\n                  onClick={openCategoryModal}\n                >\n                  Add\n                </button>\n              </div>\n\n              {/* Deal Agent */}\n              <div>\n                <label className=\"block text-xs text-gray-500 mb-2\">Deal Agent</label>\n                <select\n                  name=\"dealAgent\"\n                  value={formData.dealAgent}\n                  onChange={handleInputChange}\n                  className=\"w-full p-2 border rounded-md bg-white\"\n                >\n                  <option value=\"\">--</option>\n                  {employees.map((emp) => (\n                    <option key={emp.employeeId} value={emp.employeeId}>\n                      {emp.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              {/* Deal Value with USD prefix */}\n              <div>\n                <label className=\"block text-xs text-gray-500 mb-2\">Deal Value</label>\n                <div className=\"flex\">\n                  <span className=\"inline-flex items-center px-3 rounded-l-md border bg-gray-100 text-sm\">USD $</span>\n                  <input\n                    type=\"number\"\n                    name=\"value\"\n                    value={formData.value}\n                    onChange={handleInputChange}\n                    className=\"w-full p-2 border rounded-r-md\"\n                    placeholder=\"\"\n                    min=\"0\"\n                    step=\"0.01\"\n                  />\n                </div>\n              </div>\n\n              {/* Close Date */}\n              <div>\n                <label className=\"block text-xs text-gray-500 mb-2\">Close Date *</label>\n                <input\n                  type=\"date\"\n                  name=\"expectedCloseDate\"\n                  value={formData.expectedCloseDate}\n                  onChange={handleInputChange}\n                  className=\"w-full p-2 border rounded-md\"\n                />\n              </div>\n\n              {/* Deal Watcher */}\n              <div>\n                <label className=\"block text-xs text-gray-500 mb-2\">Deal Watcher</label>\n                <select\n                  name=\"dealWatchers\"\n                  value={formData.dealWatchers[0] ?? \"\"}\n                  onChange={(e) =>\n                    setFormData((prev) => ({ ...prev, dealWatchers: e.target.value ? [e.target.value] : [] }))\n                  }\n                  className=\"w-full p-2 border rounded-md bg-white\"\n                >\n                  <option value=\"\">--</option>\n                  {employees.map((emp) => (\n                    <option key={emp.employeeId} value={emp.employeeId}>\n                      {emp.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            </div>\n          </div>\n\n          {/* Watchers multi-select area (kept below, like screenshot secondary section) */}\n          <div className=\"mx-6 mb-6\">\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Deal Watchers</label>\n            <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-2\">\n              {employees.map((emp) => (\n                <label key={emp.employeeId} className=\"flex items-center gap-2 text-sm\">\n                  <input\n                    type=\"checkbox\"\n                    checked={formData.dealWatchers.includes(emp.employeeId)}\n                    onChange={(e) => handleWatcherChange(emp.employeeId, e.target.checked)}\n                  />\n                  <span className=\"text-xs\">{emp.name}</span>\n                </label>\n              ))}\n            </div>\n          </div>\n\n          {/* Footer buttons (Cancel + Update) */}\n          <div className=\"px-6 pb-8 flex items-center justify-center gap-4\">\n            <button\n              type=\"button\"\n              onClick={() => router.back()}\n              className=\"px-6 py-2 border rounded-full text-blue-600 hover:bg-blue-50\"\n            >\n              Cancel\n            </button>\n\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className={`px-6 py-2 rounded-full text-white ${loading ? \"bg-blue-400 cursor-not-allowed\" : \"bg-blue-600 hover:bg-blue-700\"}`}\n            >\n              {loading ? \"Creating...\" : \"Update\"}\n            </button>\n          </div>\n        </form>\n\n        {/* messages */}\n        <div className=\"mt-4 text-center\">\n          {error && <div className=\"text-sm text-red-600 font-medium\">{error}</div>}\n          {success && <div className=\"text-sm text-green-600 font-medium\">{success}</div>}\n        </div>\n      </div>\n\n      {/* ================= CATEGORY MODAL (matches screenshot) ================= */}\n      {showCategoryModal && (\n        <div className=\"fixed inset-0 z-50 flex items-start justify-center pt-20 bg-black/30\">\n          <div className=\"w-full max-w-2xl bg-white rounded-lg shadow-lg border border-slate-200\">\n            <div className=\"flex items-center justify-between px-4 py-3 border-b\">\n              <h4 className=\"font-medium\">Deal Category</h4>\n              <button onClick={closeCategoryModal} className=\"text-slate-500\">\n                <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                  <path strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n\n            <div className=\"p-4\">\n              <table className=\"w-full table-auto border-collapse\">\n                <thead>\n                  <tr className=\"bg-blue-50 text-left\">\n                    <th className=\"p-3 text-sm\">#</th>\n                    <th className=\"p-3 text-sm\">Category Name</th>\n                    <th className=\"p-3 text-sm\">Action</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {categories.length === 0 && (\n                    <tr className=\"border-t\">\n                      <td className=\"p-3 text-sm\" colSpan={3}>No categories</td>\n                    </tr>\n                  )}\n                  {categories.map((c, i) => (\n                    <tr key={c} className=\"border-t\">\n                      <td className=\"p-3 text-sm\">{i + 1}</td>\n                      <td\n                        className=\"p-3 text-sm cursor-pointer\"\n                        onClick={() => {\n                          // pick category on click and close modal\n                          setFormData((prev) => ({ ...prev, dealCategory: c }));\n                          setShowCategoryModal(false);\n                        }}\n                      >\n                        {c}\n                      </td>\n                      <td className=\"p-3 text-sm text-center\">\n                        <button onClick={() => deleteCategory(c)} className=\"text-red-600\">ðŸ—‘</button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n\n              <div className=\"mt-4\">\n                <label className=\"text-sm block mb-1\">Deal Category Name *</label>\n                <input\n                  className=\"w-full px-3 py-2 rounded-md border border-slate-200\"\n                  value={newCategoryInput}\n                  onChange={(e) => setNewCategoryInput(e.target.value)}\n                  placeholder=\"--\"\n                />\n              </div>\n\n              <div className=\"mt-4 flex justify-end gap-3\">\n                <button onClick={closeCategoryModal} className=\"px-4 py-2 border rounded-md\">Cancel</button>\n                <button onClick={saveCategory} className=\"px-4 py-2 bg-blue-600 text-white rounded-md\">Save</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n      {/* ====================================================================== */}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}