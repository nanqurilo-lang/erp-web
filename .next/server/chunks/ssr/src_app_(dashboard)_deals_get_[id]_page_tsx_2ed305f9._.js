module.exports=[403499,a=>{"use strict";a.s(["default",()=>h]);var b=a.i(187924),c=a.i(572131),d=a.i(238246),e=a.i(50944);let f="https://6jnqmj85-80.inc1.devtunnels.ms",g="/mnt/data/Screenshot 2025-11-22 120859.png";function h(){let a=(0,e.useParams)(),h=a?.id,[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)("files"),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(null),y=(0,c.useRef)(null),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)([]),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)(null),[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)(null),[P,Q]=(0,c.useState)(!1),[R,S]=(0,c.useState)([]),[T,U]=(0,c.useState)(!1),[V,W]=(0,c.useState)(null),[X,Y]=(0,c.useState)(!1),[Z,$]=(0,c.useState)([]),[_,aa]=(0,c.useState)([]),[ab,ac]=(0,c.useState)([]),[ad,ae]=(0,c.useState)(null),[af,ag]=(0,c.useState)(""),[ah,ai]=(0,c.useState)(!1),[aj,ak]=(0,c.useState)(null),[al,am]=(0,c.useState)(""),[an,ao]=(0,c.useState)([]),[ap,aq]=(0,c.useState)(!1),[ar,as]=(0,c.useState)(null),[at,au]=(0,c.useState)(!1),[av,aw]=(0,c.useState)("add"),[ax,ay]=(0,c.useState)(null),[az,aA]=(0,c.useState)(!1),[aB,aC]=(0,c.useState)(null),[aD,aE]=(0,c.useState)([]),[aF,aG]=(0,c.useState)(!1),[aH,aI]=(0,c.useState)(null),[aJ,aK]=(0,c.useState)(!1),[aL,aM]=(0,c.useState)(""),[aN,aO]=(0,c.useState)(!1),[aP,aQ]=(0,c.useState)(null),[aR,aS]=(0,c.useState)(!1),[aT,aU]=(0,c.useState)(""),[aV,aW]=(0,c.useState)(!1),[aX,aY]=(0,c.useState)(null),[aZ,a$]=(0,c.useState)(null),a_=async()=>{if(h){l(!0);try{let a=localStorage.getItem("accessToken");if(!a){n("No access token found. Please log in."),l(!1);return}let b=await fetch(`/api/deals/get/${h}`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(!b.ok)throw Error(`Failed to fetch deal: ${b.statusText}`);let c=await b.json();j(c)}catch(a){console.error(a),n(a.message||"Failed to load deal details. Please try again later.")}finally{l(!1)}}};(0,c.useEffect)(()=>{if(!h){n("Deal ID not found"),l(!1);return}a_()},[h]),(0,c.useEffect)(()=>{h&&(async()=>{v(!0),x(null);try{let a=localStorage.getItem("accessToken");if(!a){x("No access token found"),v(!1);return}let b=await fetch(`${f}/deals/${h}/documents`,{headers:{Authorization:`Bearer ${a}`}});if(!b.ok){let a=await b.text().catch(()=>"");throw Error(`Failed to fetch documents: ${b.status} ${a}`)}let c=await b.json();Array.isArray(c)?r(c):(Array.isArray(c.employeeIds)&&t(c.employeeIds),Array.isArray(c.documents)&&r(c.documents))}catch(a){console.error(a),x(a.message||"Failed to load documents")}finally{v(!1)}})()},[h]),(0,c.useEffect)(()=>{h&&(async()=>{I(!0),K(null);try{let a=localStorage.getItem("accessToken");if(!a){K("No access token found"),I(!1);return}let b=await fetch(`${f}/deals/${h}/followups`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(!b.ok){let a=await b.text().catch(()=>"");throw Error(`Failed to fetch followups: ${b.status} ${a}`)}let c=await b.json();Array.isArray(c)&&G(c)}catch(a){console.error(a),K(a.message||"Failed to load followups")}finally{I(!1)}})()},[h]);let a0=async()=>{if(h){U(!0),W(null);try{let a=localStorage.getItem("accessToken");if(!a){W("No access token found"),U(!1);return}let b=await fetch(`${f}/deals/${h}/employees`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(!b.ok){let a=await b.text().catch(()=>"");throw Error(`Failed to fetch employees: ${b.status} ${a}`)}let c=await b.json();Array.isArray(c)?S(c):Array.isArray(c.employees)?S(c.employees):S([])}catch(a){console.error(a),W(a.message||"Failed to load employees")}finally{U(!1)}}};(0,c.useEffect)(()=>{h&&a0()},[h]);let a1=async()=>{if(h){aq(!0),as(null);try{let a=localStorage.getItem("accessToken");if(!a){as("No access token found"),aq(!1);return}let b=await fetch(`${f}/deals/${h}/notes`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(!b.ok){let a=await b.text().catch(()=>"");throw Error(`Failed to fetch notes: ${b.status} ${a}`)}let c=await b.json();Array.isArray(c)?ao(c):ao([])}catch(a){console.error(a),as(a.message||"Failed to load notes")}finally{aq(!1)}}};(0,c.useEffect)(()=>{h&&a1()},[h]);let a2=async()=>{if(h){aG(!0),aI(null);try{let a=localStorage.getItem("accessToken");if(!a){aI("No access token found"),aG(!1);return}let b=await fetch(`${f}/deals/${h}/tags`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(!b.ok){let a=await b.text().catch(()=>"");throw Error(`Failed to fetch tags: ${b.status} ${a}`)}let c=await b.json();Array.isArray(c)?aE(c):aE([])}catch(a){console.error(a),aI(a.message||"Failed to load tags")}finally{aG(!1)}}};(0,c.useEffect)(()=>{h&&a2()},[h]);let a3=async()=>{Y(!0),ag(""),ae(null),ai(!1),W(null),await a0();try{let a=localStorage.getItem("accessToken");if(!a)return void W("No access token found");let b=await fetch(`${f}/admin/departments`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(b.ok){let a=await b.json();if(Array.isArray(a)){let b=a.map(a=>"string"==typeof a?a:a.name||a.department||"").filter(Boolean);ac(b)}}else console.warn("Failed to fetch departments",b.statusText);let c=await fetch(`${f}/employee/all?page=0&size=200`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(c.ok){let a=await c.json(),b=(Array.isArray(a)?a:Array.isArray(a.content)?a.content:Array.isArray(a.employees)?a.employees:Object.values(a).flat?.()??[]).map(a=>({employeeId:a.employeeId??a.id??a.empId??a.employee_id??"",name:a.name??a.fullName??a.employeeName??"",department:a.department??a.dept??a.departmentName??"",designation:a.designation??a.title??"",profileUrl:a.profileUrl??a.avatar??""})).filter(a=>a.employeeId&&a.name);$(b);let d=new Set(R.map(a=>a.employeeId)),e=b.filter(a=>!d.has(a.employeeId));aa(e),ae(e.length>0?e[0].employeeId:null)}else console.warn("Failed to fetch employee pool",c.statusText)}catch(a){console.error("Error loading add-people resources",a),W("Failed to load available employees / departments")}},a4=()=>{Y(!1),ae(null),aa([]),ai(!1),ak(null),am(""),ag("")};(0,c.useEffect)(()=>{if(!X)return;let a=new Set(R.map(a=>a.employeeId)),b=Z.filter(b=>!a.has(b.employeeId));af&&""!==af&&(b=b.filter(a=>(a.department||"").toLowerCase()===af.toLowerCase())),aa(b),ae(b.length>0?b[0].employeeId:null)},[af,Z,R,X]);let a5=async()=>{if(h){if(!ad)return void alert("Select an employee to add");ai(!0);try{let a=localStorage.getItem("accessToken");if(!a){alert("No access token found"),ai(!1);return}let b=await fetch(`${f}/deals/${h}/employees`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({employeeIds:[ad]})});if(!b.ok){let a=await b.text().catch(()=>"");throw Error(`Failed to add employee: ${b.status} ${a}`)}await a0(),aa(a=>a.filter(a=>a.employeeId!==ad)),ae(null),Y(!1)}catch(a){console.error(a),alert(a?.message||"Failed to add employee")}finally{ai(!1)}}},a6=async a=>{if(h&&a&&confirm("Are you sure you want to remove this person from the deal?")){ak(a);try{let b=localStorage.getItem("accessToken");if(!b){alert("No access token found"),ak(null);return}let c=await fetch(`${f}/deals/${h}/employees/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}});if(!c.ok){let a=await c.text().catch(()=>"");throw Error(`Failed to remove employee: ${c.status} ${a}`)}await a0()}catch(a){console.error(a),alert(a?.message||"Failed to remove employee")}finally{ak(null)}}},a7=()=>{M(!1),O(null)},a8=async()=>{if(N){Q(!0);try{let a=localStorage.getItem("accessToken");if(!a){alert("No access token found"),Q(!1);return}let b={nextDate:N.nextDate,startTime:N.startTime,remarks:N.remarks,sendReminder:N.sendReminder,remindBefore:N.remindBefore,remindUnit:N.remindUnit};if(N.status&&(b.status=N.status),N.id){let c=await fetch(`${f}/deals/${h}/followups/${N.id}`,{method:"PUT",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(b)});if(!c.ok){let a=await c.text().catch(()=>"");throw Error(`Failed to update followup: ${c.status} ${a}`)}let d=await c.json();G(a=>a.map(a=>a.id===d.id?d:a))}else{let c=await fetch(`${f}/deals/${h}/followups`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(b)});if(!c.ok){let a=await c.text().catch(()=>"");throw Error(`Failed to create followup: ${c.status} ${a}`)}let d=await c.json();G(a=>[d,...a])}a7()}catch(a){console.error(a),alert(a?.message||"Failed to save followup")}finally{Q(!1)}}},a9=async a=>{if(a&&confirm("Are you sure you want to delete this follow up?"))try{let b=localStorage.getItem("accessToken");if(!b)return void alert("No access token found");let c=await fetch(`${f}/deals/${h}/followups/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}});if(!c.ok){let a=await c.text().catch(()=>"");throw Error(`Failed to delete followup: ${c.status} ${a}`)}G(b=>b.filter(b=>b.id!==a))}catch(a){console.error(a),alert(a?.message||"Failed to delete followup")}},ba=()=>{au(!1),ay(null)},bb=async()=>{if(h&&ax){if(!ax.noteTitle||!ax.noteTitle.trim())return void alert("Please enter note title");aA(!0);try{let a,b=localStorage.getItem("accessToken");if(!b){alert("No access token found"),aA(!1);return}let c={noteTitle:ax.noteTitle.trim(),noteType:ax.noteType??"PUBLIC",noteDetails:ax.noteDetails??""};if(!(a="edit"===av&&null!=ax.id?await fetch(`${f}/deals/${h}/notes/${ax.id}`,{method:"PUT",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"},body:JSON.stringify(c)}):await fetch(`${f}/deals/${h}/notes`,{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"},body:JSON.stringify(c)})).ok){let b=await a.text().catch(()=>"");throw Error(`Failed to save note: ${a.status} ${b}`)}await a1(),ba()}catch(a){console.error(a),alert(a?.message||"Failed to save note")}finally{aA(!1)}}},bc=async a=>{if(h&&null!=a&&confirm("Are you sure you want to delete this note?")){aC(a);try{let b=localStorage.getItem("accessToken");if(!b){alert("No access token found"),aC(null);return}let c=await fetch(`${f}/deals/${h}/notes/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}});if(!c.ok){let a=await c.text().catch(()=>"");throw Error(`Failed to delete note: ${c.status} ${a}`)}await a1()}catch(a){console.error(a),alert(a?.message||"Failed to delete note")}finally{aC(null)}}},bd=()=>{aK(!1),aM("")},be=async()=>{if(h){if(!aL.trim())return void alert("Please enter a tag name");aO(!0);try{let a=localStorage.getItem("accessToken");if(!a){alert("No access token found"),aO(!1);return}let b={tagName:aL.trim()},c=await fetch(`${f}/deals/${h}/tags`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(b)});if(!c.ok){let a=await c.text().catch(()=>"");throw Error(`Failed to save tag: ${c.status} ${a}`)}await a2(),bd()}catch(a){console.error(a),alert(a?.message||"Failed to save tag")}finally{aO(!1)}}},bf=async a=>{if(h&&null!=a&&confirm("Are you sure you want to delete this tag?")){aQ(a);try{let b=localStorage.getItem("accessToken");if(!b){alert("No access token found"),aQ(null);return}let c=await fetch(`${f}/deals/${h}/tags/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}});if(!c.ok){let a=await c.text().catch(()=>"");throw Error(`Failed to delete tag: ${c.status} ${a}`)}await a2()}catch(a){console.error(a),alert(a?.message||"Failed to delete tag")}finally{aQ(null)}}},bg=()=>{aS(!1),aU("")},bh=async()=>{if(h){if(!aT.trim())return void alert("Please enter a comment");aW(!0);try{let a=localStorage.getItem("accessToken");if(!a){aW(!1),alert("No access token found");return}let b={commentText:aT.trim()},c=await fetch(`${f}/deals/${h}/comments`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(b)});if(!c.ok){let a=await c.text().catch(()=>"");throw Error(`Failed to save comment: ${c.status} ${a}`)}await a_(),bg()}catch(a){console.error(a),alert(a?.message||"Failed to save comment")}finally{aW(!1)}}},bi=async a=>{if(h&&null!=a&&confirm("Are you sure you want to delete this comment?")){aY(a);try{let b=localStorage.getItem("accessToken");if(!b){aY(null),alert("No access token found");return}let c=await fetch(`${f}/deals/${h}/comments/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}});if(!c.ok){let a=await c.text().catch(()=>"");throw Error(`Failed to delete comment: ${c.status} ${a}`)}await a_()}catch(a){console.error(a),alert(a?.message||"Failed to delete comment")}finally{aY(null)}}},bj=R.filter(a=>(a.name||"").toLowerCase().includes(al.toLowerCase()));(0,c.useEffect)(()=>{let a=()=>{a$(null)};return document.addEventListener("click",a),()=>document.removeEventListener("click",a)},[]);let bk=(a,b)=>{b.stopPropagation(),a$(b=>b===a?null:a)},bl=a=>{a.stopPropagation()},bm=async()=>{try{E(!0);let a=localStorage.getItem("accessToken");if(!a){alert("No access token found"),E(!1);return}let b=new FormData,c=g.split("/").pop()||"upload.png";if(z)b.append("file",z),c=z.name,b.append("filename",c),b.append("url",z.name);else{let a=`LOCAL_PATH:${g}`,d=new Blob([a],{type:"text/plain"}),e=new File([d],c,{type:"text/plain"});b.append("file",e),b.append("filename",c),b.append("url",g)}let d=await fetch(`${f}/deals/${h}/documents`,{method:"POST",headers:{Authorization:`Bearer ${a}`},body:b});if(!d.ok){let a=await d.text().catch(()=>"");throw Error(`Failed to upload document: ${d.status} ${a}`)}let e=await d.json();r(a=>[e,...a]),A(null),C(null),y.current&&(y.current.value="")}catch(a){console.error(a),alert(a?.message||"Failed to upload document")}finally{E(!1)}},bn=async a=>{if(confirm("Are you sure you want to delete this document?"))try{let b=localStorage.getItem("accessToken");if(!b)return void alert("No access token found");let c=await fetch(`${f}/deals/${h}/documents/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}});if(!c.ok){let a=await c.text().catch(()=>"");throw Error(`Failed to delete document: ${c.status} ${a}`)}r(b=>b.filter(b=>b.id!==a))}catch(a){console.error(a),alert(a?.message||"Failed to delete document")}};return k?(0,b.jsx)("div",{className:"flex justify-center items-center min-h-screen text-lg font-semibold",children:"Loading deal details..."}):m||!i?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen text-lg font-semibold text-red-600",children:[(0,b.jsx)("div",{children:m||"Deal not found"}),(0,b.jsx)(d.default,{href:"/deals/get",className:"mt-4 text-blue-600 hover:underline",children:"Back to Deals"})]}):(0,b.jsxs)("div",{className:"p-6 max-w-6xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(d.default,{href:"/deals/get",className:"inline-flex items-center gap-2 text-blue-600 hover:underline mb-2",children:"â† Back to Deals"}),(0,b.jsxs)("h1",{className:"text-2xl font-semibold text-gray-900",children:["Deal fbvhh ",i.title||i.id]})]}),(0,b.jsx)("button",{onClick:()=>window.history.back(),"aria-label":"Close",className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_360px] gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"bg-white border rounded-2xl p-6 shadow-sm mb-6",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"text-sm text-gray-500 mb-2",children:[(0,b.jsx)("span",{className:"font-medium",children:"Sales Pipeline"})," â†’"," ",(0,b.jsx)("span",{className:"font-semibold",children:i.dealStage||"â€”"})]}),(0,b.jsx)("h2",{className:"text-lg font-semibold",children:i.title||"â€”"}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["ID: ",i.id]})]}),(0,b.jsx)("div",{className:"flex items-start gap-3",children:(0,b.jsx)("button",{className:"p-2 rounded-md hover:bg-slate-50",children:(0,b.jsxs)("svg",{className:"w-5 h-5 text-gray-400",viewBox:"0 0 24 24",fill:"none",children:[(0,b.jsx)("circle",{cx:"5",cy:"12",r:"1.5"}),(0,b.jsx)("circle",{cx:"12",cy:"12",r:"1.5"}),(0,b.jsx)("circle",{cx:"19",cy:"12",r:"1.5"})]})})})]}),(0,b.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Deal Name"}),(0,b.jsx)("span",{className:"text-gray-900",children:i.title||"â€”"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Lead Contact"}),(0,b.jsx)("span",{className:"text-gray-900",children:i.leadName||"â€”"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Email"}),(0,b.jsx)("span",{className:"text-gray-900",children:i.leadEmail||"â€”"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Company Name"}),(0,b.jsx)("span",{className:"text-gray-900",children:i.leadCompany||"â€”"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Deal Category"}),(0,b.jsx)("span",{className:"text-gray-900",children:i.dealCategory||"â€”"})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Deal Agent"}),(0,b.jsx)("span",{className:"text-gray-900",children:i.dealAgentMeta?.name||i.dealAgent||"â€”"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Deal Watcher"}),(0,b.jsx)("span",{className:"text-gray-900",children:i.dealWatchersMeta&&i.dealWatchersMeta.map(a=>a.name).join(", ")||i.dealWatchers&&i.dealWatchers.join(", ")||"â€”"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Close Date"}),(0,b.jsx)("span",{className:"text-gray-900",children:i.expectedCloseDate?new Date(i.expectedCloseDate).toLocaleDateString():"â€”"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Deal Value"}),(0,b.jsx)("span",{className:"text-gray-900",children:"number"==typeof i.value?`$${i.value.toLocaleString(void 0)}`:"â€”"})]})]})]})]}),(0,b.jsxs)("div",{className:"bg-white border rounded-2xl p-4 shadow-sm",children:[(0,b.jsx)("div",{className:"border-b -mx-4 px-4",children:(0,b.jsxs)("nav",{className:"flex gap-6 text-sm",children:[(0,b.jsx)("button",{onClick:()=>p("files"),className:`py-3 px-1 ${"files"===o?"border-b-2 border-violet-500 text-violet-600":"text-gray-600"}`,children:"Files"}),(0,b.jsx)("button",{onClick:()=>p("followups"),className:`py-3 px-1 ${"followups"===o?"border-b-2 border-violet-500 text-violet-600":"text-gray-600"}`,children:"Follow Up"}),(0,b.jsx)("button",{onClick:()=>p("people"),className:`py-3 px-1 ${"people"===o?"border-b-2 border-violet-500 text-violet-600":"text-gray-600"}`,children:"People"}),(0,b.jsx)("button",{onClick:()=>p("notes"),className:`py-3 px-1 ${"notes"===o?"border-b-2 border-violet-500 text-violet-600":"text-gray-600"}`,children:"Notes"}),(0,b.jsx)("button",{onClick:()=>p("comments"),className:`py-3 px-1 ${"comments"===o?"border-b-2 border-violet-500 text-violet-600":"text-gray-600"}`,children:"Comments"}),(0,b.jsx)("button",{onClick:()=>p("tags"),className:`py-3 px-1 ${"tags"===o?"border-b-2 border-violet-500 text-violet-600":"text-gray-600"}`,children:"Tags"})]})}),(0,b.jsxs)("div",{className:"p-6 min-h-[180px]",children:["files"===o&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("input",{ref:y,type:"file",accept:"*/*",className:"hidden",onChange:a=>{let b=a.target.files&&a.target.files[0];b?(A(b),C(b.name)):(A(null),C(null))}}),(0,b.jsxs)("button",{type:"button",className:"inline-flex items-center gap-2 px-3 py-2 rounded-md border text-sm text-violet-600 hover:bg-violet-50",onClick:()=>{A(null),C(null),y.current?.click()},children:[(0,b.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[(0,b.jsx)("path",{d:"M12 4v12",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,b.jsx)("path",{d:"M8 8l4-4 4 4",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,b.jsx)("path",{d:"M20 20H4",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Choose File"]}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:B?(0,b.jsxs)("span",{children:["Selected: ",B]}):(0,b.jsx)("span",{children:"No file selected (will use developer local file if you press Upload without selecting)."})})]}),(0,b.jsxs)("div",{className:"mt-3 flex gap-3",children:[(0,b.jsx)("button",{type:"button",onClick:bm,disabled:D,className:`inline-flex items-center gap-2 px-3 py-2 rounded-md border text-sm text-white ${D?"bg-gray-400":"bg-violet-600 hover:bg-violet-700"}`,children:D?"Uploading...":"Upload"}),(0,b.jsx)("button",{type:"button",onClick:()=>{A(null),C(null),y.current&&(y.current.value="")},className:"inline-flex items-center gap-2 px-3 py-2 rounded-md border text-sm text-gray-600 hover:bg-slate-50",children:"Clear"})]}),(0,b.jsxs)("div",{className:"mt-6 text-sm text-gray-500",children:[u&&(0,b.jsx)("div",{children:"Loading documents..."}),w&&(0,b.jsx)("div",{className:"text-red-600",children:w}),!u&&0===q.length&&(0,b.jsx)("div",{children:"No files uploaded yet."}),(0,b.jsx)("div",{className:"space-y-3 mt-4",children:q.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-md",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-md overflow-hidden bg-slate-100 flex items-center justify-center text-xs text-gray-400",children:(0,b.jsx)("img",{src:a.url||g,alt:a.filename,className:"w-full h-full object-cover"})}),(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("div",{className:"font-medium",children:a.filename}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:["Uploaded: ",a.uploadedAt?new Date(a.uploadedAt).toLocaleString():"â€”"]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("a",{href:a.url||g,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-sky-600 hover:underline",children:"View"}),(0,b.jsx)("button",{onClick:()=>bn(a.id),className:"text-sm text-red-600 hover:underline",children:"Delete"})]})]},a.id??`${a.filename}-${c}`))})]})]}),"followups"===o&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("button",{type:"button",onClick:()=>{O({nextDate:"",startTime:"",remarks:"",sendReminder:!0,remindBefore:1,remindUnit:"DAYS",status:"PENDING"}),M(!0)},className:"inline-flex items-center gap-2 text-blue-600",children:[(0,b.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[(0,b.jsx)("path",{d:"M12 5v14",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,b.jsx)("path",{d:"M5 12h14",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Add a Follow Up"]})}),(0,b.jsxs)("div",{className:"rounded-md border overflow-hidden",children:[(0,b.jsxs)("div",{className:"bg-blue-50 text-sm text-gray-700 grid grid-cols-[1fr_1fr_1fr_1fr_80px] gap-3 p-2 items-center font-medium",children:[(0,b.jsx)("div",{children:"Created"}),(0,b.jsx)("div",{children:"Follow Up"}),(0,b.jsx)("div",{children:"Remark"}),(0,b.jsx)("div",{className:"text-center",children:"Status"}),(0,b.jsx)("div",{className:"text-center",children:"Action"})]}),(0,b.jsxs)("div",{children:[H&&(0,b.jsx)("div",{className:"p-4",children:"Loading followups..."}),J&&(0,b.jsx)("div",{className:"p-4 text-red-600",children:J}),!H&&0===F.length&&(0,b.jsx)("div",{className:"p-4 text-sm text-gray-500",children:"No follow ups"}),F.map((a,c)=>{let d;return(0,b.jsxs)("div",{className:"grid grid-cols-[1fr_1fr_1fr_1fr_80px] gap-4 items-center p-4 border-t",children:[(0,b.jsx)("div",{children:(d=a.nextDate)?new Date(d).toLocaleDateString():"â€”"}),(0,b.jsx)("div",{children:a.startTime||"â€”"}),(0,b.jsx)("div",{children:a.remarks||"---"}),(0,b.jsx)("div",{className:"flex items-center justify-center gap-2",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:`inline-block w-3 h-3 rounded-full ${"PENDING"===a.status?"bg-yellow-400":"CANCELLED"===a.status?"bg-gray-400":"COMPLETED"===a.status?"bg-green-400":"bg-gray-300"}`}),(0,b.jsx)("span",{className:"text-sm",children:a.status??"PENDING"})]})}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("button",{onClick:b=>bk(`followup-${a.id??c}`,b),className:"p-1 rounded hover:bg-slate-50 text-gray-500","aria-label":"Actions",children:"â‹®"}),aZ===`followup-${a.id??c}`&&(0,b.jsxs)("div",{onClick:bl,className:"absolute right-0 mt-2 w-36 bg-white border rounded-md shadow-sm z-50",children:[(0,b.jsx)("button",{onClick:()=>{O({id:a.id,nextDate:a.nextDate?a.nextDate.split("T")[0]:a.nextDate||"",startTime:a.startTime?a.startTime.slice(0,5):a.startTime||"",remarks:a.remarks||"",sendReminder:!!a.sendReminder,remindBefore:a.remindBefore??1,remindUnit:a.remindUnit??"DAYS",status:a.status??"PENDING"}),M(!0),a$(null)},className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-50",children:"Edit"}),(0,b.jsx)("button",{onClick:()=>{a9(a.id),a$(null)},className:"w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-slate-50",children:"Delete"})]})]})]},a.id??`followup-${c}`)})]})]})]}),"people"===o&&(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("button",{type:"button",onClick:a3,className:"inline-flex items-center gap-2 text-blue-600",children:[(0,b.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[(0,b.jsx)("path",{d:"M12 5v14",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,b.jsx)("path",{d:"M5 12h14",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Add People"]}),(0,b.jsx)("div",{className:"flex items-center gap-3",children:(0,b.jsx)("input",{type:"search",placeholder:"Search",value:al,onChange:a=>am(a.target.value),className:"rounded-full border px-3 py-2 text-sm"})})]}),(0,b.jsxs)("div",{className:"rounded-md border overflow-hidden",children:[(0,b.jsxs)("div",{className:"bg-blue-50 text-sm text-gray-700 grid grid-cols-[1fr_1fr_1fr_80px] gap-3 p-2 items-center font-medium",children:[(0,b.jsx)("div",{children:"Name"}),(0,b.jsx)("div",{children:"Department"}),(0,b.jsx)("div",{className:"text-center",children:"Designation"}),(0,b.jsx)("div",{className:"text-center",children:"Action"})]}),(0,b.jsxs)("div",{children:[T&&(0,b.jsx)("div",{className:"p-4",children:"Loading people..."}),V&&(0,b.jsx)("div",{className:"p-4 text-red-600",children:V}),!T&&0===R.length&&(0,b.jsx)("div",{className:"p-4 text-sm text-gray-500",children:"No people assigned"}),bj.map((a,c)=>(0,b.jsxs)("div",{className:"grid grid-cols-[1fr_1fr_1fr_80px] gap-4 items-center p-4 border-t",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-slate-100",children:a.profileUrl?(0,b.jsx)("img",{src:a.profileUrl,alt:a.name,className:"w-full h-full object-cover"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center text-xs text-gray-400",children:"N"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-sm",children:a.name}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a.designation||""}),(0,b.jsxs)("div",{className:"text-xs text-gray-400",children:["ID: ",a.employeeId]})]})]}),(0,b.jsx)("div",{className:"text-sm",children:a.department||"â€”"}),(0,b.jsx)("div",{className:"text-sm text-center",children:a.designation||"â€”"}),(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)("button",{onClick:()=>a6(a.employeeId),disabled:aj===a.employeeId,className:"text-red-600 hover:underline","aria-label":"Remove",children:aj===a.employeeId?"Removing...":"ðŸ—‘ï¸"})})]},a.employeeId??`emp-${c}`))]})]})]}),"notes"===o&&(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsxs)("button",{onClick:()=>{aw("add"),ay({noteTitle:"",noteType:"PUBLIC",noteDetails:""}),au(!0)},className:"inline-flex items-center gap-2 text-blue-600",children:[(0,b.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[(0,b.jsx)("circle",{cx:"12",cy:"12",r:"11",strokeWidth:"1"}),(0,b.jsx)("path",{d:"M12 8v8M8 12h8",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Add a Note"]})}),(0,b.jsxs)("div",{className:"rounded-md border overflow-hidden",children:[(0,b.jsxs)("div",{className:"bg-blue-50 text-sm text-gray-700 grid grid-cols-[1fr_1fr_80px] gap-3 p-3 items-center font-medium rounded-t-md",children:[(0,b.jsx)("div",{children:"Note Title"}),(0,b.jsx)("div",{children:"Note Type"}),(0,b.jsx)("div",{className:"text-center",children:"Action"})]}),(0,b.jsxs)("div",{children:[ap&&(0,b.jsx)("div",{className:"p-6 text-sm text-gray-500",children:"Loading notes..."}),ar&&(0,b.jsx)("div",{className:"p-6 text-sm text-red-600",children:ar}),!ap&&0===an.length&&(0,b.jsx)("div",{className:"p-6 text-sm text-gray-500",children:"No notes yet."}),an.map((a,c)=>(0,b.jsxs)("div",{className:"grid grid-cols-[1fr_1fr_80px] items-start border-t p-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-sm",children:a.noteTitle}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:["ID: ",a.id," â€¢ ",a.createdBy||"--"]})]}),(0,b.jsx)("div",{className:"text-sm",children:(0,b.jsx)("div",{className:"inline-flex items-center gap-2",children:(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"PUBLIC"===a.noteType?"ðŸŒ Public":"ðŸ”’ Private"})})}),(0,b.jsx)("div",{className:"text-center",children:(0,b.jsxs)("div",{className:"relative inline-block",children:[(0,b.jsx)("button",{onClick:b=>bk(`note-${a.id??c}`,b),className:"p-1 rounded hover:bg-slate-50 text-gray-500","aria-label":"Actions",children:"â‹®"}),aZ===`note-${a.id??c}`&&(0,b.jsxs)("div",{onClick:bl,className:"absolute right-0 mt-2 w-40 bg-white border rounded-md shadow-sm z-50",children:[(0,b.jsx)("button",{onClick:()=>{aw("view"),ay(a),au(!0),a$(null)},className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-50",children:"View"}),(0,b.jsx)("button",{onClick:()=>{aw("edit"),ay(a),au(!0),a$(null)},className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-50",children:"Edit"}),(0,b.jsx)("button",{onClick:()=>{bc(a.id),a$(null)},disabled:aB===a.id,className:"w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-slate-50",children:aB===a.id?"Deleting...":"Delete"})]})]})})]},a.id??`note-${c}`))]})]})]}),"comments"===o&&(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsxs)("button",{onClick:()=>{aU(""),aS(!0)},className:"inline-flex items-center gap-2 text-blue-600",children:[(0,b.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[(0,b.jsx)("circle",{cx:"12",cy:"12",r:"11",strokeWidth:"1"}),(0,b.jsx)("path",{d:"M12 8v8M8 12h8",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Add a Comment"]})}),(0,b.jsxs)("div",{className:"rounded-md border overflow-hidden",children:[(0,b.jsxs)("div",{className:"bg-blue-50 text-sm text-gray-700 grid grid-cols-[140px_1fr_80px] gap-3 p-3 items-center font-medium rounded-t-md",children:[(0,b.jsx)("div",{children:"Date"}),(0,b.jsx)("div",{children:"Comment"}),(0,b.jsx)("div",{className:"text-center",children:"Action"})]}),(0,b.jsxs)("div",{children:[(!i.comments||0===i.comments.length)&&(0,b.jsx)("div",{className:"p-6 text-sm text-gray-500",children:"No comments yet."}),i.comments&&i.comments.length>0&&i.comments.map((a,c)=>(0,b.jsxs)("div",{className:"grid grid-cols-[140px_1fr_80px] items-start border-t p-4",children:[(0,b.jsx)("div",{className:"text-sm text-gray-700",children:new Date(a.createdAt).toLocaleDateString()}),(0,b.jsx)("div",{className:"text-sm text-gray-700",children:a.commentText||"--"}),(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)("button",{onClick:()=>bi(a.id),disabled:aX===a.id,className:"text-red-600 hover:underline","aria-label":"Delete comment",children:aX===a.id?"Deleting...":"ðŸ—‘ï¸"})})]},a.id||`${a.employeeId??"emp"}-${a.createdAt??c}`))]})]})]}),"tags"===o&&(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsxs)("button",{onClick:()=>{aM(""),aK(!0)},className:"inline-flex items-center gap-2 text-blue-600",children:[(0,b.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[(0,b.jsx)("circle",{cx:"12",cy:"12",r:"11",strokeWidth:"1"}),(0,b.jsx)("path",{d:"M12 8v8M8 12h8",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Add a Tag"]})}),(0,b.jsxs)("div",{className:"rounded-md border overflow-hidden",children:[(0,b.jsxs)("div",{className:"bg-blue-50 text-sm text-gray-700 grid grid-cols-[1fr_80px] gap-3 p-3 items-center font-medium rounded-t-md",children:[(0,b.jsx)("div",{children:"Tag Name"}),(0,b.jsx)("div",{className:"text-center",children:"Action"})]}),(0,b.jsxs)("div",{children:[aF&&(0,b.jsx)("div",{className:"p-6 text-sm text-gray-500",children:"Loading tags..."}),aH&&(0,b.jsx)("div",{className:"p-6 text-sm text-red-600",children:aH}),!aF&&0===aD.length&&(0,b.jsx)("div",{className:"p-6 text-sm text-gray-500",children:"No tags yet."}),aD.map((a,c)=>{let d="string"==typeof a?a:a.tagName,e="string"==typeof a?void 0:a.id,f=`${"string"==typeof a?a:a.id??a.tagName}-${c}`;return(0,b.jsxs)("div",{className:"grid grid-cols-[1fr_80px] items-center border-t p-4",children:[(0,b.jsx)("div",{className:"text-sm text-gray-700",children:d}),(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)("button",{onClick:()=>bf(e),disabled:aP===e,className:"text-red-600","aria-label":"Delete tag",children:aP===e?"Deleting...":"ðŸ—‘ï¸"})})]},f)})]})]})]}),"tags"===o&&(0,b.jsx)(b.Fragment,{})]})]})]}),(0,b.jsx)("aside",{className:"space-y-4",children:(0,b.jsxs)("div",{className:"bg-white border rounded-2xl p-6 shadow-sm",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Lead Contact Details"}),(0,b.jsxs)("div",{className:"space-y-3 text-sm text-gray-700",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Name"}),(0,b.jsx)("span",{className:"text-gray-900",children:i.leadName||"â€”"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Email"}),(0,b.jsx)("span",{className:"text-gray-900",children:i.leadEmail||"â€”"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Mobile"}),(0,b.jsx)("span",{className:"text-gray-900",children:i.leadMobile||"â€”"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Company Name"}),(0,b.jsx)("span",{className:"text-gray-900",children:i.leadCompany||"â€”"})]}),(0,b.jsxs)("div",{className:"mt-4 flex gap-3",children:[(0,b.jsxs)("a",{href:i.leadEmail?`mailto:${i.leadEmail}`:"#",onClick:a=>{i.leadEmail||a.preventDefault()},className:"inline-flex items-center gap-2 px-3 py-2 rounded-md border text-sm text-sky-600 hover:bg-sky-50",children:[(0,b.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[(0,b.jsx)("path",{d:"M3 8l9 6 9-6",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,b.jsx)("path",{d:"M21 19H3",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Email"]}),(0,b.jsxs)("a",{href:i.leadMobile?`tel:${i.leadMobile}`:"#",onClick:a=>{i.leadMobile||a.preventDefault()},className:"inline-flex items-center gap-2 px-3 py-2 rounded-md border text-sm text-sky-600 hover:bg-sky-50",children:[(0,b.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,b.jsx)("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.86 19.86 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6A19.86 19.86 0 0 1 2.09 4.18 2 2 0 0 1 4 2h3a2 2 0 0 1 2 1.72c.12.9.36 1.77.72 2.58a2 2 0 0 1-.45 2.11L9.91 9.91a14 14 0 0 0 6 6l1.5-1.5a2 2 0 0 1 2.11-.45c.81.36 1.68.6 2.58.72A2 2 0 0 1 22 16.92z",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"})}),"Call"]})]})]})]})})]}),L&&N&&(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-20",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:a7}),(0,b.jsxs)("div",{className:"relative bg-white w-full max-w-4xl rounded-2xl shadow-xl border p-6 mx-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold",children:N.id?"Edit Follow Up":"Add Follow Up"}),(0,b.jsx)("button",{onClick:a7,className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),(0,b.jsxs)("div",{className:"rounded-lg border p-6 mb-6",children:[(0,b.jsx)("div",{className:"text-sm font-medium mb-4",children:"Follow Up Details"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Next Follow Up *"}),(0,b.jsx)("input",{type:"date",value:N.nextDate,onChange:a=>O({...N,nextDate:a.target.value}),className:"mt-2 block w-full rounded-md border px-3 py-2"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Start Time *"}),(0,b.jsx)("input",{type:"time",value:N.startTime,onChange:a=>O({...N,startTime:a.target.value}),className:"mt-2 block w-full rounded-md border px-3 py-2"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Status"}),(0,b.jsxs)("div",{className:"mt-2 flex items-center gap-3",children:[(0,b.jsxs)("span",{className:`inline-flex items-center gap-2 px-3 py-2 rounded-md border ${"PENDING"===N.status?"bg-yellow-50 border-yellow-200":"COMPLETED"===N.status?"bg-green-50 border-green-200":"CANCELLED"===N.status?"bg-gray-50 border-gray-200":"bg-white"}`,children:[(0,b.jsx)("span",{className:`inline-block w-2 h-2 rounded-full ${"PENDING"===N.status?"bg-yellow-400":"COMPLETED"===N.status?"bg-green-400":"CANCELLED"===N.status?"bg-gray-400":"bg-gray-300"}`}),(0,b.jsx)("span",{className:"text-sm",children:N.status??"PENDING"})]}),(0,b.jsxs)("select",{value:N.status,onChange:a=>O({...N,status:a.target.value}),className:"mt-0 block rounded-md border px-3 py-2",children:[(0,b.jsx)("option",{value:"PENDING",children:"Pending"}),(0,b.jsx)("option",{value:"COMPLETED",children:"Completed"}),(0,b.jsx)("option",{value:"CANCELLED",children:"Cancelled"})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("input",{id:"sendReminder",type:"checkbox",checked:!!N.sendReminder,onChange:a=>O({...N,sendReminder:a.target.checked})}),(0,b.jsx)("label",{htmlFor:"sendReminder",className:"text-sm text-gray-700",children:"Send Reminder"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600",children:"Remind Before *"}),(0,b.jsx)("input",{type:"number",min:0,value:N.remindBefore??1,onChange:a=>O({...N,remindBefore:Number(a.target.value)}),className:"mt-2 block w-full rounded-md border px-3 py-2"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600",children:"Days / Hours / Minutes"}),(0,b.jsxs)("select",{value:N.remindUnit,onChange:a=>O({...N,remindUnit:a.target.value}),className:"mt-2 block w-full rounded-md border px-3 py-2",children:[(0,b.jsx)("option",{value:"DAYS",children:"Days"}),(0,b.jsx)("option",{value:"HOURS",children:"Hours"}),(0,b.jsx)("option",{value:"MINUTES",children:"Minutes"})]})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600",children:"Remark"}),(0,b.jsx)("textarea",{value:N.remarks,onChange:a=>O({...N,remarks:a.target.value}),className:"mt-2 block w-full rounded-md border px-3 py-2 min-h-[120px]",placeholder:"---"})]})]})]}),(0,b.jsxs)("div",{className:"mt-4 flex justify-center gap-6",children:[(0,b.jsx)("button",{onClick:a7,className:"px-6 py-2 border rounded-md text-sm",children:"Cancel"}),(0,b.jsx)("button",{onClick:a8,disabled:P,className:`px-6 py-2 rounded-md text-sm text-white ${P?"bg-gray-400":"bg-blue-600 hover:bg-blue-700"}`,children:P?"Saving...":"Save"})]})]})]}),X&&(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-20",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:a4}),(0,b.jsxs)("div",{className:"relative bg-white w-full max-w-4xl rounded-2xl shadow-xl border p-6 mx-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold",children:"Add People"}),(0,b.jsx)("button",{onClick:a4,className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),(0,b.jsxs)("div",{className:"rounded-lg border p-6 mb-6",children:[(0,b.jsx)("div",{className:"text-sm font-medium mb-4",children:"Add People"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-6 items-end",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Name *"}),(0,b.jsxs)("select",{value:ad??"",onChange:a=>ae(a.target.value),className:"mt-2 block w-full rounded-md border px-3 py-2",children:[(0,b.jsx)("option",{value:"",children:"-- Select Person --"}),_.map(a=>(0,b.jsxs)("option",{value:a.employeeId,children:[a.name," ",a.department?`â€” ${a.department}`:""]},a.employeeId))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Department *"}),(0,b.jsxs)("select",{value:af,onChange:a=>ag(a.target.value),className:"mt-2 block w-full rounded-md border px-3 py-2",children:[(0,b.jsx)("option",{value:"",children:"-- All Departments --"}),ab.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),(0,b.jsx)("div",{className:"col-span-2 text-sm text-gray-500",children:(0,b.jsxs)("div",{className:"mt-2",children:["Tip: Choose department to filter the Name dropdown. If Department is left as ",(0,b.jsx)("strong",{children:"All"}),", all available employees will show."]})})]})]}),(0,b.jsxs)("div",{className:"flex justify-center gap-6",children:[(0,b.jsx)("button",{onClick:a4,className:"px-6 py-2 border rounded-md text-sm",children:"Cancel"}),(0,b.jsx)("button",{onClick:a5,disabled:ah||!ad,className:`px-6 py-2 rounded-md text-sm text-white ${ah?"bg-gray-400":"bg-blue-600 hover:bg-blue-700"}`,children:ah?"Adding...":"Save"})]})]})]}),at&&ax&&(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-20",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:ba}),(0,b.jsxs)("div",{className:"relative bg-white w-full max-w-4xl rounded-2xl shadow-xl border p-6 mx-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold",children:"add"===av?"Add Deal Note":"edit"===av?"Edit Deal Note":ax.noteTitle||"View Note"}),(0,b.jsx)("button",{onClick:ba,className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),"view"===av?(0,b.jsxs)("div",{className:"rounded-lg border p-6 mb-6",children:[(0,b.jsx)("div",{className:"text-sm font-medium mb-4",children:"Deal Note Details"}),(0,b.jsxs)("div",{className:"grid grid-cols-[220px_1fr] gap-4 text-sm text-gray-700",children:[(0,b.jsx)("div",{className:"text-gray-500",children:"Note Title"}),(0,b.jsx)("div",{className:"text-gray-900",children:ax.noteTitle||"â€”"}),(0,b.jsx)("div",{className:"text-gray-500",children:"Note Type "}),(0,b.jsx)("div",{className:"text-gray-900",children:"PUBLIC"===ax.noteType?"Public":"Private"}),(0,b.jsx)("div",{className:"text-gray-500",children:"Note Detail"}),(0,b.jsx)("div",{className:"text-gray-900",children:ax.noteDetails&&ax.noteDetails.trim()?ax.noteDetails:"---"})]})]}):(0,b.jsxs)("div",{className:"rounded-lg border p-6 mb-6",children:[(0,b.jsx)("div",{className:"text-sm font-medium mb-4",children:"Deal Note Details"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Note Title *"}),(0,b.jsx)("input",{type:"text",value:ax.noteTitle,onChange:a=>ay({...ax,noteTitle:a.target.value}),className:"mt-2 block w-full rounded-md border px-3 py-2"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Note Type"}),(0,b.jsxs)("div",{className:"mt-2 flex items-center gap-4",children:[(0,b.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)("input",{type:"radio",name:"noteType",value:"PUBLIC",checked:"PUBLIC"===ax.noteType,onChange:()=>ay({...ax,noteType:"PUBLIC"})}),(0,b.jsx)("span",{className:"text-sm",children:"Public"})]}),(0,b.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)("input",{type:"radio",name:"noteType",value:"PRIVATE",checked:"PRIVATE"===ax.noteType,onChange:()=>ay({...ax,noteType:"PRIVATE"})}),(0,b.jsx)("span",{className:"text-sm",children:"Private"})]})]})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600",children:"Note Detail "}),(0,b.jsx)("textarea",{value:ax.noteDetails,onChange:a=>ay({...ax,noteDetails:a.target.value}),className:"mt-2 block w-full rounded-md border px-3 py-2 min-h-[120px]",placeholder:"--"})]})]})]}),(0,b.jsxs)("div",{className:"mt-4 flex justify-center gap-6",children:[(0,b.jsx)("button",{onClick:ba,className:"px-6 py-2 border rounded-md text-sm",children:"Cancel"}),"view"!==av&&(0,b.jsx)("button",{onClick:bb,disabled:az,className:`px-6 py-2 rounded-md text-sm text-white ${az?"bg-gray-400":"bg-blue-600 hover:bg-blue-700"}`,children:az?"Saving...":"Save"})]})]})]}),aJ&&(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-20",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:bd}),(0,b.jsxs)("div",{className:"relative bg-white w-full max-w-4xl rounded-2xl shadow-xl border p-6 mx-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold",children:"Add Tags"}),(0,b.jsx)("button",{onClick:bd,className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),(0,b.jsxs)("div",{className:"rounded-lg border p-6 mb-6",children:[(0,b.jsx)("div",{className:"text-sm font-medium mb-4",children:"Tag"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Tag *"}),(0,b.jsx)("input",{type:"text",value:aL,onChange:a=>aM(a.target.value),className:"mt-2 block w-full rounded-md border px-3 py-2",placeholder:"--"})]})]}),(0,b.jsxs)("div",{className:"flex justify-center gap-6",children:[(0,b.jsx)("button",{onClick:bd,className:"px-6 py-2 border rounded-md text-sm",children:"Cancel"}),(0,b.jsx)("button",{onClick:be,disabled:aN,className:`px-6 py-2 rounded-md text-sm text-white ${aN?"bg-gray-400":"bg-blue-600 hover:bg-blue-700"}`,children:aN?"Saving...":"Save"})]})]})]}),aR&&(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-20",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:bg}),(0,b.jsxs)("div",{className:"relative bg-white w-full max-w-4xl rounded-2xl shadow-xl border p-6 mx-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold",children:"Add a Comment"}),(0,b.jsx)("button",{onClick:bg,className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),(0,b.jsxs)("div",{className:"rounded-lg border p-6 mb-6",children:[(0,b.jsx)("div",{className:"text-sm font-medium mb-4",children:"Comment"}),(0,b.jsx)("textarea",{value:aT,onChange:a=>aU(a.target.value),placeholder:"--",className:"mt-2 block w-full rounded-md border px-3 py-2 min-h-[120px]"})]}),(0,b.jsxs)("div",{className:"mt-4 flex justify-center gap-6",children:[(0,b.jsx)("button",{onClick:bg,className:"px-6 py-2 border rounded-md text-sm",children:"Cancel"}),(0,b.jsx)("button",{onClick:bh,disabled:aV,className:`px-6 py-2 rounded-md text-sm text-white ${aV?"bg-gray-400":"bg-blue-600 hover:bg-blue-700"}`,children:aV?"Saving...":"Save"})]})]})]})]})}}];

//# sourceMappingURL=src_app_%28dashboard%29_deals_get_%5Bid%5D_page_tsx_2ed305f9._.js.map