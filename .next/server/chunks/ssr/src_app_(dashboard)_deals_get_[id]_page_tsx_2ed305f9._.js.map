{"version":3,"sources":["turbopack:///[project]/src/app/(dashboard)/deals/get/[id]/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\nimport Link from \"next/link\";\nimport { useParams } from \"next/navigation\";\nimport { Deal } from \"@/types/deals\";\nimport DealTags from \"../../_components/DealTags\";\nimport CommentForm from \"../../_components/comment\";\n\ntype DocumentItem = {\n  id: number;\n  filename: string;\n  url: string;\n  uploadedAt: string;\n};\n\ntype Followup = {\n  id?: number;\n  nextDate: string; // yyyy-mm-dd\n  startTime: string; // HH:mm\n  remarks?: string;\n  sendReminder?: boolean;\n  remindBefore?: number;\n  remindUnit?: \"DAYS\" | \"HOURS\" | \"MINUTES\" | string;\n  status?: \"PENDING\" | \"CANCELLED\" | \"COMPLETED\" | string;\n};\n\ntype Employee = {\n  employeeId: string;\n  name: string;\n  designation?: string;\n  department?: string;\n  profileUrl?: string;\n};\n\ntype NoteItem = {\n  id?: number;\n  noteTitle: string;\n  noteType: \"PUBLIC\" | \"PRIVATE\" | string;\n  noteDetails?: string;\n  createdBy?: string;\n  createdAt?: string;\n};\n\ntype TagItem = {\n  id?: number;\n  tagName: string;\n};\n\ntype TabKey = \"files\" | \"followups\" | \"people\" | \"notes\" | \"comments\" | \"tags\";\n\nconst BASE_URL =  `${process.env.NEXT_PUBLIC_MAIN}`;\n\n// Use the uploaded screenshot path as the developer local fallback (infra will transform to a URL)\nconst UPLOADED_LOCAL_PATH = \"/mnt/data/Screenshot 2025-11-22 120859.png\";\n\nexport default function DealDetailPage() {\n  const params = useParams();\n  const dealId = params?.id as string;\n\n  const [deal, setDeal] = useState<Deal | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [activeTab, setActiveTab] = useState<TabKey>(\"files\");\n\n  // documents state & employees who can access the docs\n  const [documents, setDocuments] = useState<DocumentItem[]>([]);\n  const [docEmployeeIds, setDocEmployeeIds] = useState<string[]>([]);\n  const [docsLoading, setDocsLoading] = useState(false);\n  const [docsError, setDocsError] = useState<string | null>(null);\n\n  // file picker states\n  const fileInputRef = useRef<HTMLInputElement | null>(null);\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [selectedFileName, setSelectedFileName] = useState<string | null>(null);\n  const [uploading, setUploading] = useState(false);\n\n  // followups state\n  const [followups, setFollowups] = useState<Followup[]>([]);\n  const [followupsLoading, setFollowupsLoading] = useState(false);\n  const [followupsError, setFollowupsError] = useState<string | null>(null);\n\n  // followup modal state\n  const [isFollowupModalOpen, setIsFollowupModalOpen] = useState(false);\n  const [editingFollowup, setEditingFollowup] = useState<Followup | null>(null);\n  const [followupSaving, setFollowupSaving] = useState(false);\n\n  // people (employees) state & modal\n  const [assignedEmployees, setAssignedEmployees] = useState<Employee[]>([]);\n  const [employeesLoading, setEmployeesLoading] = useState(false);\n  const [employeesError, setEmployeesError] = useState<string | null>(null);\n  const [isAddPeopleOpen, setIsAddPeopleOpen] = useState(false);\n\n  // available pool & departments for the Add People form\n  const [allEmployeesPool, setAllEmployeesPool] = useState<Employee[]>([]);\n  const [availableToAdd, setAvailableToAdd] = useState<Employee[]>([]);\n  const [departments, setDepartments] = useState<string[]>([]);\n  const [selectedAddEmployeeId, setSelectedAddEmployeeId] = useState<string | null>(null);\n  const [selectedDepartment, setSelectedDepartment] = useState<string>(\"\"); // \"\" = All\n  const [peopleSaving, setPeopleSaving] = useState(false);\n  const [peopleDeletingId, setPeopleDeletingId] = useState<string | null>(null);\n  const [peopleSearch, setPeopleSearch] = useState<string>(\"\");\n\n  // notes state\n  const [notes, setNotes] = useState<NoteItem[]>([]);\n  const [notesLoading, setNotesLoading] = useState(false);\n  const [notesError, setNotesError] = useState<string | null>(null);\n\n  // notes modal & mode\n  const [isNoteModalOpen, setIsNoteModalOpen] = useState(false);\n  const [noteModalMode, setNoteModalMode] = useState<\"add\" | \"edit\" | \"view\">(\"add\");\n  const [editingNote, setEditingNote] = useState<NoteItem | null>(null);\n  const [noteSaving, setNoteSaving] = useState(false);\n  const [noteDeletingId, setNoteDeletingId] = useState<number | null>(null);\n\n  // tags state\n  // Note: keep TagItem[], but server may sometimes return string[] — rendering handles both forms.\n  const [tags, setTags] = useState<(TagItem | string)[]>([]);\n  const [tagsLoading, setTagsLoading] = useState(false);\n  const [tagsError, setTagsError] = useState<string | null>(null);\n  const [isAddTagOpen, setIsAddTagOpen] = useState(false);\n  const [tagValue, setTagValue] = useState<string>(\"\");\n  const [tagSaving, setTagSaving] = useState(false);\n  const [tagDeletingId, setTagDeletingId] = useState<number | null>(null);\n\n  // Comments modal (UI) state\n  const [isAddCommentOpen, setIsAddCommentOpen] = useState(false);\n  const [commentText, setCommentText] = useState(\"\");\n  const [commentSaving, setCommentSaving] = useState(false);\n  const [commentDeletingId, setCommentDeletingId] = useState<number | null>(null);\n\n  // centralized action menu state to avoid overlap + easy click-away\n  const [openActionMenu, setOpenActionMenu] = useState<string | null>(null);\n\n  // --- fetch deal\n  const fetchDeal = async () => {\n    if (!dealId) return;\n    setLoading(true);\n    try {\n      const token = localStorage.getItem(\"accessToken\");\n      if (!token) {\n        setError(\"No access token found. Please log in.\");\n        setLoading(false);\n        return;\n      }\n\n      const res = await fetch(`/api/deals/get/${dealId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          \"Content-Type\": \"application/json\",\n        },\n      });\n\n      if (!res.ok) {\n        throw new Error(`Failed to fetch deal: ${res.statusText}`);\n      }\n\n      const data: Deal = await res.json();\n      setDeal(data);\n    } catch (err: any) {\n      console.error(err);\n      setError(err.message || \"Failed to load deal details. Please try again later.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (!dealId) {\n      setError(\"Deal ID not found\");\n      setLoading(false);\n      return;\n    }\n    fetchDeal();\n  }, [dealId]);\n\n  // fetch documents list & employeeIds\n  useEffect(() => {\n    if (!dealId) return;\n    const fetchDocs = async () => {\n      setDocsLoading(true);\n      setDocsError(null);\n      try {\n        const token = localStorage.getItem(\"accessToken\");\n        if (!token) {\n          setDocsError(\"No access token found\");\n          setDocsLoading(false);\n          return;\n        }\n\n        const res = await fetch(`${BASE_URL}/deals/${dealId}/documents`, {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n\n        if (!res.ok) {\n          const txt = await res.text().catch(() => \"\");\n          throw new Error(`Failed to fetch documents: ${res.status} ${txt}`);\n        }\n\n        const json = await res.json();\n        if (Array.isArray(json)) {\n          setDocuments(json);\n        } else {\n          if (Array.isArray(json.employeeIds)) setDocEmployeeIds(json.employeeIds);\n          if (Array.isArray((json as any).documents)) setDocuments((json as any).documents);\n        }\n      } catch (err: any) {\n        console.error(err);\n        setDocsError(err.message || \"Failed to load documents\");\n      } finally {\n        setDocsLoading(false);\n      }\n    };\n\n    fetchDocs();\n  }, [dealId]);\n\n  // fetch followups\n  useEffect(() => {\n    if (!dealId) return;\n    const fetchFollowups = async () => {\n      setFollowupsLoading(true);\n      setFollowupsError(null);\n      try {\n        const token = localStorage.getItem(\"accessToken\");\n        if (!token) {\n          setFollowupsError(\"No access token found\");\n          setFollowupsLoading(false);\n          return;\n        }\n        const res = await fetch(`${BASE_URL}/deals/${dealId}/followups`, {\n          headers: { Authorization: `Bearer ${token}`, \"Content-Type\": \"application/json\" },\n        });\n        if (!res.ok) {\n          const txt = await res.text().catch(() => \"\");\n          throw new Error(`Failed to fetch followups: ${res.status} ${txt}`);\n        }\n        const json = await res.json();\n        if (Array.isArray(json)) setFollowups(json);\n      } catch (err: any) {\n        console.error(err);\n        setFollowupsError(err.message || \"Failed to load followups\");\n      } finally {\n        setFollowupsLoading(false);\n      }\n    };\n\n    fetchFollowups();\n  }, [dealId]);\n\n  // fetch assigned employees\n  const fetchAssignedEmployees = async () => {\n    if (!dealId) return;\n    setEmployeesLoading(true);\n    setEmployeesError(null);\n    try {\n      const token = localStorage.getItem(\"accessToken\");\n      if (!token) {\n        setEmployeesError(\"No access token found\");\n        setEmployeesLoading(false);\n        return;\n      }\n\n      const res = await fetch(`${BASE_URL}/deals/${dealId}/employees`, {\n        headers: { Authorization: `Bearer ${token}`, \"Content-Type\": \"application/json\" },\n      });\n\n      if (!res.ok) {\n        const txt = await res.text().catch(() => \"\");\n        throw new Error(`Failed to fetch employees: ${res.status} ${txt}`);\n      }\n\n      const json = await res.json();\n      if (Array.isArray(json)) {\n        setAssignedEmployees(json);\n      } else if (Array.isArray((json as any).employees)) {\n        setAssignedEmployees((json as any).employees);\n      } else {\n        setAssignedEmployees([]);\n      }\n    } catch (err: any) {\n      console.error(err);\n      setEmployeesError(err.message || \"Failed to load employees\");\n    } finally {\n      setEmployeesLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (!dealId) return;\n    fetchAssignedEmployees();\n  }, [dealId]);\n\n  // fetch notes list\n  const fetchNotes = async () => {\n    if (!dealId) return;\n    setNotesLoading(true);\n    setNotesError(null);\n    try {\n      const token = localStorage.getItem(\"accessToken\");\n      if (!token) {\n        setNotesError(\"No access token found\");\n        setNotesLoading(false);\n        return;\n      }\n      const res = await fetch(`${BASE_URL}/deals/${dealId}/notes`, {\n        headers: { Authorization: `Bearer ${token}`, \"Content-Type\": \"application/json\" },\n      });\n      if (!res.ok) {\n        const txt = await res.text().catch(() => \"\");\n        throw new Error(`Failed to fetch notes: ${res.status} ${txt}`);\n      }\n      const json = await res.json();\n      if (Array.isArray(json)) setNotes(json);\n      else setNotes([]);\n    } catch (err: any) {\n      console.error(err);\n      setNotesError(err.message || \"Failed to load notes\");\n    } finally {\n      setNotesLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (!dealId) return;\n    fetchNotes();\n  }, [dealId]);\n\n  // fetch tags list\n  const fetchTags = async () => {\n    if (!dealId) return;\n    setTagsLoading(true);\n    setTagsError(null);\n    try {\n      const token = localStorage.getItem(\"accessToken\");\n      if (!token) {\n        setTagsError(\"No access token found\");\n        setTagsLoading(false);\n        return;\n      }\n      const res = await fetch(`${BASE_URL}/deals/${dealId}/tags`, {\n        headers: { Authorization: `Bearer ${token}`, \"Content-Type\": \"application/json\" },\n      });\n      if (!res.ok) {\n        const txt = await res.text().catch(() => \"\");\n        throw new Error(`Failed to fetch tags: ${res.status} ${txt}`);\n      }\n      const json = await res.json();\n\n      // server might return either array of objects or array of strings\n      if (Array.isArray(json)) {\n        setTags(json); // keep raw array (could be string[] or TagItem[])\n      } else {\n        setTags([]);\n      }\n    } catch (err: any) {\n      console.error(err);\n      setTagsError(err.message || \"Failed to load tags\");\n    } finally {\n      setTagsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (!dealId) return;\n    fetchTags();\n  }, [dealId]);\n\n  // When Add People modal opens we fetch assigned employees, departments and employee pool.\n  const openAddPeopleModal = async () => {\n    setIsAddPeopleOpen(true);\n    setSelectedDepartment(\"\"); // default to all departments\n    setSelectedAddEmployeeId(null);\n    setPeopleSaving(false);\n    setEmployeesError(null);\n\n    await fetchAssignedEmployees();\n\n    try {\n      const token = localStorage.getItem(\"accessToken\");\n      if (!token) {\n        setEmployeesError(\"No access token found\");\n        return;\n      }\n\n      const depRes = await fetch(`${BASE_URL}/admin/departments`, {\n        headers: { Authorization: `Bearer ${token}`, \"Content-Type\": \"application/json\" },\n      });\n      if (!depRes.ok) {\n        console.warn(\"Failed to fetch departments\", depRes.statusText);\n      } else {\n        const depJson = await depRes.json();\n        if (Array.isArray(depJson)) {\n          const names = depJson.map((d: any) => (typeof d === \"string\" ? d : d.name || d.department || \"\")).filter(Boolean);\n          setDepartments(names);\n        }\n      }\n\n      const empRes = await fetch(`${BASE_URL}/employee/all?page=0&size=200`, {\n        headers: { Authorization: `Bearer ${token}`, \"Content-Type\": \"application/json\" },\n      });\n\n      if (!empRes.ok) {\n        console.warn(\"Failed to fetch employee pool\", empRes.statusText);\n      } else {\n        const empJson = await empRes.json();\n        let pool: Employee[] = [];\n        if (Array.isArray(empJson)) {\n          pool = empJson;\n        } else if (Array.isArray(empJson.content)) {\n          pool = empJson.content;\n        } else if (Array.isArray((empJson as any).employees)) {\n          pool = (empJson as any).employees;\n        } else {\n          pool = Object.values(empJson).flat?.() ?? [];\n        }\n\n        const normalized = (pool as any[]).map((p) => ({\n          employeeId: p.employeeId ?? p.id ?? p.empId ?? p.employee_id ?? \"\",\n          name: p.name ?? p.fullName ?? p.employeeName ?? \"\",\n          department: p.department ?? p.dept ?? p.departmentName ?? \"\",\n          designation: p.designation ?? p.title ?? \"\",\n          profileUrl: p.profileUrl ?? p.avatar ?? \"\",\n        })).filter((p) => p.employeeId && p.name);\n\n        setAllEmployeesPool(normalized);\n\n        // remove already assigned employees from available list\n        const assignedIds = new Set(assignedEmployees.map((a) => a.employeeId));\n        const filtered = normalized.filter((p) => !assignedIds.has(p.employeeId));\n        setAvailableToAdd(filtered);\n        setSelectedAddEmployeeId(filtered.length > 0 ? filtered[0].employeeId : null);\n      }\n    } catch (err: any) {\n      console.error(\"Error loading add-people resources\", err);\n      setEmployeesError(\"Failed to load available employees / departments\");\n    }\n  };\n\n  const closeAddPeopleModal = () => {\n    setIsAddPeopleOpen(false);\n    setSelectedAddEmployeeId(null);\n    setAvailableToAdd([]);\n    setPeopleSaving(false);\n    setPeopleDeletingId(null);\n    setPeopleSearch(\"\");\n    setSelectedDepartment(\"\");\n  };\n\n  // When department changes, recompute availableToAdd (client-side filter).\n  useEffect(() => {\n    if (!isAddPeopleOpen) return;\n    const assignedIds = new Set(assignedEmployees.map((a) => a.employeeId));\n    let pool = allEmployeesPool.filter((p) => !assignedIds.has(p.employeeId));\n    if (selectedDepartment && selectedDepartment !== \"\") {\n      pool = pool.filter((p) => (p.department || \"\").toLowerCase() === selectedDepartment.toLowerCase());\n    }\n    setAvailableToAdd(pool);\n    setSelectedAddEmployeeId(pool.length > 0 ? pool[0].employeeId : null);\n  }, [selectedDepartment, allEmployeesPool, assignedEmployees, isAddPeopleOpen]);\n\n  // add employee (POST)\n  const addEmployee = async () => {\n    if (!dealId) return;\n    if (!selectedAddEmployeeId) {\n      alert(\"Select an employee to add\");\n      return;\n    }\n    setPeopleSaving(true);\n    try {\n      const token = localStorage.getItem(\"accessToken\");\n      if (!token) {\n        alert(\"No access token found\");\n        setPeopleSaving(false);\n        return;\n      }\n\n      const payload = { employeeIds: [selectedAddEmployeeId] };\n\n      const res = await fetch(`${BASE_URL}/deals/${dealId}/employees`, {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(payload),\n      });\n\n      if (!res.ok) {\n        const txt = await res.text().catch(() => \"\");\n        throw new Error(`Failed to add employee: ${res.status} ${txt}`);\n      }\n\n      // After success, refetch assigned list\n      await fetchAssignedEmployees();\n\n      // refresh availableToAdd: remove newly added\n      setAvailableToAdd((prev) => prev.filter((p) => p.employeeId !== selectedAddEmployeeId));\n      setSelectedAddEmployeeId(null);\n\n      // close modal for cleaner UX\n      setIsAddPeopleOpen(false);\n    } catch (err: any) {\n      console.error(err);\n      alert(err?.message || \"Failed to add employee\");\n    } finally {\n      setPeopleSaving(false);\n    }\n  };\n\n  // delete employee (DELETE to specified endpoint)\n  const removeEmployee = async (employeeId?: string) => {\n    if (!dealId || !employeeId) return;\n    if (!confirm(\"Are you sure you want to remove this person from the deal?\")) return;\n    setPeopleDeletingId(employeeId);\n    try {\n      const token = localStorage.getItem(\"accessToken\");\n      if (!token) {\n        alert(\"No access token found\");\n        setPeopleDeletingId(null);\n        return;\n      }\n\n      const res = await fetch(`${BASE_URL}/deals/${dealId}/employees/${employeeId}`, {\n        method: \"DELETE\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      if (!res.ok) {\n        const txt = await res.text().catch(() => \"\");\n        throw new Error(`Failed to remove employee: ${res.status} ${txt}`);\n      }\n\n      // after success, refetch assigned employees\n      await fetchAssignedEmployees();\n    } catch (err: any) {\n      console.error(err);\n      alert(err?.message || \"Failed to remove employee\");\n    } finally {\n      setPeopleDeletingId(null);\n    }\n  };\n\n  // Followups handlers (unchanged)\n  const openAddFollowup = () => {\n    setEditingFollowup({\n      nextDate: \"\",\n      startTime: \"\",\n      remarks: \"\",\n      sendReminder: true,\n      remindBefore: 1,\n      remindUnit: \"DAYS\",\n      status: \"PENDING\",\n    });\n    setIsFollowupModalOpen(true);\n  };\n\n  const openEditFollowup = (f: any) => {\n    setEditingFollowup({\n      id: f.id,\n      nextDate: f.nextDate ? f.nextDate.split(\"T\")[0] : f.nextDate || \"\",\n      startTime: f.startTime ? f.startTime.slice(0, 5) : f.startTime || \"\",\n      remarks: f.remarks || \"\",\n      sendReminder: !!f.sendReminder,\n      remindBefore: f.remindBefore ?? 1,\n      remindUnit: f.remindUnit ?? \"DAYS\",\n      status: f.status ?? \"PENDING\",\n    });\n    setIsFollowupModalOpen(true);\n  };\n\n  const closeFollowupModal = () => {\n    setIsFollowupModalOpen(false);\n    setEditingFollowup(null);\n  };\n\n  const saveFollowup = async () => {\n    if (!editingFollowup) return;\n    setFollowupSaving(true);\n    try {\n      const token = localStorage.getItem(\"accessToken\");\n      if (!token) {\n        alert(\"No access token found\");\n        setFollowupSaving(false);\n        return;\n      }\n\n      const payload: any = {\n        nextDate: editingFollowup.nextDate,\n        startTime: editingFollowup.startTime,\n        remarks: editingFollowup.remarks,\n        sendReminder: editingFollowup.sendReminder,\n        remindBefore: editingFollowup.remindBefore,\n        remindUnit: editingFollowup.remindUnit,\n      };\n\n      if (editingFollowup.status) payload.status = editingFollowup.status;\n\n      if (editingFollowup.id) {\n        const res = await fetch(`${BASE_URL}/deals/${dealId}/followups/${editingFollowup.id}`, {\n          method: \"PUT\",\n          headers: {\n            Authorization: `Bearer ${token}`,\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify(payload),\n        });\n        if (!res.ok) {\n          const txt = await res.text().catch(() => \"\");\n          throw new Error(`Failed to update followup: ${res.status} ${txt}`);\n        }\n        const updated = await res.json();\n        setFollowups((prev) => prev.map((p) => (p.id === updated.id ? updated : p)));\n      } else {\n        const res = await fetch(`${BASE_URL}/deals/${dealId}/followups`, {\n          method: \"POST\",\n          headers: {\n            Authorization: `Bearer ${token}`,\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify(payload),\n        });\n        if (!res.ok) {\n          const txt = await res.text().catch(() => \"\");\n          throw new Error(`Failed to create followup: ${res.status} ${txt}`);\n        }\n        const created = await res.json();\n        setFollowups((prev) => [created, ...prev]);\n      }\n\n      closeFollowupModal();\n    } catch (err: any) {\n      console.error(err);\n      alert(err?.message || \"Failed to save followup\");\n    } finally {\n      setFollowupSaving(false);\n    }\n  };\n\n  const deleteFollowup = async (id?: number) => {\n    if (!id) return;\n    if (!confirm(\"Are you sure you want to delete this follow up?\")) return;\n    try {\n      const token = localStorage.getItem(\"accessToken\");\n      if (!token) {\n        alert(\"No access token found\");\n        return;\n      }\n      const res = await fetch(`${BASE_URL}/deals/${dealId}/followups/${id}`, {\n        method: \"DELETE\",\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) {\n        const txt = await res.text().catch(() => \"\");\n        throw new Error(`Failed to delete followup: ${res.status} ${txt}`);\n      }\n      setFollowups((prev) => prev.filter((f) => f.id !== id));\n    } catch (err: any) {\n      console.error(err);\n      alert(err?.message || \"Failed to delete followup\");\n    }\n  };\n\n  // --- NOTES modals and operations (unchanged logic)\n  const openAddNote = () => {\n    setNoteModalMode(\"add\");\n    setEditingNote({\n      noteTitle: \"\",\n      noteType: \"PUBLIC\",\n      noteDetails: \"\",\n    });\n    setIsNoteModalOpen(true);\n  };\n\n  const openViewNote = (n: NoteItem) => {\n    setNoteModalMode(\"view\");\n    setEditingNote(n);\n    setIsNoteModalOpen(true);\n  };\n\n  const openEditNote = (n: NoteItem) => {\n    setNoteModalMode(\"edit\");\n    setEditingNote(n);\n    setIsNoteModalOpen(true);\n  };\n\n  const closeNoteModal = () => {\n    setIsNoteModalOpen(false);\n    setEditingNote(null);\n  };\n\n  const saveNote = async () => {\n    if (!dealId || !editingNote) return;\n    if (!editingNote.noteTitle || !editingNote.noteTitle.trim()) {\n      alert(\"Please enter note title\");\n      return;\n    }\n    setNoteSaving(true);\n    try {\n      const token = localStorage.getItem(\"accessToken\");\n      if (!token) {\n        alert(\"No access token found\");\n        setNoteSaving(false);\n        return;\n      }\n\n      const payload = {\n        noteTitle: editingNote.noteTitle.trim(),\n        noteType: editingNote.noteType ?? \"PUBLIC\",\n        noteDetails: editingNote.noteDetails ?? \"\",\n      };\n\n      let res: Response;\n      if (noteModalMode === \"edit\" && editingNote.id != null) {\n        res = await fetch(`${BASE_URL}/deals/${dealId}/notes/${editingNote.id}`, {\n          method: \"PUT\",\n          headers: {\n            Authorization: `Bearer ${token}`,\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify(payload),\n        });\n      } else {\n        res = await fetch(`${BASE_URL}/deals/${dealId}/notes`, {\n          method: \"POST\",\n          headers: {\n            Authorization: `Bearer ${token}`,\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify(payload),\n        });\n      }\n\n      if (!res.ok) {\n        const txt = await res.text().catch(() => \"\");\n        throw new Error(`Failed to save note: ${res.status} ${txt}`);\n      }\n\n      // refresh notes list\n      await fetchNotes();\n      closeNoteModal();\n    } catch (err: any) {\n      console.error(err);\n      alert(err?.message || \"Failed to save note\");\n    } finally {\n      setNoteSaving(false);\n    }\n  };\n\n  const deleteNote = async (noteId?: number) => {\n    if (!dealId || noteId == null) return;\n    if (!confirm(\"Are you sure you want to delete this note?\")) return;\n    setNoteDeletingId(noteId);\n    try {\n      const token = localStorage.getItem(\"accessToken\");\n      if (!token) {\n        alert(\"No access token found\");\n        setNoteDeletingId(null);\n        return;\n      }\n\n      const res = await fetch(`${BASE_URL}/deals/${dealId}/notes/${noteId}`, {\n        method: \"DELETE\",\n        headers: { Authorization: `Bearer ${token}` },\n      });\n\n      if (!res.ok) {\n        const txt = await res.text().catch(() => \"\");\n        throw new Error(`Failed to delete note: ${res.status} ${txt}`);\n      }\n\n      // refresh notes\n      await fetchNotes();\n    } catch (err: any) {\n      console.error(err);\n      alert(err?.message || \"Failed to delete note\");\n    } finally {\n      setNoteDeletingId(null);\n    }\n  };\n\n  // --- TAGS (handlers unchanged)\n  const openAddTag = () => {\n    setTagValue(\"\");\n    setIsAddTagOpen(true);\n  };\n\n  const closeAddTag = () => {\n    setIsAddTagOpen(false);\n    setTagValue(\"\");\n  };\n\n  const saveTag = async () => {\n    if (!dealId) return;\n    if (!tagValue.trim()) {\n      alert(\"Please enter a tag name\");\n      return;\n    }\n    setTagSaving(true);\n    try {\n      const token = localStorage.getItem(\"accessToken\");\n      if (!token) {\n        alert(\"No access token found\");\n        setTagSaving(false);\n        return;\n      }\n\n      const payload = { tagName: tagValue.trim() };\n\n      const res = await fetch(`${BASE_URL}/deals/${dealId}/tags`, {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(payload),\n      });\n\n      if (!res.ok) {\n        const txt = await res.text().catch(() => \"\");\n        throw new Error(`Failed to save tag: ${res.status} ${txt}`);\n      }\n\n      await fetchTags();\n      closeAddTag();\n    } catch (err: any) {\n      console.error(err);\n      alert(err?.message || \"Failed to save tag\");\n    } finally {\n      setTagSaving(false);\n    }\n  };\n\n  const deleteTag = async (tagId?: number) => {\n    if (!dealId || tagId == null) return;\n    if (!confirm(\"Are you sure you want to delete this tag?\")) return;\n    setTagDeletingId(tagId);\n    try {\n      const token = localStorage.getItem(\"accessToken\");\n      if (!token) {\n        alert(\"No access token found\");\n        setTagDeletingId(null);\n        return;\n      }\n\n      const res = await fetch(`${BASE_URL}/deals/${dealId}/tags/${tagId}`, {\n        method: \"DELETE\",\n        headers: { Authorization: `Bearer ${token}` },\n      });\n\n      if (!res.ok) {\n        const txt = await res.text().catch(() => \"\");\n        throw new Error(`Failed to delete tag: ${res.status} ${txt}`);\n      }\n\n      await fetchTags();\n    } catch (err: any) {\n      console.error(err);\n      alert(err?.message || \"Failed to delete tag\");\n    } finally {\n      setTagDeletingId(null);\n    }\n  };\n\n  // --- COMMENTS (unchanged logic)\n  const openAddComment = () => {\n    setCommentText(\"\");\n    setIsAddCommentOpen(true);\n  };\n\n  const closeAddComment = () => {\n    setIsAddCommentOpen(false);\n    setCommentText(\"\");\n  };\n\n  const saveComment = async () => {\n    if (!dealId) return;\n    if (!commentText.trim()) {\n      alert(\"Please enter a comment\");\n      return;\n    }\n    setCommentSaving(true);\n    try {\n      const token = localStorage.getItem(\"accessToken\");\n      if (!token) {\n        setCommentSaving(false);\n        alert(\"No access token found\");\n        return;\n      }\n\n      const payload = { commentText: commentText.trim() };\n\n      const res = await fetch(`${BASE_URL}/deals/${dealId}/comments`, {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(payload),\n      });\n\n      if (!res.ok) {\n        const txt = await res.text().catch(() => \"\");\n        throw new Error(`Failed to save comment: ${res.status} ${txt}`);\n      }\n\n      // refresh deal so comments show in table\n      await fetchDeal();\n      closeAddComment();\n    } catch (err: any) {\n      console.error(err);\n      alert(err?.message || \"Failed to save comment\");\n    } finally {\n      setCommentSaving(false);\n    }\n  };\n\n  const deleteComment = async (commentId?: number) => {\n    if (!dealId || commentId == null) return;\n    if (!confirm(\"Are you sure you want to delete this comment?\")) return;\n    setCommentDeletingId(commentId);\n    try {\n      const token = localStorage.getItem(\"accessToken\");\n      if (!token) {\n        setCommentDeletingId(null);\n        alert(\"No access token found\");\n        return;\n      }\n\n      const res = await fetch(`${BASE_URL}/deals/${dealId}/comments/${commentId}`, {\n        method: \"DELETE\",\n        headers: { Authorization: `Bearer ${token}` },\n      });\n\n      if (!res.ok) {\n        const txt = await res.text().catch(() => \"\");\n        throw new Error(`Failed to delete comment: ${res.status} ${txt}`);\n      }\n\n      // refresh deal so comments updated\n      await fetchDeal();\n    } catch (err: any) {\n      console.error(err);\n      alert(err?.message || \"Failed to delete comment\");\n    } finally {\n      setCommentDeletingId(null);\n    }\n  };\n\n  // Small UI helpers\n  const formatDate = (d?: string) => (d ? new Date(d).toLocaleDateString() : \"—\");\n  const formatTime = (t?: string) => (t ? t : \"—\");\n\n  // People modal search filter\n  const filteredAssigned = assignedEmployees.filter((a) =>\n    (a.name || \"\").toLowerCase().includes(peopleSearch.toLowerCase())\n  );\n\n  // Document-level click-away: close any open action menu when clicking anywhere\n  useEffect(() => {\n    const handleDocClick = () => {\n      setOpenActionMenu(null);\n    };\n    document.addEventListener(\"click\", handleDocClick);\n    return () => document.removeEventListener(\"click\", handleDocClick);\n  }, []);\n\n  // helper to toggle menus safely and stop the document click from closing immediately\n  const toggleActionMenu = (key: string, e: React.MouseEvent) => {\n    e.stopPropagation(); // prevent document click\n    setOpenActionMenu((prev) => (prev === key ? null : key));\n  };\n\n  // used to stop close when clicking inside menu itself\n  const stopPropagation = (e: React.MouseEvent) => {\n    e.stopPropagation();\n  };\n\n  // open file picker (does not upload)\n  const handleOpenFilePicker = () => {\n    setSelectedFile(null);\n    setSelectedFileName(null);\n    fileInputRef.current?.click();\n  };\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const f = e.target.files && e.target.files[0];\n    if (f) {\n      setSelectedFile(f);\n      setSelectedFileName(f.name);\n    } else {\n      setSelectedFile(null);\n      setSelectedFileName(null);\n    }\n  };\n\n  /**\n   * Confirm upload:\n   * - If user selected a real file, append it to FormData as 'file' (real binary).\n   * - If no file selected, fallback to developer local path behavior:\n   *    - create a placeholder File (text blob with path) to satisfy 'file' part\n   *    - append 'url' with UPLOADED_LOCAL_PATH (infra will transform)\n   *\n   * Important: Do NOT set Content-Type header; browser will set multipart boundary.\n   */\n  const uploadDocument = async () => {\n    try {\n      setUploading(true);\n      const token = localStorage.getItem(\"accessToken\");\n      if (!token) {\n        alert(\"No access token found\");\n        setUploading(false);\n        return;\n      }\n\n      // Prepare form data\n      const fd = new FormData();\n      let filename = UPLOADED_LOCAL_PATH.split(\"/\").pop() || \"upload.png\";\n\n      if (selectedFile) {\n        fd.append(\"file\", selectedFile);\n        filename = selectedFile.name;\n        fd.append(\"filename\", filename);\n        fd.append(\"url\", selectedFile.name);\n      } else {\n        const placeholderContent = `LOCAL_PATH:${UPLOADED_LOCAL_PATH}`;\n        const blob = new Blob([placeholderContent], { type: \"text/plain\" });\n        const fileObj = new File([blob], filename, { type: \"text/plain\" });\n        fd.append(\"file\", fileObj);\n        fd.append(\"filename\", filename);\n        fd.append(\"url\", UPLOADED_LOCAL_PATH);\n      }\n\n      const res = await fetch(`${BASE_URL}/deals/${dealId}/documents`, {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n        body: fd,\n      });\n\n      if (!res.ok) {\n        const txt = await res.text().catch(() => \"\");\n        throw new Error(`Failed to upload document: ${res.status} ${txt}`);\n      }\n\n      const json = await res.json();\n      setDocuments((prev) => [json as DocumentItem, ...prev]);\n\n      setSelectedFile(null);\n      setSelectedFileName(null);\n      if (fileInputRef.current) fileInputRef.current.value = \"\";\n    } catch (err: any) {\n      console.error(err);\n      alert(err?.message || \"Failed to upload document\");\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  const deleteDocument = async (docId: number) => {\n    if (!confirm(\"Are you sure you want to delete this document?\")) return;\n    try {\n      const token = localStorage.getItem(\"accessToken\");\n      if (!token) {\n        alert(\"No access token found\");\n        return;\n      }\n\n      const res = await fetch(`${BASE_URL}/deals/${dealId}/documents/${docId}`, {\n        method: \"DELETE\",\n        headers: { Authorization: `Bearer ${token}` },\n      });\n\n      if (!res.ok) {\n        const txt = await res.text().catch(() => \"\");\n        throw new Error(`Failed to delete document: ${res.status} ${txt}`);\n      }\n\n      setDocuments((prev) => prev.filter((d) => d.id !== docId));\n    } catch (err: any) {\n      console.error(err);\n      alert(err?.message || \"Failed to delete document\");\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center min-h-screen text-lg font-semibold\">\n        Loading deal details...\n      </div>\n    );\n  }\n\n  if (error || !deal) {\n    return (\n      <div className=\"flex flex-col items-center justify-center min-h-screen text-lg font-semibold text-red-600\">\n        <div>{error || \"Deal not found\"}</div>\n        <Link href=\"/deals/get\" className=\"mt-4 text-blue-600 hover:underline\">\n          Back to Deals\n        </Link>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6 max-w-6xl mx-auto\">\n      <div className=\"flex items-start justify-between mb-6\">\n        <div>\n          <Link\n            href=\"/deals/get\"\n            className=\"inline-flex items-center gap-2 text-blue-600 hover:underline mb-2\"\n          >\n            ← Back to Deals\n          </Link>\n          <h1 className=\"text-2xl font-semibold text-gray-900\">Deal fbvhh {deal.title || deal.id}</h1>\n        </div>\n\n        <button\n          onClick={() => window.history.back()}\n          aria-label=\"Close\"\n          className=\"text-gray-400 hover:text-gray-600\"\n        >\n          ✕\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-[1fr_360px] gap-6\">\n        {/* Left: Deal Information card */}\n        <div>\n          <div className=\"bg-white border rounded-2xl p-6 shadow-sm mb-6\">\n            <div className=\"flex items-start justify-between\">\n              <div>\n                <div className=\"text-sm text-gray-500 mb-2\">\n                  <span className=\"font-medium\">Sales Pipeline</span> →{\" \"}\n                  <span className=\"font-semibold\">{deal.dealStage || \"—\"}</span>\n                </div>\n                <h2 className=\"text-lg font-semibold\">{deal.title || \"—\"}</h2>\n                <p className=\"text-xs text-muted-foreground mt-1\">ID: {deal.id}</p>\n              </div>\n\n              <div className=\"flex items-start gap-3\">\n                <button className=\"p-2 rounded-md hover:bg-slate-50\">\n                  <svg className=\"w-5 h-5 text-gray-400\" viewBox=\"0 0 24 24\" fill=\"none\">\n                    <circle cx=\"5\" cy=\"12\" r=\"1.5\" />\n                    <circle cx=\"12\" cy=\"12\" r=\"1.5\" />\n                    <circle cx=\"19\" cy=\"12\" r=\"1.5\" />\n                  </svg>\n                </button>\n              </div>\n            </div>\n\n            <div className=\"mt-6 grid grid-cols-2 gap-4 text-sm\">\n              <div className=\"space-y-3\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Deal Name</span>\n                  <span className=\"text-gray-900\">{deal.title || \"—\"}</span>\n                </div>\n\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Lead Contact</span>\n                  <span className=\"text-gray-900\">{deal.leadName || \"—\"}</span>\n                </div>\n\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Email</span>\n                  <span className=\"text-gray-900\">{deal.leadEmail || \"—\"}</span>\n                </div>\n\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Company Name</span>\n                  <span className=\"text-gray-900\">{(deal as any).leadCompany || \"—\"}</span>\n                </div>\n\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Deal Category</span>\n                  <span className=\"text-gray-900\">{deal.dealCategory || \"—\"}</span>\n                </div>\n              </div>\n\n              <div className=\"space-y-3\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Deal Agent</span>\n                  <span className=\"text-gray-900\">\n                    {deal.dealAgentMeta?.name || deal.dealAgent || \"—\"}\n                  </span>\n                </div>\n\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Deal Watcher</span>\n                  <span className=\"text-gray-900\">\n                    {(deal.dealWatchersMeta && deal.dealWatchersMeta.map((d) => d.name).join(\", \")) ||\n                      (deal.dealWatchers && (deal.dealWatchers as string[]).join(\", \")) ||\n                      \"—\"}\n                  </span>\n                </div>\n\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Close Date</span>\n                  <span className=\"text-gray-900\">\n                    {deal.expectedCloseDate ? new Date(deal.expectedCloseDate).toLocaleDateString() : \"—\"}\n                  </span>\n                </div>\n\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Deal Value</span>\n                  <span className=\"text-gray-900\">\n                    {typeof deal.value === \"number\" ? `$${deal.value.toLocaleString(undefined)}` : \"—\"}\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Tabs area */}\n          <div className=\"bg-white border rounded-2xl p-4 shadow-sm\">\n            <div className=\"border-b -mx-4 px-4\">\n              <nav className=\"flex gap-6 text-sm\">\n                <button\n                  onClick={() => setActiveTab(\"files\")}\n                  className={`py-3 px-1 ${activeTab === \"files\" ? \"border-b-2 border-violet-500 text-violet-600\" : \"text-gray-600\"}`}\n                >\n                  Files\n                </button>\n                <button\n                  onClick={() => setActiveTab(\"followups\")}\n                  className={`py-3 px-1 ${activeTab === \"followups\" ? \"border-b-2 border-violet-500 text-violet-600\" : \"text-gray-600\"}`}\n                >\n                  Follow Up\n                </button>\n                <button\n                  onClick={() => setActiveTab(\"people\")}\n                  className={`py-3 px-1 ${activeTab === \"people\" ? \"border-b-2 border-violet-500 text-violet-600\" : \"text-gray-600\"}`}\n                >\n                  People\n                </button>\n                <button\n                  onClick={() => setActiveTab(\"notes\")}\n                  className={`py-3 px-1 ${activeTab === \"notes\" ? \"border-b-2 border-violet-500 text-violet-600\" : \"text-gray-600\"}`}\n                >\n                  Notes\n                </button>\n                <button\n                  onClick={() => setActiveTab(\"comments\")}\n                  className={`py-3 px-1 ${activeTab === \"comments\" ? \"border-b-2 border-violet-500 text-violet-600\" : \"text-gray-600\"}`}\n                >\n                  Comments\n                </button>\n                <button\n                  onClick={() => setActiveTab(\"tags\")}\n                  className={`py-3 px-1 ${activeTab === \"tags\" ? \"border-b-2 border-violet-500 text-violet-600\" : \"text-gray-600\"}`}\n                >\n                  Tags\n                </button>\n              </nav>\n            </div>\n\n            <div className=\"p-6 min-h-[180px]\">\n              {activeTab === \"files\" && (\n                <div>\n                  <div className=\"flex items-center gap-3\">\n                    {/* hidden file input */}\n                    <input\n                      ref={fileInputRef}\n                      type=\"file\"\n                      accept=\"*/*\"\n                      className=\"hidden\"\n                      onChange={handleFileChange}\n                    />\n\n                    {/* This button opens file picker; does NOT upload immediately */}\n                    <button\n                      type=\"button\"\n                      className=\"inline-flex items-center gap-2 px-3 py-2 rounded-md border text-sm text-violet-600 hover:bg-violet-50\"\n                      onClick={handleOpenFilePicker}\n                    >\n                      <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                        <path d=\"M12 4v12\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                        <path d=\"M8 8l4-4 4 4\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                        <path d=\"M20 20H4\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                      </svg>\n                      Choose File\n                    </button>\n\n                    {/* Show selected filename or fallback info */}\n                    <div className=\"text-sm text-gray-500\">\n                      {selectedFileName ? (\n                        <span>Selected: {selectedFileName}</span>\n                      ) : (\n                        <span>No file selected (will use developer local file if you press Upload without selecting).</span>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* Confirm / Upload button (user must click to actually upload) */}\n                  <div className=\"mt-3 flex gap-3\">\n                    <button\n                      type=\"button\"\n                      onClick={uploadDocument}\n                      disabled={uploading}\n                      className={`inline-flex items-center gap-2 px-3 py-2 rounded-md border text-sm text-white ${uploading ? \"bg-gray-400\" : \"bg-violet-600 hover:bg-violet-700\"}`}\n                    >\n                      {uploading ? \"Uploading...\" : \"Upload\"}\n                    </button>\n\n                    {/* Optional: button to clear selection */}\n                    <button\n                      type=\"button\"\n                      onClick={() => {\n                        setSelectedFile(null);\n                        setSelectedFileName(null);\n                        if (fileInputRef.current) fileInputRef.current.value = \"\";\n                      }}\n                      className=\"inline-flex items-center gap-2 px-3 py-2 rounded-md border text-sm text-gray-600 hover:bg-slate-50\"\n                    >\n                      Clear\n                    </button>\n                  </div>\n\n                  <div className=\"mt-6 text-sm text-gray-500\">\n                    {docsLoading && <div>Loading documents...</div>}\n                    {docsError && <div className=\"text-red-600\">{docsError}</div>}\n                    {!docsLoading && documents.length === 0 && <div>No files uploaded yet.</div>}\n                    <div className=\"space-y-3 mt-4\">\n                      {documents.map((doc, idx) => (\n                        <div key={doc.id ?? `${doc.filename}-${idx}`} className=\"flex items-center justify-between p-3 border rounded-md\">\n                          <div className=\"flex items-center gap-3\">\n                            <div className=\"w-12 h-12 rounded-md overflow-hidden bg-slate-100 flex items-center justify-center text-xs text-gray-400\">\n                              <img src={doc.url || UPLOADED_LOCAL_PATH} alt={doc.filename} className=\"w-full h-full object-cover\" />\n                            </div>\n                            <div className=\"text-sm\">\n                              <div className=\"font-medium\">{doc.filename}</div>\n                              <div className=\"text-xs text-gray-500\">Uploaded: {doc.uploadedAt ? new Date(doc.uploadedAt).toLocaleString() : \"—\"}</div>\n                            </div>\n                          </div>\n\n                          <div className=\"flex items-center gap-3\">\n                            <a\n                              href={doc.url || UPLOADED_LOCAL_PATH}\n                              target=\"_blank\"\n                              rel=\"noopener noreferrer\"\n                              className=\"text-sm text-sky-600 hover:underline\"\n                            >\n                              View\n                            </a>\n                            <button\n                              onClick={() => deleteDocument(doc.id)}\n                              className=\"text-sm text-red-600 hover:underline\"\n                            >\n                              Delete\n                            </button>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {activeTab === \"followups\" && (\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <button\n                      type=\"button\"\n                      onClick={openAddFollowup}\n                      className=\"inline-flex items-center gap-2 text-blue-600\"\n                    >\n                      <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                        <path d=\"M12 5v14\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                        <path d=\"M5 12h14\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                      </svg>\n                      Add a Follow Up\n                    </button>\n                  </div>\n\n                  <div className=\"rounded-md border overflow-hidden\">\n                    <div className=\"bg-blue-50 text-sm text-gray-700 grid grid-cols-[1fr_1fr_1fr_1fr_80px] gap-3 p-2 items-center font-medium\">\n                      <div>Created</div>\n                      <div>Follow Up</div>\n                      <div>Remark</div>\n                      <div className=\"text-center\">Status</div>\n                      <div className=\"text-center\">Action</div>\n                    </div>\n\n                    <div>\n                      {followupsLoading && <div className=\"p-4\">Loading followups...</div>}\n                      {followupsError && <div className=\"p-4 text-red-600\">{followupsError}</div>}\n                      {!followupsLoading && followups.length === 0 && (\n                        <div className=\"p-4 text-sm text-gray-500\">No follow ups</div>\n                      )}\n\n                      {followups.map((f, idx) => (\n                        <div key={f.id ?? `followup-${idx}`} className=\"grid grid-cols-[1fr_1fr_1fr_1fr_80px] gap-4 items-center p-4 border-t\">\n                          <div>{formatDate(f.nextDate)}</div>\n                          <div>{formatTime(f.startTime)}</div>\n                          <div>{f.remarks || \"---\"}</div>\n                          <div className=\"flex items-center justify-center gap-2\">\n                            <div className=\"flex items-center gap-2\">\n                              <span\n                                className={`inline-block w-3 h-3 rounded-full ${f.status === \"PENDING\" ? \"bg-yellow-400\" : f.status === \"CANCELLED\" ? \"bg-gray-400\" : f.status === \"COMPLETED\" ? \"bg-green-400\" : \"bg-gray-300\"}`}\n                              />\n                              <span className=\"text-sm\">{f.status ?? \"PENDING\"}</span>\n                            </div>\n                          </div>\n\n                          {/* action menu (uses openActionMenu state) */}\n                          <div className=\"relative\">\n                            <button\n                              onClick={(e) => toggleActionMenu(`followup-${f.id ?? idx}`, e)}\n                              className=\"p-1 rounded hover:bg-slate-50 text-gray-500\"\n                              aria-label=\"Actions\"\n                            >\n                              ⋮\n                            </button>\n\n                            {openActionMenu === `followup-${f.id ?? idx}` && (\n                              <div\n                                onClick={stopPropagation}\n                                className=\"absolute right-0 mt-2 w-36 bg-white border rounded-md shadow-sm z-50\"\n                              >\n                                <button\n                                  onClick={() => {\n                                    openEditFollowup(f);\n                                    setOpenActionMenu(null);\n                                  }}\n                                  className=\"w-full text-left px-3 py-2 text-sm hover:bg-slate-50\"\n                                >\n                                  Edit\n                                </button>\n                                <button\n                                  onClick={() => {\n                                    deleteFollowup(f.id);\n                                    setOpenActionMenu(null);\n                                  }}\n                                  className=\"w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-slate-50\"\n                                >\n                                  Delete\n                                </button>\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {activeTab === \"people\" && (\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <button\n                      type=\"button\"\n                      onClick={openAddPeopleModal}\n                      className=\"inline-flex items-center gap-2 text-blue-600\"\n                    >\n                      <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                        <path d=\"M12 5v14\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                        <path d=\"M5 12h14\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                      </svg>\n                      Add People\n                    </button>\n\n                    <div className=\"flex items-center gap-3\">\n                      <input\n                        type=\"search\"\n                        placeholder=\"Search\"\n                        value={peopleSearch}\n                        onChange={(e) => setPeopleSearch(e.target.value)}\n                        className=\"rounded-full border px-3 py-2 text-sm\"\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"rounded-md border overflow-hidden\">\n                    <div className=\"bg-blue-50 text-sm text-gray-700 grid grid-cols-[1fr_1fr_1fr_80px] gap-3 p-2 items-center font-medium\">\n                      <div>Name</div>\n                      <div>Department</div>\n                      <div className=\"text-center\">Designation</div>\n                      <div className=\"text-center\">Action</div>\n                    </div>\n\n                    <div>\n                      {employeesLoading && <div className=\"p-4\">Loading people...</div>}\n                      {employeesError && <div className=\"p-4 text-red-600\">{employeesError}</div>}\n                      {!employeesLoading && assignedEmployees.length === 0 && (\n                        <div className=\"p-4 text-sm text-gray-500\">No people assigned</div>\n                      )}\n\n                      {filteredAssigned.map((a, idx) => (\n                        <div key={a.employeeId ?? `emp-${idx}`} className=\"grid grid-cols-[1fr_1fr_1fr_80px] gap-4 items-center p-4 border-t\">\n                          <div className=\"flex items-center gap-3\">\n                            <div className=\"w-10 h-10 rounded-full overflow-hidden bg-slate-100\">\n                              {a.profileUrl ? (\n                                <img src={a.profileUrl} alt={a.name} className=\"w-full h-full object-cover\" />\n                              ) : (\n                                <div className=\"w-full h-full flex items-center justify-center text-xs text-gray-400\">N</div>\n                              )}\n                            </div>\n                            <div>\n                              <div className=\"font-medium text-sm\">{a.name}</div>\n                              <div className=\"text-xs text-gray-500\">{a.designation || \"\"}</div>\n                              <div className=\"text-xs text-gray-400\">ID: {a.employeeId}</div>\n                            </div>\n                          </div>\n\n                          <div className=\"text-sm\">{a.department || \"—\"}</div>\n                          <div className=\"text-sm text-center\">{a.designation || \"—\"}</div>\n\n                          <div className=\"text-center\">\n                            <button\n                              onClick={() => removeEmployee(a.employeeId)}\n                              disabled={peopleDeletingId === a.employeeId}\n                              className=\"text-red-600 hover:underline\"\n                              aria-label=\"Remove\"\n                            >\n                              {peopleDeletingId === a.employeeId ? \"Removing...\" : \"🗑️\"}\n                            </button>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {activeTab === \"notes\" && (\n                <div>\n                  <div className=\"mb-4\">\n                    <button onClick={openAddNote} className=\"inline-flex items-center gap-2 text-blue-600\">\n                      <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                        <circle cx=\"12\" cy=\"12\" r=\"11\" strokeWidth=\"1\" />\n                        <path d=\"M12 8v8M8 12h8\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                      </svg>\n                      Add a Note\n                    </button>\n                  </div>\n\n                  {/* Notes table (styled like your screenshot) */}\n                  <div className=\"rounded-md border overflow-hidden\">\n                    <div className=\"bg-blue-50 text-sm text-gray-700 grid grid-cols-[1fr_1fr_80px] gap-3 p-3 items-center font-medium rounded-t-md\">\n                      <div>Note Title</div>\n                      <div>Note Type</div>\n                      <div className=\"text-center\">Action</div>\n                    </div>\n\n                    <div>\n                      {notesLoading && <div className=\"p-6 text-sm text-gray-500\">Loading notes...</div>}\n                      {notesError && <div className=\"p-6 text-sm text-red-600\">{notesError}</div>}\n\n                      {!notesLoading && notes.length === 0 && (\n                        <div className=\"p-6 text-sm text-gray-500\">No notes yet.</div>\n                      )}\n\n                      {notes.map((n, idx) => (\n                        <div key={n.id ?? `note-${idx}`} className=\"grid grid-cols-[1fr_1fr_80px] items-start border-t p-4\">\n                          <div>\n                            <div className=\"font-medium text-sm\">{n.noteTitle}</div>\n                            <div className=\"text-xs text-gray-500\">ID: {n.id} • {n.createdBy || \"--\"}</div>\n                          </div>\n                          <div className=\"text-sm\">\n                            <div className=\"inline-flex items-center gap-2\">\n                              <span className=\"text-xs text-gray-500\">{n.noteType === \"PUBLIC\" ? \"🌐 Public\" : \"🔒 Private\"}</span>\n                            </div>\n                          </div>\n                          <div className=\"text-center\">\n                            {/* action menu with centralized state */}\n                            <div className=\"relative inline-block\">\n                              <button\n                                onClick={(e) => toggleActionMenu(`note-${n.id ?? idx}`, e)}\n                                className=\"p-1 rounded hover:bg-slate-50 text-gray-500\"\n                                aria-label=\"Actions\"\n                              >\n                                ⋮\n                              </button>\n\n                              {openActionMenu === `note-${n.id ?? idx}` && (\n                                <div\n                                  onClick={stopPropagation}\n                                  className=\"absolute right-0 mt-2 w-40 bg-white border rounded-md shadow-sm z-50\"\n                                >\n                                  <button\n                                    onClick={() => {\n                                      openViewNote(n);\n                                      setOpenActionMenu(null);\n                                    }}\n                                    className=\"w-full text-left px-3 py-2 text-sm hover:bg-slate-50\"\n                                  >\n                                    View\n                                  </button>\n                                  <button\n                                    onClick={() => {\n                                      openEditNote(n);\n                                      setOpenActionMenu(null);\n                                    }}\n                                    className=\"w-full text-left px-3 py-2 text-sm hover:bg-slate-50\"\n                                  >\n                                    Edit\n                                  </button>\n                                  <button\n                                    onClick={() => {\n                                      deleteNote(n.id);\n                                      setOpenActionMenu(null);\n                                    }}\n                                    disabled={noteDeletingId === n.id}\n                                    className=\"w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-slate-50\"\n                                  >\n                                    {noteDeletingId === n.id ? \"Deleting...\" : \"Delete\"}\n                                  </button>\n                                </div>\n                              )}\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {activeTab === \"comments\" && (\n                <div>\n                  <div className=\"mb-4\">\n                    <button\n                      onClick={openAddComment}\n                      className=\"inline-flex items-center gap-2 text-blue-600\"\n                    >\n                      <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                        <circle cx=\"12\" cy=\"12\" r=\"11\" strokeWidth=\"1\" />\n                        <path d=\"M12 8v8M8 12h8\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                      </svg>\n                      Add a Comment\n                    </button>\n                  </div>\n\n                  <div className=\"rounded-md border overflow-hidden\">\n                    <div className=\"bg-blue-50 text-sm text-gray-700 grid grid-cols-[140px_1fr_80px] gap-3 p-3 items-center font-medium rounded-t-md\">\n                      <div>Date</div>\n                      <div>Comment</div>\n                      <div className=\"text-center\">Action</div>\n                    </div>\n\n                    <div>\n                      {(!deal.comments || deal.comments.length === 0) && (\n                        <div className=\"p-6 text-sm text-gray-500\">No comments yet.</div>\n                      )}\n\n                      {deal.comments && deal.comments.length > 0 && deal.comments.map((c: any, idx: number) => (\n                        <div key={c.id || `${c.employeeId ?? \"emp\"}-${c.createdAt ?? idx}`} className=\"grid grid-cols-[140px_1fr_80px] items-start border-t p-4\">\n                          <div className=\"text-sm text-gray-700\">{new Date(c.createdAt).toLocaleDateString()}</div>\n                          <div className=\"text-sm text-gray-700\">{c.commentText || \"--\"}</div>\n                          <div className=\"text-center\">\n                            <button\n                              onClick={() => deleteComment(c.id)}\n                              disabled={commentDeletingId === c.id}\n                              className=\"text-red-600 hover:underline\"\n                              aria-label=\"Delete comment\"\n                            >\n                              {commentDeletingId === c.id ? \"Deleting...\" : \"🗑️\"}\n                            </button>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {activeTab === \"tags\" && (\n                <div>\n                  <div className=\"mb-4\">\n                    <button onClick={openAddTag} className=\"inline-flex items-center gap-2 text-blue-600\">\n                      <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                        <circle cx=\"12\" cy=\"12\" r=\"11\" strokeWidth=\"1\" />\n                        <path d=\"M12 8v8M8 12h8\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                      </svg>\n                      Add a Tag\n                    </button>\n                  </div>\n\n                  {/* Tags table — styled like your screenshot */}\n                  <div className=\"rounded-md border overflow-hidden\">\n                    <div className=\"bg-blue-50 text-sm text-gray-700 grid grid-cols-[1fr_80px] gap-3 p-3 items-center font-medium rounded-t-md\">\n                      <div>Tag Name</div>\n                      <div className=\"text-center\">Action</div>\n                    </div>\n\n                    <div>\n                      {tagsLoading && <div className=\"p-6 text-sm text-gray-500\">Loading tags...</div>}\n                      {tagsError && <div className=\"p-6 text-sm text-red-600\">{tagsError}</div>}\n\n                      {!tagsLoading && tags.length === 0 && (\n                        <div className=\"p-6 text-sm text-gray-500\">No tags yet.</div>\n                      )}\n\n                      {tags.map((t, idx) => {\n                        // t can be either TagItem or string (server inconsistency). Render name accordingly.\n                        const tagName = typeof t === \"string\" ? t : t.tagName;\n                        const tagId = typeof t === \"string\" ? undefined : t.id;\n                        const key = `${typeof t === \"string\" ? t : (t.id ?? t.tagName)}-${idx}`;\n                        return (\n                          <div key={key} className=\"grid grid-cols-[1fr_80px] items-center border-t p-4\">\n                            <div className=\"text-sm text-gray-700\">{tagName}</div>\n                            <div className=\"text-center\">\n                              <button\n                                onClick={() => deleteTag(tagId)}\n                                disabled={tagDeletingId === tagId}\n                                className=\"text-red-600\"\n                                aria-label=\"Delete tag\"\n                              >\n                                {tagDeletingId === tagId ? \"Deleting...\" : \"🗑️\"}\n                              </button>\n                            </div>\n                          </div>\n                        );\n                      })}\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {activeTab === \"tags\" && <></>}\n            </div>\n          </div>\n        </div>\n\n        {/* Right: Lead Contact Details card (preview removed earlier) */}\n        <aside className=\"space-y-4\">\n          <div className=\"bg-white border rounded-2xl p-6 shadow-sm\">\n            <h3 className=\"text-lg font-semibold mb-4\">Lead Contact Details</h3>\n\n            <div className=\"space-y-3 text-sm text-gray-700\">\n              <div className=\"flex justify-between\">\n                <span className=\"text-gray-500\">Name</span>\n                <span className=\"text-gray-900\">{deal.leadName || \"—\"}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-gray-500\">Email</span>\n                <span className=\"text-gray-900\">{deal.leadEmail || \"—\"}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-gray-500\">Mobile</span>\n                <span className=\"text-gray-900\">{deal.leadMobile || \"—\"}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-gray-500\">Company Name</span>\n                <span className=\"text-gray-900\">{(deal as any).leadCompany || \"—\"}</span>\n              </div>\n\n              <div className=\"mt-4 flex gap-3\">\n                <a\n                  href={deal.leadEmail ? `mailto:${deal.leadEmail}` : \"#\"}\n                  onClick={(e) => { if (!deal.leadEmail) e.preventDefault(); }}\n                  className=\"inline-flex items-center gap-2 px-3 py-2 rounded-md border text-sm text-sky-600 hover:bg-sky-50\"\n                >\n                  <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                    <path d=\"M3 8l9 6 9-6\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                    <path d=\"M21 19H3\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                  </svg>\n                  Email\n                </a>\n\n                <a\n                  href={deal.leadMobile ? `tel:${deal.leadMobile}` : \"#\"}\n                  onClick={(e) => { if (!deal.leadMobile) e.preventDefault(); }}\n                  className=\"inline-flex items-center gap-2 px-3 py-2 rounded-md border text-sm text-sky-600 hover:bg-sky-50\"\n                >\n                  <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                    <path d=\"M22 16.92v3a2 2 0 0 1-2.18 2 19.86 19.86 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6A19.86 19.86 0 0 1 2.09 4.18 2 2 0 0 1 4 2h3a2 2 0 0 1 2 1.72c.12.9.36 1.77.72 2.58a2 2 0 0 1-.45 2.11L9.91 9.91a14 14 0 0 0 6 6l1.5-1.5a2 2 0 0 1 2.11-.45c.81.36 1.68.6 2.58.72A2 2 0 0 1 22 16.92z\" strokeWidth=\"1\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                  </svg>\n                  Call\n                </a>\n              </div>\n            </div>\n          </div>\n\n          {/* Preview removed as requested */}\n        </aside>\n      </div>\n\n      {/* Followup modal — styled like your screenshot */}\n      {isFollowupModalOpen && editingFollowup && (\n        <div className=\"fixed inset-0 z-50 flex items-start justify-center pt-20\">\n          <div className=\"absolute inset-0 bg-black/40\" onClick={closeFollowupModal} />\n          <div className=\"relative bg-white w-full max-w-4xl rounded-2xl shadow-xl border p-6 mx-4\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-xl font-semibold\">\n                {editingFollowup.id ? \"Edit Follow Up\" : \"Add Follow Up\"}\n              </h3>\n              <button onClick={closeFollowupModal} className=\"text-gray-400 hover:text-gray-600\">✕</button>\n            </div>\n\n            {/* big rounded inner card similar to screenshot */}\n            <div className=\"rounded-lg border p-6 mb-6\">\n              <div className=\"text-sm font-medium mb-4\">Follow Up Details</div>\n\n              <div className=\"grid grid-cols-2 gap-6\">\n                <div>\n                  <label className=\"text-sm text-gray-600\">Next Follow Up *</label>\n                  <input\n                    type=\"date\"\n                    value={editingFollowup.nextDate}\n                    onChange={(e) => setEditingFollowup({ ...editingFollowup, nextDate: e.target.value })}\n                    className=\"mt-2 block w-full rounded-md border px-3 py-2\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"text-sm text-gray-600\">Start Time *</label>\n                  <input\n                    type=\"time\"\n                    value={editingFollowup.startTime}\n                    onChange={(e) => setEditingFollowup({ ...editingFollowup, startTime: e.target.value })}\n                    className=\"mt-2 block w-full rounded-md border px-3 py-2\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"text-sm text-gray-600\">Status</label>\n                  <div className=\"mt-2 flex items-center gap-3\">\n                    <span\n                      className={`inline-flex items-center gap-2 px-3 py-2 rounded-md border ${editingFollowup.status === \"PENDING\" ? \"bg-yellow-50 border-yellow-200\" : editingFollowup.status === \"COMPLETED\" ? \"bg-green-50 border-green-200\" : editingFollowup.status === \"CANCELLED\" ? \"bg-gray-50 border-gray-200\" : \"bg-white\"}`}\n                    >\n                      <span className={`inline-block w-2 h-2 rounded-full ${editingFollowup.status === \"PENDING\" ? \"bg-yellow-400\" : editingFollowup.status === \"COMPLETED\" ? \"bg-green-400\" : editingFollowup.status === \"CANCELLED\" ? \"bg-gray-400\" : \"bg-gray-300\"}`} />\n                      <span className=\"text-sm\">{editingFollowup.status ?? \"PENDING\"}</span>\n                    </span>\n\n                    <select\n                      value={editingFollowup.status}\n                      onChange={(e) => setEditingFollowup({ ...editingFollowup, status: e.target.value as any })}\n                      className=\"mt-0 block rounded-md border px-3 py-2\"\n                    >\n                      <option value=\"PENDING\">Pending</option>\n                      <option value=\"COMPLETED\">Completed</option>\n                      <option value=\"CANCELLED\">Cancelled</option>\n                    </select>\n                  </div>\n                </div>\n\n                <div className=\"flex items-center gap-3\">\n                  <input\n                    id=\"sendReminder\"\n                    type=\"checkbox\"\n                    checked={!!editingFollowup.sendReminder}\n                    onChange={(e) => setEditingFollowup({ ...editingFollowup, sendReminder: e.target.checked })}\n                  />\n                  <label htmlFor=\"sendReminder\" className=\"text-sm text-gray-700\">Send Reminder</label>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm text-gray-600\">Remind Before *</label>\n                  <input\n                    type=\"number\"\n                    min={0}\n                    value={editingFollowup.remindBefore ?? 1}\n                    onChange={(e) => setEditingFollowup({ ...editingFollowup, remindBefore: Number(e.target.value) })}\n                    className=\"mt-2 block w-full rounded-md border px-3 py-2\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm text-gray-600\">Days / Hours / Minutes</label>\n                  <select\n                    value={editingFollowup.remindUnit}\n                    onChange={(e) => setEditingFollowup({ ...editingFollowup, remindUnit: e.target.value })}\n                    className=\"mt-2 block w-full rounded-md border px-3 py-2\"\n                  >\n                    <option value=\"DAYS\">Days</option>\n                    <option value=\"HOURS\">Hours</option>\n                    <option value=\"MINUTES\">Minutes</option>\n                  </select>\n                </div>\n\n                <div className=\"col-span-2\">\n                  <label className=\"block text-sm text-gray-600\">Remark</label>\n                  <textarea\n                    value={editingFollowup.remarks}\n                    onChange={(e) => setEditingFollowup({ ...editingFollowup, remarks: e.target.value })}\n                    className=\"mt-2 block w-full rounded-md border px-3 py-2 min-h-[120px]\"\n                    placeholder=\"---\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            <div className=\"mt-4 flex justify-center gap-6\">\n              <button onClick={closeFollowupModal} className=\"px-6 py-2 border rounded-md text-sm\">Cancel</button>\n              <button\n                onClick={saveFollowup}\n                disabled={followupSaving}\n                className={`px-6 py-2 rounded-md text-sm text-white ${followupSaving ? \"bg-gray-400\" : \"bg-blue-600 hover:bg-blue-700\"}`}\n              >\n                {followupSaving ? \"Saving...\" : \"Save\"}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Add People modal — styled like the screenshot */}\n      {isAddPeopleOpen && (\n        <div className=\"fixed inset-0 z-50 flex items-start justify-center pt-20\">\n          <div className=\"absolute inset-0 bg-black/40\" onClick={closeAddPeopleModal} />\n          <div className=\"relative bg-white w-full max-w-4xl rounded-2xl shadow-xl border p-6 mx-4\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-xl font-semibold\">Add People</h3>\n              <button onClick={closeAddPeopleModal} className=\"text-gray-400 hover:text-gray-600\">✕</button>\n            </div>\n\n            <div className=\"rounded-lg border p-6 mb-6\">\n              <div className=\"text-sm font-medium mb-4\">Add People</div>\n\n              <div className=\"grid grid-cols-2 gap-6 items-end\">\n                {/* Employee Name dropdown */}\n                <div>\n                  <label className=\"text-sm text-gray-600\">Name *</label>\n                  <select\n                    value={selectedAddEmployeeId ?? \"\"}\n                    onChange={(e) => setSelectedAddEmployeeId(e.target.value)}\n                    className=\"mt-2 block w-full rounded-md border px-3 py-2\"\n                  >\n                    <option value=\"\">-- Select Person --</option>\n                    {availableToAdd.map((p) => (\n                      <option key={p.employeeId} value={p.employeeId}>\n                        {p.name} {p.department ? `— ${p.department}` : \"\"}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                {/* Department dropdown */}\n                <div>\n                  <label className=\"text-sm text-gray-600\">Department *</label>\n                  <select\n                    value={selectedDepartment}\n                    onChange={(e) => setSelectedDepartment(e.target.value)}\n                    className=\"mt-2 block w-full rounded-md border px-3 py-2\"\n                  >\n                    <option value=\"\">-- All Departments --</option>\n                    {departments.map((d) => (\n                      <option key={d} value={d}>{d}</option>\n                    ))}\n                  </select>\n                </div>\n\n                {/* Optional note row spanning 2 cols */}\n                <div className=\"col-span-2 text-sm text-gray-500\">\n                  <div className=\"mt-2\">\n                    Tip: Choose department to filter the Name dropdown. If Department is left as <strong>All</strong>, all available employees will show.\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex justify-center gap-6\">\n              <button onClick={closeAddPeopleModal} className=\"px-6 py-2 border rounded-md text-sm\">Cancel</button>\n              <button\n                onClick={addEmployee}\n                disabled={peopleSaving || !selectedAddEmployeeId}\n                className={`px-6 py-2 rounded-md text-sm text-white ${peopleSaving ? \"bg-gray-400\" : \"bg-blue-600 hover:bg-blue-700\"}`}\n              >\n                {peopleSaving ? \"Adding...\" : \"Save\"}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Note Modal */}\n      {isNoteModalOpen && editingNote && (\n        <div className=\"fixed inset-0 z-50 flex items-start justify-center pt-20\">\n          <div className=\"absolute inset-0 bg-black/40\" onClick={closeNoteModal} />\n          <div className=\"relative bg-white w-full max-w-4xl rounded-2xl shadow-xl border p-6 mx-4\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-xl font-semibold\">\n                {noteModalMode === \"add\" ? \"Add Deal Note\" : noteModalMode === \"edit\" ? \"Edit Deal Note\" : (editingNote.noteTitle || \"View Note\")}\n              </h3>\n              <button onClick={closeNoteModal} className=\"text-gray-400 hover:text-gray-600\">✕</button>\n            </div>\n\n            {noteModalMode === \"view\" ? (\n              <div className=\"rounded-lg border p-6 mb-6\">\n                <div className=\"text-sm font-medium mb-4\">Deal Note Details</div>\n\n                <div className=\"grid grid-cols-[220px_1fr] gap-4 text-sm text-gray-700\">\n                  <div className=\"text-gray-500\">Note Title</div>\n                  <div className=\"text-gray-900\">{editingNote.noteTitle || \"—\"}</div>\n\n                  <div className=\"text-gray-500\">Note Type </div>\n                  <div className=\"text-gray-900\">{editingNote.noteType === \"PUBLIC\" ? \"Public\" : \"Private\"}</div>\n\n                  <div className=\"text-gray-500\">Note Detail</div>\n                  <div className=\"text-gray-900\">{editingNote.noteDetails && editingNote.noteDetails.trim() ? editingNote.noteDetails : \"---\"}</div>\n                </div>\n              </div>\n            ) : (\n              <div className=\"rounded-lg border p-6 mb-6\">\n                <div className=\"text-sm font-medium mb-4\">Deal Note Details</div>\n\n                <div className=\"grid grid-cols-2 gap-6\">\n                  <div>\n                    <label className=\"text-sm text-gray-600\">Note Title *</label>\n                    <input\n                      type=\"text\"\n                      value={editingNote.noteTitle}\n                      onChange={(e) => setEditingNote({ ...editingNote, noteTitle: e.target.value })}\n                      className=\"mt-2 block w-full rounded-md border px-3 py-2\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"text-sm text-gray-600\">Note Type</label>\n                    <div className=\"mt-2 flex items-center gap-4\">\n                      <label className=\"inline-flex items-center gap-2\">\n                        <input\n                          type=\"radio\"\n                          name=\"noteType\"\n                          value=\"PUBLIC\"\n                          checked={editingNote.noteType === \"PUBLIC\"}\n                          onChange={() => setEditingNote({ ...editingNote, noteType: \"PUBLIC\" })}\n                        />\n                        <span className=\"text-sm\">Public</span>\n                      </label>\n\n                      <label className=\"inline-flex items-center gap-2\">\n                        <input\n                          type=\"radio\"\n                          name=\"noteType\"\n                          value=\"PRIVATE\"\n                          checked={editingNote.noteType === \"PRIVATE\"}\n                          onChange={() => setEditingNote({ ...editingNote, noteType: \"PRIVATE\" })}\n                        />\n                        <span className=\"text-sm\">Private</span>\n                      </label>\n                    </div>\n                  </div>\n\n                  <div className=\"col-span-2\">\n                    <label className=\"block text-sm text-gray-600\">Note Detail </label>\n                    <textarea\n                      value={editingNote.noteDetails}\n                      onChange={(e) => setEditingNote({ ...editingNote, noteDetails: e.target.value })}\n                      className=\"mt-2 block w-full rounded-md border px-3 py-2 min-h-[120px]\"\n                      placeholder=\"--\"\n                    />\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <div className=\"mt-4 flex justify-center gap-6\">\n              <button onClick={closeNoteModal} className=\"px-6 py-2 border rounded-md text-sm\">Cancel</button>\n\n              {noteModalMode !== \"view\" && (\n                <button\n                  onClick={saveNote}\n                  disabled={noteSaving}\n                  className={`px-6 py-2 rounded-md text-sm text-white ${noteSaving ? \"bg-gray-400\" : \"bg-blue-600 hover:bg-blue-700\"}`}\n                >\n                  {noteSaving ? \"Saving...\" : \"Save\"}\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Add Tag Modal (styled like your screenshot) */}\n      {isAddTagOpen && (\n        <div className=\"fixed inset-0 z-50 flex items-start justify-center pt-20\">\n          <div className=\"absolute inset-0 bg-black/40\" onClick={closeAddTag} />\n          <div className=\"relative bg-white w-full max-w-4xl rounded-2xl shadow-xl border p-6 mx-4\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-xl font-semibold\">Add Tags</h3>\n              <button onClick={closeAddTag} className=\"text-gray-400 hover:text-gray-600\">✕</button>\n            </div>\n\n            <div className=\"rounded-lg border p-6 mb-6\">\n              <div className=\"text-sm font-medium mb-4\">Tag</div>\n\n              <div>\n                <label className=\"text-sm text-gray-600\">Tag *</label>\n                <input\n                  type=\"text\"\n                  value={tagValue}\n                  onChange={(e) => setTagValue(e.target.value)}\n                  className=\"mt-2 block w-full rounded-md border px-3 py-2\"\n                  placeholder=\"--\"\n                />\n              </div>\n            </div>\n\n            <div className=\"flex justify-center gap-6\">\n              <button onClick={closeAddTag} className=\"px-6 py-2 border rounded-md text-sm\">Cancel</button>\n              <button\n                onClick={saveTag}\n                disabled={tagSaving}\n                className={`px-6 py-2 rounded-md text-sm text-white ${tagSaving ? \"bg-gray-400\" : \"bg-blue-600 hover:bg-blue-700\"}`}\n              >\n                {tagSaving ? \"Saving...\" : \"Save\"}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Add Comment Modal */}\n      {isAddCommentOpen && (\n        <div className=\"fixed inset-0 z-50 flex items-start justify-center pt-20\">\n          <div className=\"absolute inset-0 bg-black/40\" onClick={closeAddComment} />\n          <div className=\"relative bg-white w-full max-w-4xl rounded-2xl shadow-xl border p-6 mx-4\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-xl font-semibold\">Add a Comment</h3>\n              <button onClick={closeAddComment} className=\"text-gray-400 hover:text-gray-600\">✕</button>\n            </div>\n\n            <div className=\"rounded-lg border p-6 mb-6\">\n              <div className=\"text-sm font-medium mb-4\">Comment</div>\n              <textarea\n                value={commentText}\n                onChange={(e) => setCommentText(e.target.value)}\n                placeholder=\"--\"\n                className=\"mt-2 block w-full rounded-md border px-3 py-2 min-h-[120px]\"\n              />\n            </div>\n\n            <div className=\"mt-4 flex justify-center gap-6\">\n              <button onClick={closeAddComment} className=\"px-6 py-2 border rounded-md text-sm\">Cancel</button>\n              <button\n                onClick={saveComment}\n                disabled={commentSaving}\n                className={`px-6 py-2 rounded-md text-sm text-white ${commentSaving ? \"bg-gray-400\" : \"bg-blue-600 hover:bg-blue-700\"}`}\n              >\n                {commentSaving ? \"Saving...\" : \"Save\"}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}