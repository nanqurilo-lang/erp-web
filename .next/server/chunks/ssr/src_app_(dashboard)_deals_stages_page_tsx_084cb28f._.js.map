{"version":3,"sources":["turbopack:///[project]/src/app/(dashboard)/deals/stages/page.tsx","turbopack:///[project]/src/app/(dashboard)/deals/stages/_components/add-stages-panel.tsx","turbopack:///[project]/src/app/(dashboard)/deals/stages/_components/kanban-board.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState, useMemo } from \"react\"\nimport Link from \"next/link\"\nimport useSWR from \"swr\"\nimport type { Stage } from \"@/types/stages\"\nimport type { Deal } from \"@/types/deals\"\nimport AddStagePanel from \"./_components/add-stages-panel\"\nimport KanbanBoard from \"./_components/kanban-board\"\nimport { Button } from \"@/components/ui/button\"\nimport { Tabs, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\nimport { LayoutGrid, TableIcon } from \"lucide-react\"\n\nexport default function StagesPage() {\n  const [token, setToken] = useState<string | null>(null)\n  const [search, setSearch] = useState(\"\")\n  const [pipelineFilter, setPipelineFilter] = useState<string | null>(null)\n  const [categoryFilter, setCategoryFilter] = useState<string | null>(null)\n\n  // Fetch token once on mount\n  useEffect(() => {\n    const t = typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null\n    setToken(t)\n  }, [])\n\n  const fetchWithAuth = async (url: string) => {\n    if (!token) throw new Error(\"No access token found. Please log in.\")\n    const res = await fetch(url, { headers: { Authorization: `Bearer ${token}` } })\n    if (!res.ok) throw new Error(`Failed to fetch ${url}`)\n    return res.json()\n  }\n\n  const {\n    data: stagesData = [],\n    isLoading: stagesLoading,\n    error: stagesError,\n    mutate: mutateStages,\n  } = useSWR<Stage[]>(token ? \"/api/deals/stages\" : null, fetchWithAuth)\n\n  const {\n    data: dealsData = [],\n    isLoading: dealsLoading,\n    error: dealsError,\n    mutate: mutateDeals,\n  } = useSWR<Deal[]>(token ? \"/api/deals/get\" : null, fetchWithAuth)\n\n  // Combine loading and error states\n  const loading = stagesLoading || dealsLoading\n  const error = stagesError?.message || dealsError?.message || null\n\n  // Compute stageDeals using memoization\n  const stageDeals = useMemo(() => {\n    return stagesData.map((stage) => ({\n      ...stage,\n      deals: dealsData.filter((deal) => deal.dealStage === stage.name),\n    }))\n  }, [stagesData, dealsData])\n\n  // Compute filters using memoization\n  const resolvedFilters = useMemo(\n    () => ({\n      pipeline: pipelineFilter || undefined,\n      category: categoryFilter || undefined,\n    }),\n    [pipelineFilter, categoryFilter]\n  )\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center min-h-screen text-lg font-semibold\">\n        Loading stages and deals...\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"flex justify-center items-center min-h-screen text-lg font-semibold text-red-600\">\n        {error}\n      </div>\n    )\n  }\n\n  return (\n <main className=\"container mx-auto max-w-6xl px-4 py-8\">\n\n    <div className=\"flex flex-col min-h-screen  overflow-x-hidden\">\n      <div className=\"p-6 max-w-[1400px] mx-auto w-full\">\n        <header className=\"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between\">\n          {/* <h1 className=\"text-3xl font-bold text-foreground text-balance\">Deals – Kanban </h1> */}\n          <div className=\"flex items-center gap-2 flex-wrap\">\n            \n            <AddStagePanel\n              onCreated={async () => {\n                await mutateStages()\n              }}\n              getToken={() => token}\n            />\n            <Button asChild>\n              <Link href=\"/deals/create\">Add Deals</Link>\n            </Button>\n          </div>\n            {/* View Toggle */}\n<div className=\"mb-4 flex justify-end\">\n  <Tabs className=\"w-auto\" defaultValue=\"table\">\n    <TabsList>\n      <TabsTrigger value=\"table\" asChild>\n        <Link href=\"/deals/get\" className=\"flex items-center gap-2\">\n          <TableIcon className=\"h-4 w-4\" />\n        </Link>\n      </TabsTrigger>\n\n      <TabsTrigger value=\"kanban\" asChild>\n        <Link href=\"/deals/stages\" className=\"flex items-center gap-2\">\n          <LayoutGrid className=\"h-4 w-4\" />\n        </Link>\n      </TabsTrigger>\n    </TabsList>\n  </Tabs>\n</div>\n\n        </header>\n\n        <main className=\"flex-1 overflow-x-auto\">\n          \n          <KanbanBoard\n            stages={stagesData}\n            deals={dealsData}\n            search={search}\n            filters={resolvedFilters}\n          />\n        </main>\n\n        <footer className=\"mt-6\">\n          <Link href=\"/\" className=\"text-blue-600 hover:underline\">\n            Back to Home \n          </Link>\n        </footer>\n      </div>\n    </div>\n    </main>\n  )\n}","// \"use client\"\n\n// import type React from \"react\"\n\n// import { useState } from \"react\"\n\n// export default function AddStagePanel({\n//   onCreated,\n//   getToken,\n// }: {\n//   onCreated?: () => Promise<void> | void\n//   getToken: () => string | null\n// }) {\n//   const [open, setOpen] = useState(false)\n//   const [name, setName] = useState(\"\")\n//   const [submitting, setSubmitting] = useState(false)\n//   const [error, setError] = useState<string | null>(null)\n\n//   async function handleSubmit(e: React.FormEvent) {\n//     e.preventDefault()\n//     setError(null)\n//     const token = getToken()\n//     if (!token) {\n//       setError(\"No access token found. Please log in.\")\n//       return\n//     }\n//     try {\n//       setSubmitting(true)\n//       const res = await fetch(\"/api/deals/stages\", {\n//         method: \"POST\",\n//         headers: {\n//           \"Content-Type\": \"application/json\",\n//           Authorization: `Bearer ${token}`,\n//         },\n//         body: JSON.stringify({ name }),\n//       })\n//       if (!res.ok) throw new Error(\"Failed to create stage\")\n//       setName(\"\")\n//       setOpen(false)\n//       await onCreated?.()\n//     } catch (err: any) {\n//       setError(err?.message ?? \"Failed to create stage\")\n//     } finally {\n//       setSubmitting(false)\n//     }\n//   }\n\n//   return (\n//     <div className=\"relative\">\n//       {!open ? (\n//         <button\n//           onClick={() => setOpen(true)}\n//           className=\"rounded-md  bg-blue-500  px-3 py-2 text-primary-foreground hover:opacity-90\"\n//         >\n//           {\"+ Add Stage \"}\n//         </button>\n//       ) : (\n//         <form\n//           onSubmit={handleSubmit}\n//           className=\"flex items-center gap-2 border border-border rounded-md p-2 bg-background\"\n//         >\n//           <input\n//             value={name}\n//             onChange={(e) => setName(e.target.value)}\n//             placeholder=\"Stage name\"\n//             className=\"rounded-md border border-border bg-background px-2 py-1 text-foreground outline-none focus:ring-2 focus:ring-ring\"\n//           />\n//           <button\n//             type=\"submit\"\n//             disabled={!name || submitting}\n//             className=\"rounded-md bg-primary px-3 py-2 text-primary-foreground disabled:opacity-50\"\n//           >\n//             {submitting ? \"Saving...\" : \"Save\"}\n//           </button>\n//           <button\n//             type=\"button\"\n//             onClick={() => {\n//               setOpen(false)\n//               setName(\"\")\n//               setError(null)\n//             }}\n//             className=\"rounded-md border border-border px-3 py-2 text-foreground\"\n//           >\n//             {\"Cancel\"}\n//           </button>\n//           {error && <span className=\"text-sm text-destructive ml-2\">{error}</span>}\n//         </form>\n//       )}\n//     </div>\n//   )\n// }\n\n\n\n\"use client\"\n\nimport React, { useState } from \"react\"\n\nexport default function AddStagePanel({\n  onCreated,\n  getToken,\n}: {\n  onCreated?: () => Promise<void> | void\n  getToken: () => string | null\n}) {\n  const [open, setOpen] = useState(false)\n  const [name, setName] = useState(\"\")\n  const [submitting, setSubmitting] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  async function handleSubmit(e?: React.FormEvent) {\n    if (e) e.preventDefault()\n    setError(null)\n    const token = getToken()\n    if (!token) {\n      setError(\"No access token found. Please log in.\")\n      return\n    }\n    try {\n      setSubmitting(true)\n      const res = await fetch(\"/api/deals/stages\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({ name }),\n      })\n      if (!res.ok) {\n        const text = await res.text().catch(() => \"\")\n        throw new Error(text || \"Failed to create stage\")\n      }\n      setName(\"\")\n      setOpen(false)\n      await onCreated?.()\n    } catch (err: any) {\n      setError(err?.message ?? \"Failed to create stage\")\n    } finally {\n      setSubmitting(false)\n    }\n  }\n\n  return (\n    <div className=\"relative\">\n      {/* Toggle button when modal closed */}\n      {!open ? (\n        <button\n          onClick={() => setOpen(true)}\n          className=\"rounded-md bg-blue-600 px-3 py-2 text-white hover:opacity-95\"\n        >\n          + Add Stage\n        </button>\n      ) : null}\n\n      {/* Fullscreen slide-over modal */}\n      {open && (\n        <div\n          aria-modal=\"true\"\n          role=\"dialog\"\n          className=\"fixed inset-0 z-50 flex items-start justify-center\"\n        >\n          {/* Backdrop */}\n          <div\n            className=\"absolute inset-0 bg-black/40\"\n            onClick={() => {\n              if (!submitting) {\n                setOpen(false)\n                setError(null)\n                setName(\"\")\n              }\n            }}\n          />\n\n          {/* Panel */}\n          <div className=\"relative mt-8 w-[820px] max-w-[95%] rounded-lg bg-white shadow-xl ring-1 ring-black/5\">\n            {/* Header */}\n            <div className=\"flex items-center justify-between border-b border-gray-200 px-6 py-4\">\n              <h3 className=\"text-lg font-semibold text-slate-800\">Add New Deal Stage</h3>\n              <button\n                aria-label=\"Close\"\n                onClick={() => {\n                  if (!submitting) {\n                    setOpen(false)\n                    setError(null)\n                    setName(\"\")\n                  }\n                }}\n                className=\"text-slate-400 hover:text-slate-600 rounded-md p-1\"\n              >\n                <span style={{ fontSize: 20, lineHeight: 1 }}>×</span>\n              </button>\n            </div>\n\n            {/* Body */}\n            <form onSubmit={handleSubmit} className=\"px-6 py-6\">\n              <div className=\"rounded-md border border-gray-200 p-4 bg-gray-50\">\n                <label className=\"mb-2 block text-sm font-medium text-slate-700\">\n                  Deal Stage <span className=\"text-destructive\">*</span>\n                </label>\n                <input\n                  value={name}\n                  onChange={(e) => setName(e.target.value)}\n                  placeholder=\"--\"\n                  className=\"w-full rounded-md border border-gray-200 bg-white px-3 py-2 text-slate-800 outline-none focus:ring-2 focus:ring-blue-300\"\n                />\n              </div>\n\n              {/* Error */}\n              {error && <div className=\"mt-3 text-sm text-red-600\">{error}</div>}\n\n              {/* Footer buttons (centered) */}\n              <div className=\"mt-8 flex items-center justify-center gap-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    if (submitting) return\n                    setOpen(false)\n                    setName(\"\")\n                    setError(null)\n                  }}\n                  className=\"rounded-md border border-blue-500 px-6 py-2 text-blue-600 hover:bg-blue-50\"\n                >\n                  Cancel\n                </button>\n\n                <button\n                  type=\"submit\"\n                  disabled={!name || submitting}\n                  className=\"rounded-md bg-blue-600 px-6 py-2 text-white disabled:opacity-50\"\n                >\n                  {submitting ? \"Saving...\" : \"Save\"}\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n","\n\"use client\"\n\nimport { useState, useRef, useEffect } from \"react\"\nimport type { Stage } from \"@/types/stages\"\nimport type { Deal } from \"@/types/deals\"\nimport { Calendar, Phone, MoreHorizontal, Trash2 } from \"lucide-react\"\n\ntype Filters = {\n  pipeline?: string\n  category?: string\n}\n\n// ---- API ----\nconst API_BASE =  `${process.env.NEXT_PUBLIC_MAIN}`\nconst PRIORITIES_ADMIN_ENDPOINT = `${API_BASE}/deals/admin/priorities`\nconst PRIORITY_ASSIGN = (dealId: string | number) => `${API_BASE}/deals/${dealId}/priority/assign`\nconst PRIORITY_UPDATE = (dealId: string | number) => `${API_BASE}/deals/${dealId}/priority`\nconst DEALS_BULK = (dealId: string | number) => `${API_BASE}/deals/${dealId}/bulk`\nconst EMPLOYEES_ALL = `${API_BASE}/employee/all`\nconst STAGE_DELETE = (stageId: string | number) => `${API_BASE}/stages/${stageId}`\n// ---------------\n\nexport default function KanbanBoard({\n  stages,\n  deals,\n  search,\n  filters,\n}: {\n  stages: Stage[]\n  deals: Deal[]\n  search: string\n  filters: Filters\n}) {\n  const normalizedSearch = search.trim().toLowerCase()\n\n  // local copy of stages so we can remove a stage after delete without changing parent props\n  const [stagesState, setStagesState] = useState<Stage[]>(stages)\n  useEffect(() => {\n    setStagesState(stages)\n  }, [stages])\n\n  const filteredDeals = deals.filter((d) => {\n    if (filters.pipeline && d.pipeline !== filters.pipeline) return false\n    if (filters.category && d.dealCategory !== filters.category) return false\n    if (normalizedSearch) {\n      const hay =\n        `${d.title} ${d.id} ${d.dealCategory ?? \"\"} ${d.pipeline ?? \"\"} ${d.dealAgentMeta?.name ?? d.dealAgent ?? \"\"}`.toLowerCase()\n      if (!hay.includes(normalizedSearch)) return false\n    }\n    return true\n  })\n\n  // Read token once (used for API calls)\n  const [token, setToken] = useState<string | null>(null)\n  useEffect(() => {\n    if (typeof window !== \"undefined\") {\n      setToken(localStorage.getItem(\"accessToken\"))\n    }\n  }, [])\n\n  // Global palette fetched from API and shared to cards\n  const [globalPalette, setGlobalPalette] = useState<Array<{ id?: number; name: string; color: string }>>(() => [\n    // fallback while loading (unique)\n    { id: -1, name: \"Medium\", color: \"#FBBF24\" },\n    { id: -2, name: \"High\", color: \"#F97316\" },\n    { id: -3, name: \"Low\", color: \"#15803D\" },\n  ])\n  const [paletteLoading, setPaletteLoading] = useState<boolean>(true)\n\n  // helper to dedupe palette by name case-insensitive, keep earlier items unless replaced by same-name with id/color\n  const dedupePalette = (items: Array<{ id?: number; name: string; color: string }>) => {\n    const map = new Map<string, { id?: number; name: string; color: string }>()\n    for (const it of items) {\n      const key = it.name.trim().toLowerCase()\n      const existing = map.get(key)\n      if (!existing) {\n        map.set(key, it)\n      } else {\n        const chosen =\n          (!existing.id && it.id) || (it.id && existing.id && it.id !== existing.id)\n            ? { id: it.id ?? existing.id, name: it.name, color: it.color }\n            : { id: existing.id ?? it.id, name: existing.name, color: existing.color ?? it.color }\n        map.set(key, chosen)\n      }\n    }\n    return Array.from(map.values())\n  }\n\n  useEffect(() => {\n    let mounted = true\n\n    // wait until token is loaded (token === null => still reading)\n    if (token === null) {\n      return\n    }\n\n    const fetchPriorities = async () => {\n      setPaletteLoading(true)\n      try {\n        const headers: Record<string, string> = { \"Content-Type\": \"application/json\" }\n        if (token) headers[\"Authorization\"] = `Bearer ${token}`\n\n        const res = await fetch(PRIORITIES_ADMIN_ENDPOINT, { headers })\n        if (!res.ok) {\n          throw new Error(`Failed to load priorities: ${res.status}`)\n        }\n        const json = await res.json()\n        if (!mounted) return\n        const mapped = Array.isArray(json)\n          ? json.map((p: any) => ({ id: p.id, name: String(p.status ?? p.status), color: p.color ?? \"#2563EB\" }))\n          : []\n        if (mapped.length > 0) {\n          setGlobalPalette((prev) => dedupePalette([...prev, ...mapped]))\n        }\n      } catch (err) {\n        console.error(\"Error loading priorities:\", err)\n      } finally {\n        if (mounted) setPaletteLoading(false)\n      }\n    }\n    fetchPriorities()\n    return () => {\n      mounted = false\n    }\n  }, [token])\n\n  /**\n   * createGlobalPriority\n   */\n  const createGlobalPriority = async (name: string, color: string) => {\n    const headers: Record<string, string> = { \"Content-Type\": \"application/json\" }\n    if (token) headers[\"Authorization\"] = `Bearer ${token}`\n    const res = await fetch(PRIORITIES_ADMIN_ENDPOINT, {\n      method: \"POST\",\n      headers,\n      body: JSON.stringify({ status: name, color, isGlobal: true }),\n    })\n    if (!res.ok) {\n      const text = await safeReadResponseText(res)\n      throw new Error(`Failed to create global priority: ${res.status} ${text}`)\n    }\n    const created = await res.json()\n    return { id: created.id, name: created.status ?? name, color: created.color ?? color }\n  }\n\n  const assignPriorityToDeal = async (dealId: string | number, priorityId: number) => {\n    const headers: Record<string, string> = { \"Content-Type\": \"application/json\" }\n    if (token) headers[\"Authorization\"] = `Bearer ${token}`\n\n    const res = await fetch(PRIORITY_ASSIGN(dealId), {\n      method: \"POST\",\n      headers,\n      body: JSON.stringify({ priorityId }),\n    })\n\n    if (!res.ok) {\n      const text = await safeReadResponseText(res)\n      throw new Error(`Failed to assign priority: ${res.status} ${text}`)\n    }\n    const created = await res.json()\n    return {\n      id: created.id,\n      name: created.status ?? String(created.status ?? priorityId),\n      color: created.color ?? \"#2563EB\",\n      dealId: created.dealId ?? dealId,\n    }\n  }\n\n  const updatePriorityForDealFallback = async (dealId: string | number, priorityId: number) => {\n    const headers: Record<string, string> = { \"Content-Type\": \"application/json\" }\n    if (token) headers[\"Authorization\"] = `Bearer ${token}`\n\n    const res = await fetch(PRIORITY_UPDATE(dealId), {\n      method: \"PUT\",\n      headers,\n      body: JSON.stringify({ priorityId }),\n    })\n    if (!res.ok) {\n      const text = await safeReadResponseText(res)\n      throw new Error(`Failed fallback PUT update: ${res.status} ${text}`)\n    }\n    const created = await res.json()\n    return {\n      id: created.id,\n      name: created.status ?? String(created.status ?? priorityId),\n      color: created.color ?? \"#2563EB\",\n      dealId: created.dealId ?? dealId,\n    }\n  }\n\n  async function safeReadResponseText(res: Response) {\n    try {\n      const ct = res.headers.get(\"content-type\") || \"\"\n      if (ct.includes(\"application/json\")) {\n        const j = await res.json()\n        return JSON.stringify(j)\n      } else {\n        const t = await res.text()\n        return t\n      }\n    } catch (e) {\n      return \"<could not read response body>\"\n    }\n  }\n\n  const addPriorityAndAssignFlow = async (name: string, color: string, dealId: string | number, existingId?: number) => {\n    if (existingId) {\n      try {\n        const assigned = await assignPriorityToDeal(dealId, existingId)\n        setGlobalPalette((prev) => dedupePalette([...prev, { id: assigned.id, name: assigned.name, color: assigned.color }]))\n        return assigned\n      } catch (assignErr) {\n        console.error(\"Assign failed, attempting fallback. Assign error:\", assignErr)\n        try {\n          const fallback = await updatePriorityForDealFallback(dealId, existingId)\n          setGlobalPalette((prev) => dedupePalette([...prev, { id: fallback.id, name: fallback.name, color: fallback.color }]))\n          return fallback\n        } catch (fallbackErr) {\n          console.error(\"Fallback PUT failed:\", fallbackErr)\n          throw fallbackErr\n        }\n      }\n    }\n\n    try {\n      const createdGlobal = await createGlobalPriority(name, color)\n      setGlobalPalette((prev) => dedupePalette([...prev, createdGlobal]))\n      try {\n        const assigned = await assignPriorityToDeal(dealId, createdGlobal.id as number)\n        setGlobalPalette((prev) => dedupePalette([...prev, { id: assigned.id, name: assigned.name, color: assigned.color }]))\n        return assigned\n      } catch (assignErr) {\n        console.error(\"Assign after create failed, attempting fallback. Assign error:\", assignErr)\n        try {\n          const fallback = await updatePriorityForDealFallback(dealId, createdGlobal.id as number)\n          setGlobalPalette((prev) => dedupePalette([...prev, { id: fallback.id, name: fallback.name, color: fallback.color }]))\n          return fallback\n        } catch (fallbackErr) {\n          console.error(\"Fallback PUT failed after create:\", fallbackErr)\n          throw fallbackErr\n        }\n      }\n    } catch (createErr) {\n      console.error(\"Create global priority failed:\", createErr)\n      throw createErr\n    }\n  }\n\n  // --- Stage delete handler ---\n  const [openStageMenuId, setOpenStageMenuId] = useState<string | number | null>(null)\n  const deleteStage = async (stageId: string | number) => {\n    try {\n      const headers: Record<string, string> = { \"Content-Type\": \"application/json\" }\n      if (token) headers[\"Authorization\"] = `Bearer ${token}`\n\n      const res = await fetch(STAGE_DELETE(stageId), {\n        method: \"DELETE\",\n        headers,\n      })\n      if (!res.ok) {\n        const t = await safeReadResponseText(res)\n        throw new Error(`Failed to delete stage: ${res.status} ${t}`)\n      }\n      setStagesState((s) => s.filter((st) => String(st.id) !== String(stageId)))\n      setOpenStageMenuId(null)\n    } catch (err) {\n      console.error(\"Delete stage failed:\", err)\n      setOpenStageMenuId(null)\n    }\n  }\n\n  return (\n    <div className=\"relative w-full\">\n      <div className=\"flex gap-6 overflow-x-auto pb-4 px-1\">\n        {stagesState.map((stage) => {\n          const stageDeals = filteredDeals.filter((deal) => deal.dealStage === stage.name)\n          return (\n            <div key={stage.id} className=\"min-w-[340px] max-w-[380px] flex-shrink-0 flex flex-col\">\n              <div className=\"mb-4 flex items-center justify-between\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"h-2 w-2 rounded-full bg-primary\" />\n                  <h2 className=\"text-sm font-semibold text-foreground\">{stage.name}</h2>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"inline-flex items-center justify-center h-6 w-6 rounded-full bg-muted text-xs font-medium text-muted-foreground\">\n                    {stageDeals.length}\n                  </span>\n\n                  {/* three-dot menu for stage with delete */}\n                  <div className=\"relative\">\n                    <button\n                      type=\"button\"\n                      className=\"h-8 w-8 rounded-full flex items-center justify-center text-muted-foreground hover:bg-muted/10\"\n                      onClick={() => setOpenStageMenuId((cur) => (cur === stage.id ? null : stage.id))}\n                      aria-expanded={openStageMenuId === stage.id}\n                      aria-label=\"Stage menu\"\n                    >\n                      <MoreHorizontal className=\"w-4 h-4\" />\n                    </button>\n\n                    {openStageMenuId === stage.id && (\n                      <div className=\"absolute right-0 mt-2 w-36 bg-white border border-border shadow-lg rounded-md z-40\">\n                        <button\n                          type=\"button\"\n                          onClick={() => deleteStage(stage.id)}\n                          className=\"w-full text-left px-4 py-3 flex items-center gap-3 hover:bg-red-50 rounded-md\"\n                        >\n                          <Trash2 className=\"w-4 h-4 text-red-600\" />\n                          <span className=\"text-sm text-red-600 font-medium\">Delete</span>\n                        </button>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"flex flex-col gap-3 flex-1 bg-muted/30 rounded-xl p-3 min-h-[400px]\">\n                {stageDeals.length === 0 ? (\n                  <div className=\"flex items-center justify-center h-full text-center\">\n                    <p className=\"text-sm text-muted-foreground\">No deals in this stage</p>\n                  </div>\n                ) : (\n                  stageDeals.map((deal) => (\n                    <DealCard\n                      key={deal.id}\n                      deal={deal}\n                      palette={globalPalette}\n                      paletteLoading={paletteLoading}\n                      addPriorityAndAssignFlow={addPriorityAndAssignFlow}\n                      token={token}\n                    />\n                  ))\n                )}\n              </div>\n            </div>\n          )\n        })}\n      </div>\n    </div>\n  )\n}\n\n/* ------------------- helpers ------------------- */\n\nfunction initials(name: string) {\n  return name\n    .split(\" \")\n    .map((n) => (n ? n[0] : \"\"))\n    .join(\"\")\n    .slice(0, 2)\n    .toUpperCase()\n}\n\nfunction formatDateShort(d: Date) {\n  try {\n    return d.toLocaleDateString()\n  } catch {\n    return String(d)\n  }\n}\n\nfunction parseDateSafe(s: string) {\n  try {\n    const d = new Date(s)\n    return isNaN(d.getTime()) ? null : d\n  } catch {\n    return null\n  }\n}\n\n/* ------------------- DealCard ------------------- */\n\nfunction DealCard({\n  deal,\n  palette,\n  paletteLoading,\n  addPriorityAndAssignFlow,\n  token,\n}: {\n  deal: Deal\n  palette: Array<{ id?: number; name: string; color: string }>\n  paletteLoading: boolean\n  addPriorityAndAssignFlow: (name: string, color: string, dealId: string | number, existingId?: number) => Promise<{ id?: number; name: string; color: string }>\n  token: string | null\n}) {\n  const leadName =\n    (deal as any).leadName ||\n    (deal as any).contactName ||\n    deal.dealAgentMeta?.name ||\n    deal.dealAgent ||\n    \"Unknown\"\n\n  const dealName = deal.title ?? \"Deal\"\n\n  const initialTags: string[] = Array.isArray((deal as any).tags)\n    ? (deal as any).tags\n    : (deal as any).tags\n    ? String((deal as any).tags)\n        .split(\",\")\n        .map((s: string) => s.trim())\n    : []\n\n  // ---- COMMENTS ----\n  const initialCommentsRaw =\n    (deal as any).comments ??\n    (deal as any).dealComments ??\n    (deal as any).commentsMeta ??\n    (deal as any).latestComments ??\n    (deal as any).recentComments ??\n    null\n\n  const parseComments = (raw: any) => {\n    if (!raw) return [] as string[]\n    if (Array.isArray(raw)) {\n      return raw\n        .map((c) => {\n          if (!c) return \"\"\n          if (typeof c === \"string\") return c\n          if (typeof c === \"object\") return String(c.commentText ?? c.comment ?? c.text ?? c.body ?? \"\")\n          return String(c)\n        })\n        .map((s) => s.trim())\n        .filter(Boolean)\n    }\n    if (typeof raw === \"object\") {\n      const single = String(raw.commentText ?? raw.comment ?? raw.text ?? raw.body ?? \"\")\n      return single ? [single] : []\n    }\n    return [String(raw)]\n  }\n\n  const initialComments = parseComments(initialCommentsRaw)\n\n  // ---- FOLLOWUP CREATED DATES (NEW) ----\n  const initialFollowupsRaw =\n    (deal as any).followups ??\n    (deal as any).followUps ??\n    (deal as any).followupHistory ??\n    (deal as any).followupsMeta ??\n    (deal as any).followupList ??\n    (deal as any).followups_data ??\n    (deal as any).followupsArray ??\n    null\n\n  const parseFollowupsCreated = (raw: any) => {\n    if (!raw) return [] as string[]\n    if (Array.isArray(raw)) {\n      return raw\n        .map((f) => {\n          if (!f) return \"\"\n          const t = f.createdAt ?? f.created_at ?? f.createdDate ?? f.createdDateTime ?? f.created ?? f.dateCreated ?? f.date\n          if (t) return String(t)\n          if (typeof f === \"string\" || typeof f === \"number\") return String(f)\n          return \"\"\n        })\n        .map((s) => s.trim())\n        .filter(Boolean)\n    }\n    if (typeof raw === \"object\") {\n      const t = raw.createdAt ?? raw.created_at ?? raw.createdDate ?? raw.created ?? raw.dateCreated ?? raw.date\n      if (t) return [String(t)]\n      return []\n    }\n    return [String(raw)]\n  }\n\n  const initialFollowups = parseFollowupsCreated(initialFollowupsRaw)\n\n  // helper: pick most recent date from an array of date-strings\n  const pickMostRecentDate = (arr: string[]) => {\n    let best: Date | null = null\n    for (const s of arr) {\n      const d = parseDateSafe(s)\n      if (!d) continue\n      if (!best || d.getTime() > best.getTime()) best = d\n    }\n    return best\n  }\n\n  const nextFollowupRaw = (deal as any).nextFollowupDate ?? (deal as any).nextFollowup ?? (deal as any).next_followup\n  const nextFollowup = nextFollowupRaw ? parseDateSafe(String(nextFollowupRaw)) : null\n\n  const contact =\n    (deal as any).contactPhone ||\n    (deal as any).phone ||\n    (deal as any).contact ||\n    (deal as any).mobile ||\n    (deal as any).contact_number ||\n    \"\"\n\n  const initialWatchers = Array.isArray((deal as any).watchers)\n    ? (deal as any).watchers\n    : Array.isArray((deal as any).dealWatchers)\n    ? (deal as any).dealWatchers\n    : (deal as any).dealWatchersMeta\n    ? (deal as any).dealWatchersMeta\n    : (deal as any).assignedEmployeesMeta\n    ? (deal as any).assignedEmployeesMeta\n    : (deal as any).assignedEmployees\n    ? (deal as any).assignedEmployees\n    : []\n\n  const rawPriority = (deal as any).priority\n  const parsePriorities = (raw: any) => {\n    if (!raw) return [] as Array<{ name: string; color?: string }>\n    if (Array.isArray(raw)) {\n      return raw.map((p: any) => (typeof p === \"string\" ? { name: p, color: undefined } : { name: p?.name ?? String(p), color: p?.color }))\n    }\n    if (typeof raw === \"object\") {\n      return [{ name: raw.name ?? String(raw), color: raw.color }]\n    }\n    return [{ name: String(raw), color: undefined }]\n  }\n\n  const [priorities, setPriorities] = useState<Array<{ name: string; color?: string }>>(parsePriorities(rawPriority))\n\n  const [openPopover, setOpenPopover] = useState(false)\n  const popRef = useRef<HTMLDivElement | null>(null)\n\n  const [openModal, setOpenModal] = useState(false)\n  const [modalPriorityName, setModalPriorityName] = useState(\"\")\n  const [modalPriorityColor, setModalPriorityColor] = useState(\"#000000\")\n  const [saving, setSaving] = useState(false)\n\n  // NEW: state for the Add (tags/people/comment) modal that opens when clicking the plus watcher button\n  const [openAddModal, setOpenAddModal] = useState(false)\n  const [addTags, setAddTags] = useState<string[]>([])\n  const [tagInput, setTagInput] = useState(\"\")\n  // people stores employeeIds as strings (payload expects employeeIds)\n  const [people, setPeople] = useState<string[]>([])\n  const [peopleInput, setPeopleInput] = useState(\"\")\n  const [comment, setComment] = useState(\"\")\n\n  // employees list (fetched from API) and map for quick lookup\n  const [employees, setEmployees] = useState<any[]>([])\n  const [employeesMap, setEmployeesMap] = useState<Record<string, any>>({})\n  const [employeeLoading, setEmployeeLoading] = useState(false)\n  const [showPeopleDropdown, setShowPeopleDropdown] = useState(false)\n\n  // local UI state to reflect API changes on the card without changing other code\n  const [localTags, setLocalTags] = useState<string[]>(initialTags)\n  const [localWatchers, setLocalWatchers] = useState<any[]>(initialWatchers)\n\n  // NEW: local comments shown on card\n  const [localComments, setLocalComments] = useState<string[]>(initialComments)\n\n  // NEW: local followup-created dates shown on card (strings)\n  const [localFollowupsCreated, setLocalFollowupsCreated] = useState<string[]>(initialFollowups)\n\n  // --- NEW: Sync incoming deal props into local card state so Kanban shows same people/tags/comments/followup-created as Deal -> People view\n  useEffect(() => {\n    setLocalTags(\n      Array.isArray((deal as any).tags)\n        ? (deal as any).tags\n        : (deal as any).tags\n        ? String((deal as any).tags).split(\",\").map((s: string) => s.trim())\n        : []\n    )\n\n    const watchersSource =\n      (deal as any).assignedEmployeesMeta ??\n      (deal as any).dealWatchersMeta ??\n      (deal as any).dealWatchers ??\n      (deal as any).assignedEmployees ??\n      (deal as any).watchers ??\n      []\n\n    setLocalWatchers(Array.isArray(watchersSource) ? watchersSource : [])\n\n    // sync comments from incoming props (same fallbacks as above)\n    const incomingComments = parseComments(\n      (deal as any).comments ??\n        (deal as any).dealComments ??\n        (deal as any).commentsMeta ??\n        (deal as any).latestComments ??\n        (deal as any).recentComments ??\n        null\n    )\n    setLocalComments(incomingComments)\n\n    // sync followup created dates (NEW)\n    const incomingFollowups = parseFollowupsCreated(\n      (deal as any).followups ??\n        (deal as any).followUps ??\n        (deal as any).followupHistory ??\n        (deal as any).followupsMeta ??\n        (deal as any).followupList ??\n        null\n    )\n    setLocalFollowupsCreated(incomingFollowups)\n  }, [deal])\n\n  useEffect(() => {\n    const onDoc = (e: MouseEvent) => {\n      if (!openPopover) return\n      if (popRef.current && !popRef.current.contains(e.target as Node)) {\n        setOpenPopover(false)\n      }\n    }\n    document.addEventListener(\"mousedown\", onDoc)\n    return () => document.removeEventListener(\"mousedown\", onDoc)\n  }, [openPopover])\n\n  // Fetch employees once token is loaded (to populate People dropdown)\n  useEffect(() => {\n    let mounted = true\n    if (token === null) return\n\n    const fetchEmployees = async () => {\n      setEmployeeLoading(true)\n      try {\n        const headers: Record<string, string> = { \"Content-Type\": \"application/json\" }\n        if (token) headers[\"Authorization\"] = `Bearer ${token}`\n        const res = await fetch(EMPLOYEES_ALL, { headers })\n        if (!res.ok) {\n          throw new Error(`Failed to fetch employees: ${res.status}`)\n        }\n        const json = await res.json()\n        if (!mounted) return\n        setEmployees(Array.isArray(json) ? json : [])\n        const map: Record<string, any> = {}\n        ;(Array.isArray(json) ? json : []).forEach((e: any) => {\n          if (e?.employeeId) map[String(e.employeeId)] = e\n        })\n        setEmployeesMap(map)\n      } catch (err) {\n        console.error(\"Error fetching employees:\", err)\n      } finally {\n        if (mounted) setEmployeeLoading(false)\n      }\n    }\n\n    fetchEmployees()\n    return () => {\n      mounted = false\n    }\n  }, [token])\n\n  const applyPalettePriority = async (p: { id?: number; name: string; color: string }) => {\n    setPriorities([{ name: p.name, color: p.color }])\n    try {\n      const assigned = await addPriorityAndAssignFlow(p.name, p.color, (deal as any).id, p.id)\n      setPriorities([{ name: assigned.name, color: assigned.color }])\n    } catch (err) {\n      console.error(\"Failed to persist selected priority:\", err)\n    }\n  }\n\n  const onOpenAddModal = () => {\n    setModalPriorityName(\"\")\n    setModalPriorityColor(\"#000000\")\n    setOpenModal(true)\n  }\n\n  const onOpenPriorityList = () => {\n    setOpenPopover(true)\n  }\n\n  const onSaveModal = async () => {\n    if (!modalPriorityName.trim()) return\n    setSaving(true)\n    try {\n      const assigned = await addPriorityAndAssignFlow(modalPriorityName.trim(), modalPriorityColor || \"#000000\", (deal as any).id)\n      setPriorities([{ name: assigned.name, color: assigned.color }])\n      setOpenModal(false)\n      setOpenPopover(false)\n    } catch (err) {\n      console.error(\"Could not save/assign priority\", err)\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  const onCancelModal = () => {\n    setOpenModal(false)\n  }\n\n  // --- Tag handlers for Add modal\n  const handleTagKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === \"Enter\" || e.key === \",\") {\n      e.preventDefault()\n      const val = tagInput.trim()\n      if (val && !addTags.includes(val)) {\n        setAddTags((s) => [...s, val])\n      }\n      setTagInput(\"\")\n    } else if (e.key === \"Backspace\" && tagInput === \"\") {\n      setAddTags((s) => s.slice(0, -1))\n    }\n  }\n  const removeTag = (t: string) => setAddTags((s) => s.filter((x) => x !== t))\n\n  // --- People handlers for Add modal (autocomplete + selection)\n  const handlePeopleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === \"Enter\") {\n      e.preventDefault()\n      const val = peopleInput.trim()\n      if (!val) return\n      const matched = employees.find((emp) => emp.employeeId === val || emp.name?.toLowerCase() === val.toLowerCase())\n      const idToAdd = matched ? String(matched.employeeId) : val\n      if (idToAdd && !people.includes(idToAdd)) {\n        setPeople((s) => [...s, idToAdd])\n      }\n      setPeopleInput(\"\")\n      setShowPeopleDropdown(false)\n    } else if (e.key === \"Backspace\" && peopleInput === \"\") {\n      setPeople((s) => s.slice(0, -1))\n    } else {\n      setShowPeopleDropdown(true)\n    }\n  }\n\n  const removePerson = (p: string) => setPeople((s) => s.filter((x) => x !== p))\n\n  const onSelectEmployee = (emp: any) => {\n    if (!emp || !emp.employeeId) return\n    const id = String(emp.employeeId)\n    if (!people.includes(id)) {\n      setPeople((s) => [...s, id])\n    }\n    setPeopleInput(\"\")\n    setShowPeopleDropdown(false)\n  }\n\n  const filteredEmployees = employees.filter((emp) => {\n    if (!peopleInput) return true\n    const q = peopleInput.toLowerCase()\n    return String(emp.employeeId || \"\").toLowerCase().includes(q) || String(emp.name || \"\").toLowerCase().includes(q)\n  }).slice(0, 8)\n\n  const onSaveAddModal = async () => {\n    // Merge existing card tags + new modal tags (dedupe)\n    const mergedTags = Array.from(new Set([...localTags.map((t) => String(t).trim()).filter(Boolean), ...addTags.map((t) => String(t).trim()).filter(Boolean)]))\n\n    // Merge existing employeeIds from localWatchers (extract employeeId/name) + people input\n    const existingEmployeeIds: string[] = []\n    for (const w of localWatchers) {\n      if (!w) continue\n      if (typeof w === \"string\") {\n        existingEmployeeIds.push(w)\n      } else if (w.employeeId) {\n        existingEmployeeIds.push(String(w.employeeId))\n      } else if (w.employeeId === undefined && w.name && typeof w.name === \"string\") {\n        // skip\n      }\n    }\n    const peopleTrimmed = people.map((p) => String(p).trim()).filter(Boolean)\n    const mergedEmployeeIds = Array.from(new Set([...existingEmployeeIds, ...peopleTrimmed]))\n\n    // Build payload per your example (only include keys if non-empty)\n    const payload: any = {}\n    if (mergedTags.length > 0) payload.tags = mergedTags\n    if (mergedEmployeeIds.length > 0) payload.employeeIds = mergedEmployeeIds\n    if (comment && comment.trim()) payload.comments = [{ commentText: comment.trim() }]\n\n    if (!payload.tags && !payload.employeeIds && !payload.comments) {\n      setOpenAddModal(false)\n      return\n    }\n\n    try {\n      const headers: Record<string, string> = { \"Content-Type\": \"application/json\" }\n      if (token) headers[\"Authorization\"] = `Bearer ${token}`\n\n      const res = await fetch(DEALS_BULK((deal as any).id), {\n        method: \"POST\",\n        headers,\n        body: JSON.stringify(payload),\n      })\n\n      if (!res.ok) {\n        const text = await safeReadResponseText(res)\n        throw new Error(`Bulk update failed: ${res.status} ${text}`)\n      }\n\n      const json = await res.json()\n      // update local UI from server response (per your example response keys)\n      if (Array.isArray(json.tags)) {\n        setLocalTags(json.tags)\n      } else if (payload.tags) {\n        setLocalTags(payload.tags)\n      }\n\n      if (Array.isArray(json.assignedEmployeesMeta) && json.assignedEmployeesMeta.length > 0) {\n        setLocalWatchers(json.assignedEmployeesMeta)\n      } else if (Array.isArray(json.dealWatchersMeta) && json.dealWatchersMeta.length > 0) {\n        setLocalWatchers(json.dealWatchersMeta)\n      } else if (payload.employeeIds && payload.employeeIds.length > 0) {\n        const watchers = payload.employeeIds.map((id: string) => {\n          const emp = employeesMap[id]\n          return emp ? { employeeId: id, name: emp.name, profilePictureUrl: emp.profilePictureUrl } : { employeeId: id, name: id }\n        })\n        setLocalWatchers(watchers)\n      }\n\n      // if server returned comments, update local comments; otherwise if we sent a comment, append it optimistically\n      if (Array.isArray(json.comments) && json.comments.length > 0) {\n        const parsed = parseComments(json.comments)\n        setLocalComments(parsed)\n      } else if (payload.comments && payload.comments.length > 0) {\n        const sentText = String(payload.comments[0].commentText ?? \"\").trim()\n        if (sentText) {\n          setLocalComments((s) => [sentText, ...s].slice(0, 6))\n        }\n      }\n\n      // sync followups from server if returned\n      const serverFollowups =\n        json.followups ??\n        json.followUps ??\n        json.followupHistory ??\n        json.followupsMeta ??\n        json.followupList ??\n        null\n\n      if (serverFollowups) {\n        const parsedF = parseFollowupsCreated(serverFollowups)\n        if (Array.isArray(parsedF) && parsedF.length > 0) {\n          setLocalFollowupsCreated(parsedF)\n        }\n      }\n\n      setOpenAddModal(false)\n    } catch (err) {\n      console.error(\"Failed to save Add modal data:\", err)\n      setOpenAddModal(false)\n    }\n  }\n\n  // compute most recent followup created from localFollowupsCreated + initialFollowups (so local changes reflect)\n  const mostRecentFollowupFromLocal = pickMostRecentDate([...localFollowupsCreated, ...initialFollowups])\n\n  // Determine final followup date to show in the \"followup\" place:\n  // prefer explicit nextFollowup field, else fallback to the most recent created followup (from local/server)\n  const displayFollowupDate = nextFollowup ?? mostRecentFollowupFromLocal\n\n  return (\n    <div className=\"group rounded-lg border border-border bg-card hover:border-primary/50 hover:shadow-md transition-all duration-200 cursor-default\">\n      <div className=\"p-4 flex flex-col gap-3 relative\">\n        <div className=\"absolute right-3 top-3\">\n          <div>\n            {priorities.length === 0 ? (\n              <button\n                type=\"button\"\n                onClick={() => setOpenPopover((s) => !s)}\n                className=\"inline-flex items-center gap-2 px-2 py-1 rounded-full text-sm font-medium\"\n                aria-expanded={openPopover}\n                aria-label=\"Toggle priority popover\"\n              >\n                <div className=\"inline-flex items-center gap-1 px-2 py-1 rounded-full border border-border text-sm font-medium text-blue-600 bg-white/60\">\n                  <span className=\"text-[14px]\">＋</span>\n                  <span className=\"text-xs\">Add priority</span>\n                </div>\n              </button>\n            ) : (\n              <button\n                type=\"button\"\n                onClick={() => setOpenPopover(true)}\n                className=\"h-6 w-6 rounded-full flex items-center justify-center\"\n                aria-label=\"Open priority list\"\n                title={priorities.map((p) => p.name).join(\", \")}\n              >\n                <div\n                  className=\"h-3 w-3 rounded-full shadow-sm\"\n                  style={{ backgroundColor: priorities[0].color ?? \"rgba(59,130,246,0.9)\" }}\n                />\n              </button>\n            )}\n          </div>\n\n          {openPopover && (\n            <div\n              ref={popRef}\n              className=\"mt-2 w-44 rounded-lg bg-white border border-border shadow-lg p-3 text-sm z-50\"\n              role=\"dialog\"\n              aria-modal=\"false\"\n            >\n              <div className=\"flex flex-col gap-2\">\n                {paletteLoading ? (\n                  <div className=\"text-xs text-muted-foreground\">Loading...</div>\n                ) : (\n                  palette.map((pp) => (\n                    <button\n                      key={pp.id ?? pp.name}\n                      type=\"button\"\n                      onClick={() => applyPalettePriority(pp)}\n                      className=\"flex items-center gap-3 px-2 py-2 rounded-md hover:bg-muted/20 text-left\"\n                    >\n                      <span className=\"h-3 w-3 rounded-full\" style={{ backgroundColor: pp.color }} />\n                      <span className=\"font-medium\" style={{ color: pp.color }}>\n                        {pp.name}\n                      </span>\n                    </button>\n                  ))\n                )}\n              </div>\n\n              <div className=\"border-t border-border/60 my-2\" />\n\n              <div className=\"flex items-center gap-2\">\n                <div className=\"flex items-center gap-2 w-full\">\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      setOpenModal(true)\n                    }}\n                    className=\"h-8 w-8 rounded-full flex items-center justify-center bg-blue-600 text-white\"\n                    title=\"Add\"\n                  >\n                    ＋\n                  </button>\n                  <div className=\"text-sm text-muted-foreground\">Add</div>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        <div className=\"flex items-start justify-between gap-2\">\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"text-sm font-semibold text-foreground truncate\">{leadName}</div>\n            <div className=\"flex items-center gap-2 mt-1\">\n              <div className=\"text-xs text-muted-foreground truncate\">{dealName}</div>\n            </div>\n\n            {/* comments (small pills) */}\n            {localComments && localComments.length > 0 && (\n              <div className=\"flex gap-2 flex-wrap mt-2\">\n                {localComments.slice(0, 3).map((c, i) => (\n                  <span key={i} className=\"text-xs px-2 py-0.5 rounded-full bg-muted/20 text-muted-foreground max-w-[200px] truncate\">\n                    {c}\n                  </span>\n                ))}\n              </div>\n            )}\n\n            {/* NOTE: Removed the created-followup pill from here as requested.\n                Only the followup date near the calendar/plus area below will be shown. */}\n          </div>\n        </div>\n\n        {localTags.length > 0 && (\n          <div className=\"flex gap-2 flex-wrap\">\n            {localTags.slice(0, 3).map((t, i) => (\n              <span key={i} className=\"text-xs px-2 py-0.5 rounded-md bg-muted/60 text-muted-foreground\">\n                {t}\n              </span>\n            ))}\n          </div>\n        )}\n\n        <div className=\"flex items-center justify-between gap-3\">\n          <div className=\"flex items-center gap-3 text-sm\">\n            {contact ? (\n              <div className=\"flex items-center gap-2 text-muted-foreground\">\n                <Phone className=\"w-4 h-4 flex-shrink-0\" />\n                <span className=\"truncate\">{contact}</span>\n              </div>\n            ) : (\n              <div className=\"flex items-center gap-2 text-muted-foreground\">\n                <Phone className=\"w-4 h-4 flex-shrink-0\" />\n                <span className=\"truncate\">—</span>\n              </div>\n            )}\n          </div>\n\n          <div className=\"flex items-center gap-3\">\n            {/* IMPORTANT: show nextFollowup if present, otherwise fallback to mostRecentCreated followup date.\n                If neither present, show \"No follow-up\" (exactly like before). */}\n            {displayFollowupDate ? (\n              <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n                <Calendar className=\"w-4 h-4 flex-shrink-0\" />\n                <span>{formatDateShort(displayFollowupDate)}</span>\n              </div>\n            ) : (\n              <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n                <Calendar className=\"w-4 h-4 flex-shrink-0\" />\n                <span>No follow-up</span>\n              </div>\n            )}\n          </div>\n        </div>\n\n        <div className=\"flex items-center justify-between gap-3\">\n          <div className=\"flex items-center\">\n            <div className=\"flex -space-x-2\">\n              {localWatchers && localWatchers.length > 0 ? (\n                localWatchers.slice(0, 4).map((w: any, i: number) => {\n                  const img = w?.profilePictureUrl || w?.profileUrl || w?.avatar || w?.avatarUrl\n                  const name = w?.name || w?.displayName || w?.employeeId || String(w)\n                  return img ? (\n                    <img\n                      key={i}\n                      src={img}\n                      alt={name}\n                      title={name}\n                      className=\"h-7 w-7 rounded-full border-2 border-white shadow-sm\"\n                    />\n                  ) : (\n                    <div\n                      key={i}\n                      title={name}\n                      className=\"h-7 w-7 rounded-full bg-muted flex items-center justify-center text-xs font-medium border-2 border-white shadow-sm\"\n                    >\n                      {initials(name)}\n                    </div>\n                  )\n                })\n              ) : (\n                <div className=\"h-7 w-7 rounded-full bg-muted flex items-center justify-center text-xs font-medium border-2 border-white shadow-sm\">\n                  {initials(leadName)}\n                </div>\n              )}\n\n              {localWatchers && localWatchers.length > 4 && (\n                <div className=\"h-7 w-7 rounded-full bg-muted/80 flex items-center justify-center text-xs font-medium border-2 border-white shadow-sm\">\n                  +{localWatchers.length - 4}\n                </div>\n              )}\n            </div>\n          </div>\n\n          <div>\n            <button\n              type=\"button\"\n              onClick={() => {\n                setOpenAddModal(true)\n              }}\n              className=\"h-8 w-8 rounded-full border border-border flex items-center justify-center bg-white text-blue-600 shadow-sm\"\n              title=\"Add watcher\"\n            >\n              ＋\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* PRIORITY modal */}\n      {openModal && (\n        <div className=\"fixed inset-0 z-[60] flex items-center justify-center\" role=\"dialog\" aria-modal=\"true\" aria-label=\"Priority modal\">\n          <div className=\"absolute inset-0 bg-black/40\" onClick={onCancelModal} />\n\n          <div className=\"relative z-10 w-[380px] bg-white rounded-lg shadow-lg border border-border p-5\">\n            <h3 className=\"text-lg font-semibold mb-4\">Add</h3>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-muted-foreground mb-2\">Priority Status *</label>\n                <input\n                  type=\"text\"\n                  value={modalPriorityName}\n                  onChange={(e) => setModalPriorityName(e.target.value)}\n                  className=\"w-full px-4 py-3 rounded-xl border border-border text-sm\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-muted-foreground mb-2\">Color Code *</label>\n                <input\n                  type=\"text\"\n                  value={modalPriorityColor}\n                  onChange={(e) => setModalPriorityColor(e.target.value)}\n                  placeholder=\"eg #000000\"\n                  className=\"w-full px-4 py-3 rounded-xl border border-border text-sm\"\n                />\n              </div>\n            </div>\n\n            <div className=\"mt-6 flex items-center justify-between gap-3\">\n              <button\n                type=\"button\"\n                onClick={onCancelModal}\n                className=\"w-1/2 px-6 py-3 rounded-full border border-blue-600 text-blue-600 text-sm font-medium\"\n              >\n                Cancel\n              </button>\n              <button\n                type=\"button\"\n                onClick={onSaveModal}\n                className=\"w-1/2 px-6 py-3 rounded-full bg-blue-600 text-white text-sm font-medium\"\n                disabled={saving}\n              >\n                {saving ? \"Saving...\" : \"Save\"}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Add modal */}\n      {openAddModal && (\n        <div className=\"fixed inset-0 z-[70] flex items-center justify-center\" role=\"dialog\" aria-modal=\"true\" aria-label=\"Add modal\">\n          <div className=\"absolute inset-0 bg-black/40\" onClick={() => setOpenAddModal(false)} />\n\n          <div className=\"relative z-20 w-[380px] bg-white rounded-lg shadow-lg border border-border p-4\">\n            <h3 className=\"text-lg font-semibold mb-3\">Add</h3>\n\n            <div className=\"space-y-3\">\n              {/* Tags */}\n              <div>\n                <label className=\"block text-xs font-medium text-muted-foreground mb-1\">Tags</label>\n                <div className=\"min-h-[40px] border border-border rounded-md px-2 py-2 flex items-center gap-2 flex-wrap\">\n                  {addTags.map((t) => (\n                    <div key={t} className=\"inline-flex items-center gap-1 bg-blue-100 text-blue-700 rounded-full px-2 py-1 text-xs\">\n                      <span>{t}</span>\n                      <button type=\"button\" onClick={() => removeTag(t)} className=\"text-[12px] leading-none px-1\">✕</button>\n                    </div>\n                  ))}\n                  <input\n                    value={tagInput}\n                    onChange={(e) => setTagInput(e.target.value)}\n                    onKeyDown={handleTagKeyDown}\n                    placeholder=\"Add a tag and press Enter\"\n                    className=\"flex-1 min-w-[80px] text-sm outline-none\"\n                  />\n                </div>\n              </div>\n\n              {/* People with autocomplete */}\n              <div className=\"relative\">\n                <label className=\"block text-xs font-medium text-muted-foreground mb-1\">People</label>\n                <div className=\"min-h-[40px] border border-border rounded-md px-2 py-2 flex items-center gap-2 flex-wrap\">\n                  {people.map((p) => {\n                    const emp = employeesMap[p]\n                    const display = emp ? emp.name : p\n                    return (\n                      <div key={p} className=\"inline-flex items-center gap-1 bg-muted/20 text-muted-foreground rounded-full px-2 py-1 text-xs\">\n                        <span>{display}</span>\n                        <button type=\"button\" onClick={() => removePerson(p)} className=\"text-[12px] leading-none px-1\">✕</button>\n                      </div>\n                    )\n                  })}\n                  <input\n                    value={peopleInput}\n                    onChange={(e) => {\n                      setPeopleInput(e.target.value)\n                      setShowPeopleDropdown(true)\n                    }}\n                    onKeyDown={handlePeopleKeyDown}\n                    placeholder=\"Add people and press Enter (e.g. EMP-002)\"\n                    className=\"flex-1 min-w-[80px] text-sm outline-none\"\n                    onFocus={() => setShowPeopleDropdown(true)}\n                  />\n                </div>\n\n                {/* dropdown */}\n                {showPeopleDropdown && filteredEmployees.length > 0 && (\n                  <div className=\"absolute left-0 right-0 mt-1 bg-white border border-border shadow z-30 rounded-md max-h-56 overflow-auto\">\n                    {employeeLoading ? (\n                      <div className=\"p-2 text-xs text-muted-foreground\">Loading...</div>\n                    ) : (\n                      filteredEmployees.map((emp: any) => (\n                        <button\n                          key={emp.employeeId}\n                          type=\"button\"\n                          onClick={() => onSelectEmployee(emp)}\n                          className=\"w-full text-left px-3 py-2 hover:bg-muted/20 flex items-center gap-3\"\n                        >\n                          {emp.profilePictureUrl ? (\n                            <img src={emp.profilePictureUrl} alt={emp.name} className=\"h-6 w-6 rounded-full object-cover\" />\n                          ) : (\n                            <div className=\"h-6 w-6 rounded-full bg-muted flex items-center justify-center text-xs font-medium\">{initials(emp.name || emp.employeeId)}</div>\n                          )}\n                          <div className=\"flex-1 text-sm\">\n                            <div className=\"font-medium text-foreground\">{emp.name}</div>\n                            <div className=\"text-xs text-muted-foreground\">{emp.employeeId}</div>\n                          </div>\n                        </button>\n                      ))\n                    )}\n                    {filteredEmployees.length === 0 && (\n                      <div className=\"p-2 text-xs text-muted-foreground\">No employees found</div>\n                    )}\n                  </div>\n                )}\n              </div>\n\n              {/* Comment */}\n              <div>\n                <label className=\"block text-xs font-medium text-muted-foreground mb-1\">Comment</label>\n                <textarea\n                  value={comment}\n                  onChange={(e) => setComment(e.target.value)}\n                  className=\"w-full min-h-[100px] rounded-md border border-border p-2 text-sm\"\n                />\n              </div>\n            </div>\n\n            <div className=\"mt-4 flex items-center justify-between gap-3\">\n              <button\n                type=\"button\"\n                onClick={() => setOpenAddModal(false)}\n                className=\"w-1/2 px-4 py-2 rounded-md border border-blue-600 text-blue-600 text-sm font-medium\"\n              >\n                Cancel\n              </button>\n              <button\n                type=\"button\"\n                onClick={onSaveAddModal}\n                className=\"w-1/2 px-4 py-2 rounded-md bg-blue-600 text-white text-sm font-medium\"\n              >\n                Save\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}