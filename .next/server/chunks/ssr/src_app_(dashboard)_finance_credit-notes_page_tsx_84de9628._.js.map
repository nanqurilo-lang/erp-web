{"version":3,"sources":["turbopack:///[project]/src/app/(dashboard)/finance/credit-notes/page.tsx","turbopack:///[project]/src/app/(dashboard)/finance/credit-notes/components/EditCreditNoteModal.tsx"],"sourcesContent":["// src/app/finance/credit-notes/page.tsx\r\n\"use client\";\r\n\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Image from \"next/image\";\r\nimport { MoreHorizontal, Eye, Edit, Trash2, X } from \"lucide-react\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from \"@/components/ui/table\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport EditCreditNoteModal, {\r\n  CreditNoteShape,\r\n} from \"../credit-notes/components/EditCreditNoteModal\";\r\n\r\nconst API_BASE =  `${process.env.NEXT_PUBLIC_MAIN}`;\r\n\r\ntype Company = {\r\n  companyName?: string;\r\n  companyLogoUrl?: string | null;\r\n};\r\n\r\ntype Client = {\r\n  clientId?: string;\r\n  name?: string;\r\n  email?: string;\r\n  company?: Company | null;\r\n  profilePictureUrl?: string | null;\r\n};\r\n\r\ntype Project = {\r\n  projectName?: string | null;\r\n};\r\n\r\ntype CreditNote = {\r\n  id: number;\r\n  creditNoteNumber?: string;\r\n  creditNoteDate?: string | null;\r\n  currency?: string | null;\r\n  adjustment?: number | null;\r\n  adjustmentPositive?: boolean;\r\n  amount?: number | null;\r\n  fileUrl?: string | null;\r\n  client?: Client | null;\r\n  project?: Project | null;\r\n  totalAmount?: number | null;\r\n  invoiceNumber?: string | null;\r\n  tax?: number | null;\r\n  notes?: string | null;\r\n};\r\n\r\nexport default function CreditNotesPage() {\r\n  const router = useRouter();\r\n  const [creditNotes, setCreditNotes] = useState<CreditNote[]>([]);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const [clientFilter, setClientFilter] = useState<string>(\"all\");\r\n  const [openMenuFor, setOpenMenuFor] = useState<number | null>(null);\r\n\r\n  // Modal state\r\n  const [editing, setEditing] = useState<CreditNote | null>(null);\r\n  const [showModal, setShowModal] = useState<boolean>(false);\r\n\r\n  // View modal state\r\n  const [viewing, setViewing] = useState<CreditNote | null>(null);\r\n  const [showViewModal, setShowViewModal] = useState<boolean>(false);\r\n\r\n  // Filter drawer state kept as you had (if present)\r\n  const [showFilters, setShowFilters] = useState<boolean>(false);\r\n  const [projectFilter, setProjectFilter] = useState<string>(\"all\");\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function load() {\r\n      setLoading(true);\r\n      setError(null);\r\n      try {\r\n        const token = localStorage.getItem(\"accessToken\") || \"\";\r\n        const res = await fetch(`${API_BASE}/api/credit-notes/getAll`, {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n            Accept: \"application/json\",\r\n          },\r\n        });\r\n\r\n        if (!res.ok) {\r\n          throw new Error(`Failed to fetch credit note (${res.status})`);\r\n        }\r\n\r\n        const data = await res.json();\r\n        if (!mounted) return;\r\n        setCreditNotes(Array.isArray(data) ? data : []);\r\n      } catch (err: any) {\r\n        console.error(\"Credit notes fetch error:\", err);\r\n        setError(err?.message || \"Failed to load credit notes\");\r\n      } finally {\r\n        if (mounted) setLoading(false);\r\n      }\r\n    }\r\n\r\n    load();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, []);\r\n\r\n  const projects = useMemo(() => {\r\n    const map = new Map<string, string>();\r\n    for (const cn of creditNotes) {\r\n      const name = cn.project?.projectName;\r\n      if (name) {\r\n        map.set(name, name);\r\n      }\r\n    }\r\n    return [\r\n      { value: \"all\", label: \"All\" },\r\n      ...Array.from(map.values()).map((n) => ({ value: n, label: n })),\r\n    ];\r\n  }, [creditNotes]);\r\n\r\n  const filteredNotes = useMemo(() => {\r\n    return creditNotes.filter((cn) => {\r\n      if (projectFilter && projectFilter !== \"all\") {\r\n        return cn.project?.projectName === projectFilter;\r\n      }\r\n      return true;\r\n    });\r\n  }, [creditNotes, projectFilter]);\r\n\r\n  const formatDate = (d?: string | null) => {\r\n    if (!d) return \"\";\r\n    try {\r\n      return new Date(d).toLocaleDateString(\"en-GB\");\r\n    } catch {\r\n      return d;\r\n    }\r\n  };\r\n\r\n  const formatCurrency = (currency?: string | null, amount?: number | null) => {\r\n    const code = currency ?? \"USD\";\r\n    const val = Number(amount ?? 0);\r\n    try {\r\n      return new Intl.NumberFormat(undefined, {\r\n        style: \"currency\",\r\n        currency: code,\r\n        minimumFractionDigits: 2,\r\n        maximumFractionDigits: 2,\r\n      }).format(val);\r\n    } catch {\r\n      return `${code} ${val.toFixed(2)}`;\r\n    }\r\n  };\r\n\r\n  const formatNumberTwo = (n?: number | null) => {\r\n    const val = Number(n ?? 0);\r\n    return val.toFixed(2);\r\n  };\r\n\r\n  // OPEN view modal when View clicked (changed to open a details modal UI per your request)\r\n  const handleView = (cn: CreditNote) => {\r\n    setViewing(cn);\r\n    setShowViewModal(true);\r\n    setOpenMenuFor(null);\r\n  };\r\n\r\n  // OPEN modal when Edit clicked\r\n  const handleOpenEdit = (cn: CreditNote) => {\r\n    setEditing(cn);\r\n    setShowModal(true);\r\n    setOpenMenuFor(null);\r\n  };\r\n\r\n  // Receive updated CN from modal; update local list (placeholder — keep logic unchanged)\r\n  const handleUpdateFromModal = (updated: CreditNoteShape) => {\r\n    setCreditNotes((prev) =>\r\n      prev.map((p) => (p.id === updated.id ? { ...p, ...updated } : p))\r\n    );\r\n  };\r\n\r\n  const handleDelete = (cn: CreditNote) => {\r\n    if (!confirm(`Delete credit note ${cn.creditNoteNumber || cn.id}?`)) return;\r\n    setCreditNotes((prev) => prev.filter((p) => p.id !== cn.id));\r\n    alert(\"Deleted (placeholder)\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-slate-50 p-6\">\r\n      <div className=\"max-w-6xl mx-auto relative\">\r\n        <div className=\"mb-6\">\r\n          <h2 className=\"text-2xl font-semibold text-slate-900\">Credit Note</h2>\r\n        </div>\r\n\r\n        {/* Filter bar */}\r\n        <div className=\"bg-white border rounded-md mb-4 p-4 flex items-center gap-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"text-sm text-slate-600 font-medium\">Duration</div>\r\n            <div className=\"text-sm text-slate-500\">Start Date to End Date</div>\r\n          </div>\r\n\r\n          <div>\r\n            <Select\r\n              onValueChange={(v) => setClientFilter(v)}\r\n              value={clientFilter}\r\n            >\r\n              <SelectTrigger className=\"w-36 h-9\">\r\n                <SelectValue placeholder=\"All\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"all\">All</SelectItem>\r\n                <SelectItem value=\"clientA\">Client A</SelectItem>\r\n                <SelectItem value=\"clientB\">Client B</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n\r\n          <div className=\"ml-auto flex items-center gap-3\">\r\n            <button\r\n              onClick={() => setShowFilters(true)}\r\n              className=\"flex items-center gap-2 text-sm text-slate-700 px-3 py-1 rounded hover:bg-slate-50\"\r\n              title=\"Filters\"\r\n            >\r\n              <span>Filters</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Main table container */}\r\n        <div className=\"bg-white border rounded-lg shadow-sm overflow-hidden\">\r\n          {loading ? (\r\n            <div className=\"p-8 text-center text-slate-600\">\r\n              Loading credit notes...\r\n            </div>\r\n          ) : error ? (\r\n            <div className=\"p-8 text-center text-red-500\">Error: {error}</div>\r\n          ) : (\r\n            <Table>\r\n              <TableHeader>\r\n                <TableRow className=\"bg-transparent\">\r\n                  <TableHead className=\"pl-6\">Credit Note</TableHead>\r\n                  <TableHead>Invoice</TableHead>\r\n                  <TableHead>Client</TableHead>\r\n                  <TableHead className=\"text-center\">Total</TableHead>\r\n                  <TableHead>Credit Note Date</TableHead>\r\n                  <TableHead className=\"pr-6\">Action</TableHead>\r\n                </TableRow>\r\n              </TableHeader>\r\n\r\n              <TableBody>\r\n                {filteredNotes.length === 0 ? (\r\n                  <TableRow>\r\n                    <TableCell\r\n                      colSpan={6}\r\n                      className=\"text-center py-8 text-slate-500\"\r\n                    >\r\n                      No credit notes found\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ) : (\r\n                  filteredNotes.map((cn) => (\r\n                    <TableRow key={cn.id} className=\"even:bg-white/50\">\r\n                      {/* Credit Note */}\r\n                      <TableCell className=\"pl-6 align-middle\">\r\n                        <div className=\"font-medium text-sm\">\r\n                          {cn.creditNoteNumber || `CN-${cn.id}`}\r\n                        </div>\r\n                      </TableCell>\r\n\r\n                      {/* Invoice */}\r\n                      <TableCell className=\"align-middle\">\r\n                        <div className=\"text-sm text-slate-600\">\r\n                          {cn.invoiceNumber || \"INV#014\"}\r\n                        </div>\r\n                      </TableCell>\r\n\r\n                      {/* Client */}\r\n                      <TableCell className=\"align-middle\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                          {cn.client?.profilePictureUrl ||\r\n                          cn.client?.company?.companyLogoUrl ? (\r\n                            <Image\r\n                              src={\r\n                                cn.client?.profilePictureUrl ??\r\n                                cn.client?.company?.companyLogoUrl ??\r\n                                \"\"\r\n                              }\r\n                              alt={cn.client?.name || \"logo\"}\r\n                              width={32}\r\n                              height={32}\r\n                              className=\"rounded-full object-cover\"\r\n                            />\r\n                          ) : (\r\n                            <div className=\"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-600\">\r\n                              {cn.client?.name\r\n                                ? cn.client.name.charAt(0).toUpperCase()\r\n                                : \"S\"}\r\n                            </div>\r\n                          )}\r\n\r\n                          <div>\r\n                            <div className=\"font-medium text-sm\">\r\n                              {cn.client?.name || \"Unknown\"}\r\n                            </div>\r\n                            <div className=\"text-xs text-slate-400\">\r\n                              {cn.project?.projectName || \"\"}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </TableCell>\r\n\r\n                      {/* Total */}\r\n                      <TableCell className=\"text-center align-middle\">\r\n                        <div>\r\n                          <div className=\"text-sm font-semibold\">\r\n                            Total :{\" \"}\r\n                            <span className=\"font-semibold\">\r\n                              {formatCurrency(\r\n                                cn.currency,\r\n                                cn.totalAmount ?? cn.amount ?? 0\r\n                              )}\r\n                            </span>\r\n                          </div>\r\n\r\n                          <div className=\"mt-1 text-sm\">\r\n                            <span className=\"text-amber-600 font-medium\">\r\n                              Adjustment :{\" \"}\r\n                            </span>\r\n                            <span className=\"text-slate-700\">\r\n                              {formatNumberTwo(cn.adjustment)}\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                      </TableCell>\r\n\r\n                      {/* Date */}\r\n                      <TableCell className=\"align-middle\">\r\n                        <div className=\"text-sm\">\r\n                          {formatDate(cn.creditNoteDate)}\r\n                        </div>\r\n                      </TableCell>\r\n\r\n                      {/* Action */}\r\n                      <TableCell className=\"pr-6 align-middle\">\r\n                        <div className=\"flex justify-between relative\">\r\n                          <button\r\n                            onClick={() =>\r\n                              setOpenMenuFor(\r\n                                openMenuFor === cn.id ? null : cn.id\r\n                              )\r\n                            }\r\n                            className=\"p-1 rounded hover:bg-slate-100\"\r\n                            title=\"More\"\r\n                          >\r\n                            <MoreHorizontal className=\"w-5 h-5 text-slate-600\" />\r\n                          </button>\r\n\r\n                          {openMenuFor === cn.id && (\r\n                            <div\r\n                              className=\"absolute right-0 top-8 z-30 bg-white border rounded-md shadow-md w-40\"\r\n                              onMouseLeave={() => setOpenMenuFor(null)}\r\n                            >\r\n                              <button\r\n                                className=\"w-full text-left px-3 py-2 hover:bg-slate-50 flex items-center gap-2\"\r\n                                onClick={() => {\r\n                                  // Show the detail modal (UI like the attached image)\r\n                                  handleView(cn);\r\n                                }}\r\n                              >\r\n                                <Eye className=\"w-4 h-4\" />\r\n                                <span className=\"text-sm\">View</span>\r\n                              </button>\r\n\r\n                              <button\r\n                                className=\"w-full text-left px-3 py-2 hover:bg-slate-50 flex items-center gap-2\"\r\n                                onClick={() => {\r\n                                  // Open the edit modal (new behavior but purely UI)\r\n                                  handleOpenEdit(cn);\r\n                                }}\r\n                              >\r\n                                <Edit className=\"w-4 h-4\" />\r\n                                <span className=\"text-sm\">Edit</span>\r\n                              </button>\r\n\r\n                              <button\r\n                                className=\"w-full text-left px-3 py-2 hover:bg-slate-50 flex items-center gap-2 text-red-600\"\r\n                                onClick={() => {\r\n                                  setOpenMenuFor(null);\r\n                                  handleDelete(cn);\r\n                                }}\r\n                              >\r\n                                <Trash2 className=\"w-4 h-4\" />\r\n                                <span className=\"text-sm\">Delete</span>\r\n                              </button>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))\r\n                )}\r\n              </TableBody>\r\n            </Table>\r\n          )}\r\n        </div>\r\n\r\n        {/* Filters Drawer (simple) */}\r\n        {showFilters && (\r\n          <>\r\n            <div\r\n              className=\"fixed inset-0 bg-black/30 z-40\"\r\n              onClick={() => setShowFilters(false)}\r\n            />\r\n            <aside className=\"fixed right-0 top-0 h-full w-80 bg-white border-l z-50 flex flex-col\">\r\n              <div className=\"flex items-center justify-between p-4 border-b\">\r\n                <h3 className=\"font-medium text-slate-800\">Filters</h3>\r\n                <button\r\n                  onClick={() => setShowFilters(false)}\r\n                  className=\"p-1 rounded hover:bg-slate-100\"\r\n                >\r\n                  X\r\n                </button>\r\n              </div>\r\n              <div className=\"p-4 flex-1 overflow-auto\">\r\n                <div className=\"mb-4\">\r\n                  <label className=\"block text-sm font-medium text-slate-700 mb-2\">\r\n                    Project\r\n                  </label>\r\n                  <Select\r\n                    value={projectFilter}\r\n                    onValueChange={(v) => setProjectFilter(v)}\r\n                  >\r\n                    <SelectTrigger className=\"w-full h-9\">\r\n                      <SelectValue placeholder=\"All\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      {projects.map((p) => (\r\n                        <SelectItem key={p.value} value={p.value}>\r\n                          {p.label}\r\n                        </SelectItem>\r\n                      ))}\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n              </div>\r\n              <div className=\"p-4 border-t\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <button\r\n                    onClick={() => {\r\n                      setProjectFilter(\"all\");\r\n                      setShowFilters(false);\r\n                    }}\r\n                    className=\"px-4 py-2 border rounded text-sm text-slate-700 hover:bg-slate-50\"\r\n                  >\r\n                    Clear\r\n                  </button>\r\n                  <button\r\n                    onClick={() => setShowFilters(false)}\r\n                    className=\"px-4 py-2 bg-slate-800 text-white rounded text-sm\"\r\n                  >\r\n                    Apply\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </aside>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {/* Edit Credit Note Modal (separate file) */}\r\n      <EditCreditNoteModal\r\n        open={showModal}\r\n        creditNote={editing ?? undefined}\r\n        onClose={() => {\r\n          setShowModal(false);\r\n          setEditing(null);\r\n        }}\r\n        onUpdate={(updated) => {\r\n          // update local list (UI only) — keep behavior unchanged otherwise\r\n          setCreditNotes((prev) =>\r\n            prev.map((p) => (p.id === updated.id ? { ...p, ...updated } : p))\r\n          );\r\n        }}\r\n      />\r\n\r\n      {/* View Credit Note Modal (new, matches the UI in the attached image) */}\r\n      {showViewModal && viewing && (\r\n        <ViewCreditNoteModal\r\n          open={showViewModal}\r\n          creditNote={viewing}\r\n          onClose={() => {\r\n            setShowViewModal(false);\r\n            setViewing(null);\r\n          }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * ViewCreditNoteModal\r\n * - Renders a details panel/modal matching the screenshot you provided.\r\n * - Does not change other behaviors of the page; it's purely a UI viewer.\r\n */\r\nfunction ViewCreditNoteModal({\r\n  open,\r\n  creditNote,\r\n  onClose,\r\n}: {\r\n  open: boolean;\r\n  creditNote: CreditNote | null;\r\n  onClose: () => void;\r\n}) {\r\n  if (!open || !creditNote) return null;\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"fixed inset-0 bg-black/40 z-50\"\r\n        onClick={onClose}\r\n        aria-hidden\r\n      />\r\n      <div\r\n        className=\"fixed inset-0 z-50 flex items-start justify-center pt-12 px-4\"\r\n        role=\"dialog\"\r\n        aria-modal=\"true\"\r\n        onClick={onClose}\r\n      >\r\n        <div\r\n          className=\"bg-white w-full max-w-4xl rounded-lg shadow-lg overflow-hidden\"\r\n          onClick={(e) => e.stopPropagation()}\r\n        >\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between px-6 py-4 border-b\">\r\n            <h3 className=\"text-lg font-semibold text-slate-900\">\r\n              Credit Note Details\r\n            </h3>\r\n            <button\r\n              onClick={onClose}\r\n              className=\"p-1 rounded hover:bg-slate-100\"\r\n              aria-label=\"Close\"\r\n            >\r\n              <X className=\"w-5 h-5 text-slate-600\" />\r\n            </button>\r\n          </div>\r\n\r\n          {/* Content area */}\r\n          <div className=\"p-6\">\r\n            <div className=\"border rounded-md p-5 bg-white\">\r\n              <div className=\"grid grid-cols-12 gap-y-4 gap-x-6\">\r\n                {/* Labels column (left) */}\r\n                <div className=\"col-span-4 text-sm text-slate-600 space-y-6\">\r\n                  <div className=\"py-1\">Credit Note #</div>\r\n                  <div className=\"py-1\">Credit Note Date</div>\r\n                  <div className=\"py-1\">Client</div>\r\n                  <div className=\"py-1\">Project</div>\r\n                  <div className=\"py-1\">Invoice Amount</div>\r\n                  <div className=\"py-1\">Adjustment</div>\r\n                  <div className=\"py-1\">Tax</div>\r\n                  <div className=\"py-1\">Note</div>\r\n                  <div className=\"py-1\">File</div>\r\n                </div>\r\n\r\n                {/* Values column (right) */}\r\n                <div className=\"col-span-8 text-sm text-slate-800 space-y-6\">\r\n                  <div className=\"py-1 font-medium\">\r\n                    {creditNote.creditNoteNumber || `CN-${creditNote.id}`}\r\n                  </div>\r\n\r\n                  <div className=\"py-1\">\r\n                    {creditNote.creditNoteDate\r\n                      ? new Date(creditNote.creditNoteDate).toLocaleDateString(\r\n                          \"en-GB\"\r\n                        )\r\n                      : \"\"}\r\n                  </div>\r\n\r\n                  <div className=\"py-1\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      {creditNote.client?.profilePictureUrl ||\r\n                      creditNote.client?.company?.companyLogoUrl ? (\r\n                        <Image\r\n                          src={\r\n                            creditNote.client?.profilePictureUrl ??\r\n                            creditNote.client?.company?.companyLogoUrl ??\r\n                            \"\"\r\n                          }\r\n                          alt={creditNote.client?.name ?? \"client\"}\r\n                          width={32}\r\n                          height={32}\r\n                          className=\"rounded-full object-cover\"\r\n                        />\r\n                      ) : (\r\n                        <div className=\"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-600\">\r\n                          {creditNote.client?.name\r\n                            ? creditNote.client.name.charAt(0).toUpperCase()\r\n                            : \"S\"}\r\n                        </div>\r\n                      )}\r\n                      <div>\r\n                        <div className=\"font-medium\">\r\n                          {creditNote.client?.name ?? \"Unknown\"}\r\n                        </div>\r\n                        <div className=\"text-xs text-slate-400\">\r\n                          {creditNote.client?.company?.companyName ?? \"\"}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"py-1\">\r\n                    {creditNote.project?.projectName ?? \"\"}\r\n                  </div>\r\n\r\n                  <div className=\"py-1\">\r\n                    {formatCurrencySafe(creditNote.currency, creditNote.amount)}\r\n                  </div>\r\n\r\n                  <div className=\"py-1\">\r\n                    {formatCurrencySafe(\r\n                      creditNote.currency,\r\n                      creditNote.adjustment\r\n                    )}{\" \"}\r\n                    <span className=\"text-slate-400\">\r\n                      ({creditNote.adjustmentPositive ? \"Add\" : \"Subtract\"})\r\n                    </span>\r\n                  </div>\r\n\r\n                  <div className=\"py-1\">\r\n                    {creditNote.tax != null\r\n                      ? `${Number(creditNote.tax).toFixed(0)} %`\r\n                      : \"\"}\r\n                  </div>\r\n\r\n                  <div className=\"py-1 text-slate-600\">\r\n                    {creditNote.notes ?? \"\"}\r\n                  </div>\r\n\r\n                  <div className=\"py-1\">\r\n                    {creditNote.fileUrl ? (\r\n                      <div className=\"relative inline-block\">\r\n                        <div className=\"w-40 h-24 border rounded overflow-hidden bg-slate-50\">\r\n                          {/* Use next/image for the thumbnail if possible */}\r\n                          <Image\r\n                            src={creditNote.fileUrl}\r\n                            alt=\"attachment\"\r\n                            width={160}\r\n                            height={96}\r\n                            className=\"object-cover w-full h-full\"\r\n                          />\r\n                        </div>\r\n\r\n                        <a\r\n                          href={creditNote.fileUrl}\r\n                          target=\"_blank\"\r\n                          rel=\"noreferrer\"\r\n                          className=\"absolute right-0 -top-3 bg-white border rounded-full p-1 shadow hover:bg-slate-100\"\r\n                          title=\"Download\"\r\n                        >\r\n                          <svg\r\n                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                            className=\"h-4 w-4 text-slate-600\"\r\n                            viewBox=\"0 0 20 20\"\r\n                            fill=\"currentColor\"\r\n                          >\r\n                            <path\r\n                              fillRule=\"evenodd\"\r\n                              d=\"M3 14a1 1 0 011-1h3v2H5v1h10v-1h-2v-2h3a1 1 0 011 1v3a1 1 0 01-1 1H4a1 1 0 01-1-1v-3zM9 3a1 1 0 00-1 1v6H6l4 4 4-4h-2V4a1 1 0 00-1-1H9z\"\r\n                              clipRule=\"evenodd\"\r\n                            />\r\n                          </svg>\r\n                        </a>\r\n                      </div>\r\n                    ) : (\r\n                      <div className=\"text-slate-400\">No file attached</div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Footer (close only) */}\r\n          <div className=\"flex items-center justify-end gap-3 px-6 py-4 border-t\">\r\n            <button\r\n              onClick={onClose}\r\n              className=\"px-4 py-2 rounded border hover:bg-slate-50\"\r\n            >\r\n              Close\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\n/** Helper local-only formatting used inside modal (kept here so file is standalone) */\r\nfunction formatCurrencySafe(currency?: string | null, amount?: number | null) {\r\n  const code = currency ?? \"USD\";\r\n  const val = Number(amount ?? 0);\r\n  try {\r\n    return new Intl.NumberFormat(undefined, {\r\n      style: \"currency\",\r\n      currency: code,\r\n      minimumFractionDigits: 2,\r\n      maximumFractionDigits: 2,\r\n    }).format(val);\r\n  } catch {\r\n    return `${code} ${val.toFixed(2)}`;\r\n  }\r\n}\r\n","// src/components/credit-notes/EditCreditNoteModal.tsx\r\n\"use client\";\r\n\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport Image from \"next/image\";\r\nimport { X } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\n\r\ntype Company = {\r\n  companyName?: string;\r\n  companyLogoUrl?: string | null;\r\n};\r\n\r\ntype Client = {\r\n  clientId?: string;\r\n  name?: string;\r\n  email?: string;\r\n  company?: Company | null;\r\n  profilePictureUrl?: string | null;\r\n};\r\n\r\ntype Project = {\r\n  projectName?: string | null;\r\n};\r\n\r\nexport type CreditNoteShape = {\r\n  id: number;\r\n  creditNoteNumber?: string;\r\n  creditNoteDate?: string | null;\r\n  currency?: string | null;\r\n  adjustment?: number | null;\r\n  adjustmentPositive?: boolean;\r\n  amount?: number | null;\r\n  tax?: number | null;\r\n  notes?: string | null;\r\n  fileUrl?: string | null;\r\n  client?: Client | null;\r\n  project?: Project | null;\r\n  totalAmount?: number | null;\r\n  invoiceNumber?: string | null;\r\n};\r\n\r\nexport default function EditCreditNoteModal({\r\n  open,\r\n  creditNote,\r\n  onClose,\r\n  onUpdate,\r\n}: {\r\n  open: boolean;\r\n  creditNote?: CreditNoteShape | null;\r\n  onClose: () => void;\r\n  onUpdate?: (updated: CreditNoteShape) => void;\r\n}) {\r\n  // Local editable state initialised from creditNote prop\r\n  const [creditNoteNumber, setCreditNoteNumber] = useState<string>(\"\");\r\n  const [creditNoteDate, setCreditNoteDate] = useState<string>(\"\");\r\n  const [currency, setCurrency] = useState<string>(\"USD\");\r\n  const [invoiceAmount, setInvoiceAmount] = useState<number>(0);\r\n  const [adjustment, setAdjustment] = useState<number>(0);\r\n  const [adjustAdd, setAdjustAdd] = useState<boolean>(true);\r\n  const [taxPercent, setTaxPercent] = useState<number>(0);\r\n  const [notes, setNotes] = useState<string>(\"\");\r\n\r\n  useEffect(() => {\r\n    if (!creditNote) return;\r\n    setCreditNoteNumber(creditNote.creditNoteNumber ?? \"\");\r\n    setCreditNoteDate(creditNote.creditNoteDate ?? \"\");\r\n    setCurrency(creditNote.currency ?? \"USD\");\r\n    // invoice amount: prefer amount then totalAmount\r\n    setInvoiceAmount(Number(creditNote.amount ?? creditNote.totalAmount ?? 0));\r\n    setAdjustment(Number(creditNote.adjustment ?? 0));\r\n    setAdjustAdd(creditNote.adjustmentPositive ?? true);\r\n    setTaxPercent(Number((creditNote as any).tax ?? 0));\r\n    setNotes(creditNote.notes ?? \"\");\r\n  }, [creditNote, open]);\r\n\r\n  // Derived computed amount\r\n  const computedNet = useMemo(() => {\r\n    const base = invoiceAmount;\r\n    const adjusted = adjustAdd ? base + adjustment : base - adjustment;\r\n    const tax = (taxPercent / 100) * adjusted;\r\n    const total = adjusted + tax;\r\n    return {\r\n      adjusted,\r\n      tax,\r\n      total,\r\n    };\r\n  }, [invoiceAmount, adjustment, adjustAdd, taxPercent]);\r\n\r\n  if (!open || !creditNote) return null;\r\n\r\n  // simple close wrapper\r\n  const handleClose = () => {\r\n    onClose();\r\n  };\r\n\r\n  const handleUpdate = () => {\r\n    const updated: CreditNoteShape = {\r\n      ...creditNote,\r\n      creditNoteNumber,\r\n      creditNoteDate: creditNoteDate || creditNote.creditNoteDate,\r\n      currency,\r\n      amount: invoiceAmount,\r\n      adjustment,\r\n      adjustmentPositive: adjustAdd,\r\n      tax: taxPercent,\r\n      notes,\r\n      totalAmount: computedNet.total,\r\n    };\r\n\r\n    // Return updated object to parent (parent can call API)\r\n    onUpdate?.(updated);\r\n    onClose();\r\n  };\r\n\r\n  // Common currency options — keep editable if you want more/less\r\n  const currencyOptions = [\r\n    { value: \"USD\", label: \"USD - US Dollar\" },\r\n    { value: \"EUR\", label: \"EUR - Euro\" },\r\n    { value: \"GBP\", label: \"GBP - British Pound\" },\r\n    { value: \"USD\", label: \"USD - usan Rupee\" },\r\n    { value: \"AED\", label: \"AED - UAE Dirham\" },\r\n    { value: \"AUD\", label: \"AUD - Australian Dollar\" },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-60 flex items-start justify-center pt-10\">\r\n      {/* overlay */}\r\n      <div\r\n        className=\"absolute inset-0 bg-black/30\"\r\n        onClick={handleClose}\r\n        aria-hidden\r\n      />\r\n\r\n      <div\r\n        // ensure modal content receives pointer events and is above overlay\r\n        className=\"relative z-70 w-[900px] max-w-full bg-white rounded-lg border shadow-lg pointer-events-auto\"\r\n      >\r\n        {/* header */}\r\n        <div className=\"flex items-center justify-between p-4 border-b\">\r\n          <h3 className=\"text-lg font-semibold\">Edit Credit Note</h3>\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"p-2 rounded hover:bg-slate-100\"\r\n            aria-label=\"Close\"\r\n          >\r\n            <X className=\"w-5 h-5 text-slate-600\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* content */}\r\n        <div className=\"p-6\">\r\n          {/* Top row: credit note #, date, currency */}\r\n          <div className=\"grid grid-cols-12 gap-4 items-center\">\r\n            <div className=\"col-span-4\">\r\n              <label className=\"block text-sm text-slate-600 mb-2\">Credit Note#</label>\r\n              <div className=\"bg-slate-100 rounded px-3 py-2 text-sm text-slate-700\">{creditNoteNumber}</div>\r\n            </div>\r\n\r\n            <div className=\"col-span-4\">\r\n              <label className=\"block text-sm text-slate-600 mb-2\">Credit Note Date</label>\r\n              <input\r\n                type=\"date\"\r\n                value={creditNoteDate ?? \"\"}\r\n                onChange={(e) => setCreditNoteDate(e.target.value)}\r\n                className=\"w-full border rounded px-3 py-2 text-sm\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"col-span-4\">\r\n              <label className=\"block text-sm text-slate-600 mb-2\">Currency</label>\r\n\r\n              {/* Wrapper with high z-index so dropdown content cannot be covered by image/thumbnail */}\r\n              <div className=\"relative z-80\">\r\n                {/* Replaced text input with Select dropdown (keeps rest identical) */}\r\n                <Select value={currency} onValueChange={(v) => setCurrency(v)}>\r\n                  <SelectTrigger className=\"w-full h-9 pointer-events-auto\" aria-label=\"Select currency\">\r\n                    <SelectValue placeholder=\"Currency\" />\r\n                  </SelectTrigger>\r\n\r\n                  {/* ensure content has high z-index */}\r\n                  <SelectContent className=\"z-90\">\r\n                    {currencyOptions.map((c) => (\r\n                      <SelectItem key={c.value} value={c.value}>\r\n                        {c.label}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Client / Project row */}\r\n          <div className=\"mt-6 border-t pt-4 grid grid-cols-12 gap-4\">\r\n            <div className=\"col-span-6\">\r\n              <div className=\"text-sm text-slate-600 mb-2\">Client</div>\r\n              <div className=\"flex items-center gap-3\">\r\n                {creditNote.client?.profilePictureUrl ? (\r\n                  <Image\r\n                    src={creditNote.client.profilePictureUrl}\r\n                    alt={creditNote.client.name || \"client\"}\r\n                    width={36}\r\n                    height={36}\r\n                    className=\"rounded-full object-cover\"\r\n                  />\r\n                ) : creditNote.client?.company?.companyLogoUrl ? (\r\n                  <Image\r\n                    src={creditNote.client.company.companyLogoUrl}\r\n                    alt={creditNote.client.name || \"client\"}\r\n                    width={36}\r\n                    height={36}\r\n                    className=\"rounded-full object-cover\"\r\n                  />\r\n                ) : (\r\n                  <div className=\"w-9 h-9 rounded-full bg-slate-100 flex items-center justify-center text-slate-600\">\r\n                    {creditNote.client?.name ? creditNote.client.name.charAt(0).toUpperCase() : \"C\"}\r\n                  </div>\r\n                )}\r\n\r\n                <div>\r\n                  <div className=\"font-medium text-sm\">{creditNote.client?.name || \"--\"}</div>\r\n                  <div className=\"text-xs text-slate-400\">{creditNote.client?.company?.companyName ?? \"\"}</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"col-span-6\">\r\n              <div className=\"text-sm text-slate-600 mb-2\">Project</div>\r\n              <div className=\"text-sm text-slate-800\">{creditNote.project?.projectName ?? \"--\"}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Invoice / Adjustment / Tax row */}\r\n          <div className=\"mt-6 border-t pt-4 rounded-md\">\r\n            <div className=\"flex\">\r\n              {/* left: invoice amount box */}\r\n              <div className=\"flex-1 p-4\">\r\n                <div className=\"text-sm text-slate-600\">Invoice Amount</div>\r\n                <div className=\"mt-2 text-xl font-semibold\">\r\n                  {currency}{\" \"}\r\n                  {invoiceAmount.toLocaleString(undefined, {\r\n                    minimumFractionDigits: 2,\r\n                    maximumFractionDigits: 2,\r\n                  })}\r\n                </div>\r\n              </div>\r\n\r\n              {/* middle: adjustment and tax */}\r\n              <div className=\"flex-1 border-l border-r p-4\">\r\n                <div className=\"grid grid-cols-2 gap-3 items-center\">\r\n                  <div>\r\n                    <div className=\"text-sm text-slate-600\">Adjustment</div>\r\n                    <input\r\n                      type=\"number\"\r\n                      step=\"0.01\"\r\n                      value={adjustment}\r\n                      onChange={(e) => setAdjustment(Number(e.target.value))}\r\n                      className=\"w-full border rounded px-3 py-2 text-sm mt-1\"\r\n                      placeholder=\"0.00\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"flex flex-col items-start\">\r\n                    <div className=\"text-sm text-slate-600\">Mode</div>\r\n                    <div className=\"mt-1 flex items-center gap-3\">\r\n                      <label className={`text-sm ${!adjustAdd ? \"font-medium\" : \"text-slate-500\"}`}>Subtract</label>\r\n                      <label className=\"relative inline-flex items-center cursor-pointer\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          className=\"sr-only peer\"\r\n                          checked={adjustAdd}\r\n                          onChange={() => setAdjustAdd((s) => !s)}\r\n                        />\r\n                        <div className=\"w-10 h-5 bg-slate-200 rounded-full peer-checked:bg-slate-800 peer-checked:after:translate-x-5 after:content-[''] after:block after:w-4 after:h-4 after:bg-white after:rounded-full after:translate-x-1 after:transition-all\" />\r\n                      </label>\r\n                      <label className={`text-sm ${adjustAdd ? \"font-medium\" : \"text-slate-500\"}`}>Add</label>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"col-span-2 mt-3\">\r\n                    <div className=\"text-sm text-slate-600\">Tax (%)</div>\r\n                    <input\r\n                      type=\"number\"\r\n                      step=\"0.01\"\r\n                      value={taxPercent}\r\n                      onChange={(e) => setTaxPercent(Number(e.target.value))}\r\n                      className=\"w-24 border rounded px-3 py-2 text-sm mt-1\"\r\n                      placeholder=\"0\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* right: computed amount */}\r\n              <div className=\"w-48 bg-slate-50 p-4 flex flex-col items-center justify-center\">\r\n                <div className=\"text-sm text-slate-600\">Amount</div>\r\n                <div className=\"mt-2 text-lg font-semibold\">\r\n                  {currency}{\" \"}\r\n                  {computedNet.total.toLocaleString(undefined, {\r\n                    minimumFractionDigits: 2,\r\n                    maximumFractionDigits: 2,\r\n                  })}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Note */}\r\n          <div className=\"mt-6\">\r\n            <label className=\"block text-sm text-slate-600 mb-2\">Note for the recipient</label>\r\n            <textarea\r\n              value={notes}\r\n              onChange={(e) => setNotes(e.target.value)}\r\n              rows={4}\r\n              className=\"w-full border rounded px-3 py-2 text-sm\"\r\n              placeholder=\"--\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* footer */}\r\n        <div className=\"flex items-center justify-center gap-4 p-4 border-t\">\r\n          <Button variant=\"outline\" onClick={handleClose}>\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={handleUpdate}>Update</Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}