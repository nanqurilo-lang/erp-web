module.exports=[378269,a=>{"use strict";a.s(["default",()=>g]);var b=a.i(187924),c=a.i(572131),d=a.i(50944);let e="https://6jnqmj85-80.inc1.devtunnels.ms",f=({label:a,children:c})=>(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-600",children:a}),c]});function g(){let a=(0,d.useRouter)(),g=(0,d.useParams)().id,[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(!0),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)([]),[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)({employeeId:"",name:"",email:"",password:"",gender:"Male",birthday:"",bloodGroup:"",joiningDate:"",language:"",designationId:"",departmentId:"",reportingToId:"",role:"ROLE_EMPLOYEE",country:"",mobile:"",address:"",about:"",loginAllowed:!0,receiveEmailNotification:!1,hourlyRate:"",slackMemberId:"",skills:"",probationEndDate:"",noticePeriodStartDate:"",noticePeriodEndDate:"",employmentType:"",maritalStatus:"",businessAddress:"",officeShift:""});(0,c.useEffect)(()=>{if(!g)return;let a=localStorage.getItem("accessToken");if(!a)return;let b={Authorization:`Bearer ${a}`};Promise.all([fetch(`${e}/admin/departments`,{headers:b}).then(a=>a.json()),fetch(`${e}/admin/designations`,{headers:b}).then(a=>a.json()),fetch(`${e}/employee?page=0&size=2000`,{headers:b}).then(a=>a.json()).then(a=>a.content)]).then(([a,b,c])=>{o(a),q(b),s(c.map(a=>({employeeId:a.employeeId,name:a.name})));let d=c.find(a=>a.employeeId===g);if(!d){alert("Employee not found"),k(!1);return}u({employeeId:d.employeeId,name:d.name??"",email:d.email??"",password:"",gender:d.gender??"Male",birthday:d.birthday??"",bloodGroup:d.bloodGroup??"",joiningDate:d.joiningDate??"",language:d.language??"",designationId:d.designationId?.toString()??"",departmentId:d.departmentId?.toString()??"",reportingToId:d.reportingToId??"",role:d.role??"ROLE_EMPLOYEE",country:d.country??"",mobile:d.mobile??"",address:d.address??"",about:d.about??"",loginAllowed:d.loginAllowed??!0,receiveEmailNotification:d.receiveEmailNotification??!1,hourlyRate:d.hourlyRate?.toString()??"",slackMemberId:d.slackMemberId??"",skills:d.skills?.join(", ")??"",probationEndDate:d.probationEndDate??"",noticePeriodStartDate:d.noticePeriodStartDate??"",noticePeriodEndDate:d.noticePeriodEndDate??"",employmentType:d.employmentType??"",maritalStatus:d.maritalStatus??"",businessAddress:d.businessAddress??"",officeShift:d.officeShift??""}),k(!1)}).catch(a=>{console.error(a),k(!1),alert("Failed to load employee data")})},[g]);let v=a=>{let{name:b,value:c,type:d,checked:e}=a.target;u(a=>({...a,[b]:"checkbox"===d?e:c}))},w=async b=>{b.preventDefault(),i(!0);try{let b=localStorage.getItem("accessToken");if(!b)throw Error("No token");let c={...t,departmentId:Number(t.departmentId),designationId:Number(t.designationId),hourlyRate:Number(t.hourlyRate),skills:t.skills?t.skills.split(",").map(a=>a.trim()):[]},d=new FormData;d.append("employee",JSON.stringify(c)),l&&d.append("file",l);let f=await fetch(`${e}/employee/${g}`,{method:"PUT",headers:{Authorization:`Bearer ${b}`},body:d});if(!f.ok)throw Error("Failed to update employee");await f.json(),a.push("/hr/employee")}catch(a){alert(a.message)}finally{i(!1)}};return j?(0,b.jsx)("div",{className:"p-6",children:"Loading employee details... "}):(0,b.jsxs)("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[(0,b.jsx)("h1",{className:"text-xl font-semibold",children:"Edit Employee"}),(0,b.jsxs)("div",{className:"bg-white border rounded-xl p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-6",children:"Account Details"}),(0,b.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,b.jsx)(f,{label:"Employee ID *",children:(0,b.jsx)("input",{name:"employeeId",value:t.employeeId,disabled:!0,className:"border rounded-lg px-3 py-2 bg-gray-100"})}),(0,b.jsx)(f,{label:"Employee Name *",children:(0,b.jsx)("input",{name:"name",value:t.name,onChange:v,className:"border rounded-lg px-3 py-2",required:!0})}),(0,b.jsxs)("div",{className:"row-span-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Profile Picture"}),(0,b.jsxs)("label",{className:"mt-2 flex flex-col items-center justify-center h-36 border-2 border-dashed rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,b.jsx)("span",{className:"text-sm text-gray-400",children:"Change picture"}),(0,b.jsx)("input",{type:"file",hidden:!0,onChange:a=>m(a.target.files?.[0]||null)})]})]}),(0,b.jsx)(f,{label:"Employee Email *",children:(0,b.jsx)("input",{name:"email",value:t.email,onChange:v,className:"border rounded-lg px-3 py-2",required:!0})}),(0,b.jsx)(f,{label:"Password",children:(0,b.jsx)("input",{type:"password",name:"password",value:t.password,onChange:v,className:"border rounded-lg px-3 py-2"})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-5 gap-4",children:[(0,b.jsx)(f,{label:"Gender *",children:(0,b.jsxs)("select",{name:"gender",value:t.gender,onChange:v,className:"border rounded-lg px-3 py-2",children:[(0,b.jsx)("option",{children:"Male"}),(0,b.jsx)("option",{children:"Female"})]})}),(0,b.jsx)(f,{label:"Date of Birth *",children:(0,b.jsx)("input",{type:"date",name:"birthday",value:t.birthday||"",onChange:v,className:"border rounded-lg px-3 py-2"})}),(0,b.jsx)(f,{label:"Blood Group *",children:(0,b.jsx)("input",{name:"bloodGroup",value:t.bloodGroup,onChange:v,className:"border rounded-lg px-3 py-2"})}),(0,b.jsx)(f,{label:"Joining Date *",children:(0,b.jsx)("input",{type:"date",name:"joiningDate",value:t.joiningDate||"",onChange:v,className:"border rounded-lg px-3 py-2"})}),(0,b.jsx)(f,{label:"Language *",children:(0,b.jsx)("input",{name:"language",value:t.language,onChange:v,className:"border rounded-lg px-3 py-2"})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsx)(f,{label:"Designation *",children:(0,b.jsxs)("select",{name:"designationId",value:t.designationId,onChange:v,className:"border rounded-lg px-3 py-2",children:[(0,b.jsx)("option",{value:"",children:"Select Designation"}),p.map(a=>(0,b.jsx)("option",{value:a.id,children:a.designationName},a.id))]})}),(0,b.jsx)(f,{label:"Department *",children:(0,b.jsxs)("select",{name:"departmentId",value:t.departmentId,onChange:v,className:"border rounded-lg px-3 py-2",children:[(0,b.jsx)("option",{value:"",children:"Select Department"}),n.map(a=>(0,b.jsx)("option",{value:a.id,children:a.departmentName},a.id))]})}),(0,b.jsx)(f,{label:"Reporting To *",children:(0,b.jsxs)("select",{name:"reportingToId",value:t.reportingToId,onChange:v,className:"border rounded-lg px-3 py-2",children:[(0,b.jsx)("option",{value:"",children:"Select Manager"}),r.map(a=>(0,b.jsxs)("option",{value:a.employeeId,children:[a.name," (",a.employeeId,")"]},a.employeeId))]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsx)(f,{label:"User Role *",children:(0,b.jsxs)("select",{name:"role",value:t.role,onChange:v,className:"border rounded-lg px-3 py-2",children:[(0,b.jsx)("option",{value:"ROLE_EMPLOYEE",children:"Employee"}),(0,b.jsx)("option",{value:"ROLE_ADMIN",children:"Admin"})]})}),(0,b.jsx)(f,{label:"Country",children:(0,b.jsx)("input",{name:"country",value:t.country,onChange:v,className:"border rounded-lg px-3 py-2"})}),(0,b.jsx)(f,{label:"Mobile",children:(0,b.jsx)("input",{name:"mobile",value:t.mobile,onChange:v,className:"border rounded-lg px-3 py-2"})})]}),(0,b.jsx)(f,{label:"Address *",children:(0,b.jsx)("input",{name:"address",value:t.address,onChange:v,className:"border rounded-lg px-3 py-2"})}),(0,b.jsx)(f,{label:"About",children:(0,b.jsx)("textarea",{name:"about",value:t.about,onChange:v,className:"border rounded-lg px-3 py-2 h-24"})})]})]}),(0,b.jsxs)("div",{className:"bg-white border rounded-xl p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-6",children:"Other Details"}),(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-6",children:[(0,b.jsx)(f,{label:"Login Allowed?",children:(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsxs)("label",{children:[(0,b.jsx)("input",{type:"radio",checked:t.loginAllowed,onChange:()=>u(a=>({...a,loginAllowed:!0}))})," Yes"]}),(0,b.jsxs)("label",{children:[(0,b.jsx)("input",{type:"radio",checked:!t.loginAllowed,onChange:()=>u(a=>({...a,loginAllowed:!1}))})," No"]})]})}),(0,b.jsx)(f,{label:"Receive Email Notifications?",children:(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsxs)("label",{children:[(0,b.jsx)("input",{type:"radio",checked:t.receiveEmailNotification,onChange:()=>u(a=>({...a,receiveEmailNotification:!0}))})," Yes"]}),(0,b.jsxs)("label",{children:[(0,b.jsx)("input",{type:"radio",checked:!t.receiveEmailNotification,onChange:()=>u(a=>({...a,receiveEmailNotification:!1}))})," No"]})]})}),(0,b.jsx)(f,{label:"Hourly Rate",children:(0,b.jsx)("input",{name:"hourlyRate",value:t.hourlyRate,onChange:v,className:"border rounded-lg px-3 py-2"})}),(0,b.jsx)(f,{label:"Slack Member ID",children:(0,b.jsx)("input",{name:"slackMemberId",value:t.slackMemberId,onChange:v,className:"border rounded-lg px-3 py-2"})})]}),(0,b.jsx)(f,{label:"Skills",children:(0,b.jsx)("input",{name:"skills",value:t.skills,onChange:v,className:"border rounded-lg px-3 py-2"})}),(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-4 mt-6",children:[(0,b.jsx)(f,{label:"Probation End Date",children:(0,b.jsx)("input",{type:"date",name:"probationEndDate",value:t.probationEndDate||"",onChange:v,className:"border rounded-lg px-3 py-2"})}),(0,b.jsx)(f,{label:"Notice Period Start Date",children:(0,b.jsx)("input",{type:"date",name:"noticePeriodStartDate",value:t.noticePeriodStartDate||"",onChange:v,className:"border rounded-lg px-3 py-2"})}),(0,b.jsx)(f,{label:"Notice Period End Date",children:(0,b.jsx)("input",{type:"date",name:"noticePeriodEndDate",value:t.noticePeriodEndDate||"",onChange:v,className:"border rounded-lg px-3 py-2"})}),(0,b.jsx)(f,{label:"Employment Type",children:(0,b.jsxs)("select",{name:"employmentType",value:t.employmentType,onChange:v,className:"border rounded-lg px-3 py-2",children:[(0,b.jsx)("option",{children:"Full Time"}),(0,b.jsx)("option",{children:"Part Time"}),(0,b.jsx)("option",{children:"Contract"})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[(0,b.jsx)(f,{label:"Marital Status",children:(0,b.jsxs)("select",{name:"maritalStatus",value:t.maritalStatus,onChange:v,className:"border rounded-lg px-3 py-2",children:[(0,b.jsx)("option",{children:"Single"}),(0,b.jsx)("option",{children:"Married"})]})}),(0,b.jsx)(f,{label:"Business Address *",children:(0,b.jsx)("input",{name:"businessAddress",value:t.businessAddress,onChange:v,className:"border rounded-lg px-3 py-2"})})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,b.jsx)("button",{onClick:()=>a.back(),className:"px-6 py-2 border rounded-lg",children:"Cancel"}),(0,b.jsx)("button",{disabled:h,onClick:w,className:"px-8 py-2 bg-blue-600 text-white rounded-lg",children:h?"Updating...":"Update"})]})]})}}];

//# sourceMappingURL=src_app_%28dashboard%29_hr_employee_%5Bid%5D_edit_page_tsx_00990f5f._.js.map