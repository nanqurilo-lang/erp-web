{"version":3,"sources":["turbopack:///[project]/src/app/(dashboard)/hr/employee/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport Link from 'next/link';\n\ninterface Employee {\n  employeeId: string;\n  name: string;\n  email: string;\n  departmentName: string | null;\n  designationName: string | null;\n  role: string;\n  skills: string[];\n  active: boolean;\n}\n\nconst BASE_URL = process.env.NEXT_PUBLIC_MAIN;\n\nexport default function EmployeePage() {\n  const [employees, setEmployees] = useState<Employee[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  // filters\n  const [search, setSearch] = useState('');\n  const [status, setStatus] = useState('all');\n\n  // pagination\n  const PAGE_SIZE = 9;\n  const [page, setPage] = useState(0);\n\n  // invite modal\n  const [inviteOpen, setInviteOpen] = useState(false);\n  const [inviteEmail, setInviteEmail] = useState('');\n  const [inviteMessage, setInviteMessage] = useState('');\n  const [inviteLoading, setInviteLoading] = useState(false);\n  const [openMenuId, setOpenMenuId] = useState<string | null>(null);\n\n\n  /* ================= FETCH EMPLOYEES ================= */\n  useEffect(() => {\n    const fetchEmployees = async () => {\n      const token = localStorage.getItem('accessToken');\n      const res = await fetch(`${BASE_URL}/employee?page=0&size=200`, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      const data = await res.json();\n      setEmployees(data.content);\n      setLoading(false);\n    };\n    fetchEmployees();\n  }, []);\n\n  /* ================= INVITE API ================= */\n  const sendInvite = async () => {\n    if (!inviteEmail) {\n      alert('Email is required');\n      return;\n    }\n\n    setInviteLoading(true);\n    try {\n      const token = localStorage.getItem('accessToken');\n\n      const res = await fetch(`${BASE_URL}/employee/invite`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n          to: inviteEmail,\n          message: inviteMessage,\n        }),\n      });\n\n      if (!res.ok) throw new Error('Failed to send invite');\n\n      setInviteOpen(false);\n      setInviteEmail('');\n      setInviteMessage('');\n      alert('Invitation sent successfully');\n    } catch (err: any) {\n      alert(err.message);\n    } finally {\n      setInviteLoading(false);\n    }\n  };\n\n  /* ================= FILTER LOGIC ================= */\n  const filtered = employees.filter((e) => {\n    const matchSearch =\n      e.name.toLowerCase().includes(search.toLowerCase()) ||\n      e.email.toLowerCase().includes(search.toLowerCase()) ||\n      e.employeeId.toLowerCase().includes(search.toLowerCase());\n\n    const matchStatus =\n      status === 'all' ||\n      (status === 'active' && e.active) ||\n      (status === 'inactive' && !e.active);\n\n    return matchSearch && matchStatus;\n  });\n\n  const totalPages = Math.ceil(filtered.length / PAGE_SIZE);\n  const data = filtered.slice(page * PAGE_SIZE, (page + 1) * PAGE_SIZE);\n\n  if (loading) return <div className=\"p-6\">Loading...</div>;\n\n\n  const deleteEmployee = async (id: string) => {\n    // if (!confirm('Are you sure you want to delete this employee?')) return;\n\n    try {\n      //(\"gggggggkkkk\")\n      const token = localStorage.getItem('accessToken');\n      await fetch(`${BASE_URL}/employee/${encodeURIComponent(id)}`, {\n        method: 'DELETE',\n        headers: { Authorization: `Bearer ${token}` },\n      });\n\n      setEmployees((prev) => prev.filter((e) => e.employeeId !== id));\n    } catch {\n      alert('Failed to delete employee');\n    }\n  };\n\n\n  return (\n    <div className=\"p-6 space-y-6\">\n\n      {/* ================= FILTER ================= */}\n      <div className=\"bg-white rounded-lg border p-4 flex gap-4\">\n        <input\n          placeholder=\"Search employee...\"\n          className=\"border px-3 py-2 rounded w-64\"\n          value={search}\n          onChange={(e) => {\n            setSearch(e.target.value);\n            setPage(0);\n          }}\n        />\n\n        <select\n          className=\"border px-3 py-2 rounded\"\n          value={status}\n          onChange={(e) => {\n            setStatus(e.target.value);\n            setPage(0);\n          }}\n        >\n          <option value=\"all\">All Status</option>\n          <option value=\"active\">Active</option>\n          <option value=\"inactive\">Inactive</option>\n        </select>\n      </div>\n\n      {/* ================= ACTIONS ================= */}\n      <div className=\"flex justify-between items-center\">\n        <h1 className=\"text-xl font-semibold\">Employees</h1>\n\n        <div className=\"flex gap-3\">\n          <Link\n            href=\"/hr/employee/new\"\n            className=\"bg-blue-600 text-white px-4 py-2 rounded\"\n          >\n            + Add Employee\n          </Link>\n\n          <button\n            onClick={() => setInviteOpen(true)}\n            className=\"border px-4 py-2 rounded\"\n          >\n            + Invite Employee\n          </button>\n        </div>\n      </div>\n\n      {/* ================= TABLE ================= */}\n      <div className=\"bg-white border rounded-lg overflow-x-auto\">\n        <table className=\"w-full text-sm\">\n          <thead className=\"bg-gray-100\">\n            <tr>\n              <th className=\"p-3 text-left\">Employee ID</th>\n              <th className=\"p-3 text-left\">Name</th>\n              <th className=\"p-3 text-left\">Email</th>\n              <th className=\"p-3 text-left\">Department</th>\n              <th className=\"p-3 text-left\">Designation</th>\n              <th className=\"p-3 text-left\">Role</th>\n              <th className=\"p-3 text-left\">Status</th>\n              <th className=\"p-3 text-left\">Action</th>\n            </tr>\n          </thead>\n          <tbody>\n            {data.map((e) => (\n              <tr key={e.employeeId} className=\"border-t\">\n                <td className=\"p-3\">{e.employeeId}</td>\n                <td className=\"p-3\">{e.name}</td>\n                <td className=\"p-3\">{e.email}</td>\n                <td className=\"p-3\">{e.departmentName || '—'}</td>\n                <td className=\"p-3\">{e.designationName || '—'}</td>\n                <td className=\"p-3\">{e.role}</td>\n                <td className=\"p-3\">\n                  <span className={`px-2 py-1 text-xs rounded ${e.active ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>\n                    {e.active ? 'Active' : 'Inactive'}\n                  </span>\n                </td>\n                <td className=\"p-3 relative\">\n                  <button\n                    onClick={() =>\n                      setOpenMenuId(\n                        openMenuId === e.employeeId ? null : e.employeeId\n                      )\n                    }\n                    className=\"px-2 py-1 rounded hover:bg-gray-100\"\n                  >\n                    ⋮\n                  </button>\n\n                  {openMenuId === e.employeeId && (\n                    <div className=\"absolute right-0 mt-2 w-32 bg-white border rounded-lg shadow-lg z-50\">\n                      <Link\n                        href={`/hr/employee/${e.employeeId}`}\n                        className=\"block px-4 py-2 text-sm hover:bg-gray-100\"\n                        onClick={() => setOpenMenuId(null)}\n                      >\n                        View\n                      </Link>\n\n                      {/* <Link\n                        href={`/hr/employee/${e.employeeId}/edit`}\n                        className=\"block px-4 py-2 text-sm hover:bg-gray-100\"\n                        onClick={() => setOpenMenuId(null)}\n                      >\n                        Edit\n                      </Link> */}\n\n                      <Link\n                        href={`/hr/employee/${e.employeeId}/edit`}\n                        className=\"block px-4 py-2 text-sm hover:bg-gray-100\"\n                      >\n                        Edit\n                      </Link>\n\n                      <button\n                        onClick={() => {\n                          //(\"ggggggg\")\n                          setOpenMenuId(null);\n                          deleteEmployee(e.employeeId);\n                        }}\n                        className=\"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50\"\n                      >\n                        Delete\n                      </button>\n                    </div>\n                  )}\n                </td>\n\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      {/* ================= INVITE MODAL ================= */}\n      {inviteOpen && (\n        <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center z-50\">\n          <div className=\"bg-white w-full max-w-lg rounded-xl p-6 relative\">\n            <button\n              onClick={() => setInviteOpen(false)}\n              className=\"absolute right-4 top-4 text-gray-400 text-xl\"\n            >\n              ×\n            </button>\n\n            <h2 className=\"text-xl font-semibold mb-3\">Invite Employee</h2>\n\n            <div className=\"border rounded p-3 text-sm text-gray-600 mb-4\">\n              Employees will receive an email to log in and update their profile through the self-service portal.\n            </div>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"text-sm font-medium\">Email *</label>\n                <input\n                  className=\"w-full border rounded px-3 py-2 mt-1\"\n                  value={inviteEmail}\n                  onChange={(e) => setInviteEmail(e.target.value)}\n                />\n              </div>\n\n              <div>\n                <label className=\"text-sm font-medium\">Message</label>\n                <textarea\n                  className=\"w-full border rounded px-3 py-2 mt-1\"\n                  rows={4}\n                  placeholder=\"Add a message (optional)\"\n                  value={inviteMessage}\n                  onChange={(e) => setInviteMessage(e.target.value)}\n                />\n              </div>\n\n              <div className=\"flex justify-center mt-6\">\n                <button\n                  disabled={inviteLoading}\n                  onClick={sendInvite}\n                  className=\"bg-blue-600 text-white px-8 py-2 rounded-lg\"\n                >\n                  {inviteLoading ? 'Sending...' : 'Send Invite'}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}