{"version":3,"sources":["turbopack:///[project]/src/app/(dashboard)/settings/profile-settings/page.tsx","turbopack:///[project]/src/app/(dashboard)/settings/profile-settings/EmergencyContactsSection.tsx"],"sourcesContent":["\n// src/app/settings/profile/ProfileForm.tsx\n\"use client\";\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport Link from \"next/link\";\nimport {\n  User,\n  Mail,\n  Phone,\n  MapPin,\n  Camera,\n  Loader2,\n  Save,\n  Upload,\n  Check,\n  Plus,\n  MoreHorizontal,\n  Trash2,\n  Download\n} from \"lucide-react\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { Avatar, AvatarImage, AvatarFallback } from \"@/components/ui/avatar\";\nimport EmergencyContactsSection from \"./EmergencyContactsSection\";\n\nconst API_BASE =  `${process.env.NEXT_PUBLIC_MAIN}`;\n\ntype ProfilePayload = {\n  employeeId?: string;\n  name?: string;\n  email?: string;\n  profilePictureUrl?: string | null;\n  gender?: string;\n  birthday?: string;\n  bloodGroup?: string;\n  language?: string;\n  country?: string;\n  mobile?: string;\n  address?: string;\n  about?: string;\n  slackMemberId?: string;\n  maritalStatus?: string;\n};\n\ntype EmergencyContact = {\n  id?: number;\n  name: string;\n  email?: string;\n  mobile?: string;\n  address?: string;\n  relationship?: string;\n  employeeId?: string;\n};\n\ntype DocumentItem = {\n  id: number;\n  bucket?: string;\n  path?: string;\n  filename?: string;\n  mime?: string;\n  size?: number;\n  url?: string;\n  uploadedBy?: string;\n  uploadedAt?: string;\n  employeeId?: string;\n};\n\nexport default function ProfileForm() {\n  const fileRef = useRef<HTMLInputElement | null>(null);\n  const docFileRef = useRef<HTMLInputElement | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [saving, setSaving] = useState<boolean>(false);\n  const [message, setMessage] = useState<string>(\"\");\n  const [error, setError] = useState<string>(\"\");\n\n  const [profile, setProfile] = useState<ProfilePayload>({\n    employeeId: undefined,\n    name: \"\",\n    email: \"\",\n    profilePictureUrl: null,\n    gender: \"\",\n    birthday: \"\",\n    bloodGroup: \"\",\n    language: \"\",\n    country: \"usa\",\n    mobile: \"\",\n    address: \"\",\n    about: \"\",\n    slackMemberId: \"\",\n    maritalStatus: \"\",\n  });\n\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [preview, setPreview] = useState<string>(\"\");\n\n  // Emergency contacts state\n  const [emergencyContacts, setEmergencyContacts] = useState<EmergencyContact[]>([]);\n  const [showNewContactForm, setShowNewContactForm] = useState<boolean>(false);\n  const [newContact, setNewContact] = useState<EmergencyContact>({\n    name: \"\",\n    email: \"\",\n    mobile: \"\",\n    address: \"\",\n    relationship: \"\",\n  });\n  const [addingContact, setAddingContact] = useState<boolean>(false);\n  const [contactsError, setContactsError] = useState<string>(\"\");\n\n  // Documents state\n  const [documents, setDocuments] = useState<DocumentItem[]>([]);\n  const [docUploading, setDocUploading] = useState<boolean>(false);\n  const [docUploadError, setDocUploadError] = useState<string>(\"\");\n  const [docPreviewFile, setDocPreviewFile] = useState<File | null>(null);\n  const [docPreviewUrl, setDocPreviewUrl] = useState<string>(\"\");\n\n  // Deleting state for documents (track ids being deleted)\n  const [deletingDocIds, setDeletingDocIds] = useState<number[]>([]);\n  const [docActionError, setDocActionError] = useState<string>(\"\");\n\n  // load profile + emergency contacts + documents\n  useEffect(() => {\n    let mounted = true;\n    (async () => {\n      try {\n        const token = localStorage.getItem(\"accessToken\") || \"\";\n        const res = await fetch(`${API_BASE}/employee/me`, {\n          headers: { Authorization: `Bearer ${token}`, Accept: \"application/json\" },\n        });\n        if (!res.ok) {\n          console.warn(\"Failed to load profile\", res.status);\n          setLoading(false);\n          return;\n        }\n        const data = await res.json();\n        if (!mounted) return;\n        setProfile({\n          employeeId: data.employeeId ?? undefined,\n          name: data.name ?? \"\",\n          email: data.email ?? \"\",\n          profilePictureUrl: data.profilePictureUrl ?? null,\n          gender: data.gender ?? \"\",\n          birthday: data.birthday ?? \"\",\n          bloodGroup: data.bloodGroup ?? \"\",\n          language: data.language ?? \"\",\n          country: data.country ?? \"usa\",\n          mobile: data.mobile ?? \"\",\n          address: data.address ?? \"\",\n          about: data.about ?? \"\",\n          slackMemberId: data.slackMemberId ?? \"\",\n          maritalStatus: data.maritalStatus ?? \"\",\n        });\n        if (data.profilePictureUrl) setPreview(data.profilePictureUrl);\n\n        const tokenHeader = { Authorization: `Bearer ${token}`, Accept: \"application/json\" };\n\n        // emergency contacts\n        if (data.employeeId) {\n          try {\n            const cRes = await fetch(`${API_BASE}/employee/${encodeURIComponent(data.employeeId)}/emergency-contacts`, {\n              headers: tokenHeader,\n            });\n            if (cRes.ok) {\n              const contacts = await cRes.json();\n              if (mounted && Array.isArray(contacts)) setEmergencyContacts(contacts);\n            } else {\n              console.warn(\"Failed to load emergency contacts\", cRes.status);\n            }\n          } catch (err) {\n            console.warn(\"Error fetching emergency contacts\", err);\n          }\n\n          // documents\n          try {\n            const dRes = await fetch(`${API_BASE}/employee/${encodeURIComponent(data.employeeId)}/documents`, {\n              headers: tokenHeader,\n            });\n            if (dRes.ok) {\n              const docs = await dRes.json();\n              if (mounted && Array.isArray(docs)) setDocuments(docs);\n            } else {\n              console.warn(\"Failed to load documents\", dRes.status);\n            }\n          } catch (err) {\n            console.warn(\"Error fetching documents\", err);\n          }\n        }\n      } catch (err) {\n        console.error(\"Error loading profile:\", err);\n        setError(\"Failed to load profile\");\n      } finally {\n        if (mounted) setLoading(false);\n      }\n    })();\n    return () => {\n      mounted = false;\n    };\n  }, []);\n\n  const handleInput = (key: keyof ProfilePayload, value: any) => {\n    setProfile((p) => ({ ...p, [key]: value }));\n  };\n\n  const onPickFile = () => fileRef.current?.click();\n\n  const handleFile = (f?: File | null) => {\n    if (!f) {\n      setSelectedFile(null);\n      setPreview(profile.profilePictureUrl ?? \"\");\n      return;\n    }\n    setSelectedFile(f);\n    setPreview(URL.createObjectURL(f));\n  };\n\n  const handleFileChange: React.ChangeEventHandler<HTMLInputElement> = (e) => {\n    const f = e.target.files?.[0] ?? null;\n    handleFile(f);\n  };\n\n  /**\n   * Save profile (PUT /employee/me)\n   */\n  const handleSubmit = async (ev?: React.FormEvent) => {\n    if (ev) ev.preventDefault();\n    setError(\"\");\n    setMessage(\"\");\n\n    if (!profile.name || !profile.email) {\n      setError(\"Name and Email are required.\");\n      return;\n    }\n\n    setSaving(true);\n    try {\n      const token = localStorage.getItem(\"accessToken\") || \"\";\n\n      const employeeObj: any = {\n        name: profile.name ?? \"\",\n        email: profile.email ?? \"\",\n        gender: profile.gender ?? \"\",\n        birthday: profile.birthday ?? \"\",\n        bloodGroup: profile.bloodGroup ?? \"\",\n        language: profile.language ?? \"\",\n        country: profile.country ?? \"\",\n        mobile: profile.mobile ?? \"\",\n        address: profile.address ?? \"\",\n        about: profile.about ?? \"\",\n        slackMemberId: profile.slackMemberId ?? \"\",\n        maritalStatus: profile.maritalStatus ?? \"\",\n      };\n\n      const fd = new FormData();\n      fd.append(\"employee\", JSON.stringify(employeeObj));\n      if (selectedFile) fd.append(\"file\", selectedFile);\n\n      const res = await fetch(`${API_BASE}/employee/me`, {\n        method: \"PUT\",\n        headers: { Authorization: `Bearer ${token}` },\n        body: fd,\n      });\n\n      const json = await res.json().catch(() => ({}));\n      if (!res.ok) {\n        console.error(\"Save failed:\", res.status, json);\n        setError(json?.error || `Save failed (${res.status})`);\n        setSaving(false);\n        return;\n      }\n\n      setProfile((p) => ({\n        ...p,\n        employeeId: json.employeeId ?? p.employeeId,\n        profilePictureUrl: json.profilePictureUrl ?? p.profilePictureUrl,\n        name: json.name ?? p.name,\n        email: json.email ?? p.email,\n        gender: json.gender ?? p.gender,\n        birthday: json.birthday ?? p.birthday,\n        bloodGroup: json.bloodGroup ?? p.bloodGroup,\n        language: json.language ?? p.language,\n        country: json.country ?? p.country,\n        mobile: json.mobile ?? p.mobile,\n        address: json.address ?? p.address,\n        about: json.about ?? p.about,\n        slackMemberId: json.slackMemberId ?? p.slackMemberId,\n        maritalStatus: json.maritalStatus ?? p.maritalStatus,\n      }));\n\n      if (json.profilePictureUrl) {\n        setPreview(json.profilePictureUrl);\n        setSelectedFile(null);\n      }\n\n      setMessage(\"Profile saved successfully.\");\n      setTimeout(() => setMessage(\"\"), 3000);\n    } catch (err) {\n      console.error(\"Unexpected save error:\", err);\n      setError(\"Unexpected error while saving. See console.\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // Emergency contacts handlers (unchanged)\n  const toggleNewContactForm = () => {\n    setContactsError(\"\");\n    setShowNewContactForm((s) => !s);\n  };\n\n  const handleNewContactChange = (k: keyof EmergencyContact, v: string) => {\n    setNewContact((p) => ({ ...p, [k]: v }));\n  };\n\n  const handleAddContact = async () => {\n    setContactsError(\"\");\n    if (!newContact.name || !newContact.mobile) {\n      setContactsError(\"Name and Mobile are required for emergency contact.\");\n      return;\n    }\n    if (!profile.employeeId) {\n      setContactsError(\"Employee ID not known. Save profile first.\");\n      return;\n    }\n\n    setAddingContact(true);\n    try {\n      const token = localStorage.getItem(\"accessToken\") || \"\";\n      const url = `${API_BASE}/employee/${encodeURIComponent(profile.employeeId)}/emergency-contacts`;\n\n      const body = {\n        name: newContact.name,\n        email: newContact.email ?? \"\",\n        mobile: newContact.mobile ?? \"\",\n        address: newContact.address ?? \"\",\n        relationship: newContact.relationship ?? \"\",\n      };\n\n      const res = await fetch(url, {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(body),\n      });\n\n      const json = await res.json().catch(() => ({}));\n      if (!res.ok) {\n        console.error(\"Add contact failed:\", res.status, json);\n        setContactsError(json?.error || `Add contact failed (${res.status})`);\n        setAddingContact(false);\n        return;\n      }\n\n      setEmergencyContacts((prev) => [...prev, json]);\n      setNewContact({ name: \"\", email: \"\", mobile: \"\", address: \"\", relationship: \"\" });\n      setShowNewContactForm(false);\n    } catch (err) {\n      console.error(\"Unexpected add contact error:\", err);\n      setContactsError(\"Unexpected error while adding contact. See console.\");\n    } finally {\n      setAddingContact(false);\n    }\n  };\n\n  // Documents handlers\n  const onPickDocFile = () => docFileRef.current?.click();\n\n  const handleDocFileChange: React.ChangeEventHandler<HTMLInputElement> = (e) => {\n    const f = e.target.files?.[0] ?? null;\n    if (!f) {\n      setDocPreviewFile(null);\n      setDocPreviewUrl(\"\");\n      return;\n    }\n    setDocPreviewFile(f);\n    // For image types show preview, otherwise just show filename (we still upload)\n    if (f.type.startsWith(\"image/\")) {\n      setDocPreviewUrl(URL.createObjectURL(f));\n    } else {\n      setDocPreviewUrl(\"\");\n    }\n  };\n\n  const handleUploadDocument = async () => {\n    setDocUploadError(\"\");\n    if (!docPreviewFile) {\n      setDocUploadError(\"Please choose a file to upload.\");\n      return;\n    }\n    if (!profile.employeeId) {\n      setDocUploadError(\"Employee ID not known. Save profile first.\");\n      return;\n    }\n\n    setDocUploading(true);\n    try {\n      const token = localStorage.getItem(\"accessToken\") || \"\";\n      const url = `${API_BASE}/employee/${encodeURIComponent(profile.employeeId)}/documents`;\n      const fd = new FormData();\n      fd.append(\"file\", docPreviewFile);\n\n      const res = await fetch(url, {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n          // DO NOT set content-type\n        },\n        body: fd,\n      });\n\n      const json = await res.json().catch(() => ({}));\n      if (!res.ok) {\n        console.error(\"Document upload failed:\", res.status, json);\n        setDocUploadError(json?.error || `Upload failed (${res.status})`);\n        setDocUploading(false);\n        return;\n      }\n\n      // append to documents list\n      setDocuments((prev) => [...prev, json]);\n      // clear preview/file\n      setDocPreviewFile(null);\n      setDocPreviewUrl(\"\");\n    } catch (err) {\n      console.error(\"Unexpected document upload error:\", err);\n      setDocUploadError(\"Unexpected error while uploading document. See console.\");\n    } finally {\n      setDocUploading(false);\n    }\n  };\n\n  /**\n   * DELETE document using API:\n   * DELETE https://erp.skavosystem.com/employee/{{empId}}/documents/{{docId}}\n   */\n  const handleDeleteDocument = async (docId?: number) => {\n    setDocActionError(\"\");\n    if (!docId) {\n      setDocActionError(\"Invalid document id.\");\n      return;\n    }\n\n    // confirmation\n    const ok = confirm(\"Are you sure you want to delete this document?\");\n    if (!ok) return;\n\n    if (!profile.employeeId) {\n      setDocActionError(\"Employee ID not known. Save profile first.\");\n      return;\n    }\n\n    // mark deleting\n    setDeletingDocIds((prev) => [...prev, docId]);\n\n    try {\n      const token = localStorage.getItem(\"accessToken\") || \"\";\n      const url = `${API_BASE}/employee/${encodeURIComponent(profile.employeeId)}/documents/${encodeURIComponent(docId)}`;\n\n      const res = await fetch(url, {\n        method: \"DELETE\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n\n      if (!res.ok) {\n        const json = await res.json().catch(() => ({}));\n        console.error(\"Delete failed:\", res.status, json);\n        setDocActionError(json?.error || `Delete failed (${res.status})`);\n        // unmark deleting\n        setDeletingDocIds((prev) => prev.filter((id) => id !== docId));\n        return;\n      }\n\n      // remove from local list on success\n      setDocuments((prev) => prev.filter((d) => d.id !== docId));\n    } catch (err) {\n      console.error(\"Unexpected delete error:\", err);\n      setDocActionError(\"Unexpected error while deleting document. See console.\");\n    } finally {\n      // unmark deleting\n      setDeletingDocIds((prev) => prev.filter((id) => id !== docId));\n    }\n  };\n\n  /**\n   * Download helper:\n   * - Tries to fetch file as blob (with Authorization header).\n   * - Programmatically creates an <a> with blob URL and triggers download.\n   * - Falls back to opening URL in new tab when fetch fails (CORS / blocked).\n   */\n  const handleDownload = async (url?: string, filename?: string) => {\n    if (!url) {\n      setDocActionError(\"No file URL available to download.\");\n      return;\n    }\n    setDocActionError(\"\");\n    try {\n      const token = localStorage.getItem(\"accessToken\") || \"\";\n      const res = await fetch(url, {\n        headers: token ? { Authorization: `Bearer ${token}` } : undefined,\n      });\n\n      if (!res.ok) {\n        // fallback: open in new tab when fetch returns not-ok (e.g., 403)\n        window.open(url, \"_blank\");\n        return;\n      }\n\n      const blob = await res.blob();\n      const blobUrl = URL.createObjectURL(blob);\n      const a = document.createElement(\"a\");\n      a.href = blobUrl;\n      a.download = filename || url.split(\"/\").pop() || \"download\";\n      document.body.appendChild(a);\n      a.click();\n      a.remove();\n      setTimeout(() => URL.revokeObjectURL(blobUrl), 1500);\n    } catch (err) {\n      console.error(\"Download failed, opening in new tab:\", err);\n      // fallback: open in new tab\n      window.open(url, \"_blank\");\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center p-8\">\n        <div className=\"text-center\">\n          <Loader2 className=\"w-8 h-8 animate-spin text-blue-600 mx-auto mb-3\" />\n          <p className=\"text-slate-600\">Loading profile...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 py-8 px-4\">\n      <div className=\"max-w-5xl mx-auto\">\n        <div className=\"mb-6\">\n          <h1 className=\"text-2xl font-semibold text-slate-900\">Settings</h1>\n          <p className=\"text-sm text-slate-600 mt-1\">Profile Details</p>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"bg-white border rounded-xl p-6 shadow-sm\">\n          {/* Profile picture */}\n          <div className=\"mb-6\">\n            <div className=\"text-sm font-medium text-slate-700 mb-2\">Profile Picture</div>\n            <div\n              onClick={onPickFile}\n              className=\"border rounded-md h-36 flex items-center justify-center cursor-pointer bg-white hover:bg-gray-50\"\n            >\n              {preview ? (\n                <div className=\"flex items-center gap-4 px-4\">\n                  <img src={preview} alt=\"profile preview\" className=\"h-24 w-24 object-cover rounded-full border\" />\n                  <div className=\"text-sm text-slate-600\">Click to change picture</div>\n                </div>\n              ) : (\n                <div className=\"text-center text-slate-400\">\n                  <svg width=\"40\" height=\"40\" viewBox=\"0 0 24 24\" fill=\"none\" className=\"mx-auto mb-2\">\n                    <path d=\"M12 3v10\" stroke=\"#9CA3AF\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                    <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\" stroke=\"#9CA3AF\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                    <path d=\"M7 10l5-5 5 5\" stroke=\"#9CA3AF\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                  </svg>\n                  <div className=\"text-sm\">Choose a file</div>\n                </div>\n              )}\n            </div>\n            <input ref={fileRef} type=\"file\" accept=\"image/*\" className=\"hidden\" onChange={handleFileChange} />\n          </div>\n\n          {/* Grid of fields similar to screenshot */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n            <div className=\"col-span-1\">\n              <label className=\"text-sm font-medium text-slate-700\">Your Name <span className=\"text-red-500\">*</span></label>\n              <Input value={profile.name || \"\"} onChange={(e) => handleInput(\"name\", e.target.value)} placeholder=\"--\" className=\"mt-1\" />\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium text-slate-700\">Date of Birth</label>\n              <Input type=\"date\" value={profile.birthday ?? \"\"} onChange={(e) => handleInput(\"birthday\", e.target.value)} className=\"mt-1\" />\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium text-slate-700\">Gender</label>\n              <select value={profile.gender ?? \"\"} onChange={(e) => handleInput(\"gender\", e.target.value)} className=\"mt-1 block w-full border rounded-md h-11 px-3\">\n                <option value=\"\">--</option>\n                <option value=\"female\">Female</option>\n                <option value=\"male\">Male</option>\n                <option value=\"other\">Other</option>\n              </select>\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium text-slate-700\">Blood Group</label>\n              <select value={profile.bloodGroup ?? \"\"} onChange={(e) => handleInput(\"bloodGroup\", e.target.value)} className=\"mt-1 block w-full border rounded-md h-11 px-3\">\n                <option value=\"\">--</option>\n                <option>O+</option>\n                <option>O-</option>\n                <option>A+</option>\n                <option>A-</option>\n                <option>B+</option>\n                <option>B-</option>\n                <option>AB+</option>\n                <option>AB-</option>\n              </select>\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium text-slate-700\">Email Id <span className=\"text-red-500\">*</span></label>\n              <Input type=\"email\" value={profile.email || \"\"} onChange={(e) => handleInput(\"email\", e.target.value)} placeholder=\"--\" className=\"mt-1\" />\n              <p className=\"text-xs text-slate-400 mt-1\">Must have at least 8 characters</p>\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium text-slate-700\">Slack Member Id</label>\n              <div className=\"flex mt-1\">\n                <span className=\"inline-flex items-center px-3 border border-r-0 rounded-l-md bg-gray-50 text-slate-600\">@</span>\n                <input value={profile.slackMemberId ?? \"\"} onChange={(e) => handleInput(\"slackMemberId\", e.target.value)} className=\"border rounded-r-md h-11 px-3 w-full\" placeholder=\"--\" />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium text-slate-700\">Marital Status</label>\n              <select value={profile.maritalStatus ?? \"\"} onChange={(e) => handleInput(\"maritalStatus\", e.target.value)} className=\"mt-1 block w-full border rounded-md h-11 px-3\">\n                <option value=\"\">--</option>\n                <option value=\"single\">Single</option>\n                <option value=\"married\">Married</option>\n                <option value=\"divorced\">Divorced</option>\n              </select>\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium text-slate-700\">Language</label>\n              <select value={profile.language ?? \"\"} onChange={(e) => handleInput(\"language\", e.target.value)} className=\"mt-1 block w-full border rounded-md h-11 px-3\">\n                <option value=\"\">--</option>\n                <option value=\"French\">French</option>\n                <option value=\"English\">English</option>\n                <option value=\"Other\">Other</option>\n              </select>\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium text-slate-700\">Country</label>\n              <select value={profile.country ?? \"usa\"} onChange={(e) => handleInput(\"country\", e.target.value)} className=\"mt-1 block w-full border rounded-md h-11 px-3\">\n                <option>usa</option>\n                <option>United States</option>\n                <option>United Kingdom</option>\n                <option>Australia</option>\n                <option>Other</option>\n              </select>\n            </div>\n\n            <div className=\"col-span-1 md:col-span-1 lg:col-span-1\">\n              <label className=\"text-sm font-medium text-slate-700\">Mobile</label>\n              <div className=\"flex mt-1\">\n                <div className=\"inline-flex items-center px-3 border rounded-l-md bg-gray-50 text-slate-600\">+370</div>\n                <input value={profile.mobile ?? \"\"} onChange={(e) => handleInput(\"mobile\", e.target.value)} className=\"border rounded-r-md h-11 px-3 w-full\" placeholder=\"--\" />\n              </div>\n            </div>\n          </div>\n\n          <div className=\"mt-4\">\n            <label className=\"text-sm font-medium text-slate-700\">Address</label>\n            <Textarea value={profile.address ?? \"\"} onChange={(e) => handleInput(\"address\", e.target.value)} className=\"mt-1 h-20\" placeholder=\"--\" />\n          </div>\n\n          <div className=\"mt-4\">\n            <label className=\"text-sm font-medium text-slate-700\">About</label>\n            <Textarea value={profile.about ?? \"\"} onChange={(e) => handleInput(\"about\", e.target.value)} className=\"mt-1 h-28\" placeholder=\"--\" />\n          </div>\n\n          {/* message / error */}\n          <div className=\"mt-4\">\n            {message && (\n              <Alert className=\"bg-green-50 border-green-200\">\n                <div className=\"flex items-center gap-2\">\n                  <Check className=\"w-4 h-4 text-green-600\" />\n                  <AlertDescription className=\"text-green-800\">{message}</AlertDescription>\n                </div>\n              </Alert>\n            )}\n            {error && (\n              <Alert variant=\"destructive\" className=\"mt-2\">\n                <AlertDescription>{error}</AlertDescription>\n              </Alert>\n            )}\n          </div>\n\n          {/* Save button */}\n          <div className=\"mt-6 flex justify-center gap-4\">\n            <Button variant=\"outline\" onClick={() => { window.location.href = \"/settings\"; }}>Cancel</Button>\n            <Button type=\"submit\" onClick={handleSubmit} disabled={saving}>\n              {saving ? (\n                <>\n                  <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                  Saving...\n                </>\n              ) : (\n                <>\n                  <Save className=\"w-4 h-4 mr-2\" />\n                  Save\n                </>\n              )}\n            </Button>\n          </div>\n        </form>\n\n        {/* Emergency Details Section */}\n\n<EmergencyContactsSection\n  employeeId={profile.employeeId}\n/>\n\n\n        {/* Documents Section (ADDED) */}\n        <div className=\"bg-white border rounded-xl p-6 shadow-sm mt-8\">\n          <div className=\"mb-4\">\n            <h2 className=\"text-lg font-semibold text-slate-900\">Documents</h2>\n            <p className=\"text-sm text-slate-600 mt-1\">Upload file</p>\n          </div>\n\n          {/* Upload area */}\n          <div\n            onClick={onPickDocFile}\n            className=\"border rounded-md h-36 flex items-center justify-center cursor-pointer bg-white hover:bg-gray-50\"\n          >\n            <div className=\"text-center text-slate-400\">\n              <svg width=\"40\" height=\"40\" viewBox=\"0 0 24 24\" fill=\"none\" className=\"mx-auto mb-2\">\n                <path d=\"M12 3v10\" stroke=\"#9CA3AF\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\" stroke=\"#9CA3AF\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                <path d=\"M7 10l5-5 5 5\" stroke=\"#9CA3AF\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n              </svg>\n              <div className=\"text-sm\">Choose a file</div>\n            </div>\n          </div>\n          <input ref={docFileRef} type=\"file\" className=\"hidden\" onChange={handleDocFileChange} />\n\n          {/* Selected file preview + upload button */}\n          {docPreviewFile && (\n            <div className=\"mt-4 flex items-center gap-4\">\n              {docPreviewUrl ? (\n                <img src={docPreviewUrl} alt=\"doc preview\" className=\"h-20 w-28 object-cover rounded-md border\" />\n              ) : (\n                <div className=\"h-20 w-28 flex items-center justify-center border rounded-md bg-gray-50 text-slate-600\">\n                  <Upload className=\"w-6 h-6\" />\n                </div>\n              )}\n              <div className=\"flex-1\">\n                <div className=\"text-sm font-medium\">{docPreviewFile.name}</div>\n                <div className=\"text-xs text-slate-500\">{Math.round(docPreviewFile.size / 1024)} KB</div>\n                <div className=\"mt-3 flex gap-2\">\n                  <Button onClick={handleUploadDocument} disabled={docUploading}>\n                    {docUploading ? \"Uploading...\" : \"Upload\"}\n                  </Button>\n                  <Button variant=\"outline\" onClick={() => { setDocPreviewFile(null); setDocPreviewUrl(\"\"); }}>\n                    Cancel\n                  </Button>\n                </div>\n                {docUploadError && <p className=\"text-sm text-red-600 mt-2\">{docUploadError}</p>}\n              </div>\n            </div>\n          )}\n\n          {/* Existing documents list */}\n          <div className=\"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4\">\n            {documents.length === 0 ? (\n              <div className=\"col-span-full text-center text-slate-500 py-6\">No documents uploaded.</div>\n            ) : (\n              documents.map((d) => {\n                const isDeleting = deletingDocIds.includes(d.id);\n                return (\n                  <div key={d.id} className=\"flex flex-col items-start gap-2\">\n                    <div className=\"w-40 h-24 bg-gray-50 rounded-md border overflow-hidden flex items-center justify-center\">\n                      {d.mime?.startsWith(\"image/\") && d.url ? (\n                        <img src={d.url} alt={d.filename} className=\"object-cover w-full h-full\" />\n                      ) : (\n                        <div className=\"text-slate-400 text-sm px-2\">{d.filename}</div>\n                      )}\n                    </div>\n                    <div className=\"text-xs text-slate-600\">{d.filename}</div>\n                    <div className=\"flex items-center gap-2\">\n                      {/* Download button triggers actual local download */}\n                      <button\n                        onClick={() => handleDownload(d.url, d.filename)}\n                        className=\"text-xs inline-flex items-center gap-1 underline\"\n                        type=\"button\"\n                      >\n                        <Download className=\"w-3 h-3\" /> Download\n                      </button>\n\n                      <a href={d.url} target=\"_blank\" rel=\"noreferrer\" className=\"text-xs underline\">Open</a>\n\n                      <button\n                        onClick={() => handleDeleteDocument(d.id)}\n                        className=\"text-xs text-red-600 inline-flex items-center gap-1\"\n                        disabled={isDeleting}\n                      >\n                        {isDeleting ? (\n                          <span className=\"inline-flex items-center gap-1\">Deleting...</span>\n                        ) : (\n                          <>\n                            <Trash2 className=\"w-3 h-3\" /> Delete\n                          </>\n                        )}\n                      </button>\n                    </div>\n                  </div>\n                );\n              })\n            )}\n          </div>\n\n          {docActionError && <p className=\"text-sm text-red-600 mt-3\">{docActionError}</p>}\n\n          {/* Save button centered like screenshot */}\n          <div className=\"mt-6 flex justify-center\">\n            <Button onClick={() => { window.location.href = \"/settings\"; }}>\n              Save\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"mt-6 text-center text-sm text-slate-500\">\n          <Link href=\"/settings\" className=\"underline\">Back to settings</Link>\n        </div>\n      </div>\n\n\n\n\n\n    </div>\n  );\n}\n","\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { Plus, MoreHorizontal } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\n\nconst API_BASE =  `${process.env.NEXT_PUBLIC_MAIN}`;\n\nexport type EmergencyContact = {\n  id?: number;\n  name: string;\n  email?: string;\n  mobile?: string;\n  address?: string;\n  relationship?: string;\n};\n\nexport default function EmergencyContactsSection({\n  employeeId,\n}: {\n  employeeId?: string;\n}) {\n  const [contacts, setContacts] = useState<EmergencyContact[]>([]);\n  const [showCreate, setShowCreate] = useState(false);\n  const [activeMenu, setActiveMenu] = useState<number | null>(null);\n\n  const [viewContact, setViewContact] = useState<EmergencyContact | null>(null);\n  const [editContact, setEditContact] = useState<EmergencyContact | null>(null);\n\n  const [form, setForm] = useState<EmergencyContact>({\n    name: \"\",\n    email: \"\",\n    mobile: \"\",\n    address: \"\",\n    relationship: \"\",\n  });\n\n  const token = () => localStorage.getItem(\"accessToken\") || \"\";\n\n  /* ================= LOAD ================= */\n  useEffect(() => {\n    if (!employeeId) return;\n    fetch(`${API_BASE}/employee/${employeeId}/emergency-contacts`, {\n      headers: { Authorization: `Bearer ${token()}` },\n    })\n      .then((r) => r.json())\n      .then(setContacts)\n      .catch(() => {});\n  }, [employeeId]);\n\n  /* ================= CREATE ================= */\n  const createContact = async () => {\n    const res = await fetch(\n      `${API_BASE}/employee/${employeeId}/emergency-contacts`,\n      {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${token()}`,\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(form),\n      }\n    );\n\n    const json = await res.json();\n    setContacts((p) => [...p, json]);\n    setShowCreate(false);\n    setForm({ name: \"\", email: \"\", mobile: \"\", address: \"\", relationship: \"\" });\n  };\n\n  /* ================= UPDATE ================= */\n  const updateContact = async () => {\n    if (!editContact?.id) return;\n\n    const res = await fetch(\n      `${API_BASE}/employee/${employeeId}/emergency-contacts/${editContact.id}`,\n      {\n        method: \"PUT\",\n        headers: {\n          Authorization: `Bearer ${token()}`,\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          name: editContact.name,\n          mobile: editContact.mobile,\n          address: editContact.address,\n          relationship: editContact.relationship,\n        }),\n      }\n    );\n\n    const json = await res.json();\n    setContacts((p) => p.map((c) => (c.id === json.id ? json : c)));\n    setEditContact(null);\n  };\n\n  /* ================= DELETE ================= */\n  const deleteContact = async (id?: number) => {\n    if (!id) return;\n    if (!confirm(\"Delete this emergency contact?\")) return;\n\n    await fetch(\n      `${API_BASE}/employee/${employeeId}/emergency-contacts/${id}`,\n      {\n        method: \"DELETE\",\n        headers: { Authorization: `Bearer ${token()}` },\n      }\n    );\n    setContacts((p) => p.filter((c) => c.id !== id));\n  };\n\n  return (\n    <div className=\"bg-white border rounded-xl p-6 shadow-sm mt-8\">\n      <div className=\"flex justify-between mb-4\">\n        <h2 className=\"text-lg font-semibold\">Emergency Details</h2>\n        <Button variant=\"outline\" onClick={() => setShowCreate(true)}>\n          <Plus className=\"w-4 h-4 mr-2\" /> Create New\n        </Button>\n      </div>\n\n      {/* ================= CREATE ================= */}\n      {showCreate && (\n        <div className=\"border rounded-md p-4 bg-slate-50 mb-4\">\n          <div className=\"grid md:grid-cols-2 gap-3\">\n            <Input placeholder=\"Name\" onChange={(e) => setForm({ ...form, name: e.target.value })} />\n            <Input placeholder=\"Email\" onChange={(e) => setForm({ ...form, email: e.target.value })} />\n            <Input placeholder=\"Mobile\" onChange={(e) => setForm({ ...form, mobile: e.target.value })} />\n            <Input placeholder=\"Relationship\" onChange={(e) => setForm({ ...form, relationship: e.target.value })} />\n            <Textarea className=\"md:col-span-2\" placeholder=\"Address\"\n              onChange={(e) => setForm({ ...form, address: e.target.value })} />\n          </div>\n          <div className=\"mt-3 flex gap-2\">\n            <Button onClick={createContact}>Add</Button>\n            <Button variant=\"outline\" onClick={() => setShowCreate(false)}>Cancel</Button>\n          </div>\n        </div>\n      )}\n\n      {/* ================= TABLE ================= */}\n      <table className=\"w-full text-sm border\">\n        <thead className=\"bg-slate-100\">\n          <tr>\n            <th className=\"p-3 text-left\">Name</th>\n            <th className=\"p-3\">Email</th>\n            <th className=\"p-3\">Mobile</th>\n            <th className=\"p-3\">Relationship</th>\n            <th className=\"p-3 text-right\">Action</th>\n          </tr>\n        </thead>\n        <tbody>\n          {contacts.map((c) => (\n            <tr key={c.id} className=\"border-t\">\n              <td className=\"p-3\">{c.name}</td>\n              <td className=\"p-3\">{c.email}</td>\n              <td className=\"p-3\">{c.mobile}</td>\n              <td className=\"p-3\">{c.relationship}</td>\n              <td className=\"p-3 text-right relative\">\n                <button onClick={() => setActiveMenu(c.id!)}>\n                  <MoreHorizontal />\n                </button>\n\n                {activeMenu === c.id && (\n                  <div className=\"absolute right-0 mt-2 bg-white border rounded shadow w-32 z-10\">\n                    <button className=\"w-full px-3 py-2 hover:bg-slate-100\"\n                      onClick={() => { setViewContact(c); setActiveMenu(null); }}>\n                      View\n                    </button>\n                    <button className=\"w-full px-3 py-2 hover:bg-slate-100\"\n                      onClick={() => { setEditContact(c); setActiveMenu(null); }}>\n                      Edit\n                    </button>\n                    <button className=\"w-full px-3 py-2 text-red-600 hover:bg-slate-100\"\n                      onClick={() => deleteContact(c.id)}>\n                      Delete\n                    </button>\n                  </div>\n                )}\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n\n      {/* ================= VIEW ================= */}\n      {viewContact && (\n        <Modal title=\"View Emergency Contact\" onClose={() => setViewContact(null)}>\n          {Object.entries(viewContact).map(([k, v]) => (\n            k !== \"id\" && (\n              <div key={k} className=\"flex mb-2\">\n                <div className=\"w-32 capitalize text-slate-500\">{k}</div>\n                <div>{v || \"--\"}</div>\n              </div>\n            )\n          ))}\n        </Modal>\n      )}\n\n      {/* ================= EDIT ================= */}\n      {editContact && (\n        <Modal title=\"Edit Emergency Contact\" onClose={() => setEditContact(null)}>\n          <div className=\"grid md:grid-cols-2 gap-3\">\n            <Input value={editContact.name}\n              onChange={(e) => setEditContact({ ...editContact, name: e.target.value })} />\n            <Input value={editContact.email} disabled />\n            <Input value={editContact.mobile}\n              onChange={(e) => setEditContact({ ...editContact, mobile: e.target.value })} />\n            <Input value={editContact.relationship}\n              onChange={(e) => setEditContact({ ...editContact, relationship: e.target.value })} />\n            <Textarea className=\"md:col-span-2\"\n              value={editContact.address}\n              onChange={(e) => setEditContact({ ...editContact, address: e.target.value })} />\n          </div>\n          <div className=\"mt-4 flex justify-end gap-2\">\n            <Button variant=\"outline\" onClick={() => setEditContact(null)}>Cancel</Button>\n            <Button onClick={updateContact}>Save</Button>\n          </div>\n        </Modal>\n      )}\n    </div>\n  );\n}\n\n/* ================= SIMPLE MODAL ================= */\nfunction Modal({ title, children, onClose }: any) {\n  return (\n    <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-xl w-[520px] p-6\">\n        <h3 className=\"font-semibold mb-4\">{title}</h3>\n        {children}\n        <div className=\"mt-4 text-right\">\n          <Button onClick={onClose}>Close</Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}