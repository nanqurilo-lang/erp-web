{"version":3,"sources":["turbopack:///[project]/src/app/(dashboard)/work/project/[id]/page.tsx","turbopack:///[project]/src/app/(dashboard)/work/project/[id]/components/OverviewSection.tsx","turbopack:///[project]/src/app/(dashboard)/work/project/components/TasksTable.tsx","turbopack:///[project]/src/app/(dashboard)/work/project/components/ProjectMembersTable.tsx","turbopack:///[project]/src/app/(dashboard)/work/project/components/TimesheetsTableNew.tsx","turbopack:///[project]/src/app/(dashboard)/work/project/components/MilestonesTable.tsx","turbopack:///[project]/src/app/(dashboard)/work/project/[id]/components/InvoicesSection.tsx","turbopack:///[project]/src/app/(dashboard)/work/project/[id]/components/PaymentsSection.tsx","turbopack:///[project]/src/app/(dashboard)/work/project/[id]/components/FilesSection.tsx","turbopack:///[project]/src/app/(dashboard)/work/project/[id]/components/NotesSection.tsx","turbopack:///[project]/src/app/(dashboard)/work/project/[id]/components/ActivitySection.tsx","turbopack:///[project]/src/app/(dashboard)/work/project/[id]/components/DiscussionSection.tsx","turbopack:///[project]/src/app/(dashboard)/work/project/[id]/components/DiscussionDetailPage.tsx"],"sourcesContent":["\n\n\n\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useParams } from \"next/navigation\";\nimport axios from \"axios\";\n\nimport OverviewSection from \"./components/OverviewSection\";\nimport InvoicesSection from \"./components/InvoicesSection\";\nimport PaymentsSection from \"./components/PaymentsSection\";\nimport FilesSection from \"./components/FilesSection\";\nimport NotesSection from \"./components/NotesSection\";\nimport ActivitySection from \"./components/ActivitySection\";\nimport DiscussionSection from \"./components/DiscussionSection\";\n\nconst MAIN = process.env.NEXT_PUBLIC_MAIN || \"\";\n\ntype TabKey =\n  | \"overview\"\n  | \"invoices\"\n  | \"payments\"\n  | \"files\"\n  | \"notes\"\n  | \"activity\"\n  | \"discussion\";\n\nexport default function ProjectDetailsPage() {\n  const params = useParams() as { id: string };\n  const projectId = params?.id;\n\n  const [project, setProject] = useState<any>(null);\n  const [metrics, setMetrics] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState<TabKey>(\"overview\");\n\n  // ---------------- FETCH PROJECT ----------------\n  useEffect(() => {\n    if (!projectId) return;\n\n    const token = localStorage.getItem(\"accessToken\") || \"\";\n\n    const fetchAll = async () => {\n      try {\n        const [pRes, mRes] = await Promise.all([\n          axios.get(`/api/work/project/${projectId}`, {\n            headers: { Authorization: `Bearer ${token}` },\n          }),\n          axios.get(`${MAIN}/projects/${projectId}/metrics`, {\n            headers: { Authorization: `Bearer ${token}` },\n          }),\n        ]);\n\n        setProject(Array.isArray(pRes.data) ? pRes.data[0] : pRes.data);\n        setMetrics(mRes.data);\n      } catch (err) {\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchAll();\n  }, [projectId]);\n\n  if (loading) {\n    return <div className=\"p-8 text-center\">Loading project...</div>;\n  }\n\n  if (!project) {\n    return <div className=\"p-8 text-center text-red-500\">Project not found</div>;\n  }\n\n  // ---------------- UI ----------------\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"max-w-7xl mx-auto px-6 py-6\">\n\n        {/* HEADER */}\n        <h1 className=\"text-3xl font-semibold text-gray-800 mb-4\">\n          {project.name}\n        </h1>\n\n        {/* TABS */}\n        <div className=\"bg-white rounded-t-xl border\">\n          <nav className=\"flex gap-6 px-6 h-14 items-center\">\n            {[\n              { key: \"overview\", label: \"Overview\" },\n              { key: \"invoices\", label: \"Invoices\" },\n              { key: \"payments\", label: \"Payments\" },\n              { key: \"files\", label: \"Files\" },\n              { key: \"notes\", label: \"Notes\" },\n              { key: \"activity\", label: \"Activity\" },\n              { key: \"discussion\", label: \"Discussion\" },\n            ].map((tab) => {\n              const isActive = activeTab === tab.key;\n              return (\n                <button\n                  key={tab.key}\n                  onClick={() => setActiveTab(tab.key as TabKey)}\n                  className={`relative text-sm font-medium py-3 ${isActive ? \"text-blue-600\" : \"text-gray-600\"\n                    }`}\n                >\n                  {tab.label}\n                  {isActive && (\n                    <span className=\"absolute -bottom-3 left-0 w-full h-0.5 bg-blue-500 rounded\" />\n                  )}\n                </button>\n              );\n            })}\n          </nav>\n        </div>\n\n        {/* TAB CONTENT */}\n        <div className=\"bg-white rounded-b-xl border border-t-0 p-6\">\n          {activeTab === \"overview\" && (\n            <OverviewSection project={project} metrics={metrics} />\n          )}\n          {activeTab === \"invoices\" && (\n            <InvoicesSection projectId={project.id} />\n          )}\n          {activeTab === \"payments\" && (\n            <PaymentsSection projectId={project.id} />\n          )}\n          {activeTab === \"files\" && (\n            <FilesSection projectId={project.id} />\n          )}\n          {activeTab === \"notes\" && (\n            <NotesSection projectId={project.id} />\n          )}\n          {activeTab === \"activity\" && (\n            <ActivitySection projectId={project.id} />\n          )}\n          {activeTab === \"discussion\" && (\n            <DiscussionSection projectId={project.id} />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","// \"use client\";\n\n// import TaskStatistics from \"./TaskStatistics\";\n// import TasksTable from \"../../components/TasksTable\";\n\n// export default function OverviewSection({ project, metrics }: any) {\n//     return (\n//         <div className=\"space-y-6\">\n\n//             {/* SUMMARY */}\n//             <div className=\"border rounded-xl p-6\">\n//                 <h3 className=\"text-lg font-medium mb-2\">Project Summary</h3>\n//                 <p className=\"text-sm text-gray-600\">\n//                     {project.summary || \"No summary available\"}\n//                 </p>\n//             </div>\n\n//             {/* STATS */}\n//             <div className=\"border rounded-xl p-6\">\n//                 <h3 className=\"text-lg font-medium mb-4\">Task Statistics</h3>\n//                 <TaskStatistics projectId={project.id} />\n//             </div>\n\n//             {/* TASK TABLE */}\n//             <div className=\"border rounded-xl p-4\">\n//                 <TasksTable projectId={project.id} />\n//             </div>\n//         </div>\n//     );\n// }\n\n\n// app/(your-route)/page.tsx\n\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useParams } from \"next/navigation\";\nimport { UserIcon } from \"@heroicons/react/24/outline\";\nimport TasksTable from \"../../components/TasksTable\";\nimport ProjectMembersTable from \"../../components/ProjectMembersTable\";\nimport TimesheetsTableNew from \"../../components/TimesheetsTableNew\";\nimport MilestonesTable from \"../../components/MilestonesTable\";\n// import { getStorage } from \"../../../../../lib/storage/storege\"; // adjust path if needed\nimport axios from \"axios\";\n\ninterface Project {\n    id: number;\n    shortCode: string;\n    name: string;\n    startDate: string;\n    deadline?: string;\n    noDeadline?: boolean;\n    category?: string;\n    client?: { name: string; profilePictureUrl?: string } | null;\n    summary?: string;\n    currency: string;\n    budget: number;\n    hoursEstimate?: number;\n    assignedEmployees?: { employeeId: string; name: string; profileUrl?: string; designation?: string; department?: string }[];\n    progressPercent?: number | null;\n    totalTimeLoggedMinutes?: number | null;\n    createdBy?: string;\n    createdAt?: string;\n    pinned?: boolean;\n    pinnedAt?: string | null;\n    archived?: boolean;\n    archivedAt?: string | null;\n}\n\ntype StatusItem = {\n    id: number;\n    name: string;\n    position?: number;\n    labelColor?: string | null;\n    projectId?: number | null;\n    createdBy?: string;\n};\n\ntype TaskItem = {\n    id: number;\n    taskStageId?: number | null;\n    taskStage?: { id?: number; name?: string } | null;\n    // other fields not needed for counting\n};\n\nconst MAIN = process.env.NEXT_PUBLIC_MAIN ;\n\n/**\n * Small helper: convert hex-like labelColor from backend to usable CSS color\n * backend sometimes returns \"88aaff11\" — we'll take first 6 hex chars (if any)\n */\nconst normalizeLabelColor = (raw?: string | null) => {\n    if (!raw) return null;\n    const hex = String(raw).replace(/[^0-9a-fA-F]/g, \"\");\n    if (hex.length >= 6) return `#${hex.slice(0, 6)}`;\n    return null;\n};\n\n/**\n * Simple name-based fallback color map\n */\nconst nameColorFallback = (name: string) => {\n    const n = name.toLowerCase();\n    if (n.includes(\"complete\") || n.includes(\"complete\")) return \"#10b981\"; // green\n    if (n.includes(\"to-do\") || n.includes(\"todo\") || n.includes(\"to do\")) return \"#f59e0b\"; // yellow\n    if (n.includes(\"doing\")) return \"#2563eb\"; // blue\n    if (n.includes(\"incomplete\")) return \"#ef4444\"; // red\n    if (n.includes(\"wait\") || n.includes(\"waiting\")) return \"#9ca3af\"; // gray\n    return \"#6b7280\"; // neutral gray\n};\n\n/**\n * Create a pie slice path (SVG) from angles in degrees\n */\nconst polarToCartesian = (cx: number, cy: number, r: number, angleInDegrees: number) => {\n    const angleUSDadians = ((angleInDegrees - 90) * Math.PI) / 180.0;\n    return {\n        x: cx + r * Math.cos(angleUSDadians),\n        y: cy + r * Math.sin(angleUSDadians),\n    };\n};\n\nconst describeArc = (cx: number, cy: number, r: number, startAngle: number, endAngle: number) => {\n    const start = polarToCartesian(cx, cy, r, endAngle);\n    const end = polarToCartesian(cx, cy, r, startAngle);\n    const largeArcFlag = endAngle - startAngle <= 180 ? \"0\" : \"1\";\n    return `M ${cx} ${cy} L ${start.x} ${start.y} A ${r} ${r} 0 ${largeArcFlag} 0 ${end.x} ${end.y} Z`;\n};\n\n/**\n * TaskStatistics component: fetches statuses + tasks, computes counts and renders pie + legend\n */\nfunction TaskStatistics({ projectId }: { projectId: number }) {\n    const [statuses, setStatuses] = useState<StatusItem[]>([]);\n    const [tasks, setTasks] = useState<TaskItem[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState<string | null>(null);\n\n    const token = localStorage.getItem(\"accessToken\") || \"\";\n\n    useEffect(() => {\n        let mounted = true;\n        const fetchAll = async () => {\n            setLoading(true);\n            setError(null);\n            try {\n                // fetch statuses\n                const statusUrl = `${MAIN}/status`;\n                const [sRes, tRes] = await Promise.all([\n                    axios.get(statusUrl, { headers: { Authorization: token ? `Bearer ${token}` : \"\" } }),\n                    axios.get(`${MAIN}/projects/${projectId}/tasks`, { headers: { Authorization: token ? `Bearer ${token}` : \"\" } }),\n                ]);\n\n                if (mounted) {\n                    setStatuses(Array.isArray(sRes.data) ? sRes.data : []);\n                    setTasks(Array.isArray(tRes.data) ? tRes.data : []);\n                }\n            } catch (err: any) {\n                console.error(\"Failed to load task statistics:\", err?.response?.data ?? err?.message ?? err);\n                if (mounted) {\n                    setError(\"Failed to load task statistics\");\n                    setStatuses([]);\n                    setTasks([]);\n                }\n            } finally {\n                if (mounted) setLoading(false);\n            }\n        };\n        fetchAll();\n        return () => {\n            mounted = false;\n        };\n    }, [projectId, token]);\n\n    // compute counts per status id (use status.id from statuses)\n    const counts = useMemo(() => {\n        const map = new Map<number | string, { status: StatusItem; count: number }>();\n\n        // seed map with statuses (so legend includes them even if count=0)\n        statuses.forEach((s) => map.set(s.id, { status: s, count: 0 }));\n\n        // For each task, try to find matching status:\n        tasks.forEach((task) => {\n            // prefer explicit taskStageId\n            const id = task.taskStageId ?? task.taskStage?.id ?? null;\n            if (id !== null && id !== undefined) {\n                const key = Array.from(map.keys()).find((k) => k === id);\n                if (key !== undefined) {\n                    const cur = map.get(key as number)!;\n                    cur.count += 1;\n                    map.set(key as number, cur);\n                    return;\n                }\n            }\n            // fallback: find by name inclusion\n            const stageName = task.taskStage?.name ?? \"\";\n            const matched = statuses.find((s) => stageName && String(s.name).toLowerCase().includes(stageName.toLowerCase()));\n            if (matched) {\n                const cur = map.get(matched.id) ?? { status: matched, count: 0 };\n                cur.count += 1;\n                map.set(matched.id, cur);\n                return;\n            }\n            // otherwise increment \"unknown\" bucket keyed by 'unknown'\n            const unknownKey = \"unknown\";\n            if (!map.has(unknownKey as any)) {\n                map.set(unknownKey as any, { status: { id: 0, name: \"Other\", labelColor: null }, count: 0 });\n            }\n            const cur = map.get(unknownKey as any)!;\n            cur.count += 1;\n            map.set(unknownKey as any, cur);\n        });\n\n        return Array.from(map.values());\n    }, [statuses, tasks]);\n\n    const total = counts.reduce((s, c) => s + c.count, 0) || 0;\n\n    // prepare slices for pie\n    let accAngle = 0;\n    const slices = counts\n        .filter((c) => c.count > 0)\n        .map((c) => {\n            const proportion = total === 0 ? 0 : c.count / total;\n            const start = accAngle;\n            const sweep = proportion * 360;\n            accAngle += sweep;\n            const color = normalizeLabelColor(c.status.labelColor) || nameColorFallback(c.status.name);\n            return {\n                ...c,\n                start,\n                end: accAngle,\n                color,\n            };\n        });\n\n    return (\n        <div>\n            {loading ? (\n                <div className=\"py-6 text-center text-gray-500\">Loading task statistics...</div>\n            ) : error ? (\n                <div className=\"py-6 text-center text-red-500\">{error}</div>\n            ) : (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <div className=\"flex items-center\">\n                        <svg viewBox=\"0 0 100 100\" width=\"180\" height=\"180\" className=\"flex-shrink-0\">\n                            {/* background circle if no data */}\n                            {slices.length === 0 && <circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"#e5e7eb\" />}\n                            {slices.map((s, idx) => (\n                                <path key={idx} d={describeArc(50, 50, 40, s.start, s.end)} fill={s.color} stroke=\"#ffffff\" strokeWidth=\"0.5\" />\n                            ))}\n                        </svg>\n                    </div>\n\n                    <div className=\"flex flex-col justify-center\">\n                        <ul className=\"space-y-3 text-sm\">\n                            {counts.map((c, idx) => {\n                                const color = normalizeLabelColor(c.status.labelColor) || nameColorFallback(c.status.name);\n                                return (\n                                    <li key={idx} className=\"flex items-center gap-3\">\n                                        <span style={{ width: 18, height: 12, background: color }} className=\"rounded-sm inline-block\" />\n                                        <span className=\"flex-1\">{c.status.name}</span>\n                                        <span className=\"text-xs text-gray-500\">{c.count}</span>\n                                    </li>\n                                );\n                            })}\n                        </ul>\n                        <div className=\"mt-4 text-xs text-gray-500\">Total tasks: {total}</div>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}\n\nexport default function ProjectDetailsPage() {\n    const params = useParams() as any;\n    const { id } = params || {};\n\n    const [project, setProject] = useState<Project | null>(null);\n    const [loading, setLoading] = useState(true);\n    const [activeTab, setActiveTab] = useState<'overview' | 'invoices' | 'payments' | 'files' | 'notes' | 'activity' | 'discussion'>('overview');\n\n    // Fetch project; fallback demo so UI always matches preview\n    const getProjectDetails = async (accessToken: string) => {\n        try {\n            const res = await fetch(`/api/work/project/${id}`, {\n                headers: accessToken ? { Authorization: `Bearer ${accessToken}` } : undefined,\n            });\n            if (!res.ok) throw new Error(\"Failed to fetch\");\n            const data = await res.json();\n            setProject(Array.isArray(data) ? data[0] : data);\n        } catch (err) {\n            // fallback demo data\n            setProject({\n                id: Number(id || 1),\n                shortCode: \"PRJ-001\",\n                name: \"Project Name\",\n                category: \"Website\",\n                startDate: \"2025-08-02\",\n                deadline: \"2025-09-12\",\n                client: { name: \"John Doe\", profilePictureUrl: \"https://i.pravatar.cc/80?img=5\" },\n                summary: \"Short description of the project and goals.\",\n                currency: \"$\",\n                budget: 0,\n                hoursEstimate: 40,\n                assignedEmployees: [\n                    { employeeId: \"1\", name: \"Aman Sharma\", designation: \"Developer\", department: \"Engineering\" },\n                    { employeeId: \"2\", name: \"Riya Singh\", designation: \"Designer\", department: \"Design\" },\n                ],\n                progressPercent: 76,\n                totalTimeLoggedMinutes: 300,\n                createdBy: \"Admin\",\n                createdAt: new Date().toISOString(),\n                pinned: false,\n                archived: false,\n            });\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        const token = localStorage.getItem(\"accessToken\") || \"\";\n        getProjectDetails(token);\n    }, [id]);\n\n    if (loading) return <p className=\"p-8 text-center\">Loading project...</p>;\n    if (!project) return <p className=\"p-8 text-center text-red-600\">Project not found</p>;\n\n    const totalHours = project.totalTimeLoggedMinutes ? Math.floor(project.totalTimeLoggedMinutes / 60) : 0;\n\n    return (\n        <div className=\"min-h-screen bg-gray-50\">\n            <div className=\"px-6 py-6\">\n                {/* Header */}\n                <div className=\"mb-4\">\n                    <h1 className=\"text-3xl font-semibold text-gray-800\">{project.name}</h1>\n                </div>\n\n                {/* Tabs container */}\n                {/* <div className=\"bg-white rounded-t-lg shadow-sm border border-b-0\">\n          <div className=\"px-4\">\n            <nav className=\"flex items-center gap-6 h-14\">\n              {[\n                { key: 'overview', label: 'Overview' },\n                { key: 'invoices', label: 'Invoices' },\n                { key: 'payments', label: 'Payments' },\n                { key: 'files', label: 'Files' },\n                { key: 'notes', label: 'Notes' },\n                { key: 'activity', label: 'Activity' },\n                { key: 'discussion', label: 'Discussion' },\n              ].map(t => {\n                const isActive = activeTab === (t.key as any);\n                return (\n                  <button\n                    key={t.key}\n                    onClick={() => setActiveTab(t.key as any)}\n                    className={`py-3 text-sm font-medium ${isActive ? 'text-blue-600' : 'text-gray-600'}`}\n                    aria-current={isActive ? 'page' : undefined}\n                  >\n                    <span className=\"relative inline-block\">\n                      {t.label}\n                      {isActive && <span className=\"absolute -bottom-5 left-0 w-full h-0.5 bg-blue-400 rounded\" />}\n                    </span>\n                  </button>\n                );\n              })}\n            </nav>\n          </div>\n          <div className=\"h-1\"><div className=\"border-t-2 border-blue-300\" /></div>\n        </div> */}\n\n                {/* Content */}\n                <div className=\"mt-6 space-y-6\">\n                    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n                        <div className=\"lg:col-span-2 bg-white rounded-xl border border-gray-200 p-6\">\n                            <div className=\"flex items-center justify-between gap-6\">\n                                <div className=\"flex items-center gap-6\">\n                                    <div className=\"w-36 h-20\">\n                                        <svg viewBox=\"0 0 100 50\" className=\"w-full h-full\">\n                                            <path d=\"M5 50 A45 45 0 0 1 95 50\" fill=\"none\" stroke=\"#e6e6e6\" strokeWidth=\"10\" strokeLinecap=\"round\" />\n                                            <path d=\"M5 50 A45 45 0 0 1 75 18\" fill=\"none\" stroke=\"#f5c518\" strokeWidth=\"10\" strokeLinecap=\"round\" />\n                                            <text x=\"50\" y=\"40\" fontSize=\"8\" textAnchor=\"middle\" fill=\"#374151\">{project.progressPercent}%</text>\n                                        </svg>\n                                    </div>\n\n                                    <div>\n                                        <p className=\"text-sm text-gray-500\">Start Date</p>\n                                        <p className=\"font-medium\">{new Date(project.startDate).toLocaleDateString()}</p>\n                                    </div>\n\n                                    <div>\n                                        <p className=\"text-sm text-gray-500\">End Date</p>\n                                        <p className=\"font-medium\">{project.noDeadline ? \"No Deadline\" : (project.deadline ? new Date(project.deadline).toLocaleDateString() : \"TBD\")}</p>\n                                    </div>\n                                </div>\n\n                                <div className=\"hidden lg:block max-w-xs text-gray-600\">\n                                    {project.summary ? <p>{project.summary}</p> : <p className=\"text-sm text-gray-400\">No summary available</p>}\n                                </div>\n                            </div>\n                        </div>\n\n                        <div className=\"bg-white rounded-xl border border-gray-200 p-4 flex items-center gap-4\">\n                            <div className=\"w-16 h-16 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center\">\n                                {project.client?.profilePictureUrl ? (\n                                    // eslint-disable-next-line @next/next/no-img-element\n                                    <img src={project.client.profilePictureUrl} alt=\"client\" className=\"w-full h-full object-cover\" />\n                                ) : (\n                                    <UserIcon className=\"w-8 h-8 text-gray-400\" />\n                                )}\n                            </div>\n                            <div>\n                                <p className=\"text-sm text-gray-500\">Client</p>\n                                <p className=\"font-medium\">{project.client?.name || `Client ID: ${project.client?.name ?? ''}`}</p>\n                                <p className=\"text-xs text-gray-400\">Qurilo Solutions</p>\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* Middle row: Task statistics + metrics */}\n                    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n                        <div className=\"lg:col-span-2 bg-white rounded-xl border border-gray-200 p-6\">\n                            <h3 className=\"text-lg font-medium mb-4\">Task Statistics</h3>\n                            <TaskStatistics projectId={project.id} />\n                        </div>\n\n                        <div className=\"space-y-4\">\n                            <div className=\"bg-white rounded-xl border border-gray-200 p-4\">\n                                <p className=\"text-sm text-gray-500\">Project Budget</p>\n                                <div className=\"text-2xl font-semibold text-blue-600 mt-2\">{project.currency}{project.budget.toFixed(2)}</div>\n                            </div>\n\n                            <div className=\"bg-white rounded-xl border border-gray-200 p-4\">\n                                <p className=\"text-sm text-gray-500\">Hours Logged</p>\n                                <div className=\"text-2xl font-semibold text-blue-600 mt-2\">{totalHours}hrs 0 min</div>\n                            </div>\n\n                            <div className=\"grid grid-cols-3 gap-3\">\n                                <div className=\"bg-white rounded-xl border border-gray-200 p-3 text-center\">\n                                    <p className=\"text-sm text-gray-500\">Earnings</p>\n                                    <div className=\"text-lg font-semibold text-blue-600 mt-1\">{project.currency}0.00</div>\n                                </div>\n                                <div className=\"bg-white rounded-xl border border-gray-200 p-3 text-center\">\n                                    <p className=\"text-sm text-gray-500\">Expenses</p>\n                                    <div className=\"text-lg font-semibold text-blue-600 mt-1\">{project.currency}0.00</div>\n                                </div>\n                                <div className=\"bg-white rounded-xl border border-gray-200 p-3 text-center\">\n                                    <p className=\"text-sm text-gray-500\">Profit</p>\n                                    <div className=\"text-lg font-semibold text-blue-600 mt-1\">{project.currency}0.00</div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* Bottom row */}\n                    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n                        <div className=\"lg:col-span-2 bg-white rounded-xl border border-gray-200 p-4\">\n                            <div className=\"mb-4\">\n                                <h4 className=\"text-lg font-medium\">Assigned Employees</h4>\n                            </div>\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                                {project.assignedEmployees && project.assignedEmployees.length ? (\n                                    project.assignedEmployees.map(emp => (\n                                        <div key={emp.employeeId} className=\"flex items-center gap-3 p-3 bg-gray-50 rounded\">\n                                            <div className=\"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center overflow-hidden\">\n                                                {emp.profileUrl ? (\n                                                    // eslint-disable-next-line @next/next/no-img-element\n                                                    <img src={emp.profileUrl} alt={emp.name} className=\"w-full h-full object-cover\" />\n                                                ) : (\n                                                    <UserIcon className=\"w-5 h-5 text-gray-400\" />\n                                                )}\n                                            </div>\n                                            <div>\n                                                <p className=\"font-medium text-sm\">{emp.name}</p>\n                                                <p className=\"text-xs text-gray-500\">{emp.designation ? emp.designation + ', ' : ''}{emp.department}</p>\n                                            </div>\n                                        </div>\n                                    ))\n                                ) : (\n                                    <p className=\"text-gray-500 text-center py-6\">No employees assigned</p>\n                                )}\n                            </div>\n                        </div>\n\n                        <div className=\"bg-white rounded-xl border border-gray-200 p-4\">\n                            <h4 className=\"text-lg font-medium mb-2\">Project Summary</h4>\n                            <div className=\"text-xs text-gray-500 space-y-2\">\n                                <div>Created by: {project.summary}</div>\n                                <div>Created on: {new Date(project.createdAt || '').toLocaleDateString()}</div>\n                                {project.pinned && <div>Pinned on: {new Date(project.pinnedAt || '').toLocaleDateString()}</div>}\n                                {project.archived && <div>Archived on: {new Date(project.archivedAt || '').toLocaleDateString()}</div>}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Keep the tasks table below as before */}\n                {project && <div className=\"mt-6\"><TasksTable projectId={project.id} /></div>}\n\n                {/* other components shown for reference */}\n                <div className=\"mt-6 grid grid-cols-1 lg:grid-rows-2 gap-2\">\n                    <ProjectMembersTable projectId={project.id} />\n                    <TimesheetsTableNew gatewayPath=\"https://erp.skavosystem.com/timesheets\" />\n                    <MilestonesTable projectId={project.id} />\n\n\n                </div>\n            </div>\n        </div>\n    );\n}","\n\n\n\n// components/TasksTable.tsx\n\"use client\";\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { UserIcon } from \"@heroicons/react/24/outline\";\nimport { deleteAPI, postAPI, putAPI } from \"@/app/api/apiHelper\";\nimport { getStorage } from \"../../../../../lib/storage/storege\";\nimport TaskViewModal, { TaskForView } from \"../components/TaskViewModal\"; // adjust path if needed\n\ntype Employee = {\n  employeeId: string;\n  name: string;\n  profileUrl?: string | null;\n};\n\ntype Label = { id: number; name: string; colorCode?: string };\ntype Milestone = { id: number; title: string };\n\ntype Task = {\n  id: number;\n  title: string;\n  projectId: number;\n  projectShortCode?: string | null;\n  projectName?: string | null;\n  startDate?: string | null;\n  dueDate?: string | null;\n  noDueDate?: boolean;\n  taskStage?: { id?: number; name?: string } | null;\n  taskStageId?: number;\n  assignedEmployeeIds?: string[];\n  assignedEmployees?: Employee[] | null;\n  description?: string | null;\n  labels?: Label[];\n  milestone?: Milestone | null;\n  milestoneId?: number | null;\n  priority?: string | null;\n  isPrivate?: boolean;\n  timeEstimateMinutes?: number | null;\n  isDependent?: boolean;\n  dependentTaskId?: number | null;\n  attachments?: any[];\n  pinned?: boolean | null;\n  hoursLoggedMinutes?: number | null;\n};\n\ntype StatusItem = {\n  id: number;\n  name: string;\n  position?: number;\n  labelColor?: string | null;\n  projectId?: number | null;\n  createdBy?: string;\n};\n\nconst MAIN = process.env.NEXT_PUBLIC_MAIN ;\n\nexport default function TasksTable({ projectId }: { projectId: number }) {\n  const [tasks, setTasks] = useState<Task[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // status list loaded from server\n  const [statuses, setStatuses] = useState<StatusItem[]>([]);\n\n  // modals / form state (kept as-is)\n  const [showCreate, setShowCreate] = useState(false);\n  const [showEdit, setShowEdit] = useState(false);\n  const [editTask, setEditTask] = useState<Task | null>(null);\n\n  // NEW: view modal state (minimal addition)\n  const [showView, setShowView] = useState(false);\n  const [viewTask, setViewTask] = useState<TaskForView | null>(null);\n\n  // separate menus for action and status (to avoid conflicts)\n  const [actionOpenFor, setActionOpenFor] = useState<number | null>(null);\n  const [statusOpenFor, setStatusOpenFor] = useState<number | null>(null);\n\n  // form helpers\n  const emptyForm = {\n    title: \"\",\n    category: \"\",\n    startDate: \"\",\n    dueDate: \"\",\n    noDueDate: false,\n    taskStageId: \"\",\n    assignedEmployeeIds: [] as string[],\n    description: \"\",\n    labelIds: [] as string[],\n    milestoneId: \"\",\n    priority: \"LOW\",\n    isPrivate: false,\n    timeEstimateMinutes: \"\",\n    isDependent: false,\n    projectId: projectId,\n    taskFile: null as File | null,\n  };\n  const [form, setForm] = useState(emptyForm);\n\n  const base = (path: string) => (MAIN ? `${MAIN}${path}` : path);\n\n  // fetch statuses from /status\n  const fetchStatuses = async () => {\n    try {\n      const url = `${MAIN}/status`;\n      const token = localStorage.getItem(\"accessToken\");\n      const res = await axios.get(url, {\n        headers: { Authorization: token ? `Bearer ${token}` : \"\" },\n      });\n      if (Array.isArray(res.data)) setStatuses(res.data);\n      else setStatuses([]);\n    } catch (err) {\n      console.warn(\"Failed to fetch statuses:\", err);\n      setStatuses([]);\n    }\n  };\n\n  // fetch tasks\n  const fetchTasks = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const token = localStorage.getItem(\"accessToken\");\n      const url = `${MAIN}/projects/${projectId}/tasks`;\n      const res = await axios.get(url, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: token ? `Bearer ${token}` : \"\",\n        },\n      });\n      setTasks(Array.isArray(res.data) ? res.data : []);\n    } catch (err: any) {\n      setError(err?.response?.data?.message || err?.message || \"Failed to load tasks\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchStatuses();\n    fetchTasks();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [projectId]);\n\n  const updateForm = (patch: Partial<typeof emptyForm>) => setForm((s) => ({ ...s, ...patch }));\n\n  // create\n  const handleCreate = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      const fd = new FormData();\n      fd.append(\"title\", form.title);\n      fd.append(\"category\", form.category || \"\");\n      fd.append(\"startDate\", form.startDate || \"\");\n      fd.append(\"dueDate\", form.dueDate || \"\");\n      fd.append(\"noDueDate\", String(form.noDueDate));\n      fd.append(\"taskStageId\", form.taskStageId || \"\");\n      fd.append(\"assignedEmployeeIds\", JSON.stringify(form.assignedEmployeeIds));\n      fd.append(\"description\", form.description || \"\");\n      fd.append(\"labelIds\", JSON.stringify(form.labelIds));\n      fd.append(\"milestoneId\", form.milestoneId || \"\");\n      fd.append(\"priority\", form.priority || \"\");\n      fd.append(\"isPrivate\", String(form.isPrivate));\n      fd.append(\"timeEstimateMinutes\", String(form.timeEstimateMinutes || \"\"));\n      fd.append(\"isDependent\", String(form.isDependent));\n      fd.append(\"projectId\", String(projectId));\n      if (form.taskFile) fd.append(\"taskFile\", form.taskFile);\n\n      await postAPI(base(\"/api/projects/tasks\"), fd, {\n        headers: { \"Content-Type\": \"multipart/form-data\" },\n      });\n\n      setShowCreate(false);\n      setForm(emptyForm);\n      await fetchTasks();\n    } catch (err: any) {\n      alert(\"Create task failed: \" + (err?.response?.data?.message || err?.message || \"unknown\"));\n    }\n  };\n\n  // edit\n  const openEdit = (t: Task) => {\n    setEditTask(t);\n    setForm({\n      title: t.title || \"\",\n      category: (t as any).categoryId?.id ? String((t as any).categoryId.id) : \"\",\n      startDate: t.startDate ? t.startDate : \"\",\n      dueDate: t.dueDate ? t.dueDate : \"\",\n      noDueDate: !!t.noDueDate,\n      taskStageId: t.taskStageId ? String(t.taskStageId) : \"\",\n      assignedEmployeeIds: t.assignedEmployeeIds || [],\n      description: t.description || \"\",\n      labelIds: (t.labels || []).map((l) => String(l.id)),\n      milestoneId: t.milestoneId ? String(t.milestoneId) : \"\",\n      priority: t.priority || \"LOW\",\n      isPrivate: !!t.isPrivate,\n      timeEstimateMinutes: t.timeEstimateMinutes ? String(t.timeEstimateMinutes) : \"\",\n      isDependent: !!t.isDependent,\n      projectId: t.projectId,\n      taskFile: null,\n    });\n    setShowEdit(true);\n  };\n\n  const handleEdit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!editTask) return;\n    try {\n      const fd = new FormData();\n      fd.append(\"title\", form.title);\n      fd.append(\"category\", form.category || \"\");\n      fd.append(\"noDueDate\", String(form.noDueDate));\n      fd.append(\"description\", form.description || \"\");\n      fd.append(\"labelIds\", JSON.stringify(form.labelIds));\n      fd.append(\"priority\", form.priority || \"\");\n      fd.append(\"isPrivate\", String(form.isPrivate));\n      fd.append(\"timeEstimateMinutes\", String(form.timeEstimateMinutes || \"\"));\n      fd.append(\"isDependent\", String(form.isDependent));\n      fd.append(\"projectId\", String(projectId));\n      fd.append(\"assignedEmployeeIds\", JSON.stringify(form.assignedEmployeeIds));\n      if (form.taskFile) fd.append(\"taskFile\", form.taskFile);\n\n      await putAPI(base(`/api/projects/tasks/${editTask.id}`), fd, {\n        headers: { \"Content-Type\": \"multipart/form-data\" },\n      });\n\n      setShowEdit(false);\n      setEditTask(null);\n      setForm(emptyForm);\n      await fetchTasks();\n    } catch (err: any) {\n      alert(\"Update task failed: \" + (err?.response?.data?.message || err?.message || \"unknown\"));\n    }\n  };\n\n  // delete\n  const handleDelete = async (taskId: number) => {\n    if (!confirm(\"Are you sure to delete this task?\")) return;\n    try {\n      await deleteAPI(base(`/api/projects/${projectId}/tasks/${taskId}`));\n      setActionOpenFor(null);\n      await fetchTasks();\n    } catch (err: any) {\n      alert(\"Delete failed: \" + (err?.response?.data?.message || err?.message || \"unknown\"));\n    }\n  };\n\n  // helper: get status item by name (case-insensitive)\n  const findStatusByName = (name: string) => {\n    if (!statuses || !statuses.length) return undefined;\n    return statuses.find((s) => String(s.name).toLowerCase().includes(String(name).toLowerCase()));\n  };\n\n  // map status name or id -> color class or inline color\n  const statusColorClass = (s?: StatusItem | string | null) => {\n    const name = typeof s === \"string\" ? s : s?.name ?? \"\";\n    switch (name.toLowerCase()) {\n      case \"complete\":\n      case \"completed\":\n      case \"complete\":\n      case \"complete\":\n        return \"bg-green-600\";\n      case \"to-do\":\n      case \"to do\":\n      case \"todo\":\n        return \"bg-yellow-500\";\n      case \"doing\":\n        return \"bg-blue-600\";\n      case \"incomplete\":\n        return \"bg-red-600\";\n      case \"waiting\":\n      case \"waiting for approval\":\n        return \"bg-gray-600\";\n      default:\n        return \"bg-gray-400\";\n    }\n  };\n\n  // Update status (optimistic + backend) using the URL you specified:\n  // PUT {{base_url}}/api/projects/tasks/{{taskId}}/status?statusId={{stageId}}\n  const changeStatus = async (task: Task, statusItem: StatusItem) => {\n    // optimistic update locally\n    setTasks((prev) =>\n      prev.map((t) => (t.id === task.id ? { ...t, taskStage: { id: statusItem.id, name: statusItem.name }, taskStageId: statusItem.id } : t))\n    );\n\n    const token = localStorage.getItem(\"accessToken\");\n    try {\n      // Use the exact endpoint you provided:\n      const url = `${MAIN}/api/projects/tasks/${task.id}/status?statusId=${statusItem.id}`;\n\n      await axios.patch(\n        url,\n        {}, // no body needed per your pattern (statusId is query param)\n        {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: token ? `Bearer ${token}` : \"\",\n          },\n        }\n      );\n\n      // close the menu\n      setStatusOpenFor(null);\n    } catch (err: any) {\n      console.error(\"Failed to update status:\", err);\n      alert(\"Failed to update status on server. Refreshing tasks.\");\n      // revert by reloading tasks (safe fallback)\n      await fetchTasks();\n      setStatusOpenFor(null);\n    }\n  };\n\n  // NEW: open View modal (minimal, only sets viewTask + showView)\n  const openView = (t: Task) => {\n    // Cast Task -> TaskForView (fields align sufficiently)\n    setViewTask(t as unknown as TaskForView);\n    setShowView(true);\n  };\n\n  // helpers\n  const minsToHuman = (mins?: number | null) => {\n    if (!mins && mins !== 0) return \"--\";\n    const h = Math.floor((mins || 0) / 60);\n    const m = (mins || 0) % 60;\n    if (h && m) return `${h}h ${m}m`;\n    if (h) return `${h}h`;\n    return `${m}m`;\n  };\n\n  // helper to get display status (prefer server taskStage, else find by id)\n  const getDisplayStatus = (t: Task) => {\n    if (t.taskStage && t.taskStage.name) return t.taskStage;\n    if (t.taskStageId) {\n      const s = statuses.find((st) => st.id === t.taskStageId);\n      if (s) return s;\n    }\n    const guessed = findStatusByName(String(t.taskStage?.name || \"\"));\n    return guessed ?? { id: t.taskStageId ?? 0, name: t.taskStage?.name ?? \"Doing\" };\n  };\n\n  return (\n    <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n      <h2 className=\"text-xl font-semibold mb-4\">Tasks</h2>\n\n      {/* header */}\n      <div className=\"flex items-center justify-between mb-4\">\n        <div className=\"flex items-center gap-4\">\n          <button\n            onClick={() => {\n              setForm({ ...emptyForm, projectId });\n              setShowCreate(true);\n            }}\n            className=\"bg-blue-600 text-white px-4 py-2 rounded shadow-sm hover:bg-blue-700\"\n          >\n            + Add Task\n          </button>\n        </div>\n\n        <div className=\"flex items-center gap-3\">\n          <input\n            type=\"search\"\n            placeholder=\"Search\"\n            onChange={(e) => {\n              const q = e.target.value.toLowerCase();\n              if (!q) fetchTasks();\n              else setTasks((prev) => prev.filter((t) => (t.title || \"\").toLowerCase().includes(q) || (t.projectName || \"\").toLowerCase().includes(q)));\n            }}\n            className=\"border px-3 py-2 rounded-md text-sm\"\n          />\n        </div>\n      </div>\n\n      {/* table */}\n      {loading ? (\n        <div className=\"py-6 text-center text-gray-500\">Loading tasks...</div>\n      ) : error ? (\n        <div className=\"py-6 text-center text-red-500\">{error}</div>\n      ) : (\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full text-sm\">\n            <thead>\n              <tr className=\"bg-blue-50 text-left text-gray-600\">\n                <th className=\"px-4 py-3\">Code</th>\n                <th className=\"px-4 py-3\">Task</th>\n                <th className=\"px-4 py-3\">Completed On</th>\n                <th className=\"px-4 py-3\">Start Date</th>\n                <th className=\"px-4 py-3\">Due Date</th>\n                <th className=\"px-4 py-3\">Hours Logged</th>\n                <th className=\"px-4 py-3\">Estimated Time</th>\n                <th className=\"px-4 py-3\">Milestones</th>\n                <th className=\"px-4 py-3\">Assigned to</th>\n                <th className=\"px-4 py-3\">Status</th>\n                <th className=\"px-4 py-3\">Action</th>\n              </tr>\n            </thead>\n\n            <tbody>\n              {tasks.length === 0 ? (\n                <tr>\n                  <td colSpan={11} className=\"py-6 text-center text-gray-500\">\n                    No tasks found\n                  </td>\n                </tr>\n              ) : (\n                tasks.map((t) => {\n                  const isOverdue = t.dueDate && !t.noDueDate && new Date(t.dueDate) < new Date();\n                  const displayStatus = getDisplayStatus(t);\n                  const statusName = displayStatus?.name ?? \"Doing\";\n                  return (\n                    <tr key={t.id} className=\"border-b last:border-b-0 bg-white hover:bg-gray-50\">\n                      <td className=\"px-4 py-4 align-top\">RTA-{String(t.id).padStart(2, \"0\")}</td>\n\n                      <td className=\"px-4 py-4 align-top\">\n                        <div className=\"font-medium\">{t.title}</div>\n                        <div className=\"text-xs text-gray-500 mt-1\">{t.projectName ?? `Project ${t.projectId}`}</div>\n                      </td>\n\n                      <td className=\"px-4 py-4 align-top\">--</td>\n\n                      <td className=\"px-4 py-4 align-top\">{t.startDate ? new Date(t.startDate).toLocaleDateString() : \"--\"}</td>\n\n                      <td className={`px-4 py-4 align-top ${isOverdue ? \"text-red-600\" : \"\"}`}>\n                        {t.noDueDate ? \"--\" : t.dueDate ? new Date(t.dueDate).toLocaleDateString() : \"--\"}\n                      </td>\n\n                      <td className=\"px-4 py-4 align-top\">{minsToHuman(t.hoursLoggedMinutes ?? null)}</td>\n\n                      <td className=\"px-4 py-4 align-top\">{minsToHuman(t.timeEstimateMinutes ?? null)}</td>\n\n                      <td className=\"px-4 py-4 align-top\">{t.milestone?.title ?? \"--\"}</td>\n\n                      <td className=\"px-4 py-4 align-top\">\n                        <div className=\"flex -space-x-2\">\n                          {(t.assignedEmployees || []).slice(0, 3).map((e) => (\n                            <div key={e.employeeId} className=\"w-8 h-8 rounded-full border-2 border-white overflow-hidden bg-gray-100\">\n                              {e.profileUrl ? <img src={e.profileUrl} alt={e.name} className=\"w-full h-full object-cover\" /> : <UserIcon className=\"w-full h-full text-gray-400 p-1\" />}\n                            </div>\n                          ))}\n                        </div>\n                      </td>\n\n                      <td className=\"px-4 py-4 align-top relative\">\n                        {/* Status pill with dropdown icon */}\n                        <div className=\"relative inline-block\">\n                          <button\n                            onClick={(ev) => {\n                              ev.stopPropagation();\n                              setActionOpenFor(null);\n                              setStatusOpenFor((cur) => (cur === t.id ? null : t.id));\n                            }}\n                            className=\"inline-flex items-center gap-2 px-3 py-1 rounded-full border text-xs bg-white hover:bg-gray-50\"\n                            title=\"Change status\"\n                          >\n                            {/* Dot: use labelColor if available */}\n                            {displayStatus && displayStatus.labelColor ? (\n                              <span\n                                style={{\n                                  width: 8,\n                                  height: 8,\n                                  borderRadius: 9999,\n                                  display: \"inline-block\",\n                                  background: `#${String(displayStatus.labelColor).replace(/[^0-9a-fA-F]/g, \"\").slice(0, 6)}`,\n                                }}\n                              />\n                            ) : (\n                              <span className={`w-2 h-2 rounded-full ${statusColorClass(displayStatus?.name ?? \"Doing\")}`} />\n                            )}\n                            <span>{String(statusName)}</span>\n                            <span className=\"text-xs\">▾</span>\n                          </button>\n\n                          {statusOpenFor === t.id && (\n                            <div onClick={(e) => e.stopPropagation()} className=\"absolute right-0 mt-2 z-30 w-44 bg-white border rounded-md shadow-lg text-sm\">\n                              {statuses.length > 0 ? (\n                                statuses.map((st) => (\n                                  <button\n                                    key={st.id}\n                                    onClick={() => changeStatus(t, st)}\n                                    className={`w-full text-left px-4 py-2 hover:bg-gray-50 flex items-center gap-2 ${st.id === displayStatus?.id ? \"font-medium\" : \"\"}`}\n                                  >\n                                    {st.labelColor ? (\n                                      <span style={{ width: 8, height: 8, borderRadius: 9999, background: `#${String(st.labelColor).replace(/[^0-9a-fA-F]/g, \"\").slice(0, 6)}` }} />\n                                    ) : (\n                                      <span className={`w-2 h-2 rounded-full ${statusColorClass(st.name)}`} />\n                                    )}\n                                    <span>{st.name}</span>\n                                  </button>\n                                ))\n                              ) : (\n                                [\"To Do\", \"Doing\", \"Completed\", \"Incomplete\", \"Waiting for Approval\"].map((opt) => (\n                                  <button\n                                    key={opt}\n                                    onClick={() => {\n                                      const fake: StatusItem = { id: 0, name: opt };\n                                      changeStatus(t, fake);\n                                    }}\n                                    className=\"w-full text-left px-4 py-2 hover:bg-gray-50\"\n                                  >\n                                    <span className={`w-2 h-2 rounded-full ${statusColorClass(opt)}`} /> <span>{opt}</span>\n                                  </button>\n                                ))\n                              )}\n                            </div>\n                          )}\n                        </div>\n                      </td>\n\n                      <td className=\"px-4 py-4 align-top relative\">\n                        <button\n                          onClick={(ev) => {\n                            ev.stopPropagation();\n                            setStatusOpenFor(null);\n                            setActionOpenFor((cur) => (cur === t.id ? null : t.id));\n                          }}\n                          className=\"p-1 rounded hover:bg-gray-100\"\n                          aria-haspopup=\"true\"\n                          aria-expanded={actionOpenFor === t.id}\n                          title=\"More\"\n                        >\n                          ⋮\n                        </button>\n\n                        {/* ACTION menu - anchored to row */}\n                        {actionOpenFor === t.id && (\n                          <div onClick={(e) => e.stopPropagation()} className=\"absolute right-2 top-10 z-20 w-48 bg-white border rounded-md shadow-md\">\n                            <button\n                              onClick={() => {\n                                // OPEN external TaskViewModal\n                                openView(t);\n                                setActionOpenFor(null);\n                              }}\n                              className=\"w-full text-left px-4 py-2 hover:bg-gray-50\"\n                            >\n                              View\n                            </button>\n\n                            <button\n                              onClick={() => {\n                                openEdit(t);\n                                setActionOpenFor(null);\n                              }}\n                              className=\"w-full text-left px-4 py-2 hover:bg-gray-50\"\n                            >\n                              Edit\n                            </button>\n\n                            <button\n                              onClick={() => {\n                                setActionOpenFor(null);\n                                handleDelete(t.id);\n                              }}\n                              className=\"w-full text-left px-4 py-2 text-red-600 hover:bg-gray-50\"\n                            >\n                              Delete\n                            </button>\n                          </div>\n                        )}\n                      </td>\n                    </tr>\n                  );\n                })\n              )}\n            </tbody>\n          </table>\n\n          {/* footer (pagination-ish display) */}\n          <div className=\"px-4 py-3 border-t bg-gray-50 flex items-center justify-between text-sm text-gray-600 rounded-b-md mt-4\">\n            <div>Result per page - {tasks.length ? tasks.length : 0}</div>\n            <div>Page 1 of 1</div>\n          </div>\n        </div>\n      )}\n\n      {/* Create modal (unchanged) */}\n      {showCreate && (\n        <div className=\"fixed inset-0 z-40 flex items-center justify-center bg-black/40 p-4\">\n          <form onSubmit={handleCreate} className=\"bg-white w-full max-w-3xl rounded-lg p-6 shadow-lg overflow-auto max-h-[90vh]\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-semibold\">Add Task</h3>\n              <button type=\"button\" onClick={() => setShowCreate(false)} className=\"text-gray-500\">Close</button>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Title</span>\n                <input required value={form.title} onChange={(e) => updateForm({ title: e.target.value })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Category (id)</span>\n                <input value={form.category} onChange={(e) => updateForm({ category: e.target.value })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Start Date</span>\n                <input type=\"date\" value={form.startDate} onChange={(e) => updateForm({ startDate: e.target.value })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Due Date</span>\n                <input type=\"date\" value={form.dueDate} onChange={(e) => updateForm({ dueDate: e.target.value })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex items-center gap-2\">\n                <input type=\"checkbox\" checked={form.noDueDate} onChange={(e) => updateForm({ noDueDate: e.target.checked })} />\n                <span className=\"text-sm text-gray-600\">No Due Date</span>\n              </label>\n\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Task Stage ID</span>\n                <input value={form.taskStageId} onChange={(e) => updateForm({ taskStageId: e.target.value })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex flex-col md:col-span-2\">\n                <span className=\"text-xs text-gray-600\">Description</span>\n                <textarea value={form.description} onChange={(e) => updateForm({ description: e.target.value })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Assigned Employee IDs (comma separated)</span>\n                <input value={form.assignedEmployeeIds.join(\",\")} onChange={(e) => updateForm({ assignedEmployeeIds: e.target.value.split(\",\").map(s => s.trim()).filter(Boolean) })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Label IDs (comma separated)</span>\n                <input value={form.labelIds.join(\",\")} onChange={(e) => updateForm({ labelIds: e.target.value.split(\",\").map(s => s.trim()).filter(Boolean) })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Milestone ID</span>\n                <input value={form.milestoneId} onChange={(e) => updateForm({ milestoneId: e.target.value })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Priority</span>\n                <select value={form.priority} onChange={(e) => updateForm({ priority: e.target.value })} className=\"border px-3 py-2 rounded\">\n                  <option value=\"LOW\">LOW</option>\n                  <option value=\"MEDIUM\">MEDIUM</option>\n                  <option value=\"HIGH\">HIGH</option>\n                  <option value=\"URGENT\">URGENT</option>\n                </select>\n              </label>\n\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Time Estimate (minutes)</span>\n                <input type=\"number\" value={form.timeEstimateMinutes} onChange={(e) => updateForm({ timeEstimateMinutes: e.target.value })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex items-center gap-2\">\n                <input type=\"checkbox\" checked={form.isPrivate} onChange={(e) => updateForm({ isPrivate: e.target.checked })} />\n                <span className=\"text-sm text-gray-600\">Private</span>\n              </label>\n\n              <label className=\"flex items-center gap-2\">\n                <input type=\"checkbox\" checked={form.isDependent} onChange={(e) => updateForm({ isDependent: e.target.checked })} />\n                <span className=\"text-sm text-gray-600\">Is Dependent</span>\n              </label>\n\n              <label className=\"flex flex-col md:col-span-2\">\n                <span className=\"text-xs text-gray-600\">Attach file (optional)</span>\n                <input type=\"file\" onChange={(e) => updateForm({ taskFile: e.target.files?.[0] || null })} />\n              </label>\n            </div>\n\n            <div className=\"mt-4 flex items-center justify-end gap-3\">\n              <button type=\"button\" onClick={() => setShowCreate(false)} className=\"px-4 py-2 rounded border\">Cancel</button>\n              <button type=\"submit\" className=\"px-4 py-2 rounded bg-blue-600 text-white\">Save</button>\n            </div>\n          </form>\n        </div>\n      )}\n\n      {/* Edit modal (unchanged) */}\n      {showEdit && editTask && (\n        <div className=\"fixed inset-0 z-40 flex items-center justify-center bg-black/40 p-4\">\n          <form onSubmit={handleEdit} className=\"bg-white w-full max-w-3xl rounded-lg p-6 shadow-lg overflow-auto max-h-[90vh]\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-semibold\">Edit Task</h3>\n              <button type=\"button\" onClick={() => { setShowEdit(false); setEditTask(null); }} className=\"text-gray-500\">Close</button>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Title</span>\n                <input required value={form.title} onChange={(e) => updateForm({ title: e.target.value })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Category (id)</span>\n                <input value={form.category} onChange={(e) => updateForm({ category: e.target.value })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex flex-col md:col-span-2\">\n                <span className=\"text-xs text-gray-600\">Description</span>\n                <textarea value={form.description} onChange={(e) => updateForm({ description: e.target.value })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Assigned Employee IDs (comma separated)</span>\n                <input value={form.assignedEmployeeIds.join(\",\")} onChange={(e) => updateForm({ assignedEmployeeIds: e.target.value.split(\",\").map(s => s.trim()).filter(Boolean) })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Label IDs (comma separated)</span>\n                <input value={form.labelIds.join(\",\")} onChange={(e) => updateForm({ labelIds: e.target.value.split(\",\").map(s => s.trim()).filter(Boolean) })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Priority</span>\n                <select value={form.priority} onChange={(e) => updateForm({ priority: e.target.value })} className=\"border px-3 py-2 rounded\">\n                  <option value=\"LOW\">LOW</option>\n                  <option value=\"MEDIUM\">MEDIUM</option>\n                  <option value=\"HIGH\">HIGH</option>\n                  <option value=\"URGENT\">URGENT</option>\n                </select>\n              </label>\n\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Time Estimate (minutes)</span>\n                <input type=\"number\" value={form.timeEstimateMinutes} onChange={(e) => updateForm({ timeEstimateMinutes: e.target.value })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex items-center gap-2\">\n                <input type=\"checkbox\" checked={form.isPrivate} onChange={(e) => updateForm({ isPrivate: e.target.checked })} />\n                <span className=\"text-sm text-gray-600\">Private</span>\n              </label>\n\n              <label className=\"flex items-center gap-2\">\n                <input type=\"checkbox\" checked={form.isDependent} onChange={(e) => updateForm({ isDependent: e.target.checked })} />\n                <span className=\"text-sm text-gray-600\">Is Dependent</span>\n              </label>\n\n              <label className=\"flex flex-col md:col-span-2\">\n                <span className=\"text-xs text-gray-600\">Attach file (optional)</span>\n                <input type=\"file\" onChange={(e) => updateForm({ taskFile: e.target.files?.[0] || null })} />\n              </label>\n            </div>\n\n            <div className=\"mt-4 flex items-center justify-end gap-3\">\n              <button type=\"button\" onClick={() => { setShowEdit(false); setEditTask(null); }} className=\"px-4 py-2 rounded border\">Cancel</button>\n              <button type=\"submit\" className=\"px-4 py-2 rounded bg-blue-600 text-white\">Update</button>\n            </div>\n          </form>\n        </div>\n      )}\n\n      {/* Task view modal (external component) */}\n      <TaskViewModal\n        open={showView}\n        task={viewTask}\n        onClose={() => {\n          setShowView(false);\n          setViewTask(null);\n        }}\n      />\n    </div>\n  );\n}\n\n","\n\"use client\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport axios from \"axios\";\nimport { UserIcon } from \"@heroicons/react/24/outline\";\n\ntype AssignedEmployee = {\n  employeeId: string;\n  name: string;\n  profileUrl?: string | null;\n  designation?: string | null;\n  department?: string | null;\n};\n\ntype Project = {\n  id: number;\n  shortCode?: string;\n  name?: string;\n  assignedEmployees?: AssignedEmployee[];\n  assignedEmployeeIds?: string[];\n  projectAdminId?: string | null;\n};\n\nconst MAIN = process.env.NEXT_PUBLIC_MAIN || \"\";\n\n// ------------------------------------------\n// AXIOS INSTANCE SETUP\n// ------------------------------------------\nconst api = axios.create({\n  baseURL: MAIN || \"/\", // if MAIN empty → use Next.js API routes\n  timeout: 15000,\n});\n\n// Auto-add token\napi.interceptors.request.use((config) => {\n  const token = localStorage.getItem(\"accessToken\");\n  if (token) config.headers.Authorization = `Bearer ${token}`;\n  return config;\n});\n\n// Auto-handle JSON + errors\napi.interceptors.response.use(\n  (res) => res.data,\n  (err) => {\n    const message =\n      err?.response?.data?.message ||\n      err?.response?.statusText ||\n      err.message ||\n      \"Request failed\";\n    return Promise.reject(new Error(message));\n  }\n);\n\nexport default function ProjectMembersTableFetch({\n  projectId,\n}: {\n  projectId: number;\n}) {\n  const [project, setProject] = useState<Project | null>(null);\n  const [members, setMembers] = useState<AssignedEmployee[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [newMemberInput, setNewMemberInput] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [actionLoadingId, setActionLoadingId] = useState<string | null>(null);\n\n  // ------------------------------------------\n  // GET Project Members\n  // ------------------------------------------\n  const fetchProject = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const url = `/api/projects/${projectId}`;\n      const full = `${MAIN}/api/projects/${projectId}`;\n     // console.log(\"GET:\", full);\n\n      const data = await api.get(full);\n\n      setProject(data);\n      setMembers(data?.assignedEmployees ?? []);\n    } catch (err: any) {\n      setError(err.message);\n      setProject(null);\n      setMembers([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchProject();\n  }, [projectId]);\n\n  // ------------------------------------------\n  // POST Assign Members\n  // ------------------------------------------\n  const handleAssign = async () => {\n    const raw = newMemberInput.trim();\n    if (!raw) return alert(\"Enter employee IDs\");\n\n    const employeeIds = raw.split(\",\").map((x) => x.trim());\n\n    try {\n      setLoading(true);\n      setError(null);\n\n      const url = `${MAIN}/api/projects/${projectId}/assign`;\n    //  console.log(\"kikikiki\", employeeIds);\n      await api.post(url, { employeeIds });\n\n      setShowAddModal(false);\n      setNewMemberInput(\"\");\n      fetchProject();\n    } catch (err: any) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ------------------------------------------\n  // DELETE Member\n  // ------------------------------------------\n  const handleRemove = async (employeeId: string) => {\n    if (!confirm(`Remove ${employeeId}   from project?`)) return;\n\n    try {\n      setActionLoadingId(employeeId);\n      setError(null);\n\n      const url = `${MAIN}/api/projects/${projectId}/assign/${employeeId}`;\n\n      await api.delete(url);\n\n      // If admin removed → clear admin role\n      if (project?.projectAdminId === employeeId) {\n        await api.patch(`${MAIN}/api/projects/${projectId}`, {\n          projectAdminId: null,\n        });\n      }\n\n      fetchProject();\n    } catch (err: any) {\n      setError(err.message);\n    } finally {\n      setActionLoadingId(null);\n    }\n  };\n\n  const handleMakeAdmin = async (employeeId: string) => {\n    if (!confirm(`Make ${employeeId} Project Admin?`)) return;\n\n    try {\n      setActionLoadingId(employeeId);\n      setError(null);\n\n      const url = `${MAIN}/projects/${projectId}/admin?userId=${employeeId}`;\n\n      await api.post(url);\n\n      fetchProject();\n    } catch (err: any) {\n      setError(err.message);\n    } finally {\n      setActionLoadingId(null);\n    }\n  };\n\n  // ------------------------------------------\n  // REMOVE Project Admin Only\n  // ------------------------------------------\n  const handleRemoveAdmin = async () => {\n    if (!confirm(\"Remove Project Admin?\")) return;\n\n    try {\n      setActionLoadingId(\"admin\");\n      setError(null);\n\n      const url = `${MAIN}/projects/${projectId}/admin`;\n\n      await api.delete(url);\n\n      fetchProject();\n    } catch (err: any) {\n      setError(err.message);\n    } finally {\n      setActionLoadingId(null);\n    }\n  };\n\n  // ------------------------------------------\n  // SEARCH FILTER\n  // ------------------------------------------\n  const filtered = members.filter((m) => {\n    const t = search.toLowerCase();\n    return (\n      m.name?.toLowerCase().includes(t) ||\n      m.employeeId.toLowerCase().includes(t) ||\n      m.designation?.toLowerCase().includes(t)\n    );\n  });\n\n  // ------------------------------------------\n  // UI\n  // ------------------------------------------\n\n  return (\n    <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n      <h2 className=\"text-xl font-semibold mb-4\">Member</h2>\n\n      {/* Top Controls */}\n      <div className=\"flex justify-between mb-4\">\n        <button\n          onClick={() => setShowAddModal(true)}\n          className=\"bg-blue-600 text-white px-4 py-2 rounded\"\n        >\n          + Add Project Members\n        </button>\n\n        <div className=\"flex gap-3\">\n          <input\n            type=\"search\"\n            placeholder=\"Search\"\n            className=\"border px-3 py-2 rounded\"\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n          />\n          <button\n            onClick={fetchProject}\n            className=\"bg-gray-100 px-3 py-2 rounded\"\n          >\n            Refresh\n          </button>\n        </div>\n      </div>\n\n      {loading && <div className=\"text-center py-5\">Loading…</div>}\n\n      {error && (\n        <div className=\"p-3 bg-red-50 text-red-600 rounded mb-3\">{error}</div>\n      )}\n\n      {!loading && (\n        <table className=\"min-w-full text-sm\">\n          <thead>\n            <tr className=\"bg-blue-50\">\n              <th className=\"px-4 py-3\">Name</th>\n              <th className=\"px-4 py-3\">User Role</th>\n              <th className=\"px-4 py-3\">Action</th>\n            </tr>\n          </thead>\n\n          <tbody>\n            {filtered.map((m) => (\n              <tr key={m.employeeId} className=\"border-b\">\n                <td className=\"px-4 py-4 flex items-center gap-3\">\n                  <div className=\"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center overflow-hidden\">\n                    {m.profileUrl ? (\n                      <img\n                        src={m.profileUrl}\n                        className=\"w-full h-full object-cover\"\n                      />\n                    ) : (\n                      <UserIcon className=\"w-6 h-6 text-gray-400\" />\n                    )}\n                  </div>\n\n                  <div>\n                    <div className=\"font-medium\">{m.name}</div>\n                    <div className=\"text-xs text-gray-500\">\n                      {m.designation ?? m.department}\n                    </div>\n                  </div>\n                </td>\n\n                {/* Role */}\n                <td className=\"px-4 py-4\">\n                  {/* <div className=\"flex items-center gap-2 text-sm\"> */}\n                  <input\n                    type=\"radio\"\n                    checked={project?.projectAdminId === m.employeeId}\n                    onChange={() => handleMakeAdmin(m.employeeId)}\n                  />\n                  <span className=\"ml-1\">Project Admin</span>\n\n                  {project?.projectAdminId === m.employeeId && (\n                    <button\n                      onClick={() => handleRemoveAdmin()}\n                      disabled={actionLoadingId}\n                      className=\"ml-3 px-3 py-1 border rounded text-sm bg-white\"\n                    >\n                      {actionLoadingId ? \"Removing...\" : \"Remove Admin\"}\n                    </button>\n                  )}\n                </td>\n\n                {/* Remove */}\n                <td className=\"px-4 py-4\">\n                  <button\n                    onClick={() => handleRemove(m.employeeId)}\n                    disabled={actionLoadingId === m.employeeId}\n                    className=\"text-red-600\"\n                  >\n                    {actionLoadingId === m.employeeId ? \"Removing…\" : \"Delete\"}\n                  </button>\n                </td>\n              </tr>\n            ))}\n\n            {filtered.length === 0 && (\n              <tr>\n                <td colSpan={3} className=\"py-6 text-center text-gray-500\">\n                  No members found\n                </td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      )}\n\n      {/* ADD MODAL */}\n      {showAddModal && (\n        <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center z-50\">\n          <div className=\"bg-white p-6 rounded w-full max-w-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Add Project Members</h3>\n\n            <input\n              className=\"border px-3 py-2 w-full rounded\"\n              placeholder=\"EMP-015, EMP-010\"\n              value={newMemberInput}\n              onChange={(e) => setNewMemberInput(e.target.value)}\n            />\n\n            <div className=\"text-xs text-gray-500 mt-1\">\n              Example: EMP-015, EMP-010\n            </div>\n\n            <div className=\"flex justify-end gap-3 mt-4\">\n              <button\n                className=\"px-4 py-2 border rounded\"\n                onClick={() => setShowAddModal(false)}\n              >\n                Cancel\n              </button>\n\n              <button\n                className=\"px-4 py-2 bg-blue-600 text-white rounded\"\n                onClick={handleAssign}\n              >\n                Add\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\n\n\n\n","// components/TimesheetsTableNew.tsx\n\"use client\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { UserIcon, XMarkIcon } from \"@heroicons/react/24/outline\";\n\ntype EmployeeItem = {\n  employeeId: string;\n  name?: string | null;\n  profileUrl?: string | null;\n  designation?: string | null;\n  department?: string | null;\n};\n\ntype Timesheet = {\n  id: number;\n  projectId?: number;\n  taskId?: number;\n  employeeId?: string;\n  employees?: EmployeeItem[];\n  startDate?: string; // YYYY-MM-DD\n  startTime?: string; // HH:MM:SS or HH:MM\n  endDate?: string;\n  endTime?: string;\n  memo?: string | null;\n  durationHours?: number;\n  createdBy?: string;\n  createdAt?: string; // ISO\n};\n\nconst DEFAULT_MAIN = process.env.NEXT_PUBLIC_MAIN ;\n\n// *** default token (from your message). For prod DO NOT hardcode.\nconst PROVIDED_TOKEN = typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null;\nexport default function TimesheetsTableNew({\n  gatewayPath = \"/timesheets\",\n  mainBase,\n  authToken = PROVIDED_TOKEN,\n}: {\n  gatewayPath?: string;\n  mainBase?: string;\n  authToken?: string | null;\n}) {\n  const MAIN = (mainBase || DEFAULT_MAIN).replace(/\\/$/, \"\");\n  const [data, setData] = useState<Timesheet[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [refreshKey, setRefreshKey] = useState(0);\n\n  // search / filters\n  const [search, setSearch] = useState(\"\");\n  const [employeeFilter, setEmployeeFilter] = useState<string>(\"All\");\n\n  // modal/form state\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [saveError, setSaveError] = useState<string | null>(null);\n  const [editingId, setEditingId] = useState<number | null>(null);\n\n  const [form, setForm] = useState({\n    projectId: \"\",\n    taskId: \"\",\n    employeeId: \"\",\n    startDate: \"\",\n    startTime: \"\",\n    endDate: \"\",\n    endTime: \"\",\n    memo: \"\",\n  });\n\n  // action dropdown + view/delete modals\n  const [actionOpenFor, setActionOpenFor] = useState<number | null>(null);\n  const [isViewOpen, setIsViewOpen] = useState(false);\n  const [selectedRow, setSelectedRow] = useState<Timesheet | null>(null);\n  const [isDeleteConfirmOpen, setIsDeleteConfirmOpen] = useState(false);\n\n  // helpers\n  const buildUrl = (path: string) => {\n    const p = String(path || \"\");\n    if (p.startsWith(\"http://\") || p.startsWith(\"https://\")) return p;\n    if (p.startsWith(\"/\")) return `${MAIN}${p}`;\n    return `${MAIN}/${p}`;\n  };\n\n  const headersWithAuth = (extra: Record<string, string> = {}) => {\n    const h: Record<string, string> = { ...extra };\n    if (authToken) h[\"Authorization\"] = `Bearer ${authToken}`;\n    return h;\n  };\n\n  // fetch wrapper with timeout + helpful errors\n  const doFetch = async (url: string, init: RequestInit = {}, msTimeout = 15000) => {\n    const controller = new AbortController();\n    const timeout = setTimeout(() => controller.abort(), msTimeout);\n    try {\n      const merged = { ...init, signal: controller.signal };\n      const res = await fetch(url, merged);\n      clearTimeout(timeout);\n\n      const ct = res.headers.get(\"content-type\") || \"\";\n      const text = await res.text().catch(() => \"\");\n      if (!res.ok) {\n        if (ct.includes(\"application/json\")) {\n          try {\n            const json = JSON.parse(text || \"{}\");\n            const msg = json?.message || JSON.stringify(json);\n            throw new Error(`HTTP ${res.status} ${res.statusText} — ${msg}`);\n          } catch {\n            throw new Error(`HTTP ${res.status} ${res.statusText} — ${text.slice(0, 300)}`);\n          }\n        }\n        if (ct.includes(\"text/html\") || text.trim().startsWith(\"<!DOCTYPE html\")) {\n          throw new Error(`HTTP ${res.status} ${res.statusText} — server returned HTML (likely auth).`);\n        }\n        throw new Error(`HTTP ${res.status} ${res.statusText} ${text ? \"- \" + text.slice(0, 300) : \"\"}`);\n      }\n      if (ct.includes(\"application/json\")) {\n        return JSON.parse(text || \"[]\");\n      }\n      return text;\n    } catch (err: any) {\n      if (err.name === \"AbortError\") throw new Error(\"Request timed out\");\n      if (err.message === \"Failed to fetch\") throw new Error(\"Network Error - check CORS / server availability\");\n      throw err;\n    } finally {\n      clearTimeout(timeout);\n    }\n  };\n\n  // fetch timesheets\n  const fetchTimesheets = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const url = buildUrl(gatewayPath);\n      const res = await doFetch(url, {\n        method: \"GET\",\n        headers: headersWithAuth({ \"Content-Type\": \"application/json\" }),\n        credentials: \"same-origin\",\n      });\n      if (Array.isArray(res)) setData(res as Timesheet[]);\n      else if (res?.data && Array.isArray(res.data)) setData(res.data);\n      else {\n        console.warn(\"Unexpected timesheets response:\", res);\n        setData([]);\n        setError(\"Unexpected response shape from server. See console.\");\n      }\n    } catch (err: any) {\n      console.error(\"fetchTimesheets error:\", err);\n      setData([]);\n      setError(err?.message || \"Failed to load timesheets\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchTimesheets();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [refreshKey]);\n\n  // derive employees for filter/select\n  const employeeList = useMemo(() => {\n    const map = new Map<string, EmployeeItem>();\n    data.forEach((r) => {\n      const e = r.employees && r.employees[0];\n      if (e && e.employeeId) map.set(e.employeeId, e);\n      else if (r.employeeId) map.set(r.employeeId, { employeeId: r.employeeId });\n    });\n    return Array.from(map.values());\n  }, [data]);\n\n  // filtered rows\n  const filtered = data.filter((row) => {\n    if (employeeFilter !== \"All\" && row.employeeId !== employeeFilter) return false;\n    if (!search) return true;\n    const q = search.toLowerCase();\n    const emp = row.employees && row.employees[0];\n    return (\n      String(row.employeeId || \"\").toLowerCase().includes(q) ||\n      String(row.projectId || \"\").toLowerCase().includes(q) ||\n      String(row.taskId || \"\").toLowerCase().includes(q) ||\n      String(row.memo || \"\").toLowerCase().includes(q) ||\n      String(emp?.name || \"\").toLowerCase().includes(q)\n    );\n  });\n\n  // helpers to format\n  const pad = (n: number) => (n < 10 ? `0${n}` : `${n}`);\n  const formatDateTimeDisplay = (date?: string, time?: string) => {\n    if (!date) return \"-\";\n    // date: YYYY-MM-DD, time: HH:MM or HH:MM:SS\n    try {\n      const [y, m, d] = date.split(\"-\").map(Number);\n      let hh = 0,\n        mm = 0;\n      if (time) {\n        const parts = time.split(\":\").map(Number);\n        hh = parts[0] ?? 0;\n        mm = parts[1] ?? 0;\n      }\n      const dt = new Date(y, m - 1, d, hh, mm);\n      // format DD/MM/YYYY hh:mm AM/PM\n      const day = pad(dt.getDate());\n      const mon = pad(dt.getMonth() + 1);\n      const year = dt.getFullYear();\n      let hours = dt.getHours();\n      const minutes = pad(dt.getMinutes());\n      const ampm = hours >= 12 ? \"PM\" : \"AM\";\n      hours = hours % 12 || 12;\n      const hoursStr = pad(hours);\n      return `${day}/${mon}/${year} ${hoursStr}:${minutes} ${ampm}`;\n    } catch {\n      return date + (time ? ` ${time}` : \"\");\n    }\n  };\n\n  const fmtDateTime = (date?: string, time?: string) => {\n    return formatDateTimeDisplay(date, time);\n  };\n\n  const computeDurationHours = (sDate?: string, sTime?: string, eDate?: string, eTime?: string) => {\n    if (!sDate || !eDate) return 0;\n    try {\n      const sParts = sDate.split(\"-\").map(Number);\n      const eParts = eDate.split(\"-\").map(Number);\n      let sH = 0,\n        sM = 0,\n        eH = 0,\n        eM = 0;\n      if (sTime) [sH, sM] = sTime.split(\":\").map((v) => Number(v));\n      if (eTime) [eH, eM] = eTime.split(\":\").map((v) => Number(v));\n      const start = new Date(sParts[0], sParts[1] - 1, sParts[2], sH, sM);\n      const end = new Date(eParts[0], eParts[1] - 1, eParts[2], eH, eM);\n      const diffMs = end.getTime() - start.getTime();\n      if (isNaN(diffMs) || diffMs <= 0) return 0;\n      return Math.round(diffMs / (1000 * 60 * 60)); // hours\n    } catch {\n      return 0;\n    }\n  };\n\n  const modalTotalHours = computeDurationHours(form.startDate, form.startTime, form.endDate, form.endTime);\n\n  // open modal to create new or edit existing\n  const openModal = (row?: Timesheet) => {\n    if (!row) {\n      setEditingId(null);\n      setForm({\n        projectId: \"\",\n        taskId: \"\",\n        employeeId: \"\",\n        startDate: \"\",\n        startTime: \"\",\n        endDate: \"\",\n        endTime: \"\",\n        memo: \"\",\n      });\n    } else {\n      setEditingId(row.id);\n      setForm({\n        projectId: String(row.projectId ?? \"\"),\n        taskId: String(row.taskId ?? \"\"),\n        employeeId: row.employeeId ?? \"\",\n        startDate: row.startDate ?? \"\",\n        startTime: row.startTime ?? \"\",\n        endDate: row.endDate ?? \"\",\n        endTime: row.endTime ?? \"\",\n        memo: row.memo ?? \"\",\n      });\n    }\n    setSaveError(null);\n    setIsModalOpen(true);\n  };\n\n  // View row (read-only modal)\n  const openView = (row: Timesheet) => {\n    setSelectedRow(row);\n    setIsViewOpen(true);\n    setActionOpenFor(null);\n  };\n\n  // Delete flow\n  const openDelete = (row: Timesheet) => {\n    setSelectedRow(row);\n    setIsDeleteConfirmOpen(true);\n    setActionOpenFor(null);\n  };\n\n  const deleteTimesheet = async () => {\n    if (!selectedRow) return;\n    setSaving(true);\n    setSaveError(null);\n    try {\n      const url = buildUrl(`${gatewayPath}/${selectedRow.id}`);\n      await doFetch(url, {\n        method: \"DELETE\",\n        headers: headersWithAuth({ \"Content-Type\": \"application/json\" }),\n        credentials: \"same-origin\",\n      });\n      setIsDeleteConfirmOpen(false);\n      setSelectedRow(null);\n      setRefreshKey((k) => k + 1);\n    } catch (err: any) {\n      console.error(\"deleteTimesheet error:\", err);\n      setSaveError(err?.message || \"Failed to delete timesheet\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // save (create or update)\n  const saveEntry = async () => {\n    setSaving(true);\n    setSaveError(null);\n    try {\n      // validation\n      if (!form.projectId || !form.taskId || !form.employeeId || !form.startDate || !form.startTime || !form.endDate || !form.endTime || !form.memo) {\n        setSaveError(\"Please fill all required fields.\");\n        setSaving(false);\n        return;\n      }\n\n      const payload: any = {\n        projectId: Number(form.projectId),\n        taskId: Number(form.taskId),\n        employeeId: form.employeeId,\n        startDate: form.startDate,\n        startTime: form.startTime,\n        endDate: form.endDate,\n        endTime: form.endTime,\n        memo: form.memo,\n        durationHours: computeDurationHours(form.startDate, form.startTime, form.endDate, form.endTime),\n      };\n\n      const url = buildUrl(gatewayPath) + (editingId ? `/${editingId}` : \"\");\n      const method = editingId ? \"PUT\" : \"POST\";\n\n      await doFetch(url, {\n        method,\n        headers: headersWithAuth({ \"Content-Type\": \"application/json\" }),\n        credentials: \"same-origin\",\n        body: JSON.stringify(payload),\n      });\n\n      setIsModalOpen(false);\n      setRefreshKey((k) => k + 1);\n    } catch (err: any) {\n      console.error(\"saveEntry error:\", err);\n      setSaveError(err?.message || \"Failed to save entry\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <h2 className=\"text-xl font-semibold\">Timesheet</h2>\n\n        <div className=\"flex items-center gap-3\">\n          <label className=\"text-sm\">Employee</label>\n          <select value={employeeFilter} onChange={(e) => setEmployeeFilter(e.target.value)} className=\"border rounded px-3 py-2 text-sm\">\n            <option value=\"All\">All</option>\n            {employeeList.map((e) => (\n              <option key={e.employeeId} value={e.employeeId}>\n                {e.name ? `${e.name} (${e.employeeId})` : e.employeeId}\n              </option>\n            ))}\n          </select>\n        </div>\n      </div>\n\n      <div className=\"flex items-center justify-between mb-4\">\n        <div>\n          <button onClick={() => openModal()} className=\"bg-blue-600 text-white px-4 py-2 rounded-md shadow-sm hover:bg-blue-700\">\n            + Log Time\n          </button>\n        </div>\n\n        <div className=\"flex items-center gap-3\">\n          <button onClick={() => setRefreshKey((k) => k + 1)} className=\"bg-gray-100 px-3 py-2 rounded text-sm border hover:bg-gray-200\">\n            Refresh\n          </button>\n\n          <input type=\"search\" placeholder=\"Search employee, memo, project...\" value={search} onChange={(e) => setSearch(e.target.value)} className=\"border px-3 py-2 rounded-md text-sm\" />\n        </div>\n      </div>\n\n      {loading ? (\n        <div className=\"py-6 text-center text-gray-500\">Loading timesheets...</div>\n      ) : (\n        <>\n          {error && <div className=\"mb-4 p-3 rounded bg-red-50 text-red-700\"><strong>Error:</strong> {error}</div>}\n\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full text-sm\">\n              <thead>\n                <tr className=\"bg-blue-50 text-left text-gray-600\">\n                  <th className=\"px-4 py-3\">Code</th>\n                  <th className=\"px-4 py-3\">Task</th>\n                  <th className=\"px-4 py-3\">Employee</th>\n                  <th className=\"px-4 py-3\">Start Time</th>\n                  <th className=\"px-4 py-3\">End Time</th>\n                  <th className=\"px-4 py-3\">Total Hours</th>\n                  <th className=\"px-4 py-3\">Action</th>\n                </tr>\n              </thead>\n\n              <tbody>\n                {filtered.length === 0 ? (\n                  <tr><td colSpan={7} className=\"py-6 text-center text-gray-500\">No timesheets found</td></tr>\n                ) : (\n                  filtered.map((row) => {\n                    const emp = row.employees && row.employees[0];\n                    const code = `RTA-${String(row.id).padStart(2, \"0\")}`;\n                    const taskLabel = `Task ${row.taskId ?? \"-\"} · Project ${row.projectId ?? \"-\"}`;\n                    return (\n                      <tr key={row.id} className=\"border-b last:border-b-0 bg-white hover:bg-gray-50\">\n                        <td className=\"px-4 py-4 align-top\">{code}</td>\n\n                        <td className=\"px-4 py-4 align-top\">\n                          <div className=\"text-sm font-medium\">{taskLabel}</div>\n                          <div className=\"text-xs text-gray-400\">{row.memo ?? \"\"}</div>\n                        </td>\n\n                        <td className=\"px-4 py-4 align-top flex items-center gap-3\">\n                          <div className=\"w-10 h-10 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center\">\n                            {emp?.profileUrl ? (\n                              // eslint-disable-next-line @next/next/no-img-element\n                              <img src={emp.profileUrl} alt={emp?.name ?? \"\"} className=\"w-full h-full object-cover\" />\n                            ) : <UserIcon className=\"w-6 h-6 text-gray-400 p-1\" />}\n                          </div>\n\n                          <div>\n                            <div className=\"font-medium\">{emp?.name || row.employeeId}</div>\n                            <div className=\"text-xs text-gray-500\">{emp?.designation || emp?.department || row.employeeId}</div>\n                          </div>\n                        </td>\n\n                        <td className=\"px-4 py-4 align-top\">{fmtDateTime(row.startDate, row.startTime)}</td>\n                        <td className=\"px-4 py-4 align-top\">{fmtDateTime(row.endDate, row.endTime)}</td>\n                        <td className=\"px-4 py-4 align-top\">{typeof row.durationHours === \"number\" ? `${row.durationHours}h` : \"-\"}</td>\n\n                        <td className=\"px-4 py-4 align-top\">\n                          <div className=\"relative inline-block text-left\">\n                            {/* Three-dot button */}\n                            <button\n                              onClick={() => setActionOpenFor(actionOpenFor === row.id ? null : row.id)}\n                              className=\"px-2 py-1 border rounded text-sm\"\n                              aria-haspopup=\"true\"\n                              aria-expanded={actionOpenFor === row.id}\n                              title=\"More\"\n                            >\n                              ⋮\n                            </button>\n\n                            {/* Dropdown */}\n                            {actionOpenFor === row.id && (\n                              <div className=\"absolute right-0 mt-2 z-30 w-40 bg-white border rounded-md shadow-lg text-sm\">\n                                <button\n                                  onClick={() => openView(row)}\n                                  className=\"w-full text-left px-4 py-2 hover:bg-gray-50\"\n                                >\n                                  View\n                                </button>\n\n                                <button\n                                  onClick={() => { openModal(row); setActionOpenFor(null); }}\n                                  className=\"w-full text-left px-4 py-2 hover:bg-gray-50\"\n                                >\n                                  Edit\n                                </button>\n\n                                <button\n                                  onClick={() => openDelete(row)}\n                                  className=\"w-full text-left px-4 py-2 hover:bg-gray-50 text-red-600\"\n                                >\n                                  Delete\n                                </button>\n                              </div>\n                            )}\n                          </div>\n                        </td>\n                      </tr>\n                    );\n                  })\n                )}\n              </tbody>\n            </table>\n          </div>\n        </>\n      )}\n\n      {/* Log Time Modal (create/edit) */}\n      {isModalOpen && (\n        <div className=\"fixed inset-0 z-50 flex items-start justify-center pt-12 px-4\">\n          <div className=\"absolute inset-0 bg-black/40\" onClick={() => setIsModalOpen(false)} />\n\n          <div className=\"relative bg-white w-full max-w-4xl rounded-xl shadow-xl overflow-hidden\">\n            <div className=\"flex items-center justify-between px-6 py-4 border-b\">\n              <h3 className=\"text-lg font-semibold\">{editingId ? \"Edit TimeLog\" : \"Log Time\"}</h3>\n              <button className=\"p-2 rounded hover:bg-gray-100\" onClick={() => setIsModalOpen(false)} aria-label=\"Close\">\n                <XMarkIcon className=\"w-6 h-6 text-gray-500\" />\n              </button>\n            </div>\n\n            <div className=\"p-6\">\n              <div className=\"bg-white rounded-md border p-6\">\n                <h4 className=\"text-md font-medium mb-4\">TimeLog Details</h4>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  <div>\n                    <label className=\"block text-sm text-gray-700 mb-2\">Project *</label>\n                    <input value={form.projectId} onChange={(e) => setForm((s) => ({ ...s, projectId: e.target.value }))} className=\"w-full border rounded px-3 py-2\" placeholder=\"Project ID\" type=\"text\" />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm text-gray-700 mb-2\">Task *</label>\n                    <input value={form.taskId} onChange={(e) => setForm((s) => ({ ...s, taskId: e.target.value }))} className=\"w-full border rounded px-3 py-2\" placeholder=\"Task ID\" type=\"text\" />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm text-gray-700 mb-2\">Employee *</label>\n                    <select value={form.employeeId} onChange={(e) => setForm((s) => ({ ...s, employeeId: e.target.value }))} className=\"w-full border rounded px-3 py-2\">\n                      <option value=\"\">--</option>\n                      {employeeList.map((e) => (\n                        <option key={e.employeeId} value={e.employeeId}>\n                          {e.name ? `${e.name} (${e.employeeId})` : e.employeeId}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6\">\n                  <div>\n                    <label className=\"block text-sm text-gray-700 mb-2\">Start Date *</label>\n                    <input type=\"date\" value={form.startDate} onChange={(e) => setForm((s) => ({ ...s, startDate: e.target.value }))} className=\"w-full border rounded px-3 py-2\" />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm text-gray-700 mb-2\">Start Time *</label>\n                    <input type=\"time\" value={form.startTime} onChange={(e) => setForm((s) => ({ ...s, startTime: e.target.value }))} className=\"w-full border rounded px-3 py-2\" />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm text-gray-700 mb-2\">End Date *</label>\n                    <input type=\"date\" value={form.endDate} onChange={(e) => setForm((s) => ({ ...s, endDate: e.target.value }))} className=\"w-full border rounded px-3 py-2\" />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm text-gray-700 mb-2\">End Time *</label>\n                    <input type=\"time\" value={form.endTime} onChange={(e) => setForm((s) => ({ ...s, endTime: e.target.value }))} className=\"w-full border rounded px-3 py-2\" />\n                  </div>\n                </div>\n\n                <div className=\"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4 items-center\">\n                  <div>\n                    <label className=\"block text-sm text-gray-700 mb-2\">Memo *</label>\n                    <input type=\"text\" value={form.memo} onChange={(e) => setForm((s) => ({ ...s, memo: e.target.value }))} className=\"w-full border rounded px-3 py-2\" placeholder=\"Memo\" />\n                  </div>\n\n                  <div className=\"text-right\">\n                    <div className=\"text-sm text-gray-500\">Total Hours</div>\n                    <div className=\"text-2xl font-semibold text-blue-600\">{modalTotalHours}h</div>\n                  </div>\n                </div>\n\n                {saveError && <div className=\"mt-4 text-sm text-red-600\">{saveError}</div>}\n              </div>\n\n              {/* Buttons */}\n              <div className=\"flex items-center justify-center gap-6 mt-8 pb-6\">\n                <button onClick={() => setIsModalOpen(false)} className=\"px-6 py-2 rounded-md border text-blue-600\" disabled={saving}>Cancel</button>\n\n                <button onClick={saveEntry} className=\"px-6 py-2 rounded-md bg-blue-600 text-white shadow\" disabled={saving}>\n                  {saving ? \"Saving...\" : editingId ? \"Update\" : \"Save\"}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* View Modal - redesigned to match provided screenshot */}\n      {isViewOpen && selectedRow && (\n        <div className=\"fixed inset-0 z-50 flex items-start justify-center pt-8 px-6\">\n          <div className=\"absolute inset-0 bg-black/40\" onClick={() => setIsViewOpen(false)} />\n\n          <div className=\"relative bg-white w-full max-w-6xl rounded-xl shadow-xl overflow-hidden\">\n            <div className=\"flex items-center justify-between px-6 py-4 border-b\">\n              <h3 className=\"text-xl font-semibold\">Timesheet</h3>\n              <button className=\"p-2 rounded hover:bg-gray-100\" onClick={() => setIsViewOpen(false)} aria-label=\"Close\">\n                <XMarkIcon className=\"w-6 h-6 text-gray-500\" />\n              </button>\n            </div>\n\n            <div className=\"p-6\">\n              {/* grid: left big card + right small history card */}\n              <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n                {/* LEFT: Big Card */}\n                <div className=\"lg:col-span-2 relative bg-white rounded-xl border p-6\">\n                  {/* three-dot icon top-right inside card */}\n                  <div className=\"absolute top-4 right-4 text-gray-500\">⋮</div>\n\n                  <h4 className=\"text-lg font-medium mb-4\">TimeLog Details</h4>\n\n                  <div className=\"grid grid-cols-3 gap-y-4 gap-x-6 items-center text-sm\">\n                    <div className=\"text-gray-500\">Start Time</div>\n                    <div className=\"col-span-2\">{fmtDateTime(selectedRow.startDate, selectedRow.startTime)}</div>\n\n                    <div className=\"text-gray-500\">End Time</div>\n                    <div className=\"col-span-2\">{fmtDateTime(selectedRow.endDate, selectedRow.endTime)}</div>\n\n                    <div className=\"text-gray-500\">Total Hours</div>\n                    <div className=\"col-span-2\">{typeof selectedRow.durationHours === \"number\" ? `${selectedRow.durationHours}h` : \"-\"}</div>\n\n                    <div className=\"text-gray-500\">Memo</div>\n                    <div className=\"col-span-2\">{selectedRow.memo ?? \"-\"}</div>\n\n                    <div className=\"text-gray-500\">Project</div>\n                    <div className=\"col-span-2\">Project {selectedRow.projectId ?? \"-\"}</div>\n\n                    <div className=\"text-gray-500\">Task</div>\n                    <div className=\"col-span-2\">Task {selectedRow.taskId ?? \"-\"}</div>\n\n                    <div className=\"text-gray-500\">Employee</div>\n                    <div className=\"col-span-2 flex items-center gap-3\">\n                      <div className=\"w-10 h-10 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center\">\n                        {selectedRow.employees && selectedRow.employees[0]?.profileUrl ? (\n                          // eslint-disable-next-line @next/next/no-img-element\n                          <img src={selectedRow.employees![0]!.profileUrl!} alt={selectedRow.employees![0]!.name ?? \"\"} className=\"w-full h-full object-cover\" />\n                        ) : (\n                          <UserIcon className=\"w-6 h-6 text-gray-400 p-1\" />\n                        )}\n                      </div>\n                      <div>\n                        <div className=\"font-medium text-sm\">{selectedRow.employees && selectedRow.employees[0]?.name ? selectedRow.employees[0]!.name : selectedRow.employeeId}</div>\n                        <div className=\"text-xs text-gray-500\">{selectedRow.employees && selectedRow.employees[0]?.designation ? selectedRow.employees[0]!.designation : \"\"}</div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* RIGHT: History Card */}\n                <div className=\"bg-white rounded-xl border p-5\">\n                  <h5 className=\"font-medium mb-3\">History</h5>\n\n                  <div className=\"space-y-4 text-sm text-gray-700\">\n                    <div className=\"flex justify-between\">\n                      <div className=\"text-gray-500\">Start Time</div>\n                      <div>{fmtDateTime(selectedRow.startDate, selectedRow.startTime)}</div>\n                    </div>\n\n                    <div className=\"flex justify-between\">\n                      <div className=\"text-gray-500\">Task</div>\n                      <div>Task {selectedRow.taskId ?? \"-\"}</div>\n                    </div>\n\n                    <div className=\"flex justify-between\">\n                      <div className=\"text-gray-500\">End Time</div>\n                      <div>{fmtDateTime(selectedRow.endDate, selectedRow.endTime)}</div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* footer buttons */}\n              <div className=\"flex items-center justify-center gap-6 mt-8 pb-6\">\n                <button onClick={() => setIsViewOpen(false)} className=\"px-6 py-2 rounded-md border text-blue-600\">Close</button>\n                <button onClick={() => { openModal(selectedRow); setIsViewOpen(false); }} className=\"px-6 py-2 rounded-md bg-blue-600 text-white\">Edit</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Delete confirm modal */}\n      {isDeleteConfirmOpen && selectedRow && (\n        <div className=\"fixed inset-0 z-50 flex items-start justify-center pt-12 px-4\">\n          <div className=\"absolute inset-0 bg-black/40\" onClick={() => setIsDeleteConfirmOpen(false)} />\n          <div className=\"relative bg-white w-full max-w-md rounded-lg shadow-xl overflow-hidden\">\n            <div className=\"p-6\">\n              <h3 className=\"text-lg font-semibold mb-4\">Delete TimeLog</h3>\n              <p className=\"text-sm text-gray-700\">Are you sure you want to delete timesheet <strong>RTA-{String(selectedRow.id).padStart(2, \"0\")}</strong>? This action cannot be undone.</p>\n\n              {saveError && <div className=\"mt-4 text-sm text-red-600\">{saveError}</div>}\n\n              <div className=\"flex items-center justify-end gap-4 mt-6\">\n                <button className=\"px-4 py-2 rounded border\" onClick={() => setIsDeleteConfirmOpen(false)} disabled={saving}>Cancel</button>\n                <button className=\"px-4 py-2 rounded bg-red-600 text-white\" onClick={deleteTimesheet} disabled={saving}>{saving ? \"Deleting...\" : \"Delete\"}</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","\"use client\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { XMarkIcon } from \"@heroicons/react/24/outline\";\n\ntype Milestone = {\n  id?: number;\n  title: string;\n  milestoneCost?: number;\n  taskCount?: number;\n  status?: string;\n  summary?: string;\n  startDate?: string;\n  endDate?: string;\n  createdAt?: string;\n  [k: string]: any;\n};\n\nconst DEFAULT_MAIN = process.env.NEXT_PUBLIC_MAIN \n\n// Temporary provided token (for local testing only). DON'T commit real tokens.\nconst PROVIDED_TOKEN = typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null;\nexport default function MilestonesTable({\n  projectId,\n  gatewayPath = \"/api/projects\",\n  authToken = PROVIDED_TOKEN,\n  mainBase,\n}: {\n  projectId: number | string;\n  gatewayPath?: string;\n  authToken?: string | null;\n  mainBase?: string | null;\n}) {\n  const MAIN = (mainBase || DEFAULT_MAIN).replace(/\\/$/, \"\");\n  const [rows, setRows] = useState<Milestone[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [refreshKey, setRefreshKey] = useState(0);\n\n  // Modals & form state\n  const [isCreateOpen, setIsCreateOpen] = useState(false);\n  const [isViewOpen, setIsViewOpen] = useState(false);\n  const [isEditOpen, setIsEditOpen] = useState(false);\n  const [isDeleteConfirmOpen, setIsDeleteConfirmOpen] = useState(false);\n\n  const [selected, setSelected] = useState<Milestone | null>(null);\n\n  const [saving, setSaving] = useState(false);\n  const [saveError, setSaveError] = useState<string | null>(null);\n\n  const [form, setForm] = useState({\n    title: \"\",\n    milestoneCost: \"\",\n    // taskCount removed from forms per request\n    status: \"INCOMPLETE\", // default uppercase\n    summary: \"\",\n    startDate: \"\",\n    endDate: \"\",\n  });\n\n  // dropdown state\n  const [actionOpenFor, setActionOpenFor] = useState<number | null>(null);\n  const [statusMenuOpenFor, setStatusMenuOpenFor] = useState<number | null>(null);\n\n  // build URL helper\n  const buildUrl = (path: string) => {\n    const p = String(path || \"\");\n    if (p.startsWith(\"http://\") || p.startsWith(\"https://\")) return p;\n    if (p.startsWith(\"/\")) return `${MAIN}${p}`;\n    return `${MAIN}/${p}`;\n  };\n\n  const headers = (extra: Record<string, string> = {}) => {\n    const h: Record<string, string> = { ...extra };\n    if (authToken) h[\"Authorization\"] = `Bearer ${authToken}`;\n    return h;\n  };\n\n  // fetch wrapper\n  const doFetch = async (url: string, init: RequestInit = {}, msTimeout = 15000) => {\n    const controller = new AbortController();\n    const timeout = setTimeout(() => controller.abort(), msTimeout);\n    try {\n      const merged = { ...init, signal: controller.signal };\n      const res = await fetch(url, merged);\n      clearTimeout(timeout);\n\n      const ct = res.headers.get(\"content-type\") || \"\";\n      const text = await res.text().catch(() => \"\");\n      if (!res.ok) {\n        if (ct.includes(\"text/html\") || text.trim().startsWith(\"<!DOCTYPE html\")) {\n          throw new Error(\n            `HTTP ${res.status} ${res.statusText} — server returned HTML. Snippet: ${text.slice(0, 300)}`\n          );\n        }\n        if (ct.includes(\"application/json\")) {\n          try {\n            const json = JSON.parse(text || \"{}\");\n            throw new Error(`HTTP ${res.status} ${res.statusText} — ${JSON.stringify(json)}`);\n          } catch {}\n        }\n        throw new Error(`HTTP ${res.status} ${res.statusText} ${text ? \"- \" + text.slice(0, 300) : \"\"}`);\n      }\n\n      if (ct.includes(\"application/json\")) return JSON.parse(text || \"[]\");\n      return text;\n    } catch (err: any) {\n      if (err.name === \"AbortError\") throw new Error(\"Request timed out\");\n      if (err.message === \"Failed to fetch\") throw new Error(\"Network Error - check CORS / server availability\");\n      throw err;\n    } finally {\n      clearTimeout(timeout);\n    }\n  };\n\n  // parse & validate projectId to avoid accidental \"{{projectId}}\"\n  const parsedProjectId = useMemo(() => {\n    if (projectId === null || projectId === undefined) return null;\n    const s = String(projectId).trim();\n    if (/{{\\s*projectId\\s*}}/.test(s)) return \"__INVALID_PLACEHOLDER__\";\n    const n = Number(s);\n    if (Number.isNaN(n)) return \"__INVALID_NUMBER__\";\n    return n;\n  }, [projectId]);\n\n  // fetch list\n  const fetchMilestones = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      if (parsedProjectId === null) {\n        setError(\"projectId is required.\");\n        setRows([]);\n        setLoading(false);\n        return;\n      }\n      if (parsedProjectId === \"__INVALID_PLACEHOLDER__\") {\n        setError('projectId looks like a template placeholder (\"{{projectId}}\"). Pass a real numeric id.');\n        setRows([]);\n        setLoading(false);\n        return;\n      }\n      if (parsedProjectId === \"__INVALID_NUMBER__\") {\n        setError(`projectId \"${projectId}\" is not a valid number.`);\n        setRows([]);\n        setLoading(false);\n        return;\n      }\n\n      const url = buildUrl(`${gatewayPath}/${parsedProjectId}/milestones`);\n      console.info(\"[milestones] GET\", url, \"AuthPresent:\", !!authToken);\n      const res = await doFetch(url, {\n        method: \"GET\",\n        headers: headers({ \"Content-Type\": \"application/json\" }),\n        credentials: \"same-origin\",\n      });\n\n      if (Array.isArray(res)) setRows(res as Milestone[]);\n      else if (res?.data && Array.isArray(res.data)) setRows(res.data);\n      else if (res?.milestones && Array.isArray(res.milestones)) setRows(res.milestones);\n      else {\n        console.warn(\"Unexpected milestones response:\", res);\n        setRows([]);\n        setError(\"Unexpected response shape from server. See console.\");\n      }\n    } catch (err: any) {\n      console.error(\"fetchMilestones error:\", err);\n      setRows([]);\n      setError(err?.message || \"Failed to load milestones\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchMilestones();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [projectId, refreshKey]);\n\n  // helpers\n  const formatCurrency = (v?: number) => {\n    if (typeof v !== \"number\") return \"-\";\n    return `$${v.toFixed(2)}`;\n  };\n\n  // open create modal\n  const openCreate = () => {\n    setForm({\n      title: \"\",\n      milestoneCost: \"\",\n      status: \"INCOMPLETE\",\n      summary: \"\",\n      startDate: \"\",\n      endDate: \"\",\n    });\n    setSaveError(null);\n    setIsCreateOpen(true);\n  };\n\n  // open view modal\n  const openView = (m: Milestone) => {\n    setSelected(m);\n    setIsViewOpen(true);\n    setActionOpenFor(null);\n  };\n\n  // open edit modal\n  const openEdit = (m: Milestone) => {\n    setSelected(m);\n    setForm({\n      title: m.title || \"\",\n      milestoneCost: String(m.milestoneCost ?? \"\"),\n      status: (m.status || \"INCOMPLETE\").toUpperCase(),\n      summary: m.summary ?? \"\",\n      startDate: m.startDate ? String(m.startDate).slice(0, 10) : \"\", // prefer ISO date portion\n      endDate: m.endDate ? String(m.endDate).slice(0, 10) : \"\",\n    });\n    setSaveError(null);\n    setIsEditOpen(true);\n    setActionOpenFor(null);\n  };\n\n  // open delete confirm\n  const openDelete = (m: Milestone) => {\n    setSelected(m);\n    setIsDeleteConfirmOpen(true);\n    setActionOpenFor(null);\n  };\n\n  // create\n  const createMilestone = async () => {\n    setSaving(true);\n    setSaveError(null);\n    try {\n      if (!form.title?.trim()) {\n        setSaveError(\"Title is required.\");\n        setSaving(false);\n        return;\n      }\n      if (typeof parsedProjectId !== \"number\") {\n        setSaveError(\"Invalid projectId.\");\n        setSaving(false);\n        return;\n      }\n      const payload = {\n        title: form.title.trim(),\n        milestoneCost: Number(form.milestoneCost || 0),\n        // note: taskCount intentionally not sent (removed from form)\n        status: (form.status || \"INCOMPLETE\").toUpperCase(),\n        summary: form.summary?.trim() || \"\",\n        startDate: form.startDate ? new Date(form.startDate).toISOString() : null,\n        endDate: form.endDate ? new Date(form.endDate).toISOString() : null,\n      };\n      const url = buildUrl(`${gatewayPath}/${parsedProjectId}/milestones`);\n      await doFetch(url, {\n        method: \"POST\",\n        headers: headers({ \"Content-Type\": \"application/json\" }),\n        credentials: \"same-origin\",\n        body: JSON.stringify(payload),\n      });\n      setIsCreateOpen(false);\n      setForm({\n        title: \"\",\n        milestoneCost: \"\",\n        status: \"INCOMPLETE\",\n        summary: \"\",\n        startDate: \"\",\n        endDate: \"\",\n      });\n      setRefreshKey((k) => k + 1);\n    } catch (err: any) {\n      console.error(\"createMilestone error:\", err);\n      setSaveError(err?.message || \"Failed to create milestone\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // update (PUT)\n  const updateMilestone = async () => {\n    setSaving(true);\n    setSaveError(null);\n    try {\n      if (!selected?.id) {\n        setSaveError(\"No milestone selected for update.\");\n        setSaving(false);\n        return;\n      }\n      if (!form.title?.trim()) {\n        setSaveError(\"Title is required.\");\n        setSaving(false);\n        return;\n      }\n      const payload = {\n        title: form.title.trim(),\n        milestoneCost: Number(form.milestoneCost || 0),\n        status: (form.status || \"INCOMPLETE\").toUpperCase(),\n        summary: form.summary?.trim() || \"\",\n        startDate: form.startDate ? new Date(form.startDate).toISOString() : null,\n        endDate: form.endDate ? new Date(form.endDate).toISOString() : null,\n      };\n      const url = buildUrl(`${gatewayPath}/${parsedProjectId}/milestones/${selected.id}`);\n      await doFetch(url, {\n        method: \"PUT\",\n        headers: headers({ \"Content-Type\": \"application/json\" }),\n        credentials: \"same-origin\",\n        body: JSON.stringify(payload),\n      });\n      setIsEditOpen(false);\n      setSelected(null);\n      setRefreshKey((k) => k + 1);\n    } catch (err: any) {\n      console.error(\"updateMilestone error:\", err);\n      setSaveError(err?.message || \"Failed to update milestone\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // delete\n  const deleteMilestone = async () => {\n    setSaving(true);\n    setSaveError(null);\n    try {\n      if (!selected?.id) {\n        setSaveError(\"No milestone selected for delete.\");\n        setSaving(false);\n        return;\n      }\n      const url = buildUrl(`${gatewayPath}/${parsedProjectId}/milestones/${selected.id}`);\n      await doFetch(url, {\n        method: \"DELETE\",\n        headers: headers({ \"Content-Type\": \"application/json\" }),\n        credentials: \"same-origin\",\n      });\n      setIsDeleteConfirmOpen(false);\n      setSelected(null);\n      setRefreshKey((k) => k + 1);\n    } catch (err: any) {\n      console.error(\"deleteMilestone error:\", err);\n      setSaveError(err?.message || \"Failed to delete milestone\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // change status using the explicit endpoint you provided:\n  // /api/projects/{projectId}/milestones/{milestoneId}/status\n  // IMPORTANT: this now sends FormData with field name \"status\"\n  const changeStatus = async (m: Milestone, newStatus: \"COMPLETED\" | \"INCOMPLETE\" | string) => {\n    setSaving(true);\n    setSaveError(null);\n    try {\n      if (!m?.id) {\n        setSaveError(\"Invalid milestone\");\n        setSaving(false);\n        return;\n      }\n\n      const url = buildUrl(`${gatewayPath}/${parsedProjectId}/milestones/${m.id}/status`);\n\n      // Build FormData and append 'status' field (server expects form field named 'status')\n      const fd = new FormData();\n      fd.append(\"status\", String(newStatus).toUpperCase());\n\n      // IMPORTANT: do not set Content-Type header manually for FormData requests.\n      // Include only Authorization (if present).\n      await doFetch(url, {\n        method: \"PATCH\",\n        headers: headers(), // don't pass Content-Type so browser adds multipart/form-data boundary\n        credentials: \"same-origin\",\n        body: fd,\n      });\n\n      setStatusMenuOpenFor(null);\n      setActionOpenFor(null);\n      setRefreshKey((k) => k + 1);\n    } catch (err: any) {\n      console.error(\"changeStatus error:\", err);\n      setSaveError(err?.message || \"Failed to change status\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // UI helpers for status colors (supports both old and uppercase)\n  const statusIsCompleted = (s?: string) => {\n    const st = String(s || \"\").toLowerCase();\n    return st === \"complete\" || st === \"completed\";\n  };\n\n  // simpler color helpers (also tolerant)\n  const statusClasses = (s?: string) => {\n    const st = String(s || \"\").toLowerCase();\n    if (st === \"complete\" || st === \"completed\" || String(s) === \"COMPLETED\") {\n      return \"bg-green-50 text-green-700 border-green-200\";\n    }\n    return \"bg-red-50 text-red-700 border-red-200\";\n  };\n\n  const dotColor = (s?: string) => {\n    const st = String(s || \"\").toLowerCase();\n    if (st === \"complete\" || st === \"completed\" || String(s) === \"COMPLETED\") return \"bg-green-600\";\n    return \"bg-red-600\";\n  };\n\n  // render\n  return (\n    <div className=\"p-6 bg-white rounded shadow-sm border border-gray-200\">\n      <h2 className=\"text-xl font-semibold mb-4\">Milestones</h2>\n\n      {/* top controls: button on left, filters/actions on right */}\n      <div className=\"flex items-center justify-between mb-4\">\n        <div>\n          <button onClick={openCreate} className=\"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700\">\n            + Create Milestone\n          </button>\n        </div>\n\n        <div className=\"flex items-center gap-3\">\n          <button\n            onClick={() => setRefreshKey((k) => k + 1)}\n            className=\"bg-gray-100 px-3 py-2 rounded text-sm border hover:bg-gray-200\"\n            title=\"Refresh\"\n          >\n            Refresh\n          </button>\n        </div>\n      </div>\n\n      {/* table */}\n      <div className=\"rounded-md border overflow-hidden\">\n        <div className=\"bg-blue-50 text-gray-700 text-sm\">\n          <div className=\"grid grid-cols-12 gap-0 items-center px-4 py-3\">\n            <div className=\"col-span-4 font-medium\">Title</div>\n            <div className=\"col-span-2 font-medium\">Milestone Cost</div>\n            <div className=\"col-span-2 font-medium\">Task Count</div>\n            <div className=\"col-span-2 font-medium\">Status</div>\n            <div className=\"col-span-2 font-medium text-right\">Action</div>\n          </div>\n        </div>\n\n        {loading ? (\n          <div className=\"p-6 text-center text-gray-500\">Loading milestones...</div>\n        ) : error ? (\n          <div className=\"p-6 text-center text-red-600\">{error}</div>\n        ) : rows.length === 0 ? (\n          <div className=\"p-6 text-center text-gray-500\">No milestones found</div>\n        ) : (\n          <div>\n            {rows.map((m) => (\n              <div key={m.id ?? Math.random()} className=\"grid grid-cols-12 gap-0 items-center px-4 py-4 border-t\">\n                <div className=\"col-span-4 text-sm\">{m.title}</div>\n                <div className=\"col-span-2 text-sm\">{formatCurrency(m.milestoneCost)}</div>\n                <div className=\"col-span-2 text-sm\">{String(m.taskCount ?? \"00\").padStart(2, \"0\")}</div>\n\n                {/* STATUS with dropdown - styled to look like your screenshot */}\n                <div className=\"col-span-2 text-sm\">\n                  <div className=\"relative inline-block\">\n                    <button\n                      onClick={() => setStatusMenuOpenFor(statusMenuOpenFor === m.id ? null : (m.id ?? null))}\n                      className={`inline-flex items-center justify-between w-full gap-2 px-3 py-1 rounded-md border text-sm bg-white ${statusIsCompleted(m.status) ? \"border-green-200\" : \"border-gray-200\"}`}\n                      title=\"Change status\"\n                      aria-haspopup=\"true\"\n                      aria-expanded={statusMenuOpenFor === m.id}\n                    >\n                      <div className=\"flex items-center gap-2\">\n                        <span className={`w-2 h-2 rounded-full ${dotColor(m.status)}`} />\n                        <span className=\"uppercase\">{String(m.status || \"INCOMPLETE\").toUpperCase()}</span>\n                      </div>\n\n                      {/* small down chevron */}\n                      <svg className=\"w-3 h-3 shrink-0 text-gray-500\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden>\n                        <path d=\"M6 8l4 4 4-4\" stroke=\"currentColor\" strokeWidth=\"1.6\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                      </svg>\n                    </button>\n\n                    {statusMenuOpenFor === m.id && (\n                      <div className=\"absolute mt-2 right-0 z-20 w-44 bg-white border rounded-md shadow-lg\">\n                        <button\n                          onClick={() => changeStatus(m, \"COMPLETED\")}\n                          className={`w-full text-left px-4 py-2 hover:bg-gray-50 text-sm flex items-center justify-between ${statusIsCompleted(m.status) ? \"font-semibold\" : \"\"}`}\n                        >\n                          <span>COMPLETED</span>\n                          {statusIsCompleted(m.status) && (\n                            <svg className=\"w-4 h-4 text-green-600\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                              <path d=\"M5 10l3 3 7-7\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                            </svg>\n                          )}\n                        </button>\n\n                        <button\n                          onClick={() => changeStatus(m, \"INCOMPLETE\")}\n                          className={`w-full text-left px-4 py-2 hover:bg-gray-50 text-sm flex items-center justify-between ${!statusIsCompleted(m.status) ? \"font-semibold\" : \"\"}`}\n                        >\n                          <span>INCOMPLETE</span>\n                          {!statusIsCompleted(m.status) && (\n                            <svg className=\"w-4 h-4 text-gray-600\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                              <path d=\"M5 10l3 3 7-7\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                            </svg>\n                          )}\n                        </button>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                {/* ACTIONS as three-dot dropdown */}\n                <div className=\"col-span-2 text-right relative\">\n                  <button\n                    onClick={() => setActionOpenFor(actionOpenFor === m.id ? null : (m.id ?? null))}\n                    className=\"px-3 py-1 rounded text-sm border hover:bg-gray-50\"\n                    aria-haspopup=\"true\"\n                    aria-expanded={actionOpenFor === m.id}\n                    title=\"Actions\"\n                  >\n                    ⋮\n                  </button>\n\n                  {actionOpenFor === m.id && (\n                    <div className=\"absolute right-0 mt-2 z-30 w-44 bg-white border rounded-md shadow-lg text-sm\">\n                      <button\n                        onClick={() => {\n                          openView(m);\n                          setActionOpenFor(null);\n                        }}\n                        className=\"w-full text-left px-4 py-2 hover:bg-gray-50\"\n                      >\n                        View\n                      </button>\n\n                      <button\n                        onClick={() => {\n                          openEdit(m);\n                        }}\n                        className=\"w-full text-left px-4 py-2 hover:bg-gray-50\"\n                      >\n                        Edit\n                      </button>\n\n                      <button\n                        onClick={() => {\n                          openDelete(m);\n                        }}\n                        className=\"w-full text-left px-4 py-2 hover:bg-gray-50 text-red-600\"\n                      >\n                        Delete\n                      </button>\n                    </div>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* footer */}\n        <div className=\"px-4 py-3 border-t bg-gray-50 flex items-center justify-between text-sm text-gray-600\">\n          <div>Result per page - {rows.length ? rows.length : 0}</div>\n          <div>Page 1 of 1</div>\n        </div>\n      </div>\n\n      {/* Create modal */}\n      {isCreateOpen && (\n        <div className=\"fixed inset-0 z-50 flex items-start justify-center pt-12 px-4\">\n          <div className=\"absolute inset-0 bg-black/40\" onClick={() => setIsCreateOpen(false)} />\n          <div className=\"relative bg-white w-full max-w-3xl rounded-lg shadow-xl overflow-hidden\">\n            <div className=\"flex items-center justify-between px-6 py-4 border-b\">\n              <h3 className=\"text-lg font-semibold\">Create Milestone</h3>\n              <button onClick={() => setIsCreateOpen(false)} className=\"p-2 rounded hover:bg-gray-100\">\n                <XMarkIcon className=\"w-6 h-6 text-gray-500\" />\n              </button>\n            </div>\n\n            <div className=\"p-6\">\n              {/* Layout roughly matching your screenshot */}\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <div className=\"md:col-span-1\">\n                  <label className=\"block text-sm text-gray-700 mb-2\">Milestone Title *</label>\n                  <input\n                    type=\"text\"\n                    value={form.title}\n                    onChange={(e) => setForm((s) => ({ ...s, title: e.target.value }))}\n                    className=\"w-full border rounded px-3 py-2\"\n                    placeholder=\"Project Closure\"\n                  />\n                </div>\n\n                <div className=\"md:col-span-1\">\n                  <label className=\"block text-sm text-gray-700 mb-2\">Milestone Cost</label>\n                  <input\n                    type=\"number\"\n                    value={form.milestoneCost}\n                    onChange={(e) => setForm((s) => ({ ...s, milestoneCost: e.target.value }))}\n                    className=\"w-full border rounded px-3 py-2\"\n                    placeholder=\"0.00\"\n                    min={0}\n                  />\n                </div>\n\n                <div className=\"md:col-span-1\">\n                  <label className=\"block text-sm text-gray-700 mb-2\">Status</label>\n                  <select\n                    value={form.status}\n                    onChange={(e) => setForm((s) => ({ ...s, status: e.target.value }))}\n                    className=\"w-full border rounded px-3 py-2\"\n                  >\n                    <option value=\"INCOMPLETE\">INCOMPLETE</option>\n                    <option value=\"COMPLETED\">COMPLETED</option>\n                  </select>\n                </div>\n\n                {/* Milestone Summary full width */}\n                <div className=\"md:col-span-3\">\n                  <label className=\"block text-sm text-gray-700 mb-2\">Milestone Summary *</label>\n                  <textarea\n                    value={form.summary}\n                    onChange={(e) => setForm((s) => ({ ...s, summary: e.target.value }))}\n                    className=\"w-full border rounded px-3 py-2 min-h-[100px]\"\n                    placeholder=\"Conduct a project review to evaluate overall success and lessons learned...\"\n                  />\n                </div>\n\n                {/* Dates */}\n                <div>\n                  <label className=\"block text-sm text-gray-700 mb-2\">Start Date</label>\n                  <input\n                    type=\"date\"\n                    value={form.startDate}\n                    onChange={(e) => setForm((s) => ({ ...s, startDate: e.target.value }))}\n                    className=\"w-full border rounded px-3 py-2\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm text-gray-700 mb-2\">End Date</label>\n                  <input\n                    type=\"date\"\n                    value={form.endDate}\n                    onChange={(e) => setForm((s) => ({ ...s, endDate: e.target.value }))}\n                    className=\"w-full border rounded px-3 py-2\"\n                  />\n                </div>\n              </div>\n\n              {saveError && <div className=\"mt-4 text-sm text-red-600\">{saveError}</div>}\n\n              <div className=\"flex items-center justify-center gap-6 mt-6 pb-6\">\n                <button onClick={() => setIsCreateOpen(false)} className=\"px-6 py-2 rounded-md border text-blue-600\" disabled={saving}>\n                  Cancel\n                </button>\n                <button onClick={createMilestone} className=\"px-6 py-2 rounded-md bg-blue-600 text-white\" disabled={saving}>\n                  {saving ? \"Saving...\" : \"Save\"}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* View modal */}\n      {isViewOpen && selected && (\n        <div className=\"fixed inset-0 z-50 flex items-start justify-center pt-12 px-4\">\n          <div className=\"absolute inset-0 bg-black/40\" onClick={() => setIsViewOpen(false)} />\n          <div className=\"relative bg-white w-full max-w-2xl rounded-lg shadow-xl overflow-hidden\">\n            <div className=\"flex items-center justify-between px-6 py-4 border-b\">\n              <h3 className=\"text-lg font-semibold\">Milestone Details</h3>\n              <button onClick={() => setIsViewOpen(false)} className=\"p-2 rounded hover:bg-gray-100\">\n                <XMarkIcon className=\"w-6 h-6 text-gray-500\" />\n              </button>\n            </div>\n\n            <div className=\"p-6\">\n              <div className=\"space-y-3 text-sm\">\n                <div>\n                  <strong>Title:</strong> {selected.title}\n                </div>\n                <div>\n                  <strong>Milestone Cost:</strong> {formatCurrency(selected.milestoneCost)}\n                </div>\n                <div>\n                  <strong>Task Count:</strong> {selected.taskCount ?? 0}\n                </div>\n                <div>\n                  <strong>Status:</strong> {String(selected.status ?? \"INCOMPLETE\").toUpperCase()}\n                </div>\n                <div>\n                  <strong>Summary:</strong>\n                  <div className=\"mt-1 p-2 bg-gray-50 rounded text-sm\">{selected.summary ?? \"-\"}</div>\n                </div>\n                <div>\n                  <strong>Start Date:</strong> {selected.startDate ? new Date(selected.startDate).toLocaleDateString() : \"-\"}\n                </div>\n                <div>\n                  <strong>End Date:</strong> {selected.endDate ? new Date(selected.endDate).toLocaleDateString() : \"-\"}\n                </div>\n                <div>\n                  <strong>Created At:</strong> {selected.createdAt ? new Date(selected.createdAt).toLocaleString() : \"-\"}\n                </div>\n                <div>\n                  <strong>Raw:</strong>{\" \"}\n                  <pre className=\"text-xs bg-gray-50 p-2 rounded\">{JSON.stringify(selected, null, 2)}</pre>\n                </div>\n              </div>\n\n              <div className=\"flex items-center justify-center gap-6 mt-6 pb-6\">\n                <button onClick={() => setIsViewOpen(false)} className=\"px-6 py-2 rounded-md border text-blue-600\">\n                  Close\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Edit modal */}\n      {isEditOpen && selected && (\n        <div className=\"fixed inset-0 z-50 flex items-start justify-center pt-12 px-4\">\n          <div className=\"absolute inset-0 bg-black/40\" onClick={() => setIsEditOpen(false)} />\n          <div className=\"relative bg-white w-full max-w-3xl rounded-lg shadow-xl overflow-hidden\">\n            <div className=\"flex items-center justify-between px-6 py-4 border-b\">\n              <h3 className=\"text-lg font-semibold\">Edit Milestone</h3>\n              <button onClick={() => setIsEditOpen(false)} className=\"p-2 rounded hover:bg-gray-100\">\n                <XMarkIcon className=\"w-6 h-6 text-gray-500\" />\n              </button>\n            </div>\n\n            <div className=\"p-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <div className=\"md:col-span-1\">\n                  <label className=\"block text-sm text-gray-700 mb-2\">Milestone Title *</label>\n                  <input\n                    type=\"text\"\n                    value={form.title}\n                    onChange={(e) => setForm((s) => ({ ...s, title: e.target.value }))}\n                    className=\"w-full border rounded px-3 py-2\"\n                  />\n                </div>\n\n                <div className=\"md:col-span-1\">\n                  <label className=\"block text-sm text-gray-700 mb-2\">Milestone Cost</label>\n                  <input\n                    type=\"number\"\n                    value={form.milestoneCost}\n                    onChange={(e) => setForm((s) => ({ ...s, milestoneCost: e.target.value }))}\n                    className=\"w-full border rounded px-3 py-2\"\n                    min={0}\n                  />\n                </div>\n\n                <div className=\"md:col-span-1\">\n                  <label className=\"block text-sm text-gray-700 mb-2\">Status</label>\n                  <select\n                    value={form.status}\n                    onChange={(e) => setForm((s) => ({ ...s, status: e.target.value }))}\n                    className=\"w-full border rounded px-3 py-2\"\n                  >\n                    <option value=\"INCOMPLETE\">INCOMPLETE</option>\n                    <option value=\"COMPLETED\">COMPLETED</option>\n                  </select>\n                </div>\n\n                {/* Summary */}\n                <div className=\"md:col-span-3\">\n                  <label className=\"block text-sm text-gray-700 mb-2\">Milestone Summary *</label>\n                  <textarea\n                    value={form.summary}\n                    onChange={(e) => setForm((s) => ({ ...s, summary: e.target.value }))}\n                    className=\"w-full border rounded px-3 py-2 min-h-[100px]\"\n                  />\n                </div>\n\n                {/* Dates */}\n                <div>\n                  <label className=\"block text-sm text-gray-700 mb-2\">Start Date</label>\n                  <input\n                    type=\"date\"\n                    value={form.startDate}\n                    onChange={(e) => setForm((s) => ({ ...s, startDate: e.target.value }))}\n                    className=\"w-full border rounded px-3 py-2\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm text-gray-700 mb-2\">End Date</label>\n                  <input\n                    type=\"date\"\n                    value={form.endDate}\n                    onChange={(e) => setForm((s) => ({ ...s, endDate: e.target.value }))}\n                    className=\"w-full border rounded px-3 py-2\"\n                  />\n                </div>\n              </div>\n\n              {saveError && <div className=\"mt-4 text-sm text-red-600\">{saveError}</div>}\n\n              <div className=\"flex items-center justify-center gap-6 mt-6 pb-6\">\n                <button onClick={() => setIsEditOpen(false)} className=\"px-6 py-2 rounded-md border text-blue-600\" disabled={saving}>\n                  Cancel\n                </button>\n                <button onClick={updateMilestone} className=\"px-6 py-2 rounded-md bg-blue-600 text-white\" disabled={saving}>\n                  {saving ? \"Saving...\" : \"Save\"}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Delete confirm modal */}\n      {isDeleteConfirmOpen && selected && (\n        <div className=\"fixed inset-0 z-50 flex items-start justify-center pt-12 px-4\">\n          <div className=\"absolute inset-0 bg-black/40\" onClick={() => setIsDeleteConfirmOpen(false)} />\n          <div className=\"relative bg-white w-full max-w-md rounded-lg shadow-xl overflow-hidden\">\n            <div className=\"p-6\">\n              <h3 className=\"text-lg font-semibold mb-4\">Delete Milestone</h3>\n              <p className=\"text-sm text-gray-700\">\n                Are you sure you want to delete milestone <strong>{selected.title}</strong> ? This action cannot be undone.\n              </p>\n\n              {saveError && <div className=\"mt-4 text-sm text-red-600\">{saveError}</div>}\n\n              <div className=\"flex items-center justify-end gap-4 mt-6\">\n                <button className=\"px-4 py-2 rounded border\" onClick={() => setIsDeleteConfirmOpen(false)} disabled={saving}>\n                  Cancel\n                </button>\n                <button className=\"px-4 py-2 rounded bg-red-600 text-white\" onClick={deleteMilestone} disabled={saving}>\n                  {saving ? \"Deleting...\" : \"Delete\"}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","// \"use client\";\n\n// export default function InvoicesSection({ projectId }: { projectId: number }) {\n//     return (\n//         <div>\n//             <h3 className=\"text-lg font-medium mb-4\">Invoices</h3>\n//             <div className=\"border rounded-md p-4 text-gray-400 text-center\">\n//                 {/* No invoices linked to this project */}\n\n\n\n\n                \n//             </div>\n//         </div>\n//     );\n// }\n\n\n\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Plus } from \"lucide-react\";\n\nimport InvoiceFilters from \"@/app/(dashboard)/finance/invoices/components/InvoiceFilters\";\nimport InvoiceTable from \"@/app/(dashboard)/finance/invoices/components/InvoiceTable\";\n\nimport InvoiceCreateModal from \"@/app/(dashboard)/finance/invoices/components/InvoiceCreateModal\";\nimport InvoiceViewModal from \"@/app/(dashboard)/finance/invoices/components/InvoiceViewModal\";\nimport InvoiceEditModal from \"@/app/(dashboard)/finance/invoices/components/InvoiceEditModal\";\nimport InvoiceUploadModal from \"@/app/(dashboard)/finance/invoices/components/InvoiceUploadModal\";\nimport InvoicePaymentModal from \"@/app/(dashboard)/finance/invoices/components/InvoicePaymentModal\";\nimport InvoiceReceiptModal from \"@/app/(dashboard)/finance/invoices/components/InvoiceReceiptModal\";\nimport InvoiceViewReceiptModal from \"@/app/(dashboard)/finance/invoices/components/InvoiceViewReceiptModal\";\nimport AddPaymentModal from \"@/app/(dashboard)/finance/invoices/components/AddPaymentModal\";\nimport ViewPaymentsModal from \"@/app/(dashboard)/finance/invoices/components/ViewPaymentsModal\";\nimport CreateCreditNoteDrawer from \"@/app/(dashboard)/finance/invoices/components/CreateCreditNoteDrawer\";\nimport ViewCreditNotesDrawer from \"@/app/(dashboard)/finance/invoices/components/ViewCreditNotesDrawer\";\n\nconst BASE_URL = `${process.env.NEXT_PUBLIC_MAIN}`;\n\nexport default function InvoicesSection({\n  projectId,\n}: {\n  projectId: number;\n}) {\n  const [invoices, setInvoices] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  // 🔍 filters (project auto-fixed)\n  const [filters, setFilters] = useState({\n    search: \"\",\n    project: \"All\",\n    client: \"All\",\n    status: \"All\",\n    startDate: \"\",\n    endDate: \"\",\n  });\n\n  // 🔘 modal states\n  const [modal, setModal] = useState({\n    view: false,\n    edit: false,\n    upload: false,\n    payment: false,\n    create: false,\n    receipt: false,\n    viewReceipt: false,\n    viewPayment: false,\n    viewCredit: false,\n    createCredit: false,\n  });\n\n  const [activeInvoice, setActiveInvoice] = useState<any>(null);\n\n  // 📡 Fetch invoices for this project only\n  const fetchInvoices = async () => {\n    try {\n      setLoading(true);\n     // console.log(\"nbg\",projectId)\n      const res = await fetch(\n        `${BASE_URL}/api/invoices/project/${projectId}`,\n        {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n          },\n        }\n      );\n\n      const data = await res.json();\n\n     //  console.log(\"nbg\",res)\n      setInvoices(Array.isArray(data) ? data : data.invoices ?? []);\n    } catch (err) {\n      console.error(\"Failed to load invoices\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (projectId) fetchInvoices();\n  }, [projectId]);\n\n  return (\n    <div className=\"mt-6\">\n      {/* HEADER */}\n      <div className=\"flex items-center justify-between mb-4\">\n        <h3 className=\"text-lg font-medium\">Invoices</h3>\n\n        <Button onClick={() => setModal((m) => ({ ...m, create: true }))}>\n          <Plus className=\"mr-2 h-4 w-4\" />\n          Create Invoice\n        </Button>\n      </div>\n\n      {/* FILTERS */}\n      <InvoiceFilters\n        filters={filters}\n        setFilters={setFilters}\n        invoices={invoices}\n      />\n\n      {/* TABLE */}\n      <InvoiceTable\n        invoices={invoices}\n        loading={loading}\n        filters={filters}\n        setActiveInvoice={setActiveInvoice}\n        setModal={setModal}\n      />\n\n      {/* MODALS */}\n      <InvoiceCreateModal\n        open={modal.create}\n        onClose={() => setModal((m) => ({ ...m, create: false }))}\n        refresh={fetchInvoices}\n        invoices={invoices}\n      />\n\n      <InvoiceViewModal\n        open={modal.view}\n        onClose={() => setModal((m) => ({ ...m, view: false }))}\n        invoice={activeInvoice}\n        setModal={setModal}\n        refresh={fetchInvoices}\n      />\n\n      <InvoiceEditModal\n        open={modal.edit}\n        onClose={() => setModal((m) => ({ ...m, edit: false }))}\n        invoice={activeInvoice}\n        refresh={fetchInvoices}\n      />\n\n      <InvoiceUploadModal\n        open={modal.upload}\n        onClose={() => setModal((m) => ({ ...m, upload: false }))}\n        invoice={activeInvoice}\n        refresh={fetchInvoices}\n      />\n\n      <InvoicePaymentModal\n        open={modal.payment}\n        onClose={() => setModal((m) => ({ ...m, payment: false }))}\n        invoice={activeInvoice}\n        refresh={fetchInvoices}\n      />\n\n      <InvoiceReceiptModal\n        open={modal.receipt}\n        onClose={() => setModal((m) => ({ ...m, receipt: false }))}\n        invoice={activeInvoice}\n        refresh={fetchInvoices}\n      />\n\n      <InvoiceViewReceiptModal\n        open={modal.viewReceipt}\n        onClose={() => setModal((m) => ({ ...m, viewReceipt: false }))}\n        invoice={activeInvoice}\n      />\n\n      <AddPaymentModal\n        open={modal.payment}\n        onClose={() => setModal((m) => ({ ...m, payment: false }))}\n        clientId={activeInvoice?.client?.clientId}\n        onSaved={fetchInvoices}\n      />\n\n      <ViewPaymentsModal\n        open={modal.viewPayment}\n        onClose={() => setModal((m) => ({ ...m, viewPayment: false }))}\n        invoiceNumber={activeInvoice?.invoiceNumber}\n      />\n\n      <CreateCreditNoteDrawer\n        open={modal.createCredit}\n        onClose={() => setModal((m) => ({ ...m, createCredit: false }))}\n        invoiceNumber={activeInvoice?.invoiceNumber}\n        onCreated={fetchInvoices}\n      />\n\n      <ViewCreditNotesDrawer\n        open={modal.viewCredit}\n        onClose={() => setModal((m) => ({ ...m, viewCredit: false }))}\n        invoiceNumber={activeInvoice?.invoiceNumber}\n      />\n    </div>\n  );\n}\n","// \"use client\";\n\n// export default function PaymentsSection({ projectId }: { projectId: number }) {\n//     return (\n//         <div>\n//             <h3 className=\"text-lg font-medium mb-4\">Payments</h3>\n//             <div className=\"border rounded-md p-4 text-gray-400 text-center\">\n//                 No payments recorded\n//             </div>\n//         </div>\n//     );\n// }\n\n\n// src/components/ClientPaymentsTable.tsx\n\"use client\";\n\nimport React, { useEffect, useState, useMemo, useRef } from \"react\";\nimport Image from \"next/image\";\nimport { MoreHorizontal, X, Trash2 } from \"lucide-react\";\n\ntype PaymentClient = {\n  clientId?: string;\n  name?: string | null;\n  companyName?: string | null;\n  profilePictureUrl?: string | null;\n};\n\ntype RawPaymentApi = {\n  id: number;\n  project?: { projectName?: string; projectCode?: string } | null;\n  client?: {\n    clientId?: string;\n    name?: string | null;\n    companyName?: string | null;\n    profilePictureUrl?: string | null;\n  } | null;\n  currency?: string | null;\n  amount?: number | null;\n  paymentDate?: string | null;\n  receiptFileUrl?: string | null;\n  paymentGateway?: { id?: number; name?: string } | null;\n  status?: string | null;\n  invoice?: { invoiceNumber?: string } | null;\n  orderNumber?: string | null;\n};\n\ntype Payment = {\n  id: number | string;\n  code?: string | null;\n  project?: string | null;\n  invoice?: string | null;\n  client?: PaymentClient | null;\n  orderNumber?: string | null;\n  amount?: number | null;\n  currency?: string | null;\n  paidOn?: string | null;\n  paymentGateway?: string | null;\n  status?: \"Complete\" | \"Pending\" | \"Failed\" | string;\n  receiptFileUrl?: string | null;\n};\n\nconst BASE_URL =  `${process.env.NEXT_PUBLIC_MAIN}`;\n\nexport default  function PaymentsSection({ \n  projectId,\n  onAdd,\n  onSearch,\n  onAction,\n}: {\n  projectId?: string | number | null;\n  onAdd?: () => void;\n  onSearch?: (q: string) => void;\n  onAction?: (p: Payment) => void;\n}) {\n  const [payments, setPayments] = useState<Payment[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [query, setQuery] = useState(\"\");\n\n  // Add Payment modal state + form fields\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [projectField, setProjectField] = useState<string>(\"pre filled\");\n  const [clientField, setClientField] = useState<string>(() =>\n    projectId ? String(projectId) : \"pre filled\"\n  );\n  const [invoiceField, setInvoiceField] = useState<string>(\"pre filled\");\n  const [amountField, setAmountField] = useState<string>(\"\");\n  const [currencyField, setCurrencyField] = useState<string>(\"USD\");\n  const [transactionIdField, setTransactionIdField] = useState<string>(\"\");\n  const [paymentGatewayField, setPaymentGatewayField] = useState<string>(\n    \"Net Banking\"\n  );\n  const [remarkField, setRemarkField] = useState<string>(\"\");\n  const fileInputRef = useRef<HTMLInputElement | null>(null);\n  const [receiptFile, setReceiptFile] = useState<File | null>(null);\n\n  // Payment Gateway modal / list state (now wired to API)\n  const [showGatewayModal, setShowGatewayModal] = useState(false);\n  const [gateways, setGateways] = useState<{ id: number; name: string }[]>([]);\n  const [gatewayInput, setGatewayInput] = useState<string>(\"\");\n\n  // fetch payments for client (unchanged)\n  useEffect(() => {\n    if (!projectId && projectId !== 0) {\n      setPayments([]);\n      setError(\"No client selected.\");\n      setLoading(false);\n      return;\n    }\n\n    const controller = new AbortController();\n    const idStr = String(projectId);\n    // const url = `${BASE_URL}/api/payments/client/${encodeURIComponent(idStr)}`;\n    const url = `${BASE_URL}/api/payments/project/${projectId}`\n\n    setLoading(true);\n    setError(null);\n\n    const token =\n      typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null;\n\n    fetch(url, {\n      method: \"GET\",\n      signal: controller.signal,\n      headers: {\n        Accept: \"application/json\",\n        Authorization: token ? `Bearer ${token}` : \"\",\n      },\n    })\n      .then(async (res) => {\n        if (!res.ok) {\n          const text = await res.text().catch(() => \"\");\n          throw new Error(`HTTP ${res.status} ${text}`);\n        }\n        return res.json();\n      })\n      .then((data: RawPaymentApi[]) => {\n        if (!Array.isArray(data)) {\n          setPayments([]);\n          return;\n        }\n\n        const mapped: Payment[] = data.map((p) => ({\n          id: p.id,\n          code: p.project?.projectCode ?? undefined,\n          project: p.project?.projectName ?? undefined,\n          invoice: p.invoice?.invoiceNumber ?? undefined,\n          client: {\n            clientId: p.client?.clientId,\n            name: p.client?.name ?? undefined,\n            companyName: p.client?.companyName ?? undefined,\n            profilePictureUrl: p.client?.profilePictureUrl ?? undefined,\n          },\n          orderNumber: (p as any).orderNumber ?? undefined,\n          amount:\n            typeof p.amount === \"number\"\n              ? p.amount\n              : p.amount\n              ? Number(p.amount)\n              : undefined,\n          currency: p.currency ?? undefined,\n          paidOn: p.paymentDate ?? undefined,\n          paymentGateway: p.paymentGateway?.name ?? undefined,\n          status: p.status\n            ? String(p.status).toLowerCase() === \"completed\"\n              ? \"Complete\"\n              : p.status\n            : undefined,\n          receiptFileUrl: p.receiptFileUrl ?? undefined,\n        }));\n\n        setPayments(mapped);\n      })\n      .catch((err) => {\n        if ((err as any).name === \"AbortError\") return;\n        console.error(\"Error fetching payments:\", err);\n        setError(\"Failed to load payments.\");\n        setPayments([]);\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n\n    return () => controller.abort();\n  }, [projectId]);\n\n  // local search filtering (UI-level). still calls onSearch if provided\n  const visible = useMemo(() => {\n    const q = query.trim().toLowerCase();\n    if (!q) return payments;\n    return payments.filter((p) => {\n      return (\n        String(p.code ?? \"\").toLowerCase().includes(q) ||\n        String(p.project ?? \"\").toLowerCase().includes(q) ||\n        String(p.invoice ?? \"\").toLowerCase().includes(q) ||\n        String(p.client?.name ?? \"\").toLowerCase().includes(q) ||\n        String(p.client?.companyName ?? \"\").toLowerCase().includes(q) ||\n        String(p.orderNumber ?? \"\").toLowerCase().includes(q)\n      );\n    });\n  }, [payments, query]);\n\n  const formatDate = (d?: string | null) => {\n    if (!d) return \"--\";\n    try {\n      const dt = new Date(d);\n      const dd = String(dt.getDate()).padStart(2, \"0\");\n      const mm = String(dt.getMonth() + 1).padStart(2, \"0\");\n      const yyyy = dt.getFullYear();\n      return `${dd}/${mm}/${yyyy}`;\n    } catch {\n      return d;\n    }\n  };\n\n  const formatAmount = (v?: number | null, currency?: string | null) => {\n    if (v == null) return \"--\";\n    try {\n      return new Intl.NumberFormat(undefined, {\n        style: \"currency\",\n        currency: currency || \"USD\",\n        maximumFractionDigits: 2,\n      }).format(Number(v));\n    } catch {\n      return `${currency ?? \"$\"} ${Number(v).toFixed(2)}`;\n    }\n  };\n\n  // open modal when Add clicked, but still call optional onAdd\n  const handleOpenAdd = () => {\n    if (onAdd) {\n      try {\n        onAdd();\n      } catch {}\n    }\n    // prefill client if we have clientId\n    setClientField(projectId ? String(projectId) : clientField);\n    setShowAddModal(true);\n  };\n\n  const handleFileClick = () => fileInputRef.current?.click();\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) =>\n    setReceiptFile(e.target.files?.[0] ?? null);\n\n  // Save button: keep simple (logs & close). If you want an API POST, tell me.\n  const handleSavePayment = () => {\n    const payload = {\n      project: projectField,\n      client: clientField,\n      invoice: invoiceField,\n      amount: amountField,\n      currency: currencyField,\n      transactionId: transactionIdField,\n      paymentGateway: paymentGatewayField,\n      remark: remarkField,\n      receiptFileName: receiptFile?.name ?? null,\n    };\n\n  //  console.log(\"Save payment (client-side):\", payload);\n    // close modal\n    setShowAddModal(false);\n  };\n\n  // ---------- Payment Gateway API integration ----------\n  const fetchGateways = async () => {\n    try {\n      const res = await fetch(`${BASE_URL}/api/payment-gateways`, {\n        headers: {\n          Authorization: `Bearer ${typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") || \"\" : \"\"}`,\n          Accept: \"application/json\",\n        },\n      });\n      if (!res.ok) {\n        console.error(\"Failed to fetch gateways\", res.status);\n        setGateways([]);\n        return;\n      }\n      const data = await res.json();\n      if (Array.isArray(data)) {\n        setGateways(data.map((g: any) => ({ id: g.id, name: g.name })));\n      } else {\n        setGateways([]);\n      }\n    } catch (err) {\n      console.error(\"fetchGateways error\", err);\n      setGateways([]);\n    }\n  };\n\n  // Open gateway modal: load list from server\n  const handleOpenGatewayModal = () => {\n    setGatewayInput(\"\");\n    setShowGatewayModal(true);\n    fetchGateways();\n  };\n\n  // Save (create) gateway via POST and close modal (as requested)\n  const handleSaveGateway = async () => {\n    const name = gatewayInput.trim();\n    if (!name) {\n      alert(\"Enter gateway name\");\n      return;\n    }\n\n    try {\n      const token = typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") || \"\" : \"\";\n      const res = await fetch(`${BASE_URL}/api/payment-gateways`, {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ name }),\n      });\n      if (!res.ok) {\n        const txt = await res.text().catch(() => \"\");\n        console.error(\"POST gateway failed\", res.status, txt);\n        alert(\"Failed to create gateway\");\n        return;\n      }\n      const created = await res.json();\n      // update local list (append)\n      setGateways((s) => [...s, { id: created.id, name: created.name }]);\n      // select created gateway in the payment form\n      setPaymentGatewayField(created.name);\n      // close modal (user requested modal to have Save only)\n      setShowGatewayModal(false);\n    } catch (err) {\n      console.error(\"handleSaveGateway error\", err);\n      alert(\"Failed to create gateway\");\n    }\n  };\n\n  // Delete gateway via API then remove from list\n  const handleDeleteGateway = async (id: number) => {\n    if (!confirm(\"Delete this gateway?\")) return;\n    try {\n      const token = typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") || \"\" : \"\";\n      const res = await fetch(`${BASE_URL}/api/payment-gateways/${encodeURIComponent(String(id))}`, {\n        method: \"DELETE\",\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) {\n        console.error(\"Failed delete gateway\", res.status);\n        alert(\"Failed to delete gateway\");\n        return;\n      }\n      setGateways((s) => s.filter((g) => g.id !== id));\n      // if deleted gateway was selected in form, reset selection\n      if (gateways.find((g) => g.id === id && g.name === paymentGatewayField)) {\n        const remaining = gateways.filter((g) => g.id !== id);\n        setPaymentGatewayField(remaining[0]?.name ?? \"\");\n      }\n    } catch (err) {\n      console.error(\"handleDeleteGateway error\", err);\n      alert(\"Failed to delete gateway\");\n    }\n  };\n\n  return (\n    <div className=\"w-full\">\n      <div className=\"bg-white rounded-lg border p-5\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold\">Payments</h3>\n\n          <div className=\"flex items-center gap-3\">\n            <div>\n              <button\n                onClick={handleOpenAdd}\n                className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\n              >\n                + Add Payment\n              </button>\n            </div>\n\n            <div>\n              <input\n                type=\"search\"\n                placeholder=\"Search\"\n                value={query}\n                onChange={(e) => {\n                  setQuery(e.target.value);\n                  if (onSearch) onSearch(e.target.value);\n                }}\n                className=\"border rounded px-3 py-2 text-sm w-56\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* loading / error */}\n        {loading ? (\n          <div className=\"py-6 text-center text-gray-600\">Loading payments...</div>\n        ) : error ? (\n          <div className=\"py-6 text-center text-red-600\">{error}</div>\n        ) : (\n          <div className=\"rounded-lg border overflow-hidden\">\n            {/* header */}\n            <div className=\"bg-[#e8f3ff] px-4 py-3 flex text-sm text-gray-700 font-medium\">\n              <div className=\"w-1/12\">Code</div>\n              <div className=\"w-2/12\">Project</div>\n              <div className=\"w-1/12\">Invoice</div>\n              <div className=\"w-2/12\">Client</div>\n              <div className=\"w-1/12\">Order#</div>\n              <div className=\"w-1/12\">Amount</div>\n              <div className=\"w-1/12\">Paid On</div>\n              <div className=\"w-1/12\">Payment Gateway</div>\n              <div className=\"w-1/12\">Status</div>\n              <div className=\"w-10 text-center\">Action</div>\n            </div>\n\n            <div className=\"px-4 py-4\">\n              {visible.length === 0 ? (\n                <div className=\"text-sm text-gray-500\">No payments to display.</div>\n              ) : (\n                <div className=\"space-y-3\">\n                  {visible.map((p) => (\n                    <div\n                      key={p.id}\n                      className=\"flex items-center rounded-md border px-4 py-3 bg-white\"\n                      style={{ boxShadow: \"0 0 0 1px rgba(0,0,0,0.02) inset\" }}\n                    >\n                      <div className=\"w-1/12 text-sm\">{p.code ?? \"--\"}</div>\n\n                      <div className=\"w-2/12 text-sm\">{p.project ?? \"--\"}</div>\n\n                      <div className=\"w-1/12 text-sm\">{p.invoice ?? \"--\"}</div>\n\n                      <div className=\"w-2/12 flex items-center gap-3 text-sm\">\n                        <div className=\"h-7 w-7 rounded-full overflow-hidden bg-gray-100 relative flex-shrink-0\">\n                          {p.client?.profilePictureUrl ? (\n                            <Image\n                              src={p.client.profilePictureUrl}\n                              alt={p.client?.name ?? \"client\"}\n                              fill\n                              sizes=\"28px\"\n                              style={{ objectFit: \"cover\" }}\n                              unoptimized\n                            />\n                          ) : (\n                            <div className=\"flex items-center justify-center h-full text-xs text-gray-500\">\n                              {p.client?.name?.charAt(0) ?? \"U\"}\n                            </div>\n                          )}\n                        </div>\n\n                        <div className=\"flex flex-col\">\n                          <span className=\"text-sm font-medium\">{p.client?.name ?? \"--\"}</span>\n                          <span className=\"text-xs text-gray-500\">{p.client?.companyName ?? \"\"}</span>\n                        </div>\n                      </div>\n\n                      <div className=\"w-1/12 text-sm\">{p.orderNumber ?? \"--\"}</div>\n\n                      <div className=\"w-1/12 text-sm\">{formatAmount(p.amount, p.currency)}</div>\n\n                      <div className=\"w-1/12 text-sm\">{formatDate(p.paidOn)}</div>\n\n                      <div className=\"w-1/12 text-sm\">{p.paymentGateway ?? \"--\"}</div>\n\n                      <div className=\"w-1/12 text-sm\">\n                        {p.status === \"Complete\" ? (\n                          <div className=\"inline-flex items-center gap-2\">\n                            <span className=\"h-2 w-2 rounded-full bg-emerald-600 block\" />\n                            <span>Complete</span>\n                          </div>\n                        ) : p.status === \"Pending\" ? (\n                          <div className=\"inline-flex items-center gap-2\">\n                            <span className=\"h-2 w-2 rounded-full bg-yellow-500 block\" />\n                            <span>Pending</span>\n                          </div>\n                        ) : (\n                          <div className=\"inline-flex items-center gap-2\">\n                            <span className=\"h-2 w-2 rounded-full bg-red-500 block\" />\n                            <span>{p.status ?? \"--\"}</span>\n                          </div>\n                        )}\n                      </div>\n\n                      <div className=\"w-10 text-center\">\n                        <button\n                          onClick={() => (onAction ? onAction(p) : undefined)}\n                          className=\"p-2 rounded hover:bg-gray-100 inline-flex items-center justify-center\"\n                          title=\"Actions\"\n                        >\n                          <MoreHorizontal size={16} />\n                        </button>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Add Payment Modal (UI exact like screenshot) */}\n      {showAddModal && (\n        <div className=\"fixed inset-0 z-[10000] flex items-start justify-center pt-8 px-4 overflow-y-auto\">\n          <div\n            className=\"fixed inset-0 bg-black/40\"\n            onClick={() => setShowAddModal(false)}\n          />\n          <div className=\"relative w-full max-w-4xl bg-white rounded-xl shadow-2xl overflow-y-auto z-10\">\n            <div className=\"flex items-center justify-between p-4 border-b\">\n              <h3 className=\"text-lg font-semibold\">Add Payment Details</h3>\n              <button\n                onClick={() => setShowAddModal(false)}\n                className=\"p-2 rounded hover:bg-gray-100\"\n                aria-label=\"Close\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n\n            <div className=\"p-6 space-y-6\">\n              <div className=\"rounded-lg border p-4\">\n                <h4 className=\"font-medium mb-3\">Payment Details</h4>\n\n                <div className=\"grid grid-cols-3 gap-4\">\n                  <div>\n                    <label className=\"text-sm text-gray-600\">Project *</label>\n                    <input\n                      className=\"w-full border rounded px-3 py-2\"\n                      value={projectField}\n                      onChange={(e) => setProjectField(e.target.value)}\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"text-sm text-gray-600\">Client *</label>\n                    <input\n                      className=\"w-full border rounded px-3 py-2\"\n                      value={clientField}\n                      onChange={(e) => setClientField(e.target.value)}\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"text-sm text-gray-600\">Invoice *</label>\n                    <input\n                      className=\"w-full border rounded px-3 py-2\"\n                      value={invoiceField}\n                      onChange={(e) => setInvoiceField(e.target.value)}\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"text-sm text-gray-600\">Amount *</label>\n                    <input\n                      className=\"w-full border rounded px-3 py-2\"\n                      value={amountField}\n                      onChange={(e) => setAmountField(e.target.value)}\n                      placeholder=\"---\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"text-sm text-gray-600\">Currency *</label>\n                    <select\n                      value={currencyField}\n                      onChange={(e) => setCurrencyField(e.target.value)}\n                      className=\"w-full border rounded px-3 py-2\"\n                    >\n                      <option value=\"USD\">USD $</option>\n                      <option value=\"USD\">USD ₹</option>\n                      <option value=\"EUR\">EUR €</option>\n                    </select>\n                  </div>\n\n                  <div>\n                    <label className=\"text-sm text-gray-600\">Transaction Id</label>\n                    <input\n                      className=\"w-full border rounded px-3 py-2\"\n                      value={transactionIdField}\n                      onChange={(e) => setTransactionIdField(e.target.value)}\n                    />\n                  </div>\n\n                  <div className=\"col-span-2\">\n                    <label className=\"text-sm text-gray-600\">Payment Gateway</label>\n                    <div className=\"flex gap-2\">\n                      <select\n                        value={paymentGatewayField}\n                        onChange={(e) => setPaymentGatewayField(e.target.value)}\n                        className=\"w-full border rounded px-3 py-2\"\n                      >\n                        {gateways.length > 0 ? (\n                          gateways.map((g) => <option key={g.id} value={g.name}>{g.name}</option>)\n                        ) : (\n                          <>\n                            <option>Net Banking</option>\n                            <option>Credit Card</option>\n                            <option>PayPal</option>\n                          </>\n                        )}\n                      </select>\n                      <button\n                        className=\"px-3 py-2 bg-gray-100 rounded\"\n                        type=\"button\"\n                        onClick={handleOpenGatewayModal}\n                        title=\"Add payment gateway\"\n                      >\n                        Add\n                      </button>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"mt-4\">\n                  <label className=\"text-sm text-gray-600 block mb-2\">Receipt</label>\n                  <div\n                    onClick={handleFileClick}\n                    className=\"border-2 border-dashed rounded-lg h-28 flex items-center justify-center cursor-pointer text-gray-500\"\n                  >\n                    <div className=\"text-center\">\n                      <div className=\"mb-1\">Choose a file</div>\n                      <div className=\"text-xs text-gray-400\">\n                        {receiptFile ? receiptFile.name : \"Drag & drop or click\"}\n                      </div>\n                    </div>\n                    <input\n                      ref={fileInputRef}\n                      type=\"file\"\n                      className=\"hidden\"\n                      onChange={handleFileChange}\n                    />\n                  </div>\n                </div>\n\n                <div className=\"mt-4\">\n                  <label className=\"text-sm text-gray-600 block mb-2\">Remark</label>\n                  <textarea\n                    rows={4}\n                    value={remarkField}\n                    onChange={(e) => setRemarkField(e.target.value)}\n                    className=\"w-full p-3 border rounded\"\n                    placeholder=\"Enter a summary of payment\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex items-center justify-end gap-3\">\n                <button\n                  className=\"px-4 py-2 border rounded\"\n                  onClick={() => setShowAddModal(false)}\n                >\n                  Cancel\n                </button>\n                <button\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded\"\n                  onClick={handleSavePayment}\n                >\n                  Save\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Payment Gateway Modal (uses GET/POST/DELETE) */}\n      {showGatewayModal && (\n        <div className=\"fixed inset-0 z-[11000] flex items-start justify-center pt-12 px-4 overflow-y-auto\">\n          <div\n            className=\"fixed inset-0 bg-black/40\"\n            onClick={() => setShowGatewayModal(false)}\n          />\n          <div className=\"relative w-full max-w-3xl bg-white rounded-xl shadow-2xl overflow-y-auto z-20\">\n            <div className=\"flex items-center justify-between p-4 border-b\">\n              <h3 className=\"text-lg font-semibold\">Add Payment Gateway</h3>\n              <button\n                onClick={() => setShowGatewayModal(false)}\n                className=\"p-2 rounded hover:bg-gray-100\"\n                aria-label=\"Close\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n\n            <div className=\"p-6 space-y-4\">\n              {/* Gateway list table (simple) */}\n              <div className=\"rounded border overflow-hidden\">\n                <div className=\"bg-[#e8f3ff] px-4 py-2 flex text-sm text-gray-700 font-medium\">\n                  <div className=\"w-1/12\">#</div>\n                  <div className=\"w-11/12\">Gateway</div>\n                  <div className=\"w-12 text-center\">Action</div>\n                </div>\n\n                <div className=\"px-4 py-2\">\n                  {gateways.length === 0 ? (\n                    <div className=\"text-sm text-gray-500 p-2\">No gateways</div>\n                  ) : (\n                    gateways.map((g, idx) => (\n                      <div key={g.id} className=\"flex items-center py-2 border-b last:border-b-0\">\n                        <div className=\"w-1/12 text-sm\">{idx + 1}</div>\n                        <div className=\"w-11/12 text-sm\">{g.name}</div>\n                        <div className=\"w-12 text-center\">\n                          <button\n                            onClick={() => handleDeleteGateway(g.id)}\n                            className=\"inline-flex items-center justify-center p-1 rounded hover:bg-red-50 text-red-600\"\n                            title=\"Delete gateway\"\n                          >\n                            <Trash2 size={16} />\n                          </button>\n                        </div>\n                      </div>\n                    ))\n                  )}\n                </div>\n              </div>\n\n              {/* Add field: single input. (No extra 'Add' button here — Save will POST) */}\n              <div>\n                <label className=\"text-sm text-gray-600\">Payment Gateway Name *</label>\n                <input\n                  value={gatewayInput}\n                  onChange={(e) => setGatewayInput(e.target.value)}\n                  placeholder=\"--\"\n                  className=\"w-full border rounded px-3 py-2 mt-2\"\n                />\n              </div>\n\n              <div className=\"flex items-center justify-end gap-3 pt-2\">\n                <button\n                  className=\"px-4 py-2 border rounded\"\n                  onClick={() => setShowGatewayModal(false)}\n                >\n                  Cancel\n                </button>\n\n                {/* Save -> POST -> close modal and select new gateway */}\n                <button\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded\"\n                  onClick={handleSaveGateway}\n                >\n                  Save\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","\n\n\"use client\";\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport Image from \"next/image\";\nimport { MoreHorizontal } from \"lucide-react\";\n\nexport type ProjectFile = {\n  id: number | string;\n  filename?: string | null;\n  url?: string | null;\n  mimeType?: string | null;\n  size?: number | null;\n  uploadedBy?: string | null;\n  createdAt?: string | null;\n};\n\nconst BASE_URL = `${process.env.NEXT_PUBLIC_MAIN}`;\n\nexport default function ProjectDocuments({\n  projectId,\n  authToken,\n}: {\n  projectId: number | string;\n  authToken?: string;\n}) {\n  const fileInputRef = useRef<HTMLInputElement | null>(null);\n\n  const [files, setFiles] = useState<ProjectFile[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [menuOpen, setMenuOpen] = useState<number | string | null>(null);\n  const [uploading, setUploading] = useState<Record<string, boolean>>({});\n  const [error, setError] = useState<string | null>(null);\n\n  /* =========================\n      FETCH PROJECT FILES\n  ========================= */\n  useEffect(() => {\n    if (!projectId) return;\n\n    let mounted = true;\n    setLoading(true);\n    setError(null);\n\n    fetch(`${BASE_URL}/files/projects/${projectId}`, {\n     headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n          },\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (!mounted) return;\n\n        const mapped: ProjectFile[] = (Array.isArray(data) ? data : []).map(\n          (f: any) => ({\n            id: f.id,\n            filename: f.filename,\n            url: f.url,\n            mimeType: f.mimeType,\n            size: f.size,\n            uploadedBy: f.uploadedBy,\n            createdAt: f.createdAt,\n          })\n        );\n\n        setFiles(mapped);\n      })\n      .catch(() => setError(\"Failed to load files\"))\n      .finally(() => mounted && setLoading(false));\n\n    return () => {\n      mounted = false;\n    };\n  }, [projectId, authToken]);\n\n  /* =========================\n      UPLOAD FILE\n  ========================= */\n  const handleFileChange = async (\n    e: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    const localId = `local-${Date.now()}`;\n    const previewUrl = file.type.startsWith(\"image/\")\n      ? URL.createObjectURL(file)\n      : null;\n\n    // optimistic preview\n    setFiles((prev) => [\n      {\n        id: localId,\n        filename: file.name,\n        url: previewUrl,\n        mimeType: file.type,\n      },\n      ...prev,\n    ]);\n\n    setUploading((p) => ({ ...p, [localId]: true }));\n    setError(null);\n\n    try {\n      const formData = new FormData();\n      formData.append(\"file\", file);\n\n      const res = await fetch(\n        `${BASE_URL}/files/projects/${projectId}`,\n        {\n          method: \"POST\",\n          body: formData,\n         headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n          },\n        }\n      );\n\n      if (!res.ok) throw new Error(\"Upload failed\");\n\n      const data = await res.json();\n\n      // 🔥 EXACT RESPONSE MAPPING\n      setFiles((prev) =>\n        prev.map((f) =>\n          f.id === localId\n            ? {\n                id: data.id,\n                filename: data.filename,\n                url: data.url,\n                mimeType: data.mimeType,\n                size: data.size,\n                uploadedBy: data.uploadedBy,\n                createdAt: data.createdAt,\n              }\n            : f\n        )\n      );\n    } catch (err) {\n      setFiles((prev) => prev.filter((f) => f.id !== localId));\n      setError(\"Upload failed\");\n    } finally {\n      setUploading((p) => {\n        const c = { ...p };\n        delete c[localId];\n        return c;\n      });\n      if (fileInputRef.current) fileInputRef.current.value = \"\";\n    }\n  };\n\n  /* =========================\n      DELETE FILE\n  ========================= */\n  const handleDelete = async (id: number | string) => {\n    setFiles((prev) => prev.filter((f) => f.id !== id));\n\n    try {\n      await fetch(`${BASE_URL}/files/projects/${projectId}/${id}`, {\n        method: \"DELETE\",\n        headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n          },\n      });\n    } catch {\n      setError(\"Delete failed\");\n    }\n  };\n\n  const openFile = (\n    url?: string,\n    download?: boolean,\n    name?: string\n  ) => {\n    if (!url) return;\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.target = \"_blank\";\n    if (download) a.download = name || \"file\";\n    document.body.appendChild(a);\n    a.click();\n    a.remove();\n  };\n\n  /* =========================\n      UI\n  ========================= */\n  return (\n    <div className=\"bg-white rounded-lg border p-5\">\n      <h3 className=\"text-lg font-semibold mb-4\">Upload file</h3>\n\n      {/* Upload Box */}\n      <div\n        onClick={() => fileInputRef.current?.click()}\n        className=\"border-2 border-dashed rounded-lg h-28 flex items-center justify-center cursor-pointer text-gray-500\"\n      >\n        <div className=\"text-center\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"40\"\n            height=\"40\"\n            fill=\"#bdbdbd\"\n            viewBox=\"0 0 24 24\"\n            className=\"mx-auto mb-2\"\n          >\n            <path d=\"M12 16a1 1 0 0 1-1-1v-4.586l-1.293 1.293a1 1 0 1 1-1.414-1.414l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.414L13 10.414V15a1 1 0 0 1-1 1Zm7-1a5 5 0 0 0-4.546-4.978A7 7 0 0 0 5.062 9.2 5 5 0 0 0 6 19h13a4 4 0 0 0 0-8Z\" />\n          </svg>\n          <div className=\"text-sm font-medium\">Choose a file</div>\n        </div>\n        <input\n          ref={fileInputRef}\n          type=\"file\"\n          className=\"hidden\"\n          onChange={handleFileChange}\n        />\n      </div>\n\n      {loading && (\n        <p className=\"text-sm mt-3 text-gray-500\">Loading…</p>\n      )}\n      {error && (\n        <p className=\"text-sm mt-3 text-red-500\">{error}</p>\n      )}\n\n      {/* Files Grid */}\n      <div className=\"mt-6 grid grid-cols-6 gap-4\">\n        {files.map((f) => (\n          <div key={String(f.id)}>\n            <div className=\"relative\">\n              <div className=\"h-20 border rounded bg-gray-50 flex items-center justify-center overflow-hidden\">\n                {f.url && f.mimeType?.startsWith(\"image/\") ? (\n                  <Image\n                    src={f.url}\n                    alt={f.filename || \"file\"}\n                    fill\n                    className=\"object-cover\"\n                    unoptimized\n                  />\n                ) : (\n                  <span className=\"text-xs text-gray-400\">File</span>\n                )}\n              </div>\n\n              <button\n                onClick={() =>\n                  setMenuOpen(menuOpen === f.id ? null : f.id)\n                }\n                className=\"absolute top-1 right-1 p-1 rounded hover:bg-white\"\n              >\n                <MoreHorizontal size={16} />\n              </button>\n\n              {menuOpen === f.id && (\n                <div className=\"absolute right-0 mt-7 w-36 bg-white border rounded shadow z-20\">\n                  <button\n                    className=\"w-full text-left px-3 py-2 text-sm hover:bg-gray-50\"\n                    onClick={() =>\n                      openFile(f.url, true, f.filename || undefined)\n                    }\n                  >\n                    Download\n                  </button>\n                  <button\n                    className=\"w-full text-left px-3 py-2 text-sm hover:bg-gray-50\"\n                    onClick={() => openFile(f.url)}\n                  >\n                    View\n                  </button>\n                  <button\n                    className=\"w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-gray-50\"\n                    onClick={() => handleDelete(f.id)}\n                  >\n                    Delete\n                  </button>\n                </div>\n              )}\n            </div>\n\n            <div className=\"mt-2 text-sm\">\n              <div className=\"font-medium truncate\">\n                {f.filename || \"Untitled\"}\n                {uploading[String(f.id)] && (\n                  <span className=\"text-xs text-gray-400\">\n                    {\" \"}\n                    · uploading…\n                  </span>\n                )}\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n","\n\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport {\n  MoreVertical,\n  Globe,\n  Lock,\n  Eye,\n  Edit,\n  Trash2,\n  Plus,\n  X,\n} from \"lucide-react\";\n\n/* ================= TYPES ================= */\nexport type ProjectNoteItem = {\n  id: number;\n  title: string;\n  content?: string | null;\n  isPublic: boolean;\n  createdBy?: string | null;\n  createdAt?: string | null;\n};\n\nconst BASE_URL = `${process.env.NEXT_PUBLIC_MAIN}`;\n\n/* ================= COMPONENT ================= */\nexport default function ProjectNotesTable({\n  projectId,\n  authToken,\n}: {\n  projectId: number;\n  authToken?: string;\n}) {\n  const [notes, setNotes] = useState<ProjectNoteItem[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [menuOpenFor, setMenuOpenFor] = useState<number | null>(null);\n\n  /* ===== ADD ===== */\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [formTitle, setFormTitle] = useState(\"\");\n  const [formContent, setFormContent] = useState(\"\");\n  const [formPublic, setFormPublic] = useState(true);\n  const [saving, setSaving] = useState(false);\n\n  /* ===== VIEW ===== */\n  const [showViewModal, setShowViewModal] = useState(false);\n  const [viewNote, setViewNote] = useState<ProjectNoteItem | null>(null);\n\n  /* ===== EDIT ===== */\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [editId, setEditId] = useState<number | null>(null);\n  const [editTitle, setEditTitle] = useState(\"\");\n  const [editContent, setEditContent] = useState(\"\");\n  const [editPublic, setEditPublic] = useState(true);\n  const [updating, setUpdating] = useState(false);\n\n  const authHeader = {\n    Authorization: `Bearer ${\n      authToken || localStorage.getItem(\"accessToken\") || \"\"\n    }`,\n  };\n\n  /* ================= LOAD NOTES ================= */\n  useEffect(() => {\n    if (!projectId) return;\n\n    const loadNotes = async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        const res = await fetch(\n          `${BASE_URL}/projects/${projectId}/notes`,\n          { headers: authHeader }\n        );\n        if (!res.ok) throw new Error(\"Failed to load notes\");\n\n        const data = await res.json();\n        setNotes(\n          Array.isArray(data)\n            ? data.map((n: any) => ({\n                id: n.id,\n                title: n.title ?? \"Untitled\",\n                content: n.content ?? \"---\",\n                isPublic: !!n.isPublic,\n                createdBy: n.createdBy,\n                createdAt: n.createdAt,\n              }))\n            : []\n        );\n      } catch (e: any) {\n        setError(e.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadNotes();\n  }, [projectId]);\n\n  /* ================= ADD ================= */\n  const saveNote = async () => {\n    if (!formTitle.trim()) {\n      setError(\"Note title is required\");\n      return;\n    }\n\n    setSaving(true);\n    try {\n      const res = await fetch(\n        `${BASE_URL}/projects/${projectId}/notes`,\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            ...authHeader,\n          },\n          body: JSON.stringify({\n            title: formTitle,\n            content: formContent,\n            isPublic: formPublic,\n          }),\n        }\n      );\n\n      if (!res.ok) throw new Error(\"Failed to save note\");\n      const saved = await res.json();\n\n      setNotes((prev) => [\n        {\n          id: saved.id,\n          title: saved.title,\n          content: saved.content ?? \"---\",\n          isPublic: saved.isPublic,\n          createdBy: saved.createdBy,\n          createdAt: saved.createdAt,\n        },\n        ...prev,\n      ]);\n\n      setShowAddModal(false);\n      setFormTitle(\"\");\n      setFormContent(\"\");\n      setFormPublic(true);\n    } catch (e: any) {\n      setError(e.message);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  /* ================= UPDATE (NEW API) ================= */\n  const updateNote = async () => {\n    if (!editId) return;\n\n    setUpdating(true);\n    try {\n      const res = await fetch(\n        `${BASE_URL}/notes/project/${editId}`,\n        {\n          method: \"PUT\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            ...authHeader,\n          },\n          body: JSON.stringify({\n            title: editTitle,\n            content: editContent,\n            isPublic: editPublic,\n          }),\n        }\n      );\n\n      if (!res.ok) throw new Error(\"Failed to update note\");\n      const updated = await res.json();\n\n      setNotes((p) =>\n        p.map((n) =>\n          n.id === editId\n            ? {\n                ...n,\n                title: updated.title,\n                content: updated.content,\n                isPublic: updated.isPublic,\n              }\n            : n\n        )\n      );\n\n      setShowEditModal(false);\n    } catch (e: any) {\n      setError(e.message);\n    } finally {\n      setUpdating(false);\n    }\n  };\n\n  /* ================= DELETE ================= */\n  const deleteNote = async (note: ProjectNoteItem) => {\n    setNotes((p) => p.filter((n) => n.id !== note.id));\n    try {\n      await fetch(\n        `${BASE_URL}/projects/${projectId}/notes/${note.id}`,\n        { method: \"DELETE\", headers: authHeader }\n      );\n    } catch {\n      setError(\"Delete failed\");\n    }\n  };\n\n  /* ================= UI ================= */\n  return (\n    <div className=\"bg-white rounded border\">\n      <div className=\"p-4 flex justify-end border-b\">\n        <button\n          onClick={() => setShowAddModal(true)}\n          className=\"bg-blue-600 text-white px-3 py-2 text-sm rounded flex items-center gap-2\"\n        >\n          <Plus size={16} /> Add Note\n        </button>\n      </div>\n\n      <div className=\"p-4\">\n        {loading && <p>Loading…</p>}\n        {error && <p className=\"text-red-600\">{error}</p>}\n\n        <table className=\"w-full text-sm\">\n          <thead>\n            <tr className=\"bg-blue-50\">\n              <th className=\"px-4 py-3 text-left\">Note Title</th>\n              <th className=\"px-4 py-3\">Note Type</th>\n              <th className=\"px-4 py-3 text-right\">Action</th>\n            </tr>\n          </thead>\n          <tbody>\n            {notes.map((note) => (\n              <tr key={note.id} className=\"border-t\">\n                <td className=\"px-4 py-3\">{note.title}</td>\n                <td className=\"px-4 py-3\">\n                  <div className=\"flex gap-2 items-center\">\n                    {note.isPublic ? <Globe size={14} /> : <Lock size={14} />}\n                    {note.isPublic ? \"Public\" : \"Private\"}\n                  </div>\n                </td>\n                <td className=\"px-4 py-3 text-right relative\">\n                  <button\n                    onClick={() =>\n                      setMenuOpenFor(menuOpenFor === note.id ? null : note.id)\n                    }\n                  >\n                    <MoreVertical size={18} />\n                  </button>\n\n                  {menuOpenFor === note.id && (\n                    <div className=\"absolute right-0 mt-2 bg-white border rounded shadow w-40 z-20\">\n                      <button\n                        className=\"w-full px-3 py-2 flex gap-2 hover:bg-gray-50\"\n                        onClick={() => {\n                          setViewNote(note);\n                          setShowViewModal(true);\n                          setMenuOpenFor(null);\n                        }}\n                      >\n                        <Eye size={14} /> View\n                      </button>\n\n                      <button\n                        className=\"w-full px-3 py-2 flex gap-2 hover:bg-gray-50\"\n                        onClick={() => {\n                          setEditId(note.id);\n                          setEditTitle(note.title);\n                          setEditContent(note.content ?? \"\");\n                          setEditPublic(note.isPublic);\n                          setShowEditModal(true);\n                          setMenuOpenFor(null);\n                        }}\n                      >\n                        <Edit size={14} /> Edit\n                      </button>\n\n                      <button\n                        className=\"w-full px-3 py-2 flex gap-2 text-red-600 hover:bg-gray-50\"\n                        onClick={() => deleteNote(note)}\n                      >\n                        <Trash2 size={14} /> Delete\n                      </button>\n                    </div>\n                  )}\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      {/* ================= VIEW MODAL ================= */}\n      {showViewModal && viewNote && (\n        <ModalWrapper onClose={() => setShowViewModal(false)}>\n          <ModalHeader\n            title={viewNote.title}\n            onClose={() => setShowViewModal(false)}\n          />\n          <div className=\"p-6\">\n            <div className=\"border rounded-lg p-6 space-y-4\">\n              <h4 className=\"font-medium text-gray-700\">\n                Project Note Details\n              </h4>\n\n              <div className=\"grid grid-cols-3 gap-4 text-sm\">\n                <div className=\"text-gray-500\">Note Title</div>\n                <div className=\"col-span-2\">{viewNote.title}</div>\n\n                <div className=\"text-gray-500\">Note Type</div>\n                <div className=\"col-span-2\">\n                  {viewNote.isPublic ? \"Public\" : \"Private\"}\n                </div>\n\n                <div className=\"text-gray-500\">Note Detail</div>\n                <div className=\"col-span-2 whitespace-pre-wrap\">\n                  {viewNote.content || \"---\"}\n                </div>\n              </div>\n            </div>\n          </div>\n        </ModalWrapper>\n      )}\n\n      {/* ================= ADD MODAL ================= */}\n      {showAddModal && (\n        <ModalWrapper onClose={() => !saving && setShowAddModal(false)}>\n          <ModalHeader\n            title=\"Add Project Note\"\n            onClose={() => setShowAddModal(false)}\n          />\n          <ModalBody>\n            <Input label=\"Note Title *\" value={formTitle} onChange={setFormTitle} />\n            <RadioPublicPrivate value={formPublic} onChange={setFormPublic} />\n            <Textarea\n              label=\"Note Detail\"\n              value={formContent}\n              onChange={setFormContent}\n            />\n          </ModalBody>\n          <ModalFooter\n            loading={saving}\n            onCancel={() => setShowAddModal(false)}\n            onSave={saveNote}\n            saveText=\"Save\"\n          />\n        </ModalWrapper>\n      )}\n\n      {/* ================= EDIT MODAL ================= */}\n      {showEditModal && (\n        <ModalWrapper onClose={() => !updating && setShowEditModal(false)}>\n          <ModalHeader\n            title=\"Update Project Note\"\n            onClose={() => setShowEditModal(false)}\n          />\n          <ModalBody>\n            <Input label=\"Note Title *\" value={editTitle} onChange={setEditTitle} />\n            <RadioPublicPrivate value={editPublic} onChange={setEditPublic} />\n            <Textarea\n              label=\"Note Detail\"\n              value={editContent}\n              onChange={setEditContent}\n            />\n          </ModalBody>\n          <ModalFooter\n            loading={updating}\n            onCancel={() => setShowEditModal(false)}\n            onSave={updateNote}\n            saveText=\"Update\"\n          />\n        </ModalWrapper>\n      )}\n    </div>\n  );\n}\n\n/* ================= REUSABLE UI ================= */\n\nfunction ModalWrapper({ children, onClose }: any) {\n  return (\n    <div className=\"fixed inset-0 z-50 flex justify-center pt-12\">\n      <div className=\"absolute inset-0 bg-black/30\" onClick={onClose} />\n      <div className=\"relative bg-white w-[900px] max-w-[95%] rounded border shadow\">\n        {children}\n      </div>\n    </div>\n  );\n}\n\nfunction ModalHeader({ title, onClose }: any) {\n  return (\n    <div className=\"p-4 border-b flex justify-between\">\n      <h4 className=\"font-medium\">{title}</h4>\n      <button onClick={onClose}>\n        <X size={18} />\n      </button>\n    </div>\n  );\n}\n\nfunction ModalBody({ children }: any) {\n  return <div className=\"p-6 space-y-4\">{children}</div>;\n}\n\nfunction ModalFooter({ onCancel, onSave, loading, saveText }: any) {\n  return (\n    <div className=\"p-4 border-t flex justify-center gap-4\">\n      <button className=\"border px-6 py-2 rounded\" onClick={onCancel}>\n        Cancel\n      </button>\n      <button\n        className=\"bg-blue-600 text-white px-6 py-2 rounded\"\n        disabled={loading}\n        onClick={onSave}\n      >\n        {loading ? \"Saving…\" : saveText}\n      </button>\n    </div>\n  );\n}\n\nfunction Input({ label, value, onChange }: any) {\n  return (\n    <div>\n      <label className=\"text-xs text-gray-600\">{label}</label>\n      <input\n        className=\"w-full border px-3 py-2 rounded\"\n        value={value}\n        onChange={(e) => onChange(e.target.value)}\n      />\n    </div>\n  );\n}\n\nfunction Textarea({ label, value, onChange }: any) {\n  return (\n    <div>\n      <label className=\"text-xs text-gray-600\">{label}</label>\n      <textarea\n        className=\"w-full border px-3 py-2 rounded min-h-[120px]\"\n        value={value}\n        onChange={(e) => onChange(e.target.value)}\n      />\n    </div>\n  );\n}\n\nfunction RadioPublicPrivate({ value, onChange }: any) {\n  return (\n    <div className=\"flex gap-6\">\n      <label className=\"flex gap-2 items-center\">\n        <input type=\"radio\" checked={value} onChange={() => onChange(true)} />\n        Public\n      </label>\n      <label className=\"flex gap-2 items-center\">\n        <input type=\"radio\" checked={!value} onChange={() => onChange(false)} />\n        Private\n      </label>\n    </div>\n  );\n}\n","\n\"use client\";\n\nimport { useEffect, useState } from \"react\";\n\n/* ================= TYPES ================= */\ntype ActivityItem = {\n  id: number;\n  projectId: number;\n  actorEmployeeId: string;\n  action: string;\n  metadata?: string | null;\n  createdAt: string;\n};\n\nconst BASE_URL = `${process.env.NEXT_PUBLIC_MAIN}`;\n\n/* ================= HELPERS ================= */\nfunction formatDateParts(dateStr: string) {\n  const d = new Date(dateStr);\n  return {\n    day: d.toLocaleDateString(\"en-US\", { day: \"2-digit\" }),\n    month: d.toLocaleDateString(\"en-US\", { month: \"short\" }),\n    time: d.toLocaleTimeString(\"en-US\", {\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n    }),\n  };\n}\n\nfunction getActionText(action: string) {\n  switch (action) {\n    case \"PROJECT_FILE_UPLOADED\":\n      return \"New file uploaded to the project.\";\n    case \"FILE_DELETED\":\n      return \"File deleted from the project.\";\n    case \"PROJECT_NOTE_CREATED\":\n      return \"New note added to the project.\";\n    case \"PROJECT_NOTE_UPDATED\":\n      return \"Project note updated.\";\n    case \"TASK_CREATED\":\n      return \"New task created.\";\n    case \"TASK_UPDATED\":\n      return \"Task updated.\";\n    case \"TASK_DELETED\":\n      return \"Task deleted.\";\n    case \"TASK_STATUS_CHANGED\":\n      return \"Task status changed.\";\n    case \"TASK_FILE_UPLOADED\":\n      return \"File uploaded to a task.\";\n    case \"TIMELOG_CREATED\":\n      return \"Time logged on the project.\";\n    case \"TIMELOG_UPDATED\":\n      return \"Time log updated.\";\n    case \"TIMELOG_DELETED\":\n      return \"Time log deleted.\";\n    case \"PROJECT_ASSIGNED_EMPLOYEES_ADDED\":\n      return \"Employee assigned to the project.\";\n    case \"DISCUSSION_ROOM_CREATED\":\n      return \"Discussion room created.\";\n    case \"DISCUSSION_MESSAGE_DELETED\":\n      return \"Discussion message deleted.\";\n    case \"PROJECT_CREATED\":\n      return \"Project created.\";\n    default:\n      return action.replaceAll(\"_\", \" \").toLowerCase();\n  }\n}\n\n/* ================= COMPONENT ================= */\nexport default function ActivitySection({\n  projectId,\n}: {\n  projectId: number;\n}) {\n  const [activities, setActivities] = useState<ActivityItem[]>([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (!projectId) return;\n\n    const load = async () => {\n      try {\n        setLoading(true);\n\n        // ✅ TOKEN FETCH (same as other sections)\n        const token =\n          localStorage.getItem(\"token\") ||\n          localStorage.getItem(\"authToken\") ||\n          \"\";\n\n        const res = await fetch(\n          `${BASE_URL}/projects/${projectId}/activity`,\n          {\n            cache: \"no-store\",\n            // headers: {\n            //   \"Content-Type\": \"application/json\",\n            //   Authorization: token ? `Bearer ${token}` : \"\",\n            // },\n\n             headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n          },\n          }\n        );\n\n        // ✅ SAFE PARSE\n        const text = await res.text();\n        const data = text ? JSON.parse(text) : [];\n\n        setActivities(Array.isArray(data) ? data : []);\n      } catch (e) {\n        console.error(\"Failed to load activity\", e);\n        setActivities([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    load();\n  }, [projectId]);\n\n  return (\n    <div>\n      <h3 className=\"text-lg font-medium mb-4\">Activity</h3>\n\n      <div className=\"border rounded-md overflow-hidden\">\n        {loading && (\n          <div className=\"p-6 text-center text-gray-400\">\n            Loading activity…\n          </div>\n        )}\n\n        {!loading && activities.length === 0 && (\n          <div className=\"p-6 text-center text-gray-400\">\n            No activity found\n          </div>\n        )}\n\n        {!loading &&\n          activities.map((item) => {\n            const { day, month, time } = formatDateParts(item.createdAt);\n\n            return (\n              <div\n                key={item.id}\n                className=\"flex gap-4 p-4 border-b last:border-b-0\"\n              >\n                {/* DATE BOX */}\n                <div className=\"w-14 border rounded-md text-center overflow-hidden\">\n                  <div className=\"text-xs text-gray-500 border-b py-1\">\n                    {month}\n                  </div>\n                  <div className=\"text-lg font-semibold py-2\">\n                    {day}\n                  </div>\n                </div>\n\n                {/* CONTENT */}\n                <div className=\"flex-1\">\n                  <div className=\"text-sm text-gray-800\">\n                    {getActionText(item.action)}\n                  </div>\n                  <div className=\"text-xs text-gray-500 mt-1\">\n                    {time}\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n      </div>\n    </div>\n  );\n}\n","\n\n\n\n\n\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport {\n  Plus,\n  Settings,\n  Trash2,\n  X,\n  Upload,\n  MessageCircle,\n} from \"lucide-react\";\nimport DiscussionDetailPage from \"./DiscussionDetailPage\";\n\nconst BASE_URL = `${process.env.NEXT_PUBLIC_MAIN}`;\n\n/* ================= TYPES ================= */\ntype DiscussionCategory = {\n  id: number;\n  categoryName: string;\n  colorCode: string;\n};\n\ntype DiscussionRoom = {\n  id: number;\n  title: string;\n  messageCount: number | null;\n  createdAt: string;\n  updatedAt: string;\n  category: DiscussionCategory;\n  createdByUser?: {\n    name: string;\n    profileUrl?: string;\n  };\n  lastMessage?: {\n    messageType: \"TEXT\" | \"FILE\";\n    content?: string;\n    fileUrl?: string;\n    createdAt?: string;\n  } | null;\n};\n\nexport default function DiscussionSection({\n  projectId,\n}: {\n  projectId: number;\n}) {\n  /* ================= STATE ================= */\n  const [categories, setCategories] = useState<DiscussionCategory[]>([]);\n  const [discussions, setDiscussions] = useState<DiscussionRoom[]>([]);\n  const [loading, setLoading] = useState(false);\n\n  const [showCategoryModal, setShowCategoryModal] = useState(false);\n  const [showDiscussionModal, setShowDiscussionModal] = useState(false);\n  const [openRoomId, setOpenRoomId] = useState<number | null>(null);\n\n  const [categoryForm, setCategoryForm] = useState({\n    categoryName: \"\",\n    colorCode: \"\",\n  });\n\n  const [discussionForm, setDiscussionForm] = useState({\n    categoryId: \"\",\n    title: \"\",\n    initialMessage: \"\",\n    file: null as File | null,\n  });\n\n  /* ================= HELPERS ================= */\n  const formatRepliedAt = (dateStr?: string) => {\n    if (!dateStr) return \"\";\n    const d = new Date(dateStr);\n    const date = d.toLocaleDateString(\"en-GB\");\n    const time = d.toLocaleTimeString(\"en-US\", {\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n    });\n    return `replied at ${date} | ${time}`;\n  };\n\n  /* ================= LOAD CATEGORIES ================= */\n  const loadCategories = async () => {\n    try {\n      const res = await fetch(\n        `${BASE_URL}/api/projects/discussion-categories`,\n        {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n          },\n        }\n      );\n      const data = await res.json();\n      setCategories(Array.isArray(data) ? data : []);\n    } catch {\n      setCategories([]);\n    }\n  };\n\n  /* ================= LOAD DISCUSSIONS ================= */\n  const loadDiscussions = async () => {\n    try {\n      setLoading(true);\n      const res = await fetch(\n        `${BASE_URL}/api/projects/${projectId}/discussion-rooms`,\n        {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n          },\n        }\n      );\n      const data = await res.json();\n      setDiscussions(Array.isArray(data) ? data : []);\n    } catch {\n      setDiscussions([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadCategories();\n    loadDiscussions();\n  }, []);\n\n  /* ================= CREATE / DELETE ================= */\n  const createCategory = async () => {\n    if (!categoryForm.categoryName || !categoryForm.colorCode) return;\n\n    const res = await fetch(\n      `${BASE_URL}/api/projects/discussion-categories`,\n      {\n        method: \"POST\",\n        // headers: {\n        //   Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n        //   \"Content-Type\": \"application/json\",\n        // },\n\n\n headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n          },\n\n        body: JSON.stringify(categoryForm),\n      }\n    );\n\n    const data = await res.json();\n    setCategories((p) => [...p, data]);\n    setCategoryForm({ categoryName: \"\", colorCode: \"\" });\n    setShowCategoryModal(false);\n  };\n\n  const deleteCategory = async (categoryId: number) => {\n    await fetch(\n      `${BASE_URL}/api/projects/discussion-categories/${categoryId}`,\n      {\n        method: \"DELETE\",\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n        },\n      }\n    );\n    loadCategories();\n  };\n\n  const createDiscussion = async () => {\n    if (\n      !discussionForm.categoryId ||\n      !discussionForm.title ||\n      !discussionForm.initialMessage\n    )\n      return;\n\n    const fd = new FormData();\n    fd.append(\"title\", discussionForm.title);\n    fd.append(\"categoryId\", discussionForm.categoryId);\n    fd.append(\"initialMessage\", discussionForm.initialMessage);\n    if (discussionForm.file) fd.append(\"initialFile\", discussionForm.file);\n\n    await fetch(\n      `${BASE_URL}/api/projects/${projectId}/discussion-rooms`,\n      {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n        },\n        body: fd,\n      }\n    );\n\n    setDiscussionForm({\n      categoryId: \"\",\n      title: \"\",\n      initialMessage: \"\",\n      file: null,\n    });\n\n    setShowDiscussionModal(false);\n    loadDiscussions();\n  };\n\n  const deleteDiscussion = async (roomId: number) => {\n    await fetch(\n      `${BASE_URL}/api/projects/${projectId}/discussion-rooms/${roomId}`,\n      {\n        method: \"DELETE\",\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n        },\n      }\n    );\n    loadDiscussions();\n  };\n\n  return (\n    <div>\n      {/* ================= HEADER ================= */}\n      <div className=\"flex items-center justify-between mb-4\">\n        <h3 className=\"text-lg font-medium\">Discussion</h3>\n\n        <div className=\"flex gap-2\">\n          <button\n            onClick={() => setShowDiscussionModal(true)}\n            className=\"flex items-center gap-2 bg-blue-600 text-white px-3 py-1.5 rounded text-sm\"\n          >\n            <Plus size={16} />\n            New Discussion\n          </button>\n\n          <button\n            onClick={() => setShowCategoryModal(true)}\n            className=\"flex items-center gap-2 border border-blue-500 text-blue-600 px-3 py-1.5 rounded text-sm\"\n          >\n            <Settings size={16} />\n            Discussion Category\n          </button>\n        </div>\n      </div>\n\n      {/* ================= DISCUSSION LIST ================= */}\n      {discussions.map((d) => {\n        const repliedAt =\n          d.lastMessage?.createdAt || d.updatedAt || d.createdAt;\n\n        return (\n          <div\n            key={d.id}\n            onClick={() => setOpenRoomId(d.id)}\n            className=\"border rounded-md p-4 mb-3 flex justify-between items-center cursor-pointer\"\n          >\n            <div className=\"flex gap-3 items-start\">\n              <img\n                src={d.createdByUser?.profileUrl || \"/avatar.png\"}\n                className=\"h-10 w-10 rounded-full\"\n              />\n\n              <div>\n                <p className=\"font-medium\">{d.title}</p>\n                <p className=\"text-xs text-gray-400\">\n                  {formatRepliedAt(repliedAt)}\n                </p>\n\n                {d.lastMessage?.messageType === \"FILE\" && (\n                  <img\n                    src={d.lastMessage.fileUrl}\n                    className=\"h-16 mt-2 rounded\"\n                  />\n                )}\n\n                {d.lastMessage?.messageType === \"TEXT\" && (\n                  <p className=\"text-sm text-gray-500\">\n                    {d.lastMessage.content}\n                  </p>\n                )}\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-4 text-sm text-gray-500\">\n              <span className=\"flex items-center gap-1\">\n                <MessageCircle size={14} />\n                {d.messageCount ?? 0}\n              </span>\n\n              <span className=\"flex items-center gap-1\">\n                <span\n                  className=\"h-2 w-2 rounded-full\"\n                  style={{ background: d.category.colorCode }}\n                />\n                {d.category.categoryName}\n              </span>\n\n              <Trash2\n                size={16}\n                className=\"text-red-500 cursor-pointer\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  deleteDiscussion(d.id);\n                }}\n              />\n            </div>\n          </div>\n        );\n      })}\n\n      {discussions.length === 0 && (\n        <div className=\"border rounded-md p-4 text-gray-400 text-center\">\n          Team discussion will appear here\n        </div>\n      )}\n\n      {/* ================= NEW DISCUSSION MODAL ================= */}\n      {showDiscussionModal && (\n        <div className=\"fixed inset-0 bg-black/30 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg w-[700px] p-6\">\n            <div className=\"flex justify-between mb-4\">\n              <h4 className=\"font-medium text-lg\">New Discussion</h4>\n              <X\n                className=\"cursor-pointer\"\n                onClick={() => setShowDiscussionModal(false)}\n              />\n            </div>\n\n            <select\n              value={discussionForm.categoryId}\n              onChange={(e) =>\n                setDiscussionForm({\n                  ...discussionForm,\n                  categoryId: e.target.value,\n                })\n              }\n              className=\"border rounded px-3 py-2 w-full mb-3 text-sm\"\n            >\n              <option value=\"\">Select category</option>\n              {categories.map((c) => (\n                <option key={c.id} value={c.id}>\n                  {c.categoryName}\n                </option>\n              ))}\n            </select>\n\n            <input\n              placeholder=\"Title\"\n              value={discussionForm.title}\n              onChange={(e) =>\n                setDiscussionForm({\n                  ...discussionForm,\n                  title: e.target.value,\n                })\n              }\n              className=\"border rounded px-3 py-2 w-full mb-3 text-sm\"\n            />\n\n            <textarea\n              placeholder=\"Reply\"\n              value={discussionForm.initialMessage}\n              onChange={(e) =>\n                setDiscussionForm({\n                  ...discussionForm,\n                  initialMessage: e.target.value,\n                })\n              }\n              className=\"border rounded px-3 py-2 w-full mb-4 text-sm min-h-[100px]\"\n            />\n\n            <label className=\"border border-dashed rounded flex flex-col items-center justify-center py-6 cursor-pointer text-gray-400 mb-4\">\n              <Upload />\n              <span className=\"text-sm mt-2\">Choose a file</span>\n              <input\n                type=\"file\"\n                hidden\n                onChange={(e) =>\n                  setDiscussionForm({\n                    ...discussionForm,\n                    file: e.target.files?.[0] || null,\n                  })\n                }\n              />\n            </label>\n\n            <div className=\"flex justify-end gap-3\">\n              <button\n                onClick={() => setShowDiscussionModal(false)}\n                className=\"border px-6 py-2 rounded text-sm\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={createDiscussion}\n                className=\"bg-blue-600 text-white px-6 py-2 rounded text-sm\"\n              >\n                Save\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* ================= CATEGORY MODAL ================= */}\n      {showCategoryModal && (\n        <div className=\"fixed inset-0 bg-black/30 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg w-[600px] p-5\">\n            <div className=\"flex justify-between mb-4\">\n              <h4 className=\"font-medium\">Discussion Category</h4>\n              <X\n                className=\"cursor-pointer\"\n                onClick={() => setShowCategoryModal(false)}\n              />\n            </div>\n\n            {categories.map((c) => (\n              <div\n                key={c.id}\n                className=\"flex justify-between items-center border-b py-2 text-sm\"\n              >\n                <div className=\"flex items-center gap-2\">\n                  <span\n                    className=\"h-2 w-2 rounded-full\"\n                    style={{ background: c.colorCode }}\n                  />\n                  {c.categoryName}\n                </div>\n                <Trash2\n                  size={14}\n                  className=\"text-red-500 cursor-pointer\"\n                  onClick={() => deleteCategory(c.id)}\n                />\n              </div>\n            ))}\n\n            <div className=\"grid grid-cols-2 gap-4 mt-4\">\n              <input\n                placeholder=\"Category Name\"\n                value={categoryForm.categoryName}\n                onChange={(e) =>\n                  setCategoryForm({\n                    ...categoryForm,\n                    categoryName: e.target.value,\n                  })\n                }\n                className=\"border rounded px-3 py-2 text-sm\"\n              />\n              <input\n                placeholder=\"#3498db\"\n                value={categoryForm.colorCode}\n                onChange={(e) =>\n                  setCategoryForm({\n                    ...categoryForm,\n                    colorCode: e.target.value,\n                  })\n                }\n                className=\"border rounded px-3 py-2 text-sm\"\n              />\n            </div>\n\n            <div className=\"flex justify-end gap-3 mt-4\">\n              <button\n                onClick={() => setShowCategoryModal(false)}\n                className=\"border px-4 py-2 rounded text-sm\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={createCategory}\n                className=\"bg-blue-600 text-white px-4 py-2 rounded text-sm\"\n              >\n                Save\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* ================= DISCUSSION DETAIL FULL SCREEN ================= */}\n      {openRoomId && (\n        <DiscussionDetailPage\n          projectId={projectId}\n          roomId={openRoomId}\n          onClose={() => setOpenRoomId(null)}\n        />\n      )}\n    </div>\n  );\n}\n","\n\n\n\"use client\";\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport {\n  X,\n  MoreVertical,\n  Upload,\n  FileText,\n  Edit2,\n  CheckCircle,\n  Trash2,\n  Eye,\n  Download,\n} from \"lucide-react\";\n\n/* =================== WEBSOCKET IMPORTS (ADDED) =================== */\nimport SockJS from \"sockjs-client\";\nimport { Client } from \"@stomp/stompjs\";\n/* ================================================================= */\n\nconst BASE_URL = `${process.env.NEXT_PUBLIC_MAIN}`;\n\n/* ================= TYPES ================= */\ntype MessageItem = {\n  id: number;\n  content?: string;\n  messageType: \"TEXT\" | \"FILE\";\n  fileUrl?: string | null;\n  fileName?: string | null;\n  mimeType?: string | null;\n  createdAt: string;\n  sender?: {\n    employeeId?: string;\n    name: string;\n    profileUrl?: string;\n  };\n  isBestReply?: boolean;\n};\n\ntype DiscussionDetail = {\n  id: number;\n  title: string;\n  createdAt: string;\n  category: {\n    categoryName: string;\n    colorCode: string;\n  };\n};\n\nexport default function DiscussionDetailPage({\n  projectId,\n  roomId,\n  onClose,\n}: {\n  projectId: number;\n  roomId: number;\n  onClose?: () => void;\n}) {\n  /* ================= STATE ================= */\n  const [detail, setDetail] = useState<DiscussionDetail | null>(null);\n  const [messages, setMessages] = useState<MessageItem[]>([]);\n  const [reply, setReply] = useState(\"\");\n  const [file, setFile] = useState<File | null>(null);\n\n  const [editMessage, setEditMessage] = useState<MessageItem | null>(null);\n  const [editContent, setEditContent] = useState(\"\");\n\n  const [openMenuId, setOpenMenuId] = useState<number | null>(null);\n  const [openFileMenuId, setOpenFileMenuId] = useState<number | null>(null);\n\n  const bottomRef = useRef<HTMLDivElement | null>(null);\n\n  /* =================== WEBSOCKET REF (ADDED) =================== */\n  const stompClientRef = useRef<Client | null>(null);\n  /* ============================================================= */\n\n  const currentEmployeeId =\n    typeof window !== \"undefined\"\n      ? localStorage.getItem(\"employeeId\")\n      : null;\n\n  /* ================= HELPERS ================= */\n  const formatTime = (dateStr: string) => {\n    const d = new Date(dateStr);\n    return `${d.toLocaleDateString(\"en-GB\")} | ${d.toLocaleTimeString(\"en-US\", {\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n    })}`;\n  };\n\n  const isImage = (mime?: string | null) => mime?.startsWith(\"image/\");\n\n  const downloadFile = (url?: string | null, name?: string | null) => {\n    if (!url) return;\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = name || \"\";\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n  };\n\n  /* ================= LOADERS ================= */\n  const loadDiscussionDetail = async () => {\n    const res = await fetch(\n      `${BASE_URL}/api/projects/${projectId}/discussion-rooms/${roomId}`,\n      {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n        },\n      }\n    );\n    setDetail(await res.json());\n  };\n\n  const loadMessages = async () => {\n    const res = await fetch(\n      `${BASE_URL}/api/projects/discussion-rooms/${roomId}/messages`,\n      {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n        },\n      }\n    );\n\n    const data: MessageItem[] = await res.json();\n\n    data.sort(\n      (a, b) =>\n        new Date(a.createdAt).getTime() -\n        new Date(b.createdAt).getTime()\n    );\n\n    setMessages(data);\n  };\n\n  /* =================== INITIAL LOAD =================== */\n  useEffect(() => {\n    loadDiscussionDetail();\n    loadMessages();\n  }, [roomId]);\n\n  useEffect(() => {\n    bottomRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages]);\n\n  /* =================== WEBSOCKET CONNECTION (ADDED) =================== */\n  useEffect(() => {\n    const socket = new SockJS(`${BASE_URL}/ws-discussion`);\n\n//////console.log(\"dc\",socket)\n\n    const client = new Client({\n      webSocketFactory: () => socket,\n      debug: () => {},\n      connectHeaders: {\n        Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n      },\n      onConnect: () => {\n        client.subscribe(\n          `/topic/discussion-rooms/${roomId}`,\n          (message) => {\n            const payload: MessageItem = JSON.parse(message.body);\n\n            setMessages((prev) => {\n              const exists = prev.some((m) => m.id === payload.id);\n              if (exists) return prev;\n              return [...prev, payload];\n            });\n          }\n        );\n      },\n    });\n\n    client.activate();\n    stompClientRef.current = client;\n\n    return () => {\n      client.deactivate();\n    };\n  }, [roomId]);\n  /* =================================================================== */\n\n\n\n/* ================= SEND REPLY ================= */\n  const sendReply = async () => {\n    if (!reply && !file) return;\n\n    const fd = new FormData();\n    if (reply) fd.append(\"content\", reply);\n    if (file) fd.append(\"file\", file);\n    fd.append(\"parentMessageId\", \"\");\n\n    await fetch(\n      `${BASE_URL}/api/projects/discussion-rooms/${roomId}/messages`,\n      {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n        },\n        body: fd,\n      }\n    );\n\n    setReply(\"\");\n    setFile(null);\n    loadMessages();\n  };\n\n\n\n\n\n\n  /* ================= UPDATE MESSAGE ================= */\n  const updateMessage = async () => {\n    if (!editMessage) return;\n\n    await fetch(\n      `${BASE_URL}/api/projects/discussion-rooms/${roomId}/messages/${editMessage.id}`,\n      {\n        method: \"PUT\",\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n          \"Content-Type\": \"text/plain\",\n        },\n        body: editContent,\n      }\n    );\n\n    setEditMessage(null);\n    setEditContent(\"\");\n  };\n\n  /* ================= DELETE ================= */\n  const deleteMessage = async (id: number) => {\n    setOpenMenuId(null);\n    await fetch(\n      `${BASE_URL}/api/projects/discussion-rooms/${roomId}/messages/${id}`,\n      {\n        method: \"DELETE\",\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n        },\n      }\n    );\n  };\n\n  /* ================= BEST / UNBEST ================= */\n  const toggleBestReply = async (message: MessageItem) => {\n    setOpenMenuId(null);\n\n    const alreadyBest = messages.find(\n      (m) => m.isBestReply && m.id !== message.id\n    );\n\n    if (!message.isBestReply && alreadyBest) {\n      alert(\"Please unmark the current Best Reply first.\");\n      return;\n    }\n\n    const endpoint = message.isBestReply\n      ? \"unmark-best-reply\"\n      : \"mark-best-reply\";\n\n    await fetch(\n      `${BASE_URL}/api/projects/discussion-rooms/${roomId}/messages/${message.id}/${endpoint}`,\n      {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n        },\n      }\n    );\n  };\n\n  if (!detail) return null;\n\n  /* ================= UI (UNCHANGED BELOW) ================= */\n\n  return (\n    <div className=\"fixed inset-0 bg-white z-50 flex flex-col\">\n      {/* HEADER */}\n      <div className=\"flex justify-between items-center px-6 py-4 border-b\">\n        <h3 className=\"text-lg font-medium\">Discussion</h3>\n        <X className=\"cursor-pointer\" onClick={onClose} />\n      </div>\n\n      {/* TITLE */}\n      <div className=\"px-6 py-4 border-b\">\n        <h2 className=\"font-medium text-lg\">{detail.title}</h2>\n        <p className=\"text-sm text-gray-400\">\n          Requested On {formatTime(detail.createdAt)}\n        </p>\n      </div>\n\n      {/* MESSAGES */}\n      <div className=\"flex-1 overflow-y-auto px-6 py-4 space-y-4\">\n        {messages.map((m, index) => {\n          const isInitialMessage = index === 0;\n          const isOwnMessage =\n            m.sender?.employeeId === currentEmployeeId;\n\n          return (\n            <div key={m.id} className=\"border rounded-lg p-4\">\n              <div className=\"flex justify-between items-start\">\n                <div className=\"flex gap-3\">\n                  <img\n                    src={m.sender?.profileUrl || \"/avatar.png\"}\n                    className=\"h-9 w-9 rounded-full\"\n                  />\n\n                  <div className=\"w-full\">\n                    <div className=\"flex items-center gap-2\">\n                      <p className=\"font-medium\">{m.sender?.name}</p>\n                      {m.isBestReply && (\n                        <span className=\"bg-green-100 text-green-700 text-xs font-medium px-3 py-1 rounded-full\">\n                          Best Reply\n                        </span>\n                      )}\n                    </div>\n\n                    {m.messageType === \"TEXT\" && (\n                      <p className=\"text-sm text-gray-600 mt-1\">\n                        {m.content}\n                      </p>\n                    )}\n\n                    {m.messageType === \"FILE\" && m.fileUrl && (\n                      <div className=\"relative mt-2 border rounded p-2 flex items-center justify-between\">\n                        <div className=\"flex items-center gap-2\">\n                          {isImage(m.mimeType) ? (\n                            <img\n                              src={m.fileUrl}\n                              className=\"h-16 w-16 rounded object-cover\"\n                            />\n                          ) : (\n                            <FileText size={32} />\n                          )}\n                          <span className=\"text-sm\">{m.fileName}</span>\n                        </div>\n\n                        <MoreVertical\n                          size={16}\n                          className=\"cursor-pointer\"\n                          onClick={() =>\n                            setOpenFileMenuId(\n                              openFileMenuId === m.id ? null : m.id\n                            )\n                          }\n                        />\n\n                        {openFileMenuId === m.id && (\n                          <div className=\"absolute right-2 top-10 bg-white border rounded shadow w-40 z-50\">\n                            <button\n                              onClick={() => {\n                                window.open(m.fileUrl!, \"_blank\");\n                                setOpenFileMenuId(null);\n                              }}\n                              className=\"flex items-center gap-2 px-4 py-2 text-sm hover:bg-gray-100 w-full\"\n                            >\n                              <Eye size={14} />\n                              View\n                            </button>\n\n                            <button\n                              onClick={() => {\n                                downloadFile(m.fileUrl, m.fileName);\n                                setOpenFileMenuId(null);\n                              }}\n                              className=\"flex items-center gap-2 px-4 py-2 text-sm hover:bg-gray-100 w-full\"\n                            >\n                              <Download size={14} />\n                              Download\n                            </button>\n                          </div>\n                        )}\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                {/* MESSAGE ACTIONS (EDIT / BEST / DELETE) */}\n                <div className=\"relative flex items-center gap-3 text-xs text-gray-400\">\n                  {formatTime(m.createdAt)}\n\n                  {isInitialMessage && isOwnMessage && (\n                    <button\n                      onClick={() => {\n                        setEditMessage(m);\n                        setEditContent(m.content || \"\");\n                      }}\n                      className=\"flex items-center gap-1 border px-3 py-1 rounded\"\n                    >\n                      <Edit2 size={14} />\n                      Edit\n                    </button>\n                  )}\n\n                  {!isInitialMessage && (\n                    <>\n                      <MoreVertical\n                        size={16}\n                        className=\"cursor-pointer\"\n                        onClick={() =>\n                          setOpenMenuId(\n                            openMenuId === m.id ? null : m.id\n                          )\n                        }\n                      />\n\n                      {openMenuId === m.id && (\n                        <div className=\"absolute right-0 top-6 bg-white border rounded shadow w-56 z-50\">\n                          {isOwnMessage && (\n                            <button\n                              onClick={() => {\n                                setEditMessage(m);\n                                setEditContent(m.content || \"\");\n                                setOpenMenuId(null);\n                              }}\n                              className=\"flex items-center gap-2 px-4 py-2 text-sm hover:bg-gray-100 w-full\"\n                            >\n                              <Edit2 size={14} />\n                              Edit\n                            </button>\n                          )}\n\n                          <button\n                            onClick={() => toggleBestReply(m)}\n                            className=\"flex items-center gap-2 px-4 py-2 text-sm hover:bg-gray-100 w-full\"\n                          >\n                            <CheckCircle size={14} />\n                            {m.isBestReply\n                              ? \"Unmark Best Reply\"\n                              : \"Mark as Best Reply\"}\n                          </button>\n\n                          <button\n                            onClick={() => deleteMessage(m.id)}\n                            className=\"flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-gray-100 w-full\"\n                          >\n                            <Trash2 size={14} />\n                            Delete\n                          </button>\n                        </div>\n                      )}\n                    </>\n                  )}\n                </div>\n              </div>\n            </div>\n          );\n        })}\n        <div ref={bottomRef} />\n      </div>\n\n      {/* REPLY BOX */}\n      <div className=\"border-t px-6 py-4\">\n\n                  <h1>Reply *</h1>\n\n        <textarea\n          value={reply}\n          onChange={(e) => setReply(e.target.value)}\n          className=\"border rounded px-3 py-2 w-full mb-3 min-h-[80px]\"\n        />\n\n <h1>Add File *</h1>\n        <label className=\"border border-dashed rounded flex flex-col items-center py-6 cursor-pointer text-gray-400 mb-4\">\n          <Upload />\n          <span className=\"text-sm mt-2\">\n            {file ? file.name : \"Choose a file\"}\n          </span>\n          <input\n            type=\"file\"\n            hidden\n            onChange={(e) => setFile(e.target.files?.[0] || null)}\n          />\n        </label>\n\n        <div className=\"flex justify-end\">\n          <button\n            onClick={sendReply}\n            className=\"bg-blue-600 text-white px-6 py-2 rounded\"\n          >\n            Reply\n          </button>\n        </div>\n      </div>\n\n      {/* EDIT MODAL */}\n      {editMessage && (\n        <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center z-50\">\n          <div className=\"bg-white w-[500px] rounded p-6\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"font-medium\">Update Reply</h3>\n              <X\n                className=\"cursor-pointer\"\n                onClick={() => setEditMessage(null)}\n              />\n            </div>\n\n            <textarea\n              value={editContent}\n              onChange={(e) => setEditContent(e.target.value)}\n              className=\"border rounded w-full p-3 min-h-[100px]\"\n            />\n\n            <div className=\"flex justify-end gap-3 mt-4\">\n              <button\n                onClick={() => setEditMessage(null)}\n                className=\"px-4 py-2 border rounded\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={updateMessage}\n                className=\"px-4 py-2 bg-blue-600 text-white rounded\"\n              >\n                Save\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"names":[],"mappings":"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"}