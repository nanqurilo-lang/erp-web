module.exports=[740395,a=>{"use strict";a.s(["default",()=>C],740395);var b=a.i(187924),c=a.i(572131),d=a.i(699570),e=a.i(866718),f=a.i(580701),g=a.i(206015),h=a.i(335732),i=a.i(613749),j=a.i(50522),k=a.i(587532),l=a.i(879360),m=a.i(177156),n=a.i(510448),o=a.i(101239),p=a.i(781560);let q=(0,a.i(883706).default)("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);var r=a.i(941675),s=a.i(369012),t=a.i(367329),u=a.i(633508),v=a.i(642900);let w=(a,b)=>{let c=new Date(a);return c.setDate(c.getDate()+b),c},x=(a,b)=>a.toDateString()===b.toDateString();function y(){let[a,d]=(0,c.useState)([]),[e,f]=(0,c.useState)(!1),[g,h]=(0,c.useState)(new Date),i=async()=>{try{f(!0);let a=await fetch("https://6jnqmj85-80.inc1.devtunnels.ms/api/projects",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`},credentials:"include"});if(!a.ok)throw Error("Failed to fetch projects");let b=(await a.json()).map(a=>({id:a.id,name:a.name,startDate:a.startDate,deadline:a.deadline}));d(b)}catch(a){console.error("Project fetch error:",a)}finally{f(!1)}};(0,c.useEffect)(()=>{i()},[]);let j=(0,c.useMemo)(()=>{let a=new Date(g.getFullYear(),g.getMonth(),1),b=new Date(g.getFullYear(),g.getMonth()+1,0),c=[],d=new Date(a);d.setDate(a.getDate()-a.getDay());let e=new Date(b);e.setDate(b.getDate()+(6-b.getDay()));let f=d;for(;f<=e;)c.push(new Date(f)),f=w(f,1);return c},[g]);return(0,b.jsxs)("div",{className:"w-full bg-white rounded-xl shadow-sm border p-4 ",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("button",{onClick:()=>h(new Date(g.getFullYear(),g.getMonth()-1,1)),className:"px-3 py-1 border rounded",children:"◀"}),(0,b.jsx)("h2",{className:"text-lg font-semibold",children:g.toLocaleString("default",{month:"long",year:"numeric"})}),(0,b.jsx)("button",{onClick:()=>h(new Date(g.getFullYear(),g.getMonth()+1,1)),className:"px-3 py-1 border rounded",children:"▶"})]}),e&&(0,b.jsx)("div",{className:"text-center py-6 text-sm text-gray-500",children:"Loading projects..."}),(0,b.jsx)("div",{className:"grid grid-cols-7 text-sm font-medium text-center border-b pb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(a=>(0,b.jsx)("div",{children:a},a))}),(0,b.jsx)("div",{className:"mt-2 max-h-[70vh] overflow-y-auto overflow-x-hidden",children:(0,b.jsx)("div",{className:"grid grid-cols-7 gap-px bg-gray-200 mt-2",children:j.map((c,d)=>{let e=a.filter(a=>{let b=new Date(a.startDate),d=new Date(a.deadline);return c>=b&&c<=d}),f=c.getMonth()===g.getMonth();return(0,b.jsxs)("div",{className:`min-h-[110px] bg-white p-1 text-xs ${!f?"opacity-40":""}`,children:[(0,b.jsx)("div",{className:"text-right font-semibold",children:c.getDate()}),(0,b.jsx)("div",{className:"space-y-1 mt-1",children:e.map(a=>{let d=x(c,new Date(a.startDate)),e=x(c,new Date(a.deadline));return(0,b.jsxs)("div",{className:`px-2 py-1 rounded text-white text-[11px]
                        ${d||e?"bg-blue-600":"bg-blue-400"}`,children:[d&&(0,b.jsx)("span",{children:"▶ "}),a.name,e&&(0,b.jsx)("span",{children:" ◀"})]},a.id)})})]},d)})})})]})}let z="https://6jnqmj85-80.inc1.devtunnels.ms",A=["IN_PROGRESS","NOT_STARTED","ON_HOLD","CANCELLED","FINISHED"],B="projectProgressOverrides";function C(){let[a,w]=(0,c.useState)([]),[x,C]=(0,c.useState)(!0),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)("all"),[L,M]=(0,c.useState)("all"),[N,O]=(0,c.useState)(null),[P,Q]=(0,c.useState)(null),[R,S]=(0,c.useState)(!1),[T,U]=(0,c.useState)("all"),[V,W]=(0,c.useState)("all"),[X,Y]=(0,c.useState)("all"),[Z,$]=(0,c.useState)(1),[_,aa]=(0,c.useState)(1),[ab,ac]=(0,c.useState)(!1),[ad,ae]=(0,c.useState)(""),[af,ag]=(0,c.useState)(""),[ah,ai]=(0,c.useState)(""),[aj,ak]=(0,c.useState)(""),[al,am]=(0,c.useState)(!1),[an,ao]=(0,c.useState)("none"),[ap,aq]=(0,c.useState)("none"),[ar,as]=(0,c.useState)("none"),[at,au]=(0,c.useState)(""),[av,aw]=(0,c.useState)(!0),[ax,ay]=(0,c.useState)(""),[az,aA]=(0,c.useState)(null),[aB,aC]=(0,c.useState)("USD"),[aD,aE]=(0,c.useState)(""),[aF,aG]=(0,c.useState)(""),[aH,aI]=(0,c.useState)(!1),aJ=(0,c.useRef)(null),[aK,aL]=(0,c.useState)("you"),[aM,aN]=(0,c.useState)(!1),[aO,aP]=(0,c.useState)(!1),[aQ,aR]=(0,c.useState)([]),[aS,aT]=(0,c.useState)(!1),[aU,aV]=(0,c.useState)(""),[aW,aX]=(0,c.useState)(!1),[aY,aZ]=(0,c.useState)([]),[a$,a_]=(0,c.useState)(!1),[a0,a1]=(0,c.useState)([]),[a2,a3]=(0,c.useState)(!1),[a4,a5]=(0,c.useState)(!1),[a6,a7]=(0,c.useState)(null),[a8,a9]=(0,c.useState)("grid"),[ba,bb]=(0,c.useState)(!1),[bc,bd]=(0,c.useState)(!1),[be,bf]=(0,c.useState)(!1);(0,c.useEffect)(()=>{document.body.style.overflow=R||ab||aO||a4||be?"hidden":"auto"},[R,ab,aO,a4,be]);let bg=Array.from(new Set(a.map(a=>a.name))).filter(Boolean),bh=Array.from(new Set(a.flatMap(a=>(a.assignedEmployees||[]).map(a=>a.name)))).filter(Boolean),bi=aQ.map(a=>({id:String(a.id),name:a.name})),bj=aY.map(a=>({id:String(a.id),name:a.name})),bk=a0.map(a=>({id:String(a.id),name:a.departmentName})),bl=()=>{try{let a=localStorage.getItem(B);if(!a)return{};return JSON.parse(a)}catch{return{}}},bm=(a,b)=>{let c=bl(),d=String(a);null==b?delete c[d]:c[d]=b;try{localStorage.setItem(B,JSON.stringify(c))}catch{}},bn=(0,c.useCallback)(async a=>{C(!0);try{let b=a||D||null;if(!b){w([]),aa(1),C(!1);return}let c=new URLSearchParams({page:String(Z),limit:String(9),search:H||"",status:"all"!==J?J:"",progress:"all"!==L?L:"",project:"all"!==T?T:"",member:"all"!==V?V:"",client:"all"!==X?X:""}),d=await fetch(`${z}/api/projects?${c.toString()}`,{headers:{Authorization:`Bearer ${b}`},cache:"no-store"});if(401===d.status){try{localStorage.removeItem("accessToken")}catch{}E(null),w([]),aa(1),C(!1);return}if(!d.ok){let a=await d.text().catch(()=>"");throw console.error("getProjects failed",d.status,a),Error("Failed to load projects")}let e=await d.json(),f=[];Array.isArray(e)?f=e:(f=e.projects||e.items||[],aa(e.totalPages||Math.max(1,Math.ceil((e.total||9)/9))));let g=bl();Object.keys(g).length>0&&(f=f.map(a=>{let b=g[String(a.id)];return null!=b?{...a,progressPercent:b}:a})),w(f)}catch(a){console.error("Error loading projects:",a),w([]),aa(1)}finally{C(!1)}},[Z,H,J,L,T,V,X,D]),bo=(0,c.useCallback)(async a=>{aT(!0);try{let b=a||D||null,c=await fetch(`${z}/api/projects/category`,{headers:b?{Authorization:`Bearer ${b}`}:void 0,cache:"no-store"});if(!c.ok){console.warn("Failed to load categories, status:",c.status),aR([]),aT(!1);return}let d=await c.json();Array.isArray(d)?d.length>0&&"string"==typeof d[0]?aR(d.map((a,b)=>({id:b+1,name:String(a)}))):aR(d.map(a=>({id:a.id??a.name??Math.random(),name:a.name??String(a)}))):aR([])}catch(a){console.error("Error loading categories:",a),aR([])}finally{aT(!1)}},[D]),bp=async()=>{aP(!0),await bo()},bq=()=>{aP(!1),aV("")},br=async()=>{let a=aU.trim();if(!a)return alert("Category name required");aX(!0);let b=aQ.slice(),c={id:`temp-${Date.now()}`,name:a};aR(a=>[...a,c]);try{let d=D||null,e=await fetch(`${z}/api/projects/category`,{method:"POST",headers:{"Content-Type":"application/json",...d?{Authorization:`Bearer ${d}`}:{}},body:JSON.stringify({name:a}),cache:"no-store"});if(!e.ok){let a=await e.text().catch(()=>"");console.error("Add category failed",e.status,a),aR(b),alert("Failed to add category");return}let f=await e.json().catch(()=>null);if(f&&(f.id||f.name))aR(b=>b.map(b=>b.id===c.id?{id:f.id??f.name??Math.random(),name:f.name??a}:b)),ao(String(f.id??f.name??a));else{await bo();let b=aQ.find(b=>b.name===a);b&&ao(String(b.id))}aV("")}catch(a){console.error("Add category error:",a),aR(b),alert("Failed to add category")}finally{aX(!1)}},bs=async a=>{if(!confirm("Delete this category?"))return;let b=aQ.slice();aR(b=>b.filter(b=>b.id!==a));try{let b=D||null;if(!(await fetch(`${z}/api/projects/category/${encodeURIComponent(String(a))}`,{method:"DELETE",headers:b?{Authorization:`Bearer ${b}`}:void 0,cache:"no-store"})).ok)throw Error("Delete failed")}catch(a){console.error("Delete category failed:",a),aR(b),alert("Failed to delete category")}};async function bt(b,c){if(!D)return alert("Not authenticated");w(a=>a.map(a=>a.id===b?{...a,projectStatus:c}:a));try{let a=new FormData;a.append("status",c);let d=await fetch(`${z}/api/projects/${b}/status`,{method:"PUT",body:a,headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}}),e=null;try{e=await d.json()}catch{e=null}e&&e.id?(w(a=>a.map(a=>a.id===e.id?{...a,...e}:a)),null!=e.progressPercent&&bm(e.id,null)):await bn(D)}catch(b){console.error("Status update failed",b),w(a),alert("Failed to update status on server")}}async function bu(b,c){if(!D)return alert("Not authenticated");let d=Math.max(0,Math.min(100,Math.round(c)));w(a=>a.map(a=>a.id===b?{...a,progressPercent:d}:a)),bm(b,d);try{let c=new FormData;c.append("percent",String(d));let e=await fetch(`${z}/api/projects/${b}/progress`,{method:"PUT",body:c,headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(401===e.status){console.error("patchProgress 401 unauthorized"),w(a),bm(b,null),localStorage.removeItem("accessToken"),E(null),alert("Session expired. Please login again.");return}if(!e.ok){let c=await e.text().catch(()=>"");console.error("patchProgress failed:",e.status,c),w(a),bm(b,null),alert("Failed to update progress on server");return}let f=null;try{f=204!==e.status?await e.json():null}catch{f=null}f&&f.id?(w(a=>a.map(a=>a.id===f.id?{...a,...f}:a)),null!=f.progressPercent&&bm(f.id,null)):await bn(D)}catch(c){console.error("Progress update failed:",c),w(a),bm(b,null),alert("Failed to update progress on server")}}(0,c.useCallback)(async a=>{a_(!0);try{let b=a||D||null,c=await fetch(`${z}/clients`,{headers:b?{Authorization:`Bearer ${b}`}:void 0,cache:"no-store"});if(!c.ok){console.warn("Failed to load clients, status:",c.status),aZ([]),a_(!1);return}let d=await c.json();Array.isArray(d)?aZ(d):Array.isArray(d.items)?aZ(d.items):aZ([])}catch(a){console.error("Error loading clients:",a),aZ([])}finally{a_(!1)}},[D]),(0,c.useCallback)(async a=>{a3(!0);try{let b=a||D||null,c=await fetch(`${z}/admin/departments`,{headers:b?{Authorization:`Bearer ${b}`}:void 0,cache:"no-store"});if(!c.ok){console.warn("Failed to load departments, status:",c.status),a1([]),a3(!1);return}let d=await c.json();Array.isArray(d)?a1(d):Array.isArray(d.items)?a1(d.items):a1([])}catch(a){console.error("Error loading departments:",a),a1([])}finally{a3(!1)}},[D]),(0,c.useEffect)(()=>{let a=setTimeout(()=>{I(a=>a!==F?($(1),F):a)},500);return()=>clearTimeout(a)},[F]),(0,c.useEffect)(()=>{},[]),(0,c.useEffect)(()=>{D&&bn(D)},[bn,D,Z,H,J,L,T,V,X]);let bv=async b=>{if(!D)return alert("Not authenticated");let c=a.findIndex(a=>a.id===b);if(-1===c)return;let d=!a[c].pinned;w(a=>a.map(a=>a.id===b?{...a,pinned:d}:a));try{let a=await fetch(`${z}/projects/${b}/pin`,{method:"POST",headers:{Authorization:`Bearer ${D}`,"Content-Type":"application/json"},body:JSON.stringify({pinned:d}),cache:"no-store"});if(!a.ok)throw Error("Pin failed");try{let b=await a.json();b&&b.id?w(a=>a.map(a=>a.id===b.id?{...a,...b}:a)):await bn(D)}catch{await bn(D)}}catch(b){console.error(b),w(a),alert("Failed to toggle pin")}},bw=async b=>{if(!D)return alert("Not authenticated");let c=a.findIndex(a=>a.id===b);if(-1===c)return;let d=!a[c].archived;w(a=>a.map(a=>a.id===b?{...a,archived:d}:a));try{let a=await fetch(`${z}/projects/${b}/archive`,{method:"POST",headers:{Authorization:`Bearer ${D}`,"Content-Type":"application/json"},body:JSON.stringify({archived:d}),cache:"no-store"});if(!a.ok)throw Error("Archive toggle failed");try{let b=await a.json();b&&b.id?w(a=>a.map(a=>a.id===b.id?{...a,...b}:a)):await bn(D)}catch{await bn(D)}}catch(b){console.error("Archive toggle error:",b),w(a),alert("Failed to toggle archive state on server")}},bx=async b=>{if(confirm("Delete this project?")){w(a=>a.filter(a=>a.id!==b));try{if(!(await fetch(`${z}/api/projects/${b}`,{method:"DELETE",headers:{Authorization:D?`Bearer ${D}`:""},cache:"no-store"})).ok)throw Error("Delete failed");bm(b,null)}catch(b){console.error(b),w(a),alert("Failed to delete project")}}},by=()=>{ae(""),ag(""),ai(""),ak(""),am(!1),ao("none"),aq("none"),as("none"),au(""),aw(!0),ay(""),aA(null),aC("USD"),aE(""),aG(""),aI(!1),aL("you"),aN(!1)},bz=async()=>{if(!af.trim())return alert("Project Name is required");aN(!0);try{let a=ad.trim();if(!a){let b=af.toString().normalize("NFKD").replace(/[\u0300-\u036F]/g,"").toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"");a=b?b.toUpperCase().replace(/-/g,"").slice(0,10):`PRJ${Date.now().toString().slice(-6)}`}let b=new FormData;b.append("shortCode",a),b.append("name",af),b.append("projectName",af),b.append("startDate",ah||""),al?b.append("deadline",""):b.append("deadline",aj||""),b.append("noDeadline",String(!!al)),b.append("category","none"===an?"":String(an)),b.append("department","none"===ap?"":String(ap)),b.append("clientId","none"===ar?"":String(ar)),b.append("summary",at||""),b.append("tasksNeedAdminApproval",String(!!av));let c=Array.isArray(ax)?ax:String(ax||"").split(",").map(a=>a.trim()).filter(Boolean);b.append("assignedEmployeeIds",JSON.stringify(c)),az&&b.append("companyFile",az),b.append("currency",aB||""),b.append("budget",""!==aD?String(aD):"0"),b.append("hoursEstimate",""!==aF?String(aF):"0"),b.append("allowManualTimeLogs",String(!!aH)),b.append("addedBy",String(aK||""));let d=D||null,e=await fetch(`${z}/api/projects`,{method:"POST",body:b,headers:d?{Authorization:`Bearer ${d}`}:void 0});if(!e.ok){let a=await e.text().catch(()=>"");console.error("Create project failed",e.status,a);let b=`Failed to create project (status ${e.status})`;try{let c=JSON.parse(a||"{}");c&&c.message&&(b=c.message)}catch{}alert(b),aN(!1);return}try{await e.json()}catch{}await bn(d),ac(!1),by()}catch(a){console.error("Create project error",a),alert("Failed to create project")}finally{aN(!1)}},bA=a=>a.shortCode||a.code||a.projectCode||`RTA-${String(a.id).padStart(2,"0")}`,bB=()=>S(!1),bC=async()=>{$(1),await bn(D??null),S(!1)},bD=async()=>{U("all"),W("all"),Y("all"),$(1),await bn(D??null),S(!1)},bE=(0,c.useMemo)(()=>a.filter(a=>{if("all"!==J&&(!a.projectStatus||a.projectStatus!==J))return!1;if("all"!==L){if("number"!=typeof a.progressPercent)return!1;let b=a.progressPercent;if("0-33"===L&&!(b>=0&&b<=33)||"34-66"===L&&!(b>=34&&b<=66)||"67-100"===L&&!(b>=67&&b<=100))return!1}if(N||P){let b=a.startDate?new Date(a.startDate):null,c=a.deadline?new Date(a.deadline):null;if(!b||!c||N&&b<new Date(N)||P&&c>new Date(P))return!1}return!0}),[a,J,L,N,P]);if(x)return(0,b.jsx)("p",{className:"p-8 text-center",children:"Loading projects..."});let bF=({p:a})=>{let c=a.startDate?new Date(a.startDate).toLocaleDateString():"-",e=a.noDeadline?"No Deadline":a.deadline?new Date(a.deadline).toLocaleDateString():"-",f=Math.max(0,Math.min(100,a.progressPercent??0)),i=null==f?"bg-gray-300":f<33?"bg-red-500":f<66?"bg-yellow-400":"bg-green-500";return(0,b.jsxs)(g.TableRow,{className:"bg-white hover:bg-gray-50",children:[(0,b.jsx)(g.TableCell,{className:"py-4 px-4 align-top w-28",children:(0,b.jsx)("div",{className:"text-sm font-medium",children:bA(a)})}),(0,b.jsx)(g.TableCell,{className:"py-4 px-4 align-top",children:(0,b.jsx)("div",{className:"font-medium",children:a.name})}),(0,b.jsx)(g.TableCell,{className:"py-4 px-4 align-top",children:(0,b.jsx)("div",{className:"flex items-center",children:(0,b.jsxs)("div",{className:"flex -space-x-2",children:[(a.assignedEmployees||[]).slice(0,3).map(a=>(0,b.jsx)("div",{className:"w-8 h-8 rounded-full border-2 border-white overflow-hidden bg-gray-100",title:a.name,children:a.profileUrl?(0,b.jsx)("img",{src:a.profileUrl,alt:a.name,className:"w-full h-full object-cover"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center text-xs text-white bg-gray-400",children:(a.name||"U").charAt(0)})},a.employeeId)),(a.assignedEmployees||[]).length>3&&(0,b.jsxs)("div",{className:"w-8 h-8 rounded-full border-2 border-white bg-gray-200 text-xs text-gray-700 flex items-center justify-center",children:["+",(a.assignedEmployees||[]).length-3]})]})})}),(0,b.jsx)(g.TableCell,{className:"py-4 px-4 align-top text-sm",children:c}),(0,b.jsx)(g.TableCell,{className:"py-4 px-4 align-top text-sm",children:e}),(0,b.jsx)(g.TableCell,{className:"py-4 px-4 align-top",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center",children:a.client?.profilePictureUrl?(0,b.jsx)("img",{src:a.client.profilePictureUrl,alt:a.client?.name,className:"w-full h-full object-cover"}):(0,b.jsx)("div",{className:"text-xs text-gray-500",children:(a.client?.name||"C").charAt(0)})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-medium",children:a.client?.name??"Client"}),(0,b.jsx)("div",{className:"text-xs text-gray-400",children:a.client?.company??""})]})]})}),(0,b.jsx)(g.TableCell,{className:"py-4 px-4 align-top",children:(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)("div",{className:"w-44 cursor-pointer",title:"Click to filter by this progress bucket",onClick:()=>{var b;null==(b=a.progressPercent??null)?M("all"):b<=33?M("0-33"):b<=66?M("34-66"):M("67-100"),$(1)},children:(0,b.jsxs)("div",{className:"relative bg-gray-200 h-4 rounded-full overflow-hidden",children:[(0,b.jsx)("div",{className:`h-4 rounded-full ${i}`,style:{width:`${f}%`}}),(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,b.jsxs)("span",{className:"text-xs font-semibold text-white drop-shadow-sm",children:[f,"%"]})})]})}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("button",{className:`inline-flex items-center gap-2 px-2 py-1 rounded-full text-xs ${function(a){switch(a){case"IN_PROGRESS":return"bg-green-600 text-white";case"NOT_STARTED":default:return"bg-gray-400 text-white";case"ON_HOLD":return"bg-yellow-500 text-white";case"CANCELLED":return"bg-red-600 text-white";case"FINISHED":return"bg-blue-600 text-white"}}(a.projectStatus)}`,title:"Click to filter by this status",onClick:()=>{K(a.projectStatus??"all"),$(1)},children:[(0,b.jsx)("span",{className:"w-2 h-2 rounded-full",style:{background:function(a){switch(a){case"IN_PROGRESS":return"#10B981";case"NOT_STARTED":default:return"#9CA3AF";case"ON_HOLD":return"#F59E0B";case"CANCELLED":return"#EF4444";case"FINISHED":return"#3B82F6"}}(a.projectStatus)}}),(0,b.jsx)("span",{children:a.projectStatus??"N/A"})]}),(0,b.jsx)("div",{className:"relative",children:(0,b.jsxs)(h.DropdownMenu,{children:[(0,b.jsx)(h.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)("button",{className:"inline-flex items-center gap-1 px-2 py-1 border rounded text-sm bg-white hover:bg-gray-50",children:(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"▾"})})}),(0,b.jsxs)(h.DropdownMenuContent,{align:"start",className:"w-64 p-2",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Change status"}),(0,b.jsx)("div",{className:"space-y-1",children:A.map(c=>(0,b.jsx)("button",{onClick:()=>bt(a.id,c),className:`w-full text-left px-3 py-2 rounded text-sm hover:bg-gray-50 ${c===a.projectStatus?"font-medium":""}`,children:c},c))}),(0,b.jsx)(h.DropdownMenuSeparator,{}),(0,b.jsx)("div",{className:"text-xs text-gray-500 mt-2 mb-1",children:"Adjust progress"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("input",{type:"range",min:0,max:100,value:a.progressPercent??0,onChange:b=>{let c=Number(b.target.value);w(b=>b.map(b=>b.id===a.id?{...b,progressPercent:c}:b))},onMouseUp:async b=>{let c=Number(b.target.value);await bu(a.id,c)},onTouchEnd:async b=>{let c=Number(b.target.value);await bu(a.id,c)},className:"w-full"}),(0,b.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,b.jsx)("span",{children:"0%"}),(0,b.jsxs)("span",{children:[a.progressPercent??0,"%"]}),(0,b.jsx)("span",{children:"100%"})]})]}),(0,b.jsx)("div",{className:"flex justify-end mt-2",children:(0,b.jsx)(d.Button,{size:"sm",variant:"ghost",onClick:()=>bn(D??null),children:"Refresh"})})]})]})})]})]})}),(0,b.jsx)(g.TableCell,{className:"py-4 px-4 align-top text-right",children:(0,b.jsxs)(h.DropdownMenu,{children:[(0,b.jsx)(h.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,b.jsx)(l.MoreVertical,{className:"h-4 w-4"})})}),(0,b.jsxs)(h.DropdownMenuContent,{align:"end",className:"w-48",children:[(0,b.jsxs)(h.DropdownMenuItem,{onClick:()=>window.location.assign(`/work/project/${a.id}`),children:[(0,b.jsx)(m.Eye,{className:"h-4 w-4 mr-2"})," View"]}),(0,b.jsxs)(h.DropdownMenuItem,{onClick:()=>{a7(a.id),a5(!0)},children:[(0,b.jsx)(n.Edit2,{className:"h-4 w-4 mr-2"})," Edit"]}),(0,b.jsxs)(h.DropdownMenuItem,{onClick:()=>bv(a.id),children:[(0,b.jsx)(o.Pin,{className:"h-4 w-4 mr-2"})," ",a.pinned?"Unpin":"Pin"," Project"]}),(0,b.jsxs)(h.DropdownMenuItem,{onClick:()=>bw(a.id),children:[(0,b.jsx)(v.Archive,{className:"h-4 w-4 mr-2"})," ",a.archived?"Unarchive":"Archive"]}),(0,b.jsx)(h.DropdownMenuSeparator,{}),(0,b.jsxs)(h.DropdownMenuItem,{onClick:()=>bx(a.id),className:"text-red-600",children:[(0,b.jsx)(p.Trash2,{className:"h-4 w-4 mr-2"})," Delete"]})]})]})})]},a.id)},bG=a=>{"calendar"===a?(bf(!be),a9(be?"grid":"calendar")):(bf(!1),a9(a))};return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("main",{className:"w-full",children:(0,b.jsxs)("div",{className:"max-w-[1200px] mx-auto p-6  overflow-y-auto overflow-x-hidden",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg border p-3 mb-4 flex items-center gap-4 overflow-y-auto overflow-x-hidden",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Duration"}),(0,b.jsx)(e.Input,{type:"date",value:N??"",onChange:a=>{O(a.target.value||null),$(1)},className:"w-40"}),(0,b.jsx)("span",{className:"text-gray-400 text-sm",children:"to"}),(0,b.jsx)(e.Input,{type:"date",value:P??"",onChange:a=>{Q(a.target.value||null),$(1)},className:"w-40"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Status"}),(0,b.jsxs)(f.Select,{value:J,onValueChange:a=>{K(a),$(1)},children:[(0,b.jsx)(f.SelectTrigger,{className:"w-40",children:(0,b.jsx)(f.SelectValue,{placeholder:"All"})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"all",children:"All"}),(0,b.jsx)(f.SelectItem,{value:"IN_PROGRESS",children:"In Progress"}),(0,b.jsx)(f.SelectItem,{value:"NOT_STARTED",children:"Not Started"}),(0,b.jsx)(f.SelectItem,{value:"ON_HOLD",children:"On Hold"}),(0,b.jsx)(f.SelectItem,{value:"CANCELLED",children:"Cancelled"}),(0,b.jsx)(f.SelectItem,{value:"FINISHED",children:"Finished"})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Progress"}),(0,b.jsxs)(f.Select,{value:L,onValueChange:a=>{M(a),$(1)},children:[(0,b.jsx)(f.SelectTrigger,{className:"w-40",children:(0,b.jsx)(f.SelectValue,{placeholder:"All"})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"all",children:"All"}),(0,b.jsx)(f.SelectItem,{value:"0-33",children:"0 - 33%"}),(0,b.jsx)(f.SelectItem,{value:"34-66",children:"34 - 66%"}),(0,b.jsx)(f.SelectItem,{value:"67-100",children:"67 - 100%"})]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("div",{children:(0,b.jsx)(d.Button,{className:"bg-blue-600 text-white",onClick:()=>ac(!0),children:"+ Add Project"})}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 border rounded px-2 py-1 bg-white",children:[(0,b.jsx)(k.Search,{className:"w-4 h-4 text-gray-400"}),(0,b.jsx)(e.Input,{placeholder:"Search",value:F,onChange:a=>G(a.target.value),onKeyDown:a=>{"Enter"===a.key&&(I(F),$(1))},className:"border-0 bg-transparent focus-visible:ring-0"})]}),(0,b.jsxs)("div",{className:"flex items-center bg-white border rounded-lg overflow-hidden",children:[(0,b.jsx)("button",{onClick:()=>bG("list"),className:`px-3 py-2 hover:bg-gray-50 ${"list"===a8&&!be?"bg-gray-100":""}`,title:"List view",children:(0,b.jsx)(t.List,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>bG("grid"),className:`px-3 py-2 hover:bg-gray-50 ${"grid"===a8&&!be?"bg-violet-600 text-white":""}`,title:"Grid / Table view",children:(0,b.jsx)(q,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>{bb(a=>!a),!ba&&bc&&bd(!1)},className:`px-3 py-2 hover:bg-gray-50 ${ba?"bg-gray-100":""}`,title:ba?"Showing archived projects":"Show archived projects",children:(0,b.jsx)(v.Archive,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>{bd(a=>!a),!bc&&ba&&bb(!1)},className:`px-3 py-2 hover:bg-gray-50 ${bc?"bg-gray-100":""}`,title:bc?"Showing pinned only":"Show pinned only",children:(0,b.jsx)(o.Pin,{className:"w-4 h-4"})})]}),(0,b.jsx)("button",{onClick:()=>bG("calendar"),className:`w-10 h-10 rounded bg-white border flex items-center justify-center ${be?"ring-2 ring-indigo-300":""}`,title:"Calendar view",children:(0,b.jsx)(r.Calendar,{className:"w-4 h-4 text-gray-600"})})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border overflow-hidden",children:[(0,b.jsxs)("div",{className:"bg-blue-50 px-6 py-3 border-b flex items-center justify-between",children:[(0,b.jsxs)("h2",{className:"font-semibold text-gray-900",children:["Projects (",bE.length,")"]}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:ba?"Viewing: Archived":bc?"Viewing: Pinned":"All active"})]}),(0,b.jsx)("div",{className:"overflow-auto p-4",children:"calendar"===a8||be?(0,b.jsx)(y,{}):"list"===a8?(0,b.jsx)("div",{children:0===bE.length?(0,b.jsx)("div",{className:"p-6 text-center text-gray-500",children:"No projects found"}):(0,b.jsx)("div",{className:"space-y-3",children:bE.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between border rounded p-3 bg-white",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"text-sm font-medium w-28",children:bA(a)}),(0,b.jsx)("div",{className:"font-medium",children:a.name}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a.client?.name??"Client"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"text-sm",children:[a.progressPercent??0,"%"]}),(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>window.location.assign(`/work/project/${a.id}`),children:"View"})]})]},a.id))})}):(0,b.jsx)("div",{children:(0,b.jsxs)(g.Table,{children:[(0,b.jsx)(g.TableHeader,{children:(0,b.jsxs)(g.TableRow,{className:"bg-blue-50",children:[(0,b.jsx)(g.TableHead,{className:"px-4 py-3",children:"Code"}),(0,b.jsx)(g.TableHead,{className:"px-4 py-3",children:"Project Name"}),(0,b.jsx)(g.TableHead,{className:"px-4 py-3",children:"Members"}),(0,b.jsx)(g.TableHead,{className:"px-4 py-3",children:"Start Date"}),(0,b.jsx)(g.TableHead,{className:"px-4 py-3",children:"Deadline"}),(0,b.jsx)(g.TableHead,{className:"px-4 py-3",children:"Client"}),(0,b.jsx)(g.TableHead,{className:"px-4 py-3",children:"Status"}),(0,b.jsx)(g.TableHead,{className:"px-4 py-3 text-right",children:"Action"})]})}),(0,b.jsx)(g.TableBody,{children:0===bE.length?(0,b.jsx)(g.TableRow,{children:(0,b.jsx)(g.TableCell,{colSpan:8,className:"py-8 text-center text-gray-500",children:"No projects found"})}):bE.map(a=>(0,b.jsx)(bF,{p:a},a.id))})]})})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,b.jsxs)("div",{className:"text-sm text-gray-600",children:["Result per page -",bE.length?bE.length:0]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:()=>{$(a=>Math.max(1,a-1))},disabled:1===Z,children:[(0,b.jsx)(i.ChevronLeft,{})," Prev"]}),(0,b.jsxs)("div",{className:"text-sm text-gray-600",children:["Page ",Z," of ",_]}),(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:()=>{$(a=>Math.min(_,a+1))},disabled:Z===_,children:["Next ",(0,b.jsx)(j.ChevronRight,{})]})]})]})]})}),(0,b.jsx)("div",{"aria-hidden":!R,onClick:bB,className:`fixed inset-0 transition-opacity duration-300 z-[9990] ${R?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,style:{backgroundColor:"rgba(0,0,0,0.3)"}}),(0,b.jsxs)("aside",{"aria-hidden":!R,className:`fixed right-0 top-0 h-full w-[360px] bg-white shadow-xl transform transition-transform duration-300 z-[9999] ${R?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(s.Filter,{className:"w-5 h-5"}),(0,b.jsx)("h3",{className:"font-semibold",children:"Filters"})]}),(0,b.jsx)("button",{onClick:bB,className:"p-2 rounded hover:bg-gray-100",children:(0,b.jsx)(u.X,{className:"w-4 h-4"})})]}),(0,b.jsxs)("div",{className:"p-4 space-y-4 overflow-auto h-[calc(100%-140px)]",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Project"}),(0,b.jsxs)(f.Select,{value:T,onValueChange:a=>U(a),children:[(0,b.jsx)(f.SelectTrigger,{className:"w-full rounded border px-3 py-2",children:(0,b.jsx)(f.SelectValue,{placeholder:"All"})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"all",children:"All"}),bg.map(a=>(0,b.jsx)(f.SelectItem,{value:a,children:a},a))]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Project Members"}),(0,b.jsxs)(f.Select,{value:V,onValueChange:a=>W(a),children:[(0,b.jsx)(f.SelectTrigger,{className:"w-full rounded border px-3 py-2",children:(0,b.jsx)(f.SelectValue,{placeholder:"All"})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"all",children:"All"}),bh.map(a=>(0,b.jsx)(f.SelectItem,{value:a,children:a},a))]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Client"}),(0,b.jsxs)(f.Select,{value:X,onValueChange:a=>Y(a),children:[(0,b.jsx)(f.SelectTrigger,{className:"w-full rounded border px-3 py-2",children:(0,b.jsx)(f.SelectValue,{placeholder:"All"})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"all",children:"All"}),bj.map(a=>(0,b.jsx)(f.SelectItem,{value:a.id,children:a.name},a.id))]})]})]})]}),(0,b.jsxs)("div",{className:"p-4 border-t flex items-center justify-between gap-2",children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:bD,children:"Reset"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(d.Button,{variant:"ghost",onClick:bB,children:"Close"}),(0,b.jsx)(d.Button,{className:"bg-blue-600 text-white",onClick:bC,children:"Apply"})]})]})]}),ab&&(0,b.jsxs)("div",{className:"fixed inset-0 z-[10000] flex items-start justify-center pt-12 px-4 overflow-y-auto",children:[(0,b.jsx)("div",{className:"fixed inset-0 bg-black/40",onClick:()=>{ac(!1),by()}}),(0,b.jsxs)("div",{className:"relative w-full max-w-4xl bg-white rounded-xl shadow-2xl overflow-y-auto z-10",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Add Project"}),(0,b.jsx)("button",{onClick:()=>{ac(!1),by()},className:"p-2 rounded hover:bg-gray-100",children:(0,b.jsx)(u.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,b.jsx)("h4",{className:"font-medium mb-3",children:"Project Details"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Short Code *"}),(0,b.jsx)(e.Input,{value:ad,onChange:a=>ae(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Project Name *"}),(0,b.jsx)(e.Input,{value:af,onChange:a=>ag(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Start Date *"}),(0,b.jsx)(e.Input,{type:"date",value:ah,onChange:a=>ai(a.target.value)})]}),(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Deadline *"}),(0,b.jsx)(e.Input,{type:"date",value:aj,onChange:a=>ak(a.target.value),disabled:al})]}),(0,b.jsx)("div",{className:"pt-6",children:(0,b.jsxs)("label",{className:"inline-flex items-center gap-2 text-sm text-gray-600",children:[(0,b.jsx)("input",{type:"checkbox",checked:al,onChange:a=>am(a.target.checked)}),(0,b.jsx)("span",{className:"text-xs",children:"There is no project deadline"})]})})]})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Project Category *"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(f.Select,{value:an,onValueChange:a=>ao(a),children:[(0,b.jsx)(f.SelectTrigger,{className:"w-full",children:(0,b.jsx)(f.SelectValue,{placeholder:"--"})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"none",children:"--"}),bi.map(a=>(0,b.jsx)(f.SelectItem,{value:a.id,children:a.name},a.id))]})]}),(0,b.jsx)(d.Button,{variant:"outline",onClick:bp,children:"Add"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Department *"}),(0,b.jsxs)(f.Select,{value:ap,onValueChange:a=>aq(a),children:[(0,b.jsx)(f.SelectTrigger,{className:"w-full",children:(0,b.jsx)(f.SelectValue,{placeholder:"--"})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"none",children:"--"}),bk.map(a=>(0,b.jsx)(f.SelectItem,{value:a.id,children:a.name},a.id))]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Client *"}),(0,b.jsxs)(f.Select,{value:ar,onValueChange:a=>as(a),children:[(0,b.jsx)(f.SelectTrigger,{className:"w-full",children:(0,b.jsx)(f.SelectValue,{placeholder:"--"})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"none",children:"--"}),bj.map(a=>(0,b.jsx)(f.SelectItem,{value:a.id,children:a.name},a.id))]})]})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Project Summary"}),(0,b.jsx)("textarea",{rows:4,value:at,onChange:a=>au(a.target.value),className:"w-full p-2 border rounded"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Tasks needs approval by Admin"}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)("input",{type:"radio",name:"approval",checked:!0===av,onChange:()=>aw(!0)}),(0,b.jsx)("span",{className:"text-sm",children:"Yes"})]}),(0,b.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)("input",{type:"radio",name:"approval",checked:!1===av,onChange:()=>aw(!1)}),(0,b.jsx)("span",{className:"text-sm",children:"No"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Add Project Members *"}),(0,b.jsx)(e.Input,{placeholder:"Comma separated names",value:Array.isArray(ax)?ax.join(","):ax,onChange:a=>ay(a.target.value)})]})]})]}),(0,b.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,b.jsx)("h4",{className:"font-medium mb-3",children:"Company Details"}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"text-sm text-gray-600 mb-2 block",children:"Add File"}),(0,b.jsxs)("div",{onClick:()=>aJ.current?.click(),className:"border-2 border-dashed rounded-lg h-28 flex items-center justify-center cursor-pointer text-gray-500",children:[az?(0,b.jsx)("div",{children:az.name}):(0,b.jsx)("div",{children:"Choose File"}),(0,b.jsx)("input",{ref:aJ,type:"file",className:"hidden",onChange:a=>aA(a.target.files?.[0]??null)})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Currency"}),(0,b.jsxs)(f.Select,{value:aB,onValueChange:a=>aC(a),children:[(0,b.jsx)(f.SelectTrigger,{className:"w-full",children:(0,b.jsx)(f.SelectValue,{placeholder:"USD"})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"USD",children:"USD $"}),(0,b.jsx)(f.SelectItem,{value:"USD",children:"USD ₹"}),(0,b.jsx)(f.SelectItem,{value:"EUR",children:"EUR €"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Project Budget"}),(0,b.jsx)(e.Input,{value:aD,onChange:a=>aE(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Hours Estimate (In Hours)"}),(0,b.jsx)(e.Input,{value:aF,onChange:a=>aG(a.target.value)})]})]}),(0,b.jsxs)("div",{className:"mt-3 flex items-center justify-between",children:[(0,b.jsx)("div",{className:"flex items-center gap-4",children:(0,b.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:aH,onChange:a=>aI(a.target.checked)}),(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Allow manual time logs"})]})}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("label",{className:"text-sm text-gray-600 mr-2",children:"Added by*"}),(0,b.jsxs)(f.Select,{value:aK,onValueChange:a=>aL(a),children:[(0,b.jsx)(f.SelectTrigger,{className:"w-44",children:(0,b.jsx)(f.SelectValue,{placeholder:"You"})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"you",children:"You"}),bh.map(a=>(0,b.jsx)(f.SelectItem,{value:a,children:a},a))]})]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>{ac(!1),by()},children:"Cancel"}),(0,b.jsx)(d.Button,{className:"bg-blue-600 text-white",onClick:bz,disabled:aM,children:aM?"Saving...":"Save"})]})]})]})]}),aO&&(0,b.jsxs)("div",{className:"fixed inset-0 z-[11000] flex items-center justify-center px-4",children:[(0,b.jsx)("div",{className:"fixed inset-0 bg-black/40",onClick:()=>bq()}),(0,b.jsxs)("div",{className:"relative w-full max-w-2xl bg-white rounded-lg shadow-2xl z-20 overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,b.jsx)("h3",{className:"font-semibold",children:"Project Category"}),(0,b.jsx)("button",{onClick:()=>bq(),className:"p-2 rounded hover:bg-gray-100",children:(0,b.jsx)(u.X,{className:"w-4 h-4"})})]}),(0,b.jsxs)("div",{className:"p-4 space-y-4",children:[(0,b.jsx)("div",{className:"rounded border overflow-auto",children:(0,b.jsxs)("table",{className:"min-w-full text-left",children:[(0,b.jsx)("thead",{className:"bg-blue-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-2 text-sm",children:"#"}),(0,b.jsx)("th",{className:"px-4 py-2 text-sm",children:"Category Name"}),(0,b.jsx)("th",{className:"px-4 py-2 text-sm",children:"Action"})]})}),(0,b.jsx)("tbody",{children:aS?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:3,className:"px-4 py-6 text-center text-gray-500",children:"Loading..."})}):0===aQ.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:3,className:"px-4 py-6 text-center text-gray-500",children:"No categories"})}):aQ.map((a,c)=>(0,b.jsxs)("tr",{className:"border-t",children:[(0,b.jsx)("td",{className:"px-4 py-3 text-sm",children:c+1}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm",children:a.name}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,b.jsx)("button",{className:"p-2 rounded hover:bg-gray-100 text-red-600",onClick:()=>bs(a.id),title:"Delete",children:(0,b.jsx)(p.Trash2,{className:"w-4 h-4"})})})]},a.id))})]})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Category Name *"}),(0,b.jsx)(e.Input,{placeholder:"Enter category name",value:aU,onChange:a=>aV(a.target.value)})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>bq(),children:"Cancel"}),(0,b.jsx)(d.Button,{className:"bg-blue-600 text-white",onClick:br,disabled:aW,children:aW?"Saving...":"Save"})]})]})]})]}),a4&&null!=a6&&(0,b.jsx)(function({projectId:a,onClose:g,onSaved:h}){let[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(""),[v,x]=(0,c.useState)(!1),[y,A]=(0,c.useState)("none"),[B,C]=(0,c.useState)("none"),[E,F]=(0,c.useState)("none"),[G,H]=(0,c.useState)(""),[I,J]=(0,c.useState)(!0),[K,L]=(0,c.useState)(""),[M,N]=(0,c.useState)(null),O=(0,c.useRef)(null),[P,Q]=(0,c.useState)("USD"),[R,S]=(0,c.useState)(""),[T,U]=(0,c.useState)(""),[V,W]=(0,c.useState)(!1),[X,Y]=(0,c.useState)("none"),[Z,$]=(0,c.useState)(0),[_,aa]=(0,c.useState)(!1),[ab,ac]=(0,c.useState)("you"),ad=()=>{n(""),p(""),r(""),t(""),x(!1),A("none"),C("none"),F("none"),H(""),J(!0),L(""),N(null),Q("USD"),S(""),U(""),W(!1),Y("none"),$(0),aa(!1),ac("you")};(0,c.useEffect)(()=>{if(!a)return;let b=!0;return(async()=>{j(!0);try{let c=D||null,d=await fetch(`${z}/api/projects/${a}`,{headers:c?{Authorization:`Bearer ${c}`}:void 0,cache:"no-store"});if(!d.ok){let a=await d.text().catch(()=>"");console.error("Failed to fetch project",d.status,a),b&&alert("Failed to load project details");return}let e=await d.json();if(!b)return;n(e.shortCode??e.code??e.projectCode??""),p(e.name??""),r(e.startDate?e.startDate.split("T")[0]:e.startDate??""),t(e.deadline?e.deadline.split("T")[0]:e.deadline??""),x(!!e.noDeadline),A(e.category?String(e.category):"none"),C(e.department??"none"),F(e.client?.clientId?String(e.client.clientId):e.client?.name??e.client??"none"),H(e.summary??""),J(!!(e.tasksNeedAdminApproval??!0)),L(Array.isArray(e.assignedEmployees)?e.assignedEmployees.map(a=>a.name).join(","):e.members??""),Q(e.currency??"USD"),S(null!=e.budget?String(e.budget):""),U(null!=e.hoursEstimate?String(e.hoursEstimate):""),W(!!e.allowManualTimeLogs),Y(e.projectStatus??"none"),$(Number(e.progressPercent??0)),aa(!!e.calculateProgressThroughTasks),ac(e.addedBy??"you")}catch(a){console.error("Error loading project:",a),b&&alert("Failed to load project details")}finally{b&&j(!1)}})(),()=>{b=!1}},[a,D]);let ae=async()=>{if(a){if(!o.trim())return alert("Project name required");l(!0);try{let b=new FormData;m&&b.append("shortCode",m),b.append("name",o),q&&b.append("startDate",q),v?b.append("deadline",""):b.append("deadline",s||""),b.append("noDeadline",String(!!v)),b.append("category","none"===y?"":y),b.append("department","none"===B?"":B),b.append("clientId","none"===E?"":E),b.append("summary",G||""),b.append("tasksNeedAdminApproval",String(!!I));let c=Array.isArray(K)?K:String(K||"").split(",").map(a=>a.trim()).filter(Boolean);b.append("assignedEmployeeIds",JSON.stringify(c)),M&&b.append("companyFile",M),b.append("currency",P||""),b.append("budget",R||"0"),b.append("hoursEstimate",T||"0"),b.append("allowManualTimeLogs",String(!!V)),X&&"none"!==X&&b.append("projectStatus",String(X)),null==Z||Number.isNaN(Number(Z))||b.append("progressPercent",String(Math.max(0,Math.min(100,Math.round(Z||0))))),b.append("calculateProgressThroughTasks",String(!!_)),b.append("addedBy",String(ab||""));let d=D||null,e=await fetch(`${z}/api/projects/${a}`,{method:"PUT",body:b,headers:d?{Authorization:`Bearer ${d}`}:void 0});if(!e.ok){let a=await e.text().catch(()=>"");console.error("Update failed",e.status,a),alert("Failed to update project");return}let f=null;try{f=await e.json()}catch{f=null}f&&f.id?w(a=>a.map(a=>a.id===f.id?{...a,...f}:a)):await bn(d),h(),g(),ad()}catch(a){console.error("Update error:",a),alert("Failed to update project")}finally{l(!1)}}};return(0,b.jsxs)("div",{className:"fixed inset-0 z-[12000] flex items-start justify-center pt-12 px-4 overflow-y-auto; ",children:[(0,b.jsx)("div",{className:"fixed inset-0 bg-black/40",onClick:()=>{g(),ad()}}),(0,b.jsxs)("div",{className:"relative w-full max-w-4xl bg-white rounded-xl shadow-2xl overflow-y-auto z-10",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Update Project"}),(0,b.jsx)("button",{onClick:()=>{g(),ad()},className:"p-2 rounded hover:bg-gray-100",children:(0,b.jsx)(u.X,{className:"w-5 h-5"})})]}),(0,b.jsx)("div",{className:"p-6 space-y-6",children:i?(0,b.jsx)("p",{className:"p-4 text-center",children:"Loading project..."}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,b.jsx)("h4",{className:"font-medium mb-3",children:"Project Details"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Short Code *"}),(0,b.jsx)(e.Input,{value:m,onChange:a=>n(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Project Name  *"}),(0,b.jsx)(e.Input,{value:o,onChange:a=>p(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Start Date *"}),(0,b.jsx)(e.Input,{type:"date",value:q,onChange:a=>r(a.target.value)})]}),(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Deadline *"}),(0,b.jsx)(e.Input,{type:"date",value:s,onChange:a=>t(a.target.value),disabled:v})]}),(0,b.jsx)("div",{className:"pt-6",children:(0,b.jsxs)("label",{className:"inline-flex items-center gap-2 text-sm text-gray-600",children:[(0,b.jsx)("input",{type:"checkbox",checked:v,onChange:a=>x(a.target.checked)}),(0,b.jsx)("span",{className:"text-xs",children:"There is no project deadline"})]})})]})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Project Category *"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(f.Select,{value:y,onValueChange:a=>A(a),children:[(0,b.jsx)(f.SelectTrigger,{className:"w-full",children:(0,b.jsx)(f.SelectValue,{placeholder:"--"})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"none",children:"--"}),bi.map(a=>(0,b.jsx)(f.SelectItem,{value:a.id,children:a.name},a.id))]})]}),(0,b.jsx)(d.Button,{variant:"outline",onClick:bp,children:"Add"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Department *"}),(0,b.jsxs)(f.Select,{value:B,onValueChange:a=>C(a),children:[(0,b.jsx)(f.SelectTrigger,{className:"w-full",children:(0,b.jsx)(f.SelectValue,{placeholder:"--"})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"none",children:"--"}),bk.map(a=>(0,b.jsx)(f.SelectItem,{value:a.id,children:a.name},a.id))]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Client *"}),(0,b.jsxs)(f.Select,{value:E,onValueChange:a=>F(a),children:[(0,b.jsx)(f.SelectTrigger,{className:"w-full",children:(0,b.jsx)(f.SelectValue,{placeholder:"--"})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"none",children:"--"}),bj.map(a=>(0,b.jsx)(f.SelectItem,{value:a.id,children:a.name},a.id))]})]})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Project Summary"}),(0,b.jsx)("textarea",{rows:4,value:G,onChange:a=>H(a.target.value),className:"w-full p-2 border rounded"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Tasks needs approval by Admin"}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)("input",{type:"radio",name:"ucApproval",checked:!0===I,onChange:()=>J(!0)}),(0,b.jsx)("span",{className:"text-sm",children:"Yes"})]}),(0,b.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)("input",{type:"radio",name:"ucApproval",checked:!1===I,onChange:()=>J(!1)}),(0,b.jsx)("span",{className:"text-sm",children:"No"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Assigned to *"}),(0,b.jsx)(e.Input,{placeholder:"Comma separated names or ids",value:Array.isArray(K)?K.join(","):K,onChange:a=>L(a.target.value)})]}),(0,b.jsx)("div",{className:"col-span-2",children:(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Project Status"}),(0,b.jsxs)(f.Select,{value:X,onValueChange:a=>Y(a),children:[(0,b.jsx)(f.SelectTrigger,{className:"w-full",children:(0,b.jsx)(f.SelectValue,{placeholder:"Select status"})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"none",children:"--"}),(0,b.jsx)(f.SelectItem,{value:"IN_PROGRESS",children:"In Progress"}),(0,b.jsx)(f.SelectItem,{value:"NOT_STARTED",children:"Not Started"}),(0,b.jsx)(f.SelectItem,{value:"ON_HOLD",children:"On Hold"}),(0,b.jsx)(f.SelectItem,{value:"CANCELLED",children:"Cancelled"}),(0,b.jsx)(f.SelectItem,{value:"FINISHED",children:"Finished"})]})]})]}),(0,b.jsxs)("div",{className:"w-1/2",children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Project Progress Status"}),(0,b.jsxs)("div",{className:"mt-2",children:[(0,b.jsxs)("div",{className:"relative bg-gray-200 h-4 rounded-full overflow-hidden",children:[(0,b.jsx)("div",{className:`h-4 rounded-full ${null==Z?"bg-gray-300":Z<33?"bg-red-500":Z<66?"bg-yellow-400":"bg-green-500"}`,style:{width:`${Math.max(0,Math.min(100,Z))}%`}}),(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,b.jsxs)("span",{className:"text-xs font-semibold text-white drop-shadow-sm",children:[Math.round(Z),"%"]})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,b.jsx)("input",{type:"range",min:0,max:100,value:Z,onChange:a=>$(Number(a.target.value)),className:"flex-1"}),(0,b.jsxs)("label",{className:"inline-flex items-center gap-2 text-sm",children:[(0,b.jsx)("input",{type:"checkbox",checked:_,onChange:a=>aa(a.target.checked)}),(0,b.jsx)("span",{className:"text-xs",children:"Calculate Progress through tasks"})]})]})]})]})]})})]})]}),(0,b.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,b.jsx)("h4",{className:"font-medium mb-3",children:"Company Details"}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"text-sm text-gray-600 mb-2 block",children:"Add File"}),(0,b.jsxs)("div",{onClick:()=>O.current?.click(),className:"border-2 border-dashed rounded-lg h-28 flex items-center justify-center cursor-pointer text-gray-500",children:[M?(0,b.jsx)("div",{children:M.name}):(0,b.jsx)("div",{children:"Choose File"}),(0,b.jsx)("input",{ref:O,type:"file",className:"hidden",onChange:a=>N(a.target.files?.[0]??null)})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Currency"}),(0,b.jsxs)(f.Select,{value:P,onValueChange:a=>Q(a),children:[(0,b.jsx)(f.SelectTrigger,{className:"w-full",children:(0,b.jsx)(f.SelectValue,{placeholder:"USD"})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"EUR",children:"EUR € (Euro)"}),(0,b.jsx)(f.SelectItem,{value:"GBP",children:"GBP £ (British Pound)"}),(0,b.jsx)(f.SelectItem,{value:"CHF",children:"CHF ₣ (Swiss Franc)"}),(0,b.jsx)(f.SelectItem,{value:"SEK",children:"SEK kr (Swedish Krona)"}),(0,b.jsx)(f.SelectItem,{value:"NOK",children:"NOK kr (Norwegian Krone)"}),(0,b.jsx)(f.SelectItem,{value:"DKK",children:"DKK kr (Danish Krone)"}),(0,b.jsx)(f.SelectItem,{value:"PLN",children:"PLN zł (Polish Złoty)"}),(0,b.jsx)(f.SelectItem,{value:"CZK",children:"CZK Kč (Czech Koruna)"}),(0,b.jsx)(f.SelectItem,{value:"HUF",children:"HUF Ft (Hungarian Forint)"}),(0,b.jsx)(f.SelectItem,{value:"RON",children:"RON lei (Romanian Leu)"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Project Budget"}),(0,b.jsx)(e.Input,{value:R,onChange:a=>S(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-gray-600",children:"Hours Estimate (In Hours)"}),(0,b.jsx)(e.Input,{value:T,onChange:a=>U(a.target.value)})]})]}),(0,b.jsxs)("div",{className:"mt-3 flex items-center justify-between",children:[(0,b.jsx)("div",{className:"flex items-center gap-4",children:(0,b.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:V,onChange:a=>W(a.target.checked)}),(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Allow manual time logs "})]})}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("label",{className:"text-sm text-gray-600 mr-2",children:"Added by*"}),(0,b.jsxs)(f.Select,{value:ab,onValueChange:a=>ac(a),children:[(0,b.jsx)(f.SelectTrigger,{className:"w-44",children:(0,b.jsx)(f.SelectValue,{placeholder:"You"})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"you",children:"You"}),bh.map(a=>(0,b.jsx)(f.SelectItem,{value:a,children:a},a))]})]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>{g(),ad()},children:"Cancel"}),(0,b.jsx)(d.Button,{className:"bg-blue-600 text-white",onClick:ae,disabled:k,children:k?"Updating...":"Update"})]})]})})]})]})},{projectId:a6,onClose:()=>{a5(!1),a7(null)},onSaved:()=>{bn(D??null)}})]})}}];

//# sourceMappingURL=src_app_%28dashboard%29_work_project_page_tsx_c5d9947c._.js.map