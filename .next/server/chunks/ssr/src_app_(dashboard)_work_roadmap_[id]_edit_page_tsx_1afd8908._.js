module.exports=[910314,a=>{"use strict";a.s(["default",()=>q]);var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(699570),f=a.i(866718),g=a.i(429246),h=a.i(124348),i=a.i(580701),j=a.i(292e3),k=a.i(167453),l=a.i(596221),m=a.i(217201),n=a.i(633508);function o({open:a,onClose:d,onAdded:e}){let[g,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(!1),[l,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(""),t=async()=>{k(!0),q(null);try{q({type:"error",text:"No token found (login required)."}),i([]),k(!1);return}catch(a){console.error(a),q({type:"error",text:"Error loading categories"})}finally{k(!1)}};(0,c.useEffect)(()=>{a&&(t(),s(""),q(null))},[a]);let u=async()=>{if(q(null),!(r||"").trim())return void q({type:"error",text:"Please enter a category name."});q({type:"error",text:"No token found (login required)."})},v=async(a,b)=>{if(window.confirm(`Delete category "${b??a}" ?`))return void q({type:"error",text:"No token found (login required)."})};return a?(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-4xl shadow-lg overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[(0,b.jsx)("h3",{className:"text-lg font-medium",children:"Project Category"}),(0,b.jsx)("button",{"aria-label":"Close",onClick:d,className:"rounded-full p-1 hover:bg-gray-100",title:"Close",children:(0,b.jsx)(n.X,{className:"h-5 w-5 text-gray-600"})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsx)("div",{className:"rounded-md border overflow-hidden",children:(0,b.jsxs)("table",{className:"min-w-full divide-y",children:[(0,b.jsx)("thead",{className:"bg-blue-50",children:(0,b.jsxs)("tr",{className:"text-sm text-gray-700",children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left w-12",children:"#"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left",children:"Category Name"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left w-28",children:"Action"})]})}),(0,b.jsx)("tbody",{className:"bg-white",children:j?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:3,className:"px-4 py-6 text-center text-sm text-gray-500",children:"Loading..."})}):0===g.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:3,className:"px-4 py-6 text-center text-sm text-gray-500",children:"No categories found."})}):g.map((a,c)=>(0,b.jsxs)("tr",{className:"text-sm text-gray-700 border-t",children:[(0,b.jsx)("td",{className:"px-4 py-3",children:c+1}),(0,b.jsx)("td",{className:"px-4 py-3",children:a.name}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("button",{onClick:()=>v(a.id,a.name),className:"inline-flex items-center gap-2 rounded px-2 py-1 text-sm bg-red-50 text-red-600 hover:bg-red-100",title:"Delete",children:(0,b.jsx)(m.Trash,{className:"h-4 w-4"})})})]},a.id))})]})}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm text-gray-700",children:"Category Name *"}),(0,b.jsx)(f.Input,{placeholder:"--",value:r,onChange:a=>s(a.target.value),className:"w-full"})]}),p&&(0,b.jsx)(h.Alert,{className:`border ${"success"===p.type?"border-green-300 bg-green-50":"border-red-300 bg-red-50"}`,children:(0,b.jsx)(h.AlertDescription,{className:"success"===p.type?"text-green-800":"text-red-800",children:p.text})}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-4 pt-2 border-t mt-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>{s(""),d()},className:"px-6 py-2 rounded border border-blue-200 text-blue-600 hover:bg-blue-50",children:"Cancel"}),(0,b.jsx)("button",{type:"button",onClick:u,disabled:l,className:`px-6 py-2 rounded text-white ${l?"bg-blue-300":"bg-blue-600 hover:bg-blue-700"}`,children:l?"Saving...":"Save"})]})]})]})}):null}function p({employees:a,selected:d,onChange:e,placeholder:f="Select employees"}){let[g,h]=(0,c.useState)(!1),i=(0,c.useRef)(null);return(0,c.useEffect)(()=>{let a=a=>{i.current&&(i.current.contains(a.target)||h(!1))};return document.addEventListener("click",a),()=>document.removeEventListener("click",a)},[]),(0,b.jsxs)("div",{ref:i,className:"relative",children:[(0,b.jsxs)("div",{onClick:()=>h(a=>!a),className:"border rounded-md px-3 py-2 min-h-[44px] flex items-center gap-2 cursor-pointer bg-white",role:"button",children:[(0,b.jsx)("div",{className:"flex-1 flex items-center gap-2 flex-wrap",children:0===d.length?(0,b.jsx)("div",{className:"text-gray-400 text-sm",children:f}):d.map(c=>{let d=a.find(a=>a.employeeId===c);return(0,b.jsxs)("div",{className:"inline-flex items-center gap-2 bg-gray-100 rounded-full px-2 py-1 text-xs",children:[d?.profilePictureUrl?(0,b.jsx)("img",{src:d.profilePictureUrl,alt:d?.name,className:"h-5 w-5 rounded-full object-cover"}):(0,b.jsx)("div",{className:"h-5 w-5 rounded-full bg-gray-300 flex items-center justify-center text-xs text-white",children:(d?.name||"U").slice(0,1)}),(0,b.jsx)("span",{className:"whitespace-nowrap",children:d?.name??c})]},c)})}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:g?"▲":"▼"})]}),g&&(0,b.jsx)("div",{className:"absolute z-40 mt-2 w-full bg-white border rounded-md shadow-lg max-h-60 overflow-auto",children:(0,b.jsx)("div",{className:"p-2",children:0===a.length?(0,b.jsx)("div",{className:"text-sm text-gray-500 p-2",children:"No employees"}):a.map(a=>{let c=d.includes(a.employeeId);return(0,b.jsxs)("label",{className:"flex items-center gap-2 px-2 py-2 hover:bg-gray-50 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:c,onChange:()=>{var b;return b=a.employeeId,void(d.includes(b)?e(d.filter(a=>a!==b)):e([...d,b]))}}),a.profilePictureUrl?(0,b.jsx)("img",{src:a.profilePictureUrl,alt:a.name,className:"h-7 w-7 rounded-full object-cover"}):(0,b.jsx)("div",{className:"h-7 w-7 rounded-full bg-gray-200 flex items-center justify-center text-xs",children:a.name.slice(0,1)}),(0,b.jsxs)("div",{className:"flex-1 text-sm",children:[(0,b.jsx)("div",{className:"font-medium",children:a.name}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a.employeeId})]})]},a.employeeId)})})})]})}function q(){let a=(0,d.useParams)(),m=(0,d.useRouter)(),n=a.id,[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(!0),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)([]),[C,D]=(0,c.useState)([]),[E,F]=(0,c.useState)([]),[G,H]=(0,c.useState)([]),[I,J]=(0,c.useState)([]),[K,L]=(0,c.useState)("none"),[M,N]=(0,c.useState)("none"),[O,P]=(0,c.useState)("none"),[Q,R]=(0,c.useState)("none"),[S,T]=(0,c.useState)(0),[U,V]=(0,c.useState)(!1),[W,X]=(0,c.useState)("you"),[Y,Z]=(0,c.useState)(!1);(0,c.useEffect)(()=>{(async()=>{t(!0);try{v("No token found!"),x("error"),t(!1);return}catch(a){console.error(a),v("Error fetching project"),x("error")}finally{t(!1)}})()},[n]),(0,c.useEffect)(()=>{},[null]);let $=y?Array.from(new Set((y.assignedEmployeeIds||"").split(",").map(a=>a.trim()).filter(Boolean))):[],_=async a=>{a.preventDefault(),r(!0),v(""),x("");let b=a.currentTarget,c=new FormData(b);c.set("noDeadline",b.noDeadline?.checked?"true":"false"),c.set("tasksNeedAdminApproval",b.tasksNeedAdminApproval?.checked?"true":"false"),c.set("allowManualTimeLogs",b.allowManualTimeLogs?.checked?"true":"false"),c.set("projectCategory","none"===K?"":K),c.set("departmentId","none"===M?"":M),c.set("clientId","none"===O?"":O),c.set("assignedEmployeeIds",I.join(",")),Q&&"none"!==Q&&c.set("projectStatus",String(Q)),c.set("progressPercent",String(Math.max(0,Math.min(100,Math.round(S||0))))),c.set("calculateProgressThroughTasks",String(!!U)),c.set("addedBy",String(W||"")),v("No token found!"),x("error"),r(!1)};return s?(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-background to-muted p-6 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(l.Loader2,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-primary"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading project..."})]})}):(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-background to-muted p-6",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,b.jsx)("div",{children:(0,b.jsx)("h1",{className:"text-2xl font-semibold",children:"Update Project"})}),(0,b.jsx)("div",{})]}),u&&(0,b.jsx)(h.Alert,{className:`mb-6 ${"success"===w?"border-green-500 bg-green-50":"border-red-500 bg-red-50"}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:["success"===w?(0,b.jsx)(k.CheckCircle2,{className:"h-4 w-4 text-green-600"}):(0,b.jsx)(j.AlertCircle,{className:"h-4 w-4 text-red-600"}),(0,b.jsx)(h.AlertDescription,{className:"success"===w?"text-green-800":"text-red-800",children:u})]})}),y&&(0,b.jsxs)("form",{onSubmit:_,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg border",children:[(0,b.jsx)("div",{className:"p-4 border-b",children:(0,b.jsx)("h3",{className:"font-medium",children:"Project Details"})}),(0,b.jsxs)("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Short Code *"}),(0,b.jsx)(f.Input,{name:"shortCode",defaultValue:y.shortCode})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Project Name *"}),(0,b.jsx)(f.Input,{name:"projectName",defaultValue:y.projectName})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Start Date *"}),(0,b.jsx)(f.Input,{type:"date",name:"startDate",defaultValue:y.startDate})]}),(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Deadline *"}),(0,b.jsx)(f.Input,{type:"date",name:"deadline",defaultValue:y.deadline})]}),(0,b.jsx)("div",{className:"pt-6",children:(0,b.jsxs)("label",{className:"inline-flex items-center gap-2 text-sm text-gray-600",children:[(0,b.jsx)("input",{type:"checkbox",name:"noDeadline",defaultChecked:y.noDeadline}),(0,b.jsx)("span",{className:"text-xs",children:"There is no project deadline"})]})})]})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Project Category *"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(i.Select,{value:K,onValueChange:a=>L(a),children:[(0,b.jsx)(i.SelectTrigger,{className:"w-full",children:(0,b.jsx)(i.SelectValue,{placeholder:"--"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"none",children:"--"}),A.map(a=>(0,b.jsx)(i.SelectItem,{value:String(a.id),children:a.name},a.id))]})]}),(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>Z(!0),children:"Add"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Department *"}),(0,b.jsxs)(i.Select,{value:M,onValueChange:a=>N(a),children:[(0,b.jsx)(i.SelectTrigger,{className:"w-full",children:(0,b.jsx)(i.SelectValue,{placeholder:"--"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"none",children:"--"}),C.map(a=>(0,b.jsx)(i.SelectItem,{value:String(a.id),children:a.departmentName},a.id))]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Client *"}),(0,b.jsxs)(i.Select,{value:O,onValueChange:a=>P(a),children:[(0,b.jsx)(i.SelectTrigger,{className:"w-full",children:(0,b.jsx)(i.SelectValue,{placeholder:"--"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"none",children:"--"}),E.map(a=>(0,b.jsx)(i.SelectItem,{value:String(a.id),children:a.name},a.id))]})]})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Project Summary"}),(0,b.jsx)(g.Textarea,{name:"projectSummary",rows:4,defaultValue:y.projectSummary})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Tasks needs approval by Admin"}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)("input",{type:"radio",name:"tasksNeedAdminApproval",value:"true",defaultChecked:!0===y.tasksNeedAdminApproval}),(0,b.jsx)("span",{className:"text-sm",children:"Yes"})]}),(0,b.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)("input",{type:"radio",name:"tasksNeedAdminApproval",value:"false",defaultChecked:!1===y.tasksNeedAdminApproval}),(0,b.jsx)("span",{className:"text-sm",children:"No"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Assigned to *"}),(0,b.jsx)("input",{type:"hidden",name:"assignedEmployeeIds",value:I.join(",")}),(0,b.jsx)(p,{employees:G,selected:I,onChange:a=>J(a),placeholder:"Select employees"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border",children:[(0,b.jsx)("div",{className:"p-4 border-b",children:(0,b.jsx)("h3",{className:"font-medium",children:"Project Status"})}),(0,b.jsxs)("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6 items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Project Status"}),(0,b.jsxs)(i.Select,{value:Q,onValueChange:a=>R(a),children:[(0,b.jsx)(i.SelectTrigger,{className:"w-full",children:(0,b.jsx)(i.SelectValue,{placeholder:"Select status"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"none",children:"--"}),(0,b.jsx)(i.SelectItem,{value:"IN_PROGRESS",children:"In Progress"}),(0,b.jsx)(i.SelectItem,{value:"NOT_STARTED",children:"Not Started"}),(0,b.jsx)(i.SelectItem,{value:"ON_HOLD",children:"On Hold"}),(0,b.jsx)(i.SelectItem,{value:"CANCELLED",children:"Cancelled"}),(0,b.jsx)(i.SelectItem,{value:"FINISHED",children:"Finished"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Project Progress Status"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"relative bg-gray-200 h-3 rounded-full overflow-hidden",children:[(0,b.jsx)("div",{className:`${null==S?"bg-gray-300":S<33?"bg-red-500":S<66?"bg-yellow-400":"bg-green-500"} h-3 rounded-full`,style:{width:`${Math.max(0,Math.min(100,S))}%`}}),(0,b.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none text-xs font-semibold text-white",children:[Math.round(S),"%"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("input",{type:"range",min:0,max:100,value:S,onChange:a=>T(Number(a.target.value)),className:"flex-1"}),(0,b.jsxs)("label",{className:"inline-flex items-center gap-2 text-sm",children:[(0,b.jsx)("input",{type:"checkbox",checked:U,onChange:a=>V(a.target.checked)}),(0,b.jsx)("span",{className:"text-xs",children:"Calculate Progress through tasks"})]})]})]})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border",children:[(0,b.jsx)("div",{className:"p-4 border-b",children:(0,b.jsx)("h3",{className:"font-medium",children:"Company Details"})}),(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Currency"}),(0,b.jsxs)(i.Select,{value:y.currency??"USD",onValueChange:()=>{},children:[(0,b.jsx)(i.SelectTrigger,{className:"w-full",children:(0,b.jsx)(i.SelectValue,{placeholder:"USD $"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"USD",children:"USD $"}),(0,b.jsx)(i.SelectItem,{value:"USD",children:"USD ₹"}),(0,b.jsx)(i.SelectItem,{value:"EUR",children:"EUR €"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Project Budget"}),(0,b.jsx)(f.Input,{type:"number",name:"projectBudget",defaultValue:y.projectBudget})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Hours Estimate (In Hours)"}),(0,b.jsx)(f.Input,{type:"number",name:"hoursEstimate",defaultValue:y.hoursEstimate})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"flex items-center gap-4",children:(0,b.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",name:"allowManualTimeLogs",defaultChecked:y.allowManualTimeLogs}),(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Allow manual time logs"})]})}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("label",{className:"text-sm text-gray-600 mr-2",children:"Added by*"}),(0,b.jsxs)(i.Select,{value:W,onValueChange:a=>X(a),children:[(0,b.jsx)(i.SelectTrigger,{className:"w-44",children:(0,b.jsx)(i.SelectValue,{placeholder:"You"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"you",children:"You"}),$.map(a=>(0,b.jsx)(i.SelectItem,{value:a,children:a},a))]})]})]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>m.back(),children:"Cancel"}),(0,b.jsx)(e.Button,{className:"bg-blue-600 text-white",type:"submit",disabled:q,children:q?"Updating...":"Update"})]})]}),(0,b.jsx)(o,{open:Y,onClose:()=>Z(!1),onAdded:a=>{}})]})})}}];

//# sourceMappingURL=src_app_%28dashboard%29_work_roadmap_%5Bid%5D_edit_page_tsx_1afd8908._.js.map