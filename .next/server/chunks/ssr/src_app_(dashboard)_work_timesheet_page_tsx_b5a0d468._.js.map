{"version":3,"sources":["turbopack:///[project]/src/app/(dashboard)/work/timesheet/page.tsx","turbopack:///[project]/src/app/(dashboard)/work/timesheet/components/FiltersSection.tsx","turbopack:///[project]/src/app/(dashboard)/work/timesheet/components/ActionsSection.tsx","turbopack:///[project]/src/app/(dashboard)/work/timesheet/components/TimesheetRow.tsx","turbopack:///[project]/src/app/(dashboard)/work/timesheet/components/WeeklyTimesheetModal.tsx","turbopack:///[project]/src/app/(dashboard)/work/timesheet/components/FullCalendarView.tsx","turbopack:///[project]/src/app/(dashboard)/work/timesheet/components/TimesheetSummaryList.tsx"],"sourcesContent":["\n\"use client\";\n\nimport React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\n\nimport {\n  ChevronLeft,\n  ChevronRight,\n  Search,\n  Edit2,\n  Trash2,\n  X,\n  Eye,\n} from \"lucide-react\";\n\nimport FiltersSection from \"./components/FiltersSection\";\nimport ActionsSection, { ViewMode } from \"./components/ActionsSection\";\nimport TimesheetRow from \"./components/TimesheetRow\";\nimport WeeklyTimesheetModal from \"./components/WeeklyTimesheetModal\";\nimport FullCalendarView from \"./components/FullCalendarView\";\nimport TimesheetSummaryList from \"./components/TimesheetSummaryList\";\n\nconst MAIN =\n  process.env.NEXT_PUBLIC_MAIN ;\n\nexport type EmployeeItem = {\n  employeeId: string;\n  name: string;\n  profileUrl?: string | null;\n  designation?: string | null;\n  department?: string | null;\n};\n\nexport type Timesheet = {\n  id: number;\n  projectId?: number;\n  projectShortCode?: string;\n  taskId?: number;\n  employeeId?: string;\n  employees?: EmployeeItem[];\n  startDate?: string;\n  startTime?: string;\n  endDate?: string;\n  endTime?: string;\n  memo?: string;\n  durationHours?: number;\n  createdBy?: string;\n  createdAt?: string;\n};\n\ntype ProjectOption = {\n  id: number | string | null;\n  shortCode: string;\n  name?: string;\n  assignedEmployees?: EmployeeItem[];\n};\n\ntype ProjectTask = {\n  id: number;\n  title?: string;\n  projectId?: number;\n  projectShortCode?: string;\n  assignedEmployees?: EmployeeItem[];\n};\n\nexport default function TimesheetPage() {\n  const [timesheets, setTimesheets] = useState<Timesheet[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [token, setToken] = useState<string | null>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  const [searchInput, setSearchInput] = useState(\"\");\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [employeeFilter, setEmployeeFilter] = useState<string>(\"All\");\n\n  const [showFilters, setShowFilters] = useState(false);\n  const [filterEmployee, setFilterEmployee] = useState<string>(\"all\");\n\n  const [currentPage, setCurrentPage] = useState<number>(1);\n  const [totalPages, setTotalPages] = useState<number>(1);\n  const itemsPerPage = 9;\n\n  const [viewMode, setViewMode] = useState<ViewMode>(\"table\");\n  const [showCalendarModal, setShowCalendarModal] = useState(false);\n\n  // Log Time + action\n  const [showLogModal, setShowLogModal] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [saveError, setSaveError] = useState<string | null>(null);\n  const [editingId, setEditingId] = useState<number | null>(null);\n  const [form, setForm] = useState({\n    projectId: \"\",\n    taskId: \"\",\n    employeeId: \"\",\n    startDate: \"\",\n    startTime: \"\",\n    endDate: \"\",\n    endTime: \"\",\n    memo: \"\",\n  });\n\n  const [openMenuId, setOpenMenuId] = useState<number | null>(null);\n\n  const [isViewOpen, setIsViewOpen] = useState(false);\n  const [selectedRow, setSelectedRow] = useState<Timesheet | null>(null);\n\n  const [isDeleteConfirmOpen, setIsDeleteConfirmOpen] = useState(false);\n\n  // Projects\n  const [projectOptions, setProjectOptions] = useState<ProjectOption[]>([]);\n  const [projectsLoading, setProjectsLoading] = useState(false);\n  const [projectsError, setProjectsError] = useState<string | null>(null);\n\n  // Tasks\n  const [projectTasks, setProjectTasks] = useState<ProjectTask[]>([]);\n  const [selectedTaskEmployees, setSelectedTaskEmployees] = useState<\n    EmployeeItem[]\n  >([]);\n\n  // ====== Memos / helpers ======\n\n  const projectEmployeeMap = useMemo(() => {\n    const map = new Map<string, EmployeeItem[]>();\n    projectOptions.forEach((p) => {\n      if (p.id != null && p.assignedEmployees?.length) {\n        map.set(String(p.id), p.assignedEmployees);\n      }\n    });\n    return map;\n  }, [projectOptions]);\n\n  const employeeOptions = useMemo(() => {\n    const s = new Set<string>();\n    timesheets.forEach((t) => {\n      if (t.employees && t.employees.length > 0) {\n        t.employees.forEach((e) => {\n          if (e?.employeeId) s.add(e.employeeId);\n        });\n      } else if (t.employeeId) {\n        s.add(t.employeeId);\n      }\n    });\n    return [\"--\", ...Array.from(s)];\n  }, [timesheets]);\n\n  const employeeMap = useMemo(() => {\n    const map = new Map<string, EmployeeItem>();\n    timesheets.forEach((t) => {\n      t.employees?.forEach((e) => {\n        if (e?.employeeId && !map.has(e.employeeId)) {\n          map.set(e.employeeId, e);\n        }\n      });\n    });\n    return map;\n  }, [timesheets]);\n\n  const getEmployeeLabel = (id: string) => {\n    if (!id || id === \"--\") return \"--\";\n    const emp = employeeMap.get(id);\n    if (emp?.name) return `${emp.name} (${id})`;\n    return id;\n  };\n\n  const allTaskOptions = useMemo(() => {\n    const s = new Set<number>();\n    timesheets.forEach((t) => {\n      if (typeof t.taskId === \"number\") s.add(t.taskId);\n    });\n    return [\"--\", ...Array.from(s).map((n) => String(n))];\n  }, [timesheets]);\n\n  const getTaskLabel = (idStr: string) => {\n    if (!idStr || idStr === \"--\") return \"--\";\n    const id = Number(idStr);\n    const t = projectTasks.find((pt) => pt.id === id);\n    if (t?.title) return `Task ${id} - ${t.title}`;\n    return `Task ${idStr}`;\n  };\n\n  function formatDateTime(dateISO?: string, time?: string) {\n    if (!dateISO) return \"\";\n    try {\n      const combined = time ? `${dateISO}T${time}` : `${dateISO}T00:00:00`;\n      const d = new Date(combined);\n      if (Number.isNaN(d.getTime())) return `${dateISO} ${time ?? \"\"}`;\n      const dd = String(d.getDate()).padStart(2, \"0\");\n      const mm = String(d.getMonth() + 1).padStart(2, \"0\");\n      const yyyy = d.getFullYear();\n      let hours = d.getHours();\n      const minutes = String(d.getMinutes()).padStart(2, \"0\");\n      const ampm = hours >= 12 ? \"PM\" : \"AM\";\n      hours = hours % 12;\n      if (hours === 0) hours = 12;\n      return `${dd}/${mm}/${yyyy} ${hours}:${minutes} ${ampm}`;\n    } catch {\n      return `${dateISO} ${time ?? \"\"}`;\n    }\n  }\n\n  const fmtDateTime = (date?: string, time?: string) =>\n    formatDateTime(date, time);\n\n  const computeDurationHours = (\n    sDate?: string,\n    sTime?: string,\n    eDate?: string,\n    eTime?: string\n  ) => {\n    if (!sDate || !eDate) return 0;\n    try {\n      const sParts = sDate.split(\"-\").map(Number);\n      const eParts = eDate.split(\"-\").map(Number);\n      let sH = 0,\n        sM = 0,\n        eH = 0,\n        eM = 0;\n      if (sTime) [sH, sM] = sTime.split(\":\").map((v) => Number(v));\n      if (eTime) [eH, eM] = eTime.split(\":\").map((v) => Number(v));\n      const start = new Date(sParts[0], sParts[1] - 1, sParts[2], sH, sM);\n      const end = new Date(eParts[0], eParts[1] - 1, eParts[2], eH, eM);\n      const diffMs = end.getTime() - start.getTime();\n      if (isNaN(diffMs) || diffMs <= 0) return 0;\n      return Math.round(diffMs / (1000 * 60 * 60));\n    } catch {\n      return 0;\n    }\n  };\n\n  const modalTotalHours = computeDurationHours(\n    form.startDate,\n    form.startTime,\n    form.endDate,\n    form.endTime\n  );\n\n  // ====== API calls ======\n\n  const loadTimesheets = useCallback(\n    async (accessToken?: string | null) => {\n      setLoading(true);\n      setError(null);\n      try {\n        const resolvedToken =\n          accessToken ||\n          token ||\n          (typeof window !== \"undefined\"\n            ? localStorage.getItem(\"accessToken\")\n            : null);\n\n        const params = new URLSearchParams({\n          page: String(currentPage),\n          limit: String(itemsPerPage),\n          search: searchQuery || \"\",\n          employee: filterEmployee !== \"all\" ? filterEmployee : \"\",\n        });\n\n        const url = `${MAIN}/timesheets?${params.toString()}`;\n        const res = await fetch(url, {\n          method: \"GET\",\n          headers: resolvedToken\n            ? {\n                Authorization: `Bearer ${resolvedToken}`,\n                Accept: \"application/json\",\n              }\n            : { Accept: \"application/json\" },\n          cache: \"no-store\",\n        });\n\n        if (res.status === 401) {\n          try {\n            localStorage.removeItem(\"accessToken\");\n          } catch {}\n          setToken(null);\n          setTimesheets([]);\n          setTotalPages(1);\n          setLoading(false);\n          return;\n        }\n\n        if (!res.ok) {\n          const txt = await res.text().catch(() => \"\");\n          console.error(\"timesheets fetch failed\", res.status, txt);\n          throw new Error(`Failed to load timesheets (${res.status})`);\n        }\n\n        const data = await res.json();\n        let items: Timesheet[] = [];\n        if (Array.isArray(data)) {\n          items = data;\n          setTotalPages(\n            Math.max(1, Math.ceil((data.length || 0) / itemsPerPage))\n          );\n        } else {\n          items = Array.isArray(data.items) ? data.items : [];\n          setTotalPages(\n            data.totalPages ??\n              Math.max(\n                1,\n                Math.ceil((data.total ?? items.length) / itemsPerPage)\n              )\n          );\n        }\n        setTimesheets(items);\n      } catch (err: any) {\n        console.error(\"loadTimesheets error\", err);\n        setError(String(err?.message ?? err));\n        setTimesheets([]);\n        setTotalPages(1);\n      } finally {\n        setLoading(false);\n      }\n    },\n    [currentPage, searchQuery, filterEmployee, token]\n  );\n\n  const loadProjects = useCallback(\n    async (accessToken?: string | null) => {\n      setProjectsLoading(true);\n      setProjectsError(null);\n      try {\n        const resolvedToken =\n          accessToken ||\n          token ||\n          (typeof window !== \"undefined\"\n            ? localStorage.getItem(\"accessToken\")\n            : null);\n\n        const url = `${MAIN}/projects/AllProject`;\n        const res = await fetch(url, {\n          method: \"GET\",\n          headers: resolvedToken\n            ? {\n                Authorization: `Bearer ${resolvedToken}`,\n                Accept: \"application/json\",\n              }\n            : { Accept: \"application/json\" },\n          cache: \"no-store\",\n        });\n\n        if (res.status === 401) {\n          try {\n            localStorage.removeItem(\"accessToken\");\n          } catch {}\n          setToken(null);\n          setProjectOptions([]);\n          setProjectsLoading(false);\n          return;\n        }\n\n        if (!res.ok) {\n          const txt = await res.text().catch(() => \"\");\n          console.error(\"projects fetch failed\", res.status, txt);\n          throw new Error(`Failed to load projects (${res.status})`);\n        }\n\n        const data = await res.json();\n        if (Array.isArray(data)) {\n          const list: ProjectOption[] = [];\n          data.forEach((p: any) => {\n            const sc = (p?.shortCode ?? \"\").toString().trim();\n            const id = p?.id ?? p?.projectId ?? p?._id ?? null;\n            const name = (p?.name ?? \"\").toString().trim();\n            const assignedEmployees: EmployeeItem[] = Array.isArray(\n              p?.assignedEmployees\n            )\n              ? p.assignedEmployees\n              : [];\n            if (id != null && sc) {\n              list.push({\n                id,\n                shortCode: sc,\n                name,\n                assignedEmployees,\n              });\n            }\n          });\n          const seen = new Set<string>();\n          const deduped: ProjectOption[] = [];\n          list.forEach((p) => {\n            if (!seen.has(String(p.id))) {\n              seen.add(String(p.id));\n              deduped.push(p);\n            }\n          });\n          setProjectOptions(deduped);\n        } else {\n          console.warn(\"unexpected projects response\", data);\n          setProjectOptions([]);\n        }\n      } catch (err: any) {\n        console.error(\"loadProjects error\", err);\n        setProjectsError(String(err?.message ?? err));\n        setProjectOptions([]);\n      } finally {\n        setProjectsLoading(false);\n      }\n    },\n    [token]\n  );\n\n  const fetchProjectTasks = useCallback(\n    async (projectIdRaw: string | number, preselectTaskId?: number | null) => {\n      if (!projectIdRaw) {\n        setProjectTasks([]);\n        setSelectedTaskEmployees([]);\n        return;\n      }\n\n      const projectIdNum = Number(projectIdRaw);\n      if (!projectIdNum || Number.isNaN(projectIdNum)) {\n        setProjectTasks([]);\n        setSelectedTaskEmployees([]);\n        return;\n      }\n\n      try {\n        const resolvedToken =\n          token ||\n          (typeof window !== \"undefined\"\n            ? localStorage.getItem(\"accessToken\")\n            : null);\n        const url = `${MAIN}/projects/${projectIdNum}/tasks`;\n        const res = await fetch(url, {\n          method: \"GET\",\n          headers: resolvedToken\n            ? {\n                Authorization: `Bearer ${resolvedToken}`,\n                Accept: \"application/json\",\n              }\n            : { Accept: \"application/json\" },\n          cache: \"no-store\",\n        });\n\n        if (!res.ok) {\n          const txt = await res.text().catch(() => \"\");\n          console.error(\"project tasks fetch failed\", res.status, txt);\n          setProjectTasks([]);\n          setSelectedTaskEmployees([]);\n          return;\n        }\n\n        const data = await res.json();\n        const list: ProjectTask[] = Array.isArray(data) ? data : [];\n        setProjectTasks(list);\n\n        if (preselectTaskId != null && list.length > 0) {\n          const task = list.find((t) => t.id === preselectTaskId);\n          setSelectedTaskEmployees(task?.assignedEmployees ?? []);\n        } else {\n          setSelectedTaskEmployees([]);\n        }\n      } catch (err) {\n        console.error(\"fetchProjectTasks error\", err);\n        setProjectTasks([]);\n        setSelectedTaskEmployees([]);\n      }\n    },\n    [token]\n  );\n\n  // ====== Effects ======\n\n  useEffect(() => {\n    const t = setTimeout(() => {\n      setSearchQuery((prev) => {\n        if (prev !== searchInput) {\n          setCurrentPage(1);\n          return searchInput;\n        }\n        return prev;\n      });\n    }, 400);\n    return () => clearTimeout(t);\n  }, [searchInput]);\n\n  useEffect(() => {\n    if (typeof window !== \"undefined\") {\n      const saved = localStorage.getItem(\"accessToken\");\n      setToken(saved);\n      loadTimesheets(saved);\n      loadProjects(saved);\n    } else {\n      setLoading(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (token) {\n      loadTimesheets(token);\n      loadProjects(token);\n    } else {\n      loadTimesheets(null);\n      loadProjects(null);\n    }\n  }, [loadTimesheets, loadProjects, token, currentPage, searchQuery, filterEmployee]);\n\n  useEffect(() => {\n    setOpenMenuId(null);\n  }, [currentPage, viewMode]);\n\n  // ====== CRUD handlers ======\n\n  const openLogForm = (row?: Timesheet) => {\n    setProjectTasks([]);\n    setSelectedTaskEmployees([]);\n\n    if (!row) {\n      setEditingId(null);\n      setForm({\n        projectId: \"\",\n        taskId: \"\",\n        employeeId: \"\",\n        startDate: \"\",\n        startTime: \"\",\n        endDate: \"\",\n        endTime: \"\",\n        memo: \"\",\n      });\n    } else {\n      const emp =\n        row.employees && row.employees[0] ? row.employees[0] : undefined;\n      setEditingId(row.id);\n      setForm({\n        projectId:\n          row.projectId !== undefined && row.projectId !== null\n            ? String(row.projectId)\n            : \"\",\n        taskId:\n          row.taskId !== undefined && row.taskId !== null\n            ? String(row.taskId)\n            : \"\",\n        employeeId: row.employeeId ?? emp?.employeeId ?? \"\",\n        startDate: row.startDate ?? \"\",\n        startTime: row.startTime ?? \"\",\n        endDate: row.endDate ?? \"\",\n        endTime: row.endTime ?? \"\",\n        memo: row.memo ?? \"\",\n      });\n\n      if (row.projectId) {\n        fetchProjectTasks(row.projectId, row.taskId ?? null);\n      }\n    }\n    setSaveError(null);\n    setShowLogModal(true);\n  };\n\n  const saveEntry = async () => {\n    setSaving(true);\n    setSaveError(null);\n    try {\n      if (\n        !form.projectId ||\n        !form.taskId ||\n        !form.employeeId ||\n        !form.startDate ||\n        !form.startTime ||\n        !form.endDate ||\n        !form.endTime ||\n        !form.memo\n      ) {\n        setSaveError(\"Please fill all required fields.\");\n        setSaving(false);\n        return;\n      }\n\n      const payload: any = {\n        projectId: Number(form.projectId),\n        taskId: Number(form.taskId),\n        employeeId: form.employeeId,\n        startDate: form.startDate,\n        startTime: form.startTime,\n        endDate: form.endDate,\n        endTime: form.endTime,\n        memo: form.memo,\n        durationHours: computeDurationHours(\n          form.startDate,\n          form.startTime,\n          form.endDate,\n          form.endTime\n        ),\n      };\n\n      const resolvedToken =\n        token ||\n        (typeof window !== \"undefined\"\n          ? localStorage.getItem(\"accessToken\")\n          : null);\n\n      const url = editingId\n        ? `${MAIN}/timesheets/${editingId}`\n        : `${MAIN}/timesheets`;\n      const method = editingId ? \"PUT\" : \"POST\";\n\n      const res = await fetch(url, {\n        method,\n        headers: {\n          ...(resolvedToken\n            ? { Authorization: `Bearer ${resolvedToken}` }\n            : {}),\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n        },\n        body: JSON.stringify(payload),\n      });\n\n      if (!res.ok) {\n        const text = await res.text().catch(() => \"\");\n        console.error(\"save entry failed\", res.status, text);\n        throw new Error(\"Failed to save entry\");\n      }\n\n      setShowLogModal(false);\n      setEditingId(null);\n      setForm({\n        projectId: \"\",\n        taskId: \"\",\n        employeeId: \"\",\n        startDate: \"\",\n        startTime: \"\",\n        endDate: \"\",\n        endTime: \"\",\n        memo: \"\",\n      });\n      await loadTimesheets(token ?? null);\n    } catch (err: any) {\n      console.error(\"saveEntry error\", err);\n      setSaveError(err?.message || \"Failed to save entry\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const openView = (row: Timesheet) => {\n    setSelectedRow(row);\n    setIsViewOpen(true);\n    setOpenMenuId(null);\n  };\n\n  const openDelete = (row: Timesheet) => {\n    setSelectedRow(row);\n    setIsDeleteConfirmOpen(true);\n    setOpenMenuId(null);\n    setSaveError(null);\n  };\n\n  const deleteTimesheet = async () => {\n    if (!selectedRow) return;\n    setSaving(true);\n    setSaveError(null);\n    try {\n      const resolvedToken =\n        token ||\n        (typeof window !== \"undefined\"\n          ? localStorage.getItem(\"accessToken\")\n          : null);\n      const res = await fetch(`${MAIN}/timesheets/${selectedRow.id}`, {\n        method: \"DELETE\",\n        headers: resolvedToken\n          ? { Authorization: `Bearer ${resolvedToken}` }\n          : undefined,\n      });\n      if (!res.ok) {\n        const txt = await res.text().catch(() => \"\");\n        console.error(\"deleteTimesheet failed\", res.status, txt);\n        throw new Error(\"Failed to delete timesheet\");\n      }\n      setIsDeleteConfirmOpen(false);\n      setSelectedRow(null);\n      await loadTimesheets(token ?? null);\n    } catch (err: any) {\n      console.error(\"deleteTimesheet error\", err);\n      setSaveError(err?.message || \"Failed to delete timesheet\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // ====== Filtered data ======\n\n  const filtered = useMemo(() => {\n    const q = searchQuery.trim().toLowerCase();\n    return timesheets.filter((t) => {\n      if (employeeFilter !== \"All\") {\n        const hasByEmpObj = (t.employees ?? []).some(\n          (e) => e.employeeId === employeeFilter\n        );\n        const hasByEmpId = t.employeeId === employeeFilter;\n        if (!hasByEmpObj && !hasByEmpId) return false;\n      }\n      if (!q) return true;\n      if (\n        String(t.projectShortCode ?? \"\")\n          .toLowerCase()\n          .includes(q)\n      )\n        return true;\n      if (\n        String(t.memo ?? \"\")\n          .toLowerCase()\n          .includes(q)\n      )\n        return true;\n      const empMatch = (t.employees ?? []).some(\n        (e) =>\n          (e.name ?? \"\").toLowerCase().includes(q) ||\n          (e.designation ?? \"\").toLowerCase().includes(q)\n      );\n      if (empMatch) return true;\n      return false;\n    });\n  }, [timesheets, searchQuery, employeeFilter]);\n\n  // ====== Render helpers ======\n\n  const renderMainSection = () => {\n    // Weekly view screen alag component se aa raha hai, isliye agar weekly mode hai\n    // to yahan table/list render nahi karte.\n    const isTableLike = viewMode === \"table\" || viewMode === \"list\";\n\n    if (!isTableLike) return null;\n\n    return (\n      <>\n        <div className=\"bg-white border border-gray-200 rounded-md overflow-hidden\">\n          <div className=\"p-0\">\n            <table className=\"w-full table-auto border-collapse\">\n              <thead>\n                <tr className=\"text-left text-sm text-gray-600 border-b bg-blue-50\">\n                  <th className=\"py-3 px-4 w-28 border-r\">Code</th>\n                  <th className=\"py-3 px-4 border-r\">Task</th>\n                  <th className=\"py-3 px-4 w-48 border-r\">Employee</th>\n                  <th className=\"py-3 px-4 w-40 border-r\">Start Time</th>\n                  <th className=\"py-3 px-4 w-40 border-r\">End Time</th>\n                  <th className=\"py-3 px-4 w-28 border-r\">Total Hours</th>\n                  <th className=\"py-3 px-4 w-16\">Action</th>\n                </tr>\n              </thead>\n\n              <tbody>\n                {loading && (\n                  <tr>\n                    <td colSpan={7} className=\"py-6 text-center text-gray-500\">\n                      Loading...\n                    </td>\n                  </tr>\n                )}\n\n                {!loading && filtered.length === 0 && (\n                  <tr>\n                    <td colSpan={7} className=\"py-6 text-center text-gray-500\">\n                      {error ? `Error: ${error}` : \"No timesheets found\"}\n                    </td>\n                  </tr>\n                )}\n\n                {!loading &&\n                  filtered.map((t) => (\n                    <TimesheetRow\n                      key={t.id}\n                      t={t}\n                      openMenuId={openMenuId}\n                      onToggleMenu={(id) =>\n                        setOpenMenuId((cur) => (cur === id ? null : id))\n                      }\n                      onCloseMenu={() => setOpenMenuId(null)}\n                      onView={openView}\n                      onEdit={openLogForm}\n                      onDelete={openDelete}\n                      fmtDateTime={fmtDateTime}\n                    />\n                  ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n\n        <div className=\"px-4 py-3 flex items-center justify-between text-sm text-gray-600\">\n          <div>Result per page - {filtered.length}</div>\n          <div className=\"flex items-center gap-2\">\n            <button\n              className=\"p-2 rounded hover:bg-gray-100\"\n              onClick={() => setCurrentPage((c) => Math.max(1, c - 1))}\n              disabled={currentPage === 1}\n            >\n              <ChevronLeft />\n            </button>\n            <div>\n              Page {currentPage} of {totalPages}\n            </div>\n            <button\n              className=\"p-2 rounded hover:bg-gray-100\"\n              onClick={() =>\n                setCurrentPage((c) => Math.min(totalPages, c + 1))\n              }\n              disabled={currentPage === totalPages}\n            >\n              <ChevronRight />\n            </button>\n          </div>\n        </div>\n      </>\n    );\n  };\n\n  // ====== MAIN RETURN ======\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <main className=\"w-full\">\n        <div className=\"max-w-[1180px] mx-auto \">\n          {/* PART 1: Filters */}\n          <FiltersSection\n            employeeFilter={employeeFilter}\n            setEmployeeFilter={setEmployeeFilter}\n            employeeOptions={employeeOptions}\n            getEmployeeLabel={getEmployeeLabel}\n            onOpenFiltersDrawer={() => setShowFilters(true)}\n          />\n\n          {/* PART 2: Action buttons */}\n          <ActionsSection\n            searchInput={searchInput}\n            setSearchInput={setSearchInput}\n            setSearchQuery={setSearchQuery}\n            setCurrentPage={setCurrentPage}\n            viewMode={viewMode}\n            setViewMode={setViewMode}\n            showCalendarModal={showCalendarModal}\n            setShowCalendarModal={setShowCalendarModal}\n            openLogForm={() => openLogForm()}\n          />\n\n          {/* PART 3: Render table / list (not in weekly mode) */}\n          {renderMainSection()}\n        </div>\n      </main>\n\n      {/* Filters drawer */}\n      <div\n        aria-hidden={!showFilters}\n        onClick={() => setShowFilters(false)}\n        className={`fixed inset-0 transition-opacity duration-300 z-[9990] ${showFilters\n          ? \"opacity-100 pointer-events-auto\"\n          : \"opacity-0 pointer-events-none\"\n          }`}\n        style={{ backgroundColor: \"rgba(0,0,0,0.3)\" }}\n      />\n      <aside\n        aria-hidden={!showFilters}\n        className={`fixed right-0 top-0 h-full w-[360px] bg-white shadow-xl transform transition-transform duration-300 z-[9999] ${showFilters ? \"translate-x-0\" : \"translate-x-full\"\n          }`}\n        role=\"dialog\"\n        aria-modal=\"true\"\n      >\n        <div className=\"flex items-center justify-between p-4 border-b\">\n          <div className=\"flex items-center gap-2\">\n            <Search className=\"w-5 h-5\" />\n            <h3 className=\"font-semibold\">Filters</h3>\n          </div>\n          <button\n            onClick={() => setShowFilters(false)}\n            className=\"p-2 rounded hover:bg-gray-100\"\n          >\n            <X className=\"w-4 h-4\" />\n          </button>\n        </div>\n\n        <div className=\"p-4 space-y-4 overflow-auto h-[calc(100%-140px)]\">\n          <div>\n            <label className=\"block text-sm text-gray-600 mb-2\">Employee</label>\n            <Select\n              value={filterEmployee}\n              onValueChange={(v) => setFilterEmployee(v)}\n            >\n              <SelectTrigger className=\"w-full rounded border px-3 py-2\">\n                <SelectValue placeholder=\"All\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">All</SelectItem>\n                {/* SHOW THE FULL EMPLOYEE LIST */}\n                {employeeOptions.slice(1).map((e) => (\n                  <SelectItem key={e} value={e}>\n                    {getEmployeeLabel(e)}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n        </div>\n\n        <div className=\"p-4 border-t flex items-center justify-between gap-2\">\n          <Button\n            variant=\"outline\"\n            onClick={() => {\n              setFilterEmployee(\"all\");\n              setShowFilters(false);\n            }}\n          >\n            Reset\n          </Button>\n          <div className=\"flex items-center gap-2\">\n            <Button variant=\"ghost\" onClick={() => setShowFilters(false)}>\n              Close\n            </Button>\n            <Button\n              className=\"bg-blue-600 text-white\"\n              onClick={() => {\n                setShowFilters(false);\n                setCurrentPage(1);\n                loadTimesheets(token ?? null);\n              }}\n            >\n              Apply\n            </Button>\n          </div>\n        </div>\n      </aside>\n\n      {/* Log Time Modal */}\n      {showLogModal && (\n        <div className=\"fixed inset-0 z-[10020] flex items-start justify-center pt-12 px-4\">\n          <div\n            className=\"absolute inset-0 bg-black/40\"\n            onClick={() => setShowLogModal(false)}\n          />\n          <div className=\"relative bg-white w-full max-w-4xl rounded-xl shadow-xl overflow-hidden\">\n            <div className=\"flex items-center justify-between px-6 py-4 border-b\">\n              <h3 className=\"text-lg font-semibold\">\n                {editingId ? \"Edit TimeLog\" : \"Log Time\"}\n              </h3>\n              <button\n                className=\"p-2 rounded hover:bg-gray-100\"\n                onClick={() => setShowLogModal(false)}\n                aria-label=\"Close\"\n              >\n                <X className=\"w-5 h-5 text-gray-500\" />\n              </button>\n            </div>\n\n            <div className=\"p-6\">\n              <div className=\"bg-white rounded-md border p-6\">\n                <h4 className=\"text-md font-medium mb-4\">TimeLog Details</h4>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  <div>\n                    <label className=\"block text-sm text-gray-700 mb-2\">\n                      Project *\n                    </label>\n                    <select\n                      value={form.projectId || \"\"}\n                      onChange={(e) => {\n                        const value = e.target.value;\n                        setForm((s) => ({\n                          ...s,\n                          projectId: value,\n                          taskId: \"\",\n                          employeeId: \"\",\n                        }));\n                        if (value) {\n                          fetchProjectTasks(value);\n                        } else {\n                          setProjectTasks([]);\n                          setSelectedTaskEmployees([]);\n                        }\n                      }}\n                      className=\"w-full border rounded px-3 py-2 text-sm\"\n                    >\n                      <option value=\"\">--</option>\n                      {projectsLoading && <option value=\"\">Loading...</option>}\n                      {projectsError && (\n                        <option value=\"\">Error loading projects</option>\n                      )}\n                      {projectOptions.map((p) => (\n                        <option\n                          key={`${p.id}-${p.shortCode}`}\n                          value={String(p.id)}\n                        >\n                          {p.id != null\n                            ? `#${p.id} - ${p.name || p.shortCode}`\n                            : p.name || p.shortCode}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm text-gray-700 mb-2\">\n                      Task *\n                    </label>\n                    <select\n                      value={form.taskId || \"--\"}\n                      onChange={(e) => {\n                        const val = e.target.value;\n                        if (val === \"--\") {\n                          setForm((s) => ({\n                            ...s,\n                            taskId: \"\",\n                            employeeId: \"\",\n                          }));\n                          setSelectedTaskEmployees([]);\n                          return;\n                        }\n                        const idNum = Number(val);\n                        const task = projectTasks.find((t) => t.id === idNum);\n                        setForm((s) => ({\n                          ...s,\n                          taskId: val,\n                          employeeId: \"\",\n                        }));\n                        setSelectedTaskEmployees(task?.assignedEmployees ?? []);\n                      }}\n                      className=\"w-full border rounded px-3 py-2 text-sm\"\n                      disabled={!!form.projectId && projectTasks.length === 0}\n                    >\n                      {form.projectId ? (\n                        projectTasks.length === 0 ? (\n                          <option value=\"--\">No tasks</option>\n                        ) : (\n                          <>\n                            <option value=\"--\">--</option>\n                            {projectTasks.map((t) => (\n                              <option key={t.id} value={String(t.id)}>\n                                {getTaskLabel(String(t.id))}\n                              </option>\n                            ))}\n                          </>\n                        )\n                      ) : (\n                        allTaskOptions.map((t) => (\n                          <option key={t} value={t}>\n                            {t === \"--\" ? \"--\" : getTaskLabel(t)}\n                          </option>\n                        ))\n                      )}\n                    </select>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm text-gray-700 mb-2\">\n                      Employee *\n                    </label>\n                    <select\n                      value={form.employeeId || \"--\"}\n                      onChange={(e) =>\n                        setForm((s) => ({\n                          ...s,\n                          employeeId:\n                            e.target.value === \"--\" ? \"\" : e.target.value,\n                        }))\n                      }\n                      className=\"w-full border rounded px-3 py-2 text-sm\"\n                      disabled={!!form.projectId && projectTasks.length === 0}\n                    >\n                      {(() => {\n                        const projectEmployees = form.projectId\n                          ? projectEmployeeMap.get(form.projectId) ?? []\n                          : [];\n\n                        if (form.projectId && projectTasks.length === 0) {\n                          return <option value=\"--\">No employees</option>;\n                        }\n\n                        if (selectedTaskEmployees.length > 0) {\n                          return (\n                            <>\n                              <option value=\"--\">--</option>\n                              {selectedTaskEmployees.map((e) => (\n                                <option key={e.employeeId} value={e.employeeId}>\n                                  {e.name\n                                    ? `${e.name} (${e.employeeId})`\n                                    : e.employeeId}\n                                </option>\n                              ))}\n                            </>\n                          );\n                        }\n\n                        if (form.projectId && projectEmployees.length > 0) {\n                          return (\n                            <>\n                              <option value=\"--\">--</option>\n                              {projectEmployees.map((e) => (\n                                <option key={e.employeeId} value={e.employeeId}>\n                                  {e.name\n                                    ? `${e.name} (${e.employeeId})`\n                                    : e.employeeId}\n                                </option>\n                              ))}\n                            </>\n                          );\n                        }\n\n                        return employeeOptions.map((e) => (\n                          <option key={e} value={e}>\n                            {getEmployeeLabel(e)}\n                          </option>\n                        ));\n                      })()}\n                    </select>\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6\">\n                  <div>\n                    <label className=\"block text-sm text-gray-700 mb-2\">\n                      Start Date *\n                    </label>\n                    <input\n                      type=\"date\"\n                      value={form.startDate}\n                      onChange={(e) =>\n                        setForm((s) => ({\n                          ...s,\n                          startDate: e.target.value,\n                        }))\n                      }\n                      className=\"w-full border rounded px-3 py-2 text-sm\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm text-gray-700 mb-2\">\n                      Start Time *\n                    </label>\n                    <input\n                      type=\"time\"\n                      value={form.startTime}\n                      onChange={(e) =>\n                        setForm((s) => ({\n                          ...s,\n                          startTime: e.target.value,\n                        }))\n                      }\n                      className=\"w-full border rounded px-3 py-2 text-sm\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm text-gray-700 mb-2\">\n                      End Date *\n                    </label>\n                    <input\n                      type=\"date\"\n                      value={form.endDate}\n                      onChange={(e) =>\n                        setForm((s) => ({\n                          ...s,\n                          endDate: e.target.value,\n                        }))\n                      }\n                      className=\"w-full border rounded px-3 py-2 text-sm\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm text-gray-700 mb-2\">\n                      End Time *\n                    </label>\n                    <input\n                      type=\"time\"\n                      value={form.endTime}\n                      onChange={(e) =>\n                        setForm((s) => ({\n                          ...s,\n                          endTime: e.target.value,\n                        }))\n                      }\n                      className=\"w-full border rounded px-3 py-2 text-sm\"\n                    />\n                  </div>\n                </div>\n\n                <div className=\"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4 items-center\">\n                  <div>\n                    <label className=\"block text-sm text-gray-700 mb-2\">\n                      Memo *\n                    </label>\n                    <input\n                      type=\"text\"\n                      value={form.memo}\n                      onChange={(e) =>\n                        setForm((s) => ({\n                          ...s,\n                          memo: e.target.value,\n                        }))\n                      }\n                      className=\"w-full border rounded px-3 py-2 text-sm\"\n                      placeholder=\"Memo\"\n                    />\n                  </div>\n\n                  <div className=\"text-right\">\n                    <div className=\"text-sm text-gray-500\">Total Hours</div>\n                    <div className=\"text-2xl font-semibold text-blue-600\">\n                      {modalTotalHours}h\n                    </div>\n                  </div>\n                </div>\n\n                {saveError && (\n                  <div className=\"mt-4 text-sm text-red-600\">{saveError}</div>\n                )}\n              </div>\n\n              <div className=\"flex items-center justify-center gap-6 mt-8 pb-6\">\n                <button\n                  onClick={() => setShowLogModal(false)}\n                  className=\"px-6 py-2 rounded-md border text-blue-600\"\n                  disabled={saving}\n                >\n                  Cancel\n                </button>\n\n                <button\n                  onClick={saveEntry}\n                  className=\"px-6 py-2 rounded-md bg-blue-600 text-white shadow\"\n                  disabled={saving}\n                >\n                  {saving ? \"Saving...\" : editingId ? \"Update\" : \"Save\"}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* View Modal */}\n      {isViewOpen && selectedRow && (\n        <div className=\"fixed inset-0 z-[10030] flex items-start justify-center pt-8 px-6\">\n          <div\n            className=\"absolute inset-0 bg-black/40\"\n            onClick={() => setIsViewOpen(false)}\n          />\n\n          <div className=\"relative bg-white w-full max-w-6xl rounded-xl shadow-xl overflow-hidden\">\n            <div className=\"flex items-center justify-between px-6 py-4 border-b\">\n              <h3 className=\"text-xl font-semibold\">Timesheet</h3>\n              <button\n                className=\"p-2 rounded hover:bg-gray-100\"\n                onClick={() => setIsViewOpen(false)}\n                aria-label=\"Close\"\n              >\n                <X className=\"w-5 h-5 text-gray-500\" />\n              </button>\n            </div>\n\n            <div className=\"p-6\">\n              <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n                <div className=\"lg:col-span-2 relative bg-white rounded-xl border p-6\">\n                  <div className=\"absolute top-4 right-4 text-gray-500\">â‹®</div>\n\n                  <h4 className=\"text-lg font-medium mb-4\">TimeLog Details</h4>\n\n                  <div className=\"grid grid-cols-3 gap-y-4 gap-x-6 items-center text-sm\">\n                    <div className=\"text-gray-500\">Start Time</div>\n                    <div className=\"col-span-2\">\n                      {fmtDateTime(\n                        selectedRow.startDate,\n                        selectedRow.startTime\n                      )}\n                    </div>\n\n                    <div className=\"text-gray-500\">End Time</div>\n                    <div className=\"col-span-2\">\n                      {fmtDateTime(selectedRow.endDate, selectedRow.endTime)}\n                    </div>\n\n                    <div className=\"text-gray-500\">Total Hours</div>\n                    <div className=\"col-span-2\">\n                      {typeof selectedRow.durationHours === \"number\"\n                        ? `${selectedRow.durationHours}h`\n                        : \"-\"}\n                    </div>\n\n                    <div className=\"text-gray-500\">Memo</div>\n                    <div className=\"col-span-2\">{selectedRow.memo ?? \"-\"}</div>\n\n                    <div className=\"text-gray-500\">Project</div>\n                    <div className=\"col-span-2\">\n                      {selectedRow.projectShortCode ??\n                        selectedRow.projectId ??\n                        \"-\"}\n                    </div>\n\n                    <div className=\"text-gray-500\">Task</div>\n                    <div className=\"col-span-2\">\n                      Task {selectedRow.taskId ?? \"-\"}\n                    </div>\n\n                    <div className=\"text-gray-500\">Employee</div>\n                    <div className=\"col-span-2 flex items-center gap-3\">\n                      <div className=\"w-10 h-10 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center\">\n                        {selectedRow.employees &&\n                          selectedRow.employees[0]?.profileUrl ? (\n                          <img\n                            src={selectedRow.employees[0].profileUrl!}\n                            alt={selectedRow.employees[0].name ?? \"\"}\n                            className=\"w-full h-full object-cover\"\n                          />\n                        ) : (\n                          <div className=\"w-6 h-6 rounded-full bg-gray-200\" />\n                        )}\n                      </div>\n                      <div>\n                        <div className=\"font-medium text-sm\">\n                          {selectedRow.employees &&\n                            selectedRow.employees[0]?.name\n                            ? selectedRow.employees[0].name\n                            : selectedRow.employeeId}\n                        </div>\n                        <div className=\"text-xs text-gray-500\">\n                          {selectedRow.employees &&\n                            selectedRow.employees[0]?.designation\n                            ? selectedRow.employees[0].designation\n                            : \"\"}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"bg-white rounded-xl border p-5\">\n                  <h5 className=\"font-medium mb-3\">History</h5>\n\n                  <div className=\"space-y-4 text-sm text-gray-700\">\n                    <div className=\"flex justify-between\">\n                      <div className=\"text-gray-500\">Start Time</div>\n                      <div>\n                        {fmtDateTime(\n                          selectedRow.startDate,\n                          selectedRow.startTime\n                        )}\n                      </div>\n                    </div>\n\n                    <div className=\"flex justify-between\">\n                      <div className=\"text-gray-500\">Task</div>\n                      <div>Task {selectedRow.taskId ?? \"-\"}</div>\n                    </div>\n\n                    <div className=\"flex justify-between\">\n                      <div className=\"text-gray-500\">End Time</div>\n                      <div>\n                        {fmtDateTime(selectedRow.endDate, selectedRow.endTime)}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"flex items-center justify-center gap-6 mt-8 pb-6\">\n                <button\n                  onClick={() => setIsViewOpen(false)}\n                  className=\"px-6 py-2 rounded-md border text-blue-600\"\n                >\n                  Close\n                </button>\n                <button\n                  onClick={() => {\n                    if (selectedRow) {\n                      openLogForm(selectedRow);\n                    }\n                    setIsViewOpen(false);\n                  }}\n                  className=\"px-6 py-2 rounded-md bg-blue-600 text-white\"\n                >\n                  Edit\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Delete confirm modal */}\n      {isDeleteConfirmOpen && selectedRow && (\n        <div className=\"fixed inset-0 z-[10040] flex items-start justify-center pt-12 px-4\">\n          <div\n            className=\"absolute inset-0 bg-black/40\"\n            onClick={() => setIsDeleteConfirmOpen(false)}\n          />\n          <div className=\"relative bg-white w-full max-w-md rounded-lg shadow-xl overflow-hidden\">\n            <div className=\"p-6\">\n              <h3 className=\"text-lg font-semibold mb-4\">Delete TimeLog</h3>\n              <p className=\"text-sm text-gray-700\">\n                Are you sure you want to delete timesheet{\" \"}\n                <strong>\n                  RTA-\n                  {String(selectedRow.id).padStart(2, \"0\")}\n                </strong>\n                ? This action cannot be undone.\n              </p>\n\n              {saveError && (\n                <div className=\"mt-4 text-sm text-red-600\">{saveError}</div>\n              )}\n\n              <div className=\"flex items-center justify-end gap-4 mt-6\">\n                <button\n                  className=\"px-4 py-2 rounded border\"\n                  onClick={() => setIsDeleteConfirmOpen(false)}\n                  disabled={saving}\n                >\n                  Cancel\n                </button>\n                <button\n                  className=\"px-4 py-2 rounded bg-red-600 text-white\"\n                  onClick={deleteTimesheet}\n                  disabled={saving}\n                >\n                  {saving ? \"Deleting...\" : \"Delete\"}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Weekly full-screen view */}\n      {viewMode === \"weekly\" && (\n        <WeeklyTimesheetModal\n          open={true}\n          onClose={() => setViewMode(\"table\")}\n        />\n      )}\n\n      {viewMode === \"TimesheetSummary\" && (\n        <TimesheetSummaryList />)}\n\n      {/* Calendar full-screen modal */}\n      {showCalendarModal && (\n        <div className=\"fixed inset-0 z-[10050] flex items-start justify-center pt-8 px-6\">\n          <div\n            className=\"absolute inset-0 bg-black/40\"\n            onClick={() => setShowCalendarModal(false)}\n          />\n\n          <div className=\"relative bg-white w-full max-w-[1180px] rounded-xl shadow-xl overflow-hidden\">\n            <div className=\"flex items-center justify-between px-6 py-4 border-b\">\n              <h3 className=\"text-xl font-semibold\">Calendar</h3>\n              <div className=\"flex items-center gap-2\">\n                <button\n                  className=\"px-3 py-1 rounded hover:bg-gray-100\"\n                  onClick={() => setShowCalendarModal(false)}\n                  aria-label=\"Close\"\n                >\n                  Close\n                </button>\n              </div>\n            </div>\n\n            <div className=\"p-6\">\n              <div className=\"grid grid-cols-1 gap-4\">\n                <FullCalendarView\n                  events={timesheets}\n                  onEventClick={(ev) => {\n                    openLogForm(ev as any);\n                    setShowCalendarModal(false);\n                  }}\n                />\n              </div>\n            </div>\n\n            <div className=\"flex items-center justify-end gap-4 px-6 py-4 border-t\">\n              <button\n                onClick={() => setShowCalendarModal(false)}\n                className=\"px-4 py-2 rounded border\"\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n    Select,\n    SelectContent,\n    SelectItem,\n    SelectTrigger,\n    SelectValue,\n} from \"@/components/ui/select\";\nimport { Search } from \"lucide-react\";\n\ntype FiltersSectionProps = {\n    employeeFilter: string;\n    setEmployeeFilter: (value: string) => void;\n    employeeOptions: string[];\n    getEmployeeLabel: (id: string) => string;\n    onOpenFiltersDrawer: () => void;\n};\n\nconst FiltersSection: React.FC<FiltersSectionProps> = ({\n    employeeFilter,\n    setEmployeeFilter,\n    employeeOptions,\n    getEmployeeLabel,\n    onOpenFiltersDrawer,\n}) => {\n    return (\n        <div className=\"bg-white rounded-lg border p-3 mb-4 flex items-center gap-4\">\n            <div className=\"flex items-center gap-3\">\n                <span className=\"text-sm text-gray-600\">Duration</span>\n                <Input placeholder=\"Start Date to End Date\" className=\"w-64\" />\n            </div>\n\n            <div className=\"flex items-center gap-3\">\n                <span className=\"text-sm text-gray-600\">Employee</span>\n                <Select\n                    value={employeeFilter}\n                    onValueChange={(v) => setEmployeeFilter(v)}\n                >\n                    <SelectTrigger className=\"w-40\">\n                        <SelectValue placeholder=\"All\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                        <SelectItem value=\"All\">All</SelectItem>\n                        {employeeOptions.slice(1).map((e) => (\n                            <SelectItem key={e} value={e}>\n                                {getEmployeeLabel(e)}\n                            </SelectItem>\n                        ))}\n                    </SelectContent>\n                </Select>\n            </div>\n\n            <div className=\"ml-auto flex items-center gap-4\">\n                <button\n                    onClick={onOpenFiltersDrawer}\n                    className=\"flex items-center gap-2 text-sm text-gray-600 hover:text-gray-800\"\n                >\n                    <Search className=\"w-4 h-4\" /> Filters\n                </button>\n            </div>\n        </div>\n    );\n};\n\nexport default FiltersSection;\n\n","import React from \"react\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Search, List, Calendar, User } from \"lucide-react\";\n\nexport type ViewMode = \"table\" | \"list\" | \"calendar\" | \"weekly\" | \"TimesheetSummary\";\n\ntype ActionsSectionProps = {\n    searchInput: string;\n    setSearchInput: (v: string) => void;\n    setSearchQuery: (v: string) => void;\n    setCurrentPage: (updater: (prev: number) => number) => void;\n    viewMode: ViewMode;\n    setViewMode: (mode: ViewMode) => void;\n    showCalendarModal: boolean;\n    setShowCalendarModal: (value: boolean) => void;\n    openLogForm: () => void;\n};\n\nconst ActionsSection: React.FC<ActionsSectionProps> = ({\n    searchInput,\n    setSearchInput,\n    setSearchQuery,\n    setCurrentPage,\n    viewMode,\n    setViewMode,\n    showCalendarModal,\n    setShowCalendarModal,\n    openLogForm,\n}) => {\n    return (\n        <div className=\"flex items-center justify-between mb-4\">\n            {/* <div>\n                <Button className=\"bg-blue-600 text-white\" onClick={openLogForm}>\n                    + Log Time\n                </Button>\n            </div> */}\n\n\n                    {viewMode === \"weekly\"  ?<h1 className=\"text-xl font-semibold\">Weekly Timesheet</h1>:<div>\n                <Button className=\"bg-blue-600 text-white\" onClick={openLogForm}>\n                    + Log Time\n                </Button>\n            </div>\n}\n\n\n\n            <div className=\"flex items-center gap-3\">\n                <div className=\"flex items-center gap-2 border rounded px-2 py-1 bg-white\">\n                    <Search className=\"w-4 h-4 text-gray-400\" />\n                    <Input\n                        placeholder=\"Search\"\n                        value={searchInput}\n                        onChange={(e) => setSearchInput(e.target.value)}\n                        onKeyDown={(e) => {\n                            if (e.key === \"Enter\") {\n                                setSearchQuery(searchInput);\n                                setCurrentPage(() => 1);\n                            }\n                        }}\n                        className=\"border-0 bg-transparent focus-visible:ring-0\"\n                    />\n                </div>\n\n                <div className=\"flex items-center bg-white border rounded-lg overflow-hidden\">\n                    <button\n                        onClick={() => {\n                            const el = document.querySelector(\n                                'input[placeholder=\"Search\"]'\n                            ) as HTMLInputElement | null;\n                            if (el) el.focus();\n                        }}\n                        className=\"px-3 py-2 hover:bg-gray-50\"\n                        title=\"Search\"\n                    >\n                        <Search className=\"w-4 h-4\" />\n                    </button>\n\n                    <button\n                        onClick={() => setViewMode(\"list\")}\n                        className={`px-3 py-2 hover:bg-gray-50 ${viewMode === \"list\" ? \"bg-gray-100\" : \"\"\n                            }`}\n                        title=\"List view\"\n                    >\n                        <List className=\"w-4 h-4\" />\n                    </button>\n\n                    <button\n                        onClick={() => {\n                            setViewMode(\"weekly\");\n                        }}\n                        aria-pressed={viewMode === \"weekly\"}\n                        title=\"Weekly calendar\"\n                        className={`relative px-3 py-2 hover:bg-gray-50 ${viewMode === \"weekly\" ? \"bg-violet-600 text-white\" : \"\"\n                            }`}\n                    >\n                        <Calendar className=\"w-4 h-4\" />\n                        <span\n                            className={`absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center text-xs font-semibold leading-none\n                ${viewMode === \"weekly\"\n                                    ? \"bg-white text-violet-600\"\n                                    : \"bg-violet-600 text-white\"\n                                }`}\n                            aria-hidden=\"true\"\n                        >\n                            7\n                        </span>\n                    </button>\n\n                    <button\n                        onClick={() => setShowCalendarModal(true)}\n                        className={`px-3 py-2 hover:bg-gray-50 ${showCalendarModal ? \"ring-2 ring-indigo-300\" : \"\"\n                            }`}\n                        title=\"Open calendar view\"\n                    >\n                        <Calendar className=\"w-4 h-4 text-gray-600\" />\n                    </button>\n\n                    {/* <button\n                        onClick={() => {\n                            // future: user menu\n                           // console.log(\"User icon clicked\");\n                        }}\n                        className=\"px-3 py-2 hover:bg-gray-50\"\n                        title=\"User\"\n                    >\n                        <User className=\"w-4 h-4 text-gray-600\" />\n                    </button> */}\n                    <button\n                        onClick={() => setViewMode(\"TimesheetSummary\")}\n                        className={`px-3 py-2 hover:bg-gray-50 ${viewMode === \"TimesheetSummary\" ? \"bg-violet-600 text-white\" : \"\"\n                            }`}\n                        title=\"User\"\n                    >\n                        <User className=\"w-4 h-4 text-gray-600\" />\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default ActionsSection;\n","import React from \"react\";\nimport { Eye, Edit2, Trash2, MoreVertical } from \"lucide-react\";\nimport type { Timesheet } from \"../page\";\n\ntype TimesheetRowProps = {\n    t: Timesheet;\n    openMenuId: number | null;\n    onToggleMenu: (id: number) => void;\n    onCloseMenu: () => void;\n    onView: (row: Timesheet) => void;\n    onEdit: (row: Timesheet) => void;\n    onDelete: (row: Timesheet) => void;\n    fmtDateTime: (date?: string, time?: string) => string;\n};\n\nconst TimesheetRow: React.FC<TimesheetRowProps> = ({\n    t,\n    openMenuId,\n    onToggleMenu,\n    onCloseMenu,\n    onView,\n    onEdit,\n    onDelete,\n    fmtDateTime,\n}) => {\n    const employee =\n        t.employees && t.employees.length > 0 ? t.employees[0] : undefined;\n    const avatar =\n        employee?.profileUrl ??\n        \"/_next/static/media/avatar-placeholder.7b9f2b3a.jpg\";\n\n    return (\n        <tr key={t.id} className=\"even:bg-white odd:bg-white border-t\">\n            <td className=\"py-4 px-4 text-sm text-gray-700 border-r align-top\">\n                {t.projectShortCode ?? \"â€”\"}\n            </td>\n            <td className=\"py-4 px-4 border-r align-top\">\n                <div className=\"text-sm font-medium\">Task {t.taskId ?? \"â€”\"}</div>\n                <div className=\"text-xs text-gray-400 mt-1\">{t.memo ?? \"\"}</div>\n            </td>\n            <td className=\"py-4 px-4 w-48 border-r align-top\">\n                <div className=\"flex items-center gap-3\">\n                    <div className=\"w-8 h-8 rounded-full overflow-hidden\">\n                        {/* eslint-disable-next-line @next/next/no-img-element */}\n                        <img\n                            src={avatar}\n                            alt={employee?.name ?? \"employee\"}\n                            className=\"w-full h-full object-cover\"\n                        />\n                    </div>\n                    <div>\n                        <div className=\"text-sm text-gray-800\">\n                            {employee?.name ?? t.employeeId ?? \"â€”\"}\n                        </div>\n                        <div className=\"text-xs text-gray-400\">\n                            {employee?.designation ?? employee?.department ?? \"\"}\n                        </div>\n                    </div>\n                </div>\n            </td>\n            <td className=\"py-4 px-4 border-r align-top text-sm text-gray-600\">\n                {fmtDateTime(t.startDate, t.startTime)}\n            </td>\n            <td className=\"py-4 px-4 border-r align-top text-sm text-gray-600\">\n                {fmtDateTime(t.endDate, t.endTime)}\n            </td>\n            <td className=\"py-4 px-4 border-r align-top text-sm text-gray-700\">\n                {t.durationHours ?? 0}h\n            </td>\n            <td className=\"py-4 px-4 align-top text-right\">\n                <div className=\"inline-flex items-center relative\">\n                    <button\n                        onClick={(e) => {\n                            e.stopPropagation();\n                            if (typeof t.id === \"number\") onToggleMenu(t.id);\n                        }}\n                        className=\"p-2 rounded hover:bg-gray-100\"\n                        title=\"Actions\"\n                        aria-expanded={openMenuId === t.id}\n                    >\n                        <MoreVertical className=\"h-5 w-5 text-gray-600\" />\n                    </button>\n\n                    {openMenuId === t.id && (\n                        <>\n                            <div\n                                onClick={onCloseMenu}\n                                className=\"fixed inset-0 z-[10005]\"\n                            />\n                            <div className=\"absolute right-0 top-8 z-[10010] w-44 bg-white rounded-md border shadow-lg\">\n                                <div className=\"p-2\">\n                                    <button\n                                        onClick={() => onView(t)}\n                                        className=\"w-full flex items-center gap-3 px-3 py-2 rounded hover:bg-gray-50 text-sm text-gray-700\"\n                                    >\n                                        <Eye className=\"w-4 h-4\" />\n                                        <span>View</span>\n                                    </button>\n\n                                    <button\n                                        onClick={() => onEdit(t)}\n                                        className=\"w-full flex items-center gap-3 px-3 py-2 rounded hover:bg-gray-50 text-sm text-gray-700\"\n                                    >\n                                        <Edit2 className=\"w-4 h-4\" />\n                                        <span>Edit</span>\n                                    </button>\n\n                                    <button\n                                        onClick={() => onDelete(t)}\n                                        className=\"w-full flex items-center gap-3 px-3 py-2 rounded hover:bg-gray-50 text-sm text-red-600\"\n                                    >\n                                        <Trash2 className=\"w-4 h-4 text-red-600\" />\n                                        <span>Delete</span>\n                                    </button>\n                                </div>\n                            </div>\n                        </>\n                    )}\n                </div>\n            </td>\n        </tr>\n    );\n};\n\nexport default TimesheetRow;\n","\"use client\";\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport {\n  X,\n  Search,\n  List,\n  CalendarDays,\n  Calendar,\n  Bell,\n  User,\n  ChevronLeft,\n  ChevronRight,\n} from \"lucide-react\";\n\nconst DEFAULT_API_BASE =  `${process.env.NEXT_PUBLIC_MAIN}`;\nconst ENDPOINT = \"/timesheets/weekly\";\nconst API_TIMEOUT_MS = 15000;\n\nconst WEEKDAY_LABELS = [\"Mon\", \"Tue\", \"Wed\", \"Thurs\", \"Fri\", \"Sat\", \"Sun\"];\nconst MONTH_NAMES = [\n  \"January\",\n  \"February\",\n  \"March\",\n  \"April\",\n  \"May\",\n  \"June\",\n  \"July\",\n  \"August\",\n  \"September\",\n  \"October\",\n  \"November\",\n  \"December\",\n];\n\ntype WeeklyTimesheetModalProps = {\n  open: boolean; // kept for compatibility but ignored\n  onClose: () => void;\n  apiBaseUrl?: string;\n  authToken?: string | null;\n};\n\n// Row type\ntype Row = {\n  id: string;\n  taskId: string;\n  taskLabel: string;\n  hours: number[];\n};\n\ntype TaskItem = {\n  id: number;\n  title: string;\n  projectShortCode?: string;\n};\n\nconst WeeklyTimesheetModal: React.FC<WeeklyTimesheetModalProps> = ({\n  open,\n  onClose,\n  apiBaseUrl = DEFAULT_API_BASE,\n  authToken = null,\n}) => {\n  /* -----------------------------------------------------\n     FULL-SCREEN MODAL REMOVED â†’ ALWAYS RENDER SECTION\n  ------------------------------------------------------ */\n\n  const dateInputRef = useRef<HTMLInputElement | null>(null);\n\n  const [rows, setRows] = useState<Row[]>([\n    { id: \"r-0\", taskId: \"\", taskLabel: \"\", hours: Array(7).fill(0) },\n  ]);\n\n  const monday = getMonday(new Date());\n  const [weekDays, setWeekDays] = useState(buildWeekDaysFromMonday(monday));\n  const [weekLabel, setWeekLabel] = useState(generateWeekLabel(monday));\n\n  const [loadingSave, setLoadingSave] = useState(false);\n  const [saveResults, setSaveResults] = useState<string | null>(null);\n\n  const [tasks, setTasks] = useState<TaskItem[]>([]);\n  const [loadingTasks, setLoadingTasks] = useState(false);\n\n  function getEffectiveToken() {\n    try {\n      const t = localStorage.getItem(\"accessToken\");\n      if (t && t.trim() !== \"\") return t.trim();\n    } catch {}\n    return authToken ?? null;\n  }\n\n  useEffect(() => {\n    fetchMyTasks();\n  }, []);\n\n  async function fetchMyTasks() {\n    setLoadingTasks(true);\n    const token = getEffectiveToken();\n\n    try {\n      const res = await fetch(`${apiBaseUrl}/me/tasks`, {\n        headers: token ? { Authorization: `Bearer ${token}` } : {},\n      });\n\n      if (!res.ok) throw new Error(\"Failed to fetch tasks\");\n\n      const json = await res.json();\n\n      setTasks(\n        json.map((t: any) => ({\n          id: t.id,\n          title: t.title,\n          projectShortCode: t.projectShortCode,\n        }))\n      );\n    } catch (err) {\n    //  console.log(\"Task fetch failed:\", err);\n    } finally {\n      setLoadingTasks(false);\n    }\n  }\n\n  function openCalendar() {\n    dateInputRef.current?.showPicker?.();\n  }\n\n  function handleDateSelected(e: React.ChangeEvent<HTMLInputElement>) {\n    const chosen = new Date(e.target.value);\n    if (isNaN(chosen.getTime())) return;\n\n    const newMonday = getMonday(chosen);\n    const newWeek = buildWeekDaysFromMonday(newMonday);\n\n    setWeekDays(newWeek);\n    setWeekLabel(generateWeekLabel(newMonday));\n  }\n\n  function handleChangeHour(rowIndex: number, dayIndex: number, value: string) {\n    setRows((prev) =>\n      prev.map((r, i) =>\n        i === rowIndex\n          ? {\n              ...r,\n              hours: r.hours.map((h, j) =>\n                j === dayIndex ? clampNumberFromString(value) : h\n              ),\n            }\n          : r\n      )\n    );\n  }\n\n  function handleChangeTask(rowIndex: number, taskId: string) {\n    const task = tasks.find((t) => String(t.id) === taskId);\n    const label = task\n      ? `${task.title} (${task.projectShortCode || \"PRJ\"})`\n      : \"\";\n\n    setRows((prev) =>\n      prev.map((r, i) =>\n        i === rowIndex ? { ...r, taskId, taskLabel: label } : r\n      )\n    );\n  }\n\n  function addRow() {\n    setRows((prev) => [\n      ...prev,\n      {\n        id: `r-${Date.now()}`,\n        taskId: \"\",\n        taskLabel: \"\",\n        hours: Array(7).fill(0),\n      },\n    ]);\n  }\n\n  function totalPerDay(i: number) {\n    return rows.reduce((sum, r) => sum + (Number(r.hours[i]) || 0), 0);\n  }\n\n  async function handleSave() {\n    setLoadingSave(true);\n    setSaveResults(\"\");\n\n    const token = getEffectiveToken();\n    const headers: Record<string, string> = {\n      \"Content-Type\": \"application/json\",\n    };\n    if (token) headers[\"Authorization\"] = `Bearer ${token}`;\n\n    try {\n      for (const row of rows) {\n        if (!row.taskId) continue;\n\n        const payload = {\n          taskId: Number(row.taskId),\n          days: weekDays\n            .map((d, i) => ({\n              date: d.iso,\n              hours: Number(row.hours[i] || 0),\n            }))\n            .filter((x) => x.hours > 0),\n        };\n\n        if (payload.days.length === 0) continue;\n\n        await fetch(`${apiBaseUrl}${ENDPOINT}`, {\n          method: \"POST\",\n          headers,\n          body: JSON.stringify(payload),\n        });\n      }\n\n      setSaveResults(\"Saved successfully.\");\n    } catch (err: any) {\n      setSaveResults(\"Save failed.\");\n    } finally {\n      setLoadingSave(false);\n    }\n  }\n\n  /* ------------------------------------------------------------------\n        NOW RENDER AS NORMAL SECTION (NOT FULL SCREEN)\n  ------------------------------------------------------------------- */\n  return (\n    <div className=\"w-full bg-white border rounded-md shadow-sm p-6\">\n      {/* Hidden Calendar Input */}\n      <input\n        type=\"date\"\n        ref={dateInputRef}\n        className=\"hidden\"\n        onChange={handleDateSelected}\n      />\n\n      {/* HEADER (Kept same UI) */}\n      {/* <header className=\"flex items-center justify-between mb-6\">\n        <h1 className=\"text-xl font-semibold\">Weekly Timesheet</h1>\n\n        <div className=\"flex items-center gap-4\">\n          <button className=\"w-9 h-9 rounded-full border flex items-center justify-center\">\n            <Search className=\"w-4 h-4\" />\n          </button>\n\n          <div className=\"flex items-center rounded-md border bg-white overflow-hidden\">\n            <button className=\"px-3 h-9 border-r\">\n              <List className=\"w-4 h-4\" />\n            </button>\n            <button className=\"px-3 h-9 bg-indigo-500 text-white\">\n              <CalendarDays className=\"w-4 h-4\" />\n            </button>\n            <button className=\"px-3 h-9 border-l\">\n              <Calendar className=\"w-4 h-4\" />\n            </button>\n          </div>\n\n          <button className=\"w-9 h-9 rounded-full border flex items-center justify-center\">\n            <Bell className=\"w-4 h-4\" />\n          </button>\n\n          <div className=\"w-9 h-9 rounded-full border bg-gray-100 flex items-center justify-center\">\n            <User className=\"w-4 h-4\" />\n          </div>\n        </div>\n      </header> */}\n\n      {/* WEEK SELECTOR */}\n      <div className=\"flex items-center gap-4 mb-4\">\n        <span className=\"w-16 text-sm\">Week</span>\n\n        <div\n          onClick={openCalendar}\n          className=\"flex items-center border rounded-md bg-white cursor-pointer\"\n        >\n          <button className=\"h-9 px-3 border-r\">\n            <ChevronLeft className=\"w-4 h-4\" />\n          </button>\n\n          <div className=\"px-4 text-sm min-w-[160px] text-center\">\n            {weekLabel}\n          </div>\n\n          <button className=\"h-9 px-3 border-l\">\n            <ChevronRight className=\"w-4 h-4\" />\n          </button>\n        </div>\n      </div>\n\n      {/* TABLE SECTION â€” SAME UI */}\n      <div className=\"bg-white rounded-md border shadow-sm\">\n        {/* HEADER */}\n        <div className=\"bg-[#e8f0ff] border-b\">\n          <div className=\"grid grid-cols-[180px_repeat(7,1fr)]\">\n            <div className=\"px-4 py-3 text-xs font-medium\">Task</div>\n\n            {weekDays.map((d) => (\n              <div key={d.iso} className=\"px-2 py-2 text-center border-l\">\n                <div className=\"text-sm font-semibold\">{d.date}</div>\n                <div className=\"text-[10px]\">{d.month}</div>\n                <div className=\"text-[10px] text-gray-500\">{d.label}</div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* ROWS */}\n        {rows.map((row, rowIndex) => (\n          <div key={row.id} className=\"border-b\">\n            <div className=\"grid grid-cols-[180px_repeat(7,1fr)]\">\n              <div className=\"px-4 py-3 border-r\">\n                <select\n                  className=\"w-full border rounded-md px-3 py-2 text-sm\"\n                  value={row.taskId}\n                  onChange={(e) => handleChangeTask(rowIndex, e.target.value)}\n                >\n                  <option value=\"\">\n                    {loadingTasks ? \"Loadingâ€¦\" : \"Select Task\"}\n                  </option>\n\n                  {tasks.map((t) => (\n                    <option key={t.id} value={t.id}>\n                      {t.title}\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              {weekDays.map((d, dayIndex) => (\n                <div\n                  key={dayIndex}\n                  className=\"px-2 py-3 border-l flex justify-center\"\n                >\n                  <input\n                    type=\"number\"\n                    min={0}\n                    step=\"0.25\"\n                    className=\"w-14 text-center border rounded-md text-sm\"\n                    value={row.hours[dayIndex]}\n                    onChange={(e) =>\n                      handleChangeHour(rowIndex, dayIndex, e.target.value)\n                    }\n                  />\n                </div>\n              ))}\n            </div>\n          </div>\n        ))}\n\n        {/* TOTAL ROW */}\n        <div className=\"border-t bg-white\">\n          <div className=\"grid grid-cols-[180px_repeat(7,1fr)]\">\n            <div className=\"px-4 py-3 border-r text-sm\">Total</div>\n\n            {weekDays.map((_, i) => (\n              <div key={i} className=\"px-2 py-3 border-l text-center text-sm\">\n                {totalPerDay(i)} hrs\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* FOOTER */}\n      <div className=\"flex justify-between mt-4\">\n        <div>\n          <button\n            onClick={addRow}\n            className=\"px-4 py-2 border border-blue-500 text-blue-600 rounded-md bg-white\"\n          >\n            + Add More\n          </button>\n\n          {saveResults && (\n            <div className=\"mt-3 text-sm whitespace-pre-line\">\n              {saveResults}\n            </div>\n          )}\n        </div>\n\n        <button\n          onClick={handleSave}\n          disabled={loadingSave}\n          className=\"px-6 py-2 bg-blue-600 text-white rounded-md\"\n        >\n          {loadingSave ? \"Savingâ€¦\" : \"Save\"}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default WeeklyTimesheetModal;\n\n/* UTILITIES */\nfunction isoDate(d: Date) {\n  return `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(\n    2,\n    \"0\"\n  )}-${String(d.getDate()).padStart(2, \"0\")}`;\n}\nfunction padNum(n: number) {\n  return String(n).padStart(2, \"0\");\n}\nfunction shortMonth(d: Date) {\n  return MONTH_NAMES[d.getMonth()].slice(0, 3);\n}\n\nfunction generateWeekLabel(monday: Date) {\n  const start = `${padNum(monday.getDate())} ${shortMonth(monday)}`;\n  const end = new Date(monday);\n  end.setDate(monday.getDate() + 6);\n  return `${start} - ${padNum(end.getDate())} ${shortMonth(end)}`;\n}\n\nfunction getMonday(d: Date) {\n  const dt = new Date(d);\n  dt.setDate(dt.getDate() - ((dt.getDay() + 6) % 7));\n  return dt;\n}\n\nfunction buildWeekDaysFromMonday(monday: Date) {\n  return Array.from({ length: 7 }).map((_, i) => {\n    const dd = new Date(monday);\n    dd.setDate(monday.getDate() + i);\n    return {\n      date: `${dd.getDate()}`,\n      month: shortMonth(dd),\n      label: WEEKDAY_LABELS[i],\n      iso: isoDate(dd),\n    };\n  });\n}\n\nfunction clampNumberFromString(v: string) {\n  const n = Number(v);\n  return isNaN(n) || n < 0 ? 0 : n;\n}\n","\"use client\";\n\nimport React, { useMemo, useState } from \"react\";\nimport type { Timesheet } from \"../page\";\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\n\ntype FullCalendarViewProps = {\n  events: Timesheet[];\n  onEventClick: (ev: Timesheet) => void;\n};\n\nfunction getDateKey(date?: string) {\n  return date ?? \"\";\n}\n\nconst FullCalendarView: React.FC<FullCalendarViewProps> = ({\n  events,\n  onEventClick,\n}) => {\n  const [currentMonth, setCurrentMonth] = useState(() => {\n    const d = new Date();\n    return new Date(d.getFullYear(), d.getMonth(), 1);\n  });\n\n  // Group events by date\n  const eventsByDate = useMemo(() => {\n    const map = new Map<string, Timesheet[]>();\n    events.forEach((e) => {\n      if (!e.startDate) return;\n      const key = getDateKey(e.startDate);\n      if (!map.has(key)) map.set(key, []);\n      map.get(key)!.push(e);\n    });\n    return map;\n  }, [events]);\n\n  // Build grid for calendar\n  const days = useMemo(() => {\n    const year = currentMonth.getFullYear();\n    const month = currentMonth.getMonth();\n    const firstDay = new Date(year, month, 1);\n    const startDay = (firstDay.getDay() + 6) % 7; // Monday = 0\n    const daysInMonth = new Date(year, month + 1, 0).getDate();\n\n    const cells: { date: Date | null }[] = [];\n\n    for (let i = 0; i < startDay; i++) cells.push({ date: null });\n    for (let d = 1; d <= daysInMonth; d++) {\n      cells.push({ date: new Date(year, month, d) });\n    }\n    while (cells.length % 7 !== 0) cells.push({ date: null });\n\n    return cells;\n  }, [currentMonth]);\n\n  // Month label\n  const monthLabel = currentMonth.toLocaleDateString(undefined, {\n    month: \"long\",\n    year: \"numeric\",\n  });\n\n  function formatISO(d: Date) {\n    return `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(\n      2,\n      \"0\"\n    )}-${String(d.getDate()).padStart(2, \"0\")}`;\n  }\n\n  function changeMonth(delta: number) {\n    setCurrentMonth((prev) => new Date(prev.getFullYear(), prev.getMonth() + delta, 1));\n  }\n\n  return (\n    <div className=\"w-full bg-white rounded-xl shadow-lg overflow-hidden border\">\n\n      {/* HEADER */}\n      <div className=\"flex items-center justify-between px-6 py-4 border-b  bg-gradient-to-r from-indigo-50 to-blue-50\">\n        <button\n          onClick={() => changeMonth(-1)}\n          className=\"p-2 hover:bg-white rounded-full shadow-sm\"\n        >\n          <ChevronLeft className=\"w-5 h-5 text-gray-700\" />\n        </button>\n\n        <div className=\"text-lg font-semibold text-gray-700\">{monthLabel}</div>\n\n        <button\n          onClick={() => changeMonth(1)}\n          className=\"p-2 hover:bg-white rounded-full shadow-sm\"\n        >\n          <ChevronRight className=\"w-5 h-5 text-gray-700\" />\n        </button>\n      </div>\n\n      {/* WEEK DAYS */}\n      <div className=\"grid grid-cols-7 text-xs text-center border-b bg-gray-100\">\n        {[\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"].map((d) => (\n          <div key={d} className=\"py-3 font-semibold text-gray-700 tracking-wide\">\n            {d}\n          </div>\n        ))}\n      </div>\n\n      {/* CALENDAR GRID */}\n      <div className=\"grid grid-cols-7 gap-[1px] bg-gray-200\">\n        {days.map((cell, idx) => {\n          if (!cell.date) {\n            return (\n              <div key={idx} className=\"bg-gray-50 h-[120px]\" />\n            );\n          }\n\n          const iso = formatISO(cell.date);\n          const dayEvents = eventsByDate.get(iso) ?? [];\n\n          return (\n            <div\n              key={idx}\n              className=\"bg-white h-[120px] p-2 flex flex-col border border-gray-100 hover:bg-gray-50 transition group\"\n            >\n              {/* Day number */}\n              <div className=\"text-[12px] font-semibold text-gray-800 mb-1 group-hover:text-blue-600\">\n                {cell.date.getDate()}\n              </div>\n\n              {/* Events */}\n              <div className=\"flex flex-col gap-1 overflow-hidden\">\n                {dayEvents.slice(0, 4).map((ev) => (\n                  <button\n                    key={ev.id}\n                    onClick={() => onEventClick(ev)}\n                    className=\"text-left rounded-md bg-blue-50 hover:bg-blue-100 transition px-2 py-1 text-[11px] truncate shadow-sm\"\n                  >\n                    <span className=\"font-medium text-blue-700\">\n                      Task {ev.taskId ?? ev.id}\n                    </span>\n                    <span className=\"text-gray-500\"> â€¢ {ev.durationHours ?? 0}h </span>\n                  </button>\n                ))}\n\n                {/* Show \"+more\" */}\n                {dayEvents.length > 4 && (\n                  <div className=\"text-[10px] text-gray-500\">\n                    +{dayEvents.length - 4} moreâ€¦\n                  </div>\n                )}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default FullCalendarView;\n","\n// // components/TimesheetSummaryList.tsx\n// \"use client\";\n\n// import React, { useEffect, useState } from \"react\";\n\n// type EmployeeAvatar = {\n//   employeeId: string;\n//   name?: string | null;\n//   profileUrl?: string | null;\n//   designation?: string | null;\n//   department?: string | null;\n// };\n\n// type TimeLog = {\n//   id: number;\n//   projectId?: number;\n//   projectShortCode?: string;\n//   projectName?: string;\n//   taskId?: number;\n//   taskName?: string;\n//   employeeId?: string;\n//   employees?: EmployeeAvatar[];\n//   startDate?: string; // \"YYYY-MM-DD\"\n//   startTime?: string; // \"HH:MM:SS\" or \"HH:MM\"\n//   endDate?: string;\n//   endTime?: string;\n//   memo?: string | null;\n//   durationHours?: number;\n//   createdAt?: string;\n// };\n\n// type EmployeeSummary = {\n//   employeeId: string;\n//   employeeName: string;\n//   employeeEmail?: string;\n//   designation?: string;\n//   totalMinutes?: number;\n//   totalHours?: number;\n//   timeLogs: TimeLog[];\n// };\n\n// const BASE =\n//   (typeof process !== \"undefined\" && process.env.NEXT_PUBLIC_MAIN) ||\n//   (typeof process !== \"undefined\" && process.env.NEXT_PUBLIC_GATEWAY) ||\n//   \"http://localhost:3000\";\n\n// const fetchUrl = () => `${BASE.replace(/\\/$/, \"\")}/timesheets/summary`;\n\n// function formatHours(hours?: number) {\n//   if (hours == null || isNaN(Number(hours))) return \"0h\";\n//   const n = Number(hours);\n//   if (n === 0) return \"0h\";\n//   return `${n % 1 === 0 ? n.toFixed(0) : n.toFixed(2)}h`;\n// }\n\n// function formatDateTime(dateStr?: string, timeStr?: string) {\n//   if (!dateStr) return \"-\";\n//   const dt = timeStr ? `${dateStr}T${timeStr}` : dateStr;\n//   const d = new Date(dt);\n//   if (isNaN(d.getTime())) {\n//     return `${dateStr}${timeStr ? \" \" + timeStr : \"\"}`;\n//   }\n//   return d.toLocaleString(undefined, {\n//     month: \"2-digit\",\n//     day: \"2-digit\",\n//     year: \"numeric\",\n//     hour: \"2-digit\",\n//     minute: \"2-digit\",\n//   });\n// }\n\n// function computeDurationHours(\n//   sDate?: string,\n//   sTime?: string,\n//   eDate?: string,\n//   eTime?: string\n// ) {\n//   if (!sDate || !eDate) return 0;\n//   try {\n//     const sParts = sDate.split(\"-\").map(Number);\n//     const eParts = eDate.split(\"-\").map(Number);\n//     let sH = 0,\n//       sM = 0,\n//       eH = 0,\n//       eM = 0;\n//     if (sTime) {\n//       const st = sTime.split(\":\").map((v) => Number(v));\n//       sH = st[0] ?? 0;\n//       sM = st[1] ?? 0;\n//     }\n//     if (eTime) {\n//       const et = eTime.split(\":\").map((v) => Number(v));\n//       eH = et[0] ?? 0;\n//       eM = et[1] ?? 0;\n//     }\n//     const start = new Date(sParts[0], sParts[1] - 1, sParts[2], sH, sM);\n//     const end = new Date(eParts[0], eParts[1] - 1, eParts[2], eH, eM);\n//     const diffMs = end.getTime() - start.getTime();\n//     if (isNaN(diffMs) || diffMs <= 0) return 0;\n//     return Math.round(diffMs / (1000 * 60 * 60));\n//   } catch {\n//     return 0;\n//   }\n// }\n\n// export default function TimesheetSummaryList() {\n//   const [data, setData] = useState<EmployeeSummary[] | null>(null);\n//   const [loading, setLoading] = useState<boolean>(false);\n//   const [error, setError] = useState<string | null>(null);\n//   const [expanded, setExpanded] = useState<Record<string, boolean>>({});\n\n//   // --- Action states (View/Edit/Delete) ---\n//   const [openMenuId, setOpenMenuId] = useState<number | null>(null);\n\n//   const [isViewOpen, setIsViewOpen] = useState(false);\n//   const [selectedLog, setSelectedLog] = useState<TimeLog | null>(null);\n\n//   const [showLogModal, setShowLogModal] = useState(false);\n//   const [editingId, setEditingId] = useState<number | null>(null);\n//   const [form, setForm] = useState({\n//     projectId: \"\",\n//     taskId: \"\",\n//     employeeId: \"\",\n//     startDate: \"\",\n//     startTime: \"\",\n//     endDate: \"\",\n//     endTime: \"\",\n//     memo: \"\",\n//   });\n//   const [saving, setSaving] = useState(false);\n//   const [saveError, setSaveError] = useState<string | null>(null);\n\n//   const [isDeleteConfirmOpen, setIsDeleteConfirmOpen] = useState(false);\n\n//   // Projects + tasks for edit modal\n//   const [projectOptions, setProjectOptions] = useState<\n//     { id: number | string | null; shortCode: string; name?: string; assignedEmployees?: EmployeeAvatar[] }[]\n//   >([]);\n//   const [projectsLoading, setProjectsLoading] = useState(false);\n//   const [projectsError, setProjectsError] = useState<string | null>(null);\n\n//   const [projectTasks, setProjectTasks] = useState<\n//     { id: number; title?: string; projectId?: number; assignedEmployees?: EmployeeAvatar[] }[]\n//   >([]);\n//   const [selectedTaskEmployees, setSelectedTaskEmployees] = useState<EmployeeAvatar[]>([]);\n\n//   // --- Load summary ---\n//   useEffect(() => {\n//     let mounted = true;\n//     async function load() {\n//       setLoading(true);\n//       setError(null);\n//       try {\n//         const token =\n//           typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null;\n//         const headers: Record<string, string> = {\n//           \"Content-Type\": \"application/json\",\n//         };\n//         if (token) headers.Authorization = `Bearer ${token}`;\n\n//         const res = await fetch(fetchUrl(), { headers, cache: \"no-store\" });\n//         if (res.status === 401) {\n//           try {\n//             localStorage.removeItem(\"accessToken\");\n//           } catch { }\n//           throw new Error(\"401: Unauthorized â€” please login.\");\n//         }\n//         if (!res.ok) {\n//           const txt = await res.text().catch(() => \"\");\n//           throw new Error(`Failed to fetch: ${res.status} ${txt}`);\n//         }\n//         const json = (await res.json()) as EmployeeSummary[];\n//         if (mounted) setData(json);\n//       } catch (err: any) {\n//         if (mounted) setError(err?.message || \"Unknown error\");\n//       } finally {\n//         if (mounted) setLoading(false);\n//       }\n//     }\n//     load();\n//     return () => {\n//       mounted = false;\n//     };\n//   }, []);\n\n//   function toggle(employeeId: string) {\n//     setExpanded((prev) => ({ ...prev, [employeeId]: !prev[employeeId] }));\n//   }\n\n//   // ---------------------\n//   // Projects & tasks APIs (for edit modal)\n//   // ---------------------\n//   const loadProjects = async (accessToken?: string | null) => {\n//     setProjectsLoading(true);\n//     setProjectsError(null);\n//     try {\n//       const resolvedToken =\n//         accessToken ||\n//         (typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null);\n\n//       const url = `${BASE.replace(/\\/$/, \"\")}/projects/AllProject`;\n//       const res = await fetch(url, {\n//         method: \"GET\",\n//         headers: resolvedToken\n//           ? {\n//               Authorization: `Bearer ${resolvedToken}`,\n//               Accept: \"application/json\",\n//             }\n//           : { Accept: \"application/json\" },\n//         cache: \"no-store\",\n//       });\n\n//       if (res.status === 401) {\n//         try {\n//           localStorage.removeItem(\"accessToken\");\n//         } catch { }\n//         setProjectOptions([]);\n//         setProjectsLoading(false);\n//         return;\n//       }\n\n//       if (!res.ok) {\n//         const txt = await res.text().catch(() => \"\");\n//         console.error(\"projects fetch failed\", res.status, txt);\n//         throw new Error(`Failed to load projects (${res.status})`);\n//       }\n\n//       const data = await res.json();\n//       if (Array.isArray(data)) {\n//         const list: any[] = [];\n//         data.forEach((p: any) => {\n//           const sc = (p?.shortCode ?? \"\").toString().trim();\n//           const id = p?.id ?? p?.projectId ?? p?._id ?? null;\n//           const name = (p?.name ?? \"\").toString().trim();\n//           const assignedEmployees: EmployeeAvatar[] = Array.isArray(p?.assignedEmployees)\n//             ? p.assignedEmployees\n//             : [];\n//           if (id != null && sc) {\n//             list.push({\n//               id,\n//               shortCode: sc,\n//               name,\n//               assignedEmployees,\n//             });\n//           }\n//         });\n//         const seen = new Set<string>();\n//         const deduped: typeof projectOptions = [];\n//         list.forEach((p) => {\n//           if (!seen.has(String(p.id))) {\n//             seen.add(String(p.id));\n//             deduped.push(p);\n//           }\n//         });\n//         setProjectOptions(deduped);\n//       } else {\n//         console.warn(\"unexpected projects response\", data);\n//         setProjectOptions([]);\n//       }\n//     } catch (err: any) {\n//       console.error(\"loadProjects error\", err);\n//       setProjectsError(String(err?.message ?? err));\n//       setProjectOptions([]);\n//     } finally {\n//       setProjectsLoading(false);\n//     }\n//   };\n\n//   const fetchProjectTasks = async (projectIdRaw: string | number, preselectTaskId?: number | null) => {\n//     if (!projectIdRaw) {\n//       setProjectTasks([]);\n//       setSelectedTaskEmployees([]);\n//       return;\n//     }\n\n//     const projectIdNum = Number(projectIdRaw);\n//     if (!projectIdNum || Number.isNaN(projectIdNum)) {\n//       setProjectTasks([]);\n//       setSelectedTaskEmployees([]);\n//       return;\n//     }\n\n//     try {\n//       const resolvedToken =\n//         (typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null);\n//       const url = `${BASE.replace(/\\/$/, \"\")}/projects/${projectIdNum}/tasks`;\n//       const res = await fetch(url, {\n//         method: \"GET\",\n//         headers: resolvedToken\n//           ? {\n//               Authorization: `Bearer ${resolvedToken}`,\n//               Accept: \"application/json\",\n//             }\n//           : { Accept: \"application/json\" },\n//         cache: \"no-store\",\n//       });\n\n//       if (!res.ok) {\n//         const txt = await res.text().catch(() => \"\");\n//         console.error(\"project tasks fetch failed\", res.status, txt);\n//         setProjectTasks([]);\n//         setSelectedTaskEmployees([]);\n//         return;\n//       }\n\n//       const data = await res.json();\n//       const list: any[] = Array.isArray(data) ? data : [];\n//       setProjectTasks(list);\n\n//       if (preselectTaskId != null && list.length > 0) {\n//         const task = list.find((t) => t.id === preselectTaskId);\n//         setSelectedTaskEmployees(task?.assignedEmployees ?? []);\n//       } else {\n//         setSelectedTaskEmployees([]);\n//       }\n//     } catch (err) {\n//       console.error(\"fetchProjectTasks error\", err);\n//       setProjectTasks([]);\n//       setSelectedTaskEmployees([]);\n//     }\n//   };\n\n//   // ---------------------\n//   // Open view / edit / delete actions\n//   // ---------------------\n//   const openView = (tl: TimeLog) => {\n//     setSelectedLog(tl);\n//     setIsViewOpen(true);\n//     setOpenMenuId(null);\n//   };\n\n//   const openLogForm = (tl?: TimeLog) => {\n//     setProjectTasks([]);\n//     setSelectedTaskEmployees([]);\n//     setSaveError(null);\n\n//     if (!tl) {\n//       setEditingId(null);\n//       setForm({\n//         projectId: \"\",\n//         taskId: \"\",\n//         employeeId: \"\",\n//         startDate: \"\",\n//         startTime: \"\",\n//         endDate: \"\",\n//         endTime: \"\",\n//         memo: \"\",\n//       });\n//     } else {\n//       setEditingId(tl.id);\n//       setForm({\n//         projectId:\n//           tl.projectId !== undefined && tl.projectId !== null ? String(tl.projectId) : \"\",\n//         taskId: tl.taskId !== undefined && tl.taskId !== null ? String(tl.taskId) : \"\",\n//         employeeId: tl.employeeId ?? (tl.employees && tl.employees[0]?.employeeId) ?? \"\",\n//         startDate: tl.startDate ?? \"\",\n//         startTime: tl.startTime ? tl.startTime.slice(0, 5) : \"\",\n//         endDate: tl.endDate ?? \"\",\n//         endTime: tl.endTime ? tl.endTime.slice(0, 5) : \"\",\n//         memo: tl.memo ?? \"\",\n//       });\n\n//       if (tl.projectId) {\n//         fetchProjectTasks(tl.projectId, tl.taskId ?? null);\n//       }\n//     }\n\n//     // ensure projects are loaded for select lists\n//     loadProjects();\n//     setShowLogModal(true);\n//     setOpenMenuId(null);\n//   };\n\n//   const saveEntry = async () => {\n//     setSaving(true);\n//     setSaveError(null);\n//     try {\n//       if (\n//         !form.projectId ||\n//         !form.taskId ||\n//         !form.employeeId ||\n//         !form.startDate ||\n//         !form.startTime ||\n//         !form.endDate ||\n//         !form.endTime ||\n//         !form.memo\n//       ) {\n//         setSaveError(\"Please fill all required fields.\");\n//         setSaving(false);\n//         return;\n//       }\n\n//       const payload: any = {\n//         projectId: Number(form.projectId),\n//         taskId: Number(form.taskId),\n//         employeeId: form.employeeId,\n//         startDate: form.startDate,\n//         startTime: form.startTime,\n//         endDate: form.endDate,\n//         endTime: form.endTime,\n//         memo: form.memo,\n//         durationHours: computeDurationHours(\n//           form.startDate,\n//           form.startTime,\n//           form.endDate,\n//           form.endTime\n//         ),\n//       };\n\n//       const resolvedToken =\n//         typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null;\n\n//       const url = editingId\n//         ? `${BASE.replace(/\\/$/, \"\")}/timesheets/${editingId}`\n//         : `${BASE.replace(/\\/$/, \"\")}/timesheets`;\n//       const method = editingId ? \"PUT\" : \"POST\";\n\n//       const res = await fetch(url, {\n//         method,\n//         headers: {\n//           ...(resolvedToken ? { Authorization: `Bearer ${resolvedToken}` } : {}),\n//           \"Content-Type\": \"application/json\",\n//           Accept: \"application/json\",\n//         },\n//         body: JSON.stringify(payload),\n//       });\n\n//       if (!res.ok) {\n//         const text = await res.text().catch(() => \"\");\n//         console.error(\"save entry failed\", res.status, text);\n//         throw new Error(\"Failed to save entry\");\n//       }\n\n//       // close and refresh summary\n//       setShowLogModal(false);\n//       setEditingId(null);\n//       setForm({\n//         projectId: \"\",\n//         taskId: \"\",\n//         employeeId: \"\",\n//         startDate: \"\",\n//         startTime: \"\",\n//         endDate: \"\",\n//         endTime: \"\",\n//         memo: \"\",\n//       });\n\n//       // reload summaries\n//       try {\n//         const token = typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null;\n//         const headers: Record<string, string> = { \"Content-Type\": \"application/json\" };\n//         if (token) headers.Authorization = `Bearer ${token}`;\n//         const res2 = await fetch(fetchUrl(), { headers, cache: \"no-store\" });\n//         if (res2.ok) {\n//           const json = (await res2.json()) as EmployeeSummary[];\n//           setData(json);\n//         }\n//       } catch (err) {\n//         // ignore, we've already saved\n//       }\n//     } catch (err: any) {\n//       console.error(\"saveEntry error\", err);\n//       setSaveError(err?.message || \"Failed to save entry\");\n//     } finally {\n//       setSaving(false);\n//     }\n//   };\n\n//   const openDelete = (tl: TimeLog) => {\n//     setSelectedLog(tl);\n//     setIsDeleteConfirmOpen(true);\n//     setOpenMenuId(null);\n//     setSaveError(null);\n//   };\n\n//   const deleteTimesheet = async () => {\n//     if (!selectedLog) return;\n//     setSaving(true);\n//     setSaveError(null);\n//     try {\n//       const resolvedToken =\n//         typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null;\n//       const res = await fetch(`${BASE.replace(/\\/$/, \"\")}/timesheets/${selectedLog.id}`, {\n//         method: \"DELETE\",\n//         headers: resolvedToken ? { Authorization: `Bearer ${resolvedToken}` } : undefined,\n//       });\n//       if (!res.ok) {\n//         const txt = await res.text().catch(() => \"\");\n//         console.error(\"deleteTimesheet failed\", res.status, txt);\n//         throw new Error(\"Failed to delete timesheet\");\n//       }\n//       setIsDeleteConfirmOpen(false);\n//       setSelectedLog(null);\n\n//       // refresh summary\n//       try {\n//         const token = typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null;\n//         const headers: Record<string, string> = { \"Content-Type\": \"application/json\" };\n//         if (token) headers.Authorization = `Bearer ${token}`;\n//         const res2 = await fetch(fetchUrl(), { headers, cache: \"no-store\" });\n//         if (res2.ok) {\n//           const json = (await res2.json()) as EmployeeSummary[];\n//           setData(json);\n//         }\n//       } catch (err) {\n//         // ignore\n//       }\n//     } catch (err: any) {\n//       console.error(\"deleteTimesheet error\", err);\n//       setSaveError(err?.message || \"Failed to delete timesheet\");\n//     } finally {\n//       setSaving(false);\n//     }\n//   };\n\n//   // small helper for project employee map used in edit modal\n//   const projectEmployeeMap = React.useMemo(() => {\n//     const map = new Map<string, EmployeeAvatar[]>();\n//     projectOptions.forEach((p) => {\n//       if (p.id != null && p.assignedEmployees?.length) {\n//         map.set(String(p.id), p.assignedEmployees);\n//       }\n//     });\n//     return map;\n//   }, [projectOptions]);\n\n//   // employee list derived from summary for selects if needed\n//   const employeeOptions = React.useMemo(() => {\n//     const s = new Set<string>();\n//     (data ?? []).forEach((emp) => {\n//       emp.timeLogs.forEach((t) => {\n//         if (t.employeeId) s.add(t.employeeId);\n//         if (t.employees && t.employees.length > 0) {\n//           t.employees.forEach((e) => e?.employeeId && s.add(e.employeeId));\n//         }\n//       });\n//     });\n//     return [\"--\", ...Array.from(s)];\n//   }, [data]);\n\n//   // computed hours in modal\n//   const modalTotalHours = computeDurationHours(\n//     form.startDate,\n//     form.startTime,\n//     form.endDate,\n//     form.endTime\n//   );\n\n//   // ---------------------\n//   // Render\n//   // ---------------------\n//   if (loading)\n//     return <div className=\"py-6 px-4 text-gray-600\">Loading summaryâ€¦</div>;\n//   if (error)\n//     return (\n//       <div className=\"py-6 px-4 text-red-600\">Error loading summaries: {error}</div>\n//     );\n//   if (!data || data.length === 0)\n//     return <div className=\"py-6 px-4 text-gray-600\">No summary found.</div>;\n\n//   return (\n//     <div className=\"space-y-3 px-4 pb-8\">\n//       {data.map((emp) => {\n//         const isOpen = !!expanded[emp.employeeId];\n//         const avatarUrl = emp.timeLogs?.[0]?.employees?.[0]?.profileUrl;\n//         return (\n//           <div\n//             key={emp.employeeId}\n//             className=\"border rounded-lg bg-white shadow-sm overflow-hidden\"\n//           >\n//             {/* Header row */}\n//             <div className=\"flex items-center gap-4 px-4 py-3\">\n//               <div className=\"flex items-center gap-3 flex-1\">\n//                 <div className=\"w-12 h-12 rounded-full bg-gray-50 flex items-center justify-center overflow-hidden border\">\n//                   {avatarUrl ? (\n//                     // eslint-disable-next-line @next/next/no-img-element\n//                     <img\n//                       src={avatarUrl}\n//                       alt={emp.employeeName}\n//                       className=\"w-full h-full object-cover\"\n//                     />\n//                   ) : (\n//                     <span className=\"text-sm font-medium text-gray-700\">\n//                       {emp.employeeName\n//                         ? emp.employeeName\n//                             .split(\" \")\n//                             .map((s) => s[0])\n//                             .join(\"\")\n//                             .toUpperCase()\n//                         : \"?\"}\n//                     </span>\n//                   )}\n//                 </div>\n\n//                 <div className=\"min-w-0\">\n//                   <div className=\"font-medium text-sm text-gray-800 truncate\">\n//                     {emp.employeeName}\n//                   </div>\n//                   <div className=\"text-xs text-gray-500\">\n//                     {emp.designation ?? \"â€”\"}\n//                   </div>\n//                 </div>\n//               </div>\n\n//               <div className=\"flex items-center gap-6\">\n//                 <div className=\"text-right mr-2\">\n//                   <div className=\"text-xs text-gray-500\">Total</div>\n//                   <div className=\"font-medium text-sm\">\n//                     {formatHours(emp.totalHours)}\n//                   </div>\n//                 </div>\n\n//                 <button\n//                   onClick={() => toggle(emp.employeeId)}\n//                   aria-expanded={isOpen}\n//                   className=\"w-9 h-9 flex items-center justify-center rounded border hover:bg-gray-50\"\n//                 >\n//                   {!isOpen ? (\n//                     <svg\n//                       xmlns=\"http://www.w3.org/2000/svg\"\n//                       className=\"h-5 w-5 text-blue-600\"\n//                       fill=\"none\"\n//                       viewBox=\"0 0 24 24\"\n//                       stroke=\"currentColor\"\n//                       strokeWidth={2}\n//                       aria-hidden\n//                     >\n//                       <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 4v16m8-8H4\" />\n//                     </svg>\n//                   ) : (\n//                     <svg\n//                       xmlns=\"http://www.w3.org/2000/svg\"\n//                       className=\"h-5 w-5 text-gray-600\"\n//                       fill=\"none\"\n//                       viewBox=\"0 0 24 24\"\n//                       stroke=\"currentColor\"\n//                       strokeWidth={2}\n//                       aria-hidden\n//                     >\n//                       <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M20 12H4\" />\n//                     </svg>\n//                   )}\n//                 </button>\n//               </div>\n//             </div>\n\n//             {/* Expanded detail */}\n//             {isOpen && (\n//               <div className=\"border-t bg-gray-50 px-4 py-4\">\n//                 <div className=\"overflow-auto\">\n//                   <table className=\"w-full min-w-[720px] table-fixed text-sm\">\n//                     <thead>\n//                       <tr className=\"text-left text-xs text-gray-600\">\n//                         <th className=\"w-1/3 py-2 px-3\">Task</th>\n//                         <th className=\"w-1/3 py-2 px-3\">Time</th>\n//                         <th className=\"w-1/6 py-2 px-3 text-center\">Total Hours</th>\n//                         <th className=\"w-1/6 py-2 px-3 text-center\">Actions</th>\n//                       </tr>\n//                     </thead>\n//                     <tbody>\n//                       {emp.timeLogs && emp.timeLogs.length > 0 ? (\n//                         emp.timeLogs.map((tl) => (\n//                           <tr key={tl.id} className=\"border-t bg-white last:border-b\">\n//                             <td className=\"py-3 px-3 align-top\">\n//                               <div className=\"font-medium\">{tl.taskName ?? \"Task Name\"}</div>\n//                               <div className=\"text-xs text-gray-500\">{tl.projectName ?? \"\"}</div>\n//                             </td>\n//                             <td className=\"py-3 px-3 align-top\">\n//                               <div className=\"text-xs text-gray-600\">\n//                                 {formatDateTime(tl.startDate, tl.startTime)}\n//                               </div>\n//                               <div className=\"text-xs text-gray-500\">\n//                                 {formatDateTime(tl.endDate, tl.endTime)}\n//                               </div>\n//                             </td>\n//                             <td className=\"py-3 px-3 align-top text-center\">\n//                               <div className=\"font-medium\">{formatHours(tl.durationHours)}</div>\n//                             </td>\n//                             <td className=\"py-3 px-3 align-top text-center relative\">\n//                               <div className=\"inline-flex items-center gap-2 justify-center\">\n//                                 <button\n//                                   title=\"View\"\n//                                   className=\"p-1 rounded hover:bg-gray-100\"\n//                                   onClick={() => openView(tl)}\n//                                 >\n//                                   <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-gray-600\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n//                                     <path d=\"M10 3C6 3 2.7 5.1 1 8c1.7 2.9 5 5 9 5s7.3-2.1 9-5c-1.7-2.9-5-5-9-5zM10 12a4 4 0 110-8 4 4 0 010 8z\" />\n//                                     <path d=\"M10 7a3 3 0 100 6 3 3 0 000-6z\" />\n//                                   </svg>\n//                                 </button>\n\n//                                 <button\n//                                   title=\"Edit\"\n//                                   className=\"p-1 rounded hover:bg-gray-100\"\n//                                   onClick={() => openLogForm(tl)}\n//                                 >\n//                                   <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-gray-600\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n//                                     <path d=\"M17.414 2.586a2 2 0 010 2.828l-9.9 9.9a1 1 0 01-.465.263l-4 1a1 1 0 01-1.212-1.212l1-4a1 1 0 01.263-.465l9.9-9.9a2 2 0 012.828 0z\" />\n//                                   </svg>\n//                                 </button>\n\n//                                 <button\n//                                   title=\"Delete\"\n//                                   className=\"p-1 rounded hover:bg-gray-100\"\n//                                   onClick={() => openDelete(tl)}\n//                                 >\n//                                   <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-red-600\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n//                                     <path fillRule=\"evenodd\" d=\"M6 2a1 1 0 00-1 1v1H3a1 1 0 000 2h14a1 1 0 100-2h-2V3a1 1 0 00-1-1H6zm2 6a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 10-2 0v6a1 1 0 102 0V8z\" clipRule=\"evenodd\" />\n//                                   </svg>\n//                                 </button>\n//                               </div>\n//                             </td>\n//                           </tr>\n//                         ))\n//                       ) : (\n//                         <tr>\n//                           <td colSpan={4} className=\"py-4 px-3 text-gray-500\">\n//                             No time logs available.\n//                           </td>\n//                         </tr>\n//                       )}\n//                     </tbody>\n//                   </table>\n//                 </div>\n//               </div>\n//             )}\n//           </div>\n//         );\n//       })}\n\n//       {/* View Modal */}\n//       {isViewOpen && selectedLog && (\n//         <div className=\"fixed inset-0 z-[10030] flex items-start justify-center pt-8 px-6\">\n//           <div className=\"absolute inset-0 bg-black/40\" onClick={() => setIsViewOpen(false)} />\n//           <div className=\"relative bg-white w-full max-w-6xl rounded-xl shadow-xl overflow-hidden\">\n//             <div className=\"flex items-center justify-between px-6 py-4 border-b\">\n//               <h3 className=\"text-xl font-semibold\">Timesheet</h3>\n//               <button\n//                 className=\"p-2 rounded hover:bg-gray-100\"\n//                 onClick={() => setIsViewOpen(false)}\n//                 aria-label=\"Close\"\n//               >\n//                 âœ•\n//               </button>\n//             </div>\n\n//             <div className=\"p-6\">\n//               <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n//                 <div className=\"lg:col-span-2 relative bg-white rounded-xl border p-6\">\n//                   <div className=\"absolute top-4 right-4 text-gray-500\">â‹®</div>\n\n//                   <h4 className=\"text-lg font-medium mb-4\">TimeLog Details</h4>\n\n//                   <div className=\"grid grid-cols-3 gap-y-4 gap-x-6 items-center text-sm\">\n//                     <div className=\"text-gray-500\">Start Time</div>\n//                     <div className=\"col-span-2\">\n//                       {formatDateTime(selectedLog.startDate, selectedLog.startTime)}\n//                     </div>\n\n//                     <div className=\"text-gray-500\">End Time</div>\n//                     <div className=\"col-span-2\">\n//                       {formatDateTime(selectedLog.endDate, selectedLog.endTime)}\n//                     </div>\n\n//                     <div className=\"text-gray-500\">Total Hours</div>\n//                     <div className=\"col-span-2\">\n//                       {typeof selectedLog.durationHours === \"number\"\n//                         ? `${selectedLog.durationHours}h`\n//                         : \"-\"}\n//                     </div>\n\n//                     <div className=\"text-gray-500\">Memo</div>\n//                     <div className=\"col-span-2\">{selectedLog.memo ?? \"-\"}</div>\n\n//                     <div className=\"text-gray-500\">Project</div>\n//                     <div className=\"col-span-2\">\n//                       {selectedLog.projectName ?? selectedLog.projectShortCode ?? selectedLog.projectId ?? \"-\"}\n//                     </div>\n\n//                     <div className=\"text-gray-500\">Task</div>\n//                     <div className=\"col-span-2\">{selectedLog.taskName ?? `Task ${selectedLog.taskId ?? \"-\"}`}</div>\n\n//                     <div className=\"text-gray-500\">Employee</div>\n//                     <div className=\"col-span-2 flex items-center gap-3\">\n//                       <div className=\"w-10 h-10 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center\">\n//                         {selectedLog.employees && selectedLog.employees[0]?.profileUrl ? (\n//                           // eslint-disable-next-line @next/next/no-img-element\n//                           <img src={selectedLog.employees[0].profileUrl!} alt={selectedLog.employees[0].name ?? \"\"} className=\"w-full h-full object-cover\" />\n//                         ) : (\n//                           <div className=\"w-6 h-6 rounded-full bg-gray-200\" />\n//                         )}\n//                       </div>\n//                       <div>\n//                         <div className=\"font-medium text-sm\">\n//                           {selectedLog.employees && selectedLog.employees[0]?.name\n//                             ? selectedLog.employees[0].name\n//                             : selectedLog.employeeId}\n//                         </div>\n//                         <div className=\"text-xs text-gray-500\">\n//                           {selectedLog.employees && selectedLog.employees[0]?.designation ? selectedLog.employees[0].designation : \"\"}\n//                         </div>\n//                       </div>\n//                     </div>\n//                   </div>\n//                 </div>\n\n//                 <div className=\"bg-white rounded-xl border p-5\">\n//                   <h5 className=\"font-medium mb-3\">History</h5>\n\n//                   <div className=\"space-y-4 text-sm text-gray-700\">\n//                     <div className=\"flex justify-between\">\n//                       <div className=\"text-gray-500\">Start Time</div>\n//                       <div>{formatDateTime(selectedLog.startDate, selectedLog.startTime)}</div>\n//                     </div>\n\n//                     <div className=\"flex justify-between\">\n//                       <div className=\"text-gray-500\">Task</div>\n//                       <div>{selectedLog.taskName ?? `Task ${selectedLog.taskId ?? \"-\"}`}</div>\n//                     </div>\n\n//                     <div className=\"flex justify-between\">\n//                       <div className=\"text-gray-500\">End Time</div>\n//                       <div>{formatDateTime(selectedLog.endDate, selectedLog.endTime)}</div>\n//                     </div>\n//                   </div>\n//                 </div>\n//               </div>\n\n//               <div className=\"flex items-center justify-center gap-6 mt-8 pb-6\">\n//                 <button onClick={() => setIsViewOpen(false)} className=\"px-6 py-2 rounded-md border text-blue-600\">Close</button>\n//                 <button onClick={() => { if (selectedLog) openLogForm(selectedLog); setIsViewOpen(false); }} className=\"px-6 py-2 rounded-md bg-blue-600 text-white\">Edit</button>\n//               </div>\n//             </div>\n//           </div>\n//         </div>\n//       )}\n\n//       {/* Log Time (Edit/Create) Modal */}\n//       {showLogModal && (\n//         <div className=\"fixed inset-0 z-[10020] flex items-start justify-center pt-12 px-4\">\n//           <div className=\"absolute inset-0 bg-black/40\" onClick={() => setShowLogModal(false)} />\n//           <div className=\"relative bg-white w-full max-w-4xl rounded-xl shadow-xl overflow-hidden\">\n//             <div className=\"flex items-center justify-between px-6 py-4 border-b\">\n//               <h3 className=\"text-lg font-semibold\">{editingId ? \"Edit TimeLog\" : \"Log Time\"}</h3>\n//               <button className=\"p-2 rounded hover:bg-gray-100\" onClick={() => setShowLogModal(false)} aria-label=\"Close\">âœ•</button>\n//             </div>\n\n//             <div className=\"p-6\">\n//               <div className=\"bg-white rounded-md border p-6\">\n//                 <h4 className=\"text-md font-medium mb-4\">TimeLog Details</h4>\n\n//                 <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n//                   <div>\n//                     <label className=\"block text-sm text-gray-700 mb-2\">Project *</label>\n//                     <select\n//                       value={form.projectId || \"\"}\n//                       onChange={(e) => {\n//                         const value = e.target.value;\n//                         setForm((s) => ({ ...s, projectId: value, taskId: \"\", employeeId: \"\" }));\n//                         if (value) {\n//                           fetchProjectTasks(value);\n//                         } else {\n//                           setProjectTasks([]);\n//                           setSelectedTaskEmployees([]);\n//                         }\n//                       }}\n//                       className=\"w-full border rounded px-3 py-2 text-sm\"\n//                     >\n//                       <option value=\"\">--</option>\n//                       {projectsLoading && <option value=\"\">Loading...</option>}\n//                       {projectsError && <option value=\"\">Error loading projects</option>}\n//                       {projectOptions.map((p) => (\n//                         <option key={`${p.id}-${p.shortCode}`} value={String(p.id)}>\n//                           {p.id != null ? `#${p.id} - ${p.name || p.shortCode}` : p.name || p.shortCode}\n//                         </option>\n//                       ))}\n//                     </select>\n//                   </div>\n\n//                   <div>\n//                     <label className=\"block text-sm text-gray-700 mb-2\">Task *</label>\n//                     <select\n//                       value={form.taskId || \"--\"}\n//                       onChange={(e) => {\n//                         const val = e.target.value;\n//                         if (val === \"--\") {\n//                           setForm((s) => ({ ...s, taskId: \"\", employeeId: \"\" }));\n//                           setSelectedTaskEmployees([]);\n//                           return;\n//                         }\n//                         const idNum = Number(val);\n//                         const task = projectTasks.find((t) => t.id === idNum);\n//                         setForm((s) => ({ ...s, taskId: val, employeeId: \"\" }));\n//                         setSelectedTaskEmployees(task?.assignedEmployees ?? []);\n//                       }}\n//                       className=\"w-full border rounded px-3 py-2 text-sm\"\n//                       disabled={!!form.projectId && projectTasks.length === 0}\n//                     >\n//                       {form.projectId ? (\n//                         projectTasks.length === 0 ? (\n//                           <option value=\"--\">No tasks</option>\n//                         ) : (\n//                           <>\n//                             <option value=\"--\">--</option>\n//                             {projectTasks.map((t) => (\n//                               <option key={t.id} value={String(t.id)}>\n//                                 {t.title ? `${t.id} - ${t.title}` : `Task ${t.id}`}\n//                               </option>\n//                             ))}\n//                           </>\n//                         )\n//                       ) : (\n//                         <option value=\"--\">--</option>\n//                       )}\n//                     </select>\n//                   </div>\n\n//                   <div>\n//                     <label className=\"block text-sm text-gray-700 mb-2\">Employee *</label>\n//                     <select\n//                       value={form.employeeId || \"--\"}\n//                       onChange={(e) => setForm((s) => ({ ...s, employeeId: e.target.value === \"--\" ? \"\" : e.target.value }))}\n//                       className=\"w-full border rounded px-3 py-2 text-sm\"\n//                       disabled={!!form.projectId && projectTasks.length === 0}\n//                     >\n//                       {(() => {\n//                         const projectEmployees = form.projectId ? projectEmployeeMap.get(form.projectId) ?? [] : [];\n\n//                         if (form.projectId && projectTasks.length === 0) {\n//                           return <option value=\"--\">No employees</option>;\n//                         }\n\n//                         if (selectedTaskEmployees.length > 0) {\n//                           return (\n//                             <>\n//                               <option value=\"--\">--</option>\n//                               {selectedTaskEmployees.map((e) => (\n//                                 <option key={e.employeeId} value={e.employeeId}>\n//                                   {e.name ? `${e.name} (${e.employeeId})` : e.employeeId}\n//                                 </option>\n//                               ))}\n//                             </>\n//                           );\n//                         }\n\n//                         if (form.projectId && projectEmployees.length > 0) {\n//                           return (\n//                             <>\n//                               <option value=\"--\">--</option>\n//                               {projectEmployees.map((e) => (\n//                                 <option key={e.employeeId} value={e.employeeId}>\n//                                   {e.name ? `${e.name} (${e.employeeId})` : e.employeeId}\n//                                 </option>\n//                               ))}\n//                             </>\n//                           );\n//                         }\n\n//                         return employeeOptions.map((e) => (\n//                           <option key={e} value={e}>\n//                             {e === \"--\" ? \"--\" : e}\n//                           </option>\n//                         ));\n//                       })()}\n//                     </select>\n//                   </div>\n//                 </div>\n\n//                 <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6\">\n//                   <div>\n//                     <label className=\"block text-sm text-gray-700 mb-2\">Start Date *</label>\n//                     <input type=\"date\" value={form.startDate} onChange={(e) => setForm((s) => ({ ...s, startDate: e.target.value }))} className=\"w-full border rounded px-3 py-2 text-sm\" />\n//                   </div>\n\n//                   <div>\n//                     <label className=\"block text-sm text-gray-700 mb-2\">Start Time *</label>\n//                     <input type=\"time\" value={form.startTime} onChange={(e) => setForm((s) => ({ ...s, startTime: e.target.value }))} className=\"w-full border rounded px-3 py-2 text-sm\" />\n//                   </div>\n\n//                   <div>\n//                     <label className=\"block text-sm text-gray-700 mb-2\">End Date *</label>\n//                     <input type=\"date\" value={form.endDate} onChange={(e) => setForm((s) => ({ ...s, endDate: e.target.value }))} className=\"w-full border rounded px-3 py-2 text-sm\" />\n//                   </div>\n\n//                   <div>\n//                     <label className=\"block text-sm text-gray-700 mb-2\">End Time *</label>\n//                     <input type=\"time\" value={form.endTime} onChange={(e) => setForm((s) => ({ ...s, endTime: e.target.value }))} className=\"w-full border rounded px-3 py-2 text-sm\" />\n//                   </div>\n//                 </div>\n\n//                 <div className=\"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4 items-center\">\n//                   <div>\n//                     <label className=\"block text-sm text-gray-700 mb-2\">Memo *</label>\n//                     <input type=\"text\" value={form.memo} onChange={(e) => setForm((s) => ({ ...s, memo: e.target.value }))} className=\"w-full border rounded px-3 py-2 text-sm\" placeholder=\"Memo\" />\n//                   </div>\n\n//                   <div className=\"text-right\">\n//                     <div className=\"text-sm text-gray-500\">Total Hours</div>\n//                     <div className=\"text-2xl font-semibold text-blue-600\">{modalTotalHours}h</div>\n//                   </div>\n//                 </div>\n\n//                 {saveError && <div className=\"mt-4 text-sm text-red-600\">{saveError}</div>}\n//               </div>\n\n//               <div className=\"flex items-center justify-center gap-6 mt-8 pb-6\">\n//                 <button onClick={() => setShowLogModal(false)} className=\"px-6 py-2 rounded-md border text-blue-600\" disabled={saving}>Cancel</button>\n\n//                 <button onClick={saveEntry} className=\"px-6 py-2 rounded-md bg-blue-600 text-white shadow\" disabled={saving}>\n//                   {saving ? \"Saving...\" : editingId ? \"Update\" : \"Save\"}\n//                 </button>\n//               </div>\n//             </div>\n//           </div>\n//         </div>\n//       )}\n\n//       {/* Delete confirm modal */}\n//       {isDeleteConfirmOpen && selectedLog && (\n//         <div className=\"fixed inset-0 z-[10040] flex items-start justify-center pt-12 px-4\">\n//           <div className=\"absolute inset-0 bg-black/40\" onClick={() => setIsDeleteConfirmOpen(false)} />\n//           <div className=\"relative bg-white w-full max-w-md rounded-lg shadow-xl overflow-hidden\">\n//             <div className=\"p-6\">\n//               <h3 className=\"text-lg font-semibold mb-4\">Delete TimeLog</h3>\n//               <p className=\"text-sm text-gray-700\">\n//                 Are you sure you want to delete timesheet <strong>#{String(selectedLog.id)}</strong>? This action cannot be undone.\n//               </p>\n\n//               {saveError && <div className=\"mt-4 text-sm text-red-600\">{saveError}</div>}\n\n//               <div className=\"flex items-center justify-end gap-4 mt-6\">\n//                 <button className=\"px-4 py-2 rounded border\" onClick={() => setIsDeleteConfirmOpen(false)} disabled={saving}>Cancel</button>\n//                 <button className=\"px-4 py-2 rounded bg-red-600 text-white\" onClick={deleteTimesheet} disabled={saving}>\n//                   {saving ? \"Deleting...\" : \"Delete\"}\n//                 </button>\n//               </div>\n//             </div>\n//           </div>\n//         </div>\n//       )}\n//     </div>\n//   );\n// }\n\n\n// components/TimesheetSummaryList.tsx\n\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\n\ntype EmployeeAvatar = {\n  employeeId: string;\n  name?: string | null;\n  profileUrl?: string | null;\n  designation?: string | null;\n  department?: string | null;\n};\n\ntype TimeLog = {\n  id: number;\n  projectId?: number;\n  projectShortCode?: string;\n  projectName?: string;\n  taskId?: number;\n  taskName?: string;\n  employeeId?: string;\n  employees?: EmployeeAvatar[];\n  startDate?: string; // \"YYYY-MM-DD\"\n  startTime?: string; // \"HH:MM:SS\" or \"HH:MM\"\n  endDate?: string;\n  endTime?: string;\n  memo?: string | null;\n  durationHours?: number;\n  createdAt?: string;\n};\n\ntype EmployeeSummary = {\n  employeeId: string;\n  employeeName: string;\n  employeeEmail?: string;\n  designation?: string;\n  totalMinutes?: number;\n  totalHours?: number;\n  timeLogs: TimeLog[];\n};\n\nconst BASE =\n  (typeof process !== \"undefined\" && process.env.NEXT_PUBLIC_MAIN) ||\n  (typeof process !== \"undefined\" && process.env.NEXT_PUBLIC_GATEWAY) ||\n  \"http://localhost:3000\";\n\nconst fetchUrl = () => `${BASE.replace(/\\/$/, \"\")}/timesheets/summary`;\n\nfunction formatHours(hours?: number) {\n  if (hours == null || isNaN(Number(hours))) return \"0h\";\n  const n = Number(hours);\n  if (n === 0) return \"0h\";\n  return `${n % 1 === 0 ? n.toFixed(0) : n.toFixed(2)}h`;\n}\n\nfunction formatDateTime(dateStr?: string, timeStr?: string) {\n  if (!dateStr) return \"-\";\n  const dt = timeStr ? `${dateStr}T${timeStr}` : dateStr;\n  const d = new Date(dt);\n  if (isNaN(d.getTime())) {\n    return `${dateStr}${timeStr ? \" \" + timeStr : \"\"}`;\n  }\n  return d.toLocaleString(undefined, {\n    month: \"2-digit\",\n    day: \"2-digit\",\n    year: \"numeric\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n  });\n}\n\nfunction computeDurationHours(\n  sDate?: string,\n  sTime?: string,\n  eDate?: string,\n  eTime?: string\n) {\n  if (!sDate || !eDate) return 0;\n  try {\n    const sParts = sDate.split(\"-\").map(Number);\n    const eParts = eDate.split(\"-\").map(Number);\n    let sH = 0,\n      sM = 0,\n      eH = 0,\n      eM = 0;\n    if (sTime) {\n      const st = sTime.split(\":\").map((v) => Number(v));\n      sH = st[0] ?? 0;\n      sM = st[1] ?? 0;\n    }\n    if (eTime) {\n      const et = eTime.split(\":\").map((v) => Number(v));\n      eH = et[0] ?? 0;\n      eM = et[1] ?? 0;\n    }\n    const start = new Date(sParts[0], sParts[1] - 1, sParts[2], sH, sM);\n    const end = new Date(eParts[0], eParts[1] - 1, eParts[2], eH, eM);\n    const diffMs = end.getTime() - start.getTime();\n    if (isNaN(diffMs) || diffMs <= 0) return 0;\n    return Math.round(diffMs / (1000 * 60 * 60));\n  } catch {\n    return 0;\n  }\n}\n\nexport default function TimesheetSummaryList() {\n  const [data, setData] = useState<EmployeeSummary[] | null>(null);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n  const [expanded, setExpanded] = useState<Record<string, boolean>>({});\n\n  // --- Action states (View/Edit/Delete) ---\n  const [openMenuId, setOpenMenuId] = useState<number | null>(null);\n\n  const [isViewOpen, setIsViewOpen] = useState(false);\n  const [selectedLog, setSelectedLog] = useState<TimeLog | null>(null);\n\n  const [showLogModal, setShowLogModal] = useState(false);\n  const [editingId, setEditingId] = useState<number | null>(null);\n  const [form, setForm] = useState({\n    projectId: \"\",\n    taskId: \"\",\n    employeeId: \"\",\n    startDate: \"\",\n    startTime: \"\",\n    endDate: \"\",\n    endTime: \"\",\n    memo: \"\",\n  });\n  const [saving, setSaving] = useState(false);\n  const [saveError, setSaveError] = useState<string | null>(null);\n\n  const [isDeleteConfirmOpen, setIsDeleteConfirmOpen] = useState(false);\n\n  // Projects + tasks for edit modal\n  const [projectOptions, setProjectOptions] = useState<\n    { id: number | string | null; shortCode: string; name?: string; assignedEmployees?: EmployeeAvatar[] }[]\n  >([]);\n  const [projectsLoading, setProjectsLoading] = useState(false);\n  const [projectsError, setProjectsError] = useState<string | null>(null);\n\n  const [projectTasks, setProjectTasks] = useState<\n    { id: number; title?: string; projectId?: number; assignedEmployees?: EmployeeAvatar[] }[]\n  >([]);\n  const [selectedTaskEmployees, setSelectedTaskEmployees] = useState<EmployeeAvatar[]>([]);\n\n  // --- Load summary ---\n  useEffect(() => {\n    let mounted = true;\n    async function load() {\n      setLoading(true);\n      setError(null);\n      try {\n        const token =\n          typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null;\n        const headers: Record<string, string> = {\n          \"Content-Type\": \"application/json\",\n        };\n        if (token) headers.Authorization = `Bearer ${token}`;\n\n        const res = await fetch(fetchUrl(), { headers, cache: \"no-store\" });\n        if (res.status === 401) {\n          try {\n            localStorage.removeItem(\"accessToken\");\n          } catch { }\n          throw new Error(\"401: Unauthorized â€” please login.\");\n        }\n        if (!res.ok) {\n          const txt = await res.text().catch(() => \"\");\n          throw new Error(`Failed to fetch: ${res.status} ${txt}`);\n        }\n        const json = (await res.json()) as EmployeeSummary[];\n        if (mounted) setData(json);\n      } catch (err: any) {\n        if (mounted) setError(err?.message || \"Unknown error\");\n      } finally {\n        if (mounted) setLoading(false);\n      }\n    }\n    load();\n    return () => {\n      mounted = false;\n    };\n  }, []);\n\n  function toggle(employeeId: string) {\n    setExpanded((prev) => ({ ...prev, [employeeId]: !prev[employeeId] }));\n  }\n\n  // ---------------------\n  // Projects & tasks APIs (for edit modal)\n  // ---------------------\n  const loadProjects = async (accessToken?: string | null) => {\n    setProjectsLoading(true);\n    setProjectsError(null);\n    try {\n      const resolvedToken =\n        accessToken ||\n        (typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null);\n\n      const url = `${BASE.replace(/\\/$/, \"\")}/projects/AllProject`;\n      const res = await fetch(url, {\n        method: \"GET\",\n        headers: resolvedToken\n          ? {\n              Authorization: `Bearer ${resolvedToken}`,\n              Accept: \"application/json\",\n            }\n          : { Accept: \"application/json\" },\n        cache: \"no-store\",\n      });\n\n      if (res.status === 401) {\n        try {\n          localStorage.removeItem(\"accessToken\");\n        } catch { }\n        setProjectOptions([]);\n        setProjectsLoading(false);\n        return;\n      }\n\n      if (!res.ok) {\n        const txt = await res.text().catch(() => \"\");\n        console.error(\"projects fetch failed\", res.status, txt);\n        throw new Error(`Failed to load projects (${res.status})`);\n      }\n\n      const data = await res.json();\n      if (Array.isArray(data)) {\n        const list: any[] = [];\n        data.forEach((p: any) => {\n          const sc = (p?.shortCode ?? \"\").toString().trim();\n          const id = p?.id ?? p?.projectId ?? p?._id ?? null;\n          const name = (p?.name ?? \"\").toString().trim();\n          const assignedEmployees: EmployeeAvatar[] = Array.isArray(p?.assignedEmployees)\n            ? p.assignedEmployees\n            : [];\n          if (id != null && sc) {\n            list.push({\n              id,\n              shortCode: sc,\n              name,\n              assignedEmployees,\n            });\n          }\n        });\n        const seen = new Set<string>();\n        const deduped: typeof projectOptions = [];\n        list.forEach((p) => {\n          if (!seen.has(String(p.id))) {\n            seen.add(String(p.id));\n            deduped.push(p);\n          }\n        });\n        setProjectOptions(deduped);\n      } else {\n        console.warn(\"unexpected projects response\", data);\n        setProjectOptions([]);\n      }\n    } catch (err: any) {\n      console.error(\"loadProjects error\", err);\n      setProjectsError(String(err?.message ?? err));\n      setProjectOptions([]);\n    } finally {\n      setProjectsLoading(false);\n    }\n  };\n\n  const fetchProjectTasks = async (projectIdRaw: string | number, preselectTaskId?: number | null) => {\n    if (!projectIdRaw) {\n      setProjectTasks([]);\n      setSelectedTaskEmployees([]);\n      return;\n    }\n\n    const projectIdNum = Number(projectIdRaw);\n    if (!projectIdNum || Number.isNaN(projectIdNum)) {\n      setProjectTasks([]);\n      setSelectedTaskEmployees([]);\n      return;\n    }\n\n    try {\n      const resolvedToken =\n        (typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null);\n      const url = `${BASE.replace(/\\/$/, \"\")}/projects/${projectIdNum}/tasks`;\n      const res = await fetch(url, {\n        method: \"GET\",\n        headers: resolvedToken\n          ? {\n              Authorization: `Bearer ${resolvedToken}`,\n              Accept: \"application/json\",\n            }\n          : { Accept: \"application/json\" },\n        cache: \"no-store\",\n      });\n\n      if (!res.ok) {\n        const txt = await res.text().catch(() => \"\");\n        console.error(\"project tasks fetch failed\", res.status, txt);\n        setProjectTasks([]);\n        setSelectedTaskEmployees([]);\n        return;\n      }\n\n      const data = await res.json();\n      const list: any[] = Array.isArray(data) ? data : [];\n      setProjectTasks(list);\n\n      if (preselectTaskId != null && list.length > 0) {\n        const task = list.find((t) => t.id === preselectTaskId);\n        setSelectedTaskEmployees(task?.assignedEmployees ?? []);\n      } else {\n        setSelectedTaskEmployees([]);\n      }\n    } catch (err) {\n      console.error(\"fetchProjectTasks error\", err);\n      setProjectTasks([]);\n      setSelectedTaskEmployees([]);\n    }\n  };\n\n  // ---------------------\n  // Open view / edit / delete actions\n  // ---------------------\n  const openView = (tl: TimeLog) => {\n    setSelectedLog(tl);\n    setIsViewOpen(true);\n    setOpenMenuId(null);\n  };\n\n  const openLogForm = (tl?: TimeLog) => {\n    setProjectTasks([]);\n    setSelectedTaskEmployees([]);\n    setSaveError(null);\n\n    if (!tl) {\n      setEditingId(null);\n      setForm({\n        projectId: \"\",\n        taskId: \"\",\n        employeeId: \"\",\n        startDate: \"\",\n        startTime: \"\",\n        endDate: \"\",\n        endTime: \"\",\n        memo: \"\",\n      });\n    } else {\n      setEditingId(tl.id);\n      setForm({\n        projectId:\n          tl.projectId !== undefined && tl.projectId !== null ? String(tl.projectId) : \"\",\n        taskId: tl.taskId !== undefined && tl.taskId !== null ? String(tl.taskId) : \"\",\n        employeeId: tl.employeeId ?? (tl.employees && tl.employees[0]?.employeeId) ?? \"\",\n        startDate: tl.startDate ?? \"\",\n        startTime: tl.startTime ? tl.startTime.slice(0, 5) : \"\",\n        endDate: tl.endDate ?? \"\",\n        endTime: tl.endTime ? tl.endTime.slice(0, 5) : \"\",\n        memo: tl.memo ?? \"\",\n      });\n\n      if (tl.projectId) {\n        fetchProjectTasks(tl.projectId, tl.taskId ?? null);\n      }\n    }\n\n    // ensure projects are loaded for select lists\n    loadProjects();\n    setShowLogModal(true);\n    setOpenMenuId(null);\n  };\n\n  const saveEntry = async () => {\n    setSaving(true);\n    setSaveError(null);\n    try {\n      if (\n        !form.projectId ||\n        !form.taskId ||\n        !form.employeeId ||\n        !form.startDate ||\n        !form.startTime ||\n        !form.endDate ||\n        !form.endTime ||\n        !form.memo\n      ) {\n        setSaveError(\"Please fill all required fields.\");\n        setSaving(false);\n        return;\n      }\n\n      const payload: any = {\n        projectId: Number(form.projectId),\n        taskId: Number(form.taskId),\n        employeeId: form.employeeId,\n        startDate: form.startDate,\n        startTime: form.startTime,\n        endDate: form.endDate,\n        endTime: form.endTime,\n        memo: form.memo,\n        durationHours: computeDurationHours(\n          form.startDate,\n          form.startTime,\n          form.endDate,\n          form.endTime\n        ),\n      };\n\n      const resolvedToken =\n        typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null;\n\n      const url = editingId\n        ? `${BASE.replace(/\\/$/, \"\")}/timesheets/${editingId}`\n        : `${BASE.replace(/\\/$/, \"\")}/timesheets`;\n      const method = editingId ? \"PUT\" : \"POST\";\n\n      const res = await fetch(url, {\n        method,\n        headers: {\n          ...(resolvedToken ? { Authorization: `Bearer ${resolvedToken}` } : {}),\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n        },\n        body: JSON.stringify(payload),\n      });\n\n      if (!res.ok) {\n        const text = await res.text().catch(() => \"\");\n        console.error(\"save entry failed\", res.status, text);\n        throw new Error(\"Failed to save entry\");\n      }\n\n      // close and refresh summary\n      setShowLogModal(false);\n      setEditingId(null);\n      setForm({\n        projectId: \"\",\n        taskId: \"\",\n        employeeId: \"\",\n        startDate: \"\",\n        startTime: \"\",\n        endDate: \"\",\n        endTime: \"\",\n        memo: \"\",\n      });\n\n      // reload summaries\n      try {\n        const token = typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null;\n        const headers: Record<string, string> = { \"Content-Type\": \"application/json\" };\n        if (token) headers.Authorization = `Bearer ${token}`;\n        const res2 = await fetch(fetchUrl(), { headers, cache: \"no-store\" });\n        if (res2.ok) {\n          const json = (await res2.json()) as EmployeeSummary[];\n          setData(json);\n        }\n      } catch (err) {\n        // ignore, we've already saved\n      }\n    } catch (err: any) {\n      console.error(\"saveEntry error\", err);\n      setSaveError(err?.message || \"Failed to save entry\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const openDelete = (tl: TimeLog) => {\n    setSelectedLog(tl);\n    setIsDeleteConfirmOpen(true);\n    setOpenMenuId(null);\n    setSaveError(null);\n  };\n\n  const deleteTimesheet = async () => {\n    if (!selectedLog) return;\n    setSaving(true);\n    setSaveError(null);\n    try {\n      const resolvedToken =\n        typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null;\n      const res = await fetch(`${BASE.replace(/\\/$/, \"\")}/timesheets/${selectedLog.id}`, {\n        method: \"DELETE\",\n        headers: resolvedToken ? { Authorization: `Bearer ${resolvedToken}` } : undefined,\n      });\n      if (!res.ok) {\n        const txt = await res.text().catch(() => \"\");\n        console.error(\"deleteTimesheet failed\", res.status, txt);\n        throw new Error(\"Failed to delete timesheet\");\n      }\n      setIsDeleteConfirmOpen(false);\n      setSelectedLog(null);\n\n      // refresh summary\n      try {\n        const token = typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null;\n        const headers: Record<string, string> = { \"Content-Type\": \"application/json\" };\n        if (token) headers.Authorization = `Bearer ${token}`;\n        const res2 = await fetch(fetchUrl(), { headers, cache: \"no-store\" });\n        if (res2.ok) {\n          const json = (await res2.json()) as EmployeeSummary[];\n          setData(json);\n        }\n      } catch (err) {\n        // ignore\n      }\n    } catch (err: any) {\n      console.error(\"deleteTimesheet error\", err);\n      setSaveError(err?.message || \"Failed to delete timesheet\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // small helper for project employee map used in edit modal\n  const projectEmployeeMap = React.useMemo(() => {\n    const map = new Map<string, EmployeeAvatar[]>();\n    projectOptions.forEach((p) => {\n      if (p.id != null && p.assignedEmployees?.length) {\n        map.set(String(p.id), p.assignedEmployees);\n      }\n    });\n    return map;\n  }, [projectOptions]);\n\n  // employee list derived from summary for selects if needed\n  const employeeOptions = React.useMemo(() => {\n    const s = new Set<string>();\n    (data ?? []).forEach((emp) => {\n      emp.timeLogs.forEach((t) => {\n        if (t.employeeId) s.add(t.employeeId);\n        if (t.employees && t.employees.length > 0) {\n          t.employees.forEach((e) => e?.employeeId && s.add(e.employeeId));\n        }\n      });\n    });\n    return [\"--\", ...Array.from(s)];\n  }, [data]);\n\n  // computed hours in modal\n  const modalTotalHours = computeDurationHours(\n    form.startDate,\n    form.startTime,\n    form.endDate,\n    form.endTime\n  );\n\n  // ---------------------\n  // Menu open/close handlers and outside click / ESC handling\n  // ---------------------\n  const toggleMenu = (id: number) => {\n    setOpenMenuId((prev) => (prev === id ? null : id));\n  };\n\n  useEffect(() => {\n    if (openMenuId == null) return;\n\n    function onMousedown(e: MouseEvent) {\n      const target = e.target as HTMLElement | null;\n      if (!target) return;\n      // If clicked outside any element with data-menu-id, close menu\n      if (!target.closest(\"[data-menu-id]\")) {\n        setOpenMenuId(null);\n      }\n    }\n\n    function onKeydown(e: KeyboardEvent) {\n      if (e.key === \"Escape\") {\n        setOpenMenuId(null);\n      }\n    }\n\n    document.addEventListener(\"mousedown\", onMousedown);\n    document.addEventListener(\"keydown\", onKeydown);\n    return () => {\n      document.removeEventListener(\"mousedown\", onMousedown);\n      document.removeEventListener(\"keydown\", onKeydown);\n    };\n  }, [openMenuId]);\n\n  // ---------------------\n  // Render\n  // ---------------------\n  if (loading)\n    return <div className=\"py-6 px-4 text-gray-600\">Loading summaryâ€¦</div>;\n  if (error)\n    return (\n      <div className=\"py-6 px-4 text-red-600\">Error loading summaries: {error}</div>\n    );\n  if (!data || data.length === 0)\n    return <div className=\"py-6 px-4 text-gray-600\">No summary found.</div>;\n\n  return (\n    <div className=\"space-y-3 px-4 pb-8\">\n      {data.map((emp) => {\n        const isOpen = !!expanded[emp.employeeId];\n        const avatarUrl = emp.timeLogs?.[0]?.employees?.[0]?.profileUrl;\n        return (\n          <div\n            key={emp.employeeId}\n            className=\"border rounded-lg bg-white shadow-sm overflow-hidden\"\n          >\n            {/* Header row */}\n            <div className=\"flex items-center gap-4 px-4 py-3\">\n              <div className=\"flex items-center gap-3 flex-1\">\n                <div className=\"w-12 h-12 rounded-full bg-gray-50 flex items-center justify-center overflow-hidden border\">\n                  {avatarUrl ? (\n                    // eslint-disable-next-line @next/next/no-img-element\n                    <img\n                      src={avatarUrl}\n                      alt={emp.employeeName}\n                      className=\"w-full h-full object-cover\"\n                    />\n                  ) : (\n                    <span className=\"text-sm font-medium text-gray-700\">\n                      {emp.employeeName\n                        ? emp.employeeName\n                            .split(\" \")\n                            .map((s) => s[0])\n                            .join(\"\")\n                            .toUpperCase()\n                        : \"?\"}\n                    </span>\n                  )}\n                </div>\n\n                <div className=\"min-w-0\">\n                  <div className=\"font-medium text-sm text-gray-800 truncate\">\n                    {emp.employeeName}\n                  </div>\n                  <div className=\"text-xs text-gray-500\">\n                    {emp.designation ?? \"â€”\"}\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"flex items-center gap-6\">\n                <div className=\"text-right mr-2\">\n                  <div className=\"text-xs text-gray-500\">Total</div>\n                  <div className=\"font-medium text-sm\">\n                    {formatHours(emp.totalHours)}\n                  </div>\n                </div>\n\n                <button\n                  onClick={() => toggle(emp.employeeId)}\n                  aria-expanded={isOpen}\n                  className=\"w-9 h-9 flex items-center justify-center rounded border hover:bg-gray-50\"\n                >\n                  {!isOpen ? (\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      className=\"h-5 w-5 text-blue-600\"\n                      fill=\"none\"\n                      viewBox=\"0 0 24 24\"\n                      stroke=\"currentColor\"\n                      strokeWidth={2}\n                      aria-hidden\n                    >\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 4v16m8-8H4\" />\n                    </svg>\n                  ) : (\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      className=\"h-5 w-5 text-gray-600\"\n                      fill=\"none\"\n                      viewBox=\"0 0 24 24\"\n                      stroke=\"currentColor\"\n                      strokeWidth={2}\n                      aria-hidden\n                    >\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M20 12H4\" />\n                    </svg>\n                  )}\n                </button>\n              </div>\n            </div>\n\n            {/* Expanded detail */}\n            {isOpen && (\n              <div className=\"border-t bg-gray-50 px-4 py-4\">\n                <div className=\"overflow-auto\">\n                  <table className=\"w-full min-w-[720px] table-fixed text-sm\">\n                    <thead>\n                      <tr className=\"text-left text-xs text-gray-600\">\n                        <th className=\"w-1/3 py-2 px-3\">Task</th>\n                        <th className=\"w-1/3 py-2 px-3\">Time</th>\n                        <th className=\"w-1/6 py-2 px-3 text-center\">Total Hours</th>\n                        <th className=\"w-1/6 py-2 px-3 text-center\">Actions</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {emp.timeLogs && emp.timeLogs.length > 0 ? (\n                        emp.timeLogs.map((tl) => (\n                          <tr key={tl.id} className=\"border-t bg-white last:border-b\">\n                            <td className=\"py-3 px-3 align-top\">\n                              <div className=\"font-medium\">{tl.taskName ?? \"Task Name\"}</div>\n                              <div className=\"text-xs text-gray-500\">{tl.projectName ?? \"\"}</div>\n                            </td>\n                            <td className=\"py-3 px-3 align-top\">\n                              <div className=\"text-xs text-gray-600\">\n                                {formatDateTime(tl.startDate, tl.startTime)}\n                              </div>\n                              <div className=\"text-xs text-gray-500\">\n                                {formatDateTime(tl.endDate, tl.endTime)}\n                              </div>\n                            </td>\n                            <td className=\"py-3 px-3 align-top text-center\">\n                              <div className=\"font-medium\">{formatHours(tl.durationHours)}</div>\n                            </td>\n                            <td className=\"py-3 px-3 align-top text-center relative\">\n                              {/* NEW: three-dot menu */}\n                              <div className=\"inline-flex items-center gap-2 justify-center relative\" data-menu-wrapper>\n                                <button\n                                  title=\"Actions\"\n                                  onClick={() => toggleMenu(tl.id)}\n                                  className=\"p-1 rounded hover:bg-gray-100\"\n                                  aria-haspopup=\"true\"\n                                  aria-expanded={openMenuId === tl.id}\n                                >\n                                  {/* three vertical dots */}\n                                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-gray-600\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                    <path d=\"M10 6a2 2 0 100-4 2 2 0 000 4zM10 12a2 2 0 100-4 2 2 0 000 4zM10 18a2 2 0 100-4 2 2 0 000 4z\" />\n                                  </svg>\n                                </button>\n\n                                {openMenuId === tl.id && (\n                                  <div\n                                    data-menu-id\n                                    className=\"absolute right-0 top-full mt-2 w-44 bg-white rounded-md shadow-lg border z-50\"\n                                  >\n                                    <div className=\"py-1\">\n                                      <button\n                                        onClick={() => { openView(tl); setOpenMenuId(null); }}\n                                        className=\"w-full text-left px-4 py-2 flex items-center gap-3 text-sm hover:bg-gray-50\"\n                                      >\n                                        {/* eye icon */}\n                                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 text-gray-700\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                          <path d=\"M10 3C6 3 2.7 5.1 1 8c1.7 2.9 5 5 9 5s7.3-2.1 9-5c-1.7-2.9-5-5-9-5zM10 12a4 4 0 110-8 4 4 0 010 8z\" />\n                                          <path d=\"M10 7a3 3 0 100 6 3 3 0 000-6z\" />\n                                        </svg>\n                                        <span className=\"text-gray-800\">View</span>\n                                      </button>\n\n                                      <button\n                                        onClick={() => { openLogForm(tl); setOpenMenuId(null); }}\n                                        className=\"w-full text-left px-4 py-2 flex items-center gap-3 text-sm hover:bg-gray-50\"\n                                      >\n                                        {/* pencil icon */}\n                                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 text-gray-700\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                          <path d=\"M17.414 2.586a2 2 0 010 2.828l-9.9 9.9a1 1 0 01-.465.263l-4 1a1 1 0 01-1.212-1.212l1-4a1 1 0 01.263-.465l9.9-9.9a2 2 0 012.828 0z\" />\n                                        </svg>\n                                        <span className=\"text-gray-800\">Edit</span>\n                                      </button>\n\n                                      <button\n                                        onClick={() => { openDelete(tl); setOpenMenuId(null); }}\n                                        className=\"w-full text-left px-4 py-2 flex items-center gap-3 text-sm hover:bg-gray-50\"\n                                      >\n                                        {/* trash - red */}\n                                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 text-red-600\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                          <path fillRule=\"evenodd\" d=\"M6 2a1 1 0 00-1 1v1H3a1 1 0 000 2h14a1 1 0 100-2h-2V3a1 1 0 00-1-1H6zm2 6a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 10-2 0v6a1 1 0 102 0V8z\" clipRule=\"evenodd\" />\n                                        </svg>\n                                        <span className=\"text-red-600\">Delete</span>\n                                      </button>\n                                    </div>\n                                  </div>\n                                )}\n                              </div>\n                            </td>\n                          </tr>\n                        ))\n                      ) : (\n                        <tr>\n                          <td colSpan={4} className=\"py-4 px-3 text-gray-500\">\n                            No time logs available.\n                          </td>\n                        </tr>\n                      )}\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            )}\n          </div>\n        );\n      })}\n\n      {/* View Modal */}\n      {isViewOpen && selectedLog && (\n        <div className=\"fixed inset-0 z-[10030] flex items-start justify-center pt-8 px-6\">\n          <div className=\"absolute inset-0 bg-black/40\" onClick={() => setIsViewOpen(false)} />\n          <div className=\"relative bg-white w-full max-w-6xl rounded-xl shadow-xl overflow-hidden\">\n            <div className=\"flex items-center justify-between px-6 py-4 border-b\">\n              <h3 className=\"text-xl font-semibold\">Timesheet</h3>\n              <button\n                className=\"p-2 rounded hover:bg-gray-100\"\n                onClick={() => setIsViewOpen(false)}\n                aria-label=\"Close\"\n              >\n                âœ•\n              </button>\n            </div>\n\n            <div className=\"p-6\">\n              <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n                <div className=\"lg:col-span-2 relative bg-white rounded-xl border p-6\">\n                  <div className=\"absolute top-4 right-4 text-gray-500\">â‹®</div>\n\n                  <h4 className=\"text-lg font-medium mb-4\">TimeLog Details</h4>\n\n                  <div className=\"grid grid-cols-3 gap-y-4 gap-x-6 items-center text-sm\">\n                    <div className=\"text-gray-500\">Start Time</div>\n                    <div className=\"col-span-2\">\n                      {formatDateTime(selectedLog.startDate, selectedLog.startTime)}\n                    </div>\n\n                    <div className=\"text-gray-500\">End Time</div>\n                    <div className=\"col-span-2\">\n                      {formatDateTime(selectedLog.endDate, selectedLog.endTime)}\n                    </div>\n\n                    <div className=\"text-gray-500\">Total Hours</div>\n                    <div className=\"col-span-2\">\n                      {typeof selectedLog.durationHours === \"number\"\n                        ? `${selectedLog.durationHours}h`\n                        : \"-\"}\n                    </div>\n\n                    <div className=\"text-gray-500\">Memo</div>\n                    <div className=\"col-span-2\">{selectedLog.memo ?? \"-\"}</div>\n\n                    <div className=\"text-gray-500\">Project</div>\n                    <div className=\"col-span-2\">\n                      {selectedLog.projectName ?? selectedLog.projectShortCode ?? selectedLog.projectId ?? \"-\"}\n                    </div>\n\n                    <div className=\"text-gray-500\">Task</div>\n                    <div className=\"col-span-2\">{selectedLog.taskName ?? `Task ${selectedLog.taskId ?? \"-\"}`}</div>\n\n                    <div className=\"text-gray-500\">Employee</div>\n                    <div className=\"col-span-2 flex items-center gap-3\">\n                      <div className=\"w-10 h-10 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center\">\n                        {selectedLog.employees && selectedLog.employees[0]?.profileUrl ? (\n                          // eslint-disable-next-line @next/next/no-img-element\n                          <img src={selectedLog.employees[0].profileUrl!} alt={selectedLog.employees[0].name ?? \"\"} className=\"w-full h-full object-cover\" />\n                        ) : (\n                          <div className=\"w-6 h-6 rounded-full bg-gray-200\" />\n                        )}\n                      </div>\n                      <div>\n                        <div className=\"font-medium text-sm\">\n                          {selectedLog.employees && selectedLog.employees[0]?.name\n                            ? selectedLog.employees[0].name\n                            : selectedLog.employeeId}\n                        </div>\n                        <div className=\"text-xs text-gray-500\">\n                          {selectedLog.employees && selectedLog.employees[0]?.designation ? selectedLog.employees[0].designation : \"\"}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"bg-white rounded-xl border p-5\">\n                  <h5 className=\"font-medium mb-3\">History</h5>\n\n                  <div className=\"space-y-4 text-sm text-gray-700\">\n                    <div className=\"flex justify-between\">\n                      <div className=\"text-gray-500\">Start Time</div>\n                      <div>{formatDateTime(selectedLog.startDate, selectedLog.startTime)}</div>\n                    </div>\n\n                    <div className=\"flex justify-between\">\n                      <div className=\"text-gray-500\">Task</div>\n                      <div>{selectedLog.taskName ?? `Task ${selectedLog.taskId ?? \"-\"}`}</div>\n                    </div>\n\n                    <div className=\"flex justify-between\">\n                      <div className=\"text-gray-500\">End Time</div>\n                      <div>{formatDateTime(selectedLog.endDate, selectedLog.endTime)}</div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"flex items-center justify-center gap-6 mt-8 pb-6\">\n                <button onClick={() => setIsViewOpen(false)} className=\"px-6 py-2 rounded-md border text-blue-600\">Close</button>\n                <button onClick={() => { if (selectedLog) openLogForm(selectedLog); setIsViewOpen(false); }} className=\"px-6 py-2 rounded-md bg-blue-600 text-white\">Edit</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Log Time (Edit/Create) Modal */}\n      {showLogModal && (\n        <div className=\"fixed inset-0 z-[10020] flex items-start justify-center pt-12 px-4\">\n          <div className=\"absolute inset-0 bg-black/40\" onClick={() => setShowLogModal(false)} />\n          <div className=\"relative bg-white w-full max-w-4xl rounded-xl shadow-xl overflow-hidden\">\n            <div className=\"flex items-center justify-between px-6 py-4 border-b\">\n              <h3 className=\"text-lg font-semibold\">{editingId ? \"Edit TimeLog\" : \"Log Time\"}</h3>\n              <button className=\"p-2 rounded hover:bg-gray-100\" onClick={() => setShowLogModal(false)} aria-label=\"Close\">âœ•</button>\n            </div>\n\n            <div className=\"p-6\">\n              <div className=\"bg-white rounded-md border p-6\">\n                <h4 className=\"text-md font-medium mb-4\">TimeLog Details</h4>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  <div>\n                    <label className=\"block text-sm text-gray-700 mb-2\">Project *</label>\n                    <select\n                      value={form.projectId || \"\"}\n                      onChange={(e) => {\n                        const value = e.target.value;\n                        setForm((s) => ({ ...s, projectId: value, taskId: \"\", employeeId: \"\" }));\n                        if (value) {\n                          fetchProjectTasks(value);\n                        } else {\n                          setProjectTasks([]);\n                          setSelectedTaskEmployees([]);\n                        }\n                      }}\n                      className=\"w-full border rounded px-3 py-2 text-sm\"\n                    >\n                      <option value=\"\">--</option>\n                      {projectsLoading && <option value=\"\">Loading...</option>}\n                      {projectsError && <option value=\"\">Error loading projects</option>}\n                      {projectOptions.map((p) => (\n                        <option key={`${p.id}-${p.shortCode}`} value={String(p.id)}>\n                          {p.id != null ? `#${p.id} - ${p.name || p.shortCode}` : p.name || p.shortCode}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm text-gray-700 mb-2\">Task *</label>\n                    <select\n                      value={form.taskId || \"--\"}\n                      onChange={(e) => {\n                        const val = e.target.value;\n                        if (val === \"--\") {\n                          setForm((s) => ({ ...s, taskId: \"\", employeeId: \"\" }));\n                          setSelectedTaskEmployees([]);\n                          return;\n                        }\n                        const idNum = Number(val);\n                        const task = projectTasks.find((t) => t.id === idNum);\n                        setForm((s) => ({ ...s, taskId: val, employeeId: \"\" }));\n                        setSelectedTaskEmployees(task?.assignedEmployees ?? []);\n                      }}\n                      className=\"w-full border rounded px-3 py-2 text-sm\"\n                      disabled={!!form.projectId && projectTasks.length === 0}\n                    >\n                      {form.projectId ? (\n                        projectTasks.length === 0 ? (\n                          <option value=\"--\">No tasks</option>\n                        ) : (\n                          <>\n                            <option value=\"--\">--</option>\n                            {projectTasks.map((t) => (\n                              <option key={t.id} value={String(t.id)}>\n                                {t.title ? `${t.id} - ${t.title}` : `Task ${t.id}`}\n                              </option>\n                            ))}\n                          </>\n                        )\n                      ) : (\n                        <option value=\"--\">--</option>\n                      )}\n                    </select>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm text-gray-700 mb-2\">Employee *</label>\n                    <select\n                      value={form.employeeId || \"--\"}\n                      onChange={(e) => setForm((s) => ({ ...s, employeeId: e.target.value === \"--\" ? \"\" : e.target.value }))}\n                      className=\"w-full border rounded px-3 py-2 text-sm\"\n                      disabled={!!form.projectId && projectTasks.length === 0}\n                    >\n                      {(() => {\n                        const projectEmployees = form.projectId ? projectEmployeeMap.get(form.projectId) ?? [] : [];\n\n                        if (form.projectId && projectTasks.length === 0) {\n                          return <option value=\"--\">No employees</option>;\n                        }\n\n                        if (selectedTaskEmployees.length > 0) {\n                          return (\n                            <>\n                              <option value=\"--\">--</option>\n                              {selectedTaskEmployees.map((e) => (\n                                <option key={e.employeeId} value={e.employeeId}>\n                                  {e.name ? `${e.name} (${e.employeeId})` : e.employeeId}\n                                </option>\n                              ))}\n                            </>\n                          );\n                        }\n\n                        if (form.projectId && projectEmployees.length > 0) {\n                          return (\n                            <>\n                              <option value=\"--\">--</option>\n                              {projectEmployees.map((e) => (\n                                <option key={e.employeeId} value={e.employeeId}>\n                                  {e.name ? `${e.name} (${e.employeeId})` : e.employeeId}\n                                </option>\n                              ))}\n                            </>\n                          );\n                        }\n\n                        return employeeOptions.map((e) => (\n                          <option key={e} value={e}>\n                            {e === \"--\" ? \"--\" : e}\n                          </option>\n                        ));\n                      })()}\n                    </select>\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6\">\n                  <div>\n                    <label className=\"block text-sm text-gray-700 mb-2\">Start Date *</label>\n                    <input type=\"date\" value={form.startDate} onChange={(e) => setForm((s) => ({ ...s, startDate: e.target.value }))} className=\"w-full border rounded px-3 py-2 text-sm\" />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm text-gray-700 mb-2\">Start Time *</label>\n                    <input type=\"time\" value={form.startTime} onChange={(e) => setForm((s) => ({ ...s, startTime: e.target.value }))} className=\"w-full border rounded px-3 py-2 text-sm\" />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm text-gray-700 mb-2\">End Date *</label>\n                    <input type=\"date\" value={form.endDate} onChange={(e) => setForm((s) => ({ ...s, endDate: e.target.value }))} className=\"w-full border rounded px-3 py-2 text-sm\" />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm text-gray-700 mb-2\">End Time *</label>\n                    <input type=\"time\" value={form.endTime} onChange={(e) => setForm((s) => ({ ...s, endTime: e.target.value }))} className=\"w-full border rounded px-3 py-2 text-sm\" />\n                  </div>\n                </div>\n\n                <div className=\"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4 items-center\">\n                  <div>\n                    <label className=\"block text-sm text-gray-700 mb-2\">Memo *</label>\n                    <input type=\"text\" value={form.memo} onChange={(e) => setForm((s) => ({ ...s, memo: e.target.value }))} className=\"w-full border rounded px-3 py-2 text-sm\" placeholder=\"Memo\" />\n                  </div>\n\n                  <div className=\"text-right\">\n                    <div className=\"text-sm text-gray-500\">Total Hours</div>\n                    <div className=\"text-2xl font-semibold text-blue-600\">{modalTotalHours}h</div>\n                  </div>\n                </div>\n\n                {saveError && <div className=\"mt-4 text-sm text-red-600\">{saveError}</div>}\n              </div>\n\n              <div className=\"flex items-center justify-center gap-6 mt-8 pb-6\">\n                <button onClick={() => setShowLogModal(false)} className=\"px-6 py-2 rounded-md border text-blue-600\" disabled={saving}>Cancel</button>\n\n                <button onClick={saveEntry} className=\"px-6 py-2 rounded-md bg-blue-600 text-white shadow\" disabled={saving}>\n                  {saving ? \"Saving...\" : editingId ? \"Update\" : \"Save\"}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Delete confirm modal */}\n      {isDeleteConfirmOpen && selectedLog && (\n        <div className=\"fixed inset-0 z-[10040] flex items-start justify-center pt-12 px-4\">\n          <div className=\"absolute inset-0 bg-black/40\" onClick={() => setIsDeleteConfirmOpen(false)} />\n          <div className=\"relative bg-white w-full max-w-md rounded-lg shadow-xl overflow-hidden\">\n            <div className=\"p-6\">\n              <h3 className=\"text-lg font-semibold mb-4\">Delete TimeLog</h3>\n              <p className=\"text-sm text-gray-700\">\n                Are you sure you want to delete timesheet <strong>#{String(selectedLog.id)}</strong>? This action cannot be undone.\n              </p>\n\n              {saveError && <div className=\"mt-4 text-sm text-red-600\">{saveError}</div>}\n\n              <div className=\"flex items-center justify-end gap-4 mt-6\">\n                <button className=\"px-4 py-2 rounded border\" onClick={() => setIsDeleteConfirmOpen(false)} disabled={saving}>Cancel</button>\n                <button className=\"px-4 py-2 rounded bg-red-600 text-white\" onClick={deleteTimesheet} disabled={saving}>\n                  {saving ? \"Deleting...\" : \"Delete\"}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\n\n\n\n"],"names":[],"mappings":"wFAGA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAEA,EAAA,EAAA,CAAA,CAAA,QAQA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QCbA,EAAA,EAAA,CAAA,CAAA,cAkBsD,CAAC,gBACnD,CAAc,aA6CH,MA5CX,CAAiB,iBACjB,CAAe,kBACf,CAAgB,qBAChB,CAAmB,CACtB,GAEO,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wEACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACX,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,iCAAwB,aACxC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,YAAY,yBAAyB,UAAU,YAG1D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACX,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,iCAAwB,aACxC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CACH,MAAO,EACP,cAAe,AAAC,GAAM,EAAkB,aAExC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,gBACrB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,YAAY,UAE7B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,aAAa,CAAA,WACV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAM,eAAM,QACvB,EAAgB,KAAK,CAAC,GAAG,GAAG,CAAC,AAAC,GAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAS,MAAO,WACtB,EAAiB,IADL,aAQjC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2CACX,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACG,QAAS,EACT,UAAU,8EAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,YAAY,mBCvDlD,IAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,cAgBsD,CAAC,aACnD,CAAW,gBACX,CA0HW,AA1HG,gBACd,CAAc,gBACd,CAAc,UACd,CAAQ,aACR,CAAW,mBACX,CAAiB,sBACjB,CAAoB,aACpB,CAAW,CACd,GAEO,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDAQW,WAAb,EAAwB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCAAwB,qBAAsB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UAC1F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,yBAAyB,QAAS,WAAa,iBAQrE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sEACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,0BAClB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACF,YAAY,SACZ,MAAO,EACP,SAAW,AAAD,GAAO,EAAe,EAAE,MAAM,CAAC,KAAK,EAC9C,UAAW,AAAC,IACM,SAAS,CAAnB,EAAE,GAAG,GACL,EAAe,GACf,EAAe,IAAM,GAE7B,EACA,UAAU,oDAIlB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yEACX,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACG,QAAS,KACL,IAAM,EAAK,SAAS,aAAa,CAC7B,+BAEA,GAAI,EAAG,KAAK,EACpB,EACA,UAAU,6BACV,MAAM,kBAEN,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,cAGtB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACG,QAAS,IAAM,EAAY,QAC3B,UAAW,CAAC,2BAA2B,EAAe,SAAb,EAAsB,cAAgB,GAAA,CACzE,CACN,MAAM,qBAEN,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,cAGpB,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACG,QAAS,KACL,EAAY,SAChB,EACA,eAAc,AAAa,aAC3B,MAAM,kBACN,UAAW,CAAC,oCAAoC,EAAe,WAAb,EAAwB,2BAA6B,GAAA,CACjG,WAEN,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,YACpB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CACG,UAAW,CAAC;gBACxB,EAAe,WAAb,EACoB,2BACA,2BAAA,CACJ,CACN,cAAY,gBACf,SAKL,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACG,QAAS,IAAM,GAAqB,GACpC,UAAW,CAAC,2BAA2B,EAAE,EAAoB,yBAA2B,GAAA,CAClF,CACN,MAAM,8BAEN,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,4BAaxB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACG,QAAS,IAAM,EAAY,oBAC3B,UAAW,CAAC,2BAA2B,EAAe,qBAAb,EAAkC,2BAA6B,GAAA,CAClG,CACN,MAAM,gBAEN,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,qCCtIxC,IAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,cAckD,CAAC,GAC/C,CAAC,YACD,CAAU,cACV,AA0GW,CA1GC,CACZ,aAAW,QACX,CAAM,QACN,CAAM,UACN,CAAQ,CACR,aAAW,CACd,IACG,IAAM,EACF,EAAE,SAAS,EAAI,EAAE,SAAS,CAAC,MAAM,CAAG,EAAI,EAAE,SAAS,CAAC,EAAE,MAAG,EACvD,EACF,GAAU,YACV,sDAEJ,MACI,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAc,UAAU,gDACrB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8DACT,EAAE,gBAAgB,EAAI,MAE3B,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,yCACV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gCAAsB,QAAM,EAAE,MAAM,EAAI,OACvD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sCAA8B,EAAE,IAAI,EAAI,QAE3D,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,6CACV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gDAEX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACG,IAAK,EACL,IAAK,GAAU,MAAQ,WACvB,UAAU,iCAGlB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCACV,GAAU,MAAQ,EAAE,UAAU,EAAI,MAEvC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCACV,GAAU,aAAe,GAAU,YAAc,aAKlE,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8DACT,EAAY,EAAE,SAAS,CAAE,EAAE,SAAS,IAEzC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8DACT,EAAY,EAAE,OAAO,CAAE,EAAE,OAAO,IAErC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,+DACT,EAAE,aAAa,EAAI,EAAE,OAE1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,0CACV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACX,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACG,QAAS,AAAC,IACN,EAAE,eAAe,GACG,UAAhB,OAAO,EAAE,EAAE,EAAe,EAAa,EAAE,EAAE,CACnD,EACA,UAAU,gCACV,MAAM,UACN,gBAAe,IAAe,EAAE,EAAE,UAElC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAU,4BAG3B,IAAe,EAAE,EAAE,EAChB,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACI,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACG,QAAS,EACT,UAAU,4BAEd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sFACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gBACX,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACG,QAAS,IAAM,EAAO,GACtB,UAAU,oGAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,GAAG,CAAA,CAAC,UAAU,YACf,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,YAGV,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACG,QAAS,IAAM,EAAO,GACtB,UAAU,oGAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,YACjB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,YAGV,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACG,QAAS,IAAM,EAAS,GACxB,UAAU,mGAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,yBAClB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,6BAhF7B,EAAE,EAAE,CA0FrB,EC3GM,EAAoB,yCAIpB,EAAiB,CAAC,MAAO,MAAO,MAAO,QAAS,MAAO,GAJF,GAIS,MAAM,CACpE,EAAc,CAClB,UACA,WACA,QACA,QACA,MACA,OACA,OACA,SACA,YACA,UACA,WACA,WACD,GAuBiE,CAAC,MACjE,CAAI,SACJ,CAAO,YACP,EAAa,AA2UA,CA3UgB,WAC7B,EAAY,IAAI,CACjB,IAKC,IAAM,EAAe,CAAA,EAAA,EAAA,MAAA,AAAM,EAA0B,MAE/C,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAQ,CACtC,CAAE,GAAI,MAAO,OAAQ,GAAI,UAAW,GAAI,MAAO,MAAM,GAAG,IAAI,CAAC,EAAG,EACjE,EAEK,EAAS,EAAU,IAAI,MACvB,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,EAAwB,IAC3D,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,EAAkB,IAEvD,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACzC,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAExD,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAa,EAAE,EAC3C,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAEjD,SAAS,IACP,GAAI,CACF,IAAM,EAAI,aAAa,OAAO,CAAC,eAC/B,GAAI,GAAkB,KAAb,EAAE,IAAI,GAAW,OAAO,EAAE,IAAI,EACzC,CAAE,KAAM,CAAC,CACT,OAAO,GAAa,IACtB,CAMA,eAAe,IACb,GAAgB,GAChB,IAAM,EAAQ,IAEd,GAAI,CACF,IAAM,EAAM,MAAM,MAAM,CAAA,EAAG,EAAW,SAAS,CAAC,CAAE,CAChD,QAAS,EAAQ,CAAE,cAAe,CAAC,OAAO,EAAE,EAAA,CAAO,AAAC,EAAI,CAAC,CAC3D,GAEA,GAAI,CAAC,EAAI,EAAE,CAAE,MAAM,AAAI,MAAM,yBAE7B,IAAM,EAAO,MAAM,EAAI,IAAI,GAE3B,EACE,EAAK,GAAG,CAAC,AAAC,GAAY,CAAD,CACnB,GAAI,EAAE,EAAE,CACR,MAAO,EAAE,KAAK,CACd,iBAAkB,EAAE,gBACtB,AADsC,CACrC,GAEL,CAAE,MAAO,EAAK,CAEd,QAAU,CACR,EAAgB,GAClB,CACF,CA6DA,eAAe,IACb,GAAe,GACf,EAAe,IAEf,IAAM,EAAQ,IACR,EAAkC,CACtC,eAAgB,kBAClB,CACI,IAAO,GAAQ,IAAD,SAAiB,CAAG,CAAC,OAAO,EAAE,EAAA,CAAA,AAAO,EAEvD,GAAI,CACF,IAAK,IAAM,KAAO,EAAM,CACtB,GAAI,CAAC,EAAI,MAAM,CAAE,SAEjB,IAAM,EAAU,CACd,OAAQ,OAAO,EAAI,MAAM,EACzB,KAAM,EACH,GAAG,CAAC,CAAC,EAAG,IAAM,CAAC,CACd,KAAM,EAAE,GAAG,CACX,MAAO,OAAO,EAAI,KAAK,CAAC,EAAE,EAAI,EAChC,CAAC,GACA,MAAM,CAAC,AAAC,GAAM,EAAE,KAAK,CAAG,EAC7B,CAE4B,GAAG,EAA3B,EAAQ,IAAI,CAAC,MAAM,EAEvB,MAAM,MAAM,GAAG,aAAa,QAAU,CAAE,CACtC,OAAQ,eACR,EACA,KAAM,KAAK,SAAS,CAAC,EACvB,EACF,CAEA,EAAe,sBACjB,CAAE,MAAO,EAAU,CACjB,EAAe,eACjB,QAAU,CACR,GAAe,EACjB,CACF,CAKA,MAtIA,CAAA,EAAA,EAAA,SAAS,AAAT,EAAU,KACR,GACF,EAAG,EAAE,EAqIH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4DAEb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,IAAK,EACL,UAAU,SACV,SA1GN,CA0GgB,QA1GP,AAAmB,CAAsC,EAChE,IAAM,EAAS,IAAI,KAAK,EAAE,MAAM,CAAC,KAAK,EACtC,GAAI,MAAM,EAAO,OAAO,IAAK,OAE7B,IAAM,EAAY,EAAU,GAG5B,EAFgB,EAAwB,IAGxC,EAAa,EADD,AACmB,GACjC,IAoII,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,wBAAe,SAE/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CACC,QArJR,CAqJiB,QArJR,EACP,EAAa,OAAO,EAAE,cACxB,EAoJQ,UAAU,wEAEV,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,6BAChB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,cAGzB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kDACZ,IAGH,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,6BAChB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAU,oBAM9B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iDAEb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yCAAgC,SAE9C,EAAS,GAAG,CAAC,AAAC,GACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAgB,UAAU,2CACzB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAyB,EAAE,IAAI,GAC9C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAe,EAAE,KAAK,GACrC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCAA6B,EAAE,KAAK,KAH3C,EAAE,GAAG,QAUpB,EAAK,GAAG,CAAC,CAAC,EAAK,IACd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAiB,UAAU,oBAC1B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8BACb,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,UAAU,6CACV,MAAO,EAAI,MAAM,CACjB,SAAU,AAAC,GAAM,CAjKjC,SAAS,AAAiB,CAAgB,CAAE,CAAc,EACxD,IAAM,EAAO,EAAM,IAAI,CAAC,AAAC,GAAM,OAAO,EAAE,EAAE,IAAM,GAC1C,EAAQ,EACV,CAAA,EAAG,EAAK,KAAK,CAAC,EAAE,EAAE,EAAK,gBAAgB,EAAI,MAAM,CAAC,CAAC,CACnD,GAEJ,EAAS,AAAD,GACN,EAAK,GAAG,CAAC,CAAC,EAAG,IACX,IAAM,EAAW,CAAE,GAAG,CAAC,QAAE,EAAQ,UAAW,CAAM,EAAI,IAG5D,EAsJkD,EAAU,EAAE,MAAM,CAAC,KAAK,YAE1D,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,YACX,EAAe,WAAa,gBAG9B,EAAM,GAAG,CAAC,AAAC,GACV,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAkB,MAAO,EAAE,EAAE,UAC3B,EAAE,KAAK,EADG,EAAE,EAAE,QAOtB,EAAS,GAAG,CAAC,CAAC,EAAG,IAChB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAEC,UAAU,kDAEV,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,SACL,IAAK,EACL,KAAK,OACL,UAAU,6CACV,MAAO,EAAI,KAAK,CAAC,EAAS,CAC1B,SAAU,AAAC,IACT,aA1M0C,EA0ML,EAAE,CA1MgB,KA0MV,CAAC,KAAK,MAzMrE,EAAQ,AAAC,GACP,EAAK,GAAG,CAAC,CAAC,EAAG,IACX,IAuM+B,EAvMzB,AACF,CACE,GAAG,CAAC,CACJ,MAAO,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,EAAG,IACrB,IAmMiC,EAnM3B,AAAW,AAiSjC,SAAS,AAAsB,CAAS,EACtC,IAAM,EAAI,OAAO,GACjB,OAAO,MAAM,IAAM,EAAI,EAAI,EAAI,CACjC,EApSuD,GAAS,EAEpD,EACA,QAsLW,QAtBH,EAAI,EAAE,GA0ClB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sCAA6B,UAE3C,EAAS,GAAG,CAAC,CAAC,EAAG,IAChB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAY,UAAU,mDAhL1B,EAAK,MAAM,CAAC,CAAC,EAAK,IAAM,GAAO,GAAD,IAAQ,EAAE,KAAK,CAAC,AAiL5B,EAjL8B,IAAK,CAAC,CAAG,GAiLpC,SADR,YASlB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAzMV,CAyMmB,QAzMV,EACP,EAAQ,AAAC,GAAS,IACb,EACH,CACE,GAAI,CAAC,EAAE,EAAE,KAAK,GAAG,GAAA,CAAI,CACrB,OAAQ,GACR,UAAW,GACX,MAAO,MAAM,GAAG,IAAI,CAAC,EACvB,EACD,CACH,EAgMU,UAAU,8EACX,eAIA,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4CACZ,OAKP,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,SAAU,EACV,UAAU,uDAET,EAAc,UAAY,cAKrC,EAWA,SAAS,EAAO,CAAS,EACvB,OAAO,OAAO,GAAG,QAAQ,CAAC,EAAG,IAC/B,CACA,SAAS,EAAW,CAAO,EACzB,OAAO,CAAW,CAAC,EAAE,QAAQ,GAAG,CAAC,KAAK,CAAC,EAAG,EAC5C,CAEA,SAAS,EAAkB,CAAY,EACrC,IAAM,EAAQ,CAAA,EAAG,EAAO,EAAO,OAAO,IAAI,CAAC,EAAE,EAAW,GAAA,CAAS,CAC3D,EAAM,IAAI,KAAK,GAErB,OADA,EAAI,OAAO,CAAC,EAAO,OAAO,GAAK,GACxB,CAAA,EAAG,EAAM,GAAG,EAAE,EAAO,EAAI,OAAO,IAAI,CAAC,EAAE,EAAW,GAAA,CAAM,AACjE,CAEA,SAAS,EAAU,CAAO,EACxB,IAAM,EAAK,IAAI,KAAK,GAEpB,OADA,EAAG,OAAO,CAAC,EAAG,OAAO,GAAM,CAAC,EAAG,MAAM,GAAK,CAAC,EAAI,GACxC,CACT,CAEA,SAAS,EAAwB,CAAY,EAC3C,OAAO,MAAM,IAAI,CAAC,CAAE,OAAQ,CAAE,GAAG,GAAG,CAAC,CAAC,EAAG,KACvC,IAAM,EAAK,IAAI,KAAK,GAEpB,OADA,EAAG,OAAO,CAAC,EAAO,OAAO,GAAK,GACvB,CACL,KAAM,CAAA,EAAG,EAAG,OAAO,GAAA,CAAI,CACvB,MAAO,EAAW,GAClB,MAAO,CAAc,CAAC,EAAE,CACxB,IAjCG,CAiCE,AAjCF,EAAG,EAAE,WAAW,GAAG,CAAC,EAAE,OAiCZ,AAjCmB,EAAE,QAAQ,GAAK,GAAG,QAAQ,CAC5D,EACA,KACA,CAAC,EAAE,OAAO,EAAE,OAAO,IAAI,QAAQ,CAAC,EAAG,KAAA,CAAM,AA+BzC,CACF,EACF,OC/Z0D,CAAC,QACzD,CAAM,cACN,CAAY,CACb,IACC,EAwIa,CAxIP,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,KAC/C,IAAM,EAAI,IAAI,KACd,OAAO,IAAI,KAAK,EAAE,WAAW,GAAI,EAAE,QAAQ,GAAI,EACjD,GAGM,EAAe,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,KAC3B,IAAM,EAAM,IAAI,IAOhB,OANA,EAAO,OAAO,CAAC,AAAC,IACd,GAAI,CAAC,EAAE,SAAS,CAAE,OAClB,IAAM,EAjBH,AAiBoB,EAAE,EAAb,OAAsB,EAjBvB,EAkBP,CAAC,EAAI,GAAG,CAAC,IAAM,EAAI,GAAG,CAAC,EAAK,EAAE,EAClC,EAAI,GAAG,CAAC,GAAM,IAAI,CAAC,EACrB,GACO,CACT,EAAG,CAAC,EAAO,EAGL,EAAO,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,KACnB,IAAM,EAAO,EAAa,WAAW,GAC/B,EAAQ,EAAa,QAAQ,GAE7B,EAAW,CADA,AACC,IADG,KAAK,EAAM,EAAO,GACZ,MAAM,IAAK,CAAC,CAAI,EACrC,CADwC,CAC1B,IAAI,KAAK,EAAM,CADwB,CAChB,EAAG,GAAG,OAAO,GAElD,EAAiC,EAAE,CAEzC,IAAK,IAAI,EAAI,EAAG,EAAI,EAAU,IAAK,EAAM,IAAI,CAAC,CAAE,KAAM,IAAK,GAC3D,IAAK,IAAI,EAAI,EAAG,GAAK,EAAa,IAAK,AACrC,EAAM,IAAI,CAAC,CAAE,KAAM,IAAI,KAAK,EAAM,EAAO,EAAG,GAE9C,KAAO,EAAM,MAAM,CAAG,GAAM,GAAG,EAAM,IAAI,CAAC,CAAE,KAAM,IAAK,GAEvD,OAAO,CACT,EAAG,CAAC,EAAa,EAGX,EAAa,EAAa,kBAAkB,MAAC,EAAW,CAC5D,MAAO,OACP,KAAM,SACR,GASA,SAAS,EAAY,CAAa,EAChC,EAAiB,AAAD,GAAU,IAAI,KAAK,EAAK,WAAW,GAAI,EAAK,QAAQ,GAAK,EAAO,GAClF,CAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wEAGb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6GACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAY,CAAC,GAC5B,UAAU,qDAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,4BAGzB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+CAAuC,IAEtD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAY,GAC3B,UAAU,qDAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAU,+BAK5B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qEACZ,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAM,CAAC,GAAG,CAAC,AAAC,GACtD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAY,UAAU,0DACpB,GADO,MAOd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kDACZ,EAAK,GAAG,CAAC,CAAC,EAAM,KACf,GAAI,CAAC,EAAK,IAAI,CACZ,CADc,KAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAc,UAAU,wBAAf,GAId,IAAM,EAnDd,AAmDoB,SAnDD,AAAV,CAAiB,EACxB,MAAO,CAAA,EAAG,EAAE,WAAW,GAAG,CAAC,EAAE,OAAO,EAAE,QAAQ,GAAK,GAAG,QAAQ,CAC5D,EACA,KACA,CAAC,EAAE,OAAO,EAAE,OAAO,IAAI,QAAQ,CAAC,EAAG,KAAA,CAAM,AAC7C,EA8C8B,EAAK,IAAI,EACzB,EAAY,EAAa,GAAG,CAAC,IAAQ,EAAE,CAE7C,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,UAAU,0GAGV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kFACZ,EAAK,IAAI,CAAC,OAAO,KAIpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gDACZ,EAAU,KAAK,CAAC,EAAG,GAAG,GAAG,CAAC,AAAC,GAC1B,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAEC,QAAS,IAAM,EAAa,GAC5B,UAAU,kHAEV,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,sCAA4B,QACpC,EAAG,MAAM,EAAI,EAAG,EAAE,IAE1B,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,0BAAgB,MAAI,EAAG,aAAa,EAAI,EAAE,UAPrD,EAAG,EAAE,GAYb,EAAU,MAAM,CAAG,GAClB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCAA4B,IACvC,EAAU,MAAM,CAAG,EAAE,iBA1BxB,EAgCX,OAIR,ECs6BM,EACgB,aAAnB,OAAO,SAAY,0CACA,AAAnB,oBAAO,SAA2B,QAAQ,GAAG,CAAC,mBAAmB,EAClE,wBAEI,EAAW,IAAM,CAAA,EAAG,EAAK,OAAO,CAAC,MAAO,IAAI,mBAAmB,CAAC,CAEtE,SAAS,EAAY,CAAc,EACjC,GAAa,MAAT,GAAiB,MAAM,OAAO,IAAS,MAAO,KAClD,IAAM,EAAI,OAAO,UACjB,AAAU,GAAG,CAAT,EAAgB,KACb,CAAA,EAAG,EAAI,GAAM,EAAI,EAAE,OAAO,CAAC,GAAK,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC,AACxD,CAEA,SAAS,EAAe,CAAgB,CAAE,CAAgB,EACxD,GAAI,CAAC,EAAS,MAAO,IAErB,IAAM,EAAI,IAAI,KAAK,AADR,EAAU,CAAA,EAAG,EAAQ,CAAC,EAAE,EAAA,CAAS,CAAG,UAE/C,AAAI,MAAM,EAAE,OAAO,IACV,CAAA,AADe,EACZ,EAAA,EAAU,EAAU,IAAM,EAAU,GAAA,CAAI,CAE7C,EAAE,cAAc,CAAC,OAAW,CACjC,MAAO,UACP,IAAK,UACL,KAAM,UACN,KAAM,UACN,OAAQ,SACV,EACF,CAEA,SAAS,EACP,CAAc,CACd,CAAc,CACd,CAAc,CACd,CAAc,EAEd,GAAI,CAAC,GAAS,CAAC,EAAO,OAAO,EAC7B,GAAI,CACF,IAAM,EAAS,EAAM,KAAK,CAAC,KAAK,GAAG,CAAC,QAC9B,EAAS,EAAM,KAAK,CAAC,KAAK,GAAG,CAAC,QAChC,EAAK,EACP,EAAK,EACL,EAAK,EACL,EAAK,EACP,GAAI,EAAO,CACT,IAAM,EAAK,EAAM,KAAK,CAAC,KAAK,GAAG,CAAC,AAAC,GAAM,OAAO,IAC9C,EAAK,CAAE,CAAC,EAAE,EAAI,EACd,EAAK,CAAE,CAAC,EAAE,EAAI,CAChB,CACA,GAAI,EAAO,CACT,IAAM,EAAK,EAAM,KAAK,CAAC,KAAK,GAAG,CAAC,AAAC,GAAM,OAAO,IAC9C,EAAK,CAAE,CAAC,EAAE,EAAI,EACd,EAAK,CAAE,CAAC,EAAE,EAAI,CAChB,CACA,IAAM,EAAQ,IAAI,KAAK,CAAM,CAAC,EAAE,CAAE,CAAM,CAAC,EAAE,CAAG,EAAG,CAAM,CAAC,EAAE,CAAE,EAAI,GAE1D,EADM,AACG,IADC,KAAK,CAAM,CAAC,EAAE,CAAE,CAAM,CAAC,EAAE,CAAG,EAAG,CAAM,CAAC,EAAE,CAAE,EAAI,GAC3C,OAAO,GAAK,EAAM,OAAO,GAC5C,GAAI,MAAM,IAAW,GAAU,EAAG,OAAO,EACzC,OAAO,KAAK,KAAK,CAAC,EAAU,KAC9B,CAAE,CAD2B,AAAQ,IAC7B,CADkC,AAExC,EAF0C,KAEnC,CACT,CACF,CAEe,SAAS,IACtB,GAAM,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAA2B,MACrD,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAU,GAC1C,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAwB,MAC5C,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAA0B,CAAC,GAG7D,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAEtD,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACvC,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAyB,MAEzD,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC3C,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MACpD,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CAC/B,UAAW,GACX,OAAQ,GACR,WAAY,GACZ,UAAW,GACX,UAAW,GACX,QAAS,GACT,QAAS,GACT,KAAM,EACR,GACM,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC/B,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAEpD,CAAC,EAAqB,EAAuB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,GAAS,GAGzD,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAElD,EAAE,EACE,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjD,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAE5D,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAE9C,EAAE,EACE,CAAC,EAAuB,EAAyB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAmB,EAAE,EAGvF,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,IAAI,GAAU,EAgCd,OA/BA,AA8BA,eA9Be,EACb,GAAW,GACX,EAAS,MACT,GAAI,CAQF,IAAM,EAAM,MAAM,MAAM,IAAY,CAAE,QALE,CACtC,eAAgB,kBAClB,EAG+C,MAAO,UAAW,GACjE,GAAmB,MAAf,EAAI,MAAM,CAAU,CACtB,GAAI,CACF,aAAa,UAAU,CAAC,cAC1B,CAAE,KAAM,CAAE,CACV,MAAU,AAAJ,MAAU,oCAClB,CACA,GAAI,CAAC,EAAI,EAAE,CAAE,CACX,IAAM,EAAM,MAAM,EAAI,IAAI,GAAG,KAAK,CAAC,IAAM,GACzC,OAAM,AAAI,MAAM,CAAC,iBAAiB,EAAE,EAAI,MAAM,CAAC,CAAC,EAAE,EAAA,CAAK,CACzD,CACA,IAAM,EAAQ,MAAM,EAAI,IAAI,GACxB,GAAS,EAAQ,EACvB,CAAE,MAAO,EAAU,CACb,GAAS,EAAS,GAAK,SAAW,gBACxC,QAAU,CACJ,GAAS,GAAW,EAC1B,CACF,IAEO,KACL,GAAU,CACZ,CACF,EAAG,EAAE,EASL,IAAM,EAAe,MAAO,IAC1B,GAAmB,GACnB,EAAiB,MACjB,GAAI,CACF,IAAM,EACJ,GACuE,IAAI,CAEvE,EAAM,CAAA,EAAG,EAAK,AAFlB,CAAC,MAEwB,CAAC,MAAO,IAAI,oBAAoB,CAAC,AAFzB,CAG7B,EAAM,MAAM,MAAM,EAAK,CAC3B,OAAQ,MACR,QAAS,EACL,CACE,cAAe,CAAC,OAAO,EAAE,EAAA,CAAe,CACxC,OAAQ,kBACV,EACA,CAAE,OAAQ,kBAAmB,EACjC,MAAO,UACT,GAEA,GAAmB,MAAf,EAAI,MAAM,CAAU,CACtB,GAAI,CACF,aAAa,UAAU,CAAC,cAC1B,CAAE,KAAM,CAAE,CACV,EAAkB,EAAE,EACpB,GAAmB,GACnB,MACF,CAEA,GAAI,CAAC,EAAI,EAAE,CAAE,CACX,IAAM,EAAM,MAAM,EAAI,IAAI,GAAG,KAAK,CAAC,IAAM,GAEzC,OADA,QAAQ,KAAK,CAAC,wBAAyB,EAAI,MAAM,CAAE,GAC7C,AAAI,MAAM,CAAC,yBAAyB,EAAE,EAAI,MAAM,CAAC,CAAC,CAAC,CAC3D,CAEA,IAAM,EAAO,MAAM,EAAI,IAAI,GAC3B,GAAI,MAAM,OAAO,CAAC,GAAO,CACvB,IAAM,EAAc,EAAE,CACtB,EAAK,OAAO,CAAC,AAAC,IACZ,IAAM,EAAK,CAAC,GAAG,WAAa,EAAA,CAAE,CAAE,QAAQ,GAAG,IAAI,GACzC,EAAK,GAAG,IAAM,GAAG,WAAa,GAAG,KAAO,KACxC,EAAO,CAAC,GAAG,MAAQ,EAAA,CAAE,CAAE,QAAQ,GAAG,IAAI,GACtC,EAAsC,MAAM,OAAO,CAAC,GAAG,mBACzD,EAAE,iBAAiB,CACnB,EAAE,AACF,AAAM,UAAQ,GAChB,CADoB,CACf,IAAI,CAAC,IACR,EACA,UAAW,OACX,EACA,mBACF,EAEJ,GACA,IAAM,EAAO,IAAI,IACX,EAAiC,EAAE,CACzC,EAAK,OAAO,CAAC,AAAC,IACP,EAAK,GAAG,CAAC,OAAO,EAAE,EAAE,IAAI,CAC3B,EAAK,GAAG,CAAC,OAAO,EAAE,EAAE,GACpB,EAAQ,IAAI,CAAC,GAEjB,GACA,EAAkB,EACpB,MACE,CADK,OACG,IAAI,CAAC,+BAAgC,GAC7C,EAAkB,EAAE,CAExB,CAAE,MAAO,EAAU,CACjB,QAAQ,KAAK,CAAC,qBAAsB,GACpC,EAAiB,OAAO,GAAK,SAAW,IACxC,EAAkB,EAAE,CACtB,QAAU,CACR,GAAmB,EACrB,CACF,EAEM,EAAoB,MAAO,EAA+B,KAC9D,GAAI,CAAC,EAAc,CACjB,EAAgB,EAAE,EAClB,EAAyB,EAAE,EAC3B,MACF,CAEA,IAAM,EAAe,OAAO,GAC5B,GAAI,CAAC,GAAgB,OAAO,KAAK,CAAC,GAAe,CAC/C,EAAgB,EAAE,EAClB,EAAyB,EAAE,EAC3B,MACF,CAEA,GAAI,CAGF,IAAM,EAAM,CAAA,EAAG,EAAK,OAAO,CAAC,MAAO,IAAI,UAAU,EAAE,EAAa,MAAM,CAAC,CACjE,EAAM,MAAM,MAAM,EAAK,CAC3B,OAAQ,MACR,QAKI,CALK,AAKH,OAAQ,kBAAmB,EACjC,MAAO,KALH,KAMN,GAEA,GAAI,CAAC,EAAI,EAAE,CAAE,CACX,IAAM,EAAM,MAAM,EAAI,IAAI,GAAG,KAAK,CAAC,IAAM,IACzC,QAAQ,KAAK,CAAC,6BAA8B,EAAI,MAAM,CAAE,GACxD,EAAgB,EAAE,EAClB,EAAyB,EAAE,EAC3B,MACF,CAEA,IAAM,EAAO,MAAM,EAAI,IAAI,GACrB,EAAc,MAAM,OAAO,CAAC,GAAQ,EAAO,EAAE,CAGnD,GAFA,EAAgB,GAEO,MAAnB,GAA2B,EAAK,MAAM,CAAG,EAAG,CAC9C,IAAM,EAAO,EAAK,IAAI,CAAC,AAAC,GAAM,EAAE,EAAE,GAAK,GACvC,EAAyB,GAAM,mBAAqB,EAAE,CACxD,MACE,CADK,CACoB,EAAE,CAE/B,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,0BAA2B,GACzC,EAAgB,EAAE,EAClB,EAAyB,EAAE,CAC7B,CACF,EAWM,EAAc,AAAC,IACnB,EAAgB,EAAE,EAClB,EAAyB,EAAE,EAC3B,EAAa,MAER,GAaH,CAbO,CAaM,EAAG,EAAE,EAClB,EAAQ,CACN,eACmB,IAAjB,EAAG,SAAS,EAAmC,OAAjB,EAAG,SAAS,CAAY,OAAO,EAAG,SAAS,EAAI,GAC/E,YAAsB,IAAd,EAAG,MAAM,EAAgC,OAAd,EAAG,MAAM,CAAY,OAAO,EAAG,MAAM,EAAI,GAC5E,WAAY,EAAG,UAAU,GAAK,CAAD,CAAI,SAAS,EAAI,EAAG,SAAS,CAAC,EAAE,EAAE,UAAA,CAAU,EAAK,GAC9E,UAAW,EAAG,SAAS,EAAI,GAC3B,UAAW,EAAG,SAAS,CAAG,EAAG,SAAS,CAAC,KAAK,CAAC,EAAG,GAAK,GACrD,QAAS,EAAG,OAAO,EAAI,GACvB,QAAS,EAAG,OAAO,CAAG,EAAG,OAAO,CAAC,KAAK,CAAC,EAAG,GAAK,GAC/C,KAAM,EAAG,IAAI,EAAI,EACnB,GAEI,EAAG,SAAS,EAAE,AAChB,EAAkB,EAAG,SAAS,CAAE,EAAG,MAAM,EAAI,QA1B/C,EAAa,MACb,EAAQ,CACN,UAAW,GACX,OAAQ,GACR,WAAY,GACZ,UAAW,GACX,UAAW,GACX,QAAS,GACT,QAAS,GACT,KAAM,EACR,IAqBF,IACA,GAAgB,GAChB,EAAc,KAChB,EAEM,EAAY,UAChB,GAAU,GACV,EAAa,MACb,GAAI,CACF,GACE,CAAC,EAAK,SAAS,EACf,CAAC,EAAK,MAAM,EACZ,CAAC,EAAK,UAAU,EAChB,CAAC,EAAK,SAAS,EACf,CAAC,EAAK,SAAS,EACf,CAAC,EAAK,OAAO,EACb,CAAC,EAAK,OAAO,EACb,CAAC,EAAK,IAAI,CACV,CACA,EAAa,oCACb,GAAU,GACV,MACF,CAEA,IAAM,EAAe,CACnB,UAAW,OAAO,EAAK,SAAS,EAChC,OAAQ,OAAO,EAAK,MAAM,EAC1B,WAAY,EAAK,UAAU,CAC3B,UAAW,EAAK,SAAS,CACzB,UAAW,EAAK,SAAS,CACzB,QAAS,EAAK,OAAO,CACrB,QAAS,EAAK,OAAO,CACrB,KAAM,EAAK,IAAI,CACf,cAAe,EACb,EAAK,SAAS,CACd,EAAK,SAAS,CACd,EAAK,OAAO,CACZ,EAAK,OAAO,CAEhB,EAKM,EAAM,EACR,CAAA,EAAG,EAAK,OAAO,CAAC,MAAO,IAAI,YAAY,EAAE,EAAA,CAAW,CACpD,CAAA,EAAG,EAAK,OAAO,CAAC,MAAO,IAAI,WAAW,CAAC,CAGrC,EAAM,MAAM,MAAM,EAAK,CAC3B,OAHa,EAAY,MAAQ,OAIjC,QAAS,CAEP,eAAgB,mBAChB,OAAQ,kBACV,EACA,KAAM,KAAK,SAAS,CAAC,EACvB,GAEA,GAAI,CAAC,EAAI,EAAE,CAAE,CACX,IAAM,EAAO,MAAM,EAAI,IAAI,GAAG,KAAK,CAAC,IAAM,GAE1C,OADA,QAAQ,KAAK,CAAC,oBAAqB,EAAI,MAAM,CAAE,GACzC,AAAI,MAAM,uBAClB,CAGA,GAAgB,GAChB,EAAa,MACb,EAAQ,CACN,UAAW,GACX,OAAQ,GACR,WAAY,GACZ,UAAW,GACX,UAAW,GACX,QAAS,GACT,QAAS,GACT,KAAM,EACR,GAGA,GAAI,CAIF,IAAM,EAAO,MAAM,MAAM,IAAY,CAAE,QAFC,CAAE,eAAgB,kBAAmB,EAE7B,MAAO,UAAW,GAClE,GAAI,EAAK,EAAE,CAAE,CACX,IAAM,EAAQ,MAAM,EAAK,IAAI,GAC7B,EAAQ,EACV,CACF,CAAE,MAAO,EAAK,CAEd,CACF,CAAE,MAAO,EAAU,CACjB,QAAQ,KAAK,CAAC,kBAAmB,GACjC,EAAa,GAAK,SAAW,uBAC/B,QAAU,CACR,GAAU,EACZ,CACF,EASM,EAAkB,UACtB,GAAK,CAAD,EACJ,GAAU,GACV,EAAa,EAFK,IAGlB,GAAI,CAGF,IAAM,EAAM,MAAM,MAAM,CAAA,EAAG,EAAK,OAAO,CAAC,MAAO,IAAI,YAAY,EAAE,EAAY,EAAE,CAAA,CAAE,CAAE,CACjF,OAAQ,SACR,SAAS,IAA+D,CAC1E,GACA,GAAI,CAAC,EAAI,EAAE,CAAE,CACX,IAAM,EAAM,MAAM,EAAI,IAAI,EAHD,CAGI,KAAK,CAAC,IAAM,GAEzC,OADA,QAAQ,KAAK,CAAC,yBAA0B,EAAI,MAAM,CAAE,GAC9C,AAAI,MAAM,6BAClB,CACA,GAAuB,GACvB,EAAe,MAGf,GAAI,CAIF,IAAM,EAAO,MAAM,MAAM,IAAY,CAAE,QAFC,CAAE,eAAgB,kBAAmB,EAE7B,MAAO,UAAW,GAClE,GAAI,EAAK,EAAE,CAAE,CACX,IAAM,EAAQ,MAAM,EAAK,IAAI,GAC7B,EAAQ,EACV,CACF,CAAE,MAAO,EAAK,CAEd,CACF,CAAE,MAAO,EAAU,CACjB,QAAQ,KAAK,CAAC,wBAAyB,GACvC,EAAa,GAAK,SAAW,6BAC/B,QAAU,CACR,GAAU,EACZ,EACF,EAGM,EAAqB,EAAA,OAAK,CAAC,OAAO,CAAC,KACvC,IAAM,EAAM,IAAI,IAMhB,OALA,EAAe,OAAO,CAAC,AAAC,IACV,MAAR,EAAE,EAAE,EAAY,EAAE,iBAAiB,EAAE,QAAQ,AAC/C,EAAI,GAAG,CAAC,OAAO,EAAE,EAAE,EAAG,EAAE,iBAAiB,CAE7C,GACO,CACT,EAAG,CAAC,EAAe,EAGb,EAAkB,EAAA,OAAK,CAAC,OAAO,CAAC,KACpC,IAAM,EAAI,IAAI,IASd,MARA,AAAC,IAAQ,EAAA,AAAE,EAAE,OAAO,CAAC,AAAC,IACpB,EAAI,QAAQ,CAAC,OAAO,CAAC,AAAC,IAChB,EAAE,UAAU,EAAE,EAAE,GAAG,CAAC,EAAE,UAAU,EAChC,EAAE,SAAS,EAAI,EAAE,SAAS,CAAC,MAAM,CAAG,GAAG,AACzC,EAAE,SAAS,CAAC,OAAO,CAAC,AAAC,GAAM,GAAG,YAAc,EAAE,GAAG,CAAC,EAAE,UAAU,EAElE,EACF,GACO,CAAC,QAAS,MAAM,IAAI,CAAC,GAAG,AACjC,EAAG,CAAC,EAAK,EAGH,EAAkB,EACtB,EAAK,SAAS,CACd,EAAK,SAAS,CACd,EAAK,OAAO,CACZ,EAAK,OAAO,QAuCd,CA7BA,CAAA,EAAA,EAAA,SAAS,AAAT,EAAU,KACR,GAAkB,MAAd,AAAoB,EAmBxB,OAFA,SAAS,gBAAgB,CAAC,YAAa,GACvC,SAAS,gBAAgB,CAAC,UAAW,GAC9B,KACL,SAAS,mBAAmB,CAAC,YAAa,GAC1C,SAAS,mBAAmB,CAAC,UAAW,EAC1C,EApBA,SAAS,EAAY,CAAa,EAChC,IAAM,EAAS,EAAE,MAAM,CAClB,IAED,AAAC,EAAO,EAFC,KAEM,CAAC,mBAClB,EAAc,KADI,CAGtB,CAEA,CALyC,QAKhC,EAAU,CAAgB,EACnB,UAAU,CAApB,EAAE,GAAG,EACP,EAAc,KAElB,CAQF,EAAG,CAAC,EAAW,EAKX,GACK,CAAA,EAAA,EAAA,CAAP,EAAO,EAAC,MAAA,CAAI,UAAU,mCAA0B,qBAC9C,EAEA,CAAA,EAAA,EADF,AACE,IAAA,EAAC,MAAA,CAAI,UAAU,mCAAyB,4BAA0B,KAElE,AAAC,GAAwB,GAC3B,CADW,EAAK,MAAM,CAItB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gCACZ,EAAK,GAAG,CAAC,AAAC,IACT,IAAM,EAAS,CAAC,CAAC,CAAQ,CAAC,EAAI,UAAU,CAAC,CACnC,EAAY,EAAI,QAAQ,EAAE,CAAC,EAAE,EAAE,WAAW,CAAC,EAAE,EAAE,WACrD,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,UAAU,iEAGV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2CACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qGACZ,EAEC,CAAA,EAAA,EAAA,GAAA,EADA,AACC,MAAA,CACC,IAAK,EACL,IAAK,EAAI,YAAY,CACrB,UAAU,WAJyC,oBAOrD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,6CACb,EAAI,YAAY,CACb,EAAI,YAAY,CACb,KAAK,CAAC,KACN,GAAG,CAAC,AAAC,GAAM,CAAC,CAAC,EAAE,EACf,IAAI,CAAC,IACL,WAAW,GACd,QAKV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sDACZ,EAAI,YAAY,GAEnB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCACZ,EAAI,WAAW,EAAI,YAK1B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4BACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAwB,UACvC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+BACZ,EAAY,EAAI,UAAU,OAI/B,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,cA7cf,EA6csB,EAAI,MA7cR,IA6ckB,MA5clD,EAAY,AAAC,IAAU,CAAE,EAAH,CAAM,CAAI,CAAE,CAAC,EAAW,CAAE,CAAC,CAAI,CAAC,EAAW,CAAC,CAAC,GA6crD,gBAAe,EACf,UAAU,oFAET,AAAC,EAaA,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,MAAM,6BACN,UAAU,wBACV,KAAK,OACL,QAAQ,YACR,OAAO,eACP,YAAa,EACb,aAAW,CAAA,CAAA,WAEX,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,EAAE,eArBvD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,MAAM,6BACN,UAAU,wBACV,KAAK,OACL,QAAQ,YACR,OAAO,eACP,YAAa,EACb,aAAW,CAAA,CAAA,WAEX,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,EAAE,6BAoB9D,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,qDACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,4CACZ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,2BAAkB,SAChC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,2BAAkB,SAChC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,uCAA8B,gBAC5C,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,uCAA8B,iBAGhD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACE,EAAI,QAAQ,EAAI,EAAI,QAAQ,CAAC,MAAM,CAAG,EACrC,EAAI,QAAQ,CAAC,GAAG,CAAE,AAAD,GACf,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAe,UAAU,4CACxB,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,gCACZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAe,EAAG,QAAQ,EAAI,cAC7C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAyB,EAAG,WAAW,EAAI,QAE5D,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,gCACZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCACZ,EAAe,EAAG,SAAS,CAAE,EAAG,SAAS,IAE5C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCACZ,EAAe,EAAG,OAAO,CAAE,EAAG,OAAO,OAG1C,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,2CACZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAe,EAAY,EAAG,aAAa,MAE5D,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,oDAEZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yDAAyD,mBAAiB,CAAA,CAAA,YACvF,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,MAAM,UACN,QAAS,IAAM,KArK3B,WAqKsC,EAAG,EAAE,MApK7D,EAAe,AAAD,GAAW,IAAS,EAAK,KAAO,IAqKhB,UAAU,gCACV,gBAAc,OACd,gBAAe,IAAe,EAAG,EAAE,UAGnC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAM,6BAA6B,UAAU,wBAAwB,QAAQ,YAAY,KAAK,wBACjG,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,qGAIX,IAAe,EAAG,EAAE,EACnB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,cAAY,CAAA,CAAA,EACZ,UAAU,yFAEV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAS,KAxZ7C,EAwZ8D,GAvZ9D,GAAc,GACd,EAAc,EAFC,IAwZoD,EAAc,KAAO,EACpD,UAAU,wFAGV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAM,6BAA6B,UAAU,wBAAwB,QAAQ,YAAY,KAAK,yBACjG,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,uGACR,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,sCAEV,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yBAAgB,YAGlC,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAS,KAAQ,EAAY,GAAK,EAAc,KAAO,EACvD,UAAU,wFAGV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAM,6BAA6B,UAAU,wBAAwB,QAAQ,YAAY,KAAK,wBACjG,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,wIAEV,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yBAAgB,YAGlC,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAS,KAhS7C,EAgSgE,GA/RhE,GAAuB,GACvB,EAAc,EAFC,IAGf,EAAa,MA6RwD,EAAc,KAAO,EACtD,UAAU,wFAGV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAM,6BAA6B,UAAU,uBAAuB,QAAQ,YAAY,KAAK,wBAChG,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,SAAS,UAAU,EAAE,4IAA4I,SAAS,cAElL,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,wBAAe,0BArEpC,EAAG,EAAE,GA+EhB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,QAAS,EAAG,UAAU,mCAA0B,yCA/K7D,EAAI,UAAU,CA2LzB,GAGC,GAAc,GACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8EACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+BAA+B,QAAS,IAAM,GAAc,KAC3E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oFACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iEACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCAAwB,cACtC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,UAAU,gCACV,QAAS,IAAM,GAAc,GAC7B,aAAW,iBACZ,SAKH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kEACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gDAAuC,MAEtD,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,oCAA2B,oBAEzC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kEACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,eAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBACZ,EAAe,EAAY,SAAS,CAAE,EAAY,SAAS,IAG9D,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,aAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBACZ,EAAe,EAAY,OAAO,CAAE,EAAY,OAAO,IAG1D,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,gBAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBACyB,UAArC,OAAO,EAAY,aAAa,CAC7B,CAAA,EAAG,EAAY,aAAa,CAAC,CAAC,CAAC,CAC/B,MAGN,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,SAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBAAc,EAAY,IAAI,EAAI,MAEjD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,YAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBACZ,EAAY,WAAW,EAAI,EAAY,gBAAgB,EAAI,EAAY,SAAS,EAAI,MAGvF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,SAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBAAc,EAAY,QAAQ,EAAI,CAAC,KAAK,EAAE,EAAY,MAAM,EAAI,IAAA,CAAK,GAExF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,aAC/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+CACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+FACZ,EAAY,SAAS,EAAI,EAAY,SAAS,CAAC,EAAE,EAAE,WAElD,CAAA,CADA,CACA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAK,EAAY,SAAS,CAAC,EAAE,CAAC,UAAU,CAAG,IAAK,EAAY,EADZ,OACqB,CAAC,EAAE,CAAC,IAAI,EAAI,GAAI,UAAU,+BAEpG,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uCAGnB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+BACZ,EAAY,SAAS,EAAI,EAAY,SAAS,CAAC,EAAE,EAAE,KAChD,EAAY,SAAS,CAAC,EAAE,CAAC,IAAI,CAC7B,EAAY,UAAU,GAE5B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCACZ,EAAY,SAAS,EAAI,EAAY,SAAS,CAAC,EAAE,EAAE,YAAc,EAAY,SAAS,CAAC,EAAE,CAAC,WAAW,CAAG,iBAOnH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2CACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,4BAAmB,YAEjC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,eAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UAAK,EAAe,EAAY,SAAS,CAAE,EAAY,SAAS,OAGnE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,SAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UAAK,EAAY,QAAQ,EAAI,CAAC,KAAK,EAAE,EAAY,MAAM,EAAI,IAAA,CAAK,MAGnE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,aAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UAAK,EAAe,EAAY,OAAO,CAAE,EAAY,OAAO,gBAMrE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6DACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAAS,IAAM,GAAc,GAAQ,UAAU,qDAA4C,UACnG,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAAS,KAAY,GAAa,EAAY,GAAc,GAAc,EAAQ,EAAG,UAAU,uDAA8C,qBAQ9J,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+EACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+BAA+B,QAAS,IAAM,GAAgB,KAC7E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oFACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iEACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCAAyB,EAAY,eAAiB,aACpE,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,gCAAgC,QAAS,IAAM,GAAgB,GAAQ,aAAW,iBAAQ,SAG9G,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2CACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,oCAA2B,oBAEzC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,4CAAmC,cACpD,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,MAAO,EAAK,SAAS,EAAI,GACzB,SAAU,AAAC,IACT,IAAM,EAAQ,EAAE,MAAM,CAAC,KAAK,CAC5B,EAAQ,AAAC,IAAM,AAAC,CAAE,GAAG,CAAC,CAAE,UAAW,EAAO,OAAQ,GAAI,WAAY,GAAG,CAAC,EAClE,EACF,EAAkB,GADT,CAGT,EAAgB,EAAE,EAClB,EAAyB,EAAE,EAE/B,EACA,UAAU,oDAEV,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,YAAG,OAChB,GAAmB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,YAAG,eACpC,GAAiB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,YAAG,2BAClC,EAAe,GAAG,CAAC,AAAC,GACnB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAsC,MAAO,OAAO,EAAE,EAAE,WAC9C,MAAR,EAAE,EAAE,CAAW,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,GAAG,EAAE,EAAE,IAAI,EAAI,EAAE,SAAS,CAAA,CAAE,CAAG,EAAE,IAAI,EAAI,EAAE,SAAS,EADlE,CAAA,EAAG,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE,SAAS,CAAA,CAAE,SAO3C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,4CAAmC,WACpD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,MAAO,EAAK,MAAM,EAAI,KACtB,SAAU,AAAC,IACT,IAAM,EAAM,EAAE,MAAM,CAAC,KAAK,CAC1B,GAAI,AAAQ,SAAM,CAChB,EAAQ,AAAC,IAAM,AAAC,CAAE,GAAG,CAAC,CAAE,OAAQ,GAAI,WAAY,GAAG,CAAC,EACpD,EAAyB,EAAE,EAC3B,MACF,CACA,IAAM,EAAQ,OAAO,GACf,EAAO,EAAa,IAAI,CAAC,AAAC,GAAM,EAAE,EAAE,GAAK,GAC/C,EAAQ,AAAC,IAAM,AAAC,CAAE,GAAG,CAAC,CAAE,OAAQ,EAAK,WAAY,GAAG,CAAC,EACrD,EAAyB,GAAM,mBAAqB,EAAE,CACxD,EACA,UAAU,0CACV,SAAU,CAAC,CAAC,EAAK,SAAS,EAA4B,IAAxB,EAAa,MAAM,UAEhD,EAAK,SAAS,CACW,IAAxB,EAAa,MAAM,CACjB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,cAAK,aAEnB,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,cAAK,OAClB,EAAa,GAAG,CAAC,AAAC,GACjB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAkB,MAAO,OAAO,EAAE,EAAE,WAClC,EAAE,KAAK,CAAG,CAAA,EAAG,EAAE,EAAE,CAAC,GAAG,EAAE,EAAE,KAAK,CAAA,CAAE,CAAG,CAAC,KAAK,EAAE,EAAE,EAAE,CAAA,CAAE,EADvC,EAAE,EAAE,MAOvB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,cAAK,YAKzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,4CAAmC,eACpD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,MAAO,EAAK,UAAU,EAAI,KAC1B,SAAU,AAAC,GAAM,EAAQ,AAAC,IAAM,AAAC,CAAE,GAAG,CAAC,CAAE,WAA+B,AAAnB,SAAE,MAAM,CAAC,KAAK,CAAY,GAAK,EAAE,MAAM,CAAC,KAAK,AAAC,CAAC,GACpG,UAAU,0CACV,SAAU,CAAC,CAAC,EAAK,SAAS,EAA4B,IAAxB,EAAa,MAAM,UAEhD,CAAC,KACA,IAAM,EAAmB,EAAK,SAAS,CAAG,EAAmB,GAAG,CAAC,EAAK,SAAS,GAAK,EAAE,CAAG,EAAE,QAEvF,AAAJ,EAAS,SAAS,EAA4B,GAAG,CAA3B,EAAa,MAAM,CAChC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,cAAK,iBAGxB,EAAsB,MAAM,CAAG,EAE/B,CAFkC,AAElC,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,cAAK,OAClB,EAAsB,GAAG,CAAC,AAAC,GAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAA0B,MAAO,EAAE,UAAU,UAC3C,EAAE,IAAI,CAAG,CAAA,EAAG,EAAE,IAAI,CAAC,EAAE,EAAE,EAAE,UAAU,CAAC,CAAC,CAAC,CAAG,EAAE,UAAU,EAD3C,EAAE,UAAU,MAQ7B,EAAK,SAAS,EAAI,EAAiB,MAAM,CAAG,EAE5C,CAF+C,AAE/C,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,cAAK,OAClB,EAAiB,GAAG,CAAE,AAAD,GACpB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAA0B,MAAO,EAAE,UAAU,UAC3C,EAAE,IAAI,CAAG,CAAA,EAAG,EAAE,IAAI,CAAC,EAAE,EAAE,EAAE,UAAU,CAAC,CAAC,CAAC,CAAG,EAAE,UAAU,EAD3C,EAAE,UAAU,MAQ1B,EAAgB,GAAG,CAAC,AAAC,GAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAe,MAAO,WACd,OAAN,EAAa,KAAO,GADV,IAIjB,CAAC,WAKP,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,4CAAmC,iBACpD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,KAAK,OAAO,MAAO,EAAK,SAAS,CAAE,SAAU,AAAC,GAAM,EAAS,AAAD,IAAO,AAAC,CAAE,GAAG,CAAC,CAAE,UAAW,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,EAAI,UAAU,+CAG9H,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,4CAAmC,iBACpD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,KAAK,OAAO,MAAO,EAAK,SAAS,CAAE,SAAU,AAAC,GAAM,EAAQ,AAAC,IAAO,AAAD,CAAG,GAAG,CAAC,CAAE,UAAW,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,EAAI,UAAU,+CAG9H,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,4CAAmC,eACpD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,KAAK,OAAO,MAAO,EAAK,OAAO,CAAE,SAAU,AAAC,GAAM,EAAQ,AAAC,IAAM,AAAC,CAAE,GAAG,CAAC,CAAE,QAAS,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,EAAI,UAAU,+CAG1H,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,4CAAmC,eACpD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,KAAK,OAAO,MAAO,EAAK,OAAO,CAAE,SAAU,AAAC,GAAM,EAAQ,AAAC,IAAM,AAAC,CAAE,GAAG,CAAC,CAAE,QAAS,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,EAAI,UAAU,kDAI5H,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oEACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,4CAAmC,WACpD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,KAAK,OAAO,MAAO,EAAK,IAAI,CAAE,SAAU,AAAC,GAAM,EAAQ,AAAC,IAAM,AAAC,CAAE,GAAG,CAAC,CAAE,KAAM,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,EAAI,UAAU,0CAA0C,YAAY,YAG1K,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAwB,gBACvC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iDAAwC,EAAgB,aAI1E,GAAa,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCAA6B,OAG5D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6DACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAAS,IAAM,GAAgB,GAAQ,UAAU,4CAA4C,SAAU,WAAQ,WAEvH,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAAS,EAAW,UAAU,qDAAqD,SAAU,WAClG,EAAS,YAAc,EAAY,SAAW,qBAS1D,GAAuB,GACtB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+EACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+BAA+B,QAAS,IAAM,GAAuB,KACpF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kFACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,sCAA6B,mBAC3C,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,kCAAwB,6CACO,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,WAAO,IAAE,OAAO,EAAY,EAAE,KAAW,qCAGrF,GAAa,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCAA6B,IAE1D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qDACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,2BAA2B,QAAS,IAAM,EAAuB,IAAQ,SAAU,WAAQ,WAC7G,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,0CAA0C,QAAS,EAAiB,SAAU,WAC7F,EAAS,cAAgB,yBArfjC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mCAA0B,qBA8fpD,CNpkEA,IAAM,EAAA,yCA2CS,SAAS,IACtB,GAAM,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAc,EAAE,EACtD,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAC5C,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAwB,MAE5C,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACzC,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACzC,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,OAEvD,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,GAAS,GACzC,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,OAEvD,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,GACjD,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAiB,GAG/C,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAW,SAC7C,CAAC,EAAmB,EAAqB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAGrD,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC3C,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC/B,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAwB,MACpD,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MACpD,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CAC/B,UAAW,GACX,OAAQ,GACR,WAAY,GACZ,UAAW,GACX,UAAW,GACX,QAAS,GACT,QAAS,GACT,KAAM,EACR,GAEM,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAEtD,CAAC,EAAY,GAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACvC,CAAC,GAAa,GAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAmB,MAE3D,CAAC,GAAqB,GAAuB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAGzD,CAAC,GAAgB,GAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAkB,EAAE,EAClE,CAAC,GAAiB,GAAmB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,GAAS,GACjD,CAAC,GAAe,GAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAG5D,CAAC,GAAc,GAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,EAAE,EAC5D,CAAC,GAAuB,GAAyB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAEhE,EAAE,EAIE,GAAqB,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,KACjC,IAAM,EAAM,IAAI,IAMhB,OALA,GAAe,OAAO,CAAC,AAAC,IAClB,AAAQ,QAAN,EAAE,EAAY,EAAE,iBAAiB,EAAE,QAAQ,AAC/C,EAAI,GAAG,CAAC,OAAO,EAAE,EAAE,EAAG,EAAE,iBAAiB,CAE7C,GACO,CACT,EAAG,CAAC,GAAe,EAEb,GAAkB,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,KAC9B,IAAM,EAAI,IAAI,IAUd,OATA,EAAW,OAAO,CAAC,AAAC,IACd,EAAE,SAAS,EAAI,EAAE,SAAS,CAAC,MAAM,CAAG,EACtC,CADyC,CACvC,SAAS,CAAC,OAAO,CAAC,AAAC,IACf,GAAG,YAAY,EAAE,GAAG,CAAC,EAAE,UAAU,CACvC,GACS,EAAE,UAAU,EAAE,AACvB,EAAE,GAAG,CAAC,EAAE,UAAU,CAEtB,GACO,CAAC,QAAS,MAAM,IAAI,CAAC,GAC9B,AADiC,EAC9B,CAAC,EAAW,EAET,GAAc,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,KAC1B,IAAM,EAAM,IAAI,IAQhB,OAPA,EAAW,OAAO,CAAC,AAAC,IAClB,EAAE,SAAS,EAAE,QAAQ,AAAC,IAChB,GAAG,YAAc,CAAC,EAAI,GAAG,CAAC,EAAE,UAAU,GAAG,AAC3C,EAAI,GAAG,CAAC,EAAE,UAAU,CAAE,EAE1B,EACF,GACO,CACT,EAAG,CAAC,EAAW,EAET,GAAoB,AAAD,IACvB,GAAI,CAAC,GAAa,OAAP,EAAa,MAAO,KAC/B,IAAM,EAAM,GAAY,GAAG,CAAC,UAC5B,AAAI,GAAK,KAAa,CAAP,AAAO,EAAG,EAAI,IAAI,CAAC,EAAE,EAAE,EAAG,CAAC,CAAC,CACpC,CACT,EAEM,GAAiB,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,KAC7B,IAAM,EAAI,IAAI,IAId,OAHA,EAAW,OAAO,CAAC,AAAC,IACM,AAApB,iBAAO,EAAE,MAAM,EAAe,EAAE,GAAG,CAAC,EAAE,MAAM,CAClD,GACO,CAAC,QAAS,MAAM,IAAI,CAAC,GAAG,GAAG,CAAC,AAAC,GAAM,OAAO,IAAI,AACvD,EAAG,CAAC,EAAW,EAET,GAAe,AAAC,IACpB,GAAI,CAAC,GAAmB,OAAV,EAAgB,MAAO,KACrC,IAAM,EAAK,OAAO,GACZ,EAAI,GAAa,IAAI,CAAC,AAAC,GAAO,EAAG,EAAE,GAAK,UAC9C,AAAI,GAAG,MAAc,CAAP,AAAQ,KAAK,EAAE,EAAG,GAAG,EAAE,EAAE,KAAK,CAAA,CAAE,CACvC,CAAC,KAAK,EAAE,EAAA,CAAO,AACxB,EAsBM,GAAc,CAAC,EAAe,IAClC,CArBF,SAAS,AAAe,CAAgB,CAAE,CAAa,EACrD,GAAI,CAAC,EAAS,MAAO,GACrB,GAAI,CACF,IAAM,EAAW,EAAO,CAAA,EAAG,EAAQ,CAAC,EAAE,EAAA,CAAM,CAAG,CAAA,EAAG,EAAQ,SAAS,CAAC,CAC9D,EAAI,IAAI,KAAK,GACnB,GAAI,OAAO,KAAK,CAAC,EAAE,OAAO,IAAK,MAAO,CAAA,EAAG,EAAQ,CAAC,EAAE,GAAQ,GAAA,CAAI,CAChE,IAAM,EAAK,OAAO,EAAE,OAAO,IAAI,QAAQ,CAAC,EAAG,KACrC,EAAK,OAAO,EAAE,QAAQ,GAAK,GAAG,QAAQ,CAAC,EAAG,KAC1C,EAAO,EAAE,WAAW,GACtB,EAAQ,EAAE,QAAQ,GAChB,EAAU,OAAO,EAAE,UAAU,IAAI,QAAQ,CAAC,EAAG,KAC7C,EAAO,GAAS,GAAK,KAAO,KAGlC,OAFA,GAAgB,GACF,EADN,EACJ,IAAa,EAAQ,EAAA,EAClB,CAAA,EAAG,EAAG,CAAC,EAAE,EAAG,CAAC,EAAE,EAAK,CAAC,EAAE,EAAM,CAAC,EAAE,EAAQ,CAAC,EAAE,EAAA,CACpD,AAD0D,CACxD,KAAM,CACN,MAAO,CAAA,EAAG,EAAQ,CAAC,EAAE,GAAQ,GAAA,CAAI,AACnC,EACF,EAGiB,EAAM,GAEjB,GAAuB,CAC3B,EACA,EACA,EACA,KAEA,GAAI,CAAC,GAAS,CAAC,EAAO,OAAO,EAC7B,GAAI,CACF,IAAM,EAAS,EAAM,KAAK,CAAC,KAAK,GAAG,CAAC,QAC9B,EAAS,EAAM,KAAK,CAAC,KAAK,GAAG,CAAC,QAChC,EAAK,EACP,EAAK,EACL,EAAK,EACL,EAAK,CACH,KAAO,CAAC,EAAI,EAAG,CAAG,EAAM,KAAK,CAAC,KAAK,GAAG,CAAC,AAAC,GAAM,OAAO,GAAA,EACrD,IAAO,CAAC,EAAI,EAAG,CAAG,EAAM,KAAK,CAAC,KAAK,GAAG,CAAC,AAAC,GAAM,OAAO,GAAA,EACzD,IAAM,EAAQ,IAAI,KAAK,CAAM,CAAC,EAAE,CAAE,CAAM,CAAC,EAAE,CAAG,EAAG,CAAM,CAAC,EAAE,CAAE,EAAI,GAE1D,EADM,AACG,IADC,KAAK,CAAM,CAAC,EAAE,CAAE,CAAM,CAAC,EAAE,CAAG,EAAG,CAAM,CAAC,EAAE,CAAE,EAAI,GAC3C,OAAO,GAAK,EAAM,OAAO,GAC5C,GAAI,MAAM,IAAW,GAAU,EAAG,OAAO,EACzC,OAAO,KAAK,KAAK,CAAC,EAAU,KAC9B,CAAE,CAD2B,AAAQ,IAC7B,CACN,AAFwC,EAAE,KAEnC,CACT,CACF,EAEM,GAAkB,GACtB,EAAK,SAAS,CACd,EAAK,SAAS,CACd,EAAK,OAAO,CACZ,EAAK,OAAO,EAKR,GAAiB,CAAA,EAAA,EAAA,WAAA,AAAW,EAChC,MAAO,IACL,GAAW,GACX,EAAS,MACT,GAAI,CACF,IAAM,EACJ,GACA,GAGI,IAAI,CAEJ,CAJJ,CAAC,AAIY,IAAI,gBAAgB,CACjC,KAAM,OAAO,GACb,EALI,IAKG,OAAO,GACd,OAAQ,GAAe,GACvB,SAA6B,QAAnB,EAA2B,EAAiB,EACxD,GAEM,EAAM,CAAA,EAAG,EAAK,YAAY,EAAE,EAAO,QAAQ,GAAA,CAAI,CAC/C,EAAM,MAAM,MAAM,EAAK,CAC3B,OAAQ,MACR,QAAS,EACL,CACE,cAAe,CAAC,OAAO,EAAE,EAAA,CAAe,CACxC,OAAQ,kBACV,EACA,CAAE,OAAQ,kBAAmB,EACjC,MAAO,UACT,GAEA,GAAmB,MAAf,EAAI,MAAM,CAAU,CACtB,GAAI,CACF,aAAa,UAAU,CAAC,cAC1B,CAAE,KAAM,CAAC,CACT,EAAS,MACT,EAAc,EAAE,EAChB,EAAc,GACd,GAAW,GACX,MACF,CAEA,GAAI,CAAC,EAAI,EAAE,CAAE,CACX,IAAM,EAAM,MAAM,EAAI,IAAI,GAAG,KAAK,CAAC,IAAM,GAEzC,OADA,QAAQ,KAAK,CAAC,0BAA2B,EAAI,MAAM,CAAE,GAC/C,AAAI,MAAM,CAAC,2BAA2B,EAAE,EAAI,MAAM,CAAC,CAAC,CAAC,CAC7D,CAEA,IAAM,EAAO,MAAM,EAAI,IAAI,GACvB,EAAqB,EAAE,CACvB,MAAM,OAAO,CAAC,IAChB,EAAQ,CADe,CAEvB,EACE,KAAK,GAAG,CAAC,EAAG,KAAK,IAAI,CAAC,CAAC,EAAK,MAAM,GAAI,CAAC,IAAI,IAG7C,EAAQ,MAAM,OAAO,CAAC,EAAK,KAAK,EAAI,EAAK,KAAK,CAAG,EAAE,CACnD,EACE,EAAK,UAAU,EACb,KAAK,GAAG,CACN,EACA,KAAK,IAAI,CAAC,CAAC,EAAK,KAAK,EAAI,EAAM,MAAA,AAAM,EA3N9B,EA2NkC,IAIjD,EAAc,EAChB,CAAE,MAAO,EAAU,CACjB,QAAQ,KAAK,CAAC,uBAAwB,GACtC,EAAS,OAAO,GAAK,SAAW,IAChC,EAAc,EAAE,EAChB,EAAc,EAChB,QAAU,CACR,GAAW,EACb,CACF,EACA,CAAC,EAAa,EAAa,EAAgB,EAAM,EAG7C,GAAe,CAAA,EAAA,EAAA,WAAA,AAAW,EAC9B,MAAO,IACL,GAAmB,IACnB,GAAiB,MACjB,GAAI,CACF,IAAM,EACJ,GACA,GAGI,IAAI,CAEJ,CAJJ,CAAC,AAIS,CAAA,EAAG,EAAK,oBAAoB,CAAC,CACnC,EAAM,MAAM,GAJZ,GAIkB,EAAK,CAC3B,OAAQ,MACR,QAAS,EACL,CACE,cAAe,CAAC,OAAO,EAAE,EAAA,CAAe,CACxC,OAAQ,kBACV,EACA,CAAE,OAAQ,kBAAmB,EACjC,MAAO,UACT,GAEA,GAAmB,MAAf,EAAI,MAAM,CAAU,CACtB,GAAI,CACF,aAAa,UAAU,CAAC,cAC1B,CAAE,KAAM,CAAC,CACT,EAAS,MACT,GAAkB,EAAE,EACpB,GAAmB,IACnB,MACF,CAEA,GAAI,CAAC,EAAI,EAAE,CAAE,CACX,IAAM,EAAM,MAAM,EAAI,IAAI,GAAG,KAAK,CAAC,IAAM,GAEzC,OADA,QAAQ,KAAK,CAAC,wBAAyB,EAAI,MAAM,CAAE,GAC7C,AAAI,MAAM,CAAC,yBAAyB,EAAE,EAAI,MAAM,CAAC,CAAC,CAAC,CAC3D,CAEA,IAAM,EAAO,MAAM,EAAI,IAAI,GAC3B,GAAI,MAAM,OAAO,CAAC,GAAO,CACvB,IAAM,EAAwB,EAAE,CAChC,EAAK,OAAO,CAAC,AAAC,IACZ,IAAM,EAAK,CAAC,GAAG,WAAa,EAAA,CAAE,CAAE,QAAQ,GAAG,IAAI,GACzC,EAAK,GAAG,IAAM,GAAG,WAAa,GAAG,KAAO,KACxC,EAAO,CAAC,GAAG,MAAQ,EAAA,CAAE,CAAE,QAAQ,GAAG,IAAI,GACtC,EAAoC,MAAM,OAAO,CACrD,GAAG,mBAED,EAAE,iBAAiB,CACnB,EAAE,AACF,AAAM,UAAQ,GAChB,CADoB,CACf,IAAI,CAAC,IACR,EACA,UAAW,OACX,oBACA,CACF,EAEJ,GACA,IAAM,EAAO,IAAI,IACX,EAA2B,EAAE,CACnC,EAAK,OAAO,CAAE,AAAD,IACN,EAAK,GAAG,CAAC,OAAO,EAAE,EAAE,IAAI,CAC3B,EAAK,GAAG,CAAC,OAAO,EAAE,EAAE,GACpB,EAAQ,IAAI,CAAC,GAEjB,GACA,GAAkB,EACpB,MACE,CADK,OACG,IAAI,CAAC,+BAAgC,GAC7C,GAAkB,EAAE,CAExB,CAAE,MAAO,EAAU,CACjB,QAAQ,KAAK,CAAC,qBAAsB,GACpC,GAAiB,OAAO,GAAK,SAAW,IACxC,GAAkB,EAAE,CACtB,QAAU,CACR,IAAmB,EACrB,CACF,EACA,CAAC,EAAM,EAGH,GAAoB,CAAA,EAAA,EAAA,WAAA,AAAW,EACnC,MAAO,EAA+B,KACpC,GAAI,CAAC,EAAc,CACjB,GAAgB,EAAE,EAClB,GAAyB,EAAE,EAC3B,MACF,CAEA,IAAM,EAAe,OAAO,GAC5B,GAAI,CAAC,GAAgB,OAAO,KAAK,CAAC,GAAe,CAC/C,GAAgB,EAAE,EAClB,GAAyB,EAAE,EAC3B,MACF,CAEA,GAAI,CACF,IAAM,EACJ,GAGI,IAAI,CACJ,CAHJ,CAAC,AAGS,CAAA,EAAG,EAAK,UAAU,EAAE,EAAa,MAAM,CAAC,CAC9C,EAAM,MAAM,GAHZ,GAGkB,EAAK,CAC3B,OAAQ,MACR,QAAS,EACL,CACE,cAAe,CAAC,OAAO,EAAE,EAAA,CAAe,CACxC,OAAQ,kBACV,EACA,CAAE,OAAQ,kBAAmB,EACjC,MAAO,UACT,GAEA,GAAI,CAAC,EAAI,EAAE,CAAE,CACX,IAAM,EAAM,MAAM,EAAI,IAAI,GAAG,KAAK,CAAC,IAAM,IACzC,QAAQ,KAAK,CAAC,6BAA8B,EAAI,MAAM,CAAE,GACxD,GAAgB,EAAE,EAClB,GAAyB,EAAE,EAC3B,MACF,CAEA,IAAM,EAAO,MAAM,EAAI,IAAI,GACrB,EAAsB,MAAM,OAAO,CAAC,GAAQ,EAAO,EAAE,CAG3D,GAFA,GAAgB,GAEO,MAAnB,GAA2B,EAAK,MAAM,CAAG,EAAG,CAC9C,IAAM,EAAO,EAAK,IAAI,CAAC,AAAC,GAAM,EAAE,EAAE,GAAK,GACvC,GAAyB,GAAM,mBAAqB,EAAE,CACxD,MACE,CADK,EACoB,EAAE,CAE/B,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,0BAA2B,GACzC,GAAgB,EAAE,EAClB,GAAyB,EAAE,CAC7B,CACF,EACA,CAAC,EAAM,EAKT,CAAA,EAAA,EAAA,SAAS,AAAT,EAAU,KACR,IAAM,EAAI,WAAW,KACnB,EAAe,AAAC,GACd,AAAI,IAAS,GACX,EAAe,GACR,GAEF,EAJmB,AAM9B,EAAG,KACH,MAAO,IAAM,aAAa,EAC5B,EAAG,CAAC,EAAY,EAEhB,CAAA,EAAA,EAAA,SAAS,AAAT,EAAU,KAON,GAAW,EAGf,EAAG,EAAE,EAEL,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACJ,GACF,GAAe,CADN,EAET,GAAa,KAEb,GAAe,MACf,GAAa,MAEjB,EAAG,CAAC,GAAgB,GAAc,EAAO,EAAa,EAAa,EAAe,EAElF,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,EAAc,KAChB,EAAG,CAAC,EAAa,EAAS,EAI1B,IAAM,GAAc,AAAC,IAInB,GAHA,CAGI,EAHY,EAAE,EAClB,GAAyB,EAAE,EAEtB,EAYE,CACL,EAbQ,EAaF,EACJ,EAAI,SAAS,EAAI,EAAI,SAAS,CAAC,EAAE,CAAG,EAAI,SAAS,CAAC,EAAE,MAAG,EACzD,EAAa,EAAI,EAAE,EACnB,EAAQ,CACN,eACoB,IAAlB,EAAI,SAAS,EAAoC,OAAlB,EAAI,SAAS,CACxC,OAAO,EAAI,SAAS,EACpB,GACN,YACiB,IAAf,EAAI,MAAM,EAAkB,AAAe,SAAX,MAAM,CAClC,OAAO,EAAI,MAAM,EACjB,GACN,WAAY,EAAI,UAAU,EAAI,GAAK,YAAc,GACjD,UAAW,EAAI,SAAS,EAAI,GAC5B,UAAW,EAAI,SAAS,EAAI,GAC5B,QAAS,EAAI,OAAO,EAAI,GACxB,QAAS,EAAI,OAAO,EAAI,GACxB,KAAM,EAAI,IAAI,EAAI,EACpB,GAEI,EAAI,SAAS,EAAE,AACjB,GAAkB,EAAI,SAAS,CAAE,EAAI,MAAM,EAAI,KAEnD,MAnCE,EAAa,MACb,EAAQ,CACN,UAAW,GACX,OAAQ,GACR,WAAY,GACZ,UAAW,GACX,UAAW,GACX,QAAS,GACT,QAAS,GACT,KAAM,EACR,GA0BF,EAAa,MACb,GAAgB,EAClB,EAEM,GAAY,UAChB,GAAU,GACV,EAAa,MACb,GAAI,CACF,GACE,CAAC,EAAK,SAAS,EACf,CAAC,EAAK,MAAM,EACZ,CAAC,EAAK,UAAU,EAChB,CAAC,EAAK,SAAS,EACf,CAAC,EAAK,SAAS,EACf,CAAC,EAAK,OAAO,EACb,CAAC,EAAK,OAAO,EACb,CAAC,EAAK,IAAI,CACV,CACA,EAAa,oCACb,GAAU,GACV,MACF,CAEA,IAAM,EAAe,CACnB,UAAW,OAAO,EAAK,SAAS,EAChC,OAAQ,OAAO,EAAK,MAAM,EAC1B,WAAY,EAAK,UAAU,CAC3B,UAAW,EAAK,SAAS,CACzB,UAAW,EAAK,SAAS,CACzB,QAAS,EAAK,OAAO,CACrB,QAAS,EAAK,OAAO,CACrB,KAAM,EAAK,IAAI,CACf,cAAe,GACb,EAAK,SAAS,CACd,EAAK,SAAS,CACd,EAAK,OAAO,CACZ,EAAK,OAAO,CAEhB,EAEM,EACJ,GAGI,IAAI,CAEJ,CAJJ,CAAC,AAIS,EACR,CAAA,EAAG,EAAK,YAAY,EAAE,EAAA,CAAW,CACjC,CAAA,EAAG,EAAK,QALN,GAKiB,CAAC,CAGlB,EAAM,MAAM,MAAM,EAAK,CAC3B,OAHa,EAAY,MAAQ,OAIjC,QAAS,CACP,GAAI,EACA,CAAE,cAAe,CAAC,OAAO,EAAE,EAAA,CAAe,AAAC,EAC3C,CAAC,CAAC,CACN,eAAgB,mBAChB,OAAQ,kBACV,EACA,KAAM,KAAK,SAAS,CAAC,EACvB,GAEA,GAAI,CAAC,EAAI,EAAE,CAAE,CACX,IAAM,EAAO,MAAM,EAAI,IAAI,GAAG,KAAK,CAAC,IAAM,GAE1C,OADA,QAAQ,KAAK,CAAC,oBAAqB,EAAI,MAAM,CAAE,GACzC,AAAI,MAAM,uBAClB,CAEA,EAAgB,IAChB,EAAa,MACb,EAAQ,CACN,UAAW,GACX,OAAQ,GACR,WAAY,GACZ,UAAW,GACX,UAAW,GACX,QAAS,GACT,QAAS,GACT,KAAM,EACR,GACA,MAAM,GAAe,GAAS,KAChC,CAAE,MAAO,EAAU,CACjB,QAAQ,KAAK,CAAC,kBAAmB,GACjC,EAAa,GAAK,SAAW,uBAC/B,QAAU,CACR,EAAU,GACZ,CACF,EAEM,GAAW,AAAC,IAChB,GAAe,GACf,IAAc,GACd,EAAc,KAChB,EAEM,GAAa,AAAC,IAClB,GAAe,GACf,IAAuB,GACvB,EAAc,MACd,EAAa,KACf,EAEM,GAAkB,UACtB,GAAK,CAAD,GACJ,GAAU,GACV,EAAa,CAFK,KAGlB,GAAI,CACF,IAAM,EACJ,GAGI,IAAI,CACJ,CAHJ,CAAC,AAGS,MAAM,MAAM,CAAA,EAAG,EAAK,YAAY,EAAE,GAAY,EAAE,CAAA,CAAE,AAFxD,CAE0D,CAC9D,OAAQ,SACR,QAAS,EACL,CAAE,cAAe,CAAC,OAAO,EAAE,EAAA,CAAe,AAAC,OAC3C,CACN,GACA,GAAI,CAAC,EAAI,EAAE,CAAE,CACX,IAAM,EAAM,MAAM,EAAI,IAAI,GAAG,KAAK,CAAC,IAAM,GAEzC,OADA,QAAQ,KAAK,CAAC,yBAA0B,EAAI,MAAM,CAAE,GAC9C,AAAI,MAAM,6BAClB,CACA,IAAuB,GACvB,GAAe,MACf,MAAM,GAAe,GAAS,KAChC,CAAE,MAAO,EAAU,CACjB,QAAQ,KAAK,CAAC,wBAAyB,GACvC,EAAa,GAAK,SAAW,6BAC/B,QAAU,CACR,GAAU,EACZ,EACF,EAIM,GAAW,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,KACvB,IAAM,EAAI,EAAY,IAAI,GAAG,WAAW,GACxC,OAAO,EAAW,MAAM,CAAC,AAAC,IACxB,GAAuB,QAAnB,EAA0B,CAC5B,IAAM,EAAc,CAAC,EAAE,SAAS,EAAI,EAAA,AAAE,EAAE,IAAI,CAC1C,AAAC,GAAM,EAAE,UAAU,GAAK,GAEpB,EAAa,EAAE,UAAU,GAAK,EACpC,GAAI,CAAC,GAAe,CAAC,EAAY,OAAO,CAC1C,UACI,CAAC,GAAG,AAEN,OAFa,AAEN,EAAE,gBAAgB,EAAI,IAC1B,WAAW,GACX,QAAQ,CAAC,IAEZ,AAEA,OAAO,AAFA,EAEE,IAAI,EAAI,IACd,WAAW,GACX,QAAQ,CAAC,IAEZ,AACe,AAAC,GAAE,IADX,KACoB,EAAI,EAAA,AAAE,EAAE,IAAI,CACvC,AAAC,GACC,CAAC,EAAE,IAAI,EAAI,EAAA,CAAE,CAAE,WAAW,GAAG,QAAQ,CAAC,IACtC,CAAC,EAAE,WAAW,EAAI,EAAA,CAAE,CAAE,WAAW,GAAG,QAAQ,CAAC,IAInD,EACF,EAAG,CAAC,EAAY,EAAa,EAAe,EA+F5C,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,kBACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCAEb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,eAAgB,EAChB,kBAAmB,EACnB,gBAAiB,GACjB,iBAAkB,GAClB,oBAAqB,IAAM,GAAe,KAI5C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,YAAa,EACb,eAAgB,EAChB,eAAgB,EAChB,eAAgB,EAChB,SAAU,EACV,YAAa,EACb,kBAAmB,EACnB,qBAAsB,EACtB,YAAa,IAAM,OA/GM,AAEjC,IAAI,CAAC,KAFe,GAAqC,KAEvC,IAF0B,EAEnB,KAGvB,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sEACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,eACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,8CACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,gEACZ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mCAA0B,SACxC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAqB,SACnC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mCAA0B,aACxC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mCAA0B,eACxC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mCAA0B,aACxC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mCAA0B,gBACxC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,0BAAiB,gBAInC,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,WACE,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,QAAS,EAAG,UAAU,0CAAiC,iBAM9D,CAAC,GAA+B,IAApB,GAAS,MAAM,EAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,QAAS,EAAG,UAAU,0CACvB,EAAQ,CAAC,OAAO,EAAE,EAAA,CAAO,CAAG,0BAKlC,CAAC,GACA,GAAS,GAAG,CAAC,AAAC,GACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAEC,EAAG,EACH,WAAY,EACZ,aAAc,AAAC,GACb,EAAc,AAAC,GAAS,IAAQ,EAAK,KAAO,GAE9C,YAAa,IAAM,EAAc,MACjC,OAAQ,GACR,OAAQ,GACR,SAAU,GACV,YAAa,IAVR,EAAE,EAAE,aAkBvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8EACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,qBAAmB,GAAS,MAAM,IACvC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,UAAU,gCACV,QAAS,IAAM,EAAe,AAAC,GAAM,KAAK,GAAG,CAAC,EAAG,EAAI,IACrD,SAA0B,IAAhB,WAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAA,KAEd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,QACG,EAAY,OAAK,KAEzB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,UAAU,gCACV,QAAS,IACP,EAAe,AAAC,GAAM,KAAK,GAAG,CAAC,EAAY,EAAI,IAEjD,SAAU,IAAgB,WAE1B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAA,mBAyCrB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,cAAa,CAAC,EACd,QAAS,IAAM,EAAe,IAC9B,UAAW,CAAC,uDAAuD,EAAE,EACjE,kCACA,gCAAA,CACA,CACJ,MAAO,CAAE,gBAAiB,iBAAkB,IAE9C,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CACC,cAAa,CAAC,EACd,UAAW,CAAC,6GAA6G,EAAE,EAAc,gBAAkB,mBAAA,CACvJ,CACJ,KAAK,SACL,aAAW,iBAEX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2DACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,YAClB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,yBAAgB,eAEhC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,GAAe,GAC9B,UAAU,yCAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAC,CAAA,CAAC,UAAU,iBAIjB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4DACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,4CAAmC,aACpD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CACL,MAAO,EACP,cAAe,AAAC,GAAM,EAAkB,aAExC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,2CACvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,YAAY,UAE3B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,aAAa,CAAA,WACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAM,eAAM,QAEvB,GAAgB,KAAK,CAAC,GAAG,GAAG,CAAC,AAAC,GAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAS,MAAO,WACxB,GAAiB,IADH,eAS3B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iEACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAQ,UACR,QAAS,KACP,EAAkB,OAClB,GAAe,EACjB,WACD,UAGD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,QAAQ,QAAS,IAAM,GAAe,YAAQ,UAG9D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,UAAU,yBACV,QAAS,KACP,GAAe,GACf,EAAe,GACf,GAAe,GAAS,KAC1B,WACD,mBAQN,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+EACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,UAAU,+BACV,QAAS,IAAM,GAAgB,KAEjC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oFACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iEACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCACX,EAAY,eAAiB,aAEhC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,UAAU,gCACV,QAAS,IAAM,GAAgB,GAC/B,aAAW,iBAEX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAC,CAAA,CAAC,UAAU,+BAIjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2CACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,oCAA2B,oBAEzC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,4CAAmC,cAGpD,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,MAAO,EAAK,SAAS,EAAI,GACzB,SAAU,AAAC,IACT,IAAM,EAAQ,EAAE,MAAM,CAAC,KAAK,CAC5B,EAAQ,AAAC,GAAO,CAAD,CACb,GAAG,CAAC,CACJ,UAAW,EACX,OAAQ,GACR,WAAY,GACd,CAAC,EACG,EACF,GAAkB,EADT,EAGT,GAAgB,EAAE,EAClB,GAAyB,EAAE,EAE/B,EACA,UAAU,oDAEV,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,YAAG,OAChB,IAAmB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,YAAG,eACpC,IACC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,YAAG,2BAElB,GAAe,GAAG,CAAC,AAAC,GACnB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAEC,MAAO,OAAO,EAAE,EAAE,WAET,MAAR,EAAE,EAAE,CACD,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,GAAG,EAAE,EAAE,IAAI,EAAI,EAAE,SAAS,CAAA,CAAE,CACrC,EAAE,IAAI,EAAI,EAAE,SAAS,EALpB,CAAA,EAAG,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE,SAAS,CAAA,CAAE,SAWrC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,4CAAmC,WAGpD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,MAAO,EAAK,MAAM,EAAI,KACtB,SAAU,AAAC,IACT,IAAM,EAAM,EAAE,MAAM,CAAC,KAAK,CAC1B,GAAI,AAAQ,SAAM,CAChB,EAAS,AAAD,IAAO,AAAC,CACd,GAAG,CAAC,CACJ,OAAQ,GACR,WAAY,GACd,CAAC,EACD,GAAyB,EAAE,EAC3B,MACF,CACA,IAAM,EAAQ,OAAO,GACf,EAAO,GAAa,IAAI,CAAC,AAAC,GAAM,EAAE,EAAE,GAAK,GAC/C,EAAQ,AAAC,IAAM,AAAC,CACd,GAAG,CAAC,CACJ,OAAQ,EACR,WAAY,GACd,CAAC,EACD,GAAyB,GAAM,mBAAqB,EAAE,CACxD,EACA,UAAU,0CACV,SAAU,CAAC,CAAC,EAAK,SAAS,EAA4B,IAAxB,GAAa,MAAM,UAEhD,EAAK,SAAS,CACW,IAAxB,GAAa,MAAM,CACjB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,cAAK,aAEnB,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,cAAK,OAClB,GAAa,GAAG,CAAC,AAAC,GACjB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAkB,MAAO,OAAO,EAAE,EAAE,WAClC,GAAa,OAAO,EAAE,EAAE,IADd,EAAE,EAAE,MAOvB,GAAe,GAAG,CAAC,AAAC,GAClB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAe,MAAO,WACd,OAAN,EAAa,KAAO,GAAa,IADvB,SAQrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,4CAAmC,eAGpD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,MAAO,EAAK,UAAU,EAAI,KAC1B,SAAU,AAAC,GACT,EAAQ,AAAC,IAAM,AAAC,CACd,GAAG,CAAC,CACJ,WACqB,OAAnB,EAAE,MAAM,CAAC,KAAK,CAAY,GAAK,EAAE,MAAM,CAAC,KAAK,CACjD,CAAC,EAEH,UAAU,0CACV,SAAU,CAAC,CAAC,EAAK,SAAS,EAA4B,IAAxB,GAAa,MAAM,UAEhD,CAAC,KACA,IAAM,EAAmB,EAAK,SAAS,CACnC,GAAmB,GAAG,CAAC,EAAK,SAAS,GAAK,EAAE,CAC5C,EAAE,QAEN,AAAI,EAAK,SAAS,EAA4B,GAAG,CAA3B,GAAa,MAAM,CAChC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,cAAK,iBAGxB,GAAsB,MAAM,CAAG,EAE/B,CAAA,AAFkC,EAElC,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,cAAK,OAClB,GAAsB,GAAG,CAAE,AAAD,GACzB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAA0B,MAAO,EAAE,UAAU,UAC3C,EAAE,IAAI,CACH,CAAA,EAAG,EAAE,IAAI,CAAC,EAAE,EAAE,EAAE,UAAU,CAAC,CAAC,CAAC,CAC7B,EAAE,UAAU,EAHL,EAAE,UAAU,MAU7B,EAAK,SAAS,EAAI,EAAiB,MAAM,CAAG,EAE5C,CAF+C,AAE/C,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,cAAK,OAClB,EAAiB,GAAG,CAAC,AAAC,GACrB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAA0B,MAAO,EAAE,UAAU,UAC3C,EAAE,IAAI,CACH,CAAA,EAAG,EAAE,IAAI,CAAC,EAAE,EAAE,EAAE,UAAU,CAAC,CAAC,CAAC,CAC7B,EAAE,UAAU,EAHL,EAAE,UAAU,MAU1B,GAAgB,GAAG,CAAC,AAAC,GAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAe,MAAO,WACpB,GAAiB,IADP,IAIjB,CAAC,WAKP,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,4CAAmC,iBAGpD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,MAAO,EAAK,SAAS,CACrB,SAAU,AAAC,GACT,EAAQ,AAAC,IAAM,AAAC,CACd,GAAG,CAAC,CACJ,UAAW,EAAE,MAAM,CAAC,KAAK,CAC3B,CAAC,EAEH,UAAU,+CAId,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,4CAAmC,iBAGpD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,MAAO,EAAK,SAAS,CACrB,SAAU,AAAC,GACT,EAAQ,AAAC,IAAM,AAAC,CACd,GAAG,CAAC,CACJ,UAAW,EAAE,MAAM,CAAC,KAAK,CAC3B,CAAC,EAEH,UAAU,+CAId,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,4CAAmC,eAGpD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,MAAO,EAAK,OAAO,CACnB,SAAU,AAAC,GACT,EAAQ,AAAC,IAAM,AAAC,CACd,GAAG,CAAC,CACJ,QAAS,EAAE,MAAM,CAAC,KAAK,CACzB,CAAC,EAEH,UAAU,+CAId,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,4CAAmC,eAGpD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,MAAO,EAAK,OAAO,CACnB,SAAU,AAAC,GACT,EAAQ,AAAC,IAAM,AAAC,CACd,GAAG,CAAC,CACJ,QAAS,EAAE,MAAM,CAAC,KAAK,CACzB,CAAC,EAEH,UAAU,kDAKhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oEACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,4CAAmC,WAGpD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,MAAO,EAAK,IAAI,CAChB,SAAU,AAAC,GACT,EAAQ,AAAC,IAAM,AAAC,CACd,GAAG,CAAC,CACJ,KAAM,EAAE,MAAM,CAAC,KAAK,CACtB,CAAC,EAEH,UAAU,0CACV,YAAY,YAIhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAwB,gBACvC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iDACZ,GAAgB,aAKtB,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCAA6B,OAIhD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6DACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,GAAgB,GAC/B,UAAU,4CACV,SAAU,WACX,WAID,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,GACT,UAAU,qDACV,SAAU,WAET,EAAS,YAAc,EAAY,SAAW,qBAS1D,GAAc,IACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8EACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,UAAU,+BACV,QAAS,IAAM,IAAc,KAG/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oFACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iEACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCAAwB,cACtC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,UAAU,gCACV,QAAS,IAAM,IAAc,GAC7B,aAAW,iBAEX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAC,CAAA,CAAC,UAAU,+BAIjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kEACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gDAAuC,MAEtD,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,oCAA2B,oBAEzC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kEACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,eAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBACZ,GACC,GAAY,SAAS,CACrB,GAAY,SAAS,IAIzB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,aAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBACZ,GAAY,GAAY,OAAO,CAAE,GAAY,OAAO,IAGvD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,gBAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBACyB,UAArC,OAAO,GAAY,aAAa,CAC7B,CAAA,EAAG,GAAY,aAAa,CAAC,CAAC,CAAC,CAC/B,MAGN,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,SAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBAAc,GAAY,IAAI,EAAI,MAEjD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,YAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBACZ,GAAY,gBAAgB,EAC3B,GAAY,SAAS,EACrB,MAGJ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,SAC/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBAAa,QACpB,GAAY,MAAM,EAAI,OAG9B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,aAC/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+CACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+FACZ,GAAY,SAAS,EACpB,GAAY,SAAS,CAAC,EAAE,EAAE,WAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAK,GAAY,SAAS,CAAC,EAAE,CAAC,UAAU,CACxC,IAAK,GAAY,SAAS,CAAC,EAAE,CAAC,IAAI,EAAI,GACtC,UAAU,+BAGZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uCAGnB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+BACZ,GAAY,SAAS,EACpB,GAAY,SAAS,CAAC,EAAE,EAAE,KACxB,GAAY,SAAS,CAAC,EAAE,CAAC,IAAI,CAC7B,GAAY,UAAU,GAE5B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCACZ,GAAY,SAAS,EACpB,GAAY,SAAS,CAAC,EAAE,EAAE,YACxB,GAAY,SAAS,CAAC,EAAE,CAAC,WAAW,CACpC,iBAOd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2CACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,4BAAmB,YAEjC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,eAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UACE,GACC,GAAY,SAAS,CACrB,GAAY,SAAS,OAK3B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,SAC/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,QAAM,GAAY,MAAM,EAAI,UAGnC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,aAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UACE,GAAY,GAAY,OAAO,CAAE,GAAY,OAAO,gBAO/D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6DACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,IAAc,GAC7B,UAAU,qDACX,UAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,KACH,IACF,GAAY,IAEd,EAHiB,EAGH,EAChB,EACA,UAAU,uDACX,qBAUV,IAAuB,IACtB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+EACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,UAAU,+BACV,QAAS,IAAM,IAAuB,KAExC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kFACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,sCAA6B,mBAC3C,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,kCAAwB,4CACO,IAC1C,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,WAAO,OAEL,OAAO,GAAY,EAAE,EAAE,QAAQ,CAAC,EAAG,QAC7B,qCAIV,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCAA6B,IAG9C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qDACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,UAAU,2BACV,QAAS,IAAM,IAAuB,GACtC,SAAU,WACX,WAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,UAAU,0CACV,QAAS,GACT,SAAU,WAET,EAAS,cAAgB,sBASrC,AAAa,cACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,MAAM,EACN,QAAS,IAAM,EAAY,WAIjB,qBAAb,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAA,GAGF,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8EACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,UAAU,+BACV,QAAS,IAAM,GAAqB,KAGtC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yFACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iEACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCAAwB,aACtC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,UAAU,sCACV,QAAS,IAAM,GAAqB,GACpC,aAAW,iBACZ,eAML,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,eACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,OAAQ,EACR,aAAc,AAAC,IACb,GAAY,GACZ,GAAqB,EACvB,QAKN,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kEACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,GAAqB,GACpC,UAAU,oCACX,oBASf"}