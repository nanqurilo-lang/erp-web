module.exports=[577710,a=>{"use strict";a.s(["default",()=>I],577710);var b=a.i(187924),c=a.i(50944),d=a.i(572131),e=a.i(972596),f=a.i(571987);function g({employee:a}){return(0,b.jsx)("div",{className:"flex items-center justify-between gap-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"h-16 w-16 rounded-full overflow-hidden border",children:(0,b.jsx)(f.default,{src:a.profilePictureUrl||"/employee-avatar.png",alt:a.name,width:64,height:64,className:"object-cover"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-semibold",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a.designationName||"â€”"}),(0,b.jsxs)("p",{className:"text-xs text-gray-400",children:["Employee Id : ",a.employeeId]}),(0,b.jsxs)("p",{className:"text-xs text-gray-400",children:["Reporting to : ",a.reportingToName||"â€”"]})]})]})})}function h(){return(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-4",children:[{label:"Projects",value:"09"},{label:"Tasks",value:"01"},{label:"Hours Logged",value:"04"}].map(a=>(0,b.jsxs)("div",{className:"border rounded-lg p-4 bg-white",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a.label}),(0,b.jsx)("p",{className:"text-xl font-semibold text-blue-600",children:a.value})]},a.label))})}function i({employee:a}){let c=({label:a,value:c})=>(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-500",children:a}),(0,b.jsx)("span",{children:c||"â€”"})]});return(0,b.jsxs)("div",{className:"border rounded-lg p-4 bg-white",children:[(0,b.jsx)("h3",{className:"font-medium mb-4",children:"Profile Information"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(c,{label:"Name",value:a.name}),(0,b.jsx)(c,{label:"Employee Id",value:a.employeeId}),(0,b.jsx)(c,{label:"Designation",value:a.designationName}),(0,b.jsx)(c,{label:"Department",value:a.departmentName}),(0,b.jsx)(c,{label:"Gender",value:a.gender}),(0,b.jsx)(c,{label:"Date of Birth",value:a.birthday}),(0,b.jsx)(c,{label:"Blood Group",value:a.bloodGroup}),(0,b.jsx)(c,{label:"Email",value:a.email}),(0,b.jsx)(c,{label:"Mobile",value:a.mobile}),(0,b.jsx)(c,{label:"Language",value:a.language}),(0,b.jsx)(c,{label:"Employment Type",value:a.employmentType}),(0,b.jsx)(c,{label:"Joining Date",value:a.joiningDate})]})]})}function j({about:a}){return(0,b.jsxs)("div",{className:"border rounded-lg p-4 bg-white",children:[(0,b.jsx)("h3",{className:"font-medium mb-2",children:"About"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a||"â€”"})]})}function k({activeTab:a,onChange:c}){return(0,b.jsx)("div",{className:"border-b flex gap-6",children:[{key:"profile",label:"Profile"},{key:"work",label:"Work"},{key:"documents",label:"Documents"},{key:"emergency",label:"Emergency Contacts"},{key:"promotions",label:"Promotions"}].map(d=>(0,b.jsx)("button",{onClick:()=>c(d.key),className:`pb-2 text-sm font-medium transition
            ${a===d.key?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:d.label},d.key))})}var l=a.i(457580),m=a.i(922250),n=a.i(28270);let o=async a=>{let b=localStorage.getItem("accessToken");if(!b)throw Error("No token");let c=await fetch(a,{headers:{Authorization:`Bearer ${b}`}});if(!c.ok)throw Error("Failed to fetch appreciations");return c.json()};function p({employeeId:a}){let{data:c,isLoading:d,error:f}=(0,e.default)(a?`https://6jnqmj85-80.inc1.devtunnels.ms/employee/appreciations/employee/${a}`:null,o,{revalidateOnFocus:!1});return d?(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Loading appreciationsâ€¦"}):f?(0,b.jsx)("div",{className:"text-sm text-red-600",children:"Failed to load appreciations"}):c&&0!==c.length?(0,b.jsxs)("div",{className:"bg-white border rounded-lg overflow-hidden",children:[(0,b.jsx)("h3",{className:"px-4 py-3 text-sm font-semibold border-b",children:"Appreciations"}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{className:"bg-blue-50 text-gray-600",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-2 text-left",children:"Given To"}),(0,b.jsx)("th",{className:"px-4 py-2 text-left",children:"Award Name"}),(0,b.jsx)("th",{className:"px-4 py-2 text-left",children:"Given On"})]})}),(0,b.jsx)("tbody",{className:"divide-y",children:c.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsxs)("td",{className:"px-4 py-3",children:[(0,b.jsx)("div",{className:"font-medium",children:a.givenToEmployeeName}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a.givenToEmployeeId})]}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("span",{className:"inline-flex items-center gap-1",children:["ðŸ… ",a.awardTitle]})}),(0,b.jsx)("td",{className:"px-4 py-3",children:a.date?new Date(a.date).toLocaleDateString():"--"})]},a.id))})]})})]}):(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"No appreciations found"})}function q({open:a,onClose:c,employeeId:e}){let[f,g]=(0,d.useState)(!1),[h,i]=(0,d.useState)({year:new Date().getFullYear(),month:new Date().getMonth()+1,clockInTime:"09:00:00",clockOutTime:"17:00:00",clockInLocation:"Office",clockOutLocation:"Office",clockInWorkingFrom:"Office",clockOutWorkingFrom:"Office",late:!1,halfDay:!1,overwrite:!1});if(!a)return null;let j=async()=>{g(!0);try{let a=localStorage.getItem("accessToken");if(!a)throw Error("No token");let b={year:h.year,month:h.month,employeeIds:[e],payload:{clockInTime:h.clockInTime,clockInLocation:h.clockInLocation,clockInWorkingFrom:h.clockInWorkingFrom,clockOutTime:h.clockOutTime,clockOutLocation:h.clockOutLocation,clockOutWorkingFrom:h.clockOutWorkingFrom,late:h.late,halfDay:h.halfDay},overwrite:h.overwrite,markedBy:e};if(!(await fetch("https://6jnqmj85-80.inc1.devtunnels.ms/employee/attendance/mark/month",{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(b)})).ok)throw Error("Failed to mark attendance");c()}catch(a){alert(a.message)}finally{g(!1)}};return(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:(0,b.jsxs)("div",{className:"bg-white w-full max-w-3xl rounded-lg shadow-lg",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Mark Attendance"}),(0,b.jsx)("button",{onClick:c,className:"text-xl",children:"Ã—"})]}),(0,b.jsx)("div",{className:"p-6 space-y-6",children:(0,b.jsxs)("div",{className:"border rounded-lg p-4 space-y-4",children:[(0,b.jsx)("h3",{className:"font-medium text-sm",children:"Attendance Details"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(r,{label:"Year *",children:(0,b.jsx)("input",{type:"number",value:h.year,onChange:a=>i({...h,year:Number(a.target.value)}),className:"input"})}),(0,b.jsx)(r,{label:"Month *",children:(0,b.jsx)("select",{value:h.month,onChange:a=>i({...h,month:Number(a.target.value)}),className:"input",children:Array.from({length:12}).map((a,c)=>(0,b.jsx)("option",{value:c+1,children:new Date(0,c).toLocaleString("default",{month:"long"})},c))})}),(0,b.jsx)(r,{label:"Clock In *",children:(0,b.jsx)("input",{type:"time",value:h.clockInTime,onChange:a=>i({...h,clockInTime:a.target.value}),className:"input"})}),(0,b.jsx)(r,{label:"Clock Out *",children:(0,b.jsx)("input",{type:"time",value:h.clockOutTime,onChange:a=>i({...h,clockOutTime:a.target.value}),className:"input"})}),(0,b.jsx)(r,{label:"Location *",children:(0,b.jsxs)("select",{value:h.clockInLocation,onChange:a=>i({...h,clockInLocation:a.target.value}),className:"input",children:[(0,b.jsx)("option",{children:"Office"}),(0,b.jsx)("option",{children:"Remote"})]})}),(0,b.jsx)(r,{label:"Working From *",children:(0,b.jsxs)("select",{value:h.clockInWorkingFrom,onChange:a=>i({...h,clockInWorkingFrom:a.target.value}),className:"input",children:[(0,b.jsx)("option",{children:"Office"}),(0,b.jsx)("option",{children:"Home"})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(s,{label:"Late",value:h.late,onChange:a=>i({...h,late:a})}),(0,b.jsx)(s,{label:"Half Day",value:h.halfDay,onChange:a=>i({...h,halfDay:a})})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)("input",{type:"checkbox",checked:h.overwrite,onChange:a=>i({...h,overwrite:a.target.checked})}),"Attendance Overwrite"]})]})}),(0,b.jsxs)("div",{className:"flex justify-end gap-4 px-6 py-4 border-t",children:[(0,b.jsx)("button",{onClick:c,className:"px-4 py-2 border rounded",children:"Cancel"}),(0,b.jsx)("button",{onClick:j,disabled:f,className:"px-6 py-2 bg-blue-600 text-white rounded",children:f?"Updating...":"Update"})]})]})})}let r=({label:a,children:c})=>(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)("label",{className:"text-xs text-gray-600",children:a}),c]}),s=({label:a,value:c,onChange:d})=>(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("span",{className:"text-sm",children:a}),(0,b.jsxs)("label",{className:"flex gap-1",children:[(0,b.jsx)("input",{type:"radio",checked:c,onChange:()=>d(!0)}),"Yes"]}),(0,b.jsxs)("label",{className:"flex gap-1",children:[(0,b.jsx)("input",{type:"radio",checked:!c,onChange:()=>d(!1)}),"No"]})]});function t({open:a,onClose:c,data:d}){if(!a||!d)return null;let e=a=>a?new Date(`1970-01-01T${a}`).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"--",f=d.clockInTime&&d.clockOutTime?function(a,b){let c=new Date(`1970-01-01T${a}`),d=(new Date(`1970-01-01T${b}`).getTime()-c.getTime())/1e3,e=Math.floor(d/3600),f=Math.floor(d%3600/60);return`${e}h ${f}m`}(d.clockInTime,d.clockOutTime):"â€”";return(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:(0,b.jsxs)("div",{className:"bg-white w-full max-w-4xl rounded-xl shadow-lg",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center px-6 py-4 border-b",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Attendance Details"}),(0,b.jsx)("button",{onClick:c,className:"text-2xl",children:"Ã—"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-6 p-6",children:[(0,b.jsxs)("div",{className:"border rounded-lg p-4 space-y-4",children:[(0,b.jsxs)("h3",{className:"font-medium",children:["Date â€“ ",d.date," (",new Date(d.date).toLocaleDateString("en-US",{weekday:"long"}),")"]}),(0,b.jsx)(u,{label:"Clock In",value:e(d.clockInTime)}),(0,b.jsx)("div",{className:"flex justify-center py-6",children:(0,b.jsx)("div",{className:"w-32 h-32 rounded-full border-4 border-blue-500 flex items-center justify-center text-lg font-semibold",children:f})}),(0,b.jsx)(u,{label:"Clock Out",value:e(d.clockOutTime)})]}),(0,b.jsxs)("div",{className:"border rounded-lg p-4 space-y-6",children:[(0,b.jsx)("h3",{className:"font-medium",children:"Activity"}),(0,b.jsx)(v,{title:"Clock In",time:e(d.clockInTime),location:d.clockInLocation,workingFrom:d.clockInWorkingFrom,late:d.late}),(0,b.jsx)(v,{title:"Clock Out",time:d.clockOutTime?e(d.clockOutTime):"Did not clock out",location:d.clockOutLocation,workingFrom:d.clockOutWorkingFrom}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 pt-2 text-sm",children:[d.holiday&&w("Holiday","â­"),d.leave&&w("Leave","â›”"),d.late&&w("Late","â°"),d.halfDay&&w("Half Day","Â½"),d.isPresent&&w("Present","âœ”")]})]})]})]})})}let u=({label:a,value:c})=>(0,b.jsxs)("div",{className:"bg-gray-50 border rounded-lg p-3",children:[(0,b.jsx)("div",{className:"text-sm text-gray-500",children:a}),(0,b.jsx)("div",{className:"font-medium",children:c})]}),v=({title:a,time:c,location:d,workingFrom:e,late:f})=>(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a}),(0,b.jsxs)("div",{className:"text-sm text-gray-600 flex gap-3 items-center",children:["â± ",c,d&&(0,b.jsxs)(b.Fragment,{children:["ðŸ“ ",d]}),e&&(0,b.jsxs)(b.Fragment,{children:["(",e,")"]}),f&&(0,b.jsx)("span",{className:"text-red-500",children:"âš  Late"})]})]}),w=(a,c)=>(0,b.jsxs)("span",{className:"flex items-center gap-1 px-2 py-1 border rounded text-xs",children:[c," ",a]}),x=async a=>{let b=localStorage.getItem("accessToken");if(!b)throw Error("No token");let c=await fetch(a,{headers:{Authorization:`Bearer ${b}`}});if(!c.ok)throw Error("Failed to fetch attendance");return c.json()},y={PRESENT:(0,b.jsx)("span",{className:"text-green-600",children:"âœ”"}),HOLIDAY:(0,b.jsx)("span",{className:"text-yellow-500",children:"â˜…"}),LEAVE:(0,b.jsx)("span",{className:"text-red-500",children:"â›”"})};function z({employeeId:a}){let c=new Date,[f,g]=(0,d.useState)(c.getMonth()+1),[h,i]=(0,d.useState)(c.getFullYear()),[j,k]=(0,d.useState)(!1),[l,m]=(0,d.useState)(null),[n,o]=(0,d.useState)(!1),{data:p,isLoading:r}=(0,e.default)(`https://6jnqmj85-80.inc1.devtunnels.ms/employee/attendance/${a}/all-saved`,x,{revalidateOnFocus:!1}),s=(0,d.useMemo)(()=>{let a={};return p?.forEach(b=>{a[b.date]=b}),a},[p]),u=new Date(h,f,0).getDate();return r?(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Loading attendanceâ€¦"}):(0,b.jsxs)("div",{className:"bg-white border rounded-lg p-4 space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("button",{onClick:()=>k(!0),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm",children:"+ Mark Attendance"}),(0,b.jsx)(q,{open:j,onClose:()=>k(!1),employeeId:a}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)("select",{value:f,onChange:a=>g(Number(a.target.value)),className:"border rounded px-2 py-1",children:Array.from({length:12}).map((a,c)=>(0,b.jsx)("option",{value:c+1,children:new Date(0,c).toLocaleString("default",{month:"long"})},c))}),(0,b.jsx)("select",{value:h,onChange:a=>i(Number(a.target.value)),className:"border rounded px-2 py-1",children:[2024,2025,2026].map(a=>(0,b.jsx)("option",{children:a},a))})]})]}),(0,b.jsxs)("div",{className:"flex gap-4 text-xs text-gray-600",children:[(0,b.jsx)("span",{className:"flex items-center gap-1",children:"â˜… Holiday"}),(0,b.jsx)("span",{className:"flex items-center gap-1",children:"âœ” Present"}),(0,b.jsx)("span",{className:"flex items-center gap-1",children:"â›” Leave"}),(0,b.jsx)("span",{className:"flex items-center gap-1",children:"â° Late"}),(0,b.jsx)("span",{className:"flex items-center gap-1",children:"Â½ Half Day"})]}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full border text-xs",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-3 py-2 text-left",children:"Employee"}),Array.from({length:u}).map((a,c)=>(0,b.jsx)("th",{className:"px-2 py-2 text-center",children:c+1},c)),(0,b.jsx)("th",{className:"px-3 py-2",children:"Total"})]})}),(0,b.jsx)("tbody",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"px-3 py-2 font-medium",children:a}),Array.from({length:u}).map((a,c)=>{let d=String(c+1).padStart(2,"0"),e=s[`${h}-${String(f).padStart(2,"0")}-${d}`];return(0,b.jsx)("td",{className:"px-2 py-2 text-center",children:e?(0,b.jsxs)("button",{onClick:()=>{m(e),o(!0)},className:"flex flex-col items-center text-xs cursor-pointer hover:scale-110 transition",children:[y[e.status]||"--",e.late&&(0,b.jsx)("span",{children:"â°"}),e.halfDay&&(0,b.jsx)("span",{children:"Â½"})]}):"--"},c)}),(0,b.jsxs)("td",{className:"px-3 py-2 text-center font-semibold",children:[Object.values(s).filter(a=>"PRESENT"===a.status&&a.date.startsWith(`${h}-${String(f).padStart(2,"0")}`)).length,"/",u]})]})})]})}),(0,b.jsx)(t,{open:n,onClose:()=>o(!1),data:l})]})}let A=async a=>{let b=localStorage.getItem("accessToken");if(!b)throw Error("No token");let c=await fetch(a,{headers:{Authorization:`Bearer ${b}`}});if(!c.ok)throw Error("Failed to fetch leave quota");return c.json()};function B({employeeId:a}){let{data:c,isLoading:d,error:f}=(0,e.default)(`https://6jnqmj85-80.inc1.devtunnels.ms/employee/leave-quota/employee/${a}`,A,{revalidateOnFocus:!1});return d?(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Loading leave quotaâ€¦"}):f?(0,b.jsx)("div",{className:"text-sm text-red-600",children:"Failed to load leave quota"}):c&&0!==c.length?(0,b.jsxs)("div",{className:"bg-white border rounded-lg overflow-hidden",children:[(0,b.jsx)("h3",{className:"px-4 py-3 font-semibold text-sm border-b",children:"Leaves Quota"}),(0,b.jsxs)("table",{className:"min-w-full text-sm",children:[(0,b.jsx)("thead",{className:"bg-blue-50 text-gray-700",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-2 text-left",children:"Leave Type"}),(0,b.jsx)("th",{className:"px-4 py-2 text-center",children:"No. of Leaves"}),(0,b.jsx)("th",{className:"px-4 py-2 text-center",children:"Monthly Limit"}),(0,b.jsx)("th",{className:"px-4 py-2 text-center",children:"Total Leaves Taken"}),(0,b.jsx)("th",{className:"px-4 py-2 text-center",children:"Over Utilized"}),(0,b.jsx)("th",{className:"px-4 py-2 text-center",children:"Remaining Leaves"})]})}),(0,b.jsx)("tbody",{children:c.map(a=>(0,b.jsxs)("tr",{className:"border-t",children:[(0,b.jsx)("td",{className:"px-4 py-2 font-medium capitalize",children:(0,b.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)("span",{className:`h-2 w-2 rounded-full ${"EARNED"===a.leaveType?"bg-green-500":"SICK"===a.leaveType?"bg-red-500":"bg-blue-500"}`}),a.leaveType.toLowerCase()]})}),(0,b.jsx)("td",{className:"px-4 py-2 text-center",children:a.totalLeaves??"--"}),(0,b.jsx)("td",{className:"px-4 py-2 text-center",children:a.monthlyLimit??"--"}),(0,b.jsx)("td",{className:"px-4 py-2 text-center",children:a.totalTaken??"--"}),(0,b.jsx)("td",{className:"px-4 py-2 text-center",children:a.overUtilized??"--"}),(0,b.jsx)("td",{className:"px-4 py-2 text-center font-semibold",children:a.remainingLeaves??"--"})]},a.id))})]})]}):(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"No leave quota found"})}function C({open:a,onClose:c,employeeId:e,onSuccess:f}){let[g,h]=(0,d.useState)(!1),[i,j]=(0,d.useState)(null),[k,l]=(0,d.useState)({leaveType:"SICK",durationType:"FULL_DAY",singleDate:"",reason:""});if(!a)return null;let m=async()=>{h(!0);let a=localStorage.getItem("accessToken"),b={employeeIds:[e],leaveType:k.leaveType,durationType:k.durationType,singleDate:k.singleDate,reason:k.reason,status:"APPROVED"},d=new FormData;d.append("leaveData",JSON.stringify(b)),i&&Array.from(i).forEach(a=>d.append("documents",a)),await fetch("https://6jnqmj85-80.inc1.devtunnels.ms/employee/api/leaves/admin/apply",{method:"POST",headers:{Authorization:`Bearer ${a}`},body:d}),h(!1),f(),c()};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:(0,b.jsxs)("div",{className:"bg-white w-[420px] rounded-lg p-4 space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold",children:"Apply Leave"}),(0,b.jsxs)("select",{className:"border rounded px-3 py-2 w-full",value:k.leaveType,onChange:a=>l({...k,leaveType:a.target.value}),children:[(0,b.jsx)("option",{children:"SICK"}),(0,b.jsx)("option",{children:"CASUAL"}),(0,b.jsx)("option",{children:"EARNED"})]}),(0,b.jsx)("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:k.singleDate,onChange:a=>l({...k,singleDate:a.target.value})}),(0,b.jsx)("textarea",{placeholder:"Reason",className:"border rounded px-3 py-2 w-full",value:k.reason,onChange:a=>l({...k,reason:a.target.value})}),(0,b.jsx)("input",{type:"file",multiple:!0,onChange:a=>j(a.target.files)}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)("button",{onClick:c,className:"px-4 py-2 border rounded",children:"Cancel"}),(0,b.jsx)("button",{disabled:g,onClick:m,className:"px-4 py-2 bg-blue-600 text-white rounded",children:g?"Savingâ€¦":"Apply"})]})]})})}let D="https://6jnqmj85-80.inc1.devtunnels.ms",E=async a=>{let b=localStorage.getItem("accessToken");if(!b)throw Error("No token");let c=await fetch(a,{headers:{Authorization:`Bearer ${b}`}});if(!c.ok)throw Error("Failed to fetch leaves");return c.json()};function F({employeeId:a}){let[c,f]=(0,d.useState)(!1),{data:g,mutate:h,isLoading:i}=(0,e.default)(`${D}/employee/api/leaves/employee/${a}`,E,{revalidateOnFocus:!1}),j=async a=>{if(!confirm("Delete this leave?"))return;let b=localStorage.getItem("accessToken");await fetch(`${D}/employee/api/leaves/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}}),h()};return i?(0,b.jsx)("div",{className:"text-sm",children:"Loading leavesâ€¦"}):(0,b.jsxs)("div",{className:"bg-white border rounded-lg p-4 space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h2",{className:"font-semibold",children:"Leaves"}),(0,b.jsx)("button",{onClick:()=>f(!0),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm",children:"+ Add Leave"})]}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full text-sm border",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-3 py-2",children:"Type"}),(0,b.jsx)("th",{className:"px-3 py-2",children:"Duration"}),(0,b.jsx)("th",{className:"px-3 py-2",children:"Date"}),(0,b.jsx)("th",{className:"px-3 py-2",children:"Reason"}),(0,b.jsx)("th",{className:"px-3 py-2",children:"Status"}),(0,b.jsx)("th",{className:"px-3 py-2",children:"Paid"}),(0,b.jsx)("th",{className:"px-3 py-2",children:"Action"})]})}),(0,b.jsxs)("tbody",{children:[g?.map(a=>(0,b.jsxs)("tr",{className:"border-t",children:[(0,b.jsx)("td",{className:"px-3 py-2",children:a.leaveType}),(0,b.jsx)("td",{className:"px-3 py-2",children:a.durationType}),(0,b.jsx)("td",{className:"px-3 py-2",children:a.singleDate||a.startDate&&`${a.startDate} â†’ ${a.endDate}`}),(0,b.jsx)("td",{className:"px-3 py-2",children:a.reason}),(0,b.jsx)("td",{className:"px-3 py-2",children:(0,b.jsx)("span",{className:"px-2 py-0.5 rounded bg-green-100 text-green-700 text-xs",children:a.status})}),(0,b.jsx)("td",{className:"px-3 py-2",children:a.isPaid?"Yes":"No"}),(0,b.jsx)("td",{className:"px-3 py-2",children:(0,b.jsx)("button",{onClick:()=>j(a.id),className:"text-red-600 text-xs",children:"Delete"})})]},a.id)),!g?.length&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:7,className:"text-center py-6 text-gray-400",children:"No leaves found"})})]})]})}),(0,b.jsx)(C,{open:c,onClose:()=>f(!1),employeeId:a,onSuccess:h})]})}var G=a.i(54014);let H=async a=>{let b=localStorage.getItem("accessToken");if(!b)throw Error("No token");let c=await fetch(a,{headers:{Authorization:`Bearer ${b}`}});if(!c.ok)throw Error("Failed to fetch employee");return c.json()};function I(){let{id:a}=(0,c.useParams)(),[f,o]=(0,d.useState)("profile"),{data:q,isLoading:r,error:s}=(0,e.default)(a?`https://6jnqmj85-80.inc1.devtunnels.ms/employee/${a}`:null,H,{revalidateOnFocus:!1});return r?(0,b.jsx)("div",{className:"p-6",children:"Loading employeeâ€¦"}):s?(0,b.jsx)("div",{className:"p-6 text-red-600",children:"Failed to load employee"}):q?(0,b.jsxs)("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold",children:q.name}),(0,b.jsx)(k,{activeTab:f,onChange:o}),"profile"===f&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-4",children:[(0,b.jsx)("div",{className:"lg:col-span-2 border ",children:(0,b.jsx)(g,{employee:q})}),(0,b.jsx)("div",{className:"lg:col-span-3",children:(0,b.jsx)(h,{})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,b.jsx)("div",{className:"lg:col-span-2",children:(0,b.jsx)(i,{employee:q})}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(j,{about:q.about}),(0,b.jsx)(p,{employeeId:q.employeeId})]})]}),(0,b.jsx)(z,{employeeId:q.employeeId}),(0,b.jsx)(B,{employeeId:q.employeeId}),(0,b.jsx)(F,{employeeId:q.employeeId})]}),"work"===f&&(0,b.jsx)(G.default,{employeeId:q.employeeId}),"documents"===f&&(0,b.jsx)(l.default,{employeeId:q.employeeId}),"emergency"===f&&(0,b.jsx)(m.default,{employeeId:q.employeeId}),"promotions"===f&&(0,b.jsx)(n.default,{employeeId:q.employeeId})]}):(0,b.jsx)("div",{className:"p-6",children:"Employee not found"})}}];

//# sourceMappingURL=src_app_%28employee%29_employees_hr_employee_%5Bid%5D_page_tsx_a812e97d._.js.map