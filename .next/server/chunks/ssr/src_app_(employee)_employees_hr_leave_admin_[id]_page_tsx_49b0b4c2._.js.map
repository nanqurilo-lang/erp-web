{"version":3,"sources":["turbopack:///[project]/src/app/(employee)/employees/hr/leave/admin/[id]/page.tsx"],"sourcesContent":["// app/hr/leave/[id]/page.tsx\n\"use client\";\nimport { useEffect, useState } from \"react\";\nimport { useParams } from \"next/navigation\";\nimport Link from \"next/link\";\n\ninterface Leave {\n  id: number;\n  employeeId: string;\n  employeeName: string;\n  leaveType: string;\n  durationType: string;\n  startDate: string | null;\n  endDate: string | null;\n  singleDate: string | null;\n  reason: string;\n  status: string;\n  rejectionReason: string | null;\n  approvedByName: string | null;\n  isPaid: boolean;\n  approvedAt: string | null;\n  rejectedAt: string | null;\n  documentUrls: string[];\n  createdAt: string;\n  updatedAt: string;\n}\n\nconst BASE_URL = process.env.NEXT_PUBLIC_MAIN;\n\nexport default function LeaveDetail() {\n  const params = useParams();\n  const id = params.id as string;\n  const [leave, setLeave] = useState<Leave | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchLeave = async () => {\n      try {\n        const token = localStorage.getItem(\"accessToken\");\n        if (!token) {\n          setError(\"No access token found.\");\n          setLoading(false);\n          return;\n        }\n\n        const res = await fetch(`${BASE_URL}/employee/api/leaves/${id}`, {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n\n        if (!res.ok) {\n          throw new Error(\"Failed to fetch leave details.\");\n        }\n\n        const data = await res.json();\n        setLeave(data);\n      } catch (err: any) {\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (id) {\n      fetchLeave();\n    }\n  }, [id]);\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center h-64\">\n        <p className=\"text-gray-500\">Loading...</p>\n      </div>\n    );\n  }\n\n  if (error || !leave) {\n    return (\n      <div className=\"p-6 bg-white rounded-lg shadow-md\">\n        <div className=\"flex justify-center items-center h-64\">\n          <p className=\"text-red-500\">{error || \"Leave not found.\"}</p>\n        </div>\n        <Link href=\"/hr/leaves\" className=\"block text-center mt-4 text-blue-600 hover:underline\">\n          Back to Leaves List\n        </Link>\n      </div>\n    );\n  }\n\n  // Get display dates\n  const getDisplayDates = () => {\n    if (leave.singleDate) {\n      return leave.singleDate;\n    }\n    if (leave.startDate && leave.endDate) {\n      return `${leave.startDate} to ${leave.endDate}`;\n    }\n    return \"N/A\";\n  };\n\n  // Get status color class\n  const getStatusClass = (status: string) => {\n    switch (status) {\n      case \"APPROVED\":\n        return \"bg-green-100 text-green-800\";\n      case \"REJECTED\":\n        return \"bg-red-100 text-red-800\";\n      case \"PENDING\":\n        return \"bg-yellow-100 text-yellow-800\";\n      default:\n        return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  return (\n    <div className=\"p-6 bg-white rounded-lg shadow-md max-w-2xl mx-auto\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-2xl font-bold text-gray-800\">Leave Details</h1>\n        <Link\n          href=\"/hr/leaves\"\n          className=\"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors\"\n        >\n          Back to List\n        </Link>\n      </div>\n\n      <div className=\"space-y-4\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-500 mb-1\">Employee</label>\n            <p className=\"text-lg font-semibold text-gray-900\">{leave.employeeName}</p>\n            <p className=\"text-sm text-gray-500\">{leave.employeeId}</p>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-500 mb-1\">Leave Type</label>\n            <p className=\"text-lg font-semibold text-gray-900\">{leave.leaveType}</p>\n            <p className=\"text-sm text-gray-500\">{leave.durationType}</p>\n          </div>\n        </div>\n\n        <div>\n          <label className=\"block text-sm font-medium text-gray-500 mb-1\">Dates</label>\n          <p className=\"text-lg text-gray-900\">{getDisplayDates()}</p>\n        </div>\n\n        <div>\n          <label className=\"block text-sm font-medium text-gray-500 mb-1\">Reason</label>\n          <p className=\"text-gray-900\">{leave.reason}</p>\n        </div>\n\n        <div>\n          <label className=\"block text-sm font-medium text-gray-500 mb-1\">Status</label>\n          <span\n            className={`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${getStatusClass(\n              leave.status\n            )}`}\n          >\n            {leave.status}\n          </span>\n        </div>\n\n        {leave.status === \"REJECTED\" && leave.rejectionReason && (\n          <div>\n            <label className=\"block text-sm font-medium text-gray-500 mb-1\">Rejection Reason</label>\n            <p className=\"text-red-600\">{leave.rejectionReason}</p>\n            {leave.rejectedAt && (\n              <p className=\"text-xs text-gray-500 mt-1\">Rejected at: {new Date(leave.rejectedAt).toLocaleString()}</p>\n            )}\n          </div>\n        )}\n\n        {leave.status === \"APPROVED\" && (\n          <div>\n            {leave.approvedByName && (\n              <div>\n                <label className=\"block text-sm font-medium text-gray-500 mb-1\">Approved By</label>\n                <p className=\"text-green-600\">{leave.approvedByName}</p>\n              </div>\n            )}\n            {leave.approvedAt && (\n              <div>\n                <label className=\"block text-sm font-medium text-gray-500 mb-1\">Approved At</label>\n                <p className=\"text-xs text-gray-500\">{new Date(leave.approvedAt).toLocaleString()}</p>\n              </div>\n            )}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-500 mb-1\">Paid</label>\n              <p className={leave.isPaid ? \"text-green-600\" : \"text-red-600\"}>\n                {leave.isPaid ? \"Yes\" : \"No\"}\n              </p>\n            </div>\n          </div>\n        )}\n\n        {leave.documentUrls.length > 0 && (\n          <div>\n            <label className=\"block text-sm font-medium text-gray-500 mb-2\">Documents</label>\n            <ul className=\"space-y-1\">\n              {leave.documentUrls.map((url, index) => (\n                <li key={index}>\n                  <a\n                    href={url}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"text-blue-600 hover:underline text-sm\"\n                  >\n                    Document {index + 1}\n                  </a>\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-xs text-gray-500\">\n          <div>\n            <label>Created At</label>\n            <p>{new Date(leave.createdAt).toLocaleString()}</p>\n          </div>\n          <div>\n            <label>Updated At</label>\n            <p>{new Date(leave.updatedAt).toLocaleString()}</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}