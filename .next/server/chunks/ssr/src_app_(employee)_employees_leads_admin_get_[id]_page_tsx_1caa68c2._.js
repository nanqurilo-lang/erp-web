module.exports=[340729,a=>{"use strict";a.s(["default",()=>n]);var b=a.i(187924),c=a.i(50944),d=a.i(972596),e=a.i(572131),f=a.i(591119),g=a.i(699570),h=a.i(786304),i=a.i(400210);let j="https://6jnqmj85-80.inc1.devtunnels.ms",k=`${j}/employee/all?page=0&size=20`,l=async a=>{let b=localStorage.getItem("accessToken");if(!b)throw Error("No access token found. Please log in.");let c=await fetch(a,{cache:"no-store",headers:{Authorization:`Bearer ${b}`,Accept:"application/json"}});if(!c.ok){let a="Failed to load data.";try{let b=await c.json();a=b?.message||b?.error||a}catch{a=await c.text()||a}throw Error(a)}return c.json()};function m(a){return a&&"null"!==a?a:"--"}function n({params:a}){var n;let o=(0,c.useRouter)(),{data:p,error:q,isLoading:r,mutate:s}=(0,d.default)(`/api/leads/admin/get/${a.id}`,l,{refreshInterval:3e4,revalidateOnFocus:!0}),[t,u]=(0,e.useState)("profile"),[v,w]=(0,e.useState)(!1),x=(0,e.useRef)(null),[y,z]=(0,e.useState)(!1),{data:A,error:B,isLoading:C,mutate:D}=(0,d.default)("deals"===t?`${j}/deals/lead/${a.id}`:null,l,{refreshInterval:3e4,revalidateOnFocus:!0}),{data:E}=(0,d.default)(k,l,{refreshInterval:0});E&&Array.isArray(E.content)&&E.content.map(a=>({employeeId:a.employeeId,name:a.name,designation:a.designationName??null,department:a.departmentName??null,profileUrl:a.profilePictureUrl??null}));let[F,G]=(0,e.useState)(!1),[H,I]=(0,e.useState)(null),[J,K]=(0,e.useState)(null);(0,e.useEffect)(()=>{let a=a=>{if(!x.current)return;let b=a.target;v&&!x.current.contains(b)&&w(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[v]);let[L,M]=(0,e.useState)([]),[N,O]=(0,e.useState)(!1),[P,Q]=(0,e.useState)(null),[R,S]=(0,e.useState)(!1),[T,U]=(0,e.useState)(null),[V,W]=(0,e.useState)(null),[X,Y]=(0,e.useState)(null),Z=(0,e.useRef)(null),[$,_]=(0,e.useState)(null),aa=async()=>{O(!0),Q(null);try{let b,c=localStorage.getItem("accessToken");if(!c)throw Error("No access token.");let d=await fetch((b=a.id,`${j}/leads/${b}/notes`),{headers:{Authorization:`Bearer ${c}`}});if(!d.ok)throw Error(await d.text());let e=await d.json();M(Array.isArray(e)?e:[])}catch(a){Q(a?.message??"Failed to load notes")}finally{O(!1)}};return(0,e.useEffect)(()=>{"notes"===t&&aa()},[t,a.id]),(0,e.useEffect)(()=>{if(null==V)return;let a=a=>{let b=a.target;Z.current&&(Z.current.contains(b)||(W(null),Y(null)))},b=()=>{W(null),Y(null)},c=()=>{W(null),Y(null)};return document.addEventListener("mousedown",a),window.addEventListener("scroll",b,!0),window.addEventListener("resize",c),()=>{document.removeEventListener("mousedown",a),window.removeEventListener("scroll",b,!0),window.removeEventListener("resize",c)}},[V]),(0,b.jsx)("main",{className:"min-h-screen bg-gray-50",children:(0,b.jsxs)("div",{className:"container mx-auto max-w-6xl px-4 py-8",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:()=>o.back(),"aria-label":"Back",children:(0,b.jsx)(i.ArrowLeft,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl md:text-3xl font-semibold",children:p?.name??"—"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Detailed information about the selected lead."})]})]}),(0,b.jsx)(f.Card,{className:"p-6",children:r?(0,b.jsx)("div",{className:"py-12 text-center text-muted-foreground",children:"Loading lead details…"}):q?(0,b.jsxs)("div",{className:"py-12 text-center",children:[(0,b.jsx)("p",{className:"text-destructive",children:"Failed to load lead details."}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:q?.message}),(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)(g.Button,{variant:"ghost",onClick:()=>o.back(),children:"Back to Leads"})})]}):p?(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"flex items-start justify-between mb-6",children:(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"profile"===t?"Profile Information":"deals"===t?"Deals":"Notes"})}),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"rounded-lg border p-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("dl",{className:"hidden md:block md:col-span-1 space-y-4 text-sm text-muted-foreground",children:[(0,b.jsx)("dt",{children:"Name"}),(0,b.jsx)("dt",{children:"Email"}),(0,b.jsx)("dt",{children:"Lead Owner"}),(0,b.jsx)("dt",{children:"Source"}),(0,b.jsx)("dt",{children:"Company Name"}),(0,b.jsx)("dt",{children:"Website"}),(0,b.jsx)("dt",{children:"Mobile"}),(0,b.jsx)("dt",{children:"Office Phone Number"}),(0,b.jsx)("dt",{children:"City"}),(0,b.jsx)("dt",{children:"State"}),(0,b.jsx)("dt",{children:"Country"}),(0,b.jsx)("dt",{children:"Postal Code"}),(0,b.jsx)("dt",{children:"Address"})]}),(0,b.jsx)("div",{className:"md:col-span-2",children:(0,b.jsxs)("div",{className:"grid gap-y-3",children:[(0,b.jsxs)("div",{className:"flex items-start gap-6",children:[(0,b.jsx)("div",{className:"w-48 md:hidden text-sm text-muted-foreground",children:"Name"}),(0,b.jsx)("div",{className:"text-sm",children:m(p?.name)})]}),(0,b.jsxs)("div",{className:"flex items-start gap-6",children:[(0,b.jsx)("div",{className:"w-48 md:hidden text-sm text-muted-foreground",children:"Email"}),(0,b.jsx)("div",{className:"text-sm",children:m(p?.email)})]}),(0,b.jsxs)("div",{className:"flex items-start gap-6",children:[(0,b.jsx)("div",{className:"w-48 md:hidden text-sm text-muted-foreground",children:"Lead Owner"}),(0,b.jsx)("div",{className:"text-sm",children:p?.leadOwnerMeta?.name??p?.leadOwner??"--"})]}),(0,b.jsxs)("div",{className:"flex items-start gap-6",children:[(0,b.jsx)("div",{className:"w-48 md:hidden text-sm text-muted-foreground",children:"Source"}),(0,b.jsx)("div",{className:"text-sm",children:m(p?.leadSource)})]}),(0,b.jsxs)("div",{className:"flex items-start gap-6",children:[(0,b.jsx)("div",{className:"w-48 md:hidden text-sm text-muted-foreground",children:"Company Name"}),(0,b.jsx)("div",{className:"text-sm",children:m(p?.companyName)})]}),(0,b.jsxs)("div",{className:"flex items-start gap-6",children:[(0,b.jsx)("div",{className:"w-48 md:hidden text-sm text-muted-foreground",children:"Website"}),(0,b.jsx)("div",{className:"text-sm",children:m(p?.officialWebsite)})]}),(0,b.jsxs)("div",{className:"flex items-start gap-6",children:[(0,b.jsx)("div",{className:"w-48 md:hidden text-sm text-muted-foreground",children:"Mobile"}),(0,b.jsx)("div",{className:"text-sm",children:m(p?.mobileNumber)})]}),(0,b.jsxs)("div",{className:"flex items-start gap-6",children:[(0,b.jsx)("div",{className:"w-48 md:hidden text-sm text-muted-foreground",children:"Office Phone Number"}),(0,b.jsx)("div",{className:"text-sm",children:m(p?.officePhone)})]}),(0,b.jsxs)("div",{className:"flex items-start gap-6",children:[(0,b.jsx)("div",{className:"w-48 md:hidden text-sm text-muted-foreground",children:"City"}),(0,b.jsx)("div",{className:"text-sm",children:m(p?.city)})]}),(0,b.jsxs)("div",{className:"flex items-start gap-6",children:[(0,b.jsx)("div",{className:"w-48 md:hidden text-sm text-muted-foreground",children:"State"}),(0,b.jsx)("div",{className:"text-sm",children:m(p?.state)})]}),(0,b.jsxs)("div",{className:"flex items-start gap-6",children:[(0,b.jsx)("div",{className:"w-48 md:hidden text-sm text-muted-foreground",children:"Country"}),(0,b.jsx)("div",{className:"text-sm",children:m(p?.country)})]}),(0,b.jsxs)("div",{className:"flex items-start gap-6",children:[(0,b.jsx)("div",{className:"w-48 md:hidden text-sm text-muted-foreground",children:"Postal Code"}),(0,b.jsx)("div",{className:"text-sm",children:m(p?.postalCode)})]}),(0,b.jsxs)("div",{className:"flex items-start gap-6",children:[(0,b.jsx)("div",{className:"w-48 md:hidden text-sm text-muted-foreground",children:"Address"}),(0,b.jsx)("div",{className:"text-sm",children:m(p?.companyAddress)})]})]})})]})}),(0,b.jsxs)("div",{className:"mt-6 text-sm text-muted-foreground grid md:grid-cols-2 gap-2",children:[(0,b.jsxs)("div",{children:["Created: ",(n=p?.createdAt)?new Date(n).toLocaleString():"--"]}),(0,b.jsxs)("div",{className:"text-right",children:["Status: ",(0,b.jsx)(h.Badge,{variant:"secondary",children:p?.status??"--"})]})]})]})]}):(0,b.jsx)("div",{className:"py-12 text-center text-muted-foreground",children:"No lead found."})})]})})}}];

//# sourceMappingURL=src_app_%28employee%29_employees_leads_admin_get_%5Bid%5D_page_tsx_1caa68c2._.js.map