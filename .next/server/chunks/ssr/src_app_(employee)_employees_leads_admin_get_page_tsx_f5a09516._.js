module.exports=[399597,a=>{"use strict";a.s(["AddLeadModal",()=>m,"default",()=>o]);var b=a.i(187924),c=a.i(972596),d=a.i(572131),e=a.i(50944),f=a.i(591119),g=a.i(866718),h=a.i(699570),i=a.i(206015);let j="https://6jnqmj85-80.inc1.devtunnels.ms",k=async a=>{let b=localStorage.getItem("accessToken");if(!b)throw Error("No access token found. Please log in.");let c=await fetch(`${j}/leads/my-leads`,{cache:"no-store",headers:{Authorization:`Bearer ${b}`,Accept:"application/json"}});if(!c.ok){let a="Failed to load.";try{a=(await c.json()).message||a}catch{a=await c.text()||a}throw Error(a)}return c.json()};function l({meta:a,fallback:c}){let d=a?.profileUrl||"/placeholder.svg?height=32&width=32&query=profile-avatar";return(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("img",{src:d,alt:a?.name?`Profile photo of ${a.name}`:"Profile avatar",className:"h-8 w-8 rounded-full object-cover border",crossOrigin:"anonymous"}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:a?.name||c||"â€”"}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:a?.designation||"â€”"})]})]})}function m({onClose:a,onCreated:c,employees:e}){let f=["Default Pipeline","Sales Pipeline","Enterprise Pipeline"],g=["Generated","Qualification","Proposal","Win","Lost"],[h,i]=(0,d.useState)([]),[k,l]=(0,d.useState)([]),[m,n]=(0,d.useState)([]);(0,d.useEffect)(()=>{let a=localStorage.getItem("accessToken");a&&(async()=>{try{let b=await fetch(`${j}/deals/dealCategory`,{headers:{Authorization:`Bearer ${a}`}});if(b.ok){let a=await b.json();Array.isArray(a)&&(i(a),n(a))}let c=await fetch(`${j}/deals/dealCategory/LeadSource`,{headers:{Authorization:`Bearer ${a}`}});if(c.ok){let a=await c.json();Array.isArray(a)&&l(a)}}catch{}})()},[]);let o={title:"",pipeline:f[0],dealStage:g[0],dealCategory:"",value:"",expectedCloseDate:"",dealAgent:"",dealWatchers:[]},[p,q]=(0,d.useState)({name:"",email:"",mobileNumber:"",clientCategory:"",leadSource:"",addedBy:"",leadOwner:"",createDeal:!0,autoConvertToClient:!0,deal:o,companyName:"",officialWebsite:"",officePhone:"",city:"",state:"",postalCode:"",country:"",companyAddress:""}),[r,s]=(0,d.useState)(null),[t,u]=(0,d.useState)(""),[v,w]=(0,d.useState)(!1),[x,y]=(0,d.useState)([]),[z,A]=(0,d.useState)(null),[B,C]=(0,d.useState)(!1),[D,E]=(0,d.useState)(!1),[F,G]=(0,d.useState)(""),H=(0,d.useRef)(null);(0,d.useEffect)(()=>{let a=a=>{let b=a.target;D&&H.current&&!H.current.contains(b)&&E(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[D]);let[I,J]=(0,d.useState)(!1),K=(0,d.useRef)(null);(0,d.useEffect)(()=>{requestAnimationFrame(()=>J(!0));let b=setTimeout(()=>K.current?.focus(),120),c=document.body.style.overflow;document.body.style.overflow="hidden";let d=b=>{"Escape"===b.key&&a()};return document.addEventListener("keydown",d),()=>{clearTimeout(b),document.body.style.overflow=c,document.removeEventListener("keydown",d)}},[a]);let L=(a,b)=>q(c=>({...c,[a]:b})),M=(a,b)=>q(c=>({...c,deal:{...c.deal,[a]:b}})),N=async a=>{a?.preventDefault();let b=(()=>{if(!p.name?.trim()||!p.email?.trim()||!p.companyName?.trim())return"Name, Email and Company Name are required.";if(p.createDeal||p.autoConvertToClient){let a=p.deal;if(!a.title?.trim()||!a.value||!a.expectedCloseDate||!a.dealAgent)return"Deal title, value, expected close date and deal agent are required when creating a deal."}return null})();if(b)return void A(b);A(null),C(!0);try{let a=localStorage.getItem("accessToken");if(!a)throw Error("No access token found.");let b={name:p.name,email:p.email,mobileNumber:p.mobileNumber||void 0,clientCategory:p.clientCategory||void 0,leadSource:p.leadSource||void 0,addedBy:p.addedBy||void 0,leadOwner:p.leadOwner||void 0,createDeal:!!p.createDeal,autoConvertToClient:!!p.autoConvertToClient,deal:p.createDeal||p.autoConvertToClient?{title:p.deal.title,pipeline:p.deal.pipeline,dealStage:p.deal.dealStage,dealCategory:p.deal.dealCategory,value:Number(p.deal.value),expectedCloseDate:p.deal.expectedCloseDate,dealAgent:p.deal.dealAgent,dealWatchers:p.deal.dealWatchers||[]}:void 0,companyName:p.companyName,officialWebsite:p.officialWebsite||void 0,officePhone:p.officePhone||void 0,city:p.city||void 0,state:p.state||void 0,postalCode:p.postalCode||void 0,country:p.country||void 0,companyAddress:p.companyAddress||void 0},d=await fetch(`${j}/leads`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(b)});if(!d.ok){let a=await d.text().catch(()=>"");throw Error(a||"Failed to create lead")}c(),alert("Lead created successfully.")}catch(a){A(a?.message||"Failed to create lead.")}finally{C(!1)}},O=async a=>{s(a),u(""),w(!0),y([]);try{let b=localStorage.getItem("accessToken");if(!b)throw Error("No token");if("leadSource"===a){let a=await fetch(`${j}/deals/dealCategory/LeadSource`,{headers:{Authorization:`Bearer ${b}`}});if(a.ok){let b=await a.json();Array.isArray(b)&&y(b)}}else{let a=await fetch(`${j}/deals/dealCategory`,{headers:{Authorization:`Bearer ${b}`}});if(a.ok){let b=await a.json();Array.isArray(b)&&y(b)}}}catch{}finally{w(!1)}},P=async a=>{if(!t.trim())return alert("Please enter a name.");w(!0);try{let b=localStorage.getItem("accessToken");if(!b)throw Error("No token");let c="",d={};"leadSource"===a?(c=`${j}/deals/dealCategory/LeadSource`,d={name:t.trim()}):(c=`${j}/deals/dealCategory`,d={categoryName:t.trim()});let e=await fetch(c,{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"},body:JSON.stringify(d)});if(!e.ok){let a=await e.text().catch(()=>"");throw Error(a||"Failed to add")}let f=await e.json();"leadSource"===a?(l(a=>[{id:f.id,name:f.name||t.trim()},...a]),q(a=>({...a,leadSource:f.name||t.trim()}))):(i(a=>[{id:f.id,categoryName:f.categoryName||t.trim()},...a]),n(a=>[{id:f.id,categoryName:f.categoryName||t.trim()},...a]),q(a=>({...a,deal:{...a.deal,dealCategory:f.categoryName||t.trim()},clientCategory:f.categoryName||t.trim()}))),u(""),s(null),alert("Added successfully.")}catch(a){alert("Error: "+(a?.message||a))}finally{w(!1)}},Q=async(a,b)=>{if(confirm("Are you sure you want to delete this item?"))try{let c=localStorage.getItem("accessToken");if(!c)throw Error("No token");let d="";d="leadSource"===a?`${j}/deals/dealCategory/LeadSource/${b}`:`${j}/deals/dealCategory/${b}`;let e=await fetch(d,{method:"DELETE",headers:{Authorization:`Bearer ${c}`}});if(!e.ok){let a=await e.text().catch(()=>"");throw Error(a||"Delete failed")}"leadSource"===a?l(a=>a.filter(a=>a.id!==b)):(i(a=>a.filter(a=>a.id!==b)),n(a=>a.filter(a=>a.id!==b))),alert("Deleted successfully.")}catch(a){alert("Error deleting: "+(a?.message||a))}},R=(0,b.jsxs)("form",{onSubmit:N,className:"space-y-6",children:[z&&(0,b.jsx)("div",{className:"text-destructive text-sm",children:z}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border p-6 shadow-sm flex flex-col",children:[(0,b.jsx)("h4",{className:"text-sm font-medium mb-4 text-left order-first",children:"Lead Contact Detail"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Name *"}),(0,b.jsx)("input",{ref:K,className:"w-full border rounded-md px-3 py-2 text-sm",value:p.name,onChange:a=>L("name",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Email *"}),(0,b.jsx)("input",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.email,type:"email",onChange:a=>L("email",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Client Category"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("select",{className:"flex-1 border rounded-md px-3 py-2 text-sm",value:p.clientCategory,onChange:a=>L("clientCategory",a.target.value),children:[(0,b.jsx)("option",{value:"",children:"--"}),m.map(a=>(0,b.jsx)("option",{value:a.categoryName,children:a.categoryName},a.id))]}),(0,b.jsx)("button",{type:"button",onClick:()=>O("clientCategory"),className:"px-3 py-2 rounded border text-sm",children:"Add"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Lead Source"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("select",{className:"flex-1 border  rounded-md px-3 py-2 text-sm",value:p.leadSource,onChange:a=>L("leadSource",a.target.value),children:[(0,b.jsx)("option",{value:"",children:"--"}),k.map(a=>(0,b.jsx)("option",{value:a.name,children:a.name},a.id))]}),(0,b.jsx)("button",{type:"button",onClick:()=>O("leadSource"),className:"px-3 py-2 rounded border text-sm",children:"Add"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Added By"}),(0,b.jsxs)("select",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.addedBy,onChange:a=>L("addedBy",a.target.value),children:[(0,b.jsx)("option",{value:"",children:"--"}),e.map(a=>(0,b.jsxs)("option",{value:a.employeeId,children:[a.name," (",a.employeeId,")"]},a.employeeId))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Lead Owner"}),(0,b.jsxs)("select",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.leadOwner,onChange:a=>L("leadOwner",a.target.value),children:[(0,b.jsx)("option",{value:"",children:"--"}),e.map(a=>(0,b.jsxs)("option",{value:a.employeeId,children:[a.name," (",a.employeeId,")"]},a.employeeId))]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("input",{id:"createDeal",type:"checkbox",checked:!!p.createDeal,onChange:a=>L("createDeal",a.target.checked)}),(0,b.jsx)("label",{htmlFor:"createDeal",className:"text-sm",children:"Create Deal"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("input",{id:"autoConvert",type:"checkbox",checked:!!p.autoConvertToClient,onChange:a=>L("autoConvertToClient",a.target.checked)}),(0,b.jsx)("label",{htmlFor:"autoConvert",className:"text-sm",children:"Auto convert on WIN"})]})]})]}),(p.createDeal||p.autoConvertToClient)&&(0,b.jsxs)("div",{className:"bg-white rounded-lg border p-5 shadow-sm flex flex-col",children:[(0,b.jsx)("h4",{className:"text-sm font-medium mb-4 text-left order-first",children:"Deal Details"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Deal Name *"}),(0,b.jsx)("input",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.deal.title,onChange:a=>M("title",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Pipeline *"}),(0,b.jsx)("select",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.deal.pipeline,onChange:a=>M("pipeline",a.target.value),children:f.map(a=>(0,b.jsx)("option",{value:a,children:a},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Deal Stage *"}),(0,b.jsx)("select",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.deal.dealStage,onChange:a=>M("dealStage",a.target.value),children:g.map(a=>(0,b.jsx)("option",{value:a,children:a},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Deal Value *"}),(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)("div",{className:"px-3 py-2 bg-gray-100 rounded-l text-sm",children:"USD $"}),(0,b.jsx)("input",{className:"flex-1 border rounded-r px-3 py-2 text-sm",type:"number",value:p.deal.value,onChange:a=>M("value",a.target.value)})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Close Date *"}),(0,b.jsx)("input",{className:"w-full border rounded-md px-3 py-2 text-sm",type:"date",value:p.deal.expectedCloseDate,onChange:a=>M("expectedCloseDate",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Deal Category"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("select",{className:"flex-1 border rounded-md px-3 py-2 text-sm",value:p.deal.dealCategory,onChange:a=>M("dealCategory",a.target.value),children:[(0,b.jsx)("option",{value:"",children:"--"}),h.map(a=>(0,b.jsx)("option",{value:a.categoryName,children:a.categoryName},a.id))]}),(0,b.jsx)("button",{type:"button",onClick:()=>O("dealCategory"),className:"px-3 py-2 rounded border text-sm",children:"Add"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Deal Agent *"}),(0,b.jsxs)("select",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.deal.dealAgent,onChange:a=>M("dealAgent",a.target.value),children:[(0,b.jsx)("option",{value:"",children:"--"}),e.map(a=>(0,b.jsxs)("option",{value:a.employeeId,children:[a.name," (",a.employeeId,")"]},a.employeeId))]})]}),(0,b.jsxs)("div",{className:"md:col-span-3",children:[(0,b.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Deal Watcher(s)"}),(0,b.jsxs)("div",{ref:H,className:"relative",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>E(a=>!a),className:"w-full flex items-center justify-between border rounded-md px-3 py-2 text-sm bg-white",children:[(0,b.jsx)("div",{className:"truncate",children:0===p.deal.dealWatchers.length?"-- select --":p.deal.dealWatchers.map(a=>e.find(b=>b.employeeId===a)?.name??a).join(", ")}),(0,b.jsx)("div",{className:"ml-2",children:p.deal.dealWatchers.length>0&&(0,b.jsx)("button",{type:"button",onClick:a=>{a.stopPropagation(),q(a=>({...a,deal:{...a.deal,dealWatchers:[]}}))},className:"text-xs px-2 py-1 rounded hover:bg-slate-100",children:"Clear"})})]}),D&&(0,b.jsxs)("div",{className:"absolute left-0 right-0 mt-2 z-40 rounded-md bg-white border shadow-lg max-h-60 overflow-auto",children:[(0,b.jsx)("div",{className:"p-2 border-b",children:(0,b.jsx)("input",{className:"w-full border rounded-md p-2 text-sm",placeholder:"Search employees...",value:F,onChange:a=>G(a.target.value)})}),(0,b.jsxs)("ul",{className:"p-2 space-y-1",children:[e.filter(a=>a.name.toLowerCase().includes(F.trim().toLowerCase())||a.employeeId.toLowerCase().includes(F.trim().toLowerCase())).map(a=>{let c=p.deal.dealWatchers.includes(a.employeeId);return(0,b.jsx)("li",{children:(0,b.jsxs)("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-50 cursor-pointer text-sm",children:[(0,b.jsx)("input",{type:"checkbox",checked:c,onChange:()=>{var b;return b=a.employeeId,void q(a=>{let c=new Set(a.deal.dealWatchers||[]);return c.has(b)?c.delete(b):c.add(b),{...a,deal:{...a.deal,dealWatchers:Array.from(c)}}})}}),(0,b.jsxs)("span",{children:[a.name," ",(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",a.employeeId,")"]})]})]})},a.employeeId)}),0===e.length&&(0,b.jsx)("li",{className:"p-2 text-sm text-muted-foreground",children:"No employees"})]}),(0,b.jsx)("div",{className:"p-2 border-t flex justify-end gap-2",children:(0,b.jsx)("button",{type:"button",onClick:()=>E(!1),className:"rounded-md px-3 py-1 border text-sm",children:"Done"})})]})]}),(0,b.jsxs)("div",{className:"mt-2 text-sm text-muted-foreground",children:["Selected: ",0===p.deal.dealWatchers.length?"â€”":p.deal.dealWatchers.map(a=>e.find(b=>b.employeeId===a)?.name??a).join(", ")]})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border p-5 shadow-sm flex flex-col",children:[(0,b.jsx)("h4",{className:"text-sm font-medium mb-4 text-left order-first",children:"Company Details"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Company Name *"}),(0,b.jsx)("input",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.companyName,onChange:a=>L("companyName",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Official Website"}),(0,b.jsx)("input",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.officialWebsite,onChange:a=>L("officialWebsite",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Mobile Number"}),(0,b.jsx)("input",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.mobileNumber,onChange:a=>L("mobileNumber",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Office Phone No."}),(0,b.jsx)("input",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.officePhone,onChange:a=>L("officePhone",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"City"}),(0,b.jsx)("input",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.city,onChange:a=>L("city",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"State"}),(0,b.jsx)("input",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.state,onChange:a=>L("state",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Postal Code"}),(0,b.jsx)("input",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.postalCode,onChange:a=>L("postalCode",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Country"}),(0,b.jsx)("input",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.country,onChange:a=>L("country",a.target.value)})]}),(0,b.jsxs)("div",{className:"md:col-span-3",children:[(0,b.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Company Address"}),(0,b.jsx)("textarea",{className:"w-full border rounded-md p-3 text-sm h-28",value:p.companyAddress,onChange:a=>L("companyAddress",a.target.value)})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-2",children:[(0,b.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 rounded-md border text-sm",disabled:B,children:"Cancel"}),(0,b.jsx)("button",{type:"button",onClick:N,className:"px-4 py-2 rounded-md bg-sky-600 text-white text-sm",disabled:B,children:B?"Saving...":"Save"})]})]}),S=r?(0,b.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/20",onClick:()=>s(null)}),(0,b.jsx)("div",{className:"fixed inset-0 flex items-start justify-center px-4 pt-20",children:(0,b.jsxs)("div",{className:"max-w-2xl w-full bg-white rounded-lg shadow-lg border overflow-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"clientCategory"===r?"Client Category":"leadSource"===r?"Lead Source":"Deal Category"}),(0,b.jsx)("button",{onClick:()=>s(null),className:"text-muted-foreground p-1 rounded hover:bg-slate-100",children:"âœ•"})]}),(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-blue-50",children:[(0,b.jsx)("th",{className:"p-2 text-left",children:"#"}),(0,b.jsx)("th",{className:"p-2 text-left",children:"Name"}),(0,b.jsx)("th",{className:"p-2 text-left",children:"Action"})]})}),(0,b.jsxs)("tbody",{children:[(x.length?x:"clientCategory"===r?m:"leadSource"===r?k:h).map((a,c)=>(0,b.jsxs)("tr",{className:"border-t",children:[(0,b.jsx)("td",{className:"p-2",children:c+1}),(0,b.jsx)("td",{className:"p-2",children:a.categoryName||a.name}),(0,b.jsx)("td",{className:"p-2",children:(0,b.jsx)("button",{onClick:()=>Q("leadSource"===r?"leadSource":"clientCategory"===r?"clientCategory":"dealCategory",a.id),className:"text-destructive",children:"ðŸ—‘"})})]},c)),!x.length&&!("clientCategory"===r?m.length:"leadSource"===r?k.length:h.length)&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:3,className:"p-4 text-sm text-muted-foreground",children:"No items found."})})]})]})})}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"block text-sm text-muted-foreground mb-1",children:"Name *"}),(0,b.jsx)("input",{value:t,onChange:a=>u(a.target.value),className:"w-full border rounded-md p-2",placeholder:"Enter name"})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)("button",{onClick:()=>s(null),className:"rounded-md px-4 py-2 border",children:"Cancel"}),(0,b.jsx)("button",{onClick:()=>P(r),disabled:v,className:"rounded-md bg-sky-600 text-white px-4 py-2",children:v?"Saving...":"Save"})]})]})]})})]}):null;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"fixed inset-0 z-50","aria-modal":"true",role:"dialog",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/30",onClick:a}),(0,b.jsxs)("aside",{className:["absolute right-0 top-0 h-full bg-gray-50 flex flex-col w-full sm:w-[80vw] max-w-full transform transition-transform duration-300 ease-out",I?"translate-x-0":"translate-x-full"].join(" "),style:{willChange:"transform"},children:[(0,b.jsxs)("div",{className:"flex items-start justify-between p-4 border-b bg-white sticky top-0 z-10",children:[(0,b.jsx)("div",{children:(0,b.jsx)("h3",{className:"text-lg font-semibold text-left",children:"Add Lead Contact Information "})}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)("button",{onClick:a,className:"p-2 rounded hover:bg-slate-100",children:"âœ•"})})]}),(0,b.jsx)("div",{className:"p-6 overflow-auto flex-1",children:R})]})]}),S]})}function n({lead:a,idx:c,mutate:e,onEdit:f,onView:g,onChangeToClient:h}){let[j,k]=(0,d.useState)(!1),m=(0,d.useRef)(null);return(0,d.useEffect)(()=>{if(!j)return;let a=a=>{let b=a.target;m.current&&!m.current.contains(b)&&k(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[j]),(0,b.jsxs)(i.TableRow,{ref:m,children:[(0,b.jsx)(i.TableCell,{children:c+1}),(0,b.jsx)(i.TableCell,{children:(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"font-medium",children:a.name}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:a.companyName||"â€”"})]})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-sm",children:a.email||"â€”"}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:a.mobileNumber||"â€”"})]})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(l,{meta:a.leadOwnerMeta,fallback:a.leadOwner})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(l,{meta:a.addedByMeta,fallback:a.addedBy})}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)("span",{className:"text-sm",children:a.createdAt?new Date(a.createdAt).toLocaleDateString():"â€”"})}),(0,b.jsxs)(i.TableCell,{className:"relative text-right",children:[(0,b.jsx)("button",{onClick:()=>{k(!1),g(a.id)},className:"w-full flex items-center gap-3 px-4 py-3 text-sm hover:bg-slate-50",children:(0,b.jsxs)("svg",{className:"w-5 h-5 text-muted-foreground",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[(0,b.jsx)("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M2 12s4-7 10-7 10 7 10 7-4 7-10 7S2 12 2 12z"}),(0,b.jsx)("circle",{cx:"12",cy:"12",r:"3",strokeWidth:"1.5"})]})}),j&&(0,b.jsx)("div",{className:"absolute right-0 z-30 mt-2 w-56 rounded-md bg-white shadow-lg border",children:(0,b.jsxs)("ul",{className:"py-1",children:[(0,b.jsx)("li",{}),(0,b.jsx)("li",{})]})})]})]})}function o(){let a=(0,e.useRouter)(),{data:l,error:o,isLoading:p,mutate:q}=(0,c.default)("/api/leads/admin/get",k,{refreshInterval:3e4,revalidateOnFocus:!0}),{data:r}=(0,c.default)(`${j}/employee/all?page=0&size=20`,k,{revalidateOnFocus:!1}),s=r&&r.content?r.content:r||[],[t,u]=(0,d.useState)(""),[v,w]=(0,d.useState)(!1),[x,y]=(0,d.useState)("created"),[z,A]=(0,d.useState)(""),[B,C]=(0,d.useState)(""),[D,E]=(0,d.useState)("All"),[F,G]=(0,d.useState)("All"),[H,I]=(0,d.useState)(!1),[J,K]=(0,d.useState)(null),[L,M]=(0,d.useState)(null),N=l||[],O=(0,d.useMemo)(()=>{let a=new Set;return N.forEach(b=>{b.leadOwner&&a.add(b.leadOwner),b.leadOwnerMeta?.name&&a.add(b.leadOwnerMeta.name)}),["All",...Array.from(a).sort()]},[N]),P=(0,d.useMemo)(()=>{let a=new Set;return N.forEach(b=>{b.addedBy&&a.add(b.addedBy),b.addedByMeta?.name&&a.add(b.addedByMeta.name)}),["All",...Array.from(a).sort()]},[N]),Q=a=>{if(!a)return null;let b=new Date(a);return isNaN(b.getTime())?null:b},R=(0,d.useMemo)(()=>{let a=t.trim().toLowerCase();return(N||[]).filter(b=>{if(a&&![b.name,b.email,b.companyName,b.city,b.country,b.status,b.leadOwner,b.addedBy,b.mobileNumber].some(b=>!!b&&b.toLowerCase().includes(a))||"All"!==D&&(b.leadOwnerMeta?.name||b.leadOwner||"")!==D||"All"!==F&&(b.addedByMeta?.name||b.addedBy||"")!==F)return!1;if(z||B){let a=Q("created"===x?b.createdAt:b.updatedAt);if(!a)return!1;if(z){let b=Q(z);if(!b||a<b)return!1}if(B){let b=Q(B);if(!b||(b.setHours(23,59,59,999),a>b))return!1}}return!0})},[N,t,D,F,z,B,x]),S=a=>{};return(0,b.jsxs)("main",{className:"container mx-auto max-w-6xl px-4 py-8",children:[(0,b.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,b.jsxs)("div",{className:"flex items-center justify-between py-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Duration"}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground underline",children:"Start Date to End Date "})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("button",{onClick:()=>w(!0),className:"flex items-center gap-2 text-sm text-muted-foreground hover:text-slate-700",children:[(0,b.jsx)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,b.jsx)("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M6 12h12M10 18h4"})}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Filters"})]}),(0,b.jsx)("div",{className:"w-9 h-9 rounded-full bg-gray-200"})]})]})}),(0,b.jsxs)(f.Card,{className:"p-4 md:p-6",children:[(0,b.jsxs)("div",{className:"flex items-start md:items-center justify-between mb-4 gap-3",children:[(0,b.jsx)("div",{className:"flex items-center gap-3",children:(0,b.jsx)("button",{onClick:()=>I(!0),className:"inline-flex items-center gap-2 rounded-md bg-sky-600 px-4 py-2 text-white text-sm font-medium shadow-sm hover:bg-sky-700",children:"+ Add Lead"})}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"flex items-center gap-2 rounded-md border bg-white px-3 py-2",children:(0,b.jsx)(g.Input,{value:t,onChange:a=>u(a.target.value),placeholder:"Search","aria-label":"Search leads",className:"border-0 p-0 focus:ring-0"})}),(0,b.jsx)(h.Button,{variant:"secondary",onClick:()=>q(),children:"Refresh"})]})]}),p?(0,b.jsx)("div",{className:"py-10 text-center text-muted-foreground",children:"Loading leadsâ€¦"}):o?(0,b.jsxs)("div",{className:"py-10 text-center",children:[(0,b.jsx)("p",{className:"text-destructive",children:"Failed to load leads."}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:o.message}),(0,b.jsx)(h.Button,{className:"mt-4",onClick:()=>q(),children:"Retry"})]}):0===R.length?(0,b.jsx)("div",{className:"py-10 text-center text-muted-foreground",children:"No leads found."}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"mt-4 overflow-x-auto",children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableHead,{className:"w-16",children:"S.No."}),(0,b.jsx)(i.TableHead,{className:"min-w-[220px]",children:"Lead Name"}),(0,b.jsx)(i.TableHead,{children:"Contact Details"}),(0,b.jsx)(i.TableHead,{children:"Lead Owner"}),(0,b.jsx)(i.TableHead,{children:"Added By"}),(0,b.jsx)(i.TableHead,{children:"Created On"}),(0,b.jsx)(i.TableHead,{className:"text-right",children:"Action"})]})}),(0,b.jsx)(i.TableBody,{children:R.map((c,d)=>(0,b.jsx)(n,{lead:c,idx:d,mutate:()=>q(),onEdit:a=>{K(a)},onView:b=>{a.push(`/employees/leads/admin/get/${b}`)},onChangeToClient:S},c.id))})]})}),(0,b.jsxs)("div",{className:"mt-6 flex items-center justify-between text-sm text-muted-foreground",children:[(0,b.jsx)("div",{children:"Result per page-8"}),(0,b.jsx)("div",{children:"Page 1 of 1 "}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("button",{className:"p-2 rounded hover:bg-slate-100",children:(0,b.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,b.jsx)("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),(0,b.jsx)("button",{className:"p-2 rounded hover:bg-slate-100",children:(0,b.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,b.jsx)("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})})]})]})]})]}),v&&(0,b.jsxs)("div",{className:"fixed inset-0 z-40",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/20"}),(0,b.jsxs)("aside",{className:"absolute right-0 top-0 h-full w-80 bg-white border-l shadow-lg p-6 overflow-auto",role:"dialog","aria-label":"Filters",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Filters"}),(0,b.jsx)("button",{onClick:()=>w(!1),"aria-label":"Close filters",className:"p-1 rounded hover:bg-slate-100",children:"âœ•"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-muted-foreground mb-1",children:"Date Filter On"}),(0,b.jsxs)("select",{value:x,onChange:a=>y(a.target.value),className:"block w-full rounded-md border px-3 py-2",children:[(0,b.jsx)("option",{value:"created",children:"Created"}),(0,b.jsx)("option",{value:"updated",children:"Updated"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-muted-foreground mb-1",children:"Start Date"}),(0,b.jsx)("input",{type:"date",value:z,onChange:a=>A(a.target.value),className:"block w-full rounded-md border px-3 py-2"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-muted-foreground mb-1",children:"End Date"}),(0,b.jsx)("input",{type:"date",value:B,onChange:a=>C(a.target.value),className:"block w-full rounded-md border px-3 py-2"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-muted-foreground mb-1",children:"Lead Owner"}),(0,b.jsx)("select",{value:D,onChange:a=>E(a.target.value),className:"block w-full rounded-md border px-3 py-2",children:O.map(a=>(0,b.jsx)("option",{value:a,children:a},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-muted-foreground mb-1",children:"Added by"}),(0,b.jsx)("select",{value:F,onChange:a=>G(a.target.value),className:"block w-full rounded-md border px-3 py-2",children:P.map(a=>(0,b.jsx)("option",{value:a,children:a},a))})]}),(0,b.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[(0,b.jsx)("button",{onClick:()=>{y("created"),A(""),C(""),E("All"),G("All")},className:"rounded-md px-4 py-2 border",children:"Clear"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(h.Button,{variant:"secondary",onClick:()=>w(!1),children:"Cancel"}),(0,b.jsx)(h.Button,{onClick:()=>w(!1),children:"Apply"})]})]})]})]})]}),H&&(0,b.jsx)(m,{onClose:()=>I(!1),onCreated:async()=>{I(!1),await q()},employees:s})]})}}];

//# sourceMappingURL=src_app_%28employee%29_employees_leads_admin_get_page_tsx_f5a09516._.js.map