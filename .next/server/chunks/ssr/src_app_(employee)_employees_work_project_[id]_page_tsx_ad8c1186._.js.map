{"version":3,"sources":["turbopack:///[project]/src/app/(employee)/employees/work/project/[id]/page.tsx","turbopack:///[project]/src/app/(employee)/employees/work/project/[id]/components/OverviewSection.tsx","turbopack:///[project]/src/app/(employee)/employees/work/project/components/TasksTable.tsx","turbopack:///[project]/src/app/(employee)/employees/work/project/components/TaskViewModal.tsx","turbopack:///[project]/src/app/(employee)/employees/work/project/components/ProjectMembersTable.tsx","turbopack:///[project]/src/app/(employee)/employees/work/project/components/TimesheetsTableNew.tsx","turbopack:///[project]/src/app/(employee)/employees/work/project/[id]/components/FilesSection.tsx","turbopack:///[project]/src/app/(employee)/employees/work/project/[id]/components/NotesSection.tsx","turbopack:///[project]/src/app/(employee)/employees/work/project/[id]/components/ActivitySection.tsx","turbopack:///[project]/src/app/(employee)/employees/work/project/[id]/components/DiscussionSection.tsx","turbopack:///[project]/src/app/(employee)/employees/work/project/[id]/components/DiscussionDetailPage.tsx"],"sourcesContent":["\n\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useParams } from \"next/navigation\";\nimport axios from \"axios\";\n\nimport OverviewSection from \"./components/OverviewSection\";\nimport InvoicesSection from \"./components/InvoicesSection\";\nimport PaymentsSection from \"./components/PaymentsSection\";\nimport FilesSection from \"./components/FilesSection\";\nimport NotesSection from \"./components/NotesSection\";\nimport ActivitySection from \"./components/ActivitySection\";\nimport DiscussionSection from \"./components/DiscussionSection\";\n\nconst MAIN = process.env.NEXT_PUBLIC_MAIN || \"\";\n\ntype TabKey =\n  | \"overview\"\n  // | \"invoices\"\n  // | \"payments\"\n  | \"files\"\n  | \"notes\"\n  | \"activity\"\n  | \"discussion\";\n\nexport default function ProjectDetailsPage() {\n  const params = useParams() as { id: string };\n  const projectId = params?.id;\n\n  const [project, setProject] = useState<any>(null);\n  const [metrics, setMetrics] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState<TabKey>(\"overview\");\n\n  // ---------------- FETCH PROJECT ----------------\n  useEffect(() => {\n    if (!projectId) return;\n\n    const token = localStorage.getItem(\"accessToken\") || \"\";\n\n    const fetchAll = async () => {\n      try {\n        const [pRes, mRes] = await Promise.all([\n          axios.get(`${MAIN}/projects/${projectId}`, {\n            headers: { Authorization: `Bearer ${token}` },\n          }),\n          axios.get(`${MAIN}/projects/${projectId}/metrics`, {\n            headers: { Authorization: `Bearer ${token}` },\n          }),\n        ]);\n\n        setProject(Array.isArray(pRes.data) ? pRes.data[0] : pRes.data);\n        setMetrics(mRes.data);\n      } catch (err) {\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchAll();\n  }, [projectId]);\n\n  if (loading) {\n    return <div className=\"p-8 text-center\">Loading project...</div>;\n  }\n\n  if (!project) {\n    return <div className=\"p-8 text-center text-red-500\">Project not found</div>;\n  }\n\n  // ---------------- UI ----------------\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"max-w-7xl mx-auto px-6 py-6\">\n\n        {/* HEADER */}\n        <h1 className=\"text-3xl font-semibold text-gray-800 mb-4\">\n          {project.name}\n        </h1>\n\n        {/* TABS */}\n        <div className=\"bg-white rounded-t-xl border\">\n          <nav className=\"flex gap-6 px-6 h-14 items-center\">\n            {[\n              { key: \"overview\", label: \"Overview\" },\n              // { key: \"invoices\", label: \"Invoices\" },\n              // { key: \"payments\", label: \"Payments\" },\n              { key: \"files\", label: \"Files\" },\n              { key: \"notes\", label: \"Notes\" },\n              { key: \"activity\", label: \"Activity\" },\n              { key: \"discussion\", label: \"Discussion\" },\n            ].map((tab) => {\n              const isActive = activeTab === tab.key;\n              return (\n                <button\n                  key={tab.key}\n                  onClick={() => setActiveTab(tab.key as TabKey)}\n                  className={`relative text-sm font-medium py-3 ${isActive ? \"text-blue-600\" : \"text-gray-600\"\n                    }`}\n                >\n                  {tab.label}\n                  {isActive && (\n                    <span className=\"absolute -bottom-3 left-0 w-full h-0.5 bg-blue-500 rounded\" />\n                  )}\n                </button>\n              );\n            })}\n          </nav>\n        </div>\n\n        {/* TAB CONTENT */}\n        <div className=\"bg-white rounded-b-xl border border-t-0 p-6\">\n          {activeTab === \"overview\" && (\n            <OverviewSection project={project} metrics={metrics} />\n          )}\n          {/* {activeTab === \"invoices\" && (\n            <InvoicesSection projectId={project.id} />\n          )} */}\n          {/* {activeTab === \"payments\" && (\n            <PaymentsSection projectId={project.id} />\n          )} */}\n          {activeTab === \"files\" && (\n            <FilesSection projectId={project.id} />\n          )}\n          {activeTab === \"notes\" && (\n            <NotesSection projectId={project.id} />\n          )}\n          {activeTab === \"activity\" && (\n            <ActivitySection projectId={project.id} />\n          )}\n          {activeTab === \"discussion\" && (\n            <DiscussionSection projectId={project.id} />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","// \"use client\";\n\n// import TaskStatistics from \"./TaskStatistics\";\n// import TasksTable from \"../../components/TasksTable\";\n\n// export default function OverviewSection({ project, metrics }: any) {\n//     return (\n//         <div className=\"space-y-6\">\n\n//             {/* SUMMARY */}\n//             <div className=\"border rounded-xl p-6\">\n//                 <h3 className=\"text-lg font-medium mb-2\">Project Summary</h3>\n//                 <p className=\"text-sm text-gray-600\">\n//                     {project.summary || \"No summary available\"}\n//                 </p>\n//             </div>\n\n//             {/* STATS */}\n//             <div className=\"border rounded-xl p-6\">\n//                 <h3 className=\"text-lg font-medium mb-4\">Task Statistics</h3>\n//                 <TaskStatistics projectId={project.id} />\n//             </div>\n\n//             {/* TASK TABLE */}\n//             <div className=\"border rounded-xl p-4\">\n//                 <TasksTable projectId={project.id} />\n//             </div>\n//         </div>\n//     );\n// }\n\n\n// app/(your-route)/page.tsx\n\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useParams } from \"next/navigation\";\nimport { UserIcon } from \"@heroicons/react/24/outline\";\nimport TasksTable from \"../../components/TasksTable\";\nimport ProjectMembersTable from \"../../components/ProjectMembersTable\";\nimport TimesheetsTableNew from \"../../components/TimesheetsTableNew\";\nimport MilestonesTable from \"../../components/MilestonesTable\";\n// import { getStorage } from \"../../../../../lib/storage/storege\"; // adjust path if needed\nimport axios from \"axios\";\n\ninterface Project {\n    id: number;\n    shortCode: string;\n    name: string;\n    startDate: string;\n    deadline?: string;\n    noDeadline?: boolean;\n    category?: string;\n    client?: { name: string; profilePictureUrl?: string } | null;\n    summary?: string;\n    currency: string;\n    budget: number;\n    hoursEstimate?: number;\n    assignedEmployees?: { employeeId: string; name: string; profileUrl?: string; designation?: string; department?: string }[];\n    progressPercent?: number | null;\n    totalTimeLoggedMinutes?: number | null;\n    createdBy?: string;\n    createdAt?: string;\n    pinned?: boolean;\n    pinnedAt?: string | null;\n    archived?: boolean;\n    archivedAt?: string | null;\n}\n\ntype StatusItem = {\n    id: number;\n    name: string;\n    position?: number;\n    labelColor?: string | null;\n    projectId?: number | null;\n    createdBy?: string;\n};\n\ntype TaskItem = {\n    id: number;\n    taskStageId?: number | null;\n    taskStage?: { id?: number; name?: string } | null;\n    // other fields not needed for counting\n};\n\nconst MAIN = process.env.NEXT_PUBLIC_MAIN\n\n/**\n * Small helper: convert hex-like labelColor from backend to usable CSS color\n * backend sometimes returns \"88aaff11\" — we'll take first 6 hex chars (if any)\n */\nconst normalizeLabelColor = (raw?: string | null) => {\n    if (!raw) return null;\n    const hex = String(raw).replace(/[^0-9a-fA-F]/g, \"\");\n    if (hex.length >= 6) return `#${hex.slice(0, 6)}`;\n    return null;\n};\n\n/**\n * Simple name-based fallback color map\n */\nconst nameColorFallback = (name: string) => {\n    const n = name.toLowerCase();\n    if (n.includes(\"complete\") || n.includes(\"complete\")) return \"#10b981\"; // green\n    if (n.includes(\"to-do\") || n.includes(\"todo\") || n.includes(\"to do\")) return \"#f59e0b\"; // yellow\n    if (n.includes(\"doing\")) return \"#2563eb\"; // blue\n    if (n.includes(\"incomplete\")) return \"#ef4444\"; // red\n    if (n.includes(\"wait\") || n.includes(\"waiting\")) return \"#9ca3af\"; // gray\n    return \"#6b7280\"; // neutral gray\n};\n\n/**\n * Create a pie slice path (SVG) from angles in degrees\n */\nconst polarToCartesian = (cx: number, cy: number, r: number, angleInDegrees: number) => {\n    const angleUSDadians = ((angleInDegrees - 90) * Math.PI) / 180.0;\n    return {\n        x: cx + r * Math.cos(angleUSDadians),\n        y: cy + r * Math.sin(angleUSDadians),\n    };\n};\n\nconst describeArc = (cx: number, cy: number, r: number, startAngle: number, endAngle: number) => {\n    const start = polarToCartesian(cx, cy, r, endAngle);\n    const end = polarToCartesian(cx, cy, r, startAngle);\n    const largeArcFlag = endAngle - startAngle <= 180 ? \"0\" : \"1\";\n    return `M ${cx} ${cy} L ${start.x} ${start.y} A ${r} ${r} 0 ${largeArcFlag} 0 ${end.x} ${end.y} Z`;\n};\n\n/**\n * TaskStatistics component: fetches statuses + tasks, computes counts and renders pie + legend\n */\nfunction TaskStatistics({ projectId }: { projectId: number }) {\n    const [statuses, setStatuses] = useState<StatusItem[]>([]);\n    const [tasks, setTasks] = useState<TaskItem[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState<string | null>(null);\n\n    const token = localStorage.getItem(\"accessToken\") || \"\";\n\n    useEffect(() => {\n        let mounted = true;\n        const fetchAll = async () => {\n            setLoading(true);\n            setError(null);\n            try {\n                // fetch statuses\n                const statusUrl = `${MAIN}/status`;\n                const [sRes, tRes] = await Promise.all([\n                    axios.get(statusUrl, { headers: { Authorization: token ? `Bearer ${token}` : \"\" } }),\n                    axios.get(`${MAIN}/projects/${projectId}/tasks`, { headers: { Authorization: token ? `Bearer ${token}` : \"\" } }),\n                ]);\n\n                if (mounted) {\n                    setStatuses(Array.isArray(sRes.data) ? sRes.data : []);\n                    setTasks(Array.isArray(tRes.data) ? tRes.data : []);\n                }\n            } catch (err: any) {\n                console.error(\"Failed to load task statistics:\", err?.response?.data ?? err?.message ?? err);\n                if (mounted) {\n                    setError(\"Failed to load task statistics\");\n                    setStatuses([]);\n                    setTasks([]);\n                }\n            } finally {\n                if (mounted) setLoading(false);\n            }\n        };\n        fetchAll();\n        return () => {\n            mounted = false;\n        };\n    }, [projectId, token]);\n\n    // compute counts per status id (use status.id from statuses)\n    const counts = useMemo(() => {\n        const map = new Map<number | string, { status: StatusItem; count: number }>();\n\n        // seed map with statuses (so legend includes them even if count=0)\n        statuses.forEach((s) => map.set(s.id, { status: s, count: 0 }));\n\n        // For each task, try to find matching status:\n        tasks.forEach((task) => {\n            // prefer explicit taskStageId\n            const id = task.taskStageId ?? task.taskStage?.id ?? null;\n            if (id !== null && id !== undefined) {\n                const key = Array.from(map.keys()).find((k) => k === id);\n                if (key !== undefined) {\n                    const cur = map.get(key as number)!;\n                    cur.count += 1;\n                    map.set(key as number, cur);\n                    return;\n                }\n            }\n            // fallback: find by name inclusion\n            const stageName = task.taskStage?.name ?? \"\";\n            const matched = statuses.find((s) => stageName && String(s.name).toLowerCase().includes(stageName.toLowerCase()));\n            if (matched) {\n                const cur = map.get(matched.id) ?? { status: matched, count: 0 };\n                cur.count += 1;\n                map.set(matched.id, cur);\n                return;\n            }\n            // otherwise increment \"unknown\" bucket keyed by 'unknown'\n            const unknownKey = \"unknown\";\n            if (!map.has(unknownKey as any)) {\n                map.set(unknownKey as any, { status: { id: 0, name: \"Other\", labelColor: null }, count: 0 });\n            }\n            const cur = map.get(unknownKey as any)!;\n            cur.count += 1;\n            map.set(unknownKey as any, cur);\n        });\n\n        return Array.from(map.values());\n    }, [statuses, tasks]);\n\n    const total = counts.reduce((s, c) => s + c.count, 0) || 0;\n\n    // prepare slices for pie\n    let accAngle = 0;\n    const slices = counts\n        .filter((c) => c.count > 0)\n        .map((c) => {\n            const proportion = total === 0 ? 0 : c.count / total;\n            const start = accAngle;\n            const sweep = proportion * 360;\n            accAngle += sweep;\n            const color = normalizeLabelColor(c.status.labelColor) || nameColorFallback(c.status.name);\n            return {\n                ...c,\n                start,\n                end: accAngle,\n                color,\n            };\n        });\n\n    return (\n        <div>\n            {loading ? (\n                <div className=\"py-6 text-center text-gray-500\">Loading task statistics...</div>\n            ) : error ? (\n                <div className=\"py-6 text-center text-red-500\">{error}</div>\n            ) : (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <div className=\"flex items-center\">\n                        <svg viewBox=\"0 0 100 100\" width=\"180\" height=\"180\" className=\"flex-shrink-0\">\n                            {/* background circle if no data */}\n                            {slices.length === 0 && <circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"#e5e7eb\" />}\n                            {slices.map((s, idx) => (\n                                <path key={idx} d={describeArc(50, 50, 40, s.start, s.end)} fill={s.color} stroke=\"#ffffff\" strokeWidth=\"0.5\" />\n                            ))}\n                        </svg>\n                    </div>\n\n                    <div className=\"flex flex-col justify-center\">\n                        <ul className=\"space-y-3 text-sm\">\n                            {counts.map((c, idx) => {\n                                const color = normalizeLabelColor(c.status.labelColor) || nameColorFallback(c.status.name);\n                                return (\n                                    <li key={idx} className=\"flex items-center gap-3\">\n                                        <span style={{ width: 18, height: 12, background: color }} className=\"rounded-sm inline-block\" />\n                                        <span className=\"flex-1\">{c.status.name}</span>\n                                        <span className=\"text-xs text-gray-500\">{c.count}</span>\n                                    </li>\n                                );\n                            })}\n                        </ul>\n                        <div className=\"mt-4 text-xs text-gray-500\">Total tasks: {total}</div>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}\n\nexport default function ProjectDetailsPage() {\n    const params = useParams() as any;\n    const { id } = params || {};\n\n    const [project, setProject] = useState<Project | null>(null);\n    const [loading, setLoading] = useState(true);\n    const [activeTab, setActiveTab] = useState<'overview' | 'invoices' | 'payments' | 'files' | 'notes' | 'activity' | 'discussion'>('overview');\n\n    // Fetch project; fallback demo so UI always matches preview\n    const getProjectDetails = async (accessToken: string) => {\n        try {\n            const res = await fetch(`/api/work/project/${id}`, {\n                headers: accessToken ? { Authorization: `Bearer ${accessToken}` } : undefined,\n            });\n            if (!res.ok) throw new Error(\"Failed to fetch\");\n            const data = await res.json();\n            setProject(Array.isArray(data) ? data[0] : data);\n        } catch (err) {\n            // fallback demo data\n            setProject({\n                id: Number(id || 1),\n                shortCode: \"PRJ-001\",\n                name: \"Project Name\",\n                category: \"Website\",\n                startDate: \"2025-08-02\",\n                deadline: \"2025-09-12\",\n                client: { name: \"John Doe\", profilePictureUrl: \"https://i.pravatar.cc/80?img=5\" },\n                summary: \"Short description of the project and goals.\",\n                currency: \"$\",\n                budget: 0,\n                hoursEstimate: 40,\n                assignedEmployees: [\n                    { employeeId: \"1\", name: \"Aman Sharma\", designation: \"Developer\", department: \"Engineering\" },\n                    { employeeId: \"2\", name: \"Riya Singh\", designation: \"Designer\", department: \"Design\" },\n                ],\n                progressPercent: 76,\n                totalTimeLoggedMinutes: 300,\n                createdBy: \"Admin\",\n                createdAt: new Date().toISOString(),\n                pinned: false,\n                archived: false,\n            });\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        const token = localStorage.getItem(\"accessToken\") || \"\";\n        getProjectDetails(token);\n    }, [id]);\n\n    if (loading) return <p className=\"p-8 text-center\">Loading project...</p>;\n    if (!project) return <p className=\"p-8 text-center text-red-600\">Project not found</p>;\n\n    const totalHours = project.totalTimeLoggedMinutes ? Math.floor(project.totalTimeLoggedMinutes / 60) : 0;\n\n    return (\n        <div className=\"min-h-screen bg-gray-50\">\n            <div className=\"px-6 py-6\">\n                {/* Header */}\n                <div className=\"mb-4\">\n                    <h1 className=\"text-3xl font-semibold text-gray-800\">{project.name}</h1>\n                </div>\n\n                {/* Tabs container */}\n                {/* <div className=\"bg-white rounded-t-lg shadow-sm border border-b-0\">\n          <div className=\"px-4\">\n            <nav className=\"flex items-center gap-6 h-14\">\n              {[\n                { key: 'overview', label: 'Overview' },\n                { key: 'invoices', label: 'Invoices' },\n                { key: 'payments', label: 'Payments' },\n                { key: 'files', label: 'Files' },\n                { key: 'notes', label: 'Notes' },\n                { key: 'activity', label: 'Activity' },\n                { key: 'discussion', label: 'Discussion' },\n              ].map(t => {\n                const isActive = activeTab === (t.key as any);\n                return (\n                  <button\n                    key={t.key}\n                    onClick={() => setActiveTab(t.key as any)}\n                    className={`py-3 text-sm font-medium ${isActive ? 'text-blue-600' : 'text-gray-600'}`}\n                    aria-current={isActive ? 'page' : undefined}\n                  >\n                    <span className=\"relative inline-block\">\n                      {t.label}\n                      {isActive && <span className=\"absolute -bottom-5 left-0 w-full h-0.5 bg-blue-400 rounded\" />}\n                    </span>\n                  </button>\n                );\n              })}\n            </nav>\n          </div>\n          <div className=\"h-1\"><div className=\"border-t-2 border-blue-300\" /></div>\n        </div> */}\n\n                {/* Content */}\n                <div className=\"mt-6 space-y-6\">\n                    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n                        <div className=\"lg:col-span-2 bg-white rounded-xl border border-gray-200 p-6\">\n                            <div className=\"flex items-center justify-between gap-6\">\n                                <div className=\"flex items-center gap-6\">\n                                    <div className=\"w-36 h-20\">\n                                        <svg viewBox=\"0 0 100 50\" className=\"w-full h-full\">\n                                            <path d=\"M5 50 A45 45 0 0 1 95 50\" fill=\"none\" stroke=\"#e6e6e6\" strokeWidth=\"10\" strokeLinecap=\"round\" />\n                                            <path d=\"M5 50 A45 45 0 0 1 75 18\" fill=\"none\" stroke=\"#f5c518\" strokeWidth=\"10\" strokeLinecap=\"round\" />\n                                            <text x=\"50\" y=\"40\" fontSize=\"8\" textAnchor=\"middle\" fill=\"#374151\">{project.progressPercent}%</text>\n                                        </svg>\n                                    </div>\n\n                                    <div>\n                                        <p className=\"text-sm text-gray-500\">Start Date</p>\n                                        <p className=\"font-medium\">{new Date(project.startDate).toLocaleDateString()}</p>\n                                    </div>\n\n                                    <div>\n                                        <p className=\"text-sm text-gray-500\">End Date</p>\n                                        <p className=\"font-medium\">{project.noDeadline ? \"No Deadline\" : (project.deadline ? new Date(project.deadline).toLocaleDateString() : \"TBD\")}</p>\n                                    </div>\n                                </div>\n\n                                <div className=\"hidden lg:block max-w-xs text-gray-600\">\n                                    {project.summary ? <p>{project.summary}</p> : <p className=\"text-sm text-gray-400\">No summary available</p>}\n                                </div>\n                            </div>\n                        </div>\n\n                        <div className=\"bg-white rounded-xl border border-gray-200 p-4 flex items-center gap-4\">\n                            <div className=\"w-16 h-16 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center\">\n                                {project.client?.profilePictureUrl ? (\n                                    // eslint-disable-next-line @next/next/no-img-element\n                                    <img src={project.client.profilePictureUrl} alt=\"client\" className=\"w-full h-full object-cover\" />\n                                ) : (\n                                    <UserIcon className=\"w-8 h-8 text-gray-400\" />\n                                )}\n                            </div>\n                            <div>\n                                <p className=\"text-sm text-gray-500\">Client</p>\n                                <p className=\"font-medium\">{project.client?.name || `Client ID: ${project.client?.name ?? ''}`}</p>\n                                <p className=\"text-xs text-gray-400\">Qurilo Solutions</p>\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* Middle row: Task statistics + metrics */}\n                    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n                        <div className=\"lg:col-span-2 bg-white rounded-xl border border-gray-200 p-6\">\n                            <h3 className=\"text-lg font-medium mb-4\">Task Statistics</h3>\n                            <TaskStatistics projectId={project.id} />\n                        </div>\n\n                        <div className=\"space-y-4\">\n                            {/* <div className=\"bg-white rounded-xl border border-gray-200 p-4\">\n                                <p className=\"text-sm text-gray-500\">Project Budget</p>\n                                <div className=\"text-2xl font-semibold text-blue-600 mt-2\">{project.currency}{project.budget.toFixed(2)}</div>\n                            </div> */}\n\n                            <div className=\"bg-white rounded-xl border border-gray-200 p-4\">\n                                <p className=\"text-sm text-gray-500\">Hours Logged</p>\n                                <div className=\"text-2xl font-semibold text-blue-600 mt-2\">{totalHours}hrs 0 min</div>\n                            </div>\n\n                            {/* <div className=\"grid grid-cols-3 gap-3\">\n                                <div className=\"bg-white rounded-xl border border-gray-200 p-3 text-center\">\n                                    <p className=\"text-sm text-gray-500\">Earnings</p>\n                                    <div className=\"text-lg font-semibold text-blue-600 mt-1\">{project.currency}0.00</div>\n                                </div>\n                                <div className=\"bg-white rounded-xl border border-gray-200 p-3 text-center\">\n                                    <p className=\"text-sm text-gray-500\">Expenses</p>\n                                    <div className=\"text-lg font-semibold text-blue-600 mt-1\">{project.currency}0.00</div>\n                                </div>\n                                <div className=\"bg-white rounded-xl border border-gray-200 p-3 text-center\">\n                                    <p className=\"text-sm text-gray-500\">Profit</p>\n                                    <div className=\"text-lg font-semibold text-blue-600 mt-1\">{project.currency}0.00</div>\n                                </div>\n                            </div> */}\n                        </div>\n                    </div>\n\n                    {/* Bottom row */}\n                    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n                        <div className=\"lg:col-span-2 bg-white rounded-xl border border-gray-200 p-4\">\n                            <div className=\"mb-4\">\n                                <h4 className=\"text-lg font-medium\">Assigned Employees</h4>\n                            </div>\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                                {project.assignedEmployees && project.assignedEmployees.length ? (\n                                    project.assignedEmployees.map(emp => (\n                                        <div key={emp.employeeId} className=\"flex items-center gap-3 p-3 bg-gray-50 rounded\">\n                                            <div className=\"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center overflow-hidden\">\n                                                {emp.profileUrl ? (\n                                                    // eslint-disable-next-line @next/next/no-img-element\n                                                    <img src={emp.profileUrl} alt={emp.name} className=\"w-full h-full object-cover\" />\n                                                ) : (\n                                                    <UserIcon className=\"w-5 h-5 text-gray-400\" />\n                                                )}\n                                            </div>\n                                            <div>\n                                                <p className=\"font-medium text-sm\">{emp.name}</p>\n                                                <p className=\"text-xs text-gray-500\">{emp.designation ? emp.designation + ', ' : ''}{emp.department}</p>\n                                            </div>\n                                        </div>\n                                    ))\n                                ) : (\n                                    <p className=\"text-gray-500 text-center py-6\">No employees assigned</p>\n                                )}\n                            </div>\n                        </div>\n\n                        <div className=\"bg-white rounded-xl border border-gray-200 p-4\">\n                            <h4 className=\"text-lg font-medium mb-2\">Project Summary</h4>\n                            <div className=\"text-xs text-gray-500 space-y-2\">\n                                <div>Created by: {project.summary}</div>\n                                <div>Created on: {new Date(project.createdAt || '').toLocaleDateString()}</div>\n                                {project.pinned && <div>Pinned on: {new Date(project.pinnedAt || '').toLocaleDateString()}</div>}\n                                {project.archived && <div>Archived on: {new Date(project.archivedAt || '').toLocaleDateString()}</div>}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Keep the tasks table below as before */}\n                {project && <div className=\"mt-6\"><TasksTable projectId={project.id} /></div>}\n\n                {/* other components shown for reference */}\n                <div className=\"mt-6 grid grid-cols-1 lg:grid-rows-2 gap-2\">\n                    <ProjectMembersTable projectId={project.id} />\n                    <TimesheetsTableNew gatewayPath=\"https://erp.skavosystem.com/timesheets\" projectId={project.id} />\n                    {/* <MilestonesTable projectId={project.id} /> */}\n\n\n                </div>\n            </div>\n        </div>\n    );\n}","\n\n// components/TasksTable.tsx\n\"use client\";\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { UserIcon } from \"@heroicons/react/24/outline\";\nimport { deleteAPI, postAPI, putAPI } from \"@/app/api/apiHelper\";\nimport TaskViewModal, { TaskForView } from \"../components/TaskViewModal\"; // adjust path if needed\n\ntype Employee = {\n  employeeId: string;\n  name: string;\n  profileUrl?: string | null;\n};\n\ntype Label = { id: number; name: string; colorCode?: string };\ntype Milestone = { id: number; title: string };\n\ntype Task = {\n  id: number;\n  title: string;\n  projectId: number;\n  projectShortCode?: string | null;\n  projectName?: string | null;\n  startDate?: string | null;\n  dueDate?: string | null;\n  noDueDate?: boolean;\n  taskStage?: { id?: number; name?: string } | null;\n  taskStageId?: number;\n  assignedEmployeeIds?: string[];\n  assignedEmployees?: Employee[] | null;\n  description?: string | null;\n  labels?: Label[];\n  milestone?: Milestone | null;\n  milestoneId?: number | null;\n  priority?: string | null;\n  isPrivate?: boolean;\n  timeEstimateMinutes?: number | null;\n  isDependent?: boolean;\n  dependentTaskId?: number | null;\n  attachments?: any[];\n  pinned?: boolean | null;\n  hoursLoggedMinutes?: number | null;\n};\n\ntype StatusItem = {\n  id: number;\n  name: string;\n  position?: number;\n  labelColor?: string | null;\n  projectId?: number | null;\n  createdBy?: string;\n};\n\nconst MAIN = process.env.NEXT_PUBLIC_MAIN ;\n\nexport default function TasksTable({ projectId }: { projectId: number }) {\n  const [tasks, setTasks] = useState<Task[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // status list loaded from server\n  const [statuses, setStatuses] = useState<StatusItem[]>([]);\n\n  // modals / form state (kept as-is)\n  const [showCreate, setShowCreate] = useState(false);\n  const [showEdit, setShowEdit] = useState(false);\n  const [editTask, setEditTask] = useState<Task | null>(null);\n\n  // NEW: view modal state (minimal addition)\n  const [showView, setShowView] = useState(false);\n  const [viewTask, setViewTask] = useState<TaskForView | null>(null);\n\n  // separate menus for action and status (to avoid conflicts)\n  const [actionOpenFor, setActionOpenFor] = useState<number | null>(null);\n  const [statusOpenFor, setStatusOpenFor] = useState<number | null>(null);\n\n  // form helpers\n  const emptyForm = {\n    title: \"\",\n    category: \"\",\n    startDate: \"\",\n    dueDate: \"\",\n    noDueDate: false,\n    taskStageId: \"\",\n    assignedEmployeeIds: [] as string[],\n    description: \"\",\n    labelIds: [] as string[],\n    milestoneId: \"\",\n    priority: \"LOW\",\n    isPrivate: false,\n    timeEstimateMinutes: \"\",\n    isDependent: false,\n    projectId: projectId,\n    taskFile: null as File | null,\n  };\n  const [form, setForm] = useState(emptyForm);\n\n  const base = (path: string) => (MAIN ? `${MAIN}${path}` : path);\n\n  // fetch statuses from /status\n  const fetchStatuses = async () => {\n    try {\n      const url = `${MAIN}/status`;\n      const token = localStorage.getItem(\"accessToken\");\n      const res = await axios.get(url, {\n        headers: { Authorization: token ? `Bearer ${token}` : \"\" },\n      });\n      if (Array.isArray(res.data)) setStatuses(res.data);\n      else setStatuses([]);\n    } catch (err) {\n      console.warn(\"Failed to fetch statuses:\", err);\n      setStatuses([]);\n    }\n  };\n\n  // fetch tasks\n  const fetchTasks = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const token = localStorage.getItem(\"accessToken\");\n      const url = `${MAIN}/projects/${projectId}/tasks`;\n      const res = await axios.get(url, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: token ? `Bearer ${token}` : \"\",\n        },\n      });\n      setTasks(Array.isArray(res.data) ? res.data : []);\n    } catch (err: any) {\n      setError(err?.response?.data?.message || err?.message || \"Failed to load tasks\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchStatuses();\n    fetchTasks();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [projectId]);\n\n  const updateForm = (patch: Partial<typeof emptyForm>) => setForm((s) => ({ ...s, ...patch }));\n\n  // create\n  const handleCreate = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      const fd = new FormData();\n      fd.append(\"title\", form.title);\n      fd.append(\"category\", form.category || \"\");\n      fd.append(\"startDate\", form.startDate || \"\");\n      fd.append(\"dueDate\", form.dueDate || \"\");\n      fd.append(\"noDueDate\", String(form.noDueDate));\n      fd.append(\"taskStageId\", form.taskStageId || \"\");\n      fd.append(\"assignedEmployeeIds\", JSON.stringify(form.assignedEmployeeIds));\n      fd.append(\"description\", form.description || \"\");\n      fd.append(\"labelIds\", JSON.stringify(form.labelIds));\n      fd.append(\"milestoneId\", form.milestoneId || \"\");\n      fd.append(\"priority\", form.priority || \"\");\n      fd.append(\"isPrivate\", String(form.isPrivate));\n      fd.append(\"timeEstimateMinutes\", String(form.timeEstimateMinutes || \"\"));\n      fd.append(\"isDependent\", String(form.isDependent));\n      fd.append(\"projectId\", String(projectId));\n      if (form.taskFile) fd.append(\"taskFile\", form.taskFile);\n\n      await postAPI(base(\"/api/projects/tasks\"), fd, {\n        headers: { \"Content-Type\": \"multipart/form-data\" },\n      });\n\n      setShowCreate(false);\n      setForm(emptyForm);\n      await fetchTasks();\n    } catch (err: any) {\n      alert(\"Create task failed: \" + (err?.response?.data?.message || err?.message || \"unknown\"));\n    }\n  };\n\n  // edit\n  const openEdit = (t: Task) => {\n    setEditTask(t);\n    setForm({\n      title: t.title || \"\",\n      category: (t as any).categoryId?.id ? String((t as any).categoryId.id) : \"\",\n      startDate: t.startDate ? t.startDate : \"\",\n      dueDate: t.dueDate ? t.dueDate : \"\",\n      noDueDate: !!t.noDueDate,\n      taskStageId: t.taskStageId ? String(t.taskStageId) : \"\",\n      assignedEmployeeIds: t.assignedEmployeeIds || [],\n      description: t.description || \"\",\n      labelIds: (t.labels || []).map((l) => String(l.id)),\n      milestoneId: t.milestoneId ? String(t.milestoneId) : \"\",\n      priority: t.priority || \"LOW\",\n      isPrivate: !!t.isPrivate,\n      timeEstimateMinutes: t.timeEstimateMinutes ? String(t.timeEstimateMinutes) : \"\",\n      isDependent: !!t.isDependent,\n      projectId: t.projectId,\n      taskFile: null,\n    });\n    setShowEdit(true);\n  };\n\n  const handleEdit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!editTask) return;\n    try {\n      const fd = new FormData();\n      fd.append(\"title\", form.title);\n      fd.append(\"category\", form.category || \"\");\n      fd.append(\"noDueDate\", String(form.noDueDate));\n      fd.append(\"description\", form.description || \"\");\n      fd.append(\"labelIds\", JSON.stringify(form.labelIds));\n      fd.append(\"priority\", form.priority || \"\");\n      fd.append(\"isPrivate\", String(form.isPrivate));\n      fd.append(\"timeEstimateMinutes\", String(form.timeEstimateMinutes || \"\"));\n      fd.append(\"isDependent\", String(form.isDependent));\n      fd.append(\"projectId\", String(projectId));\n      fd.append(\"assignedEmployeeIds\", JSON.stringify(form.assignedEmployeeIds));\n      if (form.taskFile) fd.append(\"taskFile\", form.taskFile);\n\n      await putAPI(base(`/api/projects/tasks/${editTask.id}`), fd, {\n        headers: { \"Content-Type\": \"multipart/form-data\" },\n      });\n\n      setShowEdit(false);\n      setEditTask(null);\n      setForm(emptyForm);\n      await fetchTasks();\n    } catch (err: any) {\n      alert(\"Update task failed: \" + (err?.response?.data?.message || err?.message || \"unknown\"));\n    }\n  };\n\n  // delete\n  const handleDelete = async (taskId: number) => {\n    if (!confirm(\"Are you sure to delete this task?\")) return;\n    try {\n      await deleteAPI(base(`/api/projects/${projectId}/tasks/${taskId}`));\n      setActionOpenFor(null);\n      await fetchTasks();\n    } catch (err: any) {\n      alert(\"Delete failed: \" + (err?.response?.data?.message || err?.message || \"unknown\"));\n    }\n  };\n\n  // helper: get status item by name (case-insensitive)\n  const findStatusByName = (name: string) => {\n    if (!statuses || !statuses.length) return undefined;\n    return statuses.find((s) => String(s.name).toLowerCase().includes(String(name).toLowerCase()));\n  };\n\n  // map status name or id -> color class or inline color\n  const statusColorClass = (s?: StatusItem | string | null) => {\n    const name = typeof s === \"string\" ? s : s?.name ?? \"\";\n    switch (name.toLowerCase()) {\n      case \"complete\":\n      case \"completed\":\n      case \"complete\":\n      case \"complete\":\n        return \"bg-green-600\";\n      case \"to-do\":\n      case \"to do\":\n      case \"todo\":\n        return \"bg-yellow-500\";\n      case \"doing\":\n        return \"bg-blue-600\";\n      case \"incomplete\":\n        return \"bg-red-600\";\n      case \"waiting\":\n      case \"waiting for approval\":\n        return \"bg-gray-600\";\n      default:\n        return \"bg-gray-400\";\n    }\n  };\n\n  // Update status (optimistic + backend) using the URL you specified:\n  // PUT {{base_url}}/api/projects/tasks/{{taskId}}/status?statusId={{stageId}}\n  const changeStatus = async (task: Task, statusItem: StatusItem) => {\n    // optimistic update locally\n    setTasks((prev) =>\n      prev.map((t) => (t.id === task.id ? { ...t, taskStage: { id: statusItem.id, name: statusItem.name }, taskStageId: statusItem.id } : t))\n    );\n\n    const token = localStorage.getItem(\"accessToken\");\n    try {\n      // Use the exact endpoint you provided:\n      const url = `${MAIN}/api/projects/tasks/${task.id}/status?statusId=${statusItem.id}`;\n\n      await axios.patch(\n        url,\n        {}, // no body needed per your pattern (statusId is query param)\n        {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: token ? `Bearer ${token}` : \"\",\n          },\n        }\n      );\n\n      // close the menu\n      setStatusOpenFor(null);\n    } catch (err: any) {\n      console.error(\"Failed to update status:\", err);\n      alert(\"Failed to update status on server. Refreshing tasks.\");\n      // revert by reloading tasks (safe fallback)\n      await fetchTasks();\n      setStatusOpenFor(null);\n    }\n  };\n\n  // NEW: open View modal (minimal, only sets viewTask + showView)\n  const openView = (t: Task) => {\n    // Cast Task -> TaskForView (fields align sufficiently)\n    setViewTask(t as unknown as TaskForView);\n    setShowView(true);\n  };\n\n  // helpers\n  const minsToHuman = (mins?: number | null) => {\n    if (!mins && mins !== 0) return \"--\";\n    const h = Math.floor((mins || 0) / 60);\n    const m = (mins || 0) % 60;\n    if (h && m) return `${h}h ${m}m`;\n    if (h) return `${h}h`;\n    return `${m}m`;\n  };\n\n  // helper to get display status (prefer server taskStage, else find by id)\n  const getDisplayStatus = (t: Task) => {\n    if (t.taskStage && t.taskStage.name) return t.taskStage;\n    if (t.taskStageId) {\n      const s = statuses.find((st) => st.id === t.taskStageId);\n      if (s) return s;\n    }\n    const guessed = findStatusByName(String(t.taskStage?.name || \"\"));\n    return guessed ?? { id: t.taskStageId ?? 0, name: t.taskStage?.name ?? \"Doing\" };\n  };\n\n  return (\n    <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n      <h2 className=\"text-xl font-semibold mb-4\">Tasks</h2>\n\n      {/* header */}\n      <div className=\"flex items-center justify-between mb-4\">\n        <div className=\"flex items-center gap-4\">\n          {/* <button\n            onClick={() => {\n              setForm({ ...emptyForm, projectId });\n              setShowCreate(true);\n            }}\n            className=\"bg-blue-600 text-white px-4 py-2 rounded shadow-sm hover:bg-blue-700\"\n          >\n            + Add Task\n          </button> */}\n        </div>\n\n        <div className=\"flex items-center gap-3\">\n          <input\n            type=\"search\"\n            placeholder=\"Search\"\n            onChange={(e) => {\n              const q = e.target.value.toLowerCase();\n              if (!q) fetchTasks();\n              else setTasks((prev) => prev.filter((t) => (t.title || \"\").toLowerCase().includes(q) || (t.projectName || \"\").toLowerCase().includes(q)));\n            }}\n            className=\"border px-3 py-2 rounded-md text-sm\"\n          />\n        </div>\n      </div>\n\n      {/* table */}\n      {loading ? (\n        <div className=\"py-6 text-center text-gray-500\">Loading tasks...</div>\n      ) : error ? (\n        <div className=\"py-6 text-center text-red-500\">{error}</div>\n      ) : (\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full text-sm\">\n            <thead>\n              <tr className=\"bg-blue-50 text-left text-gray-600\">\n                <th className=\"px-4 py-3\">Code</th>\n                <th className=\"px-4 py-3\">Task</th>\n                <th className=\"px-4 py-3\">Completed On</th>\n                <th className=\"px-4 py-3\">Start Date</th>\n                <th className=\"px-4 py-3\">Due Date</th>\n                <th className=\"px-4 py-3\">Hours Logged</th>\n                <th className=\"px-4 py-3\">Estimated Time</th>\n                <th className=\"px-4 py-3\">Milestones</th>\n                <th className=\"px-4 py-3\">Assigned to</th>\n                <th className=\"px-4 py-3\">Status</th>\n                <th className=\"px-4 py-3\">Action</th>\n              </tr>\n            </thead>\n\n            <tbody>\n              {tasks.length === 0 ? (\n                <tr>\n                  <td colSpan={11} className=\"py-6 text-center text-gray-500\">\n                    No tasks found\n                  </td>\n                </tr>\n              ) : (\n                tasks.map((t) => {\n                  const isOverdue = t.dueDate && !t.noDueDate && new Date(t.dueDate) < new Date();\n                  const displayStatus = getDisplayStatus(t);\n                  const statusName = displayStatus?.name ?? \"Doing\";\n                  return (\n                    <tr key={t.id} className=\"border-b last:border-b-0 bg-white hover:bg-gray-50\">\n                      <td className=\"px-4 py-4 align-top\">RTA-{String(t.id).padStart(2, \"0\")}</td>\n\n                      <td className=\"px-4 py-4 align-top\">\n                        <div className=\"font-medium\">{t.title}</div>\n                        <div className=\"text-xs text-gray-500 mt-1\">{t.projectName ?? `Project ${t.projectId}`}</div>\n                      </td>\n\n                      <td className=\"px-4 py-4 align-top\">--</td>\n\n                      <td className=\"px-4 py-4 align-top\">{t.startDate ? new Date(t.startDate).toLocaleDateString() : \"--\"}</td>\n\n                      <td className={`px-4 py-4 align-top ${isOverdue ? \"text-red-600\" : \"\"}`}>\n                        {t.noDueDate ? \"--\" : t.dueDate ? new Date(t.dueDate).toLocaleDateString() : \"--\"}\n                      </td>\n\n                      <td className=\"px-4 py-4 align-top\">{minsToHuman(t.hoursLoggedMinutes ?? null)}</td>\n\n                      <td className=\"px-4 py-4 align-top\">{minsToHuman(t.timeEstimateMinutes ?? null)}</td>\n\n                      <td className=\"px-4 py-4 align-top\">{t.milestone?.title ?? \"--\"}</td>\n\n                      <td className=\"px-4 py-4 align-top\">\n                        <div className=\"flex -space-x-2\">\n                          {(t.assignedEmployees || []).slice(0, 3).map((e) => (\n                            <div key={e.employeeId} className=\"w-8 h-8 rounded-full border-2 border-white overflow-hidden bg-gray-100\">\n                              {e.profileUrl ? <img src={e.profileUrl} alt={e.name} className=\"w-full h-full object-cover\" /> : <UserIcon className=\"w-full h-full text-gray-400 p-1\" />}\n                            </div>\n                          ))}\n                        </div>\n                      </td>\n\n                      <td className=\"px-4 py-4 align-top relative\">\n                        {/* Status pill with dropdown icon */}\n                        <div className=\"relative inline-block\">\n                          <button\n                            onClick={(ev) => {\n                              ev.stopPropagation();\n                              setActionOpenFor(null);\n                              setStatusOpenFor((cur) => (cur === t.id ? null : t.id));\n                            }}\n                            className=\"inline-flex items-center gap-2 px-3 py-1 rounded-full border text-xs bg-white hover:bg-gray-50\"\n                            title=\"Change status\"\n                          >\n                            {/* Dot: use labelColor if available */}\n                            {displayStatus && displayStatus.labelColor ? (\n                              <span\n                                style={{\n                                  width: 8,\n                                  height: 8,\n                                  borderRadius: 9999,\n                                  display: \"inline-block\",\n                                  background: `#${String(displayStatus.labelColor).replace(/[^0-9a-fA-F]/g, \"\").slice(0, 6)}`,\n                                }}\n                              />\n                            ) : (\n                              <span className={`w-2 h-2 rounded-full ${statusColorClass(displayStatus?.name ?? \"Doing\")}`} />\n                            )}\n                            <span>{String(statusName)}</span>\n                            <span className=\"text-xs\">▾</span>\n                          </button>\n\n                          {statusOpenFor === t.id && (\n                            <div onClick={(e) => e.stopPropagation()} className=\"absolute right-0 mt-2 z-30 w-44 bg-white border rounded-md shadow-lg text-sm\">\n                              {statuses.length > 0 ? (\n                                statuses.map((st) => (\n                                  <button\n                                    key={st.id}\n                                    onClick={() => changeStatus(t, st)}\n                                    className={`w-full text-left px-4 py-2 hover:bg-gray-50 flex items-center gap-2 ${st.id === displayStatus?.id ? \"font-medium\" : \"\"}`}\n                                  >\n                                    {st.labelColor ? (\n                                      <span style={{ width: 8, height: 8, borderRadius: 9999, background: `#${String(st.labelColor).replace(/[^0-9a-fA-F]/g, \"\").slice(0, 6)}` }} />\n                                    ) : (\n                                      <span className={`w-2 h-2 rounded-full ${statusColorClass(st.name)}`} />\n                                    )}\n                                    <span>{st.name}</span>\n                                  </button>\n                                ))\n                              ) : (\n                                [\"To Do\", \"Doing\", \"Completed\", \"Incomplete\", \"Waiting for Approval\"].map((opt) => (\n                                  <button\n                                    key={opt}\n                                    onClick={() => {\n                                      const fake: StatusItem = { id: 0, name: opt };\n                                      changeStatus(t, fake);\n                                    }}\n                                    className=\"w-full text-left px-4 py-2 hover:bg-gray-50\"\n                                  >\n                                    <span className={`w-2 h-2 rounded-full ${statusColorClass(opt)}`} /> <span>{opt}</span>\n                                  </button>\n                                ))\n                              )}\n                            </div>\n                          )}\n                        </div>\n                      </td>\n\n                      <td className=\"px-4 py-4 align-top relative\">\n                            <button\n                              onClick={() => {\n                                // OPEN external TaskViewModal\n                                openView(t);\n                                setActionOpenFor(null);\n                              }}\n                              className=\"w-full text-left px-4 py-2 hover:bg-gray-50\"\n                            >\n                              View\n                            </button>\n\n                        {/* ACTION menu - anchored to row */}\n                        {actionOpenFor === t.id && (\n                          <div onClick={(e) => e.stopPropagation()} className=\"absolute right-2 top-10 z-20 w-48 bg-white border rounded-md shadow-md\">\n                        \n\n                          \n                          </div>\n                        )}\n                      </td>\n                    </tr>\n                  );\n                })\n              )}\n            </tbody>\n          </table>\n\n          {/* footer (pagination-ish display) */}\n          <div className=\"px-4 py-3 border-t bg-gray-50 flex items-center justify-between text-sm text-gray-600 rounded-b-md mt-4\">\n            <div>Result per page - {tasks.length ? tasks.length : 0}</div>\n            <div>Page 1 of 1</div>\n          </div>\n        </div>\n      )}\n\n      {/* Create modal (unchanged) */}\n      {/* {showCreate && (\n        <div className=\"fixed inset-0 z-40 flex items-center justify-center bg-black/40 p-4\">\n          <form onSubmit={handleCreate} className=\"bg-white w-full max-w-3xl rounded-lg p-6 shadow-lg overflow-auto max-h-[90vh]\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-semibold\">Add Task</h3>\n              <button type=\"button\" onClick={() => setShowCreate(false)} className=\"text-gray-500\">Close</button>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Title</span>\n                <input required value={form.title} onChange={(e) => updateForm({ title: e.target.value })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Category (id)</span>\n                <input value={form.category} onChange={(e) => updateForm({ category: e.target.value })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Start Date</span>\n                <input type=\"date\" value={form.startDate} onChange={(e) => updateForm({ startDate: e.target.value })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Due Date</span>\n                <input type=\"date\" value={form.dueDate} onChange={(e) => updateForm({ dueDate: e.target.value })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex items-center gap-2\">\n                <input type=\"checkbox\" checked={form.noDueDate} onChange={(e) => updateForm({ noDueDate: e.target.checked })} />\n                <span className=\"text-sm text-gray-600\">No Due Date</span>\n              </label>\n\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Task Stage ID</span>\n                <input value={form.taskStageId} onChange={(e) => updateForm({ taskStageId: e.target.value })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex flex-col md:col-span-2\">\n                <span className=\"text-xs text-gray-600\">Description</span>\n                <textarea value={form.description} onChange={(e) => updateForm({ description: e.target.value })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Assigned Employee IDs (comma separated)</span>\n                <input value={form.assignedEmployeeIds.join(\",\")} onChange={(e) => updateForm({ assignedEmployeeIds: e.target.value.split(\",\").map(s => s.trim()).filter(Boolean) })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Label IDs (comma separated)</span>\n                <input value={form.labelIds.join(\",\")} onChange={(e) => updateForm({ labelIds: e.target.value.split(\",\").map(s => s.trim()).filter(Boolean) })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Milestone ID</span>\n                <input value={form.milestoneId} onChange={(e) => updateForm({ milestoneId: e.target.value })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Priority</span>\n                <select value={form.priority} onChange={(e) => updateForm({ priority: e.target.value })} className=\"border px-3 py-2 rounded\">\n                  <option value=\"LOW\">LOW</option>\n                  <option value=\"MEDIUM\">MEDIUM</option>\n                  <option value=\"HIGH\">HIGH</option>\n                  <option value=\"URGENT\">URGENT</option>\n                </select>\n              </label>\n\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Time Estimate (minutes)</span>\n                <input type=\"number\" value={form.timeEstimateMinutes} onChange={(e) => updateForm({ timeEstimateMinutes: e.target.value })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex items-center gap-2\">\n                <input type=\"checkbox\" checked={form.isPrivate} onChange={(e) => updateForm({ isPrivate: e.target.checked })} />\n                <span className=\"text-sm text-gray-600\">Private</span>\n              </label>\n\n              <label className=\"flex items-center gap-2\">\n                <input type=\"checkbox\" checked={form.isDependent} onChange={(e) => updateForm({ isDependent: e.target.checked })} />\n                <span className=\"text-sm text-gray-600\">Is Dependent</span>\n              </label>\n\n              <label className=\"flex flex-col md:col-span-2\">\n                <span className=\"text-xs text-gray-600\">Attach file (optional)</span>\n                <input type=\"file\" onChange={(e) => updateForm({ taskFile: e.target.files?.[0] || null })} />\n              </label>\n            </div>\n\n            <div className=\"mt-4 flex items-center justify-end gap-3\">\n              <button type=\"button\" onClick={() => setShowCreate(false)} className=\"px-4 py-2 rounded border\">Cancel</button>\n              <button type=\"submit\" className=\"px-4 py-2 rounded bg-blue-600 text-white\">Save</button>\n            </div>\n          </form>\n        </div>\n      )} */}\n\n      {/* Edit modal (unchanged) */}\n      {/* {showEdit && editTask && (\n        <div className=\"fixed inset-0 z-40 flex items-center justify-center bg-black/40 p-4\">\n          <form onSubmit={handleEdit} className=\"bg-white w-full max-w-3xl rounded-lg p-6 shadow-lg overflow-auto max-h-[90vh]\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-semibold\">Edit Task</h3>\n              <button type=\"button\" onClick={() => { setShowEdit(false); setEditTask(null); }} className=\"text-gray-500\">Close</button>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Title</span>\n                <input required value={form.title} onChange={(e) => updateForm({ title: e.target.value })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Category (id)</span>\n                <input value={form.category} onChange={(e) => updateForm({ category: e.target.value })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex flex-col md:col-span-2\">\n                <span className=\"text-xs text-gray-600\">Description</span>\n                <textarea value={form.description} onChange={(e) => updateForm({ description: e.target.value })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Assigned Employee IDs (comma separated)</span>\n                <input value={form.assignedEmployeeIds.join(\",\")} onChange={(e) => updateForm({ assignedEmployeeIds: e.target.value.split(\",\").map(s => s.trim()).filter(Boolean) })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Label IDs (comma separated)</span>\n                <input value={form.labelIds.join(\",\")} onChange={(e) => updateForm({ labelIds: e.target.value.split(\",\").map(s => s.trim()).filter(Boolean) })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Priority</span>\n                <select value={form.priority} onChange={(e) => updateForm({ priority: e.target.value })} className=\"border px-3 py-2 rounded\">\n                  <option value=\"LOW\">LOW</option>\n                  <option value=\"MEDIUM\">MEDIUM</option>\n                  <option value=\"HIGH\">HIGH</option>\n                  <option value=\"URGENT\">URGENT</option>\n                </select>\n              </label>\n\n              <label className=\"flex flex-col\">\n                <span className=\"text-xs text-gray-600\">Time Estimate (minutes)</span>\n                <input type=\"number\" value={form.timeEstimateMinutes} onChange={(e) => updateForm({ timeEstimateMinutes: e.target.value })} className=\"border px-3 py-2 rounded\" />\n              </label>\n\n              <label className=\"flex items-center gap-2\">\n                <input type=\"checkbox\" checked={form.isPrivate} onChange={(e) => updateForm({ isPrivate: e.target.checked })} />\n                <span className=\"text-sm text-gray-600\">Private</span>\n              </label>\n\n              <label className=\"flex items-center gap-2\">\n                <input type=\"checkbox\" checked={form.isDependent} onChange={(e) => updateForm({ isDependent: e.target.checked })} />\n                <span className=\"text-sm text-gray-600\">Is Dependent</span>\n              </label>\n\n              <label className=\"flex flex-col md:col-span-2\">\n                <span className=\"text-xs text-gray-600\">Attach file (optional)</span>\n                <input type=\"file\" onChange={(e) => updateForm({ taskFile: e.target.files?.[0] || null })} />\n              </label>\n            </div>\n\n            <div className=\"mt-4 flex items-center justify-end gap-3\">\n              <button type=\"button\" onClick={() => { setShowEdit(false); setEditTask(null); }} className=\"px-4 py-2 rounded border\">Cancel</button>\n              <button type=\"submit\" className=\"px-4 py-2 rounded bg-blue-600 text-white\">Update</button>\n            </div>\n          </form>\n        </div>\n      )} */}\n\n      {/* Task view modal (external component) */}\n      <TaskViewModal\n        open={showView}\n        task={viewTask}\n        onClose={() => {\n          setShowView(false);\n          setViewTask(null);\n        }}\n      />\n    </div>\n  );\n}\n\n","// components/TaskViewModal.tsx\n\"use client\";\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport { XMarkIcon } from \"@heroicons/react/24/outline\";\n\ntype Employee = { employeeId: string; name: string; profileUrl?: string | null; role?: string };\ntype Label = { id: number; name: string };\ntype Milestone = { id: number; title: string };\n\nexport type TaskForView = {\n  id: number;\n  title?: string;\n  projectId?: number;\n  projectName?: string | null;\n  startDate?: string | null;\n  dueDate?: string | null;\n  createdOn?: string | null;\n  noDueDate?: boolean;\n  assignedEmployees?: Employee[] | null;\n  assignedEmployeeIds?: string[];\n  description?: string | null;\n  labels?: Label[];\n  milestone?: Milestone | null;\n  milestoneId?: number | null;\n  priority?: string | null;\n  isPrivate?: boolean;\n  timeEstimateMinutes?: number | null;\n  isDependent?: boolean;\n  attachments?: { name?: string; url?: string }[] | null;\n  taskStage?: { id?: number; name?: string } | null;\n  hoursLoggedMinutes?: number | null;\n  // optional: subtasks could be added later\n};\n\ntype Note = {\n  id: number;\n  title: string;\n  type: \"public\" | \"private\";\n  content?: string;\n};\n\ntype TimesheetRow = {\n  id: number;\n  employee: Employee;\n  startTime: string; // ISO or date string\n  endTime: string;\n  memo?: string;\n  minutesLogged: number;\n};\n\nexport default function TaskViewModal({\n  open,\n  task,\n  onClose,\n  onMarkComplete,\n}: {\n  open: boolean;\n  task: TaskForView | null;\n  onClose: () => void;\n  onMarkComplete?: (taskId: number) => void;\n}) {\n  // ---------- hooks (all at top; never conditional) ----------\n  const [tab, setTab] = useState<\"files\" | \"subtask\" | \"timesheet\" | \"notes\">(\n    \"files\"\n  );\n  const [isVisible, setIsVisible] = useState(false);\n\n  // left card menu (3-dot at top-right of big left card)\n  const [menuOpen, setMenuOpen] = useState(false);\n  const menuRef = useRef<HTMLDivElement | null>(null);\n  const menuBtnRef = useRef<HTMLButtonElement | null>(null);\n\n  // reminder confirmation modal\n  const [reminderConfirmOpen, setReminderConfirmOpen] = useState(false);\n  const reminderModalRef = useRef<HTMLDivElement | null>(null);\n\n  // file upload input ref\n  const fileInputRef = useRef<HTMLInputElement | null>(null);\n\n  // Subtask UI state (for placeholder UI)\n  const [subtaskDone, setSubtaskDone] = useState(false);\n  const [subtaskMenuOpen, setSubtaskMenuOpen] = useState(false);\n  const subtaskMenuRef = useRef<HTMLDivElement | null>(null);\n  const subtaskMenuBtnRef = useRef<HTMLButtonElement | null>(null);\n\n  // Add Subtask modal state + form fields\n  const [addSubtaskOpen, setAddSubtaskOpen] = useState(false);\n  const [newSubtaskTitle, setNewSubtaskTitle] = useState(\"\");\n  const [newSubtaskDesc, setNewSubtaskDesc] = useState(\"\");\n  const [titleError, setTitleError] = useState<string | null>(null);\n\n  // View / Edit subtask modal states\n  const [viewSubtaskOpen, setViewSubtaskOpen] = useState(false);\n  const [editSubtaskOpen, setEditSubtaskOpen] = useState(false);\n\n  // edit form fields (prefilled when edit opens)\n  const [editSubtaskTitle, setEditSubtaskTitle] = useState(\"\");\n  const [editSubtaskDesc, setEditSubtaskDesc] = useState(\"\");\n  const [editTitleError, setEditTitleError] = useState<string | null>(null);\n\n  // Notes data + UI state\n  const [notes, setNotes] = useState<Note[]>([\n    { id: 1, title: \"My Note\", type: \"public\", content: \"This is the body of My Note.\" },\n  ]);\n  const [openNoteMenuId, setOpenNoteMenuId] = useState<number | null>(null);\n  const [currentNote, setCurrentNote] = useState<Note | null>(null);\n  const [viewNoteOpen, setViewNoteOpen] = useState(false);\n  const [editNoteOpen, setEditNoteOpen] = useState(false);\n  const [deleteNoteConfirmOpen, setDeleteNoteConfirmOpen] = useState(false);\n  const [addNoteOpen, setAddNoteOpen] = useState(false);\n  const [addNoteTitle, setAddNoteTitle] = useState(\"\");\n  const [addNoteType, setAddNoteType] = useState<\"public\" | \"private\">(\"public\");\n  const [addNoteContent, setAddNoteContent] = useState(\"\");\n  const [addNoteTitleError, setAddNoteTitleError] = useState<string | null>(null);\n  const [editNoteTitle, setEditNoteTitle] = useState(\"\");\n  const [editNoteType, setEditNoteType] = useState<\"public\" | \"private\">(\"public\");\n  const [editNoteContent, setEditNoteContent] = useState(\"\");\n\n  // Edit Task modal state + fields (NEW: full UI per screenshot)\n  const [editTaskOpen, setEditTaskOpen] = useState(false);\n\n  // Task Information fields\n  const [etTitle, setEtTitle] = useState(\"\");\n  const [etTaskCategory, setEtTaskCategory] = useState(\"\");\n  const [etProject, setEtProject] = useState(\"\"); // project id/name string for select\n  const [etStartDate, setEtStartDate] = useState<string | null>(null);\n  const [etDueDate, setEtDueDate] = useState<string | null>(null);\n  const [etWithoutDueDate, setEtWithoutDueDate] = useState(false);\n  const [etStatus, setEtStatus] = useState<string>(\"Doing\");\n  const [etAssignedTo, setEtAssignedTo] = useState<string>(\"\"); // assigned employee id or name\n  const [etDescription, setEtDescription] = useState(\"\");\n\n  // Other Details\n  const [etLabel, setEtLabel] = useState(\"\");\n  const [etMilestone, setEtMilestone] = useState(\"\");\n  const [etPriority, setEtPriority] = useState<\"Low\" | \"Medium\" | \"High\" | \"Urgent\">(\"Low\");\n  const [etMakePrivate, setEtMakePrivate] = useState(false);\n  const [etTimeEstimateChecked, setEtTimeEstimateChecked] = useState(false);\n  const [etTimeEstimateMins, setEtTimeEstimateMins] = useState<number | \"\">(\"\");\n  const [etDependentChecked, setEtDependentChecked] = useState(false);\n  const [etDependentTask, setEtDependentTask] = useState(\"\");\n  const [etFile, setEtFile] = useState<File | null>(null);\n\n  const [editTaskErrors, setEditTaskErrors] = useState<string | null>(null);\n\n  // Timesheet placeholder data (to match the provided UI)\n  const [timesheets] = useState<TimesheetRow[]>([\n    {\n      id: 1,\n      employee: { employeeId: \"u1\", name: \"Jack Smith\", profileUrl: undefined, role: \"Trainee\" },\n      startTime: \"2025-08-02T11:00:00\",\n      endTime: \"2025-08-02T13:00:00\",\n      memo: \"---\",\n      minutesLogged: 8 * 60,\n    },\n    {\n      id: 2,\n      employee: { employeeId: \"u1\", name: \"Jack Smith\", profileUrl: undefined, role: \"Trainee\" },\n      startTime: \"2025-08-02T11:00:00\",\n      endTime: \"2025-08-02T13:00:00\",\n      memo: \"---\",\n      minutesLogged: 8 * 60,\n    },\n    {\n      id: 3,\n      employee: { employeeId: \"u1\", name: \"Jack Smith\", profileUrl: undefined, role: \"Trainee\" },\n      startTime: \"2025-08-02T11:00:00\",\n      endTime: \"2025-08-02T13:00:00\",\n      memo: \"---\",\n      minutesLogged: 8 * 60,\n    },\n    {\n      id: 4,\n      employee: { employeeId: \"u1\", name: \"Jack Smith\", profileUrl: undefined, role: \"Trainee\" },\n      startTime: \"2025-08-02T11:00:00\",\n      endTime: \"2025-08-02T13:00:00\",\n      memo: \"---\",\n      minutesLogged: 8 * 60,\n    },\n  ]);\n\n  useEffect(() => {\n    if (open) setIsVisible(true);\n    else {\n      setIsVisible(false);\n      setMenuOpen(false);\n      setReminderConfirmOpen(false);\n      setSubtaskMenuOpen(false);\n      setAddSubtaskOpen(false);\n      setViewSubtaskOpen(false);\n      setEditSubtaskOpen(false);\n      setOpenNoteMenuId(null);\n      setViewNoteOpen(false);\n      setEditNoteOpen(false);\n      setDeleteNoteConfirmOpen(false);\n      setCurrentNote(null);\n      setAddNoteOpen(false);\n      setEditTaskOpen(false);\n    }\n  }, [open]);\n\n  // close menus / modals on outside click or Escape\n  useEffect(() => {\n    function handleClick(e: MouseEvent) {\n      // left-card menu\n      if (\n        menuOpen &&\n        menuRef.current &&\n        !menuRef.current.contains(e.target as Node) &&\n        menuBtnRef.current &&\n        !menuBtnRef.current.contains(e.target as Node)\n      ) {\n        setMenuOpen(false);\n      }\n\n      // subtask row menu\n      if (\n        subtaskMenuOpen &&\n        subtaskMenuRef.current &&\n        !subtaskMenuRef.current.contains(e.target as Node) &&\n        subtaskMenuBtnRef.current &&\n        !subtaskMenuBtnRef.current.contains(e.target as Node)\n      ) {\n        setSubtaskMenuOpen(false);\n      }\n\n      // reminder modal\n      if (\n        reminderConfirmOpen &&\n        reminderModalRef.current &&\n        !reminderModalRef.current.contains(e.target as Node)\n      ) {\n        setReminderConfirmOpen(false);\n      }\n\n      // notes actions popup: click outside of popup/button should close it\n      if (openNoteMenuId !== null) {\n        const insideMenu = (e.target as Element).closest(\"[data-notes-menu]\");\n        const onBtn = (e.target as Element).closest(\"[data-notes-menu-btn]\");\n        if (!insideMenu && !onBtn) {\n          setOpenNoteMenuId(null);\n        }\n      }\n    }\n\n    function handleKey(e: KeyboardEvent) {\n      if (e.key === \"Escape\") {\n        setMenuOpen(false);\n        setSubtaskMenuOpen(false);\n        setReminderConfirmOpen(false);\n        setAddSubtaskOpen(false);\n        setViewSubtaskOpen(false);\n        setEditSubtaskOpen(false);\n        setOpenNoteMenuId(null);\n        setViewNoteOpen(false);\n        setEditNoteOpen(false);\n        setDeleteNoteConfirmOpen(false);\n        setAddNoteOpen(false);\n        setEditTaskOpen(false);\n      }\n    }\n\n    document.addEventListener(\"mousedown\", handleClick);\n    document.addEventListener(\"keydown\", handleKey);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClick);\n      document.removeEventListener(\"keydown\", handleKey);\n    };\n  }, [menuOpen, subtaskMenuOpen, reminderConfirmOpen, openNoteMenuId, addNoteOpen]);\n\n  const priorityDot = useMemo(() => {\n    const priority = (task?.priority || \"\").toLowerCase();\n    switch (priority) {\n      case \"low\":\n        return \"bg-green-500\";\n      case \"medium\":\n        return \"bg-yellow-400\";\n      case \"high\":\n        return \"bg-orange-500\";\n      case \"urgent\":\n        return \"bg-red-600\";\n      default:\n        return \"bg-gray-400\";\n    }\n  }, [task?.priority]);\n  // ---------- end hooks ----------\n\n  if (!open || !task) return null;\n\n  const fmtDate = (d?: string | null) => (d ? new Date(d).toLocaleDateString() : \"--\");\n  const fmtDateTime = (d?: string | null) => (d ? new Date(d).toLocaleString() : \"--\");\n  const fmtShortDate = (d?: string | null) => {\n    if (!d) return \"--\";\n    const dt = new Date(d);\n    // format DD/MM/YYYY (as in screenshot)\n    const dd = String(dt.getDate()).padStart(2, \"0\");\n    const mm = String(dt.getMonth() + 1).padStart(2, \"0\");\n    const yyyy = dt.getFullYear();\n    return `${dd}/${mm}/${yyyy}`;\n  };\n  const fmtTime = (d?: string | null) => (d ? new Date(d).toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" }) : \"--\");\n  const minsToHuman = (mins?: number | null) => {\n    if (mins === null || mins === undefined) return \"--\";\n    const h = Math.floor((mins || 0) / 60);\n    const m = (mins || 0) % 60;\n    if (h && m) return `${h}h ${m}m`;\n    if (h) return `${h}h`;\n    return `${m}m`;\n  };\n\n  // Placeholder actions (kept same behavior as before)\n  const sendReminderAction = () => {\n    alert(\"Reminder sent to assigned employees\");\n  };\n  const handleSendReminderMenu = () => {\n    setMenuOpen(false);\n    setReminderConfirmOpen(true);\n  };\n\n  // --- UPDATED: open Edit Task modal instead of alert; prefill fields ---\n  const handleEditTask = () => {\n    setMenuOpen(false);\n\n    // Prefill UI fields using `task`\n    setEtTitle(task.title ?? \"\");\n    setEtTaskCategory(\"\"); // not available on task object in shape provided\n    setEtProject(task.projectName ?? \"\");\n    setEtStartDate(task.startDate ?? null);\n    setEtDueDate(task.dueDate ?? null);\n    setEtWithoutDueDate(Boolean(task.noDueDate));\n    setEtStatus(task.taskStage?.name ?? \"Doing\");\n    setEtAssignedTo(\n      (task.assignedEmployees && task.assignedEmployees.length && task.assignedEmployees[0].name) ??\n        (task.assignedEmployeeIds && task.assignedEmployeeIds[0]) ??\n        \"\"\n    );\n    setEtDescription(task.description ?? \"\");\n    setEtLabel((task.labels && task.labels[0]?.name) ?? \"\");\n    setEtMilestone(task.milestone?.title ?? \"\");\n    setEtPriority((task.priority ? (String(task.priority).charAt(0).toUpperCase() + String(task.priority).slice(1)) : \"Low\") as\n      | \"Low\"\n      | \"Medium\"\n      | \"High\"\n      | \"Urgent\");\n    setEtMakePrivate(Boolean(task.isPrivate));\n    setEtTimeEstimateChecked(Boolean(task.timeEstimateMinutes));\n    setEtTimeEstimateMins(task.timeEstimateMinutes ?? \"\");\n    setEtDependentChecked(Boolean(task.isDependent));\n    setEtDependentTask(\"\");\n    setEtFile(null);\n    setEditTaskErrors(null);\n\n    setEditTaskOpen(true);\n  };\n\n  const handlePinTask = () => {\n    setMenuOpen(false);\n    alert(\"Pin Task clicked\");\n  };\n  const handleCopyTaskLink = () => {\n    setMenuOpen(false);\n    const link = `${typeof window !== \"undefined\" ? window.location.origin : \"\"}/tasks/${task.id}`;\n    try {\n      navigator.clipboard?.writeText(link);\n      alert(\"Task link copied to clipboard\");\n    } catch {\n      alert(\"Task link: \" + link);\n    }\n  };\n  const handleConfirmYes = () => {\n    sendReminderAction();\n    setReminderConfirmOpen(false);\n  };\n  const handleConfirmCancel = () => {\n    setReminderConfirmOpen(false);\n  };\n\n  // file upload UI (UI-only)\n  const onUploadClick = () => fileInputRef.current?.click();\n  const onFilePicked = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    if (!files || files.length === 0) return;\n    alert(\n      `${files.length} file(s) selected. Integrate your upload handler to actually send files to server.`\n    );\n    e.currentTarget.value = \"\";\n  };\n\n  // Subtask UI handlers (minimal; keep functionality same otherwise)\n  const onToggleSubtaskDone = () => {\n    setSubtaskDone((s) => !s);\n  };\n\n  // Subtask menu actions: View, Edit, Delete (UI-only)\n  const onSubtaskView = () => {\n    setSubtaskMenuOpen(false);\n    setViewSubtaskOpen(true);\n  };\n  const onSubtaskEdit = () => {\n    setSubtaskMenuOpen(false);\n    setEditSubtaskTitle(\"Title of the sub task\");\n    setEditSubtaskDesc(\"\");\n    setEditTitleError(null);\n    setEditSubtaskOpen(true);\n  };\n  const onSubtaskDelete = () => {\n    setSubtaskMenuOpen(false);\n    if (confirm(\"Delete subtask? This is UI-only.\")) {\n      alert(\"Subtask deleted (UI-only). Integrate API to persist.\");\n    }\n  };\n\n  // Add Subtask form handlers\n  const openAddSubtask = () => {\n    setNewSubtaskTitle(\"\");\n    setNewSubtaskDesc(\"\");\n    setTitleError(null);\n    setAddSubtaskOpen(true);\n  };\n  const onCancelAddSubtask = () => {\n    setAddSubtaskOpen(false);\n    setTitleError(null);\n  };\n  const onSaveAddSubtask = () => {\n    if (!newSubtaskTitle.trim()) {\n      setTitleError(\"Title is required\");\n      return;\n    }\n    alert(`Subtask \"${newSubtaskTitle}\" created (UI-only). Integrate API to persist.`);\n    setAddSubtaskOpen(false);\n  };\n\n  // Edit Subtask handlers (Update button)\n  const onCancelEditSubtask = () => {\n    setEditSubtaskOpen(false);\n    setEditTitleError(null);\n  };\n  const onUpdateSubtask = () => {\n    if (!editSubtaskTitle.trim()) {\n      setEditTitleError(\"Title is required\");\n      return;\n    }\n    alert(`Subtask updated to \"${editSubtaskTitle}\" (UI-only). Integrate API to persist.`);\n    setEditSubtaskOpen(false);\n  };\n\n  // helper: derive friendly filename (kept from earlier)\n  const friendlyNameFromUrl = (url?: string) => {\n    if (!url) return \"attachment\";\n    try {\n      const last = url.split(\"/\").pop() || url;\n      return decodeURIComponent(last.split(\"?\")[0]);\n    } catch {\n      return url;\n    }\n  };\n\n  // ----- Notes handlers (UI-only) -----\n  const onOpenNoteMenu = (note: Note) => {\n    setCurrentNote(note);\n    setOpenNoteMenuId(note.id);\n  };\n\n  const onViewNote = () => {\n    if (!currentNote) return;\n    setViewNoteOpen(true);\n    setOpenNoteMenuId(null);\n  };\n\n  const onEditNote = () => {\n    if (!currentNote) return;\n    setEditNoteTitle(currentNote.title);\n    setEditNoteType(currentNote.type);\n    setEditNoteContent(currentNote.content ?? \"\");\n    setEditNoteOpen(true);\n    setOpenNoteMenuId(null);\n  };\n\n  const onDeleteNote = () => {\n    if (!currentNote) return;\n    setDeleteNoteConfirmOpen(true);\n    setOpenNoteMenuId(null);\n  };\n\n  const confirmDeleteNote = () => {\n    if (!currentNote) {\n      setDeleteNoteConfirmOpen(false);\n      return;\n    }\n    setNotes((n) => n.filter((x) => x.id !== currentNote.id));\n    setDeleteNoteConfirmOpen(false);\n    setCurrentNote(null);\n  };\n\n  const cancelDeleteNote = () => {\n    setDeleteNoteConfirmOpen(false);\n    setCurrentNote(null);\n  };\n\n  const saveNoteEdit = () => {\n    if (!currentNote) return;\n    if (!editNoteTitle.trim()) {\n      alert(\"Title is required\");\n      return;\n    }\n    setNotes((n) =>\n      n.map((x) =>\n        x.id === currentNote.id\n          ? { ...x, title: editNoteTitle.trim(), type: editNoteType, content: editNoteContent }\n          : x\n      )\n    );\n    setEditNoteOpen(false);\n    setCurrentNote(null);\n  };\n\n  const closeViewNote = () => {\n    setViewNoteOpen(false);\n    setCurrentNote(null);\n  };\n\n  // Add Note handlers\n  const openAddNote = () => {\n    setAddNoteTitle(\"\");\n    setAddNoteContent(\"\");\n    setAddNoteType(\"public\");\n    setAddNoteTitleError(null);\n    setAddNoteOpen(true);\n  };\n\n  const cancelAddNote = () => {\n    setAddNoteOpen(false);\n    setAddNoteTitleError(null);\n  };\n\n  const saveAddNote = () => {\n    if (!addNoteTitle.trim()) {\n      setAddNoteTitleError(\"Title is required\");\n      return;\n    }\n    const newId = notes.length ? Math.max(...notes.map((n) => n.id)) + 1 : 1;\n    const newNote: Note = {\n      id: newId,\n      title: addNoteTitle.trim(),\n      type: addNoteType,\n      content: addNoteContent,\n    };\n    setNotes((n) => [newNote, ...n]);\n    setAddNoteOpen(false);\n    setAddNoteTitle(\"\");\n    setAddNoteContent(\"\");\n    setAddNoteType(\"public\");\n  };\n\n  // ----- end Notes handlers -----\n\n  // ----- Edit Task modal handlers (NEW UI) -----\n  const onAddCategoryClick = () => {\n    alert(\"Add Task Category clicked (UI-only).\");\n  };\n\n  const onAddLabelClick = () => {\n    alert(\"Add Label clicked (UI-only).\");\n  };\n\n  const onFileDrop = (f: File | null) => {\n    setEtFile(f);\n  };\n\n  const onCancelEditTask = () => {\n    setEditTaskOpen(false);\n    setEditTaskErrors(null);\n  };\n\n  const onUpdateTask = () => {\n    // basic validations\n    if (!etTitle.trim()) {\n      setEditTaskErrors(\"Title is required\");\n      return;\n    }\n    if (etDependentChecked && !etDependentTask.trim()) {\n      setEditTaskErrors(\"Dependent Task is required when dependency is checked\");\n      return;\n    }\n\n    // build payload (UI-only)\n    const payload = {\n      id: task.id,\n      title: etTitle.trim(),\n      category: etTaskCategory.trim(),\n      project: etProject,\n      startDate: etStartDate,\n      dueDate: etWithoutDueDate ? null : etDueDate,\n      withoutDueDate: etWithoutDueDate,\n      status: etStatus,\n      assignedTo: etAssignedTo,\n      description: etDescription.trim(),\n      label: etLabel,\n      milestone: etMilestone,\n      priority: etPriority,\n      isPrivate: etMakePrivate,\n      timeEstimateMins: etTimeEstimateChecked ? Number(etTimeEstimateMins || 0) : null,\n      isDependent: etDependentChecked,\n      dependentTask: etDependentTask,\n      fileName: etFile ? etFile.name : null,\n    };\n\n    alert(\"Update (UI-only) payload:\\n\" + JSON.stringify(payload, null, 2));\n    setEditTaskOpen(false);\n  };\n\n  const onChooseFileClick = () => {\n    // open native file dialog (hidden input)\n    fileInputRef.current?.click();\n  };\n\n  const onHiddenFilePicked = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const f = e.target.files && e.target.files[0];\n    if (f) {\n      setEtFile(f);\n    }\n    // clear input so same file can be picked again if needed\n    e.currentTarget.value = \"\";\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex justify-end bg-black/0\">\n      <div\n        className={[\n          \"relative h-full w-[83vw] max-w-[83vw] bg-white shadow-xl border-l\",\n          \"transform transition-transform duration-300\",\n          isVisible ? \"translate-x-0\" : \"translate-x-full\",\n          \"flex flex-col\",\n        ].join(\" \")}\n      >\n        {/* Header */}\n        <div className=\"flex items-center justify-between px-6 py-4 border-b\">\n          <div>\n            <div className=\"text-sm text-gray-500\">\n              Task #\n              {task.projectId ? `RTA-${String(task.id).padStart(2, \"0\")}` : `RTA-${String(task.id)}`}\n            </div>\n            <div className=\"flex items-center gap-3 mt-1\">\n              <div className=\"w-3 h-3 rounded-full bg-blue-500\" />\n              <div className=\"text-lg font-semibold\">{task.title ?? \"Task Name\"}</div>\n            </div>\n          </div>\n\n          {/* Close */}\n          <button aria-label=\"close\" onClick={onClose} className=\"p-2 rounded hover:bg-gray-100\" title=\"Close\">\n            <XMarkIcon className=\"w-5 h-5 text-gray-600\" />\n          </button>\n        </div>\n\n        {/* Body */}\n        <div className=\"flex-1 overflow-auto\">\n          <div className=\"p-6 grid grid-cols-1 lg:grid-cols-3 gap-6\">\n            {/* Left big card */}\n            <div className=\"lg:col-span-2 bg-white border rounded-lg p-5 relative\">\n              <div className=\"flex items-start justify-between\">\n                <div>\n                  <button\n                    onClick={() => task.id && onMarkComplete?.(task.id)}\n                    className=\"inline-block px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 text-sm\"\n                  >\n                    Mark As Complete\n                  </button>\n                </div>\n\n                <div className=\"flex items-center gap-2 relative\">\n                  {/* 3-dot menu */}\n                  <button ref={menuBtnRef} onClick={() => setMenuOpen((s) => !s)} className=\"p-2 rounded hover:bg-gray-100\">\n                    <svg className=\"w-5 h-5 text-gray-600\" fill=\"currentColor\">\n                      <circle cx=\"5\" cy=\"12\" r=\"1.5\" />\n                      <circle cx=\"12\" cy=\"12\" r=\"1.5\" />\n                      <circle cx=\"19\" cy=\"12\" r=\"1.5\" />\n                    </svg>\n                  </button>\n\n                  {menuOpen && (\n                    <div ref={menuRef} className=\"absolute right-10 top-10 w-48 bg-white border rounded-lg shadow-md p-2 z-50\">\n                      <button onClick={handleSendReminderMenu} className=\"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm\">\n                        🔔 Send Reminder\n                      </button>\n                      <button onClick={handleEditTask} className=\"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm\">\n                        ✏️ Edit Task\n                      </button>\n                      <button onClick={handlePinTask} className=\"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm\">\n                        📌 Pin Task\n                      </button>\n                      <button onClick={handleCopyTaskLink} className=\"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm\">\n                        🔗 Copy Task Link\n                      </button>\n                    </div>\n                  )}\n\n                  {/* placeholder to preserve layout */}\n                  <button onClick={onClose} className=\"p-2 rounded hover:bg-gray-100\" />\n                </div>\n              </div>\n\n              {/* Details grid */}\n              <div className=\"grid grid-cols-2 gap-x-6 gap-y-3 mt-6 text-sm\">\n                <div className=\"text-gray-500\">Project</div>\n                <div className=\"font-medium\">{task.projectName ?? `Project ${task.projectId ?? \"--\"}`}</div>\n\n                <div className=\"text-gray-500\">Priority</div>\n                <div className=\"flex items-center gap-2\">\n                  <span className={`w-2 h-2 rounded-full ${priorityDot}`} />\n                  <span className=\"font-medium\">{task.priority ?? \"Low\"}</span>\n                </div>\n\n                <div className=\"text-gray-500\">Assigned to</div>\n                <div className=\"font-medium\">\n                  {task.assignedEmployees && task.assignedEmployees.length\n                    ? task.assignedEmployees.map((a) => a.name).join(\", \")\n                    : task.assignedEmployeeIds && task.assignedEmployeeIds.length\n                    ? task.assignedEmployeeIds.join(\", \")\n                    : \"--\"}\n                </div>\n\n                <div className=\"text-gray-500\">Project Code</div>\n                <div className=\"font-medium\">RTA-{String(task.id).padStart(2, \"0\")}</div>\n\n                <div className=\"text-gray-500\">Milestones</div>\n                <div className=\"font-medium\">{task.milestone?.title ?? \"----\"}</div>\n\n                <div className=\"text-gray-500\">Label</div>\n                <div className=\"font-medium\">{task.labels && task.labels.length ? task.labels.map((l) => l.name).join(\", \") : \"--\"}</div>\n\n                <div className=\"text-gray-500\">Task Category</div>\n                <div className=\"font-medium\">--</div>\n\n                <div className=\"text-gray-500\">Description</div>\n                <div className=\"font-medium whitespace-pre-wrap\">{task.description ?? \"--\"}</div>\n              </div>\n            </div>\n\n            {/* Right small card */}\n            <div className=\"bg-white border rounded-lg p-5\">\n              <div className=\"flex items-center gap-3\">\n                <span className=\"w-3 h-3 rounded-full bg-blue-500\" />\n                <div className=\"font-medium\">{task.taskStage?.name ?? \"Doing\"}</div>\n              </div>\n\n              <div className=\"mt-4 text-sm\">\n                <div className=\"flex justify-between py-2\">\n                  <div className=\"text-gray-500\">Created On</div>\n                  <div className=\"font-medium\">{fmtDateTime(task.createdOn)}</div>\n                </div>\n\n                <div className=\"flex justify-between py-2\">\n                  <div className=\"text-gray-500\">Start Date</div>\n                  <div className=\"font-medium\">{fmtDate(task.startDate)}</div>\n                </div>\n\n                <div className=\"flex justify-between py-2\">\n                  <div className=\"text-gray-500\">Due Date</div>\n                  <div className=\"font-medium\">{task.noDueDate ? \"--\" : fmtDate(task.dueDate)}</div>\n                </div>\n\n                <div className=\"flex justify-between py-2\">\n                  <div className=\"text-gray-500\">Hours Logged</div>\n                  <div className=\"font-medium\">{minsToHuman(task.hoursLoggedMinutes ?? null)}</div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Tabs area */}\n          <div className=\"px-6 pb-6\">\n            <div className=\"bg-white border rounded-lg p-4\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-6\">\n                  <button\n                    onClick={() => setTab(\"files\")}\n                    className={`pb-2 ${tab === \"files\" ? \"border-b-2 border-blue-600 font-medium\" : \"text-gray-500\"}`}\n                  >\n                    Files\n                  </button>\n                  <button\n                    onClick={() => setTab(\"subtask\")}\n                    className={`pb-2 ${tab === \"subtask\" ? \"border-b-2 border-blue-600 font-medium\" : \"text-gray-500\"}`}\n                  >\n                    Sub Task\n                  </button>\n                  <button\n                    onClick={() => setTab(\"timesheet\")}\n                    className={`pb-2 ${tab === \"timesheet\" ? \"border-b-2 border-blue-600 font-medium\" : \"text-gray-500\"}`}\n                  >\n                    Timesheet\n                  </button>\n                  <button\n                    onClick={() => setTab(\"notes\")}\n                    className={`pb-2 ${tab === \"notes\" ? \"border-b-2 border-blue-600 font-medium\" : \"text-gray-500\"}`}\n                  >\n                    Notes\n                  </button>\n                </div>\n\n                {/* Removed right upload button (kept blank to match UI) */}\n                <div />\n              </div>\n\n              {/* Content area */}\n              <div className=\"mt-4 border rounded-lg p-4 bg-white h-60 overflow-auto\">\n                {/* Hidden file input (for Files tab) */}\n                <input ref={fileInputRef} type=\"file\" className=\"hidden\" onChange={onFilePicked} multiple />\n\n                {/* ----- FILES TAB ----- */}\n                {tab === \"files\" && (\n                  <div className=\"h-full flex flex-col\">\n                    <div className=\"flex items-center gap-3\">\n                      <button\n                        onClick={onUploadClick}\n                        className=\"inline-flex items-center gap-2 text-blue-600 text-sm font-medium hover:underline\"\n                        aria-label=\"Upload File\"\n                        title=\"Upload File\"\n                      >\n                        <span className=\"flex items-center justify-center w-6 h-6 rounded-full bg-white border border-blue-600 text-blue-600 text-xs\">+</span>\n                        <span>Upload File</span>\n                      </button>\n                    </div>\n\n                    <div className=\"mt-3 flex-1 overflow-auto\">\n                      {task.attachments && task.attachments.length ? (\n                        <ul className=\"space-y-2 text-sm\">\n                          {task.attachments.map((a, i) => {\n                            const displayName = a.name ?? friendlyNameFromUrl(a.url);\n                            return (\n                              <li key={i} className=\"flex items-center justify-between\">\n                                <div className=\"truncate max-w-[80%]\">{displayName}</div>\n                                <div className=\"text-xs text-gray-500\">\n                                  {a.url ? (\n                                    <a href={a.url} target=\"_blank\" rel=\"noreferrer\" className=\"underline\">\n                                      Download\n                                    </a>\n                                  ) : null}\n                                </div>\n                              </li>\n                            );\n                          })}\n                        </ul>\n                      ) : (\n                        <div className=\"text-gray-500\">{/* intentionally minimal empty state */}</div>\n                      )}\n                    </div>\n                  </div>\n                )}\n\n                {/* ----- SUBTASK TAB ----- */}\n                {tab === \"subtask\" && (\n                  <div className=\"h-full flex flex-col\">\n                    <div className=\"flex items-center gap-3\">\n                      <button\n                        onClick={openAddSubtask}\n                        className=\"inline-flex items-center gap-2 text-blue-600 text-sm font-medium hover:underline\"\n                        aria-label=\"Add a Sub Task\"\n                        title=\"Add a Sub Task\"\n                      >\n                        <span className=\"flex items-center justify-center w-6 h-6 rounded-full bg-white border border-blue-600 text-blue-600 text-xs\">+</span>\n                        <span>Add a Sub Task</span>\n                      </button>\n                    </div>\n\n                    <div className=\"mt-4 flex-1 overflow-auto\">\n                      <ul className=\"space-y-3\">\n                        <li className=\"flex items-center justify-between pr-2\">\n                          <div className=\"flex items-center gap-3\">\n                            <label className=\"inline-flex items-center gap-2 cursor-pointer\">\n                              <input\n                                type=\"checkbox\"\n                                checked={subtaskDone}\n                                onChange={onToggleSubtaskDone}\n                                className=\"w-4 h-4 rounded border-gray-300\"\n                                aria-label=\"toggle subtask done\"\n                              />\n                              <span className={`text-sm ${subtaskDone ? \"line-through text-gray-400\" : \"text-gray-700\"}`}>\n                                Title of the sub task\n                              </span>\n                            </label>\n                          </div>\n\n                          {/* three-dot for subtask actions */}\n                          <div className=\"relative\">\n                            <button\n                              ref={subtaskMenuBtnRef}\n                              onClick={() => setSubtaskMenuOpen((s) => !s)}\n                              className=\"p-2 rounded hover:bg-gray-100\"\n                              aria-label=\"subtask menu\"\n                            >\n                              <svg className=\"w-5 h-5 text-gray-600\" fill=\"currentColor\">\n                                <circle cx=\"5\" cy=\"12\" r=\"1.5\" />\n                                <circle cx=\"12\" cy=\"12\" r=\"1.5\" />\n                                <circle cx=\"19\" cy=\"12\" r=\"1.5\" />\n                              </svg>\n                            </button>\n\n                            {subtaskMenuOpen && (\n                              <div ref={subtaskMenuRef} className=\"absolute right-0 top-8 w-40 bg-white border rounded-lg shadow-md p-1 z-50\">\n                                <button onClick={onSubtaskView} className=\"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm flex items-center gap-2\">\n                                  <svg className=\"w-4 h-4 text-gray-600\" viewBox=\"0 0 24 24\" fill=\"none\"><path d=\"M12 5c-7 0-11 7-11 7s4 7 11 7 11-7 11-7-4-7-11-7z\" stroke=\"currentColor\" strokeWidth=\"1.2\"/></svg>\n                                  View\n                                </button>\n                                <button onClick={onSubtaskEdit} className=\"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm flex items-center gap-2\">\n                                  <svg className=\"w-4 h-4 text-gray-600\" viewBox=\"0 0 24 24\" fill=\"none\"><path d=\"M3 21l3-1 11-11 2 2-11 11-1 3H3z\" stroke=\"currentColor\" strokeWidth=\"1.2\"/></svg>\n                                  Edit\n                                </button>\n                                <button onClick={onSubtaskDelete} className=\"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm flex items-center gap-2 text-red-600\">\n                                  <svg className=\"w-4 h-4 text-red-600\" viewBox=\"0 0 24 24\" fill=\"none\"><path d=\"M3 6h18M8 6v12a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V6M10 6V4a2 2 0 0 1 2-2h0a2 2 0 0 1 2 2v2\" stroke=\"currentColor\" strokeWidth=\"1.2\"/></svg>\n                                  Delete\n                                </button>\n                              </div>\n                            )}\n                          </div>\n                        </li>\n                      </ul>\n                    </div>\n                  </div>\n                )}\n\n                {/* ----- TIMESHEET TAB: new table matching screenshot ----- */}\n                {tab === \"timesheet\" && (\n                  <div className=\"h-full flex flex-col\">\n                    <div className=\"mt-1 flex-1 overflow-auto\">\n                      <div className=\"rounded-md overflow-hidden border\">\n                        {/* header row */}\n                        <div className=\"bg-[#e8f2fb] px-4 py-3 text-sm text-gray-700 grid grid-cols-4 gap-4 items-center rounded-t-md\">\n                          <div className=\"font-medium\">Employee</div>\n                          <div className=\"font-medium\">Start Time</div>\n                          <div className=\"font-medium\">End Time</div>\n                          <div className=\"font-medium text-right\">Hours Logged</div>\n                        </div>\n\n                        {/* rows */}\n                        <div className=\"bg-white divide-y\">\n                          {timesheets.map((row) => (\n                            <div key={row.id} className=\"px-4 py-4 grid grid-cols-4 gap-4 items-center text-sm\">\n                              <div className=\"flex items-center gap-3\">\n                                <div className=\"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center overflow-hidden\">\n                                  {/* avatar fallback (no external images) */}\n                                  {row.employee.profileUrl ? (\n                                    // eslint-disable-next-line @next/next/no-img-element\n                                    <img src={row.employee.profileUrl} alt={row.employee.name} className=\"w-full h-full object-cover\" />\n                                  ) : (\n                                    <span className=\"text-xs text-gray-600\">{row.employee.name.split(\" \").map(n=>n[0]).join(\"\")}</span>\n                                  )}\n                                </div>\n                                <div>\n                                  <div className=\"font-medium\">{row.employee.name}</div>\n                                  <div className=\"text-xs text-gray-500\">{row.employee.role ?? \"\"}</div>\n                                </div>\n                              </div>\n\n                              <div className=\"text-sm\">\n                                <div className=\"font-medium\">{fmtShortDate(row.startTime)}</div>\n                                <div className=\"text-xs text-gray-500\">{fmtTime(row.startTime)}</div>\n                              </div>\n\n                              <div className=\"text-sm\">\n                                <div className=\"font-medium\">{fmtShortDate(row.endTime)}</div>\n                                <div className=\"text-xs text-gray-500\">{fmtTime(row.endTime)}</div>\n                              </div>\n\n                              <div className=\"text-right\">\n                                <div className=\"font-medium\">{minsToHuman(row.minutesLogged)}</div>\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n\n                        {/* footer rounded bottom */}\n                        <div className=\"h-2 bg-white rounded-b-md\" />\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {/* ----- NOTES TAB ----- */}\n                {tab === \"notes\" && (\n                  <div className=\"h-full flex flex-col\">\n                    <div className=\"flex items-center gap-3\">\n                      <button\n                        onClick={openAddNote}\n                        data-add-note-btn\n                        className=\"inline-flex items-center gap-2 text-blue-600 text-sm font-medium hover:underline\"\n                        aria-label=\"Add a Note\"\n                        title=\"Add a Note\"\n                      >\n                        <span className=\"flex items-center justify-center w-6 h-6 rounded-full bg-white border border-blue-600 text-blue-600 text-xs\">+</span>\n                        <span>Add a Note</span>\n                      </button>\n                    </div>\n\n                    <div className=\"mt-4 flex-1 overflow-auto relative\">\n                      <div className=\"rounded-md overflow-hidden border relative\">\n                        {/* header */}\n                        <div className=\"bg-[#e8f2fb] px-4 py-3 text-sm text-gray-700 grid grid-cols-3 gap-4 items-center\">\n                          <div className=\"font-medium\">Note Title</div>\n                          <div className=\"font-medium\">Note Type</div>\n                          <div className=\"font-medium text-right\">Action</div>\n                        </div>\n\n                        {/* actions popup at top-right of this table card */}\n                        {openNoteMenuId !== null && currentNote && (\n                          <div data-notes-menu className=\"absolute right-3 top-3 z-50 w-44 bg-white border rounded-lg shadow-md p-1\">\n                            <button onClick={onViewNote} className=\"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm flex items-center gap-2\">\n                              View\n                            </button>\n                            <button onClick={onEditNote} className=\"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm flex items-center gap-2\">\n                              Edit\n                            </button>\n                            <button onClick={onDeleteNote} className=\"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm flex items-center gap-2 text-red-600\">\n                              Delete\n                            </button>\n                          </div>\n                        )}\n\n                        {/* rows */}\n                        <div className=\"bg-white p-3 text-sm\">\n                          {notes.length ? (\n                            <ul className=\"space-y-3\">\n                              {notes.map((note) => (\n                                <li key={note.id} className=\"flex items-center justify-between\">\n                                  <div className=\"truncate max-w-[40%]\">{note.title}</div>\n\n                                  <div className=\"flex items-center gap-2 text-gray-600\">\n                                    {note.type === \"public\" ? <span>Public</span> : <span>Private</span>}\n                                  </div>\n\n                                  <div className=\"relative\">\n                                    <button\n                                      data-notes-menu-btn\n                                      onClick={() => onOpenNoteMenu(note)}\n                                      className=\"p-2 rounded hover:bg-gray-100\"\n                                      aria-label=\"note actions\"\n                                    >\n                                      <svg className=\"w-5 h-5 text-gray-600\" fill=\"currentColor\">\n                                        <circle cx=\"5\" cy=\"12\" r=\"1.5\" />\n                                        <circle cx=\"12\" cy=\"12\" r=\"1.5\" />\n                                        <circle cx=\"19\" cy=\"12\" r=\"1.5\" />\n                                      </svg>\n                                    </button>\n                                  </div>\n                                </li>\n                              ))}\n                            </ul>\n                          ) : (\n                            <div className=\"text-gray-500 p-4\">No notes yet</div>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Reminder confirmation modal */}\n      {reminderConfirmOpen && (\n        <div className=\"fixed inset-0 z-[60] flex items-center justify-center bg-black/30 px-4\">\n          <div ref={reminderModalRef} role=\"dialog\" aria-modal=\"true\" className=\"w-full max-w-md bg-white rounded-lg shadow-lg p-6\">\n            <div className=\"text-center\">\n              <h3 className=\"text-xl font-semibold\">Are You Sure?</h3>\n              <p className=\"mt-3 text-sm text-gray-500\">You want to send reminder to the assigned employees.</p>\n            </div>\n\n            <div className=\"mt-6 flex items-center justify-center gap-4\">\n              <button onClick={handleConfirmCancel} className=\"px-6 py-2 border border-blue-600 text-blue-600 rounded-full text-sm hover:bg-gray-50\">Cancel</button>\n              <button onClick={handleConfirmYes} className=\"px-6 py-2 bg-blue-600 text-white rounded-full text-sm hover:bg-blue-700\">Yes</button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Add Subtask modal */}\n      {addSubtaskOpen && (\n        <div className=\"fixed inset-0 z-[70] flex items-center justify-center bg-black/30 px-4\">\n          <div role=\"dialog\" aria-modal=\"true\" className=\"w-full max-w-lg bg-white rounded-lg shadow-lg p-6\">\n            <div className=\"mb-4\">\n              <label className=\"block text-sm font-medium text-gray-700\">\n                Title <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                value={newSubtaskTitle}\n                onChange={(e) => {\n                  setNewSubtaskTitle(e.target.value);\n                  if (titleError) setTitleError(null);\n                }}\n                className=\"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                placeholder=\"Enter subtask title\"\n                autoFocus\n              />\n              {titleError && <div className=\"mt-1 text-xs text-red-600\">{titleError}</div>}\n            </div>\n\n            <div className=\"mb-6\">\n              <label className=\"block text-sm font-medium text-gray-700\">Description</label>\n              <textarea\n                value={newSubtaskDesc}\n                onChange={(e) => setNewSubtaskDesc(e.target.value)}\n                className=\"mt-2 w-full min-h-[90px] rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                placeholder=\"Enter description (optional)\"\n              />\n            </div>\n\n            <div className=\"flex items-center justify-center gap-6\">\n              <button\n                onClick={onCancelAddSubtask}\n                className=\"px-6 py-2 rounded-full border border-blue-600 text-blue-600 text-sm hover:bg-gray-50\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={onSaveAddSubtask}\n                className=\"px-6 py-2 rounded-full bg-blue-600 text-white text-sm hover:bg-blue-700\"\n              >\n                Save\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* View Subtask modal */}\n      {viewSubtaskOpen && (\n        <div className=\"fixed inset-0 z-[80] flex items-center justify-center bg-black/30 px-4\">\n          <div role=\"dialog\" aria-modal=\"true\" className=\"w-full max-w-lg bg-white rounded-lg shadow-lg p-6\">\n            <h3 className=\"text-lg font-semibold mb-4\">Subtask Details</h3>\n            <div className=\"grid grid-cols-2 gap-x-6 gap-y-3 text-sm\">\n              <div className=\"text-gray-500\">Title</div>\n              <div className=\"font-medium\">Title of the sub task</div>\n\n              <div className=\"text-gray-500\">Description</div>\n              <div className=\"font-medium\">--</div>\n            </div>\n\n            <div className=\"mt-6 flex justify-end\">\n              <button\n                onClick={() => setViewSubtaskOpen(false)}\n                className=\"px-6 py-2 rounded-full border border-gray-300 text-gray-700 text-sm hover:bg-gray-50\"\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Edit Subtask modal */}\n      {editSubtaskOpen && (\n        <div className=\"fixed inset-0 z-[90] flex items-center justify-center bg-black/30 px-4\">\n          <div role=\"dialog\" aria-modal=\"true\" className=\"w-full max-w-lg bg-white rounded-lg shadow-lg p-6\">\n            <div className=\"mb-4\">\n              <label className=\"block text-sm font-medium text-gray-700\">\n                Title <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                value={editSubtaskTitle}\n                onChange={(e) => {\n                  setEditSubtaskTitle(e.target.value);\n                  if (editTitleError) setEditTitleError(null);\n                }}\n                className=\"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                placeholder=\"Enter subtask title\"\n                autoFocus\n              />\n              {editTitleError && <div className=\"mt-1 text-xs text-red-600\">{editTitleError}</div>}\n            </div>\n\n            <div className=\"mb-6\">\n              <label className=\"block text-sm font-medium text-gray-700\">Description</label>\n              <textarea\n                value={editSubtaskDesc}\n                onChange={(e) => setEditSubtaskDesc(e.target.value)}\n                className=\"mt-2 w-full min-h-[90px] rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                placeholder=\"Enter description (optional)\"\n              />\n            </div>\n\n            <div className=\"flex items-center justify-center gap-6\">\n              <button\n                onClick={onCancelEditSubtask}\n                className=\"px-6 py-2 rounded-full border border-blue-600 text-blue-600 text-sm hover:bg-gray-50\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={onUpdateSubtask}\n                className=\"px-6 py-2 rounded-full bg-blue-600 text-white text-sm hover:bg-blue-700\"\n              >\n                Update\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Add Note modal */}\n      {addNoteOpen && (\n        <div className=\"fixed inset-0 z-[85] flex items-center justify-center bg-black/30 px-4\">\n          <div data-add-note-modal role=\"dialog\" aria-modal=\"true\" className=\"w-full max-w-lg bg-white rounded-lg shadow-lg p-6\">\n            <div className=\"mb-4\">\n              <label className=\"block text-sm font-medium text-gray-700\">\n                Note Title <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                value={addNoteTitle}\n                onChange={(e) => {\n                  setAddNoteTitle(e.target.value);\n                  if (addNoteTitleError) setAddNoteTitleError(null);\n                }}\n                className=\"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                placeholder=\"Enter note title\"\n                autoFocus\n              />\n              {addNoteTitleError && <div className=\"mt-1 text-xs text-red-600\">{addNoteTitleError}</div>}\n            </div>\n\n            <div className=\"mb-4\">\n              <label className=\"block text-sm font-medium text-gray-700\">Note Detail</label>\n              <textarea\n                value={addNoteContent}\n                onChange={(e) => setAddNoteContent(e.target.value)}\n                className=\"mt-2 w-full min-h-[100px] rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                placeholder=\"Enter note details (optional)\"\n              />\n            </div>\n\n            <div className=\"mb-6 flex items-center gap-6\">\n              <label className=\"inline-flex items-center gap-2\">\n                <input\n                  type=\"radio\"\n                  name=\"note-type\"\n                  checked={addNoteType === \"public\"}\n                  onChange={() => setAddNoteType(\"public\")}\n                />\n                <span className=\"text-sm\">Public</span>\n              </label>\n              <label className=\"inline-flex items-center gap-2\">\n                <input\n                  type=\"radio\"\n                  name=\"note-type\"\n                  checked={addNoteType === \"private\"}\n                  onChange={() => setAddNoteType(\"private\")}\n                />\n                <span className=\"text-sm\">Private</span>\n              </label>\n            </div>\n\n            <div className=\"flex items-center justify-center gap-6\">\n              <button\n                onClick={cancelAddNote}\n                className=\"px-8 py-2 rounded-full border border-blue-600 text-blue-600 text-sm hover:bg-gray-50\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={saveAddNote}\n                className=\"px-8 py-2 rounded-full bg-blue-600 text-white text-sm hover:bg-blue-700\"\n              >\n                Save\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* View Note modal */}\n      {viewNoteOpen && currentNote && (\n        <div className=\"fixed inset-0 z-[86] flex items-center justify-center bg-black/30 px-4\">\n          <div role=\"dialog\" aria-modal=\"true\" className=\"w-full max-w-lg bg-white rounded-lg shadow-lg p-6\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-lg font-semibold\">View Note</h3>\n              <button onClick={closeViewNote} className=\"p-2 rounded hover:bg-gray-100\">\n                <XMarkIcon className=\"w-5 h-5 text-gray-600\" />\n              </button>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-x-6 gap-y-3 text-sm\">\n              <div className=\"text-gray-500\">Title</div>\n              <div className=\"font-medium\">{currentNote.title}</div>\n\n              <div className=\"text-gray-500\">Type</div>\n              <div className=\"font-medium\">{currentNote.type === \"public\" ? \"Public\" : \"Private\"}</div>\n\n              <div className=\"text-gray-500\">Content</div>\n              <div className=\"font-medium whitespace-pre-wrap\">{currentNote.content ?? \"--\"}</div>\n            </div>\n\n            <div className=\"mt-6 flex justify-end\">\n              <button onClick={closeViewNote} className=\"px-6 py-2 rounded-full border border-gray-300 text-gray-700 text-sm hover:bg-gray-50\">\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Edit Note modal */}\n      {editNoteOpen && currentNote && (\n        <div className=\"fixed inset-0 z-[87] flex items-center justify-center bg-black/30 px-4\">\n          <div role=\"dialog\" aria-modal=\"true\" className=\"w-full max-w-lg bg-white rounded-lg shadow-lg p-6\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-lg font-semibold\">Edit Note</h3>\n              <button onClick={() => { setEditNoteOpen(false); setCurrentNote(null); }} className=\"p-2 rounded hover:bg-gray-100\">\n                <XMarkIcon className=\"w-5 h-5 text-gray-600\" />\n              </button>\n            </div>\n\n            <div className=\"mb-4\">\n              <label className=\"block text-sm font-medium text-gray-700\">Title <span className=\"text-red-500\">*</span></label>\n              <input\n                value={editNoteTitle}\n                onChange={(e) => setEditNoteTitle(e.target.value)}\n                className=\"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                placeholder=\"Enter note title\"\n                autoFocus\n              />\n            </div>\n\n            <div className=\"mb-4\">\n              <label className=\"block text-sm font-medium text-gray-700\">Type</label>\n              <select\n                value={editNoteType}\n                onChange={(e) => setEditNoteType(e.target.value as \"public\" | \"private\")}\n                className=\"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500\"\n              >\n                <option value=\"public\">Public</option>\n                <option value=\"private\">Private</option>\n              </select>\n            </div>\n\n            <div className=\"mb-6\">\n              <label className=\"block text-sm font-medium text-gray-700\">Content</label>\n              <textarea\n                value={editNoteContent}\n                onChange={(e) => setEditNoteContent(e.target.value)}\n                className=\"mt-2 w-full min-h-[120px] rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                placeholder=\"Enter note content (optional)\"\n              />\n            </div>\n\n            <div className=\"flex items-center justify-center gap-6\">\n              <button onClick={() => { setEditNoteOpen(false); setCurrentNote(null); }} className=\"px-6 py-2 rounded-full border border-blue-600 text-blue-600 text-sm hover:bg-gray-50\">\n                Cancel\n              </button>\n              <button onClick={saveNoteEdit} className=\"px-6 py-2 rounded-full bg-blue-600 text-white text-sm hover:bg-blue-700\">\n                Save\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Delete Note Confirm modal */}\n      {deleteNoteConfirmOpen && currentNote && (\n        <div className=\"fixed inset-0 z-[88] flex items-center justify-center bg-black/30 px-4\">\n          <div role=\"dialog\" aria-modal=\"true\" className=\"w-full max-w-md bg-white rounded-lg shadow-lg p-6\">\n            <div className=\"text-center\">\n              <h3 className=\"text-xl font-semibold\">Are you sure?</h3>\n              <p className=\"mt-3 text-sm text-gray-500\">Delete note &quot;{currentNote.title}&quot;. This action cannot be undone.</p>\n            </div>\n\n            <div className=\"mt-6 flex items-center justify-center gap-4\">\n              <button onClick={cancelDeleteNote} className=\"px-6 py-2 border border-blue-600 text-blue-600 rounded-full text-sm hover:bg-gray-50\">Cancel</button>\n              <button onClick={confirmDeleteNote} className=\"px-6 py-2 bg-red-600 text-white rounded-full text-sm hover:bg-red-700\">Delete</button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* ------------------ EDIT TASK modal (FULL UI per screenshot) ------------------ */}\n      {editTaskOpen && (\n        <div className=\"fixed inset-0 z-[95] flex items-start justify-center pt-10 pb-10 overflow-auto bg-black/30 px-4\">\n          <div role=\"dialog\" aria-modal=\"true\" className=\"w-full max-w-[980px] bg-white rounded-lg shadow-lg p-4\">\n            {/* Header */}\n            <div className=\"flex items-center justify-between border-b pb-3 px-4\">\n              <div className=\"text-lg font-semibold\">Update Task Details</div>\n              <button onClick={() => setEditTaskOpen(false)} className=\"p-1 rounded hover:bg-gray-100\">\n                <XMarkIcon className=\"w-5 h-5 text-gray-600\" />\n              </button>\n            </div>\n\n            <div className=\"p-4 space-y-4\">\n              {/* Task Information card */}\n              <div className=\"border rounded-lg p-4\">\n                <div className=\"text-sm font-medium mb-3\">Task Information</div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  {/* Title */}\n                  <div className=\"md:col-span-2\">\n                    <label className=\"block text-sm text-gray-600\">Title <span className=\"text-red-500\">*</span></label>\n                    <input\n                      value={etTitle}\n                      onChange={(e) => { setEtTitle(e.target.value); if (editTaskErrors) setEditTaskErrors(null); }}\n                      className=\"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                      placeholder=\"Task Name\"\n                    />\n                  </div>\n\n                  {/* Task Category */}\n                  <div>\n                    <label className=\"block text-sm text-gray-600\">Task Category</label>\n                    <div className=\"mt-2 flex gap-2\">\n                      <select value={etTaskCategory} onChange={(e) => setEtTaskCategory(e.target.value)} className=\"flex-1 rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500\">\n                        <option value=\"\">--</option>\n                      </select>\n                      <button onClick={onAddCategoryClick} className=\"px-3 py-2 rounded border bg-gray-100 text-sm\">Add</button>\n                    </div>\n                  </div>\n\n                  {/* Project (full width next row) */}\n                  <div className=\"md:col-span-2\">\n                    <label className=\"block text-sm text-gray-600 mt-2\">Project <span className=\"text-red-500\">*</span></label>\n                    <select value={etProject} onChange={(e) => setEtProject(e.target.value)} className=\"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500\">\n                      <option value={task.projectName ?? \"\"}>{task.projectName ?? \"Project Name\"}</option>\n                    </select>\n                  </div>\n\n                  {/* Client details area */}\n                  <div>\n                    <div className=\"text-sm text-gray-600 mt-2\">Client Details</div>\n                    <div className=\"mt-2 flex items-center gap-2\">\n                      <div className=\"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-xs\">JD</div>\n                      <div className=\"text-sm\">\n                        <div className=\"font-medium\">John Doe</div>\n                        <div className=\"text-xs text-gray-500\">Curilo Solutions</div>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Start Date */}\n                  <div>\n                    <label className=\"block text-sm text-gray-600 mt-2\">Start Date</label>\n                    <input\n                      type=\"date\"\n                      value={etStartDate ? etStartDate.split(\"T\")[0] : \"\"}\n                      onChange={(e) => setEtStartDate(e.target.value ? e.target.value : null)}\n                      className=\"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                    />\n                  </div>\n\n                  {/* Due Date */}\n                  <div>\n                    <label className=\"block text-sm text-gray-600 mt-2\">Due Date</label>\n                    <input\n                      type=\"date\"\n                      value={etDueDate ? etDueDate.split(\"T\")[0] : \"\"}\n                      onChange={(e) => setEtDueDate(e.target.value ? e.target.value : null)}\n                      disabled={etWithoutDueDate}\n                      className=\"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 disabled:opacity-60\"\n                    />\n                    <label className=\"inline-flex items-center gap-2 mt-2 text-sm\">\n                      <input type=\"checkbox\" checked={etWithoutDueDate} onChange={(e) => setEtWithoutDueDate(e.target.checked)} />\n                      <span>Without Due Date</span>\n                    </label>\n                  </div>\n\n                  {/* Status */}\n                  <div>\n                    <label className=\"block text-sm text-gray-600 mt-2\">Status</label>\n                    <select value={etStatus} onChange={(e) => setEtStatus(e.target.value)} className=\"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500\">\n                      <option value=\"Doing\">Doing</option>\n                      <option value=\"To Do\">To Do</option>\n                      <option value=\"Done\">Done</option>\n                    </select>\n                  </div>\n\n                  {/* Assigned To */}\n                  <div>\n                    <label className=\"block text-sm text-gray-600 mt-2\">Assigned To</label>\n                    <select value={etAssignedTo} onChange={(e) => setEtAssignedTo(e.target.value)} className=\"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500\">\n                      <option value={etAssignedTo || \"\"}>{etAssignedTo || \"Riya Sharma\"}</option>\n                    </select>\n                  </div>\n\n                  {/* Description (full width) */}\n                  <div className=\"md:col-span-3\">\n                    <label className=\"block text-sm text-gray-600 mt-2\">Description</label>\n                    <textarea value={etDescription} onChange={(e) => setEtDescription(e.target.value)} className=\"mt-2 w-full min-h-[80px] rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500\" placeholder=\"--\" />\n                  </div>\n                </div>\n              </div>\n\n              {/* Other Details card */}\n              <div className=\"border rounded-lg p-4\">\n                <div className=\"text-sm font-medium mb-3\">Other Details</div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-6 gap-4 items-end\">\n                  {/* Label */}\n                  <div className=\"md:col-span-2\">\n                    <label className=\"block text-sm text-gray-600\">Label</label>\n                    <div className=\"mt-2 flex gap-2\">\n                      <select value={etLabel} onChange={(e) => setEtLabel(e.target.value)} className=\"flex-1 rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500\">\n                        <option value=\"\">--</option>\n                      </select>\n                      <button onClick={onAddLabelClick} className=\"px-3 py-2 rounded border bg-gray-100 text-sm\">Add</button>\n                    </div>\n                  </div>\n\n                  {/* Milestones */}\n                  <div className=\"md:col-span-2\">\n                    <label className=\"block text-sm text-gray-600\">Milestones</label>\n                    <select value={etMilestone} onChange={(e) => setEtMilestone(e.target.value)} className=\"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500\">\n                      <option value=\"\">--</option>\n                    </select>\n                  </div>\n\n                  {/* Priority */}\n                  <div className=\"md:col-span-2\">\n                    <label className=\"block text-sm text-gray-600\">Priority</label>\n                    <div className=\"mt-2 flex items-center justify-between gap-2\">\n                      <div className=\"flex items-center gap-3\">\n                        <span className={`w-3 h-3 rounded-full ${etPriority === \"Low\" ? \"bg-green-500\" : etPriority === \"Medium\" ? \"bg-yellow-400\" : etPriority === \"High\" ? \"bg-orange-500\" : \"bg-red-600\"}`} />\n                        <select value={etPriority} onChange={(e) => setEtPriority(e.target.value as any)} className=\"rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500\">\n                          <option value=\"Low\">Low</option>\n                          <option value=\"Medium\">Medium</option>\n                          <option value=\"High\">High</option>\n                          <option value=\"Urgent\">Urgent</option>\n                        </select>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Make Private */}\n                  <div className=\"md:col-span-2\">\n                    <label className=\"inline-flex items-center gap-2\">\n                      <input type=\"checkbox\" checked={etMakePrivate} onChange={(e) => setEtMakePrivate(e.target.checked)} />\n                      <span className=\"text-sm\">Make Private</span>\n                    </label>\n                  </div>\n\n                  {/* Time Estimate */}\n                  <div className=\"md:col-span-2\">\n                    <label className=\"inline-flex items-center gap-2\">\n                      <input type=\"checkbox\" checked={etTimeEstimateChecked} onChange={(e) => setEtTimeEstimateChecked(e.target.checked)} />\n                      <span className=\"text-sm\">Time Estimate</span>\n                    </label>\n                    {etTimeEstimateChecked && (\n                      <div className=\"mt-2\">\n                        <input type=\"number\" min={0} value={etTimeEstimateMins} onChange={(e) => setEtTimeEstimateMins(e.target.value === \"\" ? \"\" : Number(e.target.value))} className=\"w-32 rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500\" />\n                        <span className=\"ml-2 text-sm text-gray-500\">mins</span>\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Task is dependent */}\n                  <div className=\"md:col-span-2\">\n                    <label className=\"inline-flex items-center gap-2\">\n                      <input type=\"checkbox\" checked={etDependentChecked} onChange={(e) => setEtDependentChecked(e.target.checked)} />\n                      <span className=\"text-sm\">Task is dependent on other task</span>\n                    </label>\n\n                    {etDependentChecked && (\n                      <div className=\"mt-2\">\n                        <label className=\"block text-sm text-gray-600\">Dependent Task <span className=\"text-red-500\">*</span></label>\n                        <select value={etDependentTask} onChange={(e) => setEtDependentTask(e.target.value)} className=\"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500\">\n                          <option value=\"\">Task Name</option>\n                        </select>\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Add File drop area (full width) */}\n                  <div className=\"md:col-span-6 mt-2\">\n                    <label className=\"block text-sm text-gray-600 mb-2\">Add File</label>\n                    <div\n                      onClick={onChooseFileClick}\n                      className=\"w-full min-h-[80px] rounded-md border-dashed border-2 border-gray-200 flex items-center justify-center text-sm text-gray-500 cursor-pointer\"\n                    >\n                      {etFile ? (\n                        <div className=\"text-sm\">\n                          <div className=\"font-medium\">{etFile.name}</div>\n                          <div className=\"text-xs text-gray-500\">{(etFile.size / 1024).toFixed(1)} KB</div>\n                        </div>\n                      ) : (\n                        <div>Choose a file</div>\n                      )}\n                    </div>\n                    <input type=\"file\" onChange={onHiddenFilePicked} className=\"hidden\" />\n                  </div>\n                </div>\n\n                {/* error message */}\n                {editTaskErrors && <div className=\"mt-3 text-sm text-red-600\">{editTaskErrors}</div>}\n              </div>\n\n              {/* Footer actions */}\n              <div className=\"flex items-center justify-end gap-3\">\n                <button onClick={onCancelEditTask} className=\"px-4 py-2 border rounded-md text-sm border-blue-600 text-blue-600 hover:bg-gray-50\">Cancel</button>\n                <button onClick={onUpdateTask} className=\"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700\">Update</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n      {/* ------------------ END EDIT TASK modal ------------------ */}\n\n    </div>\n  );\n}\n","\n\"use client\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport axios from \"axios\";\nimport { UserIcon } from \"@heroicons/react/24/outline\";\n\ntype AssignedEmployee = {\n  employeeId: string;\n  name: string;\n  profileUrl?: string | null;\n  designation?: string | null;\n  department?: string | null;\n};\n\ntype Project = {\n  id: number;\n  shortCode?: string;\n  name?: string;\n  assignedEmployees?: AssignedEmployee[];\n  assignedEmployeeIds?: string[];\n  projectAdminId?: string | null;\n};\n\nconst MAIN = process.env.NEXT_PUBLIC_MAIN || \"\";\n\n// ------------------------------------------\n// AXIOS INSTANCE SETUP\n// ------------------------------------------\nconst api = axios.create({\n  baseURL: MAIN || \"/\", // if MAIN empty → use Next.js API routes\n  timeout: 15000,\n});\n\n// Auto-add token\napi.interceptors.request.use((config) => {\n  const token = localStorage.getItem(\"accessToken\");\n  if (token) config.headers.Authorization = `Bearer ${token}`;\n  return config;\n});\n\n// Auto-handle JSON + errors\napi.interceptors.response.use(\n  (res) => res.data,\n  (err) => {\n    const message =\n      err?.response?.data?.message ||\n      err?.response?.statusText ||\n      err.message ||\n      \"Request failed\";\n    return Promise.reject(new Error(message));\n  }\n);\n\nexport default function ProjectMembersTableFetch({\n  projectId,\n}: {\n  projectId: number;\n}) {\n  const [project, setProject] = useState<Project | null>(null);\n  const [members, setMembers] = useState<AssignedEmployee[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [newMemberInput, setNewMemberInput] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [actionLoadingId, setActionLoadingId] = useState<string | null>(null);\n\n  // ------------------------------------------\n  // GET Project Members\n  // ------------------------------------------\n  const fetchProject = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const url = `/projects/${projectId}`;\n      const full = `${MAIN}/projects/${projectId}`;\n    \n      const data = await api.get(full);\n\n      setProject(data);\n      setMembers(data?.assignedEmployees ?? []);\n    } catch (err: any) {\n      setError(err.message);\n      setProject(null);\n      setMembers([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchProject();\n  }, [projectId]);\n\n  // ------------------------------------------\n  // POST Assign Members\n  // ------------------------------------------\n  const handleAssign = async () => {\n    const raw = newMemberInput.trim();\n    if (!raw) return alert(\"Enter employee IDs\");\n\n    const employeeIds = raw.split(\",\").map((x) => x.trim());\n\n    try {\n      setLoading(true);\n      setError(null);\n\n      const url = `${MAIN}/api/projects/${projectId}/assign`;\n      await api.post(url, { employeeIds });\n\n      setShowAddModal(false);\n      setNewMemberInput(\"\");\n      fetchProject();\n    } catch (err: any) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ------------------------------------------\n  // DELETE Member\n  // ------------------------------------------\n  const handleRemove = async (employeeId: string) => {\n    if (!confirm(`Remove ${employeeId}   from project?`)) return;\n\n    try {\n      setActionLoadingId(employeeId);\n      setError(null);\n\n      const url = `${MAIN}/api/projects/${projectId}/assign/${employeeId}`;\n\n      await api.delete(url);\n\n      // If admin removed → clear admin role\n      if (project?.projectAdminId === employeeId) {\n        await api.patch(`${MAIN}/api/projects/${projectId}`, {\n          projectAdminId: null,\n        });\n      }\n\n      fetchProject();\n    } catch (err: any) {\n      setError(err.message);\n    } finally {\n      setActionLoadingId(null);\n    }\n  };\n\n  const handleMakeAdmin = async (employeeId: string) => {\n    if (!confirm(`Make ${employeeId} Project Admin?`)) return;\n\n    try {\n      setActionLoadingId(employeeId);\n      setError(null);\n\n      const url = `${MAIN}/projects/${projectId}/admin?userId=${employeeId}`;\n\n      await api.post(url);\n\n      fetchProject();\n    } catch (err: any) {\n      setError(err.message);\n    } finally {\n      setActionLoadingId(null);\n    }\n  };\n\n  // ------------------------------------------\n  // REMOVE Project Admin Only\n  // ------------------------------------------\n  const handleRemoveAdmin = async () => {\n    if (!confirm(\"Remove Project Admin?\")) return;\n\n    try {\n      setActionLoadingId(\"admin\");\n      setError(null);\n\n      const url = `${MAIN}/projects/${projectId}/admin`;\n\n      await api.delete(url);\n\n      fetchProject();\n    } catch (err: any) {\n      setError(err.message);\n    } finally {\n      setActionLoadingId(null);\n    }\n  };\n\n  // ------------------------------------------\n  // SEARCH FILTER\n  // ------------------------------------------\n  const filtered = members.filter((m) => {\n    const t = search.toLowerCase();\n    return (\n      m.name?.toLowerCase().includes(t) ||\n      m.employeeId.toLowerCase().includes(t) ||\n      m.designation?.toLowerCase().includes(t)\n    );\n  });\n\n  // ------------------------------------------\n  // UI\n  // ------------------------------------------\n\n  return (\n    <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n      <h2 className=\"text-xl font-semibold mb-4\">Member</h2>\n\n      {/* Top Controls */}\n      <div className=\"flex justify-between mb-4\">\n        {/* <button\n          onClick={() => setShowAddModal(true)}\n          className=\"bg-blue-600 text-white px-4 py-2 rounded\"\n        >\n          + Add Project Members\n        </button> */}\n\n        <div className=\"flex gap-3\">\n          <input\n            type=\"search\"\n            placeholder=\"Search\"\n            className=\"border px-3 py-2 rounded\"\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n          />\n          <button\n            onClick={fetchProject}\n            className=\"bg-gray-100 px-3 py-2 rounded\"\n          >\n            Refresh\n          </button>\n        </div>\n      </div>\n\n      {loading && <div className=\"text-center py-5\">Loading…</div>}\n\n      {error && (\n        <div className=\"p-3 bg-red-50 text-red-600 rounded mb-3\">{error}</div>\n      )}\n\n      {!loading && (\n        <table className=\"min-w-full text-sm\">\n          <thead>\n            <tr className=\"bg-blue-50 text-left \">\n              <th className=\"px-4 py-3\">Name</th>\n              <th className=\"px-4 py-3\">User Role </th>\n              {/* <th className=\"px-4 py-3\">Action</th> */}\n            </tr>\n          </thead>\n\n          <tbody>\n            {filtered.map((m) => (\n              <tr key={m.employeeId} className=\"border-b\">\n                <td className=\"px-4 py-4 flex items-center gap-3\">\n                  <div className=\"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center overflow-hidden\">\n                    {m.profileUrl ? (\n                      <img\n                        src={m.profileUrl}\n                        className=\"w-full h-full object-cover\"\n                      />\n                    ) : (\n                      <UserIcon className=\"w-6 h-6 text-gray-400\" />\n                    )}\n                  </div>\n\n                  <div>\n                    <div className=\"font-medium\">{m.name}</div>\n                    <div className=\"text-xs text-gray-500\">\n                      {m.designation ?? m.department}\n                    </div>\n                  </div>\n                </td>\n\n                {/* Role */}\n                <td className=\"px-4 py-4\">\n                  {/* <div className=\"flex items-center gap-2 text-sm\"> */}\n                  {/* <input\n                    type=\"radio\"\n                    checked={project?.projectAdminId === m.employeeId}\n                    onChange={() => handleMakeAdmin(m.employeeId)}\n                  /> */}\n                  <span className=\"ml-1\">Project Admin</span>\n\n                  {project?.projectAdminId === m.employeeId && (\n                    <button\n                      onClick={() => handleRemoveAdmin()}\n                      disabled={actionLoadingId}\n                      className=\"ml-3 px-3 py-1 border rounded text-sm bg-white\"\n                    >\n                      {actionLoadingId ? \"Removing...\" : \"Remove Admin\"}\n                    </button>\n                  )}\n                </td>\n\n                {/* Remove */}\n                {/* <td className=\"px-4 py-4\">\n                  <button\n                    onClick={() => handleRemove(m.employeeId)}\n                    disabled={actionLoadingId === m.employeeId}\n                    className=\"text-red-600\"\n                  >\n                    {actionLoadingId === m.employeeId ? \"Removing…\" : \"Delete\"}\n                  </button>\n                </td> */}\n              </tr>\n            ))}\n\n            {filtered.length === 0 && (\n              <tr>\n                <td colSpan={3} className=\"py-6 text-center text-gray-500\">\n                  No members found\n                </td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      )}\n\n      {/* ADD MODAL */}\n      {/* {showAddModal && (\n        <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center z-50\">\n          <div className=\"bg-white p-6 rounded w-full max-w-md\">\n            <h3 className=\"text-lg font-semibold mb-4\">Add Project Members</h3>\n\n            <input\n              className=\"border px-3 py-2 w-full rounded\"\n              placeholder=\"EMP-015, EMP-010\"\n              value={newMemberInput}\n              onChange={(e) => setNewMemberInput(e.target.value)}\n            />\n\n            <div className=\"text-xs text-gray-500 mt-1\">\n              Example: EMP-015, EMP-010\n            </div>\n\n            <div className=\"flex justify-end gap-3 mt-4\">\n              <button\n                className=\"px-4 py-2 border rounded\"\n                onClick={() => setShowAddModal(false)}\n              >\n                Cancel\n              </button>\n\n              <button\n                className=\"px-4 py-2 bg-blue-600 text-white rounded\"\n                onClick={handleAssign}\n              >\n                Add\n              </button>\n            </div>\n          </div>\n        </div>\n      )} */}\n    </div>\n  );\n}\n\n\n\n\n","// components/TimesheetsTableNew.tsx\n\"use client\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { UserIcon, XMarkIcon } from \"@heroicons/react/24/outline\";\n\ntype EmployeeItem = {\n  employeeId: string;\n  name?: string | null;\n  profileUrl?: string | null;\n  designation?: string | null;\n  department?: string | null;\n};\n\ntype Timesheet = {\n  id: number;\n  projectId?: number;\n  taskId?: number;\n  employeeId?: string;\n  employees?: EmployeeItem[];\n  startDate?: string; // YYYY-MM-DD\n  startTime?: string; // HH:MM:SS or HH:MM\n  endDate?: string;\n  endTime?: string;\n  memo?: string | null;\n  durationHours?: number;\n  createdBy?: string;\n  createdAt?: string; // ISO\n};\n\nconst DEFAULT_MAIN = process.env.NEXT_PUBLIC_MAIN;\n\n// *** default token (from your message). For prod DO NOT hardcode.\nconst PROVIDED_TOKEN = typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null;\nexport default function TimesheetsTableNew({\n  gatewayPath = \"/timesheets\",\n  mainBase,\n  authToken = PROVIDED_TOKEN,\n  projectId,\n}: {\n  projectId: number | string;\n  gatewayPath?: string;\n  mainBase?: string;\n  authToken?: string | null;\n}) {\n  const MAIN = (mainBase || DEFAULT_MAIN).replace(/\\/$/, \"\");\n  const [data, setData] = useState<Timesheet[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [refreshKey, setRefreshKey] = useState(0);\n\n  // search / filters\n  const [search, setSearch] = useState(\"\");\n  const [employeeFilter, setEmployeeFilter] = useState<string>(\"All\");\n\n  // modal/form state\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [saveError, setSaveError] = useState<string | null>(null);\n  const [editingId, setEditingId] = useState<number | null>(null);\n\n  const [form, setForm] = useState({\n    projectId: \"\",\n    taskId: \"\",\n    employeeId: \"\",\n    startDate: \"\",\n    startTime: \"\",\n    endDate: \"\",\n    endTime: \"\",\n    memo: \"\",\n  });\n\n  // action dropdown + view/delete modals\n  const [actionOpenFor, setActionOpenFor] = useState<number | null>(null);\n  const [isViewOpen, setIsViewOpen] = useState(false);\n  const [selectedRow, setSelectedRow] = useState<Timesheet | null>(null);\n  const [isDeleteConfirmOpen, setIsDeleteConfirmOpen] = useState(false);\n\n  // helpers\n  const buildUrl = (path: string) => {\n    const p = String(path || \"\");\n    if (p.startsWith(\"http://\") || p.startsWith(\"https://\")) return p;\n    if (p.startsWith(\"/\")) return `${MAIN}${p}`;\n    return `${MAIN}/${p}`;\n  };\n\n  const headersWithAuth = (extra: Record<string, string> = {}) => {\n    const h: Record<string, string> = { ...extra };\n    if (authToken) h[\"Authorization\"] = `Bearer ${authToken}`;\n    return h;\n  };\n\n  // fetch wrapper with timeout + helpful errors\n  const doFetch = async (url: string, init: RequestInit = {}, msTimeout = 15000) => {\n    const controller = new AbortController();\n    const timeout = setTimeout(() => controller.abort(), msTimeout);\n    try {\n      const merged = { ...init, signal: controller.signal };\n      const res = await fetch(`${MAIN}/timesheets/project/${projectId}`, merged);\n      clearTimeout(timeout);\n\n      const ct = res.headers.get(\"content-type\") || \"\";\n      const text = await res.text().catch(() => \"\");\n      if (!res.ok) {\n        if (ct.includes(\"application/json\")) {\n          try {\n            const json = JSON.parse(text || \"{}\");\n            const msg = json?.message || JSON.stringify(json);\n            throw new Error(`HTTP ${res.status} ${res.statusText} — ${msg}`);\n          } catch {\n            throw new Error(`HTTP ${res.status} ${res.statusText} — ${text.slice(0, 300)}`);\n          }\n        }\n        if (ct.includes(\"text/html\") || text.trim().startsWith(\"<!DOCTYPE html\")) {\n          throw new Error(`HTTP ${res.status} ${res.statusText} — server returned HTML (likely auth).`);\n        }\n        throw new Error(`HTTP ${res.status} ${res.statusText} ${text ? \"- \" + text.slice(0, 300) : \"\"}`);\n      }\n      if (ct.includes(\"application/json\")) {\n        return JSON.parse(text || \"[]\");\n      }\n      return text;\n    } catch (err: any) {\n      if (err.name === \"AbortError\") throw new Error(\"Request timed out\");\n      if (err.message === \"Failed to fetch\") throw new Error(\"Network Error - check CORS / server availability\");\n      throw err;\n    } finally {\n      clearTimeout(timeout);\n    }\n  };\n\n  // fetch timesheets\n  const fetchTimesheets = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const url = buildUrl(gatewayPath);\n      const res = await doFetch(url, {\n        method: \"GET\",\n        headers: headersWithAuth({ \"Content-Type\": \"application/json\" }),\n        credentials: \"same-origin\",\n      });\n      if (Array.isArray(res)) setData(res as Timesheet[]);\n      else if (res?.data && Array.isArray(res.data)) setData(res.data);\n      else {\n        console.warn(\"Unexpected timesheets response:\", res);\n        setData([]);\n        setError(\"Unexpected response shape from server. See console.\");\n      }\n    } catch (err: any) {\n      console.error(\"fetchTimesheets error:\", err);\n      setData([]);\n      setError(err?.message || \"Failed to load timesheets\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchTimesheets();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [refreshKey]);\n\n  // derive employees for filter/select\n  const employeeList = useMemo(() => {\n    const map = new Map<string, EmployeeItem>();\n    data.forEach((r) => {\n      const e = r.employees && r.employees[0];\n      if (e && e.employeeId) map.set(e.employeeId, e);\n      else if (r.employeeId) map.set(r.employeeId, { employeeId: r.employeeId });\n    });\n    return Array.from(map.values());\n  }, [data]);\n\n  // filtered rows\n  const filtered = data.filter((row) => {\n    if (employeeFilter !== \"All\" && row.employeeId !== employeeFilter) return false;\n    if (!search) return true;\n    const q = search.toLowerCase();\n    const emp = row.employees && row.employees[0];\n    return (\n      String(row.employeeId || \"\").toLowerCase().includes(q) ||\n      String(row.projectId || \"\").toLowerCase().includes(q) ||\n      String(row.taskId || \"\").toLowerCase().includes(q) ||\n      String(row.memo || \"\").toLowerCase().includes(q) ||\n      String(emp?.name || \"\").toLowerCase().includes(q)\n    );\n  });\n\n  // helpers to format\n  const pad = (n: number) => (n < 10 ? `0${n}` : `${n}`);\n  const formatDateTimeDisplay = (date?: string, time?: string) => {\n    if (!date) return \"-\";\n    // date: YYYY-MM-DD, time: HH:MM or HH:MM:SS\n    try {\n      const [y, m, d] = date.split(\"-\").map(Number);\n      let hh = 0,\n        mm = 0;\n      if (time) {\n        const parts = time.split(\":\").map(Number);\n        hh = parts[0] ?? 0;\n        mm = parts[1] ?? 0;\n      }\n      const dt = new Date(y, m - 1, d, hh, mm);\n      // format DD/MM/YYYY hh:mm AM/PM\n      const day = pad(dt.getDate());\n      const mon = pad(dt.getMonth() + 1);\n      const year = dt.getFullYear();\n      let hours = dt.getHours();\n      const minutes = pad(dt.getMinutes());\n      const ampm = hours >= 12 ? \"PM\" : \"AM\";\n      hours = hours % 12 || 12;\n      const hoursStr = pad(hours);\n      return `${day}/${mon}/${year} ${hoursStr}:${minutes} ${ampm}`;\n    } catch {\n      return date + (time ? ` ${time}` : \"\");\n    }\n  };\n\n  const fmtDateTime = (date?: string, time?: string) => {\n    return formatDateTimeDisplay(date, time);\n  };\n\n  const computeDurationHours = (sDate?: string, sTime?: string, eDate?: string, eTime?: string) => {\n    if (!sDate || !eDate) return 0;\n    try {\n      const sParts = sDate.split(\"-\").map(Number);\n      const eParts = eDate.split(\"-\").map(Number);\n      let sH = 0,\n        sM = 0,\n        eH = 0,\n        eM = 0;\n      if (sTime) [sH, sM] = sTime.split(\":\").map((v) => Number(v));\n      if (eTime) [eH, eM] = eTime.split(\":\").map((v) => Number(v));\n      const start = new Date(sParts[0], sParts[1] - 1, sParts[2], sH, sM);\n      const end = new Date(eParts[0], eParts[1] - 1, eParts[2], eH, eM);\n      const diffMs = end.getTime() - start.getTime();\n      if (isNaN(diffMs) || diffMs <= 0) return 0;\n      return Math.round(diffMs / (1000 * 60 * 60)); // hours\n    } catch {\n      return 0;\n    }\n  };\n\n  const modalTotalHours = computeDurationHours(form.startDate, form.startTime, form.endDate, form.endTime);\n\n  // open modal to create new or edit existing\n  const openModal = (row?: Timesheet) => {\n    if (!row) {\n      setEditingId(null);\n      setForm({\n        projectId: \"\",\n        taskId: \"\",\n        employeeId: \"\",\n        startDate: \"\",\n        startTime: \"\",\n        endDate: \"\",\n        endTime: \"\",\n        memo: \"\",\n      });\n    } else {\n      setEditingId(row.id);\n      setForm({\n        projectId: String(row.projectId ?? \"\"),\n        taskId: String(row.taskId ?? \"\"),\n        employeeId: row.employeeId ?? \"\",\n        startDate: row.startDate ?? \"\",\n        startTime: row.startTime ?? \"\",\n        endDate: row.endDate ?? \"\",\n        endTime: row.endTime ?? \"\",\n        memo: row.memo ?? \"\",\n      });\n    }\n    setSaveError(null);\n    setIsModalOpen(true);\n  };\n\n  // View row (read-only modal)\n  const openView = (row: Timesheet) => {\n    setSelectedRow(row);\n    setIsViewOpen(true);\n    setActionOpenFor(null);\n  };\n\n  // Delete flow\n  const openDelete = (row: Timesheet) => {\n    setSelectedRow(row);\n    setIsDeleteConfirmOpen(true);\n    setActionOpenFor(null);\n  };\n\n  const deleteTimesheet = async () => {\n    if (!selectedRow) return;\n    setSaving(true);\n    setSaveError(null);\n    try {\n      const url = buildUrl(`${gatewayPath}/${selectedRow.id}`);\n      await doFetch(url, {\n        method: \"DELETE\",\n        headers: headersWithAuth({ \"Content-Type\": \"application/json\" }),\n        credentials: \"same-origin\",\n      });\n      setIsDeleteConfirmOpen(false);\n      setSelectedRow(null);\n      setRefreshKey((k) => k + 1);\n    } catch (err: any) {\n      console.error(\"deleteTimesheet error:\", err);\n      setSaveError(err?.message || \"Failed to delete timesheet\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // save (create or update)\n  const saveEntry = async () => {\n    setSaving(true);\n    setSaveError(null);\n    try {\n      // validation\n      if (!form.projectId || !form.taskId || !form.employeeId || !form.startDate || !form.startTime || !form.endDate || !form.endTime || !form.memo) {\n        setSaveError(\"Please fill all required fields.\");\n        setSaving(false);\n        return;\n      }\n\n      const payload: any = {\n        projectId: Number(form.projectId),\n        taskId: Number(form.taskId),\n        employeeId: form.employeeId,\n        startDate: form.startDate,\n        startTime: form.startTime,\n        endDate: form.endDate,\n        endTime: form.endTime,\n        memo: form.memo,\n        durationHours: computeDurationHours(form.startDate, form.startTime, form.endDate, form.endTime),\n      };\n\n      const url = buildUrl(gatewayPath) + (editingId ? `/${editingId}` : \"\");\n      const method = editingId ? \"PUT\" : \"POST\";\n\n      await doFetch(url, {\n        method,\n        headers: headersWithAuth({ \"Content-Type\": \"application/json\" }),\n        credentials: \"same-origin\",\n        body: JSON.stringify(payload),\n      });\n\n      setIsModalOpen(false);\n      setRefreshKey((k) => k + 1);\n    } catch (err: any) {\n      console.error(\"saveEntry error:\", err);\n      setSaveError(err?.message || \"Failed to save entry\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <h2 className=\"text-xl font-semibold\">Timesheet</h2>\n\n        <div className=\"flex items-center gap-3\">\n          <label className=\"text-sm\">Employee</label>\n          <select value={employeeFilter} onChange={(e) => setEmployeeFilter(e.target.value)} className=\"border rounded px-3 py-2 text-sm\">\n            <option value=\"All\">All</option>\n            {employeeList.map((e) => (\n              <option key={e.employeeId} value={e.employeeId}>\n                {e.name ? `${e.name} (${e.employeeId})` : e.employeeId}\n              </option>\n            ))}\n          </select>\n        </div>\n      </div>\n\n      <div className=\"flex items-center justify-between mb-4\">\n        <div>\n          {/* <button onClick={() => openModal()} className=\"bg-blue-600 text-white px-4 py-2 rounded-md shadow-sm hover:bg-blue-700\">\n            + Log Time\n          </button> */}\n        </div>\n\n        <div className=\"flex items-center gap-3\">\n          <button onClick={() => setRefreshKey((k) => k + 1)} className=\"bg-gray-100 px-3 py-2 rounded text-sm border hover:bg-gray-200\">\n            Refresh\n          </button>\n\n          <input type=\"search\" placeholder=\"Search employee, memo, project...\" value={search} onChange={(e) => setSearch(e.target.value)} className=\"border px-3 py-2 rounded-md text-sm\" />\n        </div>\n      </div>\n\n      {loading ? (\n        <div className=\"py-6 text-center text-gray-500\">Loading timesheets...</div>\n      ) : (\n        <>\n          {error && <div className=\"mb-4 p-3 rounded bg-red-50 text-red-700\"><strong>Error:</strong> {error}</div>}\n\n          <div className=\"overflow-x-auto h-full\">\n            <table className=\"min-w-full  text-sm\">\n              <thead>\n                <tr className=\"bg-blue-50 text-left text-gray-600\">\n                  <th className=\"px-4 py-3\">Code</th>\n                  <th className=\"px-4 py-3\">Task</th>\n                  <th className=\"px-4 py-3\">Employee</th>\n                  <th className=\"px-4 py-3\">Start Time</th>\n                  <th className=\"px-4 py-3\">End Time</th>\n                  <th className=\"px-4 py-3\">Total Hours</th>\n                  {/* <th className=\"px-4 py-3\">Action</th> */}\n                </tr>\n              </thead>\n\n              <tbody>\n                {filtered.length === 0 ? (\n                  <tr><td colSpan={7} className=\"py-6 text-center text-gray-500\">No timesheets found</td></tr>\n                ) : (\n                  filtered.map((row) => {\n                    const emp = row.employees && row.employees[0];\n                    const code = `RTA-${String(row.id).padStart(2, \"0\")}`;\n                    const taskLabel = `Task ${row.taskId ?? \"-\"} · Project ${row.projectId ?? \"-\"}`;\n                    return (\n                      <tr key={row.id} className=\"border-b last:border-b-0 bg-white hover:bg-gray-50\">\n                        <td className=\"px-4 py-4 align-top\">{code}</td>\n\n                        <td className=\"px-4 py-4 align-top\">\n                          <div className=\"text-sm font-medium\">{taskLabel}</div>\n                          <div className=\"text-xs text-gray-400\">{row.memo ?? \"\"}</div>\n                        </td>\n\n                        <td className=\"px-4 py-4 align-top flex items-center gap-3\">\n                          <div className=\"w-10 h-10 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center\">\n                            {emp?.profileUrl ? (\n                              // eslint-disable-next-line @next/next/no-img-element\n                              <img src={emp.profileUrl} alt={emp?.name ?? \"\"} className=\"w-full h-full object-cover\" />\n                            ) : <UserIcon className=\"w-6 h-6 text-gray-400 p-1\" />}\n                          </div>\n\n                          <div>\n                            <div className=\"font-medium\">{emp?.name || row.employeeId}</div>\n                            <div className=\"text-xs text-gray-500\">{emp?.designation || emp?.department || row.employeeId}</div>\n                          </div>\n                        </td>\n\n                        <td className=\"px-4 py-4 align-top\">{fmtDateTime(row.startDate, row.startTime)}</td>\n                        <td className=\"px-4 py-4 align-top\">{fmtDateTime(row.endDate, row.endTime)}</td>\n                        <td className=\"px-4 py-4 align-top\">{typeof row.durationHours === \"number\" ? `${row.durationHours}h` : \"-\"}</td>\n\n                        <td className=\"px-4 py-4 align-top\">\n                          <div className=\"relative inline-block text-left\">\n                            {/* Three-dot button */}\n                          \n\n                            {/* Dropdown */}\n                           \n                          </div>\n                        </td>\n                      </tr>\n                    );\n                  })\n                )}\n              </tbody>\n            </table>\n          </div>\n        </>\n      )}\n\n      {/* Log Time Modal (create/edit) */}\n     \n\n      {/* View Modal - redesigned to match provided screenshot */}\n     \n\n      {/* Delete confirm modal */}\n     \n    </div>\n  );\n}\n","\n\n\"use client\";\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport Image from \"next/image\";\nimport { MoreHorizontal } from \"lucide-react\";\n\nexport type ProjectFile = {\n  id: number | string;\n  filename?: string | null;\n  url?: string | null;\n  mimeType?: string | null;\n  size?: number | null;\n  uploadedBy?: string | null;\n  createdAt?: string | null;\n};\n\nconst BASE_URL = `${process.env.NEXT_PUBLIC_MAIN}`;\n\nexport default function ProjectDocuments({\n  projectId,\n  authToken,\n}: {\n  projectId: number | string;\n  authToken?: string;\n}) {\n  const fileInputRef = useRef<HTMLInputElement | null>(null);\n\n  const [files, setFiles] = useState<ProjectFile[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [menuOpen, setMenuOpen] = useState<number | string | null>(null);\n  const [uploading, setUploading] = useState<Record<string, boolean>>({});\n  const [error, setError] = useState<string | null>(null);\n\n  /* =========================\n      FETCH PROJECT FILES\n  ========================= */\n  useEffect(() => {\n    if (!projectId) return;\n\n    let mounted = true;\n    setLoading(true);\n    setError(null);\n\n    fetch(`${BASE_URL}/files/projects/${projectId}`, {\n     headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n          },\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (!mounted) return;\n\n        const mapped: ProjectFile[] = (Array.isArray(data) ? data : []).map(\n          (f: any) => ({\n            id: f.id,\n            filename: f.filename,\n            url: f.url,\n            mimeType: f.mimeType,\n            size: f.size,\n            uploadedBy: f.uploadedBy,\n            createdAt: f.createdAt,\n          })\n        );\n\n        setFiles(mapped);\n      })\n      .catch(() => setError(\"Failed to load files\"))\n      .finally(() => mounted && setLoading(false));\n\n    return () => {\n      mounted = false;\n    };\n  }, [projectId, authToken]);\n\n  /* =========================\n      UPLOAD FILE\n  ========================= */\n  const handleFileChange = async (\n    e: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    const localId = `local-${Date.now()}`;\n    const previewUrl = file.type.startsWith(\"image/\")\n      ? URL.createObjectURL(file)\n      : null;\n\n    // optimistic preview\n    setFiles((prev) => [\n      {\n        id: localId,\n        filename: file.name,\n        url: previewUrl,\n        mimeType: file.type,\n      },\n      ...prev,\n    ]);\n\n    setUploading((p) => ({ ...p, [localId]: true }));\n    setError(null);\n\n    try {\n      const formData = new FormData();\n      formData.append(\"file\", file);\n\n      const res = await fetch(\n        `${BASE_URL}/files/projects/${projectId}`,\n        {\n          method: \"POST\",\n          body: formData,\n         headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n          },\n        }\n      );\n\n      if (!res.ok) throw new Error(\"Upload failed\");\n\n      const data = await res.json();\n\n      // 🔥 EXACT RESPONSE MAPPING\n      setFiles((prev) =>\n        prev.map((f) =>\n          f.id === localId\n            ? {\n                id: data.id,\n                filename: data.filename,\n                url: data.url,\n                mimeType: data.mimeType,\n                size: data.size,\n                uploadedBy: data.uploadedBy,\n                createdAt: data.createdAt,\n              }\n            : f\n        )\n      );\n    } catch (err) {\n      setFiles((prev) => prev.filter((f) => f.id !== localId));\n      setError(\"Upload failed\");\n    } finally {\n      setUploading((p) => {\n        const c = { ...p };\n        delete c[localId];\n        return c;\n      });\n      if (fileInputRef.current) fileInputRef.current.value = \"\";\n    }\n  };\n\n  /* =========================\n      DELETE FILE\n  ========================= */\n  const handleDelete = async (id: number | string) => {\n    setFiles((prev) => prev.filter((f) => f.id !== id));\n\n    try {\n      await fetch(`${BASE_URL}/files/projects/${projectId}/${id}`, {\n        method: \"DELETE\",\n        headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n          },\n      });\n    } catch {\n      setError(\"Delete failed\");\n    }\n  };\n\n  const openFile = (\n    url?: string,\n    download?: boolean,\n    name?: string\n  ) => {\n    if (!url) return;\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.target = \"_blank\";\n    if (download) a.download = name || \"file\";\n    document.body.appendChild(a);\n    a.click();\n    a.remove();\n  };\n\n  /* =========================\n      UI\n  ========================= */\n  return (\n    <div className=\"bg-white rounded-lg border p-5\">\n      <h3 className=\"text-lg font-semibold mb-4\">Upload file</h3>\n\n      {/* Upload Box */}\n      <div\n        onClick={() => fileInputRef.current?.click()}\n        className=\"border-2 border-dashed rounded-lg h-28 flex items-center justify-center cursor-pointer text-gray-500\"\n      >\n        <div className=\"text-center\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"40\"\n            height=\"40\"\n            fill=\"#bdbdbd\"\n            viewBox=\"0 0 24 24\"\n            className=\"mx-auto mb-2\"\n          >\n            <path d=\"M12 16a1 1 0 0 1-1-1v-4.586l-1.293 1.293a1 1 0 1 1-1.414-1.414l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.414L13 10.414V15a1 1 0 0 1-1 1Zm7-1a5 5 0 0 0-4.546-4.978A7 7 0 0 0 5.062 9.2 5 5 0 0 0 6 19h13a4 4 0 0 0 0-8Z\" />\n          </svg>\n          <div className=\"text-sm font-medium\">Choose a file</div>\n        </div>\n        <input\n          ref={fileInputRef}\n          type=\"file\"\n          className=\"hidden\"\n          onChange={handleFileChange}\n        />\n      </div>\n\n      {loading && (\n        <p className=\"text-sm mt-3 text-gray-500\">Loading…</p>\n      )}\n      {error && (\n        <p className=\"text-sm mt-3 text-red-500\">{error}</p>\n      )}\n\n      {/* Files Grid */}\n      <div className=\"mt-6 grid grid-cols-6 gap-4\">\n        {files.map((f) => (\n          <div key={String(f.id)}>\n            <div className=\"relative\">\n              <div className=\"h-20 border rounded bg-gray-50 flex items-center justify-center overflow-hidden\">\n                {f.url && f.mimeType?.startsWith(\"image/\") ? (\n                  <Image\n                    src={f.url}\n                    alt={f.filename || \"file\"}\n                    fill\n                    className=\"object-cover\"\n                    unoptimized\n                  />\n                ) : (\n                  <span className=\"text-xs text-gray-400\">File</span>\n                )}\n              </div>\n\n              <button\n                onClick={() =>\n                  setMenuOpen(menuOpen === f.id ? null : f.id)\n                }\n                className=\"absolute top-1 right-1 p-1 rounded hover:bg-white\"\n              >\n                <MoreHorizontal size={16} />\n              </button>\n\n              {menuOpen === f.id && (\n                <div className=\"absolute right-0 mt-7 w-36 bg-white border rounded shadow z-20\">\n                  <button\n                    className=\"w-full text-left px-3 py-2 text-sm hover:bg-gray-50\"\n                    onClick={() =>\n                      openFile(f.url, true, f.filename || undefined)\n                    }\n                  >\n                    Download\n                  </button>\n                  <button\n                    className=\"w-full text-left px-3 py-2 text-sm hover:bg-gray-50\"\n                    onClick={() => openFile(f.url)}\n                  >\n                    View\n                  </button>\n                  {/* <button\n                    className=\"w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-gray-50\"\n                    onClick={() => handleDelete(f.id)}\n                  >\n                    Delete\n                  </button> */}\n                </div>\n              )}\n            </div>\n\n            <div className=\"mt-2 text-sm\">\n              <div className=\"font-medium truncate\">\n                {f.filename || \"Untitled\"}\n                {uploading[String(f.id)] && (\n                  <span className=\"text-xs text-gray-400\">\n                    {\" \"}\n                    · uploading…\n                  </span>\n                )}\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n","\n\n\n\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport {\n  MoreVertical,\n  Globe,\n  Lock,\n  Eye,\n  Edit,\n  Trash2,\n  Plus,\n  X,\n} from \"lucide-react\";\n\n/* ================= TYPES ================= */\nexport type ProjectNoteItem = {\n  id: number;\n  title: string;\n  content?: string | null;\n  isPublic: boolean;\n  createdBy?: string | null;\n  createdAt?: string | null;\n};\n\nconst BASE_URL = `${process.env.NEXT_PUBLIC_MAIN}`;\n\n/* ================= COMPONENT ================= */\nexport default function ProjectNotesTable({\n  projectId,\n  authToken,\n}: {\n  projectId: number;\n  authToken?: string;\n}) {\n  const [notes, setNotes] = useState<ProjectNoteItem[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [menuOpenFor, setMenuOpenFor] = useState<number | null>(null);\n\n  /* ===== ADD ===== */\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [formTitle, setFormTitle] = useState(\"\");\n  const [formContent, setFormContent] = useState(\"\");\n  const [formPublic, setFormPublic] = useState(true);\n  const [saving, setSaving] = useState(false);\n\n  /* ===== VIEW ===== */\n  const [showViewModal, setShowViewModal] = useState(false);\n  const [viewNote, setViewNote] = useState<ProjectNoteItem | null>(null);\n\n  /* ===== EDIT ===== */\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [editId, setEditId] = useState<number | null>(null);\n  const [editTitle, setEditTitle] = useState(\"\");\n  const [editContent, setEditContent] = useState(\"\");\n  const [editPublic, setEditPublic] = useState(true);\n  const [updating, setUpdating] = useState(false);\n\n  const authHeader = {\n    Authorization: `Bearer ${\n      authToken || localStorage.getItem(\"accessToken\") || \"\"\n    }`,\n  };\n\n  /* ================= LOAD NOTES ================= */\n  useEffect(() => {\n    if (!projectId) return;\n\n    const loadNotes = async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        const res = await fetch(\n          `${BASE_URL}/projects/${projectId}/notes`,\n          { headers: authHeader }\n        );\n        if (!res.ok) throw new Error(\"Failed to load notes\");\n\n        const data = await res.json();\n        setNotes(\n          Array.isArray(data)\n            ? data.map((n: any) => ({\n                id: n.id,\n                title: n.title ?? \"Untitled\",\n                content: n.content ?? \"---\",\n                isPublic: !!n.isPublic,\n                createdBy: n.createdBy,\n                createdAt: n.createdAt,\n              }))\n            : []\n        );\n      } catch (e: any) {\n        setError(e.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadNotes();\n  }, [projectId]);\n\n  /* ================= ADD ================= */\n  const saveNote = async () => {\n    if (!formTitle.trim()) {\n      setError(\"Note title is required\");\n      return;\n    }\n\n    setSaving(true);\n    try {\n      const res = await fetch(\n        `${BASE_URL}/projects/${projectId}/notes`,\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            ...authHeader,\n          },\n          body: JSON.stringify({\n            title: formTitle,\n            content: formContent,\n            isPublic: formPublic,\n          }),\n        }\n      );\n\n      if (!res.ok) throw new Error(\"Failed to save note\");\n      const saved = await res.json();\n\n      setNotes((prev) => [\n        {\n          id: saved.id,\n          title: saved.title,\n          content: saved.content ?? \"---\",\n          isPublic: saved.isPublic,\n          createdBy: saved.createdBy,\n          createdAt: saved.createdAt,\n        },\n        ...prev,\n      ]);\n\n      setShowAddModal(false);\n      setFormTitle(\"\");\n      setFormContent(\"\");\n      setFormPublic(true);\n    } catch (e: any) {\n      setError(e.message);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  /* ================= UPDATE (NEW API) ================= */\n  const updateNote = async () => {\n    if (!editId) return;\n\n    setUpdating(true);\n    try {\n      const res = await fetch(\n        `${BASE_URL}/notes/project/${editId}`,\n        {\n          method: \"PUT\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            ...authHeader,\n          },\n          body: JSON.stringify({\n            title: editTitle,\n            content: editContent,\n            isPublic: editPublic,\n          }),\n        }\n      );\n\n      if (!res.ok) throw new Error(\"Failed to update note\");\n      const updated = await res.json();\n\n      setNotes((p) =>\n        p.map((n) =>\n          n.id === editId\n            ? {\n                ...n,\n                title: updated.title,\n                content: updated.content,\n                isPublic: updated.isPublic,\n              }\n            : n\n        )\n      );\n\n      setShowEditModal(false);\n    } catch (e: any) {\n      setError(e.message);\n    } finally {\n      setUpdating(false);\n    }\n  };\n\n  /* ================= DELETE ================= */\n  const deleteNote = async (note: ProjectNoteItem) => {\n    setNotes((p) => p.filter((n) => n.id !== note.id));\n    try {\n      await fetch(\n        `${BASE_URL}/projects/${projectId}/notes/${note.id}`,\n        { method: \"DELETE\", headers: authHeader }\n      );\n    } catch {\n      setError(\"Delete failed\");\n    }\n  };\n\n  /* ================= UI ================= */\n  return (\n    <div className=\"bg-white rounded border\">\n      <div className=\"p-4 flex justify-end border-b\">\n      \n      </div>\n\n      <div className=\"p-4\">\n        {loading && <p>Loading…</p>}\n        {error && <p className=\"text-red-600\">{error}</p>}\n\n        <table className=\"w-full text-sm text-left\">\n          <thead>\n            <tr className=\"bg-blue-50\">\n              <th className=\"px-4 py-3 text-left\">Note Title</th>\n              <th className=\"px-4 py-3\">Note Type</th>\n              <th className=\"px-4 py-3 text-left\">Action</th>\n            </tr>\n          </thead>\n          <tbody>\n            {notes.map((note) => (\n              <tr key={note.id} className=\"border-t\">\n                <td className=\"px-4 py-3\">{note.title}</td>\n                <td className=\"px-4 py-3\">\n                  <div className=\"flex gap-2 items-center\">\n                    {note.isPublic ? <Globe size={14} /> : <Lock size={14} />}\n                    {note.isPublic ? \"Public\" : \"Private\"}\n                  </div>\n                </td>\n                <td className=\"px-4 py-3 text-center relative\">\n                 <button\n                        className=\"w-full px-3 py-2 flex gap-2 \"\n                        onClick={() => {\n                          setViewNote(note);\n                          setShowViewModal(true);\n                          setMenuOpenFor(null);\n                        }}\n                      >\n                        <Eye size={14} />\n                      </button>\n\n                  {menuOpenFor === note.id && (\n                    <div className=\"absolute right-0 mt-2 bg-white border rounded shadow w-40 z-20\">\n                     \n\n                      {/* <button\n                        className=\"w-full px-3 py-2 flex gap-2 hover:bg-gray-50\"\n                        onClick={() => {\n                          setEditId(note.id);\n                          setEditTitle(note.title);\n                          setEditContent(note.content ?? \"\");\n                          setEditPublic(note.isPublic);\n                          setShowEditModal(true);\n                          setMenuOpenFor(null);\n                        }}\n                      >\n                        <Edit size={14} /> Edit\n                      </button> */}\n\n                      {/* <button\n                        className=\"w-full px-3 py-2 flex gap-2 text-red-600 hover:bg-gray-50\"\n                        onClick={() => deleteNote(note)}\n                      >\n                        <Trash2 size={14} /> Delete\n                      </button> */}\n                    </div>\n                  )}\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      {/* ================= VIEW MODAL ================= */}\n      {showViewModal && viewNote && (\n        <ModalWrapper onClose={() => setShowViewModal(false)}>\n          <ModalHeader\n            title={viewNote.title}\n            onClose={() => setShowViewModal(false)}\n          />\n          <div className=\"p-6\">\n            <div className=\"border rounded-lg p-6 space-y-4\">\n              <h4 className=\"font-medium text-gray-700\">\n                Project Note Details\n              </h4>\n\n              <div className=\"grid grid-cols-3 gap-4 text-sm\">\n                <div className=\"text-gray-500\">Note Title</div>\n                <div className=\"col-span-2\">{viewNote.title}</div>\n\n                <div className=\"text-gray-500\">Note Type</div>\n                <div className=\"col-span-2\">\n                  {viewNote.isPublic ? \"Public\" : \"Private\"}\n                </div>\n\n                <div className=\"text-gray-500\">Note Detail</div>\n                <div className=\"col-span-2 whitespace-pre-wrap\">\n                  {viewNote.content || \"---\"}\n                </div>\n              </div>\n            </div>\n          </div>\n        </ModalWrapper>\n      )}\n\n      {/* ================= ADD MODAL ================= */}\n     \n\n      {/* ================= EDIT MODAL ================= */}\n    \n    </div>\n  );\n}\n\n/* ================= REUSABLE UI ================= */\n\nfunction ModalWrapper({ children, onClose }: any) {\n  return (\n    <div className=\"fixed inset-0 z-50 flex justify-center pt-12\">\n      <div className=\"absolute inset-0 bg-black/30\" onClick={onClose} />\n      <div className=\"relative bg-white w-[900px] max-w-[95%] rounded border shadow\">\n        {children}\n      </div>\n    </div>\n  );\n}\n\nfunction ModalHeader({ title, onClose }: any) {\n  return (\n    <div className=\"p-4 border-b flex justify-between\">\n      <h4 className=\"font-medium\">{title}</h4>\n      <button onClick={onClose}>\n        <X size={18} />\n      </button>\n    </div>\n  );\n}\n\nfunction ModalBody({ children }: any) {\n  return <div className=\"p-6 space-y-4\">{children}</div>;\n}\n\nfunction ModalFooter({ onCancel, onSave, loading, saveText }: any) {\n  return (\n    <div className=\"p-4 border-t flex justify-center gap-4\">\n      <button className=\"border px-6 py-2 rounded\" onClick={onCancel}>\n        Cancel\n      </button>\n      <button\n        className=\"bg-blue-600 text-white px-6 py-2 rounded\"\n        disabled={loading}\n        onClick={onSave}\n      >\n        {loading ? \"Saving…\" : saveText}\n      </button>\n    </div>\n  );\n}\n\nfunction Input({ label, value, onChange }: any) {\n  return (\n    <div>\n      <label className=\"text-xs text-gray-600\">{label}</label>\n      <input\n        className=\"w-full border px-3 py-2 rounded\"\n        value={value}\n        onChange={(e) => onChange(e.target.value)}\n      />\n    </div>\n  );\n}\n\nfunction Textarea({ label, value, onChange }: any) {\n  return (\n    <div>\n      <label className=\"text-xs text-gray-600\">{label}</label>\n      <textarea\n        className=\"w-full border px-3 py-2 rounded min-h-[120px]\"\n        value={value}\n        onChange={(e) => onChange(e.target.value)}\n      />\n    </div>\n  );\n}\n\nfunction RadioPublicPrivate({ value, onChange }: any) {\n  return (\n    <div className=\"flex gap-6\">\n      <label className=\"flex gap-2 items-center\">\n        <input type=\"radio\" checked={value} onChange={() => onChange(true)} />\n        Public\n      </label>\n      <label className=\"flex gap-2 items-center\">\n        <input type=\"radio\" checked={!value} onChange={() => onChange(false)} />\n        Private\n      </label>\n    </div>\n  );\n}\n","\n\n\n\"use client\";\n\nimport { useEffect, useState } from \"react\";\n\n/* ================= TYPES ================= */\ntype ActivityItem = {\n  id: number;\n  projectId: number;\n  actorEmployeeId: string;\n  action: string;\n  metadata?: string | null;\n  createdAt: string;\n};\n\nconst BASE_URL = `${process.env.NEXT_PUBLIC_MAIN}`;\n\n/* ================= HELPERS ================= */\nfunction formatDateParts(dateStr: string) {\n  const d = new Date(dateStr);\n  return {\n    day: d.toLocaleDateString(\"en-US\", { day: \"2-digit\" }),\n    month: d.toLocaleDateString(\"en-US\", { month: \"short\" }),\n    time: d.toLocaleTimeString(\"en-US\", {\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n    }),\n  };\n}\n\nfunction getActionText(action: string) {\n  switch (action) {\n    case \"PROJECT_FILE_UPLOADED\":\n      return \"New file uploaded to the project.\";\n    case \"FILE_DELETED\":\n      return \"File deleted from the project.\";\n    case \"PROJECT_NOTE_CREATED\":\n      return \"New note added to the project.\";\n    case \"PROJECT_NOTE_UPDATED\":\n      return \"Project note updated.\";\n    case \"TASK_CREATED\":\n      return \"New task created.\";\n    case \"TASK_UPDATED\":\n      return \"Task updated.\";\n    case \"TASK_DELETED\":\n      return \"Task deleted.\";\n    case \"TASK_STATUS_CHANGED\":\n      return \"Task status changed.\";\n    case \"TASK_FILE_UPLOADED\":\n      return \"File uploaded to a task.\";\n    case \"TIMELOG_CREATED\":\n      return \"Time logged on the project.\";\n    case \"TIMELOG_UPDATED\":\n      return \"Time log updated.\";\n    case \"TIMELOG_DELETED\":\n      return \"Time log deleted.\";\n    case \"PROJECT_ASSIGNED_EMPLOYEES_ADDED\":\n      return \"Employee assigned to the project.\";\n    case \"DISCUSSION_ROOM_CREATED\":\n      return \"Discussion room created.\";\n    case \"DISCUSSION_MESSAGE_DELETED\":\n      return \"Discussion message deleted.\";\n    case \"PROJECT_CREATED\":\n      return \"Project created.\";\n    default:\n      return action.replaceAll(\"_\", \" \").toLowerCase();\n  }\n}\n\n/* ================= COMPONENT ================= */\nexport default function ActivitySection({\n  projectId,\n}: {\n  projectId: number;\n}) {\n  const [activities, setActivities] = useState<ActivityItem[]>([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (!projectId) return;\n\n    const load = async () => {\n      try {\n        setLoading(true);\n\n        // ✅ TOKEN FETCH (same as other sections)\n        const token =\n          localStorage.getItem(\"token\") ||\n          localStorage.getItem(\"authToken\") ||\n          \"\";\n\n        const res = await fetch(\n          `${BASE_URL}/projects/${projectId}/activity`,\n          {\n            cache: \"no-store\",\n            // headers: {\n            //   \"Content-Type\": \"application/json\",\n            //   Authorization: token ? `Bearer ${token}` : \"\",\n            // },\n\n             headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n          },\n          }\n        );\n\n        // ✅ SAFE PARSE\n        const text = await res.text();\n        const data = text ? JSON.parse(text) : [];\n\n        setActivities(Array.isArray(data) ? data : []);\n      } catch (e) {\n        console.error(\"Failed to load activity\", e);\n        setActivities([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    load();\n  }, [projectId]);\n\n  return (\n    <div>\n      <h3 className=\"text-lg font-medium mb-4\">Activity</h3>\n\n      <div className=\"border rounded-md overflow-hidden\">\n        {loading && (\n          <div className=\"p-6 text-center text-gray-400\">\n            Loading activity…\n          </div>\n        )}\n\n        {!loading && activities.length === 0 && (\n          <div className=\"p-6 text-center text-gray-400\">\n            No activity found\n          </div>\n        )}\n\n        {!loading &&\n          activities.map((item) => {\n            const { day, month, time } = formatDateParts(item.createdAt);\n\n            return (\n              <div\n                key={item.id}\n                className=\"flex gap-4 p-4 border-b last:border-b-0\"\n              >\n                {/* DATE BOX */}\n                <div className=\"w-14 border rounded-md text-center overflow-hidden\">\n                  <div className=\"text-xs text-gray-500 border-b py-1\">\n                    {month}\n                  </div>\n                  <div className=\"text-lg font-semibold py-2\">\n                    {day}\n                  </div>\n                </div>\n\n                {/* CONTENT */}\n                <div className=\"flex-1\">\n                  <div className=\"text-sm text-gray-800\">\n                    {getActionText(item.action)}\n                  </div>\n                  <div className=\"text-xs text-gray-500 mt-1\">\n                    {time}\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n      </div>\n    </div>\n  );\n}\n","\n\n\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport {\n  Plus,\n  Settings,\n  Trash2,\n  X,\n  Upload,\n  MessageCircle,\n} from \"lucide-react\";\nimport DiscussionDetailPage from \"./DiscussionDetailPage\";\n\nconst BASE_URL = `${process.env.NEXT_PUBLIC_MAIN}`;\n\n/* ================= TYPES ================= */\ntype DiscussionCategory = {\n  id: number;\n  categoryName: string;\n  colorCode: string;\n};\n\ntype DiscussionRoom = {\n  id: number;\n  title: string;\n  messageCount: number | null;\n  createdAt: string;\n  updatedAt: string;\n  category: DiscussionCategory;\n  createdByUser?: {\n    name: string;\n    profileUrl?: string;\n  };\n  lastMessage?: {\n    messageType: \"TEXT\" | \"FILE\";\n    content?: string;\n    fileUrl?: string;\n    createdAt?: string;\n  } | null;\n};\n\nexport default function DiscussionSection({\n  projectId,\n}: {\n  projectId: number;\n}) {\n  /* ================= STATE ================= */\n  const [categories, setCategories] = useState<DiscussionCategory[]>([]);\n  const [discussions, setDiscussions] = useState<DiscussionRoom[]>([]);\n  const [loading, setLoading] = useState(false);\n\n  const [showCategoryModal, setShowCategoryModal] = useState(false);\n  const [showDiscussionModal, setShowDiscussionModal] = useState(false);\n  const [openRoomId, setOpenRoomId] = useState<number | null>(null);\n\n  const [categoryForm, setCategoryForm] = useState({\n    categoryName: \"\",\n    colorCode: \"\",\n  });\n\n  const [discussionForm, setDiscussionForm] = useState({\n    categoryId: \"\",\n    title: \"\",\n    initialMessage: \"\",\n    file: null as File | null,\n  });\n\n  /* ================= HELPERS ================= */\n  const formatRepliedAt = (dateStr?: string) => {\n    if (!dateStr) return \"\";\n    const d = new Date(dateStr);\n    const date = d.toLocaleDateString(\"en-GB\");\n    const time = d.toLocaleTimeString(\"en-US\", {\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n    });\n    return `replied at ${date} | ${time}`;\n  };\n\n  /* ================= LOAD CATEGORIES ================= */\n  const loadCategories = async () => {\n    try {\n      const res = await fetch(\n        `${BASE_URL}/api/projects/discussion-categories`,\n        {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n          },\n        }\n      );\n      const data = await res.json();\n      setCategories(Array.isArray(data) ? data : []);\n    } catch {\n      setCategories([]);\n    }\n  };\n\n  /* ================= LOAD DISCUSSIONS ================= */\n  const loadDiscussions = async () => {\n    try {\n      setLoading(true);\n      const res = await fetch(\n        `${BASE_URL}/api/projects/${projectId}/discussion-rooms`,\n        {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n          },\n        }\n      );\n      const data = await res.json();\n      setDiscussions(Array.isArray(data) ? data : []);\n    } catch {\n      setDiscussions([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadCategories();\n    loadDiscussions();\n  }, []);\n\n  /* ================= CREATE / DELETE ================= */\n  const createCategory = async () => {\n    if (!categoryForm.categoryName || !categoryForm.colorCode) return;\n\n    const res = await fetch(\n      `${BASE_URL}/api/projects/discussion-categories`,\n      {\n        method: \"POST\",\n        // headers: {\n        //   Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n        //   \"Content-Type\": \"application/json\",\n        // },\n\n\n headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n          },\n\n        body: JSON.stringify(categoryForm),\n      }\n    );\n\n    const data = await res.json();\n    setCategories((p) => [...p, data]);\n    setCategoryForm({ categoryName: \"\", colorCode: \"\" });\n    setShowCategoryModal(false);\n  };\n\n  const deleteCategory = async (categoryId: number) => {\n    await fetch(\n      `${BASE_URL}/api/projects/discussion-categories/${categoryId}`,\n      {\n        method: \"DELETE\",\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n        },\n      }\n    );\n    loadCategories();\n  };\n\n  const createDiscussion = async () => {\n    if (\n      !discussionForm.categoryId ||\n      !discussionForm.title ||\n      !discussionForm.initialMessage\n    )\n      return;\n\n    const fd = new FormData();\n    fd.append(\"title\", discussionForm.title);\n    fd.append(\"categoryId\", discussionForm.categoryId);\n    fd.append(\"initialMessage\", discussionForm.initialMessage);\n    if (discussionForm.file) fd.append(\"initialFile\", discussionForm.file);\n\n    await fetch(\n      `${BASE_URL}/api/projects/${projectId}/discussion-rooms`,\n      {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n        },\n        body: fd,\n      }\n    );\n\n    setDiscussionForm({\n      categoryId: \"\",\n      title: \"\",\n      initialMessage: \"\",\n      file: null,\n    });\n\n    setShowDiscussionModal(false);\n    loadDiscussions();\n  };\n\n  const deleteDiscussion = async (roomId: number) => {\n    await fetch(\n      `${BASE_URL}/api/projects/${projectId}/discussion-rooms/${roomId}`,\n      {\n        method: \"DELETE\",\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n        },\n      }\n    );\n    loadDiscussions();\n  };\n\n  return (\n    <div>\n      {/* ================= HEADER ================= */}\n      <div className=\"flex items-center justify-between mb-4\">\n        <h3 className=\"text-lg font-medium\">Discussion</h3>\n\n        <div className=\"flex gap-2\">\n          <button\n            onClick={() => setShowDiscussionModal(true)}\n            className=\"flex items-center gap-2 bg-blue-600 text-white px-3 py-1.5 rounded text-sm\"\n          >\n            <Plus size={16} />\n            New Discussion\n          </button>\n\n          {/* <button\n            onClick={() => setShowCategoryModal(true)}\n            className=\"flex items-center gap-2 border border-blue-500 text-blue-600 px-3 py-1.5 rounded text-sm\"\n          >\n            <Settings size={16} />\n            Discussion Category\n          </button> */}\n        </div>\n      </div>\n\n      {/* ================= DISCUSSION LIST ================= */}\n      {discussions.map((d) => {\n        const repliedAt =\n          d.lastMessage?.createdAt || d.updatedAt || d.createdAt;\n\n        return (\n          <div\n            key={d.id}\n            onClick={() => setOpenRoomId(d.id)}\n            className=\"border rounded-md p-4 mb-3 flex justify-between items-center cursor-pointer\"\n          >\n            <div className=\"flex gap-3 items-start\">\n              <img\n                src={d.createdByUser?.profileUrl || \"/avatar.png\"}\n                className=\"h-10 w-10 rounded-full\"\n              />\n\n              <div>\n                <p className=\"font-medium\">{d.title}</p>\n                <p className=\"text-xs text-gray-400\">\n                  {formatRepliedAt(repliedAt)}\n                </p>\n\n                {d.lastMessage?.messageType === \"FILE\" && (\n                  <img\n                    src={d.lastMessage.fileUrl}\n                    className=\"h-16 mt-2 rounded\"\n                  />\n                )}\n\n                {d.lastMessage?.messageType === \"TEXT\" && (\n                  <p className=\"text-sm text-gray-500\">\n                    {d.lastMessage.content}\n                  </p>\n                )}\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-4 text-sm text-gray-500\">\n              <span className=\"flex items-center gap-1\">\n                <MessageCircle size={14} />\n                {d.messageCount ?? 0}\n              </span>\n\n              <span className=\"flex items-center gap-1\">\n                <span\n                  className=\"h-2 w-2 rounded-full\"\n                  style={{ background: d.category.colorCode }}\n                />\n                {d.category.categoryName}\n              </span>\n\n              {/* <Trash2\n                size={16}\n                className=\"text-red-500 cursor-pointer\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  deleteDiscussion(d.id);\n                }}\n              /> */}\n            </div>\n          </div>\n        );\n      })}\n\n      {discussions.length === 0 && (\n        <div className=\"border rounded-md p-4 text-gray-400 text-center\">\n          Team discussion will appear here\n        </div>\n      )}\n\n      {/* ================= NEW DISCUSSION MODAL ================= */}\n      {showDiscussionModal && (\n        <div className=\"fixed inset-0 bg-black/30 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg w-[700px] p-6\">\n            <div className=\"flex justify-between mb-4\">\n              <h4 className=\"font-medium text-lg\">New Discussion</h4>\n              <X\n                className=\"cursor-pointer\"\n                onClick={() => setShowDiscussionModal(false)}\n              />\n            </div>\n\n            <select\n              value={discussionForm.categoryId}\n              onChange={(e) =>\n                setDiscussionForm({\n                  ...discussionForm,\n                  categoryId: e.target.value,\n                })\n              }\n              className=\"border rounded px-3 py-2 w-full mb-3 text-sm\"\n            >\n              <option value=\"\">Select category</option>\n              {categories.map((c) => (\n                <option key={c.id} value={c.id}>\n                  {c.categoryName}\n                </option>\n              ))}\n            </select>\n\n            <input\n              placeholder=\"Title\"\n              value={discussionForm.title}\n              onChange={(e) =>\n                setDiscussionForm({\n                  ...discussionForm,\n                  title: e.target.value,\n                })\n              }\n              className=\"border rounded px-3 py-2 w-full mb-3 text-sm\"\n            />\n\n            <textarea\n              placeholder=\"Reply\"\n              value={discussionForm.initialMessage}\n              onChange={(e) =>\n                setDiscussionForm({\n                  ...discussionForm,\n                  initialMessage: e.target.value,\n                })\n              }\n              className=\"border rounded px-3 py-2 w-full mb-4 text-sm min-h-[100px]\"\n            />\n\n            <label className=\"border border-dashed rounded flex flex-col items-center justify-center py-6 cursor-pointer text-gray-400 mb-4\">\n              <Upload />\n              <span className=\"text-sm mt-2\">Choose a file</span>\n              <input\n                type=\"file\"\n                hidden\n                onChange={(e) =>\n                  setDiscussionForm({\n                    ...discussionForm,\n                    file: e.target.files?.[0] || null,\n                  })\n                }\n              />\n            </label>\n\n            <div className=\"flex justify-end gap-3\">\n              <button\n                onClick={() => setShowDiscussionModal(false)}\n                className=\"border px-6 py-2 rounded text-sm\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={createDiscussion}\n                className=\"bg-blue-600 text-white px-6 py-2 rounded text-sm\"\n              >\n                Save\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* ================= CATEGORY MODAL ================= */}\n      {showCategoryModal && (\n        <div className=\"fixed inset-0 bg-black/30 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg w-[600px] p-5\">\n            <div className=\"flex justify-between mb-4\">\n              <h4 className=\"font-medium\">Discussion Category</h4>\n              <X\n                className=\"cursor-pointer\"\n                onClick={() => setShowCategoryModal(false)}\n              />\n            </div>\n\n            {categories.map((c) => (\n              <div\n                key={c.id}\n                className=\"flex justify-between items-center border-b py-2 text-sm\"\n              >\n                <div className=\"flex items-center gap-2\">\n                  <span\n                    className=\"h-2 w-2 rounded-full\"\n                    style={{ background: c.colorCode }}\n                  />\n                  {c.categoryName}\n                </div>\n                {/* <Trash2\n                  size={14}\n                  className=\"text-red-500 cursor-pointer\"\n                  onClick={() => deleteCategory(c.id)}\n                /> */}\n              </div>\n            ))}\n\n            <div className=\"grid grid-cols-2 gap-4 mt-4\">\n              <input\n                placeholder=\"Category Name\"\n                value={categoryForm.categoryName}\n                onChange={(e) =>\n                  setCategoryForm({\n                    ...categoryForm,\n                    categoryName: e.target.value,\n                  })\n                }\n                className=\"border rounded px-3 py-2 text-sm\"\n              />\n              <input\n                placeholder=\"#3498db\"\n                value={categoryForm.colorCode}\n                onChange={(e) =>\n                  setCategoryForm({\n                    ...categoryForm,\n                    colorCode: e.target.value,\n                  })\n                }\n                className=\"border rounded px-3 py-2 text-sm\"\n              />\n            </div>\n\n            <div className=\"flex justify-end gap-3 mt-4\">\n              <button\n                onClick={() => setShowCategoryModal(false)}\n                className=\"border px-4 py-2 rounded text-sm\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={createCategory}\n                className=\"bg-blue-600 text-white px-4 py-2 rounded text-sm\"\n              >\n                Save\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* ================= DISCUSSION DETAIL FULL SCREEN ================= */}\n      {openRoomId && (\n        <DiscussionDetailPage\n          projectId={projectId}\n          roomId={openRoomId}\n          onClose={() => setOpenRoomId(null)}\n        />\n      )}\n    </div>\n  );\n}\n","\n\n\n\"use client\";\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport {\n  X,\n  MoreVertical,\n  Upload,\n  FileText,\n  Edit2,\n  CheckCircle,\n  Trash2,\n  Eye,\n  Download,\n} from \"lucide-react\";\n\n/* =================== WEBSOCKET IMPORTS (ADDED) =================== */\nimport SockJS from \"sockjs-client\";\nimport { Client } from \"@stomp/stompjs\";\n/* ================================================================= */\n\nconst BASE_URL = `${process.env.NEXT_PUBLIC_MAIN}`;\n\n/* ================= TYPES ================= */\ntype MessageItem = {\n  id: number;\n  content?: string;\n  messageType: \"TEXT\" | \"FILE\";\n  fileUrl?: string | null;\n  fileName?: string | null;\n  mimeType?: string | null;\n  createdAt: string;\n  sender?: {\n    employeeId?: string;\n    name: string;\n    profileUrl?: string;\n  };\n  isBestReply?: boolean;\n};\n\ntype DiscussionDetail = {\n  id: number;\n  title: string;\n  createdAt: string;\n  category: {\n    categoryName: string;\n    colorCode: string;\n  };\n};\n\nexport default function DiscussionDetailPage({\n  projectId,\n  roomId,\n  onClose,\n}: {\n  projectId: number;\n  roomId: number;\n  onClose?: () => void;\n}) {\n  /* ================= STATE ================= */\n  const [detail, setDetail] = useState<DiscussionDetail | null>(null);\n  const [messages, setMessages] = useState<MessageItem[]>([]);\n  const [reply, setReply] = useState(\"\");\n  const [file, setFile] = useState<File | null>(null);\n\n  const [editMessage, setEditMessage] = useState<MessageItem | null>(null);\n  const [editContent, setEditContent] = useState(\"\");\n\n  const [openMenuId, setOpenMenuId] = useState<number | null>(null);\n  const [openFileMenuId, setOpenFileMenuId] = useState<number | null>(null);\n\n  const bottomRef = useRef<HTMLDivElement | null>(null);\n\n  /* =================== WEBSOCKET REF (ADDED) =================== */\n  const stompClientRef = useRef<Client | null>(null);\n  /* ============================================================= */\n\n  const currentEmployeeId =\n    typeof window !== \"undefined\"\n      ? localStorage.getItem(\"employeeId\")\n      : null;\n\n  /* ================= HELPERS ================= */\n  const formatTime = (dateStr: string) => {\n    const d = new Date(dateStr);\n    return `${d.toLocaleDateString(\"en-GB\")} | ${d.toLocaleTimeString(\"en-US\", {\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n    })}`;\n  };\n\n  const isImage = (mime?: string | null) => mime?.startsWith(\"image/\");\n\n  const downloadFile = (url?: string | null, name?: string | null) => {\n    if (!url) return;\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = name || \"\";\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n  };\n\n  /* ================= LOADERS ================= */\n  const loadDiscussionDetail = async () => {\n    const res = await fetch(\n      `${BASE_URL}/api/projects/${projectId}/discussion-rooms/${roomId}`,\n      {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n        },\n      }\n    );\n    setDetail(await res.json());\n  };\n\n  const loadMessages = async () => {\n    const res = await fetch(\n      `${BASE_URL}/api/projects/discussion-rooms/${roomId}/messages`,\n      {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n        },\n      }\n    );\n\n    const data: MessageItem[] = await res.json();\n\n    data.sort(\n      (a, b) =>\n        new Date(a.createdAt).getTime() -\n        new Date(b.createdAt).getTime()\n    );\n\n    setMessages(data);\n  };\n\n  /* =================== INITIAL LOAD =================== */\n  useEffect(() => {\n    loadDiscussionDetail();\n    loadMessages();\n  }, [roomId]);\n\n  useEffect(() => {\n    bottomRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages]);\n\n  /* =================== WEBSOCKET CONNECTION (ADDED) =================== */\n  useEffect(() => {\n    const socket = new SockJS(`${BASE_URL}/ws-discussion`);\n\n\n    const client = new Client({\n      webSocketFactory: () => socket,\n      debug: () => {},\n      connectHeaders: {\n        Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n      },\n      onConnect: () => {\n        client.subscribe(\n          `/topic/discussion-rooms/${roomId}`,\n          (message) => {\n            const payload: MessageItem = JSON.parse(message.body);\n\n            setMessages((prev) => {\n              const exists = prev.some((m) => m.id === payload.id);\n              if (exists) return prev;\n              return [...prev, payload];\n            });\n          }\n        );\n      },\n    });\n\n    client.activate();\n    stompClientRef.current = client;\n\n    return () => {\n      client.deactivate();\n    };\n  }, [roomId]);\n  /* =================================================================== */\n\n\n\n/* ================= SEND REPLY ================= */\n  const sendReply = async () => {\n    if (!reply && !file) return;\n\n    const fd = new FormData();\n    if (reply) fd.append(\"content\", reply);\n    if (file) fd.append(\"file\", file);\n    fd.append(\"parentMessageId\", \"\");\n\n    await fetch(\n      `${BASE_URL}/api/projects/discussion-rooms/${roomId}/messages`,\n      {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n        },\n        body: fd,\n      }\n    );\n\n    setReply(\"\");\n    setFile(null);\n    loadMessages();\n  };\n\n\n\n\n\n\n  /* ================= UPDATE MESSAGE ================= */\n  const updateMessage = async () => {\n    if (!editMessage) return;\n\n    await fetch(\n      `${BASE_URL}/api/projects/discussion-rooms/${roomId}/messages/${editMessage.id}`,\n      {\n        method: \"PUT\",\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n          \"Content-Type\": \"text/plain\",\n        },\n        body: editContent,\n      }\n    );\n\n    setEditMessage(null);\n    setEditContent(\"\");\n  };\n\n  /* ================= DELETE ================= */\n  const deleteMessage = async (id: number) => {\n    setOpenMenuId(null);\n    await fetch(\n      `${BASE_URL}/api/projects/discussion-rooms/${roomId}/messages/${id}`,\n      {\n        method: \"DELETE\",\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n        },\n      }\n    );\n  };\n\n  /* ================= BEST / UNBEST ================= */\n  const toggleBestReply = async (message: MessageItem) => {\n    setOpenMenuId(null);\n\n    const alreadyBest = messages.find(\n      (m) => m.isBestReply && m.id !== message.id\n    );\n\n    if (!message.isBestReply && alreadyBest) {\n      alert(\"Please unmark the current Best Reply first.\");\n      return;\n    }\n\n    const endpoint = message.isBestReply\n      ? \"unmark-best-reply\"\n      : \"mark-best-reply\";\n\n    await fetch(\n      `${BASE_URL}/api/projects/discussion-rooms/${roomId}/messages/${message.id}/${endpoint}`,\n      {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n        },\n      }\n    );\n  };\n\n  if (!detail) return null;\n\n  /* ================= UI (UNCHANGED BELOW) ================= */\n\n  return (\n    <div className=\"fixed inset-0 bg-white z-50 flex flex-col\">\n      {/* HEADER */}\n      <div className=\"flex justify-between items-center px-6 py-4 border-b\">\n        <h3 className=\"text-lg font-medium\">Discussion</h3>\n        <X className=\"cursor-pointer\" onClick={onClose} />\n      </div>\n\n      {/* TITLE */}\n      <div className=\"px-6 py-4 border-b\">\n        <h2 className=\"font-medium text-lg\">{detail.title}</h2>\n        <p className=\"text-sm text-gray-400\">\n          Requested On {formatTime(detail.createdAt)}\n        </p>\n      </div>\n\n      {/* MESSAGES */}\n      <div className=\"flex-1 overflow-y-auto px-6 py-4 space-y-4\">\n        {messages.map((m, index) => {\n          const isInitialMessage = index === 0;\n          const isOwnMessage =\n            m.sender?.employeeId === currentEmployeeId;\n\n          return (\n            <div key={m.id} className=\"border rounded-lg p-4\">\n              <div className=\"flex justify-between items-start\">\n                <div className=\"flex gap-3\">\n                  <img\n                    src={m.sender?.profileUrl || \"/avatar.png\"}\n                    className=\"h-9 w-9 rounded-full\"\n                  />\n\n                  <div className=\"w-full\">\n                    <div className=\"flex items-center gap-2\">\n                      <p className=\"font-medium\">{m.sender?.name}</p>\n                      {m.isBestReply && (\n                        <span className=\"bg-green-100 text-green-700 text-xs font-medium px-3 py-1 rounded-full\">\n                          Best Reply\n                        </span>\n                      )}\n                    </div>\n\n                    {m.messageType === \"TEXT\" && (\n                      <p className=\"text-sm text-gray-600 mt-1\">\n                        {m.content}\n                      </p>\n                    )}\n\n                    {m.messageType === \"FILE\" && m.fileUrl && (\n                      <div className=\"relative mt-2 border rounded p-2 flex items-center justify-between\">\n                        <div className=\"flex items-center gap-2\">\n                          {isImage(m.mimeType) ? (\n                            <img\n                              src={m.fileUrl}\n                              className=\"h-16 w-16 rounded object-cover\"\n                            />\n                          ) : (\n                            <FileText size={32} />\n                          )}\n                          <span className=\"text-sm\">{m.fileName}</span>\n                        </div>\n\n                        <MoreVertical\n                          size={16}\n                          className=\"cursor-pointer\"\n                          onClick={() =>\n                            setOpenFileMenuId(\n                              openFileMenuId === m.id ? null : m.id\n                            )\n                          }\n                        />\n\n                        {openFileMenuId === m.id && (\n                          <div className=\"absolute right-2 top-10 bg-white border rounded shadow w-40 z-50\">\n                            <button\n                              onClick={() => {\n                                window.open(m.fileUrl!, \"_blank\");\n                                setOpenFileMenuId(null);\n                              }}\n                              className=\"flex items-center gap-2 px-4 py-2 text-sm hover:bg-gray-100 w-full\"\n                            >\n                              <Eye size={14} />\n                              View\n                            </button>\n\n                            <button\n                              onClick={() => {\n                                downloadFile(m.fileUrl, m.fileName);\n                                setOpenFileMenuId(null);\n                              }}\n                              className=\"flex items-center gap-2 px-4 py-2 text-sm hover:bg-gray-100 w-full\"\n                            >\n                              <Download size={14} />\n                              Download\n                            </button>\n                          </div>\n                        )}\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                {/* MESSAGE ACTIONS (EDIT / BEST / DELETE) */}\n                <div className=\"relative flex items-center gap-3 text-xs text-gray-400\">\n                  {formatTime(m.createdAt)}\n\n                  {isInitialMessage && isOwnMessage && (\n                    <button\n                      onClick={() => {\n                        setEditMessage(m);\n                        setEditContent(m.content || \"\");\n                      }}\n                      className=\"flex items-center gap-1 border px-3 py-1 rounded\"\n                    >\n                      <Edit2 size={14} />\n                      Edit\n                    </button>\n                  )}\n\n                  {!isInitialMessage && (\n                    <>\n                      <MoreVertical\n                        size={16}\n                        className=\"cursor-pointer\"\n                        onClick={() =>\n                          setOpenMenuId(\n                            openMenuId === m.id ? null : m.id\n                          )\n                        }\n                      />\n\n                      {openMenuId === m.id && (\n                        <div className=\"absolute right-0 top-6 bg-white border rounded shadow w-56 z-50\">\n                          {isOwnMessage && (\n                            <button\n                              onClick={() => {\n                                setEditMessage(m);\n                                setEditContent(m.content || \"\");\n                                setOpenMenuId(null);\n                              }}\n                              className=\"flex items-center gap-2 px-4 py-2 text-sm hover:bg-gray-100 w-full\"\n                            >\n                              <Edit2 size={14} />\n                              Edit\n                            </button>\n                          )}\n\n                          {/* <button\n                            onClick={() => toggleBestReply(m)}\n                            className=\"flex items-center gap-2 px-4 py-2 text-sm hover:bg-gray-100 w-full\"\n                          >\n                            <CheckCircle size={14} />\n                            {m.isBestReply\n                              ? \"Unmark Best Reply\"\n                              : \"Mark as Best Reply\"}\n                          </button> */}\n\n                          <button\n                            onClick={() => deleteMessage(m.id)}\n                            className=\"flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-gray-100 w-full\"\n                          >\n                            <Trash2 size={14} />\n                            Delete\n                          </button>\n                        </div>\n                      )}\n                    </>\n                  )}\n                </div>\n              </div>\n            </div>\n          );\n        })}\n        <div ref={bottomRef} />\n      </div>\n\n      {/* REPLY BOX */}\n      <div className=\"border-t px-6 py-4\">\n\n                  <h1>Reply *</h1>\n\n        <textarea\n          value={reply}\n          onChange={(e) => setReply(e.target.value)}\n          className=\"border rounded px-3 py-2 w-full mb-3 min-h-[80px]\"\n        />\n\n <h1>Add File *</h1>\n        <label className=\"border border-dashed rounded flex flex-col items-center py-6 cursor-pointer text-gray-400 mb-4\">\n          <Upload />\n          <span className=\"text-sm mt-2\">\n            {file ? file.name : \"Choose a file\"}\n          </span>\n          <input\n            type=\"file\"\n            hidden\n            onChange={(e) => setFile(e.target.files?.[0] || null)}\n          />\n        </label>\n\n        <div className=\"flex justify-end\">\n          <button\n            onClick={sendReply}\n            className=\"bg-blue-600 text-white px-6 py-2 rounded\"\n          >\n            Reply\n          </button>\n        </div>\n      </div>\n\n      {/* EDIT MODAL */}\n      {editMessage && (\n        <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center z-50\">\n          <div className=\"bg-white w-[500px] rounded p-6\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"font-medium\">Update Reply</h3>\n              <X\n                className=\"cursor-pointer\"\n                onClick={() => setEditMessage(null)}\n              />\n            </div>\n\n            <textarea\n              value={editContent}\n              onChange={(e) => setEditContent(e.target.value)}\n              className=\"border rounded w-full p-3 min-h-[100px]\"\n            />\n\n            <div className=\"flex justify-end gap-3 mt-4\">\n              <button\n                onClick={() => setEditMessage(null)}\n                className=\"px-4 py-2 border rounded\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={updateMessage}\n                className=\"px-4 py-2 bg-blue-600 text-white rounded\"\n              >\n                Save\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"names":[],"mappings":"wFAGA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OCgCA,EAAA,EAAA,CAAA,CAAA,QC9BA,EAAA,CAAA,CAAA,QCJA,IAAA,EAAA,EAAA,CAAA,CAAA,OA+Ce,SAAS,EAAc,MACpC,CAAI,MACJ,CAAI,SACJ,CAAO,CACP,gBAAc,CAMf,EAEC,MAAM,CAAC,EAAK,EAAO,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAC5B,SAEI,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAGrC,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACnC,EAAU,CAAA,EAAA,EAAA,MAAA,AAAM,EAAwB,MACxC,EAAa,CAAA,EAAA,EAAA,MAAA,AAAM,EAA2B,MAG9C,CAAC,EAAqB,EAAuB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACzD,EAAmB,CAAA,EAAA,EAAA,MAAA,AAAM,EAAwB,MAGjD,EAAe,CAAA,EAAA,EAAA,MAAA,AAAM,EAA0B,MAG/C,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACzC,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjD,EAAiB,CAAA,EAAA,EAAA,MAAA,AAAM,EAAwB,MAC/C,EAAoB,CAAA,EAAA,EAAA,MAAM,AAAN,EAAiC,MAGrD,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC/C,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACjD,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC/C,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAGtD,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,GAAS,GACjD,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAGjD,CAAC,EAAkB,EAAoB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACnD,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACjD,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAG9D,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAiB,CACzC,CAAE,GAAI,EAAG,MAAO,UAAW,KAAM,SAAU,QAAS,8BAA+B,EACpF,EACK,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAC9D,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAc,MACtD,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC3C,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC3C,CAAC,GAAuB,GAAyB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,IAC7D,CAAC,GAAa,GAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACzC,CAAC,GAAc,GAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC3C,CAAC,GAAa,GAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAuB,UAC/D,CAAC,GAAgB,GAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC/C,CAAC,GAAmB,GAAqB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MACpE,CAAC,GAAe,GAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC7C,CAAC,GAAc,GAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAuB,UACjE,CAAC,GAAiB,GAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAGjD,CAAC,GAAc,GAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAG3C,CAAC,GAAS,GAAW,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,IACjC,CAAC,GAAgB,GAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC/C,CAAC,GAAW,GAAa,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,IACrC,CAD0C,AACzC,GAAa,GAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MACxD,CAAC,GAAW,GAAa,CAAG,AAFkD,CAElD,EAAA,EAAA,QAAA,AAAQ,EAAgB,MACpD,CAAC,GAAkB,GAAoB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACnD,CAAC,GAAU,GAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,SAC3C,CAAC,GAAc,GAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,IACnD,CADwD,AACvD,GAAe,GAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAG7C,CAAC,GAAS,CAJ6E,EAIlE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACjC,CAAC,GAAa,GAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACzC,CAAC,GAAY,GAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAuC,OAC7E,CAAC,GAAe,GAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC7C,CAAC,GAAuB,GAAyB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC7D,CAAC,GAAoB,GAAsB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAc,IACpE,CAAC,GAAoB,GAAsB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACvD,CAAC,GAAiB,GAAmB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,IACjD,CAAC,GAAQ,GAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAc,MAE5C,CAAC,GAAgB,GAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAG9D,CAAC,GAAW,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAyB,CAC5C,CACE,GAAI,EACJ,SAAU,CAAE,WAAY,KAAM,KAAM,aAAc,gBAAY,EAAW,KAAM,SAAU,EACzF,UAAW,sBACX,QAAS,sBACT,KAAM,MACN,cAAe,GACjB,CADqB,CAErB,CACE,GAAI,EACJ,SAAU,CAAE,WAAY,KAAM,KAAM,aAAc,gBAAY,EAAW,KAAM,SAAU,EACzF,UAAW,sBACX,QAAS,sBACT,KAAM,MACN,cAAe,GACjB,CADqB,CAErB,CACE,GAAI,EACJ,SAAU,CAAE,WAAY,KAAM,KAAM,aAAc,gBAAY,EAAW,KAAM,SAAU,EACzF,UAAW,sBACX,QAAS,sBACT,KAAM,MACN,cAAe,GACjB,CADqB,CAErB,CACE,GAAI,EACJ,SAAU,CAAE,WAAY,KAAM,KAAM,aAAc,gBAAY,EAAW,KAAM,SAAU,EACzF,UAAW,sBACX,QAAS,sBACT,KAAM,MACN,cAAe,GACjB,CADqB,CAEtB,EAED,CAAA,EAAA,EAAA,SAAS,AAAT,EAAU,KACJ,EAAM,EAAa,KAErB,GAAa,GACb,GAAY,GACZ,GAAuB,GACvB,GAAmB,GACnB,EAAkB,IAClB,GAAmB,GACnB,GAAmB,GACnB,EAAkB,MAClB,GAAgB,GAChB,GAAgB,GAChB,IAAyB,GACzB,EAAe,MACf,IAAe,GACf,IAAgB,GAEpB,EAAG,CAAC,EAAK,EAGT,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,SAAS,EAAY,CAAa,EAiChC,GA9BE,GACA,EAAQ,OAAO,EACf,CAAC,EAAQ,OAAO,CAAC,QAAQ,CAAC,EAAE,MAAM,GAClC,EAAW,OAAO,EAClB,CAAC,EAAW,OAAO,CAAC,QAAQ,CAAC,EAAE,MAAM,GACrC,AACA,GAAY,GAKZ,GACA,EAAe,OAAO,EACtB,CAAC,EAAe,OAAO,CAAC,QAAQ,CAAC,EAAE,MAAM,GACzC,EAAkB,OAAO,EACzB,CAAC,EAAkB,OAAO,CAAC,QAAQ,CAAC,EAAE,MAAM,GAC5C,AACA,GAAmB,GAKnB,GACA,EAAiB,OAAO,EACxB,CAAC,EAAiB,OAAO,CAAC,QAAQ,CAAC,EAAE,MAAM,GAC3C,AACA,GAAuB,GAIrB,AAAmB,SAAM,CAC3B,IAAM,EAAc,EAAE,MAAM,CAAa,OAAO,CAAC,qBAC3C,EAAS,EAAE,MAAM,CAAa,OAAO,CAAC,wBACxC,CAAC,GAAe,GAClB,EAAkB,EADO,GAG7B,CAHqB,AAIvB,CAEA,SAAS,EAAU,CAAgB,EACnB,UAAU,CAApB,EAAE,GAAG,GACP,GAAY,GACZ,GAAmB,GACnB,GAAuB,GACvB,GAAkB,GAClB,GAAmB,GACnB,GAAmB,GACnB,EAAkB,MAClB,GAAgB,GAChB,EAAgB,IAChB,IAAyB,GACzB,IAAe,GACf,IAAgB,GAEpB,CAIA,OAFA,SAAS,gBAAgB,CAAC,YAAa,GACvC,SAAS,gBAAgB,CAAC,UAAW,GAC9B,KACL,SAAS,mBAAmB,CAAC,YAAa,GAC1C,SAAS,mBAAmB,CAAC,UAAW,EAC1C,CACF,EAAG,CAAC,EAAU,EAAiB,EAAqB,EAAgB,GAAY,EAEhF,IAAM,GAAc,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,KAE1B,OADiB,AACT,CADU,GAAM,UAAY,EAAA,CAAE,CAAE,WAAW,IAEjD,IAAK,MACH,MAAO,cACT,KAAK,SACH,MAAO,eACT,KAAK,OACH,MAAO,eACT,KAAK,SACH,MAAO,YACT,SACE,MAAO,aACX,CACF,EAAG,CAAC,GAAM,SAAS,EAGnB,GAAI,CAAC,GAAQ,CAAC,EAAM,OAAO,KAE3B,IAAM,GAAW,AAAD,GAAwB,EAAI,IAAI,KAAK,GAAG,kBAAkB,GAAK,KAEzE,GAAe,AAAC,IACpB,GAAI,CAAC,EAAG,MAAO,KACf,IAAM,EAAK,IAAI,KAAK,GAEd,EAAK,OAAO,EAAG,OAAO,IAAI,QAAQ,CAAC,EAAG,KACtC,EAAK,OAAO,EAAG,QAAQ,GAAK,GAAG,QAAQ,CAAC,EAAG,KAC3C,EAAO,EAAG,WAAW,GAC3B,MAAO,CAAA,EAAG,EAAG,CAAC,EAAE,EAAG,CAAC,EAAE,EAAA,CAAM,AAC9B,EACM,GAAU,AAAC,GAAuB,EAAI,IAAI,KAAK,GAAG,kBAAkB,CAAC,EAAE,CAAE,CAAE,KAAM,UAAW,OAAQ,SAAU,GAAK,KACnH,GAAe,AAAD,IAClB,GAAI,QAAqC,CAA5B,KAAmC,GAA3B,EACrB,IAAM,EAAI,CADoB,IACf,KAAK,CAAC,CAAC,IAAQ,CAAC,CAAI,IAC7B,EAAI,CAAC,IAAQ,CAAC,CAAI,UACxB,AAAI,GAAK,EAAU,CAAP,AAAO,EAAG,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,CAC5B,EAAU,CAAA,AAAP,EAAU,EAAE,CAAC,CAAC,CACd,CAAA,EAAG,EAAE,CAAC,CAAC,AAChB,EAgNM,GAAgB,KACpB,GAAgB,GAChB,EAAe,KACjB,EA0GA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2DACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CACC,UAAW,iHAGT,EAAY,gBAAkB,wCAE/B,CAAC,IAAI,CAAC,UAGP,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iEACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kCAAwB,SAEpC,EAAK,SAAS,CAAG,CAAC,IAAI,EAAE,OAAO,EAAK,EAAE,EAAE,QAAQ,CAAC,EAAG,KAAA,CAAM,CAAG,CAAC,IAAI,EAAE,OAAO,EAAK,EAAE,EAAA,CAAG,IAExF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCACf,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAyB,EAAK,KAAK,EAAI,oBAK1D,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,aAAW,QAAQ,QAAS,EAAS,UAAU,gCAAgC,MAAM,iBAC3F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,+BAKzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sDAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kEACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6CACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UACC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAK,EAAE,EAAI,IAAiB,EAAK,EAAE,EAClD,UAAU,wGACX,uBAKH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6CAEb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,IAAK,EAAY,QAAS,IAAM,EAAY,AAAC,GAAM,CAAC,GAAI,UAAU,yCACxE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBAAwB,KAAK,yBAC1C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,IAAI,GAAG,KAAK,EAAE,QACzB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,KAAK,GAAG,KAAK,EAAE,QAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,KAAK,GAAG,KAAK,EAAE,aAI7B,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,IAAK,EAAS,UAAU,wFAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QA/WG,CA+WM,IA9WnC,GAAY,GACZ,GAAuB,EACzB,EA4W6D,UAAU,gEAAuD,qBAG1G,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QA5WL,CA4Wc,IA3WnC,GAAY,GAGZ,GAAW,EAAK,KAAK,EAAI,IACzB,GAAkB,IAClB,CADuB,EACV,EAAK,WAAW,EAAI,IACjC,GAAe,EAAK,SAAS,EAAI,MACjC,GAAa,EAAK,CAHsD,MAG/C,EAAI,MAC7B,IAAoB,CAAQ,EAAK,SAAS,EAC1C,GAAY,EAAK,SAAS,EAAE,MAAQ,SACpC,GACE,CAAC,EAAK,iBAAiB,EAAI,EAAK,iBAAiB,CAAC,MAAM,EAAI,EAAK,iBAAiB,CAAC,EAAE,CAAC,IAAA,AAAI,IACvF,CAAD,CAAM,mBAAmB,EAAI,EAAK,mBAAmB,CAAC,EAAA,AAAE,GACxD,IAEJ,GAAiB,EAAK,WAAW,EAAI,IACrC,GAAW,CAAC,EAAK,MAAM,EAAI,EAAK,MAAM,CAAC,EAAE,EAAE,IAAA,CAAI,EAAK,IACpD,GAAe,EAAK,SAAS,EAAE,OAAS,IACxC,GAAe,EAAK,QAAQ,CAAI,OAAO,EAAK,QAAQ,EAAE,MAAM,CAAC,GAAG,WAAW,GAAK,OAAO,EAAK,QAAQ,EAAE,KAAK,CAAC,GAAM,OAKlH,IAAiB,CAAQ,EAAK,SAAS,EACvC,IAAyB,CAAQ,EAAK,mBAAmB,EACzD,GAAsB,EAAK,mBAAmB,EAAI,IAClD,IAAsB,CAAQ,EAAK,WAAW,EAC9C,GAAmB,IACnB,GAAU,MACV,GAAkB,MAElB,IAAgB,EAClB,EA2UqD,UAAU,gEAAuD,iBAGlG,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QA5UN,CA4Ue,IA3UnC,GAAY,GACZ,MAAM,mBACR,EAyUoD,UAAU,gEAAuD,gBAGjG,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QA3UD,CA2UU,IA1UnC,EAAY,IACZ,IAAM,EAAO,GAAG,OAAqE,EAAK,EAAE,EAAE,CAC9F,GAAI,CACF,UAAU,SAAS,CAF2B,CAEzB,UAAU,GAC/B,MAAM,MAHiE,GAAG,OAAO,gBAInF,CAAE,KAAM,CACN,MAAM,cAAgB,EACxB,CACF,EAkUyD,UAAU,gEAAuD,yBAO1G,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAAS,EAAS,UAAU,wCAKxC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0DACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,YAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAe,EAAK,WAAW,EAAI,CAAC,QAAQ,EAAE,EAAK,SAAS,EAAI,KAAA,CAAM,GAErF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,aAC/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,qBAAqB,EAAE,GAAA,CAAa,GACtD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,uBAAe,EAAK,QAAQ,EAAI,WAGlD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,gBAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBACZ,EAAK,iBAAiB,EAAI,EAAK,iBAAiB,CAAC,MAAM,CACpD,EAAK,iBAAiB,CAAC,GAAG,CAAC,AAAC,GAAM,EAAE,IAAI,EAAE,IAAI,CAAC,MAC/C,EAAK,mBAAmB,EAAI,EAAK,mBAAmB,CAAC,MAAM,CAC3D,EAAK,mBAAmB,CAAC,IAAI,CAAC,MAC9B,OAGN,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,iBAC/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBAAc,OAAK,OAAO,EAAK,EAAE,EAAE,QAAQ,CAAC,EAAG,QAE9D,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,eAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAe,EAAK,SAAS,EAAE,OAAS,SAEvD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,UAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAe,EAAK,MAAM,EAAI,EAAK,MAAM,CAAC,MAAM,CAAG,EAAK,MAAM,CAAC,GAAG,CAAC,AAAC,GAAM,EAAE,IAAI,EAAE,IAAI,CAAC,MAAQ,OAE9G,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,kBAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAc,OAE7B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,gBAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2CAAmC,EAAK,WAAW,EAAI,aAK1E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qCAChB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAe,EAAK,SAAS,EAAE,MAAQ,aAGxD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,eAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBA1ca,CA0cE,AA1czB,EA0cqC,EAAK,SAAS,EA1cxB,IAAI,KAAK,GAAG,cAAc,GAAK,UA6cjE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,eAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAe,GAAQ,EAAK,SAAS,OAGtD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,aAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAe,EAAK,SAAS,CAAG,KAAO,GAAQ,EAAK,OAAO,OAG5E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,iBAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAe,GAAY,EAAK,kBAAkB,EAAI,oBAO7E,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAO,SACtB,UAAW,CAAC,KAAK,EAAU,UAAR,EAAkB,yCAA2C,gBAAA,CAAiB,UAClG,UAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAO,WACtB,UAAW,CAAC,KAAK,EAAU,YAAR,EAAoB,yCAA2C,gBAAA,CAAiB,UACpG,aAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAO,aACtB,UAAW,CAAC,KAAK,EAAU,cAAR,EAAsB,yCAA2C,gBAAA,CAAiB,UACtG,cAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAO,SACtB,UAAW,CAAC,KAAK,EAAU,UAAR,EAAkB,yCAA2C,gBAAA,CAAiB,UAClG,aAMH,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAA,MAIH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mEAEb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,IAAK,EAAc,KAAK,OAAO,UAAU,SAAS,SA5ajD,AAAD,CA4a4D,GA3a/E,IAAM,EAAQ,EAAE,MAAM,CAAC,KAAK,CACvB,GAAS,AAAiB,GAAG,GAAd,MAAM,GAC1B,MACE,CAAA,EAAG,EAAM,MAAM,CAAC,kFAAkF,CAAC,EAErG,EAAE,aAAa,CAAC,KAAK,CAAG,GAC1B,EAqa+F,QAAQ,CAAA,CAAA,IAGhF,UAAR,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QApbA,CAobS,GApbH,EAAa,OAAO,EAAE,QAqb5B,UAAU,mFACV,aAAW,cACX,MAAM,wBAEN,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,uHAA8G,MAC9H,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,qBAIV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCACZ,EAAK,WAAW,EAAI,EAAK,WAAW,CAAC,MAAM,CAC1C,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,6BACX,EAAK,WAAW,CAAC,GAAG,CAAC,CAAC,EAAG,KACxB,IAAM,EAAc,EAAE,IAAI,EAAI,AA7X5B,CAAC,IAC3B,GAAI,CAAC,EAAK,MAAO,aACjB,GAAI,CACF,IAAM,EAAO,EAAI,KAAK,CAAC,KAAK,GAAG,IAAM,EACrC,OAAO,mBAAmB,EAAK,KAAK,CAAC,IAAI,CAAC,EAAE,CAC9C,CAAE,KAAM,CACN,OAAO,CACT,CACF,GAqX4E,EAAE,GAAG,EACvD,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAW,UAAU,8CACpB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gCAAwB,IACvC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCACZ,EAAE,GAAG,CACJ,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,KAAM,EAAE,GAAG,CAAE,OAAO,SAAS,IAAI,aAAa,UAAU,qBAAY,aAGrE,SAPC,EAWb,KAGF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAOtB,AAAQ,eACP,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QA1bC,CA0bQ,IAzb7B,EAAmB,IACnB,EAAkB,IAClB,EAAc,MACd,GAAkB,EACpB,EAsbsB,UAAU,mFACV,aAAW,iBACX,MAAM,2BAEN,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,uHAA8G,MAC9H,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,wBAIV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBACZ,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,mDACZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,0DACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,WACL,QAAS,EACT,SApeF,CAoeY,IAnetC,EAAgB,AAAD,GAAO,CAAC,EACzB,EAme8B,UAAU,kCACV,aAAW,wBAEb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,QAAQ,EAAE,EAAc,6BAA+B,gBAAA,CAAiB,UAAE,+BAOhG,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,IAAK,EACL,QAAS,IAAM,EAAmB,AAAC,GAAM,CAAC,GAC1C,UAAU,gCACV,aAAW,wBAEX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBAAwB,KAAK,yBAC1C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,IAAI,GAAG,KAAK,EAAE,QACzB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,KAAK,GAAG,KAAK,EAAE,QAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,KAAK,GAAG,KAAK,EAAE,aAI7B,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,IAAK,EAAgB,UAAU,sFAClC,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAAO,QA1fhB,CA0fyB,IAzf7C,GAAmB,GACnB,GAAmB,EACrB,EAuf8D,UAAU,yFACxC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wBAAwB,QAAQ,YAAY,KAAK,gBAAO,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,oDAAoD,OAAO,eAAe,YAAY,UAAa,UAGpL,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAAO,QA1fhB,CA0fyB,IAzf7C,GAAmB,GACnB,EAAoB,yBACpB,EAAmB,IACnB,EAAkB,MAClB,GAAmB,EACrB,EAof8D,UAAU,yFACxC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wBAAwB,QAAQ,YAAY,KAAK,gBAAO,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,mCAAmC,OAAO,eAAe,YAAY,UAAa,UAGnK,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAAO,QAvfd,CAufuB,IAtf7C,GAAmB,GACf,QAAQ,qCAAqC,AAC/C,MAAM,uDAEV,EAkfgE,UAAU,sGAC1C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAuB,QAAQ,YAAY,KAAK,gBAAO,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,wFAAwF,OAAO,eAAe,YAAY,UAAa,4BAa9N,AAAR,iBACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0GACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAc,aAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAc,eAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAc,aAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kCAAyB,oBAI1C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6BACZ,GAAW,GAAG,CAAC,AAAC,GACf,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAiB,UAAU,kEAC1B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+FAEZ,EAAI,QAAQ,CAAC,UAAU,CAEtB,CAAA,CADA,CACA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAK,EAAI,QAAQ,CAAC,UAAU,CAAE,IAAK,EAAI,MADS,EACD,CAAC,IAAI,CAAE,UAAU,+BAErE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,iCAAyB,EAAI,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,IAAI,CAAC,QAG5F,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAe,EAAI,QAAQ,CAAC,IAAI,GAC/C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAyB,EAAI,QAAQ,CAAC,IAAI,EAAI,WAIjE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAe,GAAa,EAAI,SAAS,IACxD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAyB,GAAQ,EAAI,SAAS,OAG/D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAe,GAAa,EAAI,OAAO,IACtD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAyB,GAAQ,EAAI,OAAO,OAG7D,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAe,GAAY,EAAI,aAAa,QA5BrD,EAAI,EAAE,KAmCpB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCAOd,UAAR,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QA7cF,CA6cW,IA5c7B,GAAgB,IAChB,GAAkB,IAClB,GAAe,UACf,GAAqB,MACrB,IAAe,EACjB,EAwcsB,mBAAiB,CAAA,CAAA,EACjB,UAAU,mFACV,aAAW,aACX,MAAM,uBAEN,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,uHAA8G,MAC9H,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,oBAIV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uDAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6FACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAc,eAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAc,cAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kCAAyB,cAItB,OAAnB,GAA2B,GAC1B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,iBAAe,CAAA,CAAA,EAAC,UAAU,sFAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QA/hBf,CA+hBwB,IA9hBpC,IACL,GAAgB,GAChB,EAAkB,CAFA,KAGpB,EA2hBuD,UAAU,wFAA+E,SAGtH,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QA5hBf,CA4hBwB,IA3hBpC,IACL,GAAiB,EAAY,IADX,CACgB,EAClC,GAAgB,EAAY,IAAI,EAChC,GAAmB,EAAY,OAAO,EAAI,IAC1C,GAAgB,GAChB,EAAkB,MACpB,EAqhBuD,UAAU,wFAA+E,SAGtH,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAthBb,CAshBsB,IArhBpC,IACL,IAAyB,GACzB,EAAkB,AAFA,MAGpB,EAkhByD,UAAU,qGAA4F,cAOzI,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gCACZ,EAAM,MAAM,CACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBACX,EAAM,GAAG,CAAC,AAAC,GACV,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAiB,UAAU,8CAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gCAAwB,EAAK,KAAK,GAEjD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iDACE,WAAd,EAAK,IAAI,CAAgB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,WAAgB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,cAGxD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oBACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,qBAAmB,CAAA,CAAA,EACnB,QAAS,IAAM,CA9jBjD,KACA,EAAkB,AA6jB8C,EA7jBzC,EAAE,GA8jBS,CA/jBnB,SA+jB6B,gCACV,aAAW,wBAEX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBAAwB,KAAK,yBAC1C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,IAAI,GAAG,KAAK,EAAE,QACzB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,KAAK,GAAG,KAAK,EAAE,QAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,KAAK,GAAG,KAAK,EAAE,iBAjBzB,EAAK,EAAE,KAyBpB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6BAAoB,yCAcxD,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kFACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,IAAK,EAAkB,KAAK,SAAS,aAAW,OAAO,UAAU,8DACpE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCAAwB,kBACtC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,4DAG5C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wDACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QA1rBQ,CA0rBC,IAzrB3B,GAAuB,EACzB,EAwrBkD,UAAU,gGAAuF,WACvI,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QA/rBK,CA+rBI,IAxvB3B,MAAM,uCA2DN,GAAuB,EACzB,EA4rB+C,UAAU,mFAA0E,gBAO9H,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kFACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,KAAK,SAAS,aAAW,OAAO,UAAU,8DAC7C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,oDAA0C,SACnD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,wBAAe,SAEvC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,MAAO,EACP,SAAU,AAAC,IACT,EAAmB,EAAE,MAAM,CAAC,KAAK,EAC7B,GAAY,EAAc,KAChC,EACA,UAAU,8GACV,YAAY,sBACZ,SAAS,CAAA,CAAA,IAEV,GAAc,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCAA6B,OAG7D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,mDAA0C,gBAC3D,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CACC,MAAO,EACP,SAAU,AAAC,GAAM,EAAkB,EAAE,MAAM,CAAC,KAAK,EACjD,UAAU,2HACV,YAAY,oCAIhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAprBa,CAorBJ,IAnrBrB,GAAkB,GAClB,EAAc,KAChB,EAkrBc,UAAU,gGACX,WAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAtrBW,CAsrBF,IArrBrB,GAAI,CAAC,EAAgB,IAAI,GAAI,YAC3B,EAAc,qBAGhB,MAAM,CAAC,SAAS,EAAE,EAAgB,8CAA8C,CAAC,EACjF,GAAkB,EACpB,EAgrBc,UAAU,mFACX,iBASR,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kFACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,KAAK,SAAS,aAAW,OAAO,UAAU,8DAC7C,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,sCAA6B,oBAC3C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,UAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAc,0BAE7B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,gBAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAc,UAG/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,GAAmB,GAClC,UAAU,gGACX,iBASR,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kFACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,KAAK,SAAS,aAAW,OAAO,UAAU,8DAC7C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,oDAA0C,SACnD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,wBAAe,SAEvC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,MAAO,EACP,SAAU,AAAC,IACT,EAAoB,EAAE,MAAM,CAAC,KAAK,EAC9B,GAAgB,EAAkB,KACxC,EACA,UAAU,8GACV,YAAY,sBACZ,SAAS,CAAA,CAAA,IAEV,GAAkB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCAA6B,OAGjE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,mDAA0C,gBAC3D,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CACC,MAAO,EACP,SAAU,AAAC,GAAM,EAAmB,EAAE,MAAM,CAAC,KAAK,EAClD,UAAU,2HACV,YAAY,oCAIhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAhvBc,CAgvBL,IA/uBrB,GAAmB,GACnB,EAAkB,KACpB,EA8uBc,UAAU,gGACX,WAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAlvBU,CAkvBD,IAjvBrB,GAAI,CAAC,EAAiB,IAAI,GAAI,YAC5B,EAAkB,qBAGpB,MAAM,CAAC,oBAAoB,EAAE,EAAiB,sCAAsC,CAAC,EACrF,GAAmB,EACrB,EA4uBc,UAAU,mFACX,mBASR,IACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kFACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,qBAAmB,CAAA,CAAA,EAAC,KAAK,SAAS,aAAW,OAAO,UAAU,8DACjE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,oDAA0C,cAC9C,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,wBAAe,SAE5C,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,MAAO,GACP,SAAU,AAAC,IACT,GAAgB,EAAE,MAAM,CAAC,KAAK,EAC1B,IAAmB,GAAqB,KAC9C,EACA,UAAU,8GACV,YAAY,mBACZ,SAAS,CAAA,CAAA,IAEV,IAAqB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCAA6B,QAGpE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,mDAA0C,gBAC3D,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CACC,MAAO,GACP,SAAU,AAAC,GAAM,GAAkB,EAAE,MAAM,CAAC,KAAK,EACjD,UAAU,4HACV,YAAY,qCAIhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yCACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,2CACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,QACL,KAAK,YACL,QAAyB,WAAhB,GACT,SAAU,IAAM,GAAe,YAEjC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,mBAAU,cAE5B,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,2CACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,QACL,KAAK,YACL,QAAyB,YAAhB,GACT,SAAU,IAAM,GAAe,aAEjC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,mBAAU,kBAI9B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QArtBQ,CAqtBC,IAptBrB,IAAe,GACf,GAAqB,KACvB,EAmtBc,UAAU,gGACX,WAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAttBM,CAstBG,IArtBrB,GAAI,CAAC,GAAa,IAAI,GAAI,YACxB,GAAqB,qBAIvB,IAAM,EAAgB,CACpB,GAFY,CAER,CAFc,MAAM,CAAG,KAAK,GAAG,IAAI,EAAM,GAAG,CAAC,AAAC,GAAM,EAAE,EAAE,GAAK,EAAI,EAGrE,MAAO,GAAa,IAAI,GACxB,KAAM,GACN,QAAS,EACX,EACA,EAAS,AAAC,GAAM,CAAC,KAAY,EAAE,EAC/B,IAAe,GACf,GAAgB,IAChB,GAAkB,IAClB,GAAe,SACjB,EAssBc,UAAU,mFACX,iBASR,GAAgB,GACf,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kFACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,KAAK,SAAS,aAAW,OAAO,UAAU,8DAC7C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCAAwB,cACtC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAAS,GAAe,UAAU,yCACxC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,+BAIzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,UAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAe,EAAY,KAAK,GAE/C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,SAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAoC,WAArB,EAAY,IAAI,CAAgB,SAAW,YAEzE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,YAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2CAAmC,EAAY,OAAO,EAAI,UAG3E,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAAS,GAAe,UAAU,gGAAuF,iBASxI,GAAgB,GACf,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kFACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,KAAK,SAAS,aAAW,OAAO,UAAU,8DAC7C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCAAwB,cACtC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAAS,KAAQ,GAAgB,GAAQ,EAAe,KAAO,EAAG,UAAU,yCAClF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,+BAIzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,oDAA0C,SAAM,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,wBAAe,SAChG,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,MAAO,GACP,SAAW,AAAD,GAAO,GAAiB,EAAE,MAAM,CAAC,KAAK,EAChD,UAAU,8GACV,YAAY,mBACZ,SAAS,CAAA,CAAA,OAIb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,mDAA0C,SAC3D,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,MAAO,GACP,SAAU,AAAC,GAAM,GAAgB,EAAE,MAAM,CAAC,KAAK,EAC/C,UAAU,wHAEV,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,kBAAS,WACvB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,mBAAU,kBAI5B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,mDAA0C,YAC3D,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CACC,MAAO,GACP,SAAU,AAAC,GAAM,GAAmB,EAAE,MAAM,CAAC,KAAK,EAClD,UAAU,4HACV,YAAY,qCAIhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAAS,KAAQ,GAAgB,GAAQ,EAAe,KAAO,EAAG,UAAU,gGAAuF,WAG3K,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAn1BC,CAm1BQ,IAl1B3B,GAAK,CAAD,EACJ,GAAI,CAAC,GAAc,GADD,CACK,GAAI,YACzB,MAAM,qBAGR,EAAS,AAAC,GACR,EAAE,GAAG,CAAC,AAAC,GACL,EAAE,EAAE,GAAK,EAAY,EAAE,CACnB,CAAE,GAAG,CAAC,CAAE,MAAO,GAAc,IAAI,GAAI,KAAM,GAAc,QAAS,EAAgB,EAClF,IAGR,GAAgB,GAChB,EAAe,MACjB,EAo0B2C,UAAU,mFAA0E,iBAS1H,IAAyB,GACxB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kFACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,KAAK,SAAS,aAAW,OAAO,UAAU,8DAC7C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCAAwB,kBACtC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,uCAA6B,gBAAmB,EAAY,KAAK,CAAC,yCAGjF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wDACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QA12BK,CA02BI,IAz2B3B,IAAyB,GACzB,EAAe,KACjB,EAu2B+C,UAAU,gGAAuF,WACpI,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAr3BM,CAq3BG,IAp3B3B,GAAI,CAAC,EAAa,YAChB,IAAyB,GAG3B,EAAS,AAAC,GAAM,EAAE,MAAM,CAAC,AAAC,GAAM,EAAE,EAAE,GAAK,EAAY,EAAE,GACvD,IAAyB,GACzB,EAAe,KACjB,EA62BgD,UAAU,iFAAwE,mBAO7H,IACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2GACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,KAAK,SAAS,aAAW,OAAO,UAAU,mEAE7C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iEACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAwB,wBACvC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAAS,IAAM,IAAgB,GAAQ,UAAU,yCACvD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,+BAIzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oCAA2B,qBAE1C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,wCAA8B,SAAM,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,wBAAe,SACpF,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,MAAO,GACP,SAAU,AAAC,IAAQ,GAAW,EAAE,MAAM,CAAC,KAAK,EAAO,IAAgB,GAAkB,KAAO,EAC5F,UAAU,sHACV,YAAY,iBAKhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,uCAA8B,kBAC/C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4BACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAO,GAAgB,SAAU,AAAC,GAAM,GAAkB,EAAE,MAAM,CAAC,KAAK,EAAG,UAAU,0HAC3F,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,YAAG,SAEnB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAt1BD,CAs1BU,IAr1BnC,MAAM,uCACR,EAo1ByD,UAAU,wDAA+C,cAKlG,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,6CAAmC,WAAQ,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,wBAAe,SAC3F,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAO,GAAW,SAAU,AAAC,GAAM,GAAa,EAAE,MAAM,CAAC,KAAK,EAAG,UAAU,+HACjF,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAO,EAAK,WAAW,EAAI,YAAK,EAAK,WAAW,EAAI,sBAKhE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sCAA6B,mBAC5C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qFAA4E,OAC3F,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAc,aAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAwB,8BAM7C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,4CAAmC,eACpD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,MAAO,GAAc,GAAY,KAAK,CAAC,IAAI,CAAC,EAAE,CAAG,GACjD,SAAU,AAAC,GAAM,GAAe,EAAE,MAAM,CAAC,KAAK,CAAG,EAAE,MAAM,CAAC,KAAK,CAAG,MAClE,UAAU,2HAKd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,4CAAmC,aACpD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,MAAO,GAAY,GAAU,KAAK,CAAC,IAAI,CAAC,EAAE,CAAG,GAC7C,SAAU,AAAC,GAAM,GAAa,EAAE,MAAM,CAAC,KAAK,CAAG,EAAE,MAAM,CAAC,KAAK,CAAG,MAChE,SAAU,GACV,UAAU,4IAEZ,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,wDACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,KAAK,WAAW,QAAS,GAAkB,SAAU,AAAC,GAAM,GAAoB,EAAE,MAAM,CAAC,OAAO,IACvG,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,2BAKV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,4CAAmC,WACpD,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAAO,MAAO,GAAU,SAAU,AAAC,GAAM,GAAY,EAAE,MAAM,CAAC,KAAK,EAAG,UAAU,gIAC/E,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,iBAAQ,UACtB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,iBAAQ,UACtB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,gBAAO,eAKzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,4CAAmC,gBACpD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAO,GAAc,SAAU,AAAC,GAAM,GAAgB,EAAE,MAAM,CAAC,KAAK,EAAG,UAAU,+HACvF,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAO,IAAgB,YAAK,IAAgB,qBAKxD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,4CAAmC,gBACpD,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CAAS,MAAO,GAAe,SAAU,AAAC,GAAM,GAAiB,EAAE,MAAM,CAAC,KAAK,EAAG,UAAU,mIAAmI,YAAY,gBAMlP,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oCAA2B,kBAE1C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4DAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,uCAA8B,UAC/C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4BACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAO,GAAS,SAAU,AAAC,GAAM,GAAW,EAAE,MAAM,CAAC,KAAK,EAAG,UAAU,0HAC7E,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,YAAG,SAEnB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QA36BJ,CA26Ba,IA16BnC,MAAM,+BACR,EAy6BsD,UAAU,wDAA+C,cAK/F,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,uCAA8B,eAC/C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAO,GAAa,SAAU,AAAC,GAAM,GAAe,EAAE,MAAM,CAAC,KAAK,EAAG,UAAU,+HACrF,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,YAAG,YAKrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,uCAA8B,aAC/C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,qBAAqB,EAAiB,QAAf,GAAuB,eAAgC,WAAf,GAA0B,gBAAiC,SAAf,GAAwB,gBAAkB,aAAA,CAAc,GACrL,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAAO,MAAO,GAAY,SAAW,AAAD,GAAO,GAAc,EAAE,MAAM,CAAC,KAAK,EAAU,UAAU,oHAC1F,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,eAAM,QACpB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,kBAAS,WACvB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,gBAAO,SACrB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,kBAAS,sBAO/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,2CACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,KAAK,WAAW,QAAS,GAAe,SAAU,AAAC,GAAM,GAAiB,EAAE,MAAM,CAAC,OAAO,IACjG,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,mBAAU,sBAK9B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,2CACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,KAAK,WAAW,QAAS,GAAuB,SAAU,AAAC,GAAM,GAAyB,EAAE,MAAM,CAAC,OAAO,IACjH,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,mBAAU,qBAE3B,IACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,KAAK,SAAS,IAAK,EAAG,MAAO,GAAoB,SAAU,AAAC,GAAM,GAAyC,KAAnB,EAAE,MAAM,CAAC,KAAK,CAAU,GAAK,OAAO,EAAE,MAAM,CAAC,KAAK,GAAI,UAAU,iHAC/J,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sCAA6B,eAMnD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,2CACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,KAAK,WAAW,QAAS,GAAoB,SAAU,AAAC,GAAM,GAAsB,EAAE,MAAM,CAAC,OAAO,IAC3G,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,mBAAU,uCAG3B,IACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,wCAA8B,kBAAe,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,wBAAe,SAC7F,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAO,GAAiB,SAAU,AAAC,GAAM,GAAmB,EAAE,MAAM,CAAC,KAAK,EAAG,UAAU,+HAC7F,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,YAAG,sBAOzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+BACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,4CAAmC,aACpD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,QAh8BM,CAg8BG,IA97B3B,EAAa,OAAO,EAAE,OACxB,EA87BoB,UAAU,uJAET,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAe,GAAO,IAAI,GACzC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kCAAyB,CAAC,GAAO,IAAI,CAAG,IAAA,CAAI,CAAE,OAAO,CAAC,GAAG,YAG1E,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UAAI,oBAGT,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,KAAK,OAAO,SAv8BV,AAAC,CAu8BmB,GAt8B7C,IAAM,EAAI,EAAE,MAAM,CAAC,KAAK,EAAI,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE,CACzC,GAAG,AACL,GAAU,GAGZ,EAAE,aAAa,CAAC,KAAK,CAAG,EAC1B,EAg8BmE,UAAU,iBAK9D,IAAkB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCAA6B,QAIjE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gDACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAhgCG,CAggCM,IA//B7B,IAAgB,GAChB,GAAkB,KACpB,EA6/BiD,UAAU,8FAAqF,WAClI,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QA5/BD,CA4/BU,GA1/B7B,AAAK,GAAQ,CAAT,GAAa,GAIb,CAJiB,GAIK,CAAC,GAAgB,IAAI,IAAI,IACjD,GAAkB,8DA0BpB,MAAM,8BAAgC,KAAK,SAAS,CAAC,AArBrC,CACd,GAAI,EAAK,EAAE,CACX,MAAO,GAAQ,IAAI,GACnB,SAAU,GAAe,IAAI,GAC7B,QAAS,GACT,UAAW,GACX,QAAS,GAAmB,KAAO,GACnC,eAAgB,GAChB,OAAQ,GACR,WAAY,GACZ,YAAa,GAAc,IAAI,GAC/B,MAAO,GACP,UAAW,GACX,SAAU,GACV,UAAW,GACX,iBAAkB,GAAwB,OAAO,IAAsB,GAAK,KAC5E,YAAa,GACb,cAAe,GACf,SAAU,GAAS,GAAO,IAAI,CAAG,IACnC,EAE8D,KAAM,IACpE,GAAgB,UA/Bd,GAAkB,qBAy/BuB,UAAU,iFAAwE,wBAUjI,CD7gDA,IAAM,EAAA,yCAES,SAAS,EAAW,CAAE,WAAS,CAAyB,EACrE,GAAM,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,EAAE,EACvC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAG5C,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAe,EAAE,EAGnD,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACvC,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACnC,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAc,MAGhD,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACnC,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAqB,MAGvD,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAC5D,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAqB5D,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAlBd,AAkBe,CAjB/B,MAAO,GACP,SAAU,GACV,UAAW,GACX,QAAS,GACT,WAAW,EACX,YAAa,GACb,oBAAqB,EAAE,CACvB,YAAa,GACb,SAAU,EAAE,CACZ,YAAa,GACb,SAAU,MACV,WAAW,EACX,oBAAqB,GACrB,YAAa,GACb,UAAW,EACX,SAAU,IACZ,GAMM,EAAgB,UACpB,GAAI,CACF,IAAM,EAAM,CAAA,EAAG,EAAK,OAAO,CAAC,CACtB,EAAQ,aAAa,OAAO,CAAC,eAC7B,EAAM,MAAM,EAAA,OAAK,CAAC,GAAG,CAAC,EAAK,CAC/B,QAAS,CAAE,cAAe,EAAQ,CAAC,OAAO,EAAE,EAAA,CAAO,CAAG,EAAG,CAC3D,GACI,MAAM,OAAO,CAAC,EAAI,IAAI,EAAG,EAAY,EAAI,IAAI,EAC5C,EAAY,EAAE,CACrB,CAAE,MAAO,EAAK,CACZ,QAAQ,IAAI,CAAC,4BAA6B,GAC1C,EAAY,EAAE,CAChB,CACF,EAGM,EAAa,UACjB,EAAW,IACX,EAAS,MACT,GAAI,CACF,IAAM,EAAQ,aAAa,OAAO,CAAC,eAC7B,EAAM,CAAA,EAAG,EAAK,UAAU,EAAE,EAAU,MAAM,CAAC,CAC3C,EAAM,MAAM,EAAA,OAAK,CAAC,GAAG,CAAC,EAAK,CAC/B,QAAS,CACP,eAAgB,mBAChB,cAAe,EAAQ,CAAC,OAAO,EAAE,EAAA,CAAO,CAAG,EAC7C,CACF,GACA,EAAS,MAAM,OAAO,CAAC,EAAI,IAAI,EAAI,EAAI,IAAI,CAAG,EAAE,CAClD,CAAE,MAAO,EAAU,CACjB,EAAS,GAAK,UAAU,MAAM,SAAW,GAAK,SAAW,uBAC3D,QAAU,CACR,EAAW,GACb,CACF,EAEA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,IACA,GAEF,EAAG,CAAC,EAAU,EAgHd,IAAM,EAAmB,AAAC,IAExB,OAAQ,CADkB,UAAb,OAAO,EAAiB,EAAI,GAAG,MAAQ,EAAA,EACvC,WAAW,IACtB,IAAK,WACL,IAAK,YACL,IAAK,WACL,IAAK,WACH,MAAO,cACT,KAAK,QACL,IAAK,QACL,IAAK,OACH,MAAO,eACT,KAAK,QACH,MAAO,aACT,KAAK,aACH,MAAO,YACT,KAAK,UACL,IAAK,uBACH,MAAO,aACT,SACE,MAAO,aACX,CACF,EAIM,EAAe,MAAO,EAAY,KAEtC,EAAS,AAAC,GACR,EAAK,GAAG,CAAC,AAAC,GAAO,EAAE,EAAE,GAAK,EAAK,EAAE,CAAG,CAAE,GAAG,CAAC,CAAE,UAAW,CAAE,GAAI,EAAW,EAAE,CAAE,KAAM,EAAW,IAAI,AAAC,EAAG,YAAa,EAAW,EAAE,AAAC,EAAI,IAGtI,IAAM,EAAQ,aAAa,OAAO,CAAC,eACnC,GAAI,CAEF,IAAM,EAAM,CAAA,EAAG,EAAK,oBAAoB,EAAE,EAAK,EAAE,CAAC,iBAAiB,EAAE,EAAW,EAAE,CAAA,CAAE,AAEpF,OAAM,EAAA,OAAK,CAAC,KAAK,CACf,EACA,CAAC,EACD,CACE,QAAS,CACP,eAAgB,mBAChB,cAAe,EAAQ,CAAC,OAAO,EAAE,EAAA,CAAO,CAAG,EAC7C,CACF,GAIF,EAAiB,KACnB,CAAE,MAAO,EAAU,CACjB,QAAQ,KAAK,CAAC,2BAA4B,GAC1C,MAAM,wDAEN,MAAM,IACN,EAAiB,KACnB,CACF,EAUM,EAAe,AAAD,IAClB,GAAI,CAAC,GAAiB,IAAT,EAAY,MAAO,KAChC,IAAM,EAAI,KAAK,KAAK,CAAC,CAAC,IAAQ,CAAC,CAAI,IAC7B,EAAI,CAAC,IAAQ,CAAC,CAAI,UACxB,AAAI,GAAK,EAAU,CAAP,AAAO,EAAG,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,CAC5B,EAAU,CAAP,AAAO,EAAG,EAAE,CAAC,CAAC,CACd,CAAA,EAAG,EAAE,CAAC,CAAC,AAChB,EAaA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2DACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,sCAA6B,UAG3C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4BAYf,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,SACL,YAAY,SACZ,SAAU,AAAC,IACT,IAAM,EAAI,EAAE,MAAM,CAAC,KAAK,CAAC,WAAW,GAC/B,EACA,EAAS,AAAC,GAAS,EAAK,MAAM,CAAC,AAAC,GAAM,AAAC,GAAE,KAAK,EAAI,EAAA,CAAE,CAAE,WAAW,GAAG,QAAQ,CAAC,IAAM,CAAC,EAAE,WAAW,EAAI,EAAA,CAAE,CAAE,WAAW,GAAG,QAAQ,CAAC,KAD7H,GAEV,EACA,UAAU,6CAMf,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0CAAiC,qBAC9C,EACF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yCAAiC,IAEhD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4BACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,+BACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,+CACZ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAY,SAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAY,SAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAY,iBAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAY,eAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAY,aAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAY,iBAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAY,mBAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAY,eAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAY,gBAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAY,WAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAY,gBAI9B,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACmB,IAAjB,EAAM,MAAM,CACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,QAAS,GAAI,UAAU,0CAAiC,qBAK9D,EAAM,GAAG,CAAC,AAAC,IACT,IAAM,EAAY,EAAE,OAAO,EAAI,CAAC,EAAE,SAAS,EAAI,IAAI,KAAK,EAAE,OAAO,EAAI,IAAI,KACnE,EAAgB,CA5Eb,AAAC,IACxB,GAAI,EAAE,SAAS,EAAI,EAAE,SAAS,CAAC,IAAI,CAAE,OAAO,EAAE,SAAS,CACvD,GAAI,EAAE,WAAW,CAAE,CACjB,IAAM,EAAI,EAAS,IAAI,CAAE,AAAD,GAAQ,EAAG,EAAE,GAAK,EAAE,WAAW,EACvD,GAAI,EAAG,OAAO,CAChB,CAEA,MADgB,AACT,CA1FiB,AAAD,IACvB,GAAI,AAAC,GAAa,EAAS,MAAM,CACjC,AADiB,CAAkB,MAC5B,CADmC,CAC1B,IAAI,CAAC,AAAC,GAAM,OAAO,EAAE,IAAI,EAAE,WAAW,GAAG,QAAQ,CAAC,OAAO,GAAM,WAAW,KAC5F,EAsFmC,OAAO,EAAE,SAAS,EAAE,MAAQ,MAC3C,CAAE,GAAI,EAAE,WAAW,EAAI,EAAG,KAAM,EAAE,SAAS,EAAE,MAAQ,OAAQ,CACjF,GAoEuD,GACjC,EAAa,GAAe,MAAQ,QAC1C,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAc,UAAU,+DACvB,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,gCAAsB,OAAK,OAAO,EAAE,EAAE,EAAE,QAAQ,CAAC,EAAG,QAElE,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,gCACZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAe,EAAE,KAAK,GACrC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sCAA8B,EAAE,WAAW,EAAI,CAAC,QAAQ,EAAE,EAAE,SAAS,CAAA,CAAE,MAGxF,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+BAAsB,OAEpC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+BAAuB,EAAE,SAAS,CAAG,IAAI,KAAK,EAAE,SAAS,EAAE,kBAAkB,GAAK,OAEhG,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAW,CAAC,oBAAoB,EAAE,EAAY,eAAiB,GAAA,CAAI,UACpE,EAAE,SAAS,CAAG,KAAO,EAAE,OAAO,CAAG,IAAI,KAAK,EAAE,OAAO,EAAE,kBAAkB,GAAK,OAG/E,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+BAAuB,EAAY,EAAE,kBAAkB,EAAI,QAEzE,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+BAAuB,EAAY,EAAE,mBAAmB,EAAI,QAE1E,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+BAAuB,EAAE,SAAS,EAAE,OAAS,OAE3D,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+BACZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2BACZ,AAAC,GAAE,iBAAiB,EAAI,EAAA,AAAE,EAAE,KAAK,CAAC,EAAG,GAAG,GAAG,CAAC,AAAC,GAC5C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAuB,UAAU,kFAC/B,EAAE,UAAU,CAAG,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAK,EAAE,UAAU,CAAE,IAAK,EAAE,IAAI,CAAE,UAAU,+BAAkC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,qCAD7G,EAAE,UAAU,OAO5B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,wCAEZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kCACb,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAS,AAAC,IACR,EAAG,eAAe,GAClB,EAAiB,MACjB,EAAiB,AAAC,GAAS,IAAQ,EAAE,EAAE,CAAG,KAAO,EAAE,EAAE,CACvD,EACA,UAAU,iGACV,MAAM,0BAGL,GAAiB,EAAc,UAAU,CACxC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CACC,MAAO,CACL,MAAO,EACP,OAAQ,EACR,aAAc,KACd,QAAS,eACT,WAAY,CAAC,CAAC,EAAE,OAAO,EAAc,UAAU,EAAE,OAAO,CAAC,gBAAiB,IAAI,KAAK,CAAC,EAAG,GAAA,CAAI,AAC7F,IAGF,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,qBAAqB,EAAE,EAAiB,GAAe,MAAQ,SAAA,CAAU,GAE7F,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAM,OAAO,KACd,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,mBAAU,SAG3B,IAAkB,EAAE,EAAE,EACrB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,QAAS,AAAC,GAAM,EAAE,eAAe,GAAI,UAAU,wFACjD,EAAS,MAAM,CAAG,EACjB,EAAS,GAAG,CAAC,AAAC,GACZ,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAEC,QAAS,IAAM,EAAa,EAAG,GAC/B,UAAW,CAAC,oEAAoE,EAAE,EAAG,EAAE,GAAK,GAAe,GAAK,cAAgB,GAAA,CAAI,WAEnI,EAAG,UAAU,CACZ,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,MAAO,CAAE,MAAO,EAAG,OAAQ,EAAG,aAAc,KAAM,WAAY,CAAC,CAAC,EAAE,OAAO,EAAG,UAAU,EAAE,OAAO,CAAC,gBAAiB,IAAI,KAAK,CAAC,EAAG,GAAA,CAAI,AAAC,IAEzI,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,qBAAqB,EAAE,EAAiB,EAAG,IAAI,EAAA,CAAG,GAEtE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAM,EAAG,IAAI,KATT,EAAG,EAAE,GAad,CAAC,QAAS,QAAS,YAAa,aAAc,uBAAuB,CAAC,GAAG,CAAC,AAAC,GACzE,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAEC,QAAS,KAEP,EAAa,EADY,CAAE,AACX,GADe,EAAG,KAAM,CAAI,EAE9C,EACA,UAAU,wDAEV,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,qBAAqB,EAAE,EAAiB,GAAA,CAAM,GAAI,IAAC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAM,MAPvE,WAgBnB,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,yCACR,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,KAlMnC,EAoMqC,GAnMrC,EAAY,IAoMgB,CArMhB,CAqMiC,KACnB,EACA,UAAU,uDACX,SAKJ,IAAkB,EAAE,EAAE,EACrB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,QAAS,AAAC,GAAM,EAAE,eAAe,GAAI,UAAU,gFAhHjD,EAAE,EAAE,CAyHjB,QAMN,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oHACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,qBAAmB,EAAM,MAAM,CAAG,EAAM,MAAM,CAAG,KACtD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UAAI,sBAmLX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,KAAM,EACN,KAAM,EACN,QAAS,KACP,GAAY,GACZ,EAAY,KACd,MAIR,CEjsBA,IAAM,EAAO,MAAA,mCAKP,EAAM,EAAA,AALiC,OAK5B,CAAC,MAAM,CAAC,CACvB,QAAS,GAAQ,IACjB,QAAS,IACX,GAsBe,SAAS,EAAyB,WAC/C,CAAS,CAGV,EACC,GAAM,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAyB,MACjD,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAqB,EAAE,EACvD,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAE5C,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC3C,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC/C,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC/B,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAKhE,EAAe,UACnB,GAAI,CACF,GAAW,GACX,EAAS,MAGT,IAAM,EAAO,CAAA,EAAG,EAAK,UAAU,EAAE,EAAA,CAAW,CAEtC,EAAO,MAAM,EAAI,GAAG,CAAC,GAE3B,EAAW,GACX,EAAW,GAAM,mBAAqB,EAAE,CAC1C,CAAE,MAAO,EAAU,CACjB,EAAS,EAAI,OAAO,EACpB,EAAW,MACX,EAAW,EAAE,CACf,QAAU,CACR,GAAW,EACb,CACF,EAEA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GACF,EAAG,CAAC,EAAU,EA+Ed,IAAM,EAAoB,UACxB,GAAK,CAAD,OAAS,yBAEb,CAFuC,EAEnC,CACF,EAAmB,SACnB,EAAS,MAET,IAAM,EAAM,CAAA,EAAG,EAAK,UAAU,EAAE,EAAU,MAAM,CAAC,AAEjD,OAAM,EAAI,MAAM,CAAC,GAEjB,GACF,CAAE,MAAO,EAAU,CACjB,EAAS,EAAI,OAAO,CACtB,QAAU,CACR,EAAmB,KACrB,CACF,EAKM,EAAW,EAAQ,MAAM,CAAC,AAAC,IAC/B,IAAM,EAAI,EAAO,WAAW,GAC5B,OACE,EAAE,IAAI,EAAE,cAAc,SAAS,IAC/B,EAAE,UAAU,CAAC,WAAW,GAAG,QAAQ,CAAC,IACpC,EAAE,WAAW,EAAE,cAAc,SAAS,EAE1C,GAMA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2DACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,sCAA6B,WAG3C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCAQb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,SACL,YAAY,SACZ,UAAU,2BACV,MAAO,EACP,SAAW,AAAD,GAAO,EAAU,EAAE,MAAM,CAAC,KAAK,IAE3C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,UAAU,yCACX,iBAMJ,GAAW,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4BAAmB,aAE7C,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mDAA2C,IAG3D,CAAC,GACA,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,+BACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,kCACZ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAY,SAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAY,oBAK9B,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,WACE,EAAS,GAAG,CAAC,AAAC,GACb,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAsB,UAAU,qBAC/B,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,8CACZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+FACZ,EAAE,UAAU,CACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAK,EAAE,UAAU,CACjB,UAAU,+BAGZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,4BAIxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAe,EAAE,IAAI,GACpC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCACZ,EAAE,WAAW,EAAI,EAAE,UAAU,SAMpC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,sBAOZ,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,gBAAO,kBAEtB,GAAS,iBAAmB,EAAE,UAAU,EACvC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,IACf,SAAU,EACV,UAAU,0DAET,EAAkB,cAAgB,sBArClC,EAAE,UAAU,GAuDF,IAApB,EAAS,MAAM,EACd,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,QAAS,EAAG,UAAU,0CAAiC,+BA8C3E,CCtUe,SAAS,EAAmB,aACzC,EAAc,aAAa,UAC3B,CAAQ,WACR,EAJ2F,IAIjE,MAAd,KACZ,CAAS,CAMV,EACC,IAAM,EAAO,CAAC,GAfV,SAesB,+BAAA,CAAY,CAAE,OAAO,CAAC,MAAO,IACjD,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAc,EAAE,EAC1C,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAC5C,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,GAGvC,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC/B,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAiB,OAGvD,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACzC,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC/B,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MACpD,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAEpD,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CAC/B,UAAW,GACX,OAAQ,GACR,WAAY,GACZ,UAAW,GACX,UAAW,GACX,QAAS,GACT,QAAS,GACT,KAAM,EACR,GAGM,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAC5D,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACvC,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAmB,MAC3D,CAAC,EAAqB,EAAuB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAiBzD,EAAU,MAAO,EAAa,EAAoB,CAAC,CAAC,CAAE,EAAY,IAAK,IAC3E,IAAM,EAAa,IAAI,gBACjB,EAAU,WAAW,IAAM,EAAW,KAAK,GAAI,GACrD,GAAI,CACF,IAAM,EAAS,CAAE,GAAG,CAAI,CAAE,OAAQ,EAAW,MAAM,AAAC,EAC9C,EAAM,MAAM,MAAM,CAAA,EAAG,EAAK,oBAAoB,EAAE,EAAA,CAAW,CAAE,GACnE,aAAa,GAEb,IAAM,EAAK,EAAI,OAAO,CAAC,GAAG,CAAC,iBAAmB,GACxC,EAAO,MAAM,EAAI,IAAI,GAAG,KAAK,CAAC,IAAM,IAC1C,GAAI,CAAC,EAAI,EAAE,CAAE,CACX,GAAI,EAAG,QAAQ,CAAC,oBACd,CADmC,EAC/B,CACF,IAAM,EAAO,KAAK,KAAK,CAAC,GAAQ,MAC1B,EAAM,GAAM,SAAW,KAAK,SAAS,CAAC,EAC5C,OAAM,AAAI,MAAM,CAAC,KAAK,EAAE,EAAI,MAAM,CAAC,CAAC,EAAE,EAAI,UAAU,CAAC,GAAG,EAAE,EAAA,CAAK,CACjE,CAAE,KAAM,CACN,MAAM,AAAI,MAAM,CAAC,KAAK,EAAE,EAAI,MAAM,CAAC,CAAC,EAAE,EAAI,UAAU,CAAC,GAAG,EAAE,EAAK,KAAK,CAAC,EAAG,KAAA,CAAM,CAChF,CAEF,GAAI,EAAG,QAAQ,CAAC,cAAgB,EAAK,IAAI,GAAG,UAAU,CAAC,kBACrD,CADwE,KAClE,AAAI,MAAM,CAAC,KAAK,EAAE,EAAI,MAAM,CAAC,CAAC,EAAE,EAAI,UAAU,CAAC,sCAAsC,CAAC,CAE9F,OAAM,AAAI,MAAM,CAAC,KAAK,EAAE,EAAI,MAAM,CAAC,CAAC,EAAE,EAAI,UAAU,CAAC,CAAC,EAAE,EAAO,KAAO,EAAK,KAAK,CAAC,EAAG,KAAO,GAAA,CAAI,CACjG,CACA,GAAI,EAAG,QAAQ,CAAC,oBACd,CADmC,MAC5B,KAAK,KAAK,CAAC,GAAQ,MAE5B,OAAO,CACT,CAAE,MAAO,EAAU,CACjB,GAAiB,eAAb,EAAI,IAAI,CAAmB,MAAM,AAAI,MAAM,qBAC/C,GAAI,AAAgB,sBAAZ,OAAO,CAAwB,MAAM,AAAI,MAAM,mDACvD,OAAM,CACR,QAAU,CACR,aAAa,EACf,CACF,EAGM,EAAkB,UACtB,GAAW,GACX,EAAS,MACT,GAAI,CACF,IAAM,EAzDO,AAyDD,CAzDE,IAChB,IAAM,EAAI,OAAO,GAAQ,WACrB,AAAJ,EAAM,UAAU,CAAC,YAAc,EAAE,UAAU,CAAC,YAAoB,CAAP,CACrD,EAAE,UAAU,CAAC,KAAa,CAAP,AAAO,EAAG,EAAA,EAAO,EAAA,CAAG,CACpC,CAAA,EAAG,EAAK,CAAC,EAAE,EAAA,CAAG,CACvB,EAoDyB,GACf,EAAM,MAAM,EAAQ,EAAK,CAC7B,OAAQ,MACR,QAAS,CArDS,CAAC,EAAgC,CAAC,CAAC,IACzD,IAAM,EAA4B,CAAE,GAAG,CAAK,AAAC,EAE7C,OADI,IAAW,CAAC,CAAC,aAAgB,CAAG,CAAC,OAAO,EAAE,EAAA,CAAA,AAAW,EAClD,EACT,EAiD+B,CAAE,eAAgB,kBAAmB,GAC9D,YAAa,aACf,GACI,MAAM,OAAO,CAAC,GAAM,EAAQ,GACvB,GAAK,MAAQ,MAAM,OAAO,CAAC,EAAI,IAAI,EAAG,EAAQ,EAAI,IAAI,GAE7D,QAAQ,IAAI,CAAC,kCAAmC,GAChD,EAAQ,EAAE,EACV,EAAS,uDAEb,CAAE,MAAO,EAAU,CACjB,QAAQ,KAAK,CAAC,yBAA0B,GACxC,EAAQ,EAAE,EACV,EAAS,GAAK,SAAW,4BAC3B,QAAU,CACR,GAAW,EACb,CACF,EAEA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GAEF,EAAG,CAAC,EAAW,EAGf,IAAM,EAAe,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,KAC3B,IAAM,EAAM,IAAI,IAMhB,OALA,EAAK,OAAO,CAAC,AAAC,IACZ,IAAM,EAAI,EAAE,SAAS,EAAI,EAAE,SAAS,CAAC,EAAE,CACnC,GAAK,EAAE,UAAU,CAAE,EAAI,GAAG,CAAC,EAAE,UAAU,CAAE,GACpC,EAAE,UAAU,EAAE,EAAI,GAAG,CAAC,EAAE,UAAU,CAAE,CAAE,WAAY,EAAE,UAAU,AAAC,EAC1E,GACO,MAAM,IAAI,CAAC,EAAI,MAAM,GAC9B,EAAG,CAAC,EAAK,EAGH,EAAW,EAAK,MAAM,CAAC,AAAC,IAC5B,GAAuB,QAAnB,GAA4B,EAAI,UAAU,GAAK,EAAgB,MAAO,GAC1E,GAAI,CAAC,EAAQ,OAAO,EACpB,IAAM,EAAI,EAAO,WAAW,GACtB,EAAM,EAAI,SAAS,EAAI,EAAI,SAAS,CAAC,EAAE,CAC7C,OACE,OAAO,EAAI,UAAU,EAAI,IAAI,WAAW,GAAG,QAAQ,CAAC,IACpD,OAAO,EAAI,SAAS,EAAI,IAAI,WAAW,GAAG,QAAQ,CAAC,IACnD,OAAO,EAAI,MAAM,EAAI,IAAI,WAAW,GAAG,QAAQ,CAAC,IAChD,OAAO,EAAI,IAAI,EAAI,IAAI,WAAW,GAAG,QAAQ,CAAC,IAC9C,OAAO,GAAK,MAAQ,IAAI,WAAW,GAAG,QAAQ,CAAC,EAEnD,GAGM,EAAO,AAAD,GAAgB,EAAI,GAAK,CAAC,CAAC,EAAE,EAAA,CAAG,CAAG,CAAA,EAAG,EAAA,CAAG,CA6B/C,EAAc,CAAC,EAAe,IAC3B,CA7BqB,CAAC,EAAe,KAC5C,GAAI,CAAC,EAAM,MAAO,IAElB,GAAI,CACF,GAAM,CAAC,EAAG,EAAG,EAAE,CAAG,EAAK,KAAK,CAAC,KAAK,GAAG,CAAC,QAClC,EAAK,EACP,EAAK,EACP,GAAI,EAAM,CACR,IAAM,EAAQ,EAAK,KAAK,CAAC,KAAK,GAAG,CAAC,QAClC,EAAK,CAAK,CAAC,EAAE,EAAI,EACjB,EAAK,CAAK,CAAC,EAAE,EAAI,CACnB,CACA,IAAM,EAAK,IAAI,KAAK,EAAG,EAAI,EAAG,EAAG,EAAI,GAE/B,EAAM,EAAI,EAAG,OAAO,IACpB,EAAM,EAAI,EAAG,QAAQ,GAAK,GAC1B,EAAO,EAAG,WAAW,GACvB,EAAQ,EAAG,QAAQ,GACjB,EAAU,EAAI,EAAG,UAAU,IAC3B,EAAO,GAAS,GAAK,KAAO,KAClC,EAAQ,EAAQ,IAAM,GACtB,IAAM,EAAW,EAAI,GACrB,MAAO,CAAA,EAAG,EAAI,CAAC,EAAE,EAAI,CAAC,EAAE,EAAK,CAAC,EAAE,EAAS,CAAC,EAAE,EAAQ,CAAC,EAAE,EAAA,CAAM,AAC/D,CAAE,KAAM,CACN,OAAO,EAAQ,GAAO,CAAC,CAAC,AAAV,EAAY,EAAA,CAAM,CAAG,EAAA,CACrC,AADuC,EAEzC,EAG+B,EAAM,GAyIrC,MAjHwB,CArBK,CAAC,EAAgB,EAAgB,EAAgB,KAC5E,GAAI,AAAC,GAAU,EACf,GAAI,CADU,AAEZ,CAFoB,GAEd,EAAS,EAAM,AAFM,KAED,CAAC,KAAK,GAAG,CAAC,QAC9B,EAAS,EAAM,KAAK,CAAC,KAAK,GAAG,CAAC,QAChC,EAAK,EACP,EAAK,EACL,EAAK,EACL,EAAK,EACH,IAAO,CAAC,EAAI,EAAG,CAAG,EAAM,KAAK,CAAC,KAAK,GAAG,CAAC,AAAC,GAAM,OAAO,GAAA,EACrD,GAAO,EAAC,EAAI,EAAG,CAAG,EAAM,KAAK,CAAC,KAAK,GAAG,CAAC,AAAC,GAAM,OAAO,GAAA,EACzD,IAAM,EAAQ,IAAI,KAAK,CAAM,CAAC,EAAE,CAAE,CAAM,CAAC,EAAE,CAAG,EAAG,CAAM,CAAC,EAAE,CAAE,EAAI,GAE1D,EADM,AACG,IADC,KAAK,CAAM,CAAC,EAAE,CAAE,CAAM,CAAC,EAAE,CAAG,EAAG,CAAM,CAAC,EAAE,CAAE,EAAI,GAC3C,OAAO,GAAK,EAAM,OAAO,GAC5C,GAAI,MAAM,IAAW,GAAU,EAAG,OAAO,EACzC,OAAO,KAAK,KAAK,CAAC,EAAU,KAC9B,CAAE,CAD2B,AAAQ,IAC7B,CADkC,AAExC,EAF0C,IAAI,CAEvC,CACT,EACF,EAE6C,EAAK,AANQ,SAMC,CAAE,EAAK,SAAS,CAAE,EAAK,OAAO,CAAE,EAAK,OAAO,EAkHrG,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2DACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCAAwB,cAEtC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,mBAAU,aAC3B,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAAO,MAAO,EAAgB,SAAU,AAAC,GAAM,EAAkB,EAAE,MAAM,CAAC,KAAK,EAAG,UAAU,6CAC3F,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,eAAM,QACnB,EAAa,GAAG,CAAC,AAAC,GACjB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAA0B,MAAO,EAAE,UAAU,UAC3C,EAAE,IAAI,CAAG,CAAA,EAAG,EAAE,IAAI,CAAC,EAAE,EAAE,EAAE,UAAU,CAAC,CAAC,CAAC,CAAG,EAAE,UAAU,EAD3C,EAAE,UAAU,YAQjC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAA,GAMD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAAS,IAAM,EAAc,AAAC,GAAM,EAAI,GAAI,UAAU,0EAAiE,YAI/H,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,KAAK,SAAS,YAAY,oCAAoC,MAAO,EAAQ,SAAU,AAAC,GAAM,EAAU,EAAE,MAAM,CAAC,KAAK,EAAG,UAAU,8CAI7I,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0CAAiC,0BAEhD,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACG,GAAS,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oDAA0C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,WAAe,IAAE,KAE5F,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kCACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,gCACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,+CACZ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAY,SAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAY,SAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAY,aAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAY,eAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAY,aAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAY,qBAK9B,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACsB,IAApB,EAAS,MAAM,CACd,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,QAAS,EAAG,UAAU,0CAAiC,0BAE/D,EAAS,GAAG,CAAC,AAAC,IACZ,IAAM,EAAM,EAAI,SAAS,EAAI,EAAI,SAAS,CAAC,EAAE,CACvC,EAAO,CAAC,IAAI,EAAE,OAAO,EAAI,EAAE,EAAE,QAAQ,CAAC,EAAG,KAAA,CAAM,CAC/C,EAAY,CAAC,KAAK,EAAE,EAAI,MAAM,EAAI,IAAI,cAAW,EAAE,EAAI,SAAS,EAAI,IAAA,CAAK,CAC/E,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAgB,UAAU,+DACzB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+BAAuB,IAErC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,gCACZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+BAAuB,IACtC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAyB,EAAI,IAAI,EAAI,QAGtD,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,wDACZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+FACZ,GAAK,WAEJ,CAAA,CADA,CACA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAK,EAAI,UAAU,CAAE,IAAK,GAAK,MAAQ,GAAI,KADK,KACK,+BACxD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,gCAG1B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBAAe,GAAK,MAAQ,EAAI,UAAU,GACzD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAyB,GAAK,aAAe,GAAK,YAAc,EAAI,UAAU,SAIjG,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+BAAuB,EAAY,EAAI,SAAS,CAAE,EAAI,SAAS,IAC7E,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+BAAuB,EAAY,EAAI,OAAO,CAAE,EAAI,OAAO,IACzE,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+BAAoD,UAA7B,OAAO,EAAI,aAAa,CAAgB,CAAA,EAAG,EAAI,aAAa,CAAC,CAAC,CAAC,CAAG,MAEvG,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+BACZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wCA3BV,EAAI,EAAE,CAqCnB,eAkBlB,CDxbA,EAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,AAAC,IAC5B,IAAM,EAAQ,aAAa,OAAO,CAAC,eAEnC,OADI,IAAO,EAAO,OAAO,CAAC,aAAa,CAAG,CAAC,OAAO,EAAE,EAAA,CAAA,AAAO,EACpD,CACT,GAGA,EAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC3B,AAAC,GAAQ,EAAI,IAAI,CAChB,AAAD,GAMS,QAAQ,MAAM,CAAC,AAAI,MAAM,AAJ9B,GAAK,UAAU,MAAM,SACrB,GAAK,UAAU,YACf,EAAI,OAAO,EACX,oBHqCN,IAAM,EAAA,yCAMA,EAAsB,AAAC,IACzB,GAAI,CAAC,EAAK,OAAO,KACjB,IAAM,EAAM,OAAO,GAAK,OAAO,CAAC,gBAAiB,WACjD,AAAI,EAAI,MAAM,EAAI,EAAU,CAAP,AAAQ,CAAC,EAAE,EAAI,KAAK,CAAC,EAAG,GAAA,CAAI,CAC1C,IACX,EAKM,EAAoB,AAAC,IACvB,IAAM,EAAI,EAAK,WAAW,UAC1B,AAAI,EAAE,QAAQ,CAAC,aAAe,EAAE,QAAQ,CAAC,YAAoB,CAAP,SAClD,CADoE,CAClE,OAD0E,CAClE,CAAC,UAAY,EAAE,QAAQ,CAAC,SAAW,EAAE,QAAQ,CAAC,SAAiB,CAAP,SAClE,CADoF,CAClF,QAAQ,AADmF,CAClF,SAAiB,CAAP,SACrB,CADuC,CACrC,MAD4C,EACpC,CAAC,cAAsB,CAAP,SAC1B,CAD4C,CAC1C,KADgD,GACxC,CAAC,SAAW,EAAE,QAAQ,CAAC,WAAmB,CAAP,SAC1C,CAD4D,OAAO,CAE9E,EADsB,AAMhB,EAAmB,CAAC,EAAY,EAAY,EAAW,KACzD,CAPiC,GAO3B,EAAkB,CAAC,EAAiB,EAAA,CAAE,CAAI,KAAK,EAAE,CAAI,IAC3D,MAAO,CACH,EAAG,EAAK,EAAI,KAAK,GAAG,CAAC,GACrB,EAAG,EAAK,EAAI,KAAK,GAAG,CAAC,EACzB,CACJ,EAYA,SAAS,EAAe,WAAE,CAAS,CAAyB,EACxD,GAAM,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAe,EAAE,EACnD,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAa,EAAE,EAC3C,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAwB,MAE5C,EAAQ,aAAa,OAAO,CAAC,gBAAkB,GAErD,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACN,IAAI,EAAU,GA4Bd,MADA,CA1BiB,UACb,GAAW,GACX,EAAS,MACT,GAAI,CAEA,IAAM,EAAY,CAAA,EAAG,EAAK,OAAO,CAAC,CAC5B,CAAC,EAAM,EAAK,CAAG,MAAM,QAAQ,GAAG,CAAC,CACnC,EAAA,OAAK,CAAC,GAAG,CAAC,EAAW,CAAE,QAAS,CAAE,cAAe,EAAQ,CAAC,OAAO,EAAE,EAAA,CAAO,CAAG,EAAG,CAAE,GAClF,EAAA,OAAK,CAAC,GAAG,CAAC,CAAA,EAAG,EAAK,UAAU,EAAE,EAAU,MAAM,CAAC,CAAE,CAAE,QAAS,CAAE,cAAe,EAAQ,CAAC,OAAO,EAAE,EAAA,CAAO,CAAG,EAAG,CAAE,GACjH,EAEG,IACA,EAAY,GADH,GACS,OAAO,CAAC,EAAK,IAAI,EAAI,EAAK,IAAI,CAAG,EAAE,EACrD,EAAS,MAAM,OAAO,CAAC,EAAK,IAAI,EAAI,EAAK,IAAI,CAAG,EAAE,EAE1D,CAAE,MAAO,EAAU,CACf,QAAQ,KAAK,CAAC,kCAAmC,GAAK,UAAU,MAAQ,GAAK,SAAW,GACpF,IACA,EAAS,GADA,+BAET,EAAY,EAAE,EACd,EAAS,EAAE,EAEnB,QAAU,CACF,GAAS,GAAW,EAC5B,EACJ,IAEO,KACH,GAAU,CACd,CACJ,EAAG,CAAC,EAAW,EAAM,EAGrB,IAAM,EAAS,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,KACnB,IAAM,EAAM,IAAI,IAqChB,OAlCA,EAAS,OAAO,CAAC,AAAC,GAAM,EAAI,GAAG,CAAC,EAAE,EAAE,CAAE,CAAE,OAAQ,EAAG,MAAO,CAAE,IAG5D,EAAM,OAAO,CAAC,AAAC,IAEX,IAAM,EAAK,EAAK,WAAW,EAAI,EAAK,SAAS,EAAE,IAAM,KACrD,SAAI,EAAiC,CACjC,IAAM,AADC,EACK,MAAM,AADH,IACO,CAAC,EAAI,AADL,IACS,IAAI,IAAI,CAAC,AAAC,GAAM,IAAM,GACrD,QAAY,IAAR,EAAmB,CACnB,IAAM,EAAM,EAAI,GAAG,CAAC,GACpB,EAAI,KAAK,EAAI,EACb,EAAI,GAAG,CAAC,EAAe,GACvB,MACJ,CACJ,CAEA,IAAM,EAAY,EAAK,SAAS,EAAE,MAAQ,GACpC,EAAU,EAAS,IAAI,CAAC,AAAC,GAAM,GAAa,OAAO,EAAE,IAAI,EAAE,WAAW,GAAG,QAAQ,CAAC,EAAU,WAAW,KAC7G,GAAI,EAAS,CACT,IAAM,EAAM,EAAI,GAAG,CAAC,EAAQ,EAAE,GAAK,CAAE,OAAQ,EAAS,MAAO,CAAE,EAC/D,EAAI,KAAK,EAAI,EACb,EAAI,GAAG,CAAC,EAAQ,EAAE,CAAE,GACpB,MACJ,CAEA,IAAM,EAAa,SACf,CAAC,EAAI,GAAG,CAAC,IACT,EAAI,GAAG,CAAC,EAAmB,CADE,AACA,OAAQ,CAAE,GAAI,EAAG,KAAM,QAAS,WAAY,IAAK,EAAG,MAAO,CAAE,GAE9F,IAAM,EAAM,EAAI,GAAG,CAAC,GACpB,EAAI,KAAK,EAAI,EACb,EAAI,GAAG,CAAC,EAAmB,EAC/B,GAEO,MAAM,IAAI,CAAC,EAAI,MAAM,GAChC,EAAG,CAAC,EAAU,EAAM,EAEd,EAAQ,EAAO,MAAM,CAAC,CAAC,EAAG,IAAM,EAAI,EAAE,KAAK,CAAE,IAAM,EAGrD,EAAW,EACT,EAAS,EACV,MAAM,CAAC,AAAC,GAAM,EAAE,KAAK,CAAG,GACxB,GAAG,CAAC,AAAC,IACF,IAAM,EAAuB,IAAV,EAAc,EAAI,EAAE,KAAK,CAAG,EACzC,EAAQ,EAEd,GADc,AAAa,MAE3B,GADY,CACN,EAAQ,EAAoB,EAAE,MAAM,CAAC,UAAU,GAAK,EAAkB,EAAE,MAAM,CAAC,IAAI,EACzF,MAAO,CACH,GAAG,CAAC,CACJ,QACA,IAAK,QACL,CACJ,CACJ,GAEJ,MACI,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UACI,EACG,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0CAAiC,+BAChD,EACA,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yCAAiC,IAEhD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6BACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,QAAQ,cAAc,MAAM,MAAM,OAAO,MAAM,UAAU,0BAEvC,IAAlB,EAAO,MAAM,EAAU,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,KAAK,GAAG,KAAK,EAAE,KAAK,KAAK,YAC3D,EAAO,GAAG,CAAC,CAAC,EAAG,IACZ,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAe,EAAG,CA/H/B,CAAC,EAAY,EAAY,EAAW,EAAoB,KACxE,IAAM,EAAQ,KA8HiD,GAAI,GA9HzB,GACpC,EAAM,CADmB,CA8H4B,GA9HxB,IAAI,EACC,GAClC,EAAe,CADQ,CACG,GAAc,AADb,IACmB,AADf,IACqB,IAC1D,MAAO,CAAC,EAAE,EAAE,EAAG,CAAC,EAAE,EAAG,GAAG,EAAE,EAAM,CAAC,CAAC,CAAC,EAAE,EAAM,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAa,GAAG,EAAE,EAAI,CAAC,CAAC,CAAC,EAAE,EAAI,CAAC,CAAC,EAAE,CAAC,AACtG,YA0H2E,EAAE,KAAK,CAAE,EAAE,GAAG,EAAG,KAAM,EAAE,KAAK,CAAE,OAAO,UAAU,YAAY,OAA7F,SAKvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yCACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,6BACT,EAAO,GAAG,CAAC,CAAC,EAAG,KACZ,IAAM,EAAQ,EAAoB,EAAE,MAAM,CAAC,UAAU,GAAK,EAAkB,EAAE,MAAM,CAAC,IAAI,EACzF,MACI,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAa,UAAU,oCACpB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,MAAO,CAAE,MAAO,GAAI,OAAQ,GAAI,WAAY,CAAM,EAAG,UAAU,4BACrE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,kBAAU,EAAE,MAAM,CAAC,IAAI,GACvC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,iCAAyB,EAAE,KAAK,KAH3C,EAMjB,KAEJ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uCAA6B,gBAAc,YAMlF,CAEe,SAAS,IAEpB,GAAM,IAAE,CAAE,CAAE,CAAG,AADA,CAAA,EAAA,EAAA,SAAA,AAAS,KACC,CAAC,EAEpB,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAiB,MACjD,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAuF,YAG3H,EAAoB,MAAO,IAC7B,GAAI,CACA,IAAM,EAAM,MAAM,MAAM,CAAC,kBAAkB,EAAE,EAAA,CAAI,CAAE,CAC/C,QAAS,EAAc,CAAE,cAAe,CAAC,OAAO,EAAE,EAAA,CAAc,AAAD,OAAK,CACxE,GACA,GAAI,CAAC,EAAI,EAAE,CAAE,MAAM,AAAI,MAAM,mBAC7B,IAAM,EAAO,MAAM,EAAI,IAAI,GAC3B,EAAW,MAAM,OAAO,CAAC,GAAQ,CAAI,CAAC,EAAE,CAAG,EAC/C,CAAE,MAAO,EAAK,CAEV,EAAW,CACP,GAAI,OAAO,GAAM,GACjB,UAAW,UACX,KAAM,eACN,SAAU,UACV,UAAW,aACX,SAAU,aACV,OAAQ,CAAE,KAAM,WAAY,kBAAmB,gCAAiC,EAChF,QAAS,8CACT,SAAU,IACV,OAAQ,EACR,cAAe,GACf,kBAAmB,CACf,CAAE,WAAY,IAAK,KAAM,cAAe,YAAa,YAAa,WAAY,aAAc,EAC5F,CAAE,WAAY,IAAK,KAAM,aAAc,YAAa,WAAY,WAAY,QAAS,EACxF,CACD,gBAAiB,GACjB,uBAAwB,IACxB,UAAW,QACX,UAAW,IAAI,OAAO,WAAW,GACjC,QAAQ,EACR,UAAU,CACd,EACJ,QAAU,CACN,GAAW,EACf,CACJ,EAOA,GALA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAEN,EADc,aAAa,GACT,IADgB,CAAC,gBAAkB,GAEzD,EAAG,CAAC,EAAG,EAEH,EAAS,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,2BAAkB,uBACnD,GAAI,CAAC,EAAS,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wCAA+B,sBAEjE,IAAM,EAAa,EAAQ,sBAAsB,CAAG,KAAK,KAAK,CAAC,EAAQ,sBAAsB,CAAG,IAAM,EAEtG,MACI,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mCACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBAEX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gBACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,gDAAwC,EAAQ,IAAI,KAqCtE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wEACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oDACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,QAAQ,aAAa,UAAU,0BAChC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,2BAA2B,KAAK,OAAO,OAAO,UAAU,YAAY,KAAK,cAAc,UAC/F,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,2BAA2B,KAAK,OAAO,OAAO,UAAU,YAAY,KAAK,cAAc,UAC/F,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,EAAE,KAAK,EAAE,KAAK,SAAS,IAAI,WAAW,SAAS,KAAK,oBAAW,EAAQ,eAAe,CAAC,YAIrG,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,eACrC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uBAAe,IAAI,KAAK,EAAQ,SAAS,EAAE,kBAAkB,QAG9E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,aACrC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uBAAe,EAAQ,UAAU,CAAG,cAAiB,EAAQ,QAAQ,CAAG,IAAI,KAAK,EAAQ,QAAQ,EAAE,kBAAkB,GAAK,cAI/I,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kDACV,EAAQ,OAAO,CAAG,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAG,EAAQ,OAAO,GAAQ,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,gCAK/F,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mFACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+FACV,EAAQ,MAAM,EAAE,kBAEb,CAAA,CADA,CACA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAK,EAAQ,MAAM,CAAC,iBAAiB,CAAE,IAAI,GADK,MACI,UAAU,+BAEnE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,4BAG5B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,WACrC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uBAAe,EAAQ,MAAM,EAAE,MAAQ,CAAC,WAAW,EAAE,EAAQ,MAAM,EAAE,MAAQ,GAAA,CAAI,GAC9F,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,8BAMjD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yEACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,oCAA2B,oBACzC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAe,UAAW,EAAQ,EAAE,MAGzC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBAMX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2DACX,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,iBACrC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sDAA6C,EAAW,uBAqBnF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yEACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gBACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+BAAsB,yBAExC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iDACV,EAAQ,iBAAiB,EAAI,EAAQ,iBAAiB,CAAC,MAAM,CAC1D,EAAQ,iBAAiB,CAAC,GAAG,CAAC,GAC1B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAyB,UAAU,2DAChC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+FACV,EAAI,UAAU,CAEX,CAAA,CADA,CACA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAK,EAAI,UAAU,CAAE,IAAK,EAAI,IAAI,CAAE,UAAU,AADE,+BAGrD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,4BAG5B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,+BAAuB,EAAI,IAAI,GAC5C,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,kCAAyB,EAAI,WAAW,CAAG,EAAI,WAAW,CAAG,KAAO,GAAI,EAAI,UAAU,SAXjG,EAAI,UAAU,GAgB5B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,0CAAiC,+BAK1D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2DACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,oCAA2B,oBACzC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4CACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,eAAa,EAAQ,OAAO,IACjC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,eAAa,IAAI,KAAK,EAAQ,SAAS,EAAI,IAAI,kBAAkB,MACrE,EAAQ,MAAM,EAAI,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,cAAY,IAAI,KAAK,EAAQ,QAAQ,EAAI,IAAI,kBAAkB,MACtF,EAAQ,QAAQ,EAAI,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,gBAAc,IAAI,KAAK,EAAQ,UAAU,EAAI,IAAI,kBAAkB,kBAO5G,GAAW,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gBAAO,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAW,UAAW,EAAQ,EAAE,KAGnE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uDACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAoB,UAAW,EAAQ,EAAE,GAC1C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAmB,YAAY,yCAAyC,UAAW,EAAQ,EAAE,UAQlH,CK3fA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAYA,IAAM,EAAW,yCAEF,SAAS,EAAiB,WACvC,CAAS,WACT,CAAS,CAIV,EACC,AATgD,IAS1C,EAAe,CAAA,EAAA,EAAA,MAAA,AAAM,EAA0B,MAE/C,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,EAAE,EAC9C,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACjC,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAyB,MAC3D,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAA0B,CAAC,GAC/D,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAKlD,CAAA,EAAA,EAAA,SAAS,AAAT,EAAU,KACR,GAAI,CAAC,EAAW,OAEhB,IAAI,GAAU,EA8Bd,OA7BA,GAAW,GACX,EAAS,MAET,MAAM,CAAA,EAAG,EAAS,gBAAgB,EAAE,EAAA,CAAW,CAAE,CAChD,QAAS,CACF,cAAe,CAAC,OAAO,EAAE,aAAa,OAAO,CAAC,eAAA,CAChD,AADgE,CAEtE,GACG,IAAI,CAAC,AAAC,GAAQ,EAAI,IAAI,IACtB,IAAI,CAAC,AAAC,IACA,GAcL,EAZ8B,CAAC,GAFjB,GAcL,AAZ4B,OAAO,CAAC,GAAQ,EAAO,EAAA,AAAE,EAAE,GAAG,CACjE,AAAC,IAAW,AAAC,CACX,GAAI,EAAE,EAAE,CACR,SAAU,EAAE,QAAQ,CACpB,IAAK,EAAE,GAAG,CACV,SAAU,EAAE,QAAQ,CACpB,KAAM,EAAE,IAAI,CACZ,WAAY,EAAE,UAAU,CACxB,UAAW,EAAE,SAAS,CACxB,CAAC,EAIL,GACC,KAAK,CAAC,IAAM,EAAS,yBACrB,OAAO,CAAC,IAAM,GAAW,GAAW,IAEhC,KACL,GAAU,CACZ,CACF,EAAG,CAAC,EAAW,EAAU,EAKzB,IAAM,EAAmB,MACvB,IAEA,IAAM,EAAO,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,CAChC,GAAI,CAAC,EAAM,OAEX,IAAM,EAAU,CAAC,MAAM,EAAE,KAAK,GAAG,GAAA,CAAI,CAC/B,EAAa,EAAK,IAAI,CAAC,UAAU,CAAC,UACpC,IAAI,eAAe,CAAC,GACpB,KAGJ,EAAS,AAAC,GAAS,CACjB,CACE,GAAI,EACJ,SAAU,EAAK,IAAI,CACnB,IAAK,EACL,SAAU,EAAK,IAAI,AACrB,KACG,EACJ,EAED,EAAa,AAAC,IAAM,AAAC,CAAE,GAAG,CAAC,CAAE,CAAC,EAAQ,EAAE,EAAK,CAAC,EAC9C,EAAS,MAET,GAAI,CACF,IAAM,EAAW,IAAI,SACrB,EAAS,MAAM,CAAC,OAAQ,GAExB,IAAM,EAAM,MAAM,MAChB,CAAA,EAAG,EAAS,gBAAgB,EAAE,EAAA,CAAW,CACzC,CACE,OAAQ,OACR,KAAM,EACP,QAAS,CACN,cAAe,CAAC,OAAO,EAAE,aAAa,OAAO,CAAC,eAAA,CAAgB,AAChE,CACF,GAGF,GAAI,CAAC,EAAI,EAAE,CAAE,MAAM,AAAI,MAAM,iBAE7B,IAAM,EAAO,MAAM,EAAI,IAAI,GAG3B,EAAS,AAAC,GACR,EAAK,GAAG,CAAC,AAAC,GACR,EAAE,EAAE,GAAK,EACL,CACE,GAAI,EAAK,EAAE,CACX,SAAU,EAAK,QAAQ,CACvB,IAAK,EAAK,GAAG,CACb,SAAU,EAAK,QAAQ,CACvB,KAAM,EAAK,IAAI,CACf,WAAY,EAAK,UAAU,CAC3B,UAAW,EAAK,SAAS,AAC3B,EACA,GAGV,CAAE,MAAO,EAAK,CACZ,EAAS,AAAC,GAAS,EAAK,MAAM,CAAC,AAAC,GAAM,EAAE,EAAE,GAAK,IAC/C,EAAS,gBACX,QAAU,CACR,EAAa,AAAC,IACZ,IAAM,EAAI,CAAE,GAAG,CAAC,AAAC,EAEjB,OADA,OAAO,CAAC,CAAC,EAAQ,CACV,CACT,GACI,EAAa,OAAO,EAAE,GAAa,OAAO,CAAC,KAAK,CAAG,EAAA,CACzD,CACF,EAoBM,EAAW,CACf,EACA,EACA,KAEA,GAAI,CAAC,EAAK,OACV,IAAM,EAAI,SAAS,aAAa,CAAC,KACjC,EAAE,IAAI,CAAG,EACT,EAAE,MAAM,CAAG,SACP,IAAU,EAAE,QAAQ,CAAG,GAAQ,MAAA,EACnC,SAAS,IAAI,CAAC,WAAW,CAAC,GAC1B,EAAE,KAAK,GACP,EAAE,MAAM,EACV,EAKA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2CACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,sCAA6B,gBAG3C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CACC,QAAS,IAAM,EAAa,OAAO,EAAE,QACrC,UAAU,iHAEV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,MAAM,6BACN,MAAM,KACN,OAAO,KACP,KAAK,UACL,QAAQ,YACR,UAAU,wBAEV,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,gOAEV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+BAAsB,qBAEvC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,IAAK,EACL,KAAK,OACL,UAAU,SACV,SAAU,OAIb,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,aAE3C,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,qCAA6B,IAI5C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uCACZ,EAAM,GAAG,CAAC,AAAC,GACV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2FACZ,EAAE,GAAG,EAAI,EAAE,QAAQ,EAAE,WAAW,UAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAK,CAAA,CACJ,IAAK,EAAE,GAAG,CACV,IAAK,EAAE,QAAQ,EAAI,OACnB,IAAI,CAAA,CAAA,EACJ,UAAU,eACV,WAAW,CAAA,CAAA,IAGb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,iCAAwB,WAI5C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IACP,EAAY,IAAa,EAAE,EAAE,CAAG,KAAO,EAAE,EAAE,EAE7C,UAAU,6DAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,cAAc,CAAA,CAAC,KAAM,OAGvB,IAAa,EAAE,EAAE,EAChB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2EACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,UAAU,sDACV,QAAS,IACP,EAAS,EAAE,GAAG,EAAE,EAAM,EAAE,QAAQ,OAAI,YAEvC,aAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,UAAU,sDACV,QAAS,IAAM,EAAS,EAAE,GAAG,WAC9B,eAaP,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iCACZ,EAAE,QAAQ,EAAI,WACd,CAAS,CAAC,OAAO,EAAE,EAAE,EAAE,EACtB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,kCACb,IAAI,yBAxDL,OAAO,EAAE,EAAE,QAmE/B,CCjSA,IAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAwBe,SAAS,EAAkB,WACxC,CAAS,CACT,WAAS,CAIV,EACC,GAAM,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAoB,EAAE,EAClD,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAC5C,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAGxD,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC3C,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACrC,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,IACzC,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACvC,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAG/B,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC7C,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAyB,MAG3D,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC7C,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAC9C,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACrC,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACzC,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACvC,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,GAAS,GAEnC,EAAa,CACjB,cAAe,CAAC,OAAO,EACrB,GAAa,aAAa,OAAO,CAAC,gBAAkB,GAAA,CACpD,AACJ,EAsJA,MAnJA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACH,GAgCL,CA9BkB,OAFF,GAGd,GAAW,GACX,EAAS,MACT,GAAI,CACF,IAAM,EAAM,MAAM,MAChB,GAAG,UAAS,UAAU,4BAAE,SAAiB,CAAP,AAClC,CAAE,KADsC,GAC7B,CAAW,GAExB,GAAI,CAAC,EAAI,EAAE,CAAE,MAAM,AAAI,MAAM,wBAE7B,IAAM,EAAO,MAAM,EAAI,IAAI,GAC3B,EACE,MAAM,OAAO,CAAC,GACV,EAAK,GAAG,CAAC,AAAC,IAAW,AAAC,CACpB,GAAI,EAAE,EAAE,CACR,MAAO,EAAE,KAAK,EAAI,WAClB,QAAS,EAAE,OAAO,EAAI,MACtB,SAAU,CAAC,CAAC,EAAE,QAAQ,CACtB,UAAW,EAAE,SAAS,CACtB,UAAW,EAAE,SAAS,CACxB,CAAC,EACD,EAAE,CAEV,CAAE,MAAO,EAAQ,CACf,EAAS,EAAE,OAAO,CACpB,QAAU,CACR,GAAW,EACb,EACF,GAGF,EAAG,CAAC,EAAU,EAkHZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kCAIf,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gBACZ,GAAW,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAE,aACd,GAAS,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wBAAgB,IAEvC,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,qCACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,uBACZ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+BAAsB,eACpC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAY,cAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+BAAsB,gBAGxC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACE,EAAM,GAAG,CAAC,AAAC,GACV,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAiB,UAAU,qBAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAa,EAAK,KAAK,GACrC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBACZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACZ,EAAK,QAAQ,CAAG,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,KAAM,KAAS,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,KAAM,KAClD,EAAK,QAAQ,CAAG,SAAW,eAGhC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,2CACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACM,UAAU,+BACV,QAAS,KACP,EAAY,GACZ,GAAiB,GACjB,EAAe,KACjB,WAEA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,GAAG,CAAA,CAAC,KAAM,OAGhB,IAAgB,EAAK,EAAE,EACtB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wEArBZ,EAAK,EAAE,WAsDvB,GAAiB,GAChB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,CAAa,QAAS,IAAM,GAAiB,aAC5C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,MAAO,EAAS,KAAK,CACrB,QAAS,IAAM,GAAiB,KAElC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,eACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4CACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qCAA4B,yBAI1C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2CACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,eAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBAAc,EAAS,KAAK,GAE3C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,cAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBACZ,EAAS,QAAQ,CAAG,SAAW,YAGlC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,gBAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0CACZ,EAAS,OAAO,EAAI,qBAevC,CAIA,SAAS,EAAa,UAAE,CAAQ,SAAE,CAAO,CAAO,EAC9C,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+BAA+B,QAAS,IACvD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yEACZ,MAIT,CAEA,SAAS,EAAY,OAAE,CAAK,SAAE,CAAO,CAAO,EAC1C,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,uBAAe,IAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAAS,WACf,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAC,CAAA,CAAC,KAAM,SAIjB,CCvRe,SAAS,EAAgB,WACtC,CAAS,CAGV,EACC,GAAM,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAiB,EAAE,EACzD,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IA8CvC,MA5CA,CAAA,EAAA,EAAA,SAAS,AAAT,EAAU,KACH,GAwCL,CAtCa,OAFG,GAGd,GAAI,CACF,GAAW,GAIT,aAAa,OAAO,CAAC,UACrB,aAAa,OAAO,CAAC,aAGvB,GAFE,CAEI,EAAM,MAAM,MAChB,GAAG,UAAS,UAAU,4BAAE,UAAU,EAAU,CAC5C,CACE,KAFyC,CAElC,WAMN,QAAS,CACV,cAAe,CAAC,OAAO,EAAE,aAAa,OAAO,CAAC,eAAA,CAAgB,AAChE,CACA,GAII,EAAO,MAAM,EAAI,IAAI,GACrB,EAAO,EAAO,KAAK,KAAK,CAAC,GAAQ,EAAE,CAEzC,EAAc,MAAM,OAAO,CAAC,GAAQ,EAAO,EAAE,CAC/C,CAAE,MAAO,EAAG,CACV,QAAQ,KAAK,CAAC,0BAA2B,GACzC,EAAc,EAAE,CAClB,QAAU,CACR,GAAW,EACb,EACF,GAGF,EAAG,CAAC,EAAU,EAGZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,oCAA2B,aAEzC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACZ,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yCAAgC,sBAKhD,CAAC,GAAW,AAAsB,MAAX,MAAM,EAC5B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yCAAgC,sBAKhD,CAAC,GACA,EAAW,GAAG,CAAC,AAAC,IACd,GAAM,KAAE,CAAG,OAAE,CAAK,MAAE,CAAI,CAAE,CAAG,AA3HzC,SAAS,AAAgB,CAAe,EACtC,IAAM,EAAI,IAAI,KAAK,GACnB,MAAO,CACL,IAAK,EAAE,kBAAkB,CAAC,QAAS,CAAE,IAAK,SAAU,GACpD,MAAO,EAAE,kBAAkB,CAAC,QAAS,CAAE,MAAO,OAAQ,GACtD,KAAM,EAAE,kBAAkB,CAAC,QAAS,CAClC,KAAM,UACN,OAAQ,SACV,EACF,CACF,EAiHyD,EAAK,SAAS,EAE3D,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,UAAU,oDAGV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+DACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+CACZ,IAEH,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sCACZ,OAKL,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCACZ,AAnIrB,SAAS,AAAc,CAAc,EACnC,OAAQ,GACN,IAAK,wBACH,MAAO,mCACT,KAAK,eACH,MAAO,gCACT,KAAK,uBACH,MAAO,gCACT,KAAK,uBACH,MAAO,uBACT,KAAK,eACH,MAAO,mBACT,KAAK,eACH,MAAO,eACT,KAAK,eACH,MAAO,eACT,KAAK,sBACH,MAAO,sBACT,KAAK,qBACH,MAAO,0BACT,KAAK,kBACH,MAAO,6BACT,KAAK,kBACH,MAAO,mBACT,KAAK,kBACH,MAAO,mBACT,KAAK,mCACH,MAAO,mCACT,KAAK,0BACH,MAAO,0BACT,KAAK,6BACH,MAAO,6BACT,KAAK,kBACH,MAAO,kBACT,SACE,OAAO,EAAO,UAAU,CAAC,IAAK,KAAK,WAAW,EAClD,CACF,EA8FmC,EAAK,MAAM,IAE5B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sCACZ,SAnBA,EAAK,EAAE,CAwBlB,QAIV,CC1KA,IAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,OCCA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAaA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAGA,IAAM,EAAW,yCA6BF,SAAS,EAAqB,WAC3C,CAAS,QACT,CAAM,MA/B0C,GAgChD,CAAO,CAKR,EAEC,GAAM,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAA0B,MACxD,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,EAAE,EACpD,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,IAC7B,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAc,MAExC,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAqB,MAC7D,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAEzC,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MACtD,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAE9D,EAAY,CAAA,EAAA,EAAA,MAAA,AAAM,EAAwB,MAG1C,EAAiB,CAAA,EAAA,EAAA,MAAA,AAAM,EAAgB,MASvC,EAAa,AAAC,IAClB,IAAM,EAAI,IAAI,KAAK,GACnB,MAAO,CAAA,EAAG,EAAE,kBAAkB,CAAC,SAAS,GAAG,EAAE,EAAE,kBAAkB,CAAC,QAAS,CACzE,KAAM,UACN,OAAQ,SACV,GAAA,CAAI,AACN,EAeM,EAAuB,UAC3B,IAAM,EAAM,MAAM,MAChB,CAAA,EAAG,EAAS,cAAc,EAAE,EAAU,kBAAkB,EAAE,EAAA,CAAQ,CAClE,CACE,QAAS,CACP,cAAe,CAAC,OAAO,EAAE,aAAa,OAAO,CAAC,eAAA,CAAgB,AAChE,CACF,GAEF,EAAU,MAAM,EAAI,IAAI,GAC1B,EAEM,EAAe,UACnB,IAAM,EAAM,MAAM,MAChB,CAAA,EAAG,EAAS,+BAA+B,EAAE,EAAO,SAAS,CAAC,CAC9D,CACE,QAAS,CACP,cAAe,CAAC,OAAO,EAAE,aAAa,OAAO,CAAC,eAAA,CAAgB,AAChE,CACF,GAGI,EAAsB,MAAM,EAAI,IAAI,GAE1C,EAAK,IAAI,CACP,CAAC,EAAG,IACF,IAAI,KAAK,EAAE,SAAS,EAAE,OAAO,GAC7B,IAAI,KAAK,EAAE,SAAS,EAAE,OAAO,IAGjC,EAAY,EACd,EAGA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,IACA,GACF,EAAG,CAAC,EAAO,EAEX,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,EAAU,OAAO,EAAE,eAAe,CAAE,SAAU,QAAS,EACzD,EAAG,CAAC,EAAS,EAGb,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,IAAM,EAAS,IAAI,EAAA,OAAM,CAAC,CAAA,EAAG,EAAS,cAAc,CAAC,EAG/C,EAAS,IAAI,EAAA,MAAM,CAAC,CACxB,iBAAkB,IAAM,EACxB,MAAO,KAAO,EACd,eAAgB,CACd,cAAe,CAAC,OAAO,EAAE,aAAa,OAAO,CAAC,eAAA,CAChD,AADgE,EAEhE,UAAW,KACT,EAAO,SAAS,CACd,CAAC,wBAAwB,EAAE,EAAA,CAAQ,CACnC,AAAC,IACC,IAAM,EAAuB,KAAK,KAAK,CAAC,EAAQ,IAAI,EAEpD,EAAY,AAAC,GACI,AACf,EADoB,EAChB,EADoB,CAAC,AAAC,GAAM,EAAE,AACtB,EADwB,GAAK,EAAQ,EAAE,EAChC,EACZ,IAAI,EAAM,EAAQ,CAE7B,EAEJ,CACF,GAKA,OAHA,EAAO,QAAQ,GACf,EAAe,OAAO,CAAG,EAElB,KACL,EAAO,UAAU,EACnB,CACF,EAAG,CAAC,EAAO,EAMX,IAAM,EAAY,UAChB,GAAI,CAAC,GAAS,CAAC,EAAM,OAErB,IAAM,EAAK,IAAI,SACX,GAAO,EAAG,MAAM,CAAC,UAAW,GAC5B,GAAM,EAAG,MAAM,CAAC,OAAQ,GAC5B,EAAG,MAAM,CAAC,kBAAmB,IAE7B,MAAM,MACJ,CAAA,EAAG,EAAS,+BAA+B,EAAE,EAAO,SAAS,CAAC,CAC9D,CACE,OAAQ,OACR,QAAS,CACP,cAAe,CAAC,OAAO,EAAE,aAAa,OAAO,CAAC,eAAA,CAAgB,AAChE,EACA,KAAM,CACR,GAGF,EAAS,IACT,EAAQ,MACR,GACF,EAQM,EAAgB,UACf,IAEL,MAAM,GAFY,GAGhB,CAAA,EAAG,EAAS,+BAA+B,EAAE,EAAO,UAAU,EAAE,EAAY,EAAE,CAAA,CAAE,CAChF,CACE,OAAQ,MACR,QAAS,CACP,cAAe,CAAC,OAAO,EAAE,aAAa,OAAO,CAAC,eAAA,CAAgB,CAC9D,eAAgB,YAClB,EACA,KAAM,CACR,GAGF,EAAe,MACf,EAAe,IACjB,EAGM,EAAgB,MAAO,IAC3B,EAAc,MACd,MAAM,MACJ,CAAA,EAAG,EAAS,+BAA+B,EAAE,EAAO,UAAU,EAAE,EAAA,CAAI,CACpE,CACE,OAAQ,SACR,QAAS,CACP,cAAe,CAAC,OAAO,EAAE,aAAa,OAAO,CAAC,eAAA,CAAgB,AAChE,CACF,EAEJ,SA8BA,AAAK,EAKH,CAAA,CALE,CAKF,EAAA,CALW,GAKX,EAAC,MAAA,CAAI,UAAU,sDAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iEACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+BAAsB,eACpC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAC,CAAA,CAAC,UAAU,iBAAiB,QAAS,OAIzC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+BACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+BAAuB,EAAO,KAAK,GACjD,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,kCAAwB,gBACrB,EAAW,EAAO,SAAS,QAK7C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uDACZ,EAAS,GAAG,CAAC,CAAC,EAAG,KAChB,MAAM,EAAmB,AAAU,MAC7B,EACJ,EAAE,MAAM,EAAE,aA9Nd,EA8N6B,GAE3B,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAe,UAAU,iCACxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAK,EAAE,MAAM,EAAE,YAAc,cAC7B,UAAU,yBAGZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uBAAe,EAAE,MAAM,EAAE,OACrC,EAAE,WAAW,EACZ,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,kFAAyE,kBAM1E,SAAlB,EAAE,WAAW,EACZ,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCACV,EAAE,OAAO,GAIK,SAAlB,EAAE,WAAW,EAAe,EAAE,OAAO,EACpC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+EACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACZ,CAjPR,EAiPgB,EAAE,QAAQ,CAjPD,GAAM,WAAW,WAkPjC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAK,EAAE,OAAO,CACd,UAAU,mCAGZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,KAAM,KAElB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,mBAAW,EAAE,QAAQ,MAGvC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CACX,KAAM,GACN,UAAU,iBACV,QAAS,IACP,EACE,IAAmB,EAAE,EAAE,CAAG,KAAO,EAAE,EAAE,IAK1C,IAAmB,EAAE,EAAE,EACtB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6EACb,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAS,KACP,OAAO,IAAI,CAAC,EAAE,OAAO,CAAG,UACxB,EAAkB,KACpB,EACA,UAAU,+EAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,GAAG,CAAA,CAAC,KAAM,KAAM,UAInB,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAS,KACP,CAnRT,CAAC,EAAqB,KACzC,GAAI,CAAC,EAAK,OACV,IAAM,EAAI,SAAS,aAAa,CAAC,KACjC,EAAE,IAAI,CAAG,EACT,EAAE,QAAQ,CAAG,GAAQ,GACrB,SAAS,IAAI,CAAC,WAAW,CAAC,GAC1B,EAAE,KAAK,GACP,SAAS,IAAI,CAAC,WAAW,CAAC,EAC5B,GA2Q2C,EAAE,OAAO,CAAE,EAAE,QAAQ,EAClC,EAAkB,KACpB,EACA,UAAU,+EAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,KAAM,KAAM,0BAWpC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mEACZ,EAAW,EAAE,SAAS,EAEtB,GAAoB,GACnB,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAS,KACP,EAAe,GACf,EAAe,EAAE,OAAO,EAAI,GAC9B,EACA,UAAU,6DAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,KAAM,KAAM,UAKtB,CAAC,GACA,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CACX,KAAM,GACN,UAAU,iBACV,QAAS,IACP,EACE,IAAe,EAAE,EAAE,CAAG,KAAO,EAAE,EAAE,IAKtC,IAAe,EAAE,EAAE,EAClB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4EACZ,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAS,KACP,EAAe,GACf,EAAe,EAAE,OAAO,EAAI,IAC5B,EAAc,KAChB,EACA,UAAU,+EAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,KAAM,KAAM,UAevB,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAc,EAAE,EAAE,EACjC,UAAU,4FAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAM,KAAM,yBAzI1B,EAAE,EAAE,CAoJlB,GACA,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAK,OAIZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+BAEH,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,YAEd,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CACC,MAAO,EACP,SAAU,AAAC,GAAM,EAAS,EAAE,MAAM,CAAC,KAAK,EACxC,UAAU,sDAGnB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,eACG,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,2GACf,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAA,GACP,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,wBACb,EAAO,EAAK,IAAI,CAAG,kBAEtB,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,MAAM,CAAA,CAAA,EACN,SAAU,AAAC,GAAM,EAAQ,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,EAAI,WAIpD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4BACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,UAAU,oDACX,eAOJ,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2EACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,uBAAc,iBAC5B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAC,CAAA,CACA,UAAU,iBACV,QAAS,IAAM,EAAe,WAIlC,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CACC,MAAO,EACP,SAAU,AAAC,GAAM,EAAe,EAAE,MAAM,CAAC,KAAK,EAC9C,UAAU,4CAGZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAe,MAC9B,UAAU,oCACX,WAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,UAAU,oDACX,oBAlPO,IA2PtB,CDngBA,IAAM,EAAW,yCA4BF,SAAS,EAAkB,WACxC,CAAS,CAGV,EAEC,GAAM,CAAC,EAAY,EAAc,CAAG,CAAA,EAlCY,AAkCZ,EAAA,QAAA,AAAQ,EAAuB,EAAE,EAC/D,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAmB,EAAE,EAC7D,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAEjC,CAAC,EAAmB,EAAqB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACrD,CAAC,EAAqB,EAAuB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,GAAS,GACzD,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAEtD,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CAC/C,aAAc,GACd,UAAW,EACb,GAEM,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CACnD,WAAY,GACZ,MAAO,GACP,eAAgB,GAChB,KAAM,IACR,GAeM,EAAiB,UACrB,GAAI,CACF,IAAM,EAAM,MAAM,MAChB,CAAA,EAAG,EAAS,mCAAmC,CAAC,CAChD,CACE,QAAS,CACP,cAAe,CAAC,OAAO,EAAE,aAAa,OAAO,CAAC,eAAA,CAAgB,AAChE,CACF,GAEI,EAAO,MAAM,EAAI,IAAI,GAC3B,EAAc,MAAM,OAAO,CAAC,GAAQ,EAAO,EAAE,CAC/C,CAAE,KAAM,CACN,EAAc,EAAE,CAClB,CACF,EAGM,EAAkB,UACtB,GAAI,CACF,GAAW,GACX,IAAM,EAAM,MAAM,MAChB,CAAA,EAAG,EAAS,cAAc,EAAE,EAAU,iBAAiB,CAAC,CACxD,CACE,QAAS,CACP,cAAe,CAAC,OAAO,EAAE,aAAa,OAAO,CAAC,eAAA,CAAgB,AAChE,CACF,GAEI,EAAO,MAAM,EAAI,IAAI,GAC3B,EAAe,MAAM,OAAO,CAAC,GAAQ,EAAO,EAAE,CAChD,CAAE,KAAM,CACN,EAAe,EAAE,CACnB,QAAU,CACR,GAAW,EACb,CACF,EAEA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,IACA,GACF,EAAG,EAAE,EAGL,IAAM,EAAiB,UACrB,GAAI,CAAC,EAAa,YAAY,EAAI,CAAC,EAAa,SAAS,CAAE,OAE3D,IAAM,EAAM,MAAM,MAChB,CAAA,EAAG,EAAS,mCAAmC,CAAC,CAChD,CACE,OAAQ,OAOf,QAAS,CACE,cAAe,CAAC,OAAO,EAAE,aAAa,OAAO,CAAC,eAAA,CAAgB,AAChE,EAEF,KAAM,KAAK,SAAS,CAAC,EACvB,GAGI,EAAO,MAAM,EAAI,IAAI,GAC3B,EAAc,AAAC,GAAM,IAAI,EAAG,EAAK,EACjC,EAAgB,CAAE,aAAc,GAAI,UAAW,EAAG,GAClD,EAAqB,GACvB,EAeM,EAAmB,UACvB,GACE,CAAC,EAAe,UAAU,EAC1B,CAAC,EAAe,KAAK,EACrB,CAAC,EAAe,cAAc,CAE9B,OAEF,IAAM,EAAK,IAAI,SACf,EAAG,MAAM,CAAC,QAAS,EAAe,KAAK,EACvC,EAAG,MAAM,CAAC,aAAc,EAAe,UAAU,EACjD,EAAG,MAAM,CAAC,iBAAkB,EAAe,cAAc,EACrD,EAAe,IAAI,EAAE,EAAG,MAAM,CAAC,cAAe,EAAe,IAAI,EAErE,MAAM,MACJ,CAAA,EAAG,EAAS,cAAc,EAAE,EAAU,iBAAiB,CAAC,CACxD,CACE,OAAQ,OACR,QAAS,CACP,cAAe,CAAC,OAAO,EAAE,aAAa,OAAO,CAAC,eAAA,CAAgB,AAChE,EACA,KAAM,CACR,GAGF,EAAkB,CAChB,WAAY,GACZ,MAAO,GACP,eAAgB,GAChB,KAAM,IACR,GAEA,EAAuB,IACvB,GACF,EAeA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAEC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+BAAsB,eAEpC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAS,IAAM,GAAuB,GACtC,UAAU,uFAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,KAAM,KAAM,yBAevB,EAAY,GAAG,CAAC,AAAC,IAChB,IAAM,EACJ,EAAE,WAAW,EAAE,WAAa,EAAE,SAAS,EAAI,EAAE,SAAS,CAExD,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,QAAS,IAAM,EAAc,EAAE,EAAE,EACjC,UAAU,wFAEV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAK,EAAE,aAAa,EAAE,YAAc,cACpC,UAAU,2BAGZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uBAAe,EAAE,KAAK,GACnC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCACV,CA9LQ,AAAD,IACtB,GAAI,CAAC,EAAS,MAAO,GACrB,IAAM,EAAI,IAAI,KAAK,GACb,EAAO,EAAE,kBAAkB,CAAC,SAC5B,EAAO,EAAE,kBAAkB,CAAC,QAAS,CACzC,KAAM,UACN,OAAQ,SACV,GACA,MAAO,CAAC,WAAW,EAAE,EAAK,GAAG,EAAE,EAAA,CAAM,CACvC,EAqLiC,KAGlB,EAAE,WAAW,EAAE,cAAgB,QAC9B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAK,EAAE,WAAW,CAAC,OAAO,CAC1B,UAAU,sBAIb,EAAE,WAAW,EAAE,cAAgB,QAC9B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCACV,EAAE,WAAW,CAAC,OAAO,SAM9B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0DACb,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,oCACd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,KAAM,KACpB,EAAE,YAAY,EAAI,KAGrB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,oCACd,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CACC,UAAU,uBACV,MAAO,CAAE,WAAY,EAAE,QAAQ,CAAC,SAAS,AAAC,IAE3C,EAAE,QAAQ,CAAC,YAAY,SA1CvB,EAAE,EAAE,CAwDf,GAEwB,IAAvB,EAAY,MAAM,EACjB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2DAAkD,qCAMlE,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2EACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+BAAsB,mBACpC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAC,CAAA,CACA,UAAU,iBACV,QAAS,IAAM,GAAuB,QAI1C,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,MAAO,EAAe,UAAU,CAChC,SAAU,AAAC,GACT,EAAkB,CAChB,GAAG,CAAc,CACjB,WAAY,EAAE,MAAM,CAAC,KACvB,AAD4B,GAG9B,UAAU,yDAEV,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,YAAG,oBAChB,EAAW,GAAG,CAAC,AAAC,GACf,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAkB,MAAO,EAAE,EAAE,UAC3B,EAAE,YAAY,EADJ,EAAE,EAAE,MAMrB,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,YAAY,QACZ,MAAO,EAAe,KAAK,CAC3B,SAAU,AAAC,GACT,EAAkB,CAChB,GAAG,CAAc,CACjB,MAAO,EAAE,MAAM,CAAC,KAAK,AACvB,GAEF,UAAU,iDAGZ,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CACC,YAAY,QACZ,MAAO,EAAe,cAAc,CACpC,SAAU,AAAC,GACT,EAAkB,CAChB,GAAG,CAAc,CACjB,eAAgB,EAAE,MAAM,CAAC,KAC3B,AADgC,GAGlC,UAAU,+DAGZ,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,0HACf,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAA,GACP,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,wBAAe,kBAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,MAAM,CAAA,CAAA,EACN,SAAU,AAAC,GACT,EAAkB,CAChB,GAAG,CAAc,CACjB,KAAM,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,EAAI,IAC/B,QAKN,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,GAAuB,GACtC,UAAU,4CACX,WAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,UAAU,4DACX,iBASR,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2EACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,uBAAc,wBAC5B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAC,CAAA,CACA,UAAU,iBACV,QAAS,IAAM,GAAqB,QAIvC,EAAW,GAAG,CAAC,AAAC,GACf,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAEC,UAAU,mEAEV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CACC,UAAU,uBACV,MAAO,CAAE,WAAY,EAAE,SAAS,AAAC,IAElC,EAAE,YAAY,KARZ,EAAE,EAAE,GAkBb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,YAAY,gBACZ,MAAO,EAAa,YAAY,CAChC,SAAU,AAAC,GACT,EAAgB,CACd,GAAG,CAAY,CACf,aAAc,EAAE,MAAM,CAAC,KAAK,AAC9B,GAEF,UAAU,qCAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,YAAY,UACZ,MAAO,EAAa,SAAS,CAC7B,SAAU,AAAC,GACT,EAAgB,CACd,GAAG,CAAY,CACf,UAAW,EAAE,MAAM,CAAC,KAAK,AAC3B,GAEF,UAAU,wCAId,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,GAAqB,GACpC,UAAU,4CACX,WAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,UAAU,4DACX,iBASR,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,UAAW,EACX,OAAQ,EACR,QAAS,IAAM,EAAc,UAKvC,CTpdA,IAAM,EAAO,MAAA,mCAWE,IAX8B,KAWrB,IACtB,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAY,GAAQ,GAEpB,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAM,MACtC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAM,MACtC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,kBA+BnD,CA5BA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GAAI,CAAC,EAAW,OAEhB,IAAM,EAAQ,aAAa,OAAO,CAAC,gBAAkB,GAsBrD,CApBiB,UACf,GAAI,CACF,GAAM,CAAC,EAAM,EAAK,CAAG,MAAM,QAAQ,GAAG,CAAC,CACrC,EAAA,OAAK,CAAC,GAAG,CAAC,CAAA,EAAG,EAAK,UAAU,EAAE,EAAA,CAAW,CAAE,CACzC,QAAS,CAAE,cAAe,CAAC,OAAO,EAAE,EAAA,CAAO,AAAC,CAC9C,GACA,EAAA,OAAK,CAAC,GAAG,CAAC,CAAA,EAAG,EAAK,UAAU,EAAE,EAAU,QAAQ,CAAC,CAAE,CACjD,QAAS,CAAE,cAAe,CAAC,OAAO,EAAE,EAAA,CAAQ,AAAD,CAC7C,GACD,EAED,EAAW,MAAM,OAAO,CAAC,EAAK,IAAI,EAAI,EAAK,IAAI,CAAC,EAAE,CAAG,EAAK,IAAI,EAC9D,EAAW,EAAK,IAAI,CACtB,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,EAChB,QAAU,CACR,GAAW,EACb,EACF,GAGF,EAAG,CAAC,EAAU,EAEV,GACK,CAAA,EAAA,EAAA,CADI,EACJ,EAAC,MAAA,CAAI,UAAU,2BAAkB,uBAGrC,EAMH,CAAA,EAAA,EAAA,EANY,CAMZ,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCAGb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qDACX,EAAQ,IAAI,GAIf,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6CACZ,CACC,CAAE,IAAK,WAAY,MAAO,UAAW,EAGrC,CAAE,IAAK,QAAS,MAAO,OAAQ,EAC/B,CAAE,IAAK,QAAS,MAAO,OAAQ,EAC/B,CAAE,IAAK,WAAY,MAAO,UAAW,EACrC,CAAE,IAAK,aAAc,MAAO,YAAa,EAC1C,CAAC,GAAG,CAAC,AAAC,IACL,IAAM,EAAW,IAAc,EAAI,GAAG,CACtC,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAEC,QAAS,IAAM,EAAa,EAAI,GAAG,EACnC,UAAW,CAAC,kCAAkC,EAAE,EAAW,gBAAkB,gBAAA,CACzE,WAEH,EAAI,KAAK,CACT,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,iEAPb,EAAI,GAAG,CAWlB,OAKJ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wDACZ,AAAc,gBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAgB,QAAS,EAAS,QAAS,IAQ/B,UAAd,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAa,UAAW,EAAQ,EAAE,GAEtB,UAAd,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAa,UAAW,EAAQ,EAAE,GAEtB,aAAd,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAgB,UAAW,EAAQ,EAAE,GAEzB,eAAd,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAkB,UAAW,EAAQ,EAAE,WAhEzC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wCAA+B,qBAsEzD"}