{"version":3,"sources":["turbopack:///[project]/src/app/(employee)/employees/work/project/page.tsx","turbopack:///[project]/src/app/(employee)/employees/work/project/ProjectCalendarMonth.tsx"],"sourcesContent":["// app/(your-folder)/AllProjectsPage.tsx\n\"use client\";\n\nimport React, { useEffect, useState, useCallback, useRef, useMemo } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n  DropdownMenuSeparator,\n} from \"@/components/ui/dropdown-menu\";\n\nimport {\n  ChevronLeft,\n  ChevronRight,\n  Search,\n  MoreVertical,\n  Eye,\n  Edit2,\n  Pin,\n  Trash2,\n  Grid,\n  Calendar,\n  Filter,\n  List,\n  X,\n  Archive,\n} from \"lucide-react\";\nimport ProjectCalendarMonth from \"./ProjectCalendarMonth\";\n\nconst MAIN = process.env.NEXT_PUBLIC_MAIN ;\nconst projectsFromApi = `${MAIN}/api/projects`;\nconst STATUS_OPTIONS = [\n  \"IN_PROGRESS\",\n  \"NOT_STARTED\",\n  \"ON_HOLD\",\n  \"CANCELLED\",\n  \"FINISHED\",\n] as const;\ntype StatusOption = typeof STATUS_OPTIONS[number];\n\ntype Employee = {\n  employeeId: string;\n  name: string;\n  profileUrl?: string | null;\n  designation?: string;\n};\n\ninterface Project {\n  id: number;\n  shortCode?: string;\n  code?: string;\n  projectCode?: string;\n  name: string;\n  startDate?: string;\n  deadline?: string;\n  noDeadline?: boolean;\n  client?:\n  | { name?: string; profilePictureUrl?: string | null; company?: string | null; clientId?: string }\n  | null;\n  currency?: string;\n  budget?: number;\n  progressPercent?: number | null;\n  projectStatus?: StatusOption | null;\n  assignedEmployees?: Employee[];\n  pinned?: boolean;\n  archived?: boolean;\n  summary?: string;\n  category?: string | number | null;\n  department?: string | null;\n  needsApproval?: boolean;\n  calculateProgressThroughTasks?: boolean | null;\n  addedBy?: string | null;\n}\n\ninterface Category {\n  id: string | number;\n  name: string;\n}\n\ninterface ClientItem {\n  id: number;\n  clientId: string;\n  name: string;\n  // other fields omitted\n}\n\ninterface DepartmentItem {\n  id: number;\n  departmentName: string;\n  parentDepartmentId?: number | null;\n  parentDepartmentName?: string | null;\n  createAt?: string;\n}\n\nconst OVERRIDES_KEY = \"projectProgressOverrides\";\n\nexport default function AllProjectsPage() {\n  // STATES (kept from your file)\n  const [projects, setProjects] = useState<Project[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [token, setToken] = useState<string | null>(null);\n\n  // Filters & UI\n  const [searchInput, setSearchInput] = useState(\"\");\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\n  const [progressFilter, setProgressFilter] = useState<string>(\"all\");\n  const [durationFrom, setDurationFrom] = useState<string | null>(null);\n  const [durationTo, setDurationTo] = useState<string | null>(null);\n\n\n  // drawer filters\n  const [showFilters, setShowFilters] = useState(false);\n  const [filterProject, setFilterProject] = useState<string>(\"all\");\n  const [filterMember, setFilterMember] = useState<string>(\"all\");\n  const [filterClient, setFilterClient] = useState<string>(\"all\");\n\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const itemsPerPage = 9;\n\n  // Add project modal & form\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [shortCode, setShortCode] = useState(\"\");\n  const [projectName, setProjectName] = useState(\"\");\n  const [startDate, setStartDate] = useState(\"\");\n  const [deadline, setDeadline] = useState(\"\");\n  const [noDeadline, setNoDeadline] = useState(false);\n  const [category, setCategory] = useState(\"none\");\n  const [department, setDepartment] = useState(\"none\");\n  const [client, setClientField] = useState(\"none\");\n  const [summary, setSummary] = useState(\"\");\n  const [needsApproval, setNeedsApproval] = useState(true);\n  const [members, setMembers] = useState<string[] | string>(\"\");\n\n  // Company Details\n  const [file, setFile] = useState<File | null>(null);\n  const [currency, setCurrency] = useState(\"USD\");\n  const [budget, setBudget] = useState<string>(\"\");\n  const [hoursEstimate, setHoursEstimate] = useState<string>(\"\");\n  const [allowManualTimeLogs, setAllowManualTimeLogs] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement | null>(null);\n\n  // addedBy\n  const [addedBy, setAddedBy] = useState<string>(\"you\");\n\n  const [submitting, setSubmitting] = useState(false);\n\n  // Category modal\n  const [showCategoryModal, setShowCategoryModal] = useState(false);\n  const [categories, setCategories] = useState<Category[]>([]);\n  const [catLoading, setCatLoading] = useState(false);\n  const [newCategoryName, setNewCategoryName] = useState(\"\");\n  const [catSubmitting, setCatSubmitting] = useState(false);\n\n  // Clients & Departments\n  const [clients, setClients] = useState<ClientItem[]>([]);\n  const [clientLoading, setClientLoading] = useState(false);\n  const [departments, setDepartments] = useState<DepartmentItem[]>([]);\n  const [deptLoading, setDeptLoading] = useState(false);\n\n  // Update modal\n  const [showUpdateModal, setShowUpdateModal] = useState(false);\n  const [updateProjectId, setUpdateProjectId] = useState<number | null>(null);\n\n  // UI: view mode & quick filters\n  type ViewMode = \"grid\" | \"list\" | \"calendar\";\n  const [viewMode, setViewMode] = useState<ViewMode>(\"grid\");\n  const [showArchivedOnly, setShowArchivedOnly] = useState(false);\n  const [showPinnedOnly, setShowPinnedOnly] = useState(false);\n  const [calendarOpen, setCalendarOpen] = useState(false);\n\n  // LOCK BODY SCROLL WHEN DRAWER OR MODAL OPEN\n  useEffect(() => {\n    document.body.style.overflow = showFilters || showAddModal || showCategoryModal || showUpdateModal || calendarOpen ? \"hidden\" : \"auto\";\n  }, [showFilters, showAddModal, showCategoryModal, showUpdateModal, calendarOpen]);\n\n  // Build select options from fetched projects\n  const projectOptions = Array.from(new Set(projects.map((p) => p.name))).filter(Boolean);\n  const memberOptions = Array.from(\n    new Set(projects.flatMap((p) => (p.assignedEmployees || []).map((e) => e.name)))\n  ).filter(Boolean);\n\n  // categoryOptions derived (id as string)\n  const categoryOptions = categories.map((c) => ({ id: String(c.id), name: c.name }));\n\n  // clientOptions from clients state\n  const clientOptions = clients.map((c) => ({ id: String(c.id), name: c.name }));\n\n  // departmentOptions from departments state\n  const departmentOptions = departments.map((d) => ({ id: String(d.id), name: d.departmentName }));\n\n  // local overrides helpers\n  const readProgressOverrides = (): Record<string, number> => {\n    try {\n      const raw = localStorage.getItem(OVERRIDES_KEY);\n      if (!raw) return {};\n      return JSON.parse(raw) as Record<string, number>;\n    } catch {\n      return {};\n    }\n  };\n  const writeProgressOverrides = (map: Record<string, number>) => {\n    try {\n      localStorage.setItem(OVERRIDES_KEY, JSON.stringify(map));\n    } catch { }\n  };\n  const setProgressOverrideFor = (projectId: number, percent: number | null) => {\n    const map = readProgressOverrides();\n    const key = String(projectId);\n    if (percent == null) delete map[key];\n    else map[key] = percent;\n    writeProgressOverrides(map);\n  };\n\n  // fetch projects\n  const getProjects = useCallback(\n    async (accessToken?: string | null) => {\n      setLoading(true);\n      try {\n        const resolvedToken =\n          accessToken ||\n          (typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null) ||\n          token ||\n          null;\n\n        if (!resolvedToken) {\n          setProjects([]);\n          setTotalPages(1);\n          setLoading(false);\n          return;\n        }\n\n        const params = new URLSearchParams({\n          page: String(currentPage),\n          limit: String(itemsPerPage),\n          search: searchQuery || \"\",\n          status: statusFilter !== \"all\" ? statusFilter : \"\",\n          progress: progressFilter !== \"all\" ? progressFilter : \"\",\n          project: filterProject !== \"all\" ? filterProject : \"\",\n          member: filterMember !== \"all\" ? filterMember : \"\",\n          client: filterClient !== \"all\" ? filterClient : \"\",\n        });\n\n\n        const res = await fetch(`${MAIN}/projects?page=0&size=50`, {\n          headers: { Authorization: `Bearer ${resolvedToken}` },\n          cache: \"no-store\",\n        });\n\n        if (res.status === 401) {\n          try { localStorage.removeItem(\"accessToken\"); } catch { }\n          setToken(null);\n          setProjects([]);\n          setTotalPages(1);\n          setLoading(false);\n          return;\n        }\n\n        if (!res.ok) {\n          const text = await res.text().catch(() => \"\");\n          console.error(\"getProjects failed\", res.status, text);\n          throw new Error(\"Failed to load projects\");\n        }\n\n        const data = await res.json();\n        let fetched: Project[] = [];\n        if (Array.isArray(data)) fetched = data;\n        else {\n          fetched = data.projects || data.items || [];\n          setTotalPages(data.totalPages || Math.max(1, Math.ceil((data.total || itemsPerPage) / itemsPerPage)));\n        }\n\n        // apply local overrides\n        const overrides = readProgressOverrides();\n        if (Object.keys(overrides).length > 0) {\n          fetched = fetched.map((p) => {\n            const o = overrides[String(p.id)];\n            if (o != null) return { ...p, progressPercent: o };\n            return p;\n          });\n        }\n\n        setProjects(fetched);\n      } catch (err) {\n        console.error(\"Error loading projects:\", err);\n        setProjects([]);\n        setTotalPages(1);\n      } finally {\n        setLoading(false);\n      }\n    },\n    [currentPage, searchQuery, statusFilter, progressFilter, filterProject, filterMember, filterClient, token]\n\n  );\n\n  // CATEGORY helpers: load, add, delete\n  const loadCategories = useCallback(async (accessToken?: string | null) => {\n    setCatLoading(true);\n    try {\n      const resolvedToken = accessToken || token || (typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null);\n      const res = await fetch(`${MAIN}/api/projects/category`, {\n        headers: resolvedToken ? { Authorization: `Bearer ${resolvedToken}` } : undefined,\n        cache: \"no-store\",\n      });\n      if (!res.ok) {\n        console.warn(\"Failed to load categories, status:\", res.status);\n        setCategories([]);\n        setCatLoading(false);\n        return;\n      }\n      const data = await res.json();\n      if (Array.isArray(data)) {\n        if (data.length > 0 && typeof data[0] === \"string\") {\n          setCategories(data.map((n, i) => ({ id: i + 1, name: String(n) })));\n        } else {\n          setCategories(data.map((d: any) => ({ id: d.id ?? d.name ?? Math.random(), name: d.name ?? String(d) })));\n        }\n      } else {\n        setCategories([]);\n      }\n    } catch (err) {\n      console.error(\"Error loading categories:\", err);\n      setCategories([]);\n    } finally {\n      setCatLoading(false);\n    }\n  }, [token]);\n\n  const openCategoryModal = async () => {\n    setShowCategoryModal(true);\n    await loadCategories();\n  };\n\n  const closeCategoryModal = () => {\n    setShowCategoryModal(false);\n    setNewCategoryName(\"\");\n  };\n\n  const addCategory = async () => {\n    const name = newCategoryName.trim();\n    if (!name) return alert(\"Category name required\");\n    setCatSubmitting(true);\n    const prev = categories.slice();\n    const temp: Category = { id: `temp-${Date.now()}`, name };\n    setCategories((c) => [...c, temp]);\n    try {\n      const resolvedToken = token || (typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null);\n      const res = await fetch(`${MAIN}/api/projects/category`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...(resolvedToken ? { Authorization: `Bearer ${resolvedToken}` } : {}),\n        },\n        body: JSON.stringify({ name }),\n        cache: \"no-store\",\n      });\n      if (!res.ok) {\n        const text = await res.text().catch(() => \"\");\n        console.error(\"Add category failed\", res.status, text);\n        setCategories(prev);\n        alert(\"Failed to add category\");\n        return;\n      }\n      const created = await res.json().catch(() => null);\n      if (created && (created.id || created.name)) {\n        setCategories((cur) => cur.map((c) => (c.id === temp.id ? { id: created.id ?? created.name ?? Math.random(), name: created.name ?? name } : c)));\n        setCategory(String(created.id ?? created.name ?? name));\n      } else {\n        await loadCategories();\n        const found = categories.find((c) => c.name === name);\n        if (found) setCategory(String(found.id));\n      }\n      setNewCategoryName(\"\");\n    } catch (err) {\n      console.error(\"Add category error:\", err);\n      setCategories(prev);\n      alert(\"Failed to add category\");\n    } finally {\n      setCatSubmitting(false);\n    }\n  };\n\n  const deleteCategory = async (catId: string | number) => {\n    if (!confirm(\"Delete this category?\")) return;\n    const prev = categories.slice();\n    setCategories((c) => c.filter((x) => x.id !== catId));\n    try {\n      const resolvedToken = token || (typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null);\n      const res = await fetch(`${MAIN}/api/projects/category/${encodeURIComponent(String(catId))}`, {\n        method: \"DELETE\",\n        headers: resolvedToken ? { Authorization: `Bearer ${resolvedToken}` } : undefined,\n        cache: \"no-store\",\n      });\n      if (!res.ok) {\n        throw new Error(\"Delete failed\");\n      }\n    } catch (err) {\n      console.error(\"Delete category failed:\", err);\n      setCategories(prev);\n      alert(\"Failed to delete category\");\n    }\n  };\n\n  // CLIENTS loader\n  const loadClients = useCallback(async (accessToken?: string | null) => {\n    setClientLoading(true);\n    try {\n      const resolvedToken = accessToken || token || (typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null);\n      // endpoint as provided: {{main}}/clients\n      const res = await fetch(`${MAIN}/clients`, {\n        headers: resolvedToken ? { Authorization: `Bearer ${resolvedToken}` } : undefined,\n        cache: \"no-store\",\n      });\n      if (!res.ok) {\n        console.warn(\"Failed to load clients, status:\", res.status);\n        setClients([]);\n        setClientLoading(false);\n        return;\n      }\n      const data = await res.json();\n      if (Array.isArray(data)) {\n        // expecting array of client objects\n        setClients(data as ClientItem[]);\n      } else if (Array.isArray(data.items)) {\n        setClients(data.items as ClientItem[]);\n      } else {\n        setClients([]);\n      }\n    } catch (err) {\n      console.error(\"Error loading clients:\", err);\n      setClients([]);\n    } finally {\n      setClientLoading(false);\n    }\n  }, [token]);\n\n  // DEPARTMENTS loader\n  const loadDepartments = useCallback(async (accessToken?: string | null) => {\n    setDeptLoading(true);\n    try {\n      const resolvedToken = accessToken || token || (typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null);\n      // endpoint as provided: {{main}}/admin/departments\n      const res = await fetch(`${MAIN}/admin/departments`, {\n        headers: resolvedToken ? { Authorization: `Bearer ${resolvedToken}` } : undefined,\n        cache: \"no-store\",\n      });\n      if (!res.ok) {\n        console.warn(\"Failed to load departments, status:\", res.status);\n        setDepartments([]);\n        setDeptLoading(false);\n        return;\n      }\n      const data = await res.json();\n      if (Array.isArray(data)) {\n        setDepartments(data as DepartmentItem[]);\n      } else if (Array.isArray(data.items)) {\n        setDepartments(data.items as DepartmentItem[]);\n      } else {\n        setDepartments([]);\n      }\n    } catch (err) {\n      console.error(\"Error loading departments:\", err);\n      setDepartments([]);\n    } finally {\n      setDeptLoading(false);\n    }\n  }, [token]);\n\n  // Debounce search\n  useEffect(() => {\n    const t = setTimeout(() => {\n      setSearchQuery((prev) => {\n        if (prev !== searchInput) {\n          setCurrentPage(1);\n          return searchInput;\n        }\n        return prev;\n      });\n    }, 500);\n    return () => clearTimeout(t);\n  }, [searchInput]);\n\n  // initial token & load\n  useEffect(() => {\n    if (typeof window !== \"undefined\") {\n      const savedToken = localStorage.getItem(\"accessToken\");\n      setToken(savedToken);\n      // load selects regardless of projects auth (but use token if present)\n      loadCategories(savedToken || null);\n      loadClients(savedToken || null);\n      loadDepartments(savedToken || null);\n      if (savedToken) getProjects(savedToken);\n      else setLoading(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (!token && typeof window !== \"undefined\") {\n      const fromStorage = localStorage.getItem(\"accessToken\");\n      if (fromStorage) {\n        setToken(fromStorage);\n        getProjects(fromStorage);\n        // reload selects with token\n        loadCategories(fromStorage);\n        loadClients(fromStorage);\n        loadDepartments(fromStorage);\n        return;\n      }\n      return;\n    }\n    if (token) getProjects(token);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [getProjects, token, currentPage, searchQuery, statusFilter, progressFilter, filterProject, filterMember, filterClient]);\n\n  // UPDATES (status/progress/pin/delete/archive)\n  async function patchStatus(projectId: number, newStatus: StatusOption) {\n    if (!token) return alert(\"Not authenticated\");\n    const prev = projects;\n    setProjects((ps) => ps.map((pr) => (pr.id === projectId ? { ...pr, projectStatus: newStatus } : pr)));\n    try {\n      const fd = new FormData();\n      fd.append(\"status\", newStatus);\n      const res = await fetch(`${MAIN}/api/projects/${projectId}/status`, {\n        method: \"PUT\",\n        body: fd,\nheaders: {\n          Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n        },       \n      });\n      // if (!res.ok) throw new Error(`Status patch failed ${res.status}`);\n\n      let json: any = null;\n      try { json = await res.json(); } catch { json = null; }\n\n      if (json && json.id) {\n        setProjects((ps) => ps.map((pr) => (pr.id === json.id ? { ...pr, ...json } : pr)));\n        if (json.progressPercent != null) setProgressOverrideFor(json.id, null);\n      } else {\n        await getProjects(token);\n      }\n    } catch (err) {\n      console.error(\"Status update failed\", err);\n      setProjects(prev);\n      alert(\"Failed to update status on server\");\n    }\n  }\n\n  async function patchProgress(projectId: number, percent: number) {\n    if (!token) return alert(\"Not authenticated\");\n    const clamped = Math.max(0, Math.min(100, Math.round(percent)));\n    const prev = projects;\n    setProjects((ps) => ps.map((pr) => (pr.id === projectId ? { ...pr, progressPercent: clamped } : pr)));\n    setProgressOverrideFor(projectId, clamped);\n\n    try {\n      const fd = new FormData();\n      fd.append(\"percent\", String(clamped));\n      const res = await fetch(`${MAIN}/api/projects/${projectId}/progress`, {\n        method: \"PUT\",\n        body: fd,\n headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n        },        \n      });\n\n      if (res.status === 401) {\n        console.error(\"patchProgress 401 unauthorized\");\n        setProjects(prev);\n        setProgressOverrideFor(projectId, null);\n        localStorage.removeItem(\"accessToken\");\n        setToken(null);\n        alert(\"Session expired. Please login again.\");\n        return;\n      }\n\n      if (!res.ok) {\n        const text = await res.text().catch(() => \"\");\n        console.error(\"patchProgress failed:\", res.status, text);\n        setProjects(prev);\n        setProgressOverrideFor(projectId, null);\n        alert(\"Failed to update progress on server\");\n        return;\n      }\n\n      let json: any = null;\n      try {\n        if (res.status !== 204) json = await res.json();\n        else json = null;\n      } catch { json = null; }\n\n      if (json && json.id) {\n        setProjects((ps) => ps.map((pr) => (pr.id === json.id ? { ...pr, ...json } : pr)));\n        if (json.progressPercent != null) setProgressOverrideFor(json.id, null);\n      } else {\n        await getProjects(token);\n      }\n    } catch (err) {\n      console.error(\"Progress update failed:\", err);\n      setProjects(prev);\n      setProgressOverrideFor(projectId, null);\n      alert(\"Failed to update progress on server\");\n    }\n  }\n\n  const handlePin = async (projectId: number) => {\n    if (!token) return alert(\"Not authenticated\");\n    const prev = projects;\n    const idx = projects.findIndex((p) => p.id === projectId);\n    if (idx === -1) return;\n    const newPinned = !projects[idx].pinned;\n    setProjects((ps) => ps.map((pr) => (pr.id === projectId ? { ...pr, pinned: newPinned } : pr)));\n    try {\n      const res = await fetch(`${MAIN}/projects/${projectId}/pin`, {\n        method: \"POST\",\n        headers: { Authorization: `Bearer ${token}`, \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ pinned: newPinned }),\n        cache: \"no-store\",\n      });\n      if (!res.ok) throw new Error(\"Pin failed\");\n      try {\n        const json = await res.json();\n        if (json && json.id) setProjects((ps) => ps.map((pr) => (pr.id === json.id ? { ...pr, ...json } : pr)));\n        else await getProjects(token);\n      } catch {\n        await getProjects(token);\n      }\n    } catch (err) {\n      console.error(err);\n      setProjects(prev);\n      alert(\"Failed to toggle pin\");\n    }\n  };\n\n  const handleArchive = async (projectId: number) => {\n    if (!token) return alert(\"Not authenticated\");\n    const prev = projects;\n    const idx = projects.findIndex((p) => p.id === projectId);\n    if (idx === -1) return;\n    const newArchived = !projects[idx].archived;\n    setProjects((ps) => ps.map((pr) => (pr.id === projectId ? { ...pr, archived: newArchived } : pr)));\n    try {\n      const res = await fetch(`${MAIN}/projects/${projectId}/archive`, {\n        method: \"POST\",\n        headers: { Authorization: `Bearer ${token}`, \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ archived: newArchived }),\n        cache: \"no-store\",\n      });\n      if (!res.ok) throw new Error(\"Archive toggle failed\");\n      try {\n        const json = await res.json();\n        if (json && json.id) {\n          setProjects((ps) => ps.map((pr) => (pr.id === json.id ? { ...pr, ...json } : pr)));\n        } else {\n          await getProjects(token);\n        }\n      } catch {\n        await getProjects(token);\n      }\n    } catch (err) {\n      console.error(\"Archive toggle error:\", err);\n      setProjects(prev);\n      alert(\"Failed to toggle archive state on server\");\n    }\n  };\n\n  const handleDelete = async (projectId: number) => {\n    if (!confirm(\"Delete this project?\")) return;\n    const prev = projects;\n    setProjects((ps) => ps.filter((p) => p.id !== projectId));\n    try {\n      const res = await fetch(`${MAIN}/api/projects/${projectId}`, {\n        method: \"DELETE\",\n        headers: { Authorization: token ? `Bearer ${token}` : \"\" },\n        cache: \"no-store\",\n      });\n      if (!res.ok) throw new Error(\"Delete failed\");\n      setProgressOverrideFor(projectId, null);\n    } catch (err) {\n      console.error(err);\n      setProjects(prev);\n      alert(\"Failed to delete project\");\n    }\n  };\n\n  // ---------- Add Project form handlers ----------\n  const resetAddForm = () => {\n    setShortCode(\"\");\n    setProjectName(\"\");\n    setStartDate(\"\");\n    setDeadline(\"\");\n    setNoDeadline(false);\n    setCategory(\"none\");\n    setDepartment(\"none\");\n    setClientField(\"none\");\n    setSummary(\"\");\n    setNeedsApproval(true);\n    setMembers(\"\");\n    setFile(null);\n    setCurrency(\"USD\");\n    setBudget(\"\");\n    setHoursEstimate(\"\");\n    setAllowManualTimeLogs(false);\n    setAddedBy(\"you\");\n    setSubmitting(false);\n  };\n\n  const handleChooseFileClick = () => fileInputRef.current?.click();\n  const handleFileInputChange = (e: React.ChangeEvent<HTMLInputElement>) => setFile(e.target.files?.[0] ?? null);\n\n  // createProject: FIXED to always include deadline key & proper field mappings\n  const createProject = async () => {\n    if (!projectName.trim()) return alert(\"Project Name is required\");\n    setSubmitting(true);\n\n    try {\n      // ensure shortCode\n      let sc = shortCode.trim();\n      if (!sc) {\n        const slug = projectName\n          .toString()\n          .normalize(\"NFKD\")\n          .replace(/[\\u0300-\\u036F]/g, \"\")\n          .toLowerCase()\n          .trim()\n          .replace(/[^a-z0-9]+/g, \"-\")\n          .replace(/(^-|-$)+/g, \"\");\n        sc = (slug ? slug.toUpperCase().replace(/-/g, \"\").slice(0, 10) : `PRJ${Date.now().toString().slice(-6)}`);\n      }\n\n      const fd = new FormData();\n      fd.append(\"shortCode\", sc);\n      fd.append(\"name\", projectName);\n      // Some backends expect projectName key — add both for safety\n      fd.append(\"projectName\", projectName);\n\n      // Dates: always include keys (backend expects deadline param present)\n      fd.append(\"startDate\", startDate || \"\");\n      if (noDeadline) {\n        fd.append(\"deadline\", \"\");\n      } else {\n        fd.append(\"deadline\", deadline || \"\");\n      }\n      fd.append(\"noDeadline\", String(Boolean(noDeadline)));\n\n      // basic fields\n      fd.append(\"category\", category === \"none\" ? \"\" : String(category));\n      fd.append(\"department\", department === \"none\" ? \"\" : String(department));\n      fd.append(\"clientId\", client === \"none\" ? \"\" : String(client));\n\n      fd.append(\"summary\", summary || \"\");\n      fd.append(\"tasksNeedAdminApproval\", String(Boolean(needsApproval)));\n\n      const assignedArray = Array.isArray(members)\n        ? members\n        : String(members || \"\").split(\",\").map((s) => s.trim()).filter(Boolean);\n\n      // backend expects a Set<String> — send JSON array under 'assignedEmployeeIds'\n      fd.append(\"assignedEmployeeIds\", JSON.stringify(assignedArray));\n\n      if (file) fd.append(\"companyFile\", file);\n\n      fd.append(\"currency\", currency || \"\");\n      // budget may be optional — send \"0\" if empty to avoid parse issues\n      fd.append(\"budget\", budget !== \"\" ? String(budget) : \"0\");\n      fd.append(\"hoursEstimate\", hoursEstimate !== \"\" ? String(hoursEstimate) : \"0\");\n      fd.append(\"allowManualTimeLogs\", String(Boolean(allowManualTimeLogs)));\n\n      fd.append(\"addedBy\", String(addedBy || \"\"));\n\n      const resolvedToken = token || (typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null);\n\n      const res = await fetch(`${MAIN}/api/projects`, {\n        method: \"POST\",\n        body: fd,\n        headers: resolvedToken ? { Authorization: `Bearer ${resolvedToken}` } : undefined,\n      });\n\n      if (!res.ok) {\n        const text = await res.text().catch(() => \"\");\n        console.error(\"Create project failed\", res.status, text);\n        let message = `Failed to create project (status ${res.status})`;\n        try {\n          const json = JSON.parse(text || \"{}\");\n          if (json && json.message) message = json.message;\n        } catch { }\n        alert(message);\n        setSubmitting(false);\n        return;\n      }\n\n      try { await res.json(); } catch { }\n      await getProjects(resolvedToken);\n      setShowAddModal(false);\n      resetAddForm();\n    } catch (err) {\n      console.error(\"Create project error\", err);\n      alert(\"Failed to create project\");\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  // ---------- UPDATE (Edit) modal logic ----------\n  function UpdateProjectModal({\n    projectId,\n    onClose,\n    onSaved,\n  }: {\n    projectId: number | null;\n    onClose: () => void;\n    onSaved: () => void;\n  }) {\n    const [loadingLocal, setLoadingLocal] = useState(false);\n    const [saving, setSaving] = useState(false);\n\n    const [ucShortCode, setUcShortCode] = useState(\"\");\n    const [ucProjectName, setUcProjectName] = useState(\"\");\n    const [ucStartDate, setUcStartDate] = useState(\"\");\n    const [ucDeadline, setUcDeadline] = useState(\"\");\n    const [ucNoDeadline, setUcNoDeadline] = useState(false);\n    const [ucCategory, setUcCategory] = useState(\"none\");\n    const [ucDepartment, setUcDepartment] = useState(\"none\");\n    const [ucClient, setUcClient] = useState(\"none\");\n    const [ucSummary, setUcSummary] = useState(\"\");\n    const [ucNeedsApproval, setUcNeedsApproval] = useState(true);\n    const [ucMembers, setUcMembers] = useState<string | string[]>(\"\");\n\n    const [ucFile, setUcFile] = useState<File | null>(null);\n    const ucFileRef = useRef<HTMLInputElement | null>(null);\n    const [ucCurrency, setUcCurrency] = useState(\"USD\");\n    const [ucBudget, setUcBudget] = useState(\"\");\n    const [ucHours, setUcHours] = useState(\"\");\n    const [ucAllowManualTime, setUcAllowManualTime] = useState(false);\n\n    const [ucProjectStatus, setUcProjectStatus] = useState<StatusOption | \"none\">(\"none\");\n    const [ucProgress, setUcProgress] = useState<number>(0);\n    const [ucCalculateThroughTasks, setUcCalculateThroughTasks] = useState<boolean>(false);\n\n    const [ucAddedBy, setUcAddedBy] = useState<string>(\"you\");\n\n    const resetLocal = () => {\n      setUcShortCode(\"\");\n      setUcProjectName(\"\");\n      setUcStartDate(\"\");\n      setUcDeadline(\"\");\n      setUcNoDeadline(false);\n      setUcCategory(\"none\");\n      setUcDepartment(\"none\");\n      setUcClient(\"none\");\n      setUcSummary(\"\");\n      setUcNeedsApproval(true);\n      setUcMembers(\"\");\n      setUcFile(null);\n      setUcCurrency(\"USD\");\n      setUcBudget(\"\");\n      setUcHours(\"\");\n      setUcAllowManualTime(false);\n      setUcProjectStatus(\"none\");\n      setUcProgress(0);\n      setUcCalculateThroughTasks(false);\n      setUcAddedBy(\"you\");\n    };\n\n    useEffect(() => {\n      if (!projectId) return;\n      let mounted = true;\n      (async () => {\n        setLoadingLocal(true);\n        try {\n          const resolvedToken = token || (typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null);\n          const res = await fetch(`${MAIN}/api/projects/${projectId}`, {\n            headers: resolvedToken ? { Authorization: `Bearer ${resolvedToken}` } : undefined,\n            cache: \"no-store\",\n          });\n          if (!res.ok) {\n            const text = await res.text().catch(() => \"\");\n            console.error(\"Failed to fetch project\", res.status, text);\n            if (mounted) alert(\"Failed to load project details\");\n            return;\n          }\n          const data = await res.json();\n          if (!mounted) return;\n          setUcShortCode(data.shortCode ?? data.code ?? data.projectCode ?? \"\");\n          setUcProjectName(data.name ?? \"\");\n          setUcStartDate(data.startDate ? data.startDate.split(\"T\")[0] : (data.startDate ?? \"\"));\n          setUcDeadline(data.deadline ? (data.deadline.split(\"T\")[0]) : (data.deadline ?? \"\"));\n          setUcNoDeadline(Boolean(data.noDeadline));\n          setUcCategory(data.category ? String(data.category) : \"none\");\n          setUcDepartment(data.department ?? \"none\");\n          setUcClient(data.client?.clientId ? String(data.client.clientId) : (data.client?.name ?? data.client ?? \"none\"));\n          setUcSummary(data.summary ?? \"\");\n          setUcNeedsApproval(Boolean(data.tasksNeedAdminApproval ?? true));\n          setUcMembers(Array.isArray(data.assignedEmployees) ? data.assignedEmployees.map((e: any) => e.name).join(\",\") : (data.members ?? \"\"));\n          setUcCurrency(data.currency ?? \"USD\");\n          setUcBudget(data.budget != null ? String(data.budget) : \"\");\n          setUcHours(data.hoursEstimate != null ? String(data.hoursEstimate) : \"\");\n          setUcAllowManualTime(Boolean(data.allowManualTimeLogs ?? false));\n          setUcProjectStatus((data.projectStatus ?? \"none\") as StatusOption | \"none\");\n          setUcProgress(Number(data.progressPercent ?? 0));\n          setUcCalculateThroughTasks(Boolean(data.calculateProgressThroughTasks ?? false));\n          setUcAddedBy(data.addedBy ?? \"you\");\n        } catch (err) {\n          console.error(\"Error loading project:\", err);\n          if (mounted) alert(\"Failed to load project details\");\n        } finally {\n          if (mounted) setLoadingLocal(false);\n        }\n      })();\n      return () => { mounted = false; };\n    }, [projectId, token]);\n\n    const pickFile = () => ucFileRef.current?.click();\n    const onFileChange = (e: React.ChangeEvent<HTMLInputElement>) => setUcFile(e.target.files?.[0] ?? null);\n\n    const saveUpdate = async () => {\n      if (!projectId) return;\n      if (!ucProjectName.trim()) return alert(\"Project name required\");\n      setSaving(true);\n      try {\n        const fd = new FormData();\n        if (ucShortCode) fd.append(\"shortCode\", ucShortCode);\n        fd.append(\"name\", ucProjectName);\n        if (ucStartDate) fd.append(\"startDate\", ucStartDate);\n        // always append deadline key\n        if (ucNoDeadline) fd.append(\"deadline\", \"\");\n        else fd.append(\"deadline\", ucDeadline || \"\");\n        fd.append(\"noDeadline\", String(Boolean(ucNoDeadline)));\n        fd.append(\"category\", ucCategory === \"none\" ? \"\" : ucCategory);\n        fd.append(\"department\", ucDepartment === \"none\" ? \"\" : ucDepartment);\n        fd.append(\"clientId\", ucClient === \"none\" ? \"\" : ucClient);\n        fd.append(\"summary\", ucSummary || \"\");\n        fd.append(\"tasksNeedAdminApproval\", String(Boolean(ucNeedsApproval)));\n        const assignedArray = Array.isArray(ucMembers) ? ucMembers : String(ucMembers || \"\").split(\",\").map((s) => s.trim()).filter(Boolean);\n        fd.append(\"assignedEmployeeIds\", JSON.stringify(assignedArray));\n\n        if (ucFile) fd.append(\"companyFile\", ucFile);\n        fd.append(\"currency\", ucCurrency || \"\");\n        fd.append(\"budget\", ucBudget || \"0\");\n        fd.append(\"hoursEstimate\", ucHours || \"0\");\n        fd.append(\"allowManualTimeLogs\", String(Boolean(ucAllowManualTime)));\n\n        if (ucProjectStatus && ucProjectStatus !== \"none\") fd.append(\"projectStatus\", String(ucProjectStatus));\n        if (typeof ucProgress !== \"undefined\" && ucProgress !== null && !Number.isNaN(Number(ucProgress))) {\n          fd.append(\"progressPercent\", String(Math.max(0, Math.min(100, Math.round(ucProgress || 0)))));\n        }\n        fd.append(\"calculateProgressThroughTasks\", String(Boolean(ucCalculateThroughTasks)));\n\n        fd.append(\"addedBy\", String(ucAddedBy || \"\"));\n\n        const resolvedToken = token || (typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null);\n\n        const res = await fetch(`${MAIN}/api/projects/${projectId}`, {\n          method: \"PUT\",\n          body: fd,\n          headers: resolvedToken ? { Authorization: `Bearer ${resolvedToken}` } : undefined,\n        });\n\n        if (!res.ok) {\n          const text = await res.text().catch(() => \"\");\n          console.error(\"Update failed\", res.status, text);\n          alert(\"Failed to update project\");\n          return;\n        }\n\n        let json: any = null;\n        try { json = await res.json(); } catch { json = null; }\n\n        if (json && json.id) {\n          setProjects((ps) => ps.map((p) => (p.id === json.id ? { ...p, ...json } : p)));\n        } else {\n          await getProjects(resolvedToken);\n        }\n\n        onSaved();\n        onClose();\n        resetLocal();\n      } catch (err) {\n        console.error(\"Update error:\", err);\n        alert(\"Failed to update project\");\n      } finally {\n        setSaving(false);\n      }\n    };\n\n    const getProgressColor = (p?: number | null) => {\n      if (p === undefined || p === null) return \"bg-gray-300\";\n      if (p < 33) return \"bg-red-500\";\n      if (p < 66) return \"bg-yellow-400\";\n      return \"bg-green-500\";\n    };\n\n    return (\n      <div className=\"fixed inset-0 z-[12000] flex items-start justify-center pt-12 px-4 overflow-y-auto;\n\">\n        <div className=\"fixed inset-0 bg-black/40\" onClick={() => { onClose(); resetLocal(); }} />\n        <div className=\"relative w-full max-w-4xl bg-white rounded-xl shadow-2xl overflow-y-auto z-10\">\n          <div className=\"flex items-center justify-between p-4 border-b\">\n            <h3 className=\"text-lg font-semibold\">Update Project</h3>\n            <button onClick={() => { onClose(); resetLocal(); }} className=\"p-2 rounded hover:bg-gray-100\"><X className=\"w-5 h-5\" /></button>\n          </div>\n\n          <div className=\"p-6 space-y-6\">\n            {loadingLocal ? (\n              <p className=\"p-4 text-center\">Loading project...</p>\n            ) : (\n              <>\n                {/* Project Details */}\n                <div className=\"rounded-lg border p-4\">\n                  <h4 className=\"font-medium mb-3\">Project Details</h4>\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"text-sm text-gray-600\">Short Code *</label>\n                      <Input value={ucShortCode} onChange={(e) => setUcShortCode(e.target.value)} />\n                    </div>\n                    <div>\n                      <label className=\"text-sm text-gray-600\">Project Name  *</label>\n                      <Input value={ucProjectName} onChange={(e) => setUcProjectName(e.target.value)} />\n                    </div>\n\n                    <div>\n                      <label className=\"text-sm text-gray-600\">Start Date *</label>\n                      <Input type=\"date\" value={ucStartDate} onChange={(e) => setUcStartDate(e.target.value)} />\n                    </div>\n                    <div>\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"flex-1\">\n                          <label className=\"text-sm text-gray-600\">Deadline *</label>\n                          <Input type=\"date\" value={ucDeadline} onChange={(e) => setUcDeadline(e.target.value)} disabled={ucNoDeadline} />\n                        </div>\n                        <div className=\"pt-6\">\n                          <label className=\"inline-flex items-center gap-2 text-sm text-gray-600\">\n                            <input type=\"checkbox\" checked={ucNoDeadline} onChange={(e) => setUcNoDeadline(e.target.checked)} />\n                            <span className=\"text-xs\">There is no project deadline</span>\n                          </label>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div>\n                      <label className=\"text-sm text-gray-600\">Project Category *</label>\n                      <div className=\"flex gap-2\">\n                        <Select value={ucCategory} onValueChange={(v) => setUcCategory(v)}>\n                          <SelectTrigger className=\"w-full\"><SelectValue placeholder=\"--\" /></SelectTrigger>\n                          <SelectContent>\n                            <SelectItem value=\"none\">--</SelectItem>\n                            {categoryOptions.map((c) => <SelectItem key={c.id} value={c.id}>{c.name}</SelectItem>)}\n                          </SelectContent>\n                        </Select>\n                        <Button variant=\"outline\" onClick={openCategoryModal}>Add</Button>\n                      </div>\n                    </div>\n\n                    <div>\n                      <label className=\"text-sm text-gray-600\">Department *</label>\n                      <Select value={ucDepartment} onValueChange={(v) => setUcDepartment(v)}>\n                        <SelectTrigger className=\"w-full\"><SelectValue placeholder=\"--\" /></SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"none\">--</SelectItem>\n                          {departmentOptions.map((d) => <SelectItem key={d.id} value={d.id}>{d.name}</SelectItem>)}\n                        </SelectContent>\n                      </Select>\n                    </div>\n\n                    <div>\n                      <label className=\"text-sm text-gray-600\">Client *</label>\n                      <Select value={ucClient} onValueChange={(v) => setUcClient(v)}>\n                        <SelectTrigger className=\"w-full\"><SelectValue placeholder=\"--\" /></SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"none\">--</SelectItem>\n                          {clientOptions.map((c) => <SelectItem key={c.id} value={c.id}>{c.name}</SelectItem>)}\n                        </SelectContent>\n                      </Select>\n                    </div>\n\n                    <div className=\"col-span-2\">\n                      <label className=\"text-sm text-gray-600\">Project Summary</label>\n                      <textarea rows={4} value={ucSummary} onChange={(e) => setUcSummary(e.target.value)} className=\"w-full p-2 border rounded\" />\n                    </div>\n\n                    <div>\n                      <div className=\"text-sm text-gray-600 mb-1\">Tasks needs approval by Admin</div>\n                      <div className=\"flex items-center gap-4\">\n                        <label className=\"inline-flex items-center gap-2\">\n                          <input type=\"radio\" name=\"ucApproval\" checked={ucNeedsApproval === true} onChange={() => setUcNeedsApproval(true)} />\n                          <span className=\"text-sm\">Yes</span>\n                        </label>\n                        <label className=\"inline-flex items-center gap-2\">\n                          <input type=\"radio\" name=\"ucApproval\" checked={ucNeedsApproval === false} onChange={() => setUcNeedsApproval(false)} />\n                          <span className=\"text-sm\">No</span>\n                        </label>\n                      </div>\n                    </div>\n\n                    <div>\n                      <label className=\"text-sm text-gray-600\">Assigned to *</label>\n                      <Input placeholder=\"Comma separated names or ids\" value={Array.isArray(ucMembers) ? ucMembers.join(\",\") : ucMembers} onChange={(e) => setUcMembers(e.target.value)} />\n                    </div>\n\n                    {/* NEW: Project Status + Project Progress Status row (spans two columns) */}\n                    <div className=\"col-span-2\">\n                      <div className=\"flex items-center justify-between gap-4\">\n                        <div className=\"flex-1\">\n                          <label className=\"text-sm text-gray-600\">Project Status</label>\n                          <Select value={ucProjectStatus} onValueChange={(v) => setUcProjectStatus(v as StatusOption | \"none\")}>\n                            <SelectTrigger className=\"w-full\"><SelectValue placeholder=\"Select status\" /></SelectTrigger>\n                            <SelectContent>\n                              <SelectItem value=\"none\">--</SelectItem>\n                              <SelectItem value=\"IN_PROGRESS\">In Progress</SelectItem>\n                              <SelectItem value=\"NOT_STARTED\">Not Started</SelectItem>\n                              <SelectItem value=\"ON_HOLD\">On Hold</SelectItem>\n                              <SelectItem value=\"CANCELLED\">Cancelled</SelectItem>\n                              <SelectItem value=\"FINISHED\">Finished</SelectItem>\n                            </SelectContent>\n                          </Select>\n                        </div>\n\n                        <div className=\"w-1/2\">\n                          <label className=\"text-sm text-gray-600\">Project Progress Status</label>\n                          <div className=\"mt-2\">\n                            <div className=\"relative bg-gray-200 h-4 rounded-full overflow-hidden\">\n                              <div className={`h-4 rounded-full ${getProgressColor(ucProgress)}`} style={{ width: `${Math.max(0, Math.min(100, ucProgress))}%` }} />\n                              <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\n                                <span className=\"text-xs font-semibold text-white drop-shadow-sm\">{Math.round(ucProgress)}%</span>\n                              </div>\n                            </div>\n                            <div className=\"flex items-center gap-2 mt-2\">\n                              <input type=\"range\" min={0} max={100} value={ucProgress} onChange={(e) => setUcProgress(Number(e.target.value))} className=\"flex-1\" />\n                              <label className=\"inline-flex items-center gap-2 text-sm\">\n                                <input type=\"checkbox\" checked={ucCalculateThroughTasks} onChange={(e) => setUcCalculateThroughTasks(e.target.checked)} />\n                                <span className=\"text-xs\">Calculate Progress through tasks</span>\n                              </label>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n\n                  </div>\n                </div>\n\n                {/* Company Details (single) */}\n                <div className=\"rounded-lg border p-4\">\n                  <h4 className=\"font-medium mb-3\">Company Details</h4>\n\n                  <div className=\"mb-4\">\n                    <label className=\"text-sm text-gray-600 mb-2 block\">Add File</label>\n                    <div onClick={pickFile} className=\"border-2 border-dashed rounded-lg h-28 flex items-center justify-center cursor-pointer text-gray-500\">\n                      {ucFile ? <div>{ucFile.name}</div> : <div>Choose File</div>}\n                      <input ref={ucFileRef} type=\"file\" className=\"hidden\" onChange={onFileChange} />\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-3 gap-4\">\n                    <div>\n                      <label className=\"text-sm text-gray-600\">Currency</label>\n                      <Select value={ucCurrency} onValueChange={(v) => setUcCurrency(v)}>\n                        <SelectTrigger className=\"w-full\"><SelectValue placeholder=\"USD\" /></SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"USD\">USD $</SelectItem>\n                          <SelectItem value=\"USD\">USD ₹</SelectItem>\n                          <SelectItem value=\"EUR\">EUR €</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n\n                    <div>\n                      <label className=\"text-sm text-gray-600\">Project Budget</label>\n                      <Input value={ucBudget} onChange={(e) => setUcBudget(e.target.value)} />\n                    </div>\n\n                    <div>\n                      <label className=\"text-sm text-gray-600\">Hours Estimate (In Hours)</label>\n                      <Input value={ucHours} onChange={(e) => setUcHours(e.target.value)} />\n                    </div>\n                  </div>\n\n                  <div className=\"mt-3 flex items-center justify-between\">\n                    <div className=\"flex items-center gap-4\">\n                      <label className=\"inline-flex items-center gap-2\">\n                        <input type=\"checkbox\" checked={ucAllowManualTime} onChange={(e) => setUcAllowManualTime(e.target.checked)} />\n                        <span className=\"text-sm text-gray-600\">Allow manual time logs </span>\n                      </label>\n                    </div>\n\n                    {/* NEW: Added by select (right aligned) */}\n                    <div className=\"flex items-center gap-2\">\n                      <label className=\"text-sm text-gray-600 mr-2\">Added by*</label>\n                      <Select value={ucAddedBy} onValueChange={(v) => setUcAddedBy(v)}>\n                        <SelectTrigger className=\"w-44\"><SelectValue placeholder=\"You\" /></SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"you\">You</SelectItem>\n                          {memberOptions.map((m) => <SelectItem key={m} value={m}>{m}</SelectItem>)}\n                        </SelectContent>\n                      </Select>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Actions */}\n                <div className=\"flex items-center justify-end gap-3\">\n                  <Button variant=\"outline\" onClick={() => { onClose(); resetLocal(); }}>Cancel</Button>\n                  <Button className=\"bg-blue-600 text-white\" onClick={saveUpdate} disabled={saving}>\n                    {saving ? \"Updating...\" : \"Update\"}\n                  </Button>\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // ---------- Calendar view component (kept as you had) ----------\n  // ... (omitted here for brevity in this paste; use your CalendarView implementation from earlier)\n  // For brevity in this reply I kept the earlier CalendarView logic — if you want, I can paste the same CalendarView back in here unchanged.\n  // ---------- end CalendarView ----------\n\n  // ---------- UI helpers ----------\n  const getProgressColor = (p?: number | null) => {\n    if (p === undefined || p === null) return \"bg-gray-300\";\n    if (p < 33) return \"bg-red-500\";\n    if (p < 66) return \"bg-yellow-400\";\n    return \"bg-green-500\";\n  };\n\n  function badgeDotColor(status?: string | null) {\n    switch (status) {\n      case \"IN_PROGRESS\": return \"#10B981\";\n      case \"NOT_STARTED\": return \"#9CA3AF\";\n      case \"ON_HOLD\": return \"#F59E0B\";\n      case \"CANCELLED\": return \"#EF4444\";\n      case \"FINISHED\": return \"#3B82F6\";\n      default: return \"#9CA3AF\";\n    }\n  }\n\n  function statusBadgeClas(status?: string | null) {\n    switch (status) {\n      case \"IN_PROGRESS\": return \"bg-green-600 text-white\";\n      case \"NOT_STARTED\": return \"bg-gray-400 text-white\";\n      case \"ON_HOLD\": return \"bg-yellow-500 text-white\";\n      case \"CANCELLED\": return \"bg-red-600 text-white\";\n      case \"FINISHED\": return \"bg-blue-600 text-white\";\n      default: return \"bg-gray-400 text-white\";\n    }\n  }\n\n  const projectCodeFor = (p: Project) => p.shortCode || p.code || p.projectCode || `RTA-${String(p.id).padStart(2, \"0\")}`;\n\n  const openFilters = () => setShowFilters(true);\n  const closeFilters = () => setShowFilters(false);\n  const applyFilters = async () => { setCurrentPage(1); await getProjects(token ?? null); setShowFilters(false); };\n  const resetDrawerFilters = async () => { setFilterProject(\"all\"); setFilterMember(\"all\"); setFilterClient(\"all\"); setCurrentPage(1); await getProjects(token ?? null); setShowFilters(false); };\n\n  const setStatusAndApply = (status?: string | null) => { setStatusFilter(status ?? \"all\"); setCurrentPage(1); };\n  const setProgressBucketAndApply = (percent: number | null) => {\n    if (percent == null) setProgressFilter(\"all\");\n    else if (percent <= 33) setProgressFilter(\"0-33\");\n    else if (percent <= 66) setProgressFilter(\"34-66\");\n    else setProgressFilter(\"67-100\");\n    setCurrentPage(1);\n  };\n\n\n\n  const filteredProjects = useMemo(() => {\n    return projects.filter((p) => {\n      /* -------- STATUS -------- */\n      if (statusFilter !== \"all\") {\n        if (!p.projectStatus) return false;\n        if (p.projectStatus !== statusFilter) return false;\n      }\n\n      /* -------- PROGRESS -------- */\n      if (progressFilter !== \"all\") {\n        if (typeof p.progressPercent !== \"number\") return false;\n\n        const v = p.progressPercent;\n        if (progressFilter === \"0-33\" && !(v >= 0 && v <= 33)) return false;\n        if (progressFilter === \"34-66\" && !(v >= 34 && v <= 66)) return false;\n        if (progressFilter === \"67-100\" && !(v >= 67 && v <= 100)) return false;\n      }\n\n      /* -------- DURATION (CALENDAR) -------- */\n      if (durationFrom || durationTo) {\n        const start = p.startDate ? new Date(p.startDate) : null;\n        const end = p.deadline ? new Date(p.deadline) : null;\n\n        if (!start || !end) return false;\n\n        if (durationFrom) {\n          const from = new Date(durationFrom);\n          if (start < from) return false;\n        }\n\n        if (durationTo) {\n          const to = new Date(durationTo);\n          if (end > to) return false;\n        }\n      }\n\n      return true;\n    });\n  }, [\n    projects,\n    statusFilter,\n    progressFilter,\n    durationFrom,\n    durationTo,\n  ]);\n\n\n\n  if (loading) return <p className=\"p-8 text-center\">Loading projects...</p>;\n\n  // Row component reused (same as your file) — uses clientOptions/departments/categories data loaded above\n  const ProjectRow: React.FC<{ p: Project }> = ({ p }) => {\n    const start = p.startDate ? new Date(p.startDate).toLocaleDateString() : \"-\";\n    const dl = p.noDeadline ? \"No Deadline\" : p.deadline ? new Date(p.deadline).toLocaleDateString() : \"-\";\n    const progress = Math.max(0, Math.min(100, p.progressPercent ?? 0));\n    const barColor = getProgressColor(progress);\n\n    return (\n      <TableRow key={p.id} className=\"bg-white hover:bg-gray-50\">\n        <TableCell className=\"py-4 px-4 align-top w-28\"><div className=\"text-sm font-medium\">{projectCodeFor(p)}</div></TableCell>\n        <TableCell className=\"py-4 px-4 align-top\"><div className=\"font-medium\">{p.name}</div></TableCell>\n        <TableCell className=\"py-4 px-4 align-top\">\n          <div className=\"flex items-center\">\n            <div className=\"flex -space-x-2\">\n              {(p.assignedEmployees || []).slice(0, 3).map((emp) => (\n                <div key={emp.employeeId} className=\"w-8 h-8 rounded-full border-2 border-white overflow-hidden bg-gray-100\" title={emp.name}>\n                  {emp.profileUrl ? <img src={emp.profileUrl} alt={emp.name} className=\"w-full h-full object-cover\" /> : <div className=\"w-full h-full flex items-center justify-center text-xs text-white bg-gray-400\">{(emp.name || \"U\").charAt(0)}</div>}\n                </div>\n              ))}\n              {(p.assignedEmployees || []).length > 3 && (<div className=\"w-8 h-8 rounded-full border-2 border-white bg-gray-200 text-xs text-gray-700 flex items-center justify-center\">+{(p.assignedEmployees || []).length - 3}</div>)}\n            </div>\n          </div>\n        </TableCell>\n        <TableCell className=\"py-4 px-4 align-top text-sm\">{start}</TableCell>\n        <TableCell className=\"py-4 px-4 align-top text-sm\">{dl}</TableCell>\n        <TableCell className=\"py-4 px-4 align-top\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center\">\n              {p.client?.profilePictureUrl ? <img src={p.client.profilePictureUrl} alt={p.client?.name} className=\"w-full h-full object-cover\" /> : <div className=\"text-xs text-gray-500\">{(p.client?.name || \"C\").charAt(0)}</div>}\n            </div>\n            <div>\n              <div className=\"text-sm font-medium\">{p.client?.name ?? \"Client\"}</div>\n              <div className=\"text-xs text-gray-400\">{p.client?.company ?? \"\"}</div>\n            </div>\n          </div>\n        </TableCell>\n        <TableCell className=\"py-4 px-4 align-top\">\n          <div className=\"flex flex-col gap-2\">\n            <div className=\"w-44 cursor-pointer\" title=\"Click to filter by this progress bucket\" onClick={() => setProgressBucketAndApply(p.progressPercent ?? null)}>\n              <div className=\"relative bg-gray-200 h-4 rounded-full overflow-hidden\">\n                <div className={`h-4 rounded-full ${barColor}`} style={{ width: `${progress}%` }} />\n                <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\n                  <span className=\"text-xs font-semibold text-white drop-shadow-sm\">{progress}%</span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-3\">\n              <button className={`inline-flex items-center gap-2 px-2 py-1 rounded-full text-xs ${statusBadgeClas(p.projectStatus)}`} title=\"Click to filter by this status\" onClick={() => setStatusAndApply(p.projectStatus)}>\n                <span className=\"w-2 h-2 rounded-full\" style={{ background: badgeDotColor(p.projectStatus) }} />\n                <span>{p.projectStatus ?? \"N/A\"}</span>\n              </button>\n\n              <div className=\"relative\">\n                <DropdownMenu>\n                  <DropdownMenuTrigger asChild>\n                    <button className=\"inline-flex items-center gap-1 px-2 py-1 border rounded text-sm bg-white hover:bg-gray-50\"><span className=\"text-xs text-gray-500\">▾</span></button>\n                  </DropdownMenuTrigger>\n\n                  <DropdownMenuContent align=\"start\" className=\"w-64 p-2\">\n                    <div className=\"text-xs text-gray-500 mb-1\">Change status</div>\n                    <div className=\"space-y-1\">\n                      {STATUS_OPTIONS.map((s) => (\n                        <button key={s} onClick={() => patchStatus(p.id, s)} className={`w-full text-left px-3 py-2 rounded text-sm hover:bg-gray-50 ${s === p.projectStatus ? \"font-medium\" : \"\"}`}>{s}</button>\n                      ))}\n                    </div>\n\n                    <DropdownMenuSeparator />\n                    <div className=\"text-xs text-gray-500 mt-2 mb-1\">Adjust progress</div>\n                    <div>\n                      <input type=\"range\" min={0} max={100} value={p.progressPercent ?? 0}\n                        onChange={(e) => { const v = Number(e.target.value); setProjects((prev) => prev.map((pr) => (pr.id === p.id ? { ...pr, progressPercent: v } : pr))); }}\n                        onMouseUp={async (e) => { const v = Number((e.target as HTMLInputElement).value); await patchProgress(p.id, v); }}\n                        onTouchEnd={async (e) => { const v = Number((e.target as HTMLInputElement).value); await patchProgress(p.id, v); }}\n                        className=\"w-full\" />\n                      <div className=\"flex justify-between text-xs text-gray-500 mt-1\"><span>0%</span><span>{p.progressPercent ?? 0}%</span><span>100%</span></div>\n                    </div>\n\n                    <div className=\"flex justify-end mt-2\"><Button size=\"sm\" variant=\"ghost\" onClick={() => getProjects(token ?? null)}>Refresh</Button></div>\n                  </DropdownMenuContent>\n                </DropdownMenu>\n              </div>\n            </div>\n          </div>\n        </TableCell>\n\n        <TableCell className=\"py-4 px-4 align-top text-right\">\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button variant=\"ghost\" size=\"sm\" className=\"h-8 w-8 p-0\"><MoreVertical className=\"h-4 w-4\" /></Button>\n            </DropdownMenuTrigger>\n\n            <DropdownMenuContent align=\"end\" className=\"w-48\">\n              <DropdownMenuItem onClick={() => window.location.assign(`/employees/work/project/${p.id}`)}><Eye className=\"h-4 w-4 mr-2\" /> View</DropdownMenuItem>\n\n              {/* <DropdownMenuItem onClick={() => { setUpdateProjectId(p.id); setShowUpdateModal(true); }}>\n                <Edit2 className=\"h-4 w-4 mr-2\" /> Edit\n              </DropdownMenuItem> */}\n\n              <DropdownMenuItem onClick={() => handlePin(p.id)}><Pin className=\"h-4 w-4 mr-2\" /> {p.pinned ? \"Unpin\" : \"Pin\"} Project</DropdownMenuItem>\n\n              {/* <DropdownMenuItem onClick={() => handleArchive(p.id)}>\n                <Archive className=\"h-4 w-4 mr-2\" /> {p.archived ? \"Unarchive\" : \"Archive\"}\n              </DropdownMenuItem> */}\n\n              <DropdownMenuSeparator />\n\n              {/* <DropdownMenuItem onClick={() => handleDelete(p.id)} className=\"text-red-600\"><Trash2 className=\"h-4 w-4 mr-2\" /> Delete</DropdownMenuItem> */}\n            </DropdownMenuContent>\n          </DropdownMenu>\n        </TableCell>\n      </TableRow>\n    );\n  };\n\n  // ------------- Top-right action handlers -------------\n  const toggleView = (mode: ViewMode) => {\n    if (mode === \"calendar\") {\n      setCalendarOpen(!calendarOpen);\n      setViewMode(calendarOpen ? \"grid\" : \"calendar\");\n    } else {\n      setCalendarOpen(false);\n      setViewMode(mode);\n    }\n  };\n\n  const toggleArchivedOnly = () => {\n    setShowArchivedOnly((s) => !s);\n    // when viewing archived only, disable pinned-only to avoid confusion\n    if (!showArchivedOnly && showPinnedOnly) setShowPinnedOnly(false);\n  };\n\n  const togglePinnedOnly = () => {\n    setShowPinnedOnly((s) => !s);\n    // when enabling pinned-only, disable archived-only to avoid confusion unless user wants both\n    if (!showPinnedOnly && showArchivedOnly) setShowArchivedOnly(false);\n  };\n\n  // ---------- Render ----------\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <main className=\"w-full\">\n        <div className=\"max-w-[1200px] mx-auto p-6  overflow-y-auto overflow-x-hidden\">\n          {/* TOP FILTER BAR */}\n          <div className=\"bg-white rounded-lg border p-3 mb-4 flex items-center gap-4 overflow-y-auto overflow-x-hidden\">\n            {/* Duration Filter */}\n            <div className=\"flex items-center gap-3\">\n              <span className=\"text-sm text-gray-600\">Duration</span>\n\n              <Input\n                type=\"date\"\n                value={durationFrom ?? \"\"}\n                onChange={(e) => {\n                  setDurationFrom(e.target.value || null);\n                  setCurrentPage(1);\n                }}\n                className=\"w-40\"\n              />\n\n              <span className=\"text-gray-400 text-sm\">to</span>\n\n              <Input\n                type=\"date\"\n                value={durationTo ?? \"\"}\n                onChange={(e) => {\n                  setDurationTo(e.target.value || null);\n                  setCurrentPage(1);\n                }}\n                className=\"w-40\"\n              />\n            </div>\n\n\n            <div className=\"flex items-center gap-3\">\n              <span className=\"text-sm text-gray-600\">Status</span>\n              <Select value={statusFilter} onValueChange={(v) => { setStatusFilter(v); setCurrentPage(1); }}>\n                <SelectTrigger className=\"w-40\"><SelectValue placeholder=\"All\" /></SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All</SelectItem>\n                  <SelectItem value=\"IN_PROGRESS\">In Progress</SelectItem>\n                  <SelectItem value=\"NOT_STARTED\">Not Started</SelectItem>\n                  <SelectItem value=\"ON_HOLD\">On Hold</SelectItem>\n                  <SelectItem value=\"CANCELLED\">Cancelled</SelectItem>\n                  <SelectItem value=\"FINISHED\">Finished</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"flex items-center gap-3\">\n              <span className=\"text-sm text-gray-600\">Progress</span>\n              <Select value={progressFilter} onValueChange={(v) => { setProgressFilter(v); setCurrentPage(1); }}>\n                <SelectTrigger className=\"w-40\"><SelectValue placeholder=\"All\" /></SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All</SelectItem>\n                  <SelectItem value=\"0-33\">0 - 33%</SelectItem>\n                  <SelectItem value=\"34-66\">34 - 66%</SelectItem>\n                  <SelectItem value=\"67-100\">67 - 100%</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            {/* <div className=\"ml-auto flex items-center gap-4\">\n              <button onClick={openFilters} className=\"flex items-center gap-2 text-sm text-gray-600 hover:text-gray-800\"><Filter className=\"w-5 h-5\" /> Filters</button>\n            </div> */}\n          </div>\n\n          {/* ROW: Add Project + Search + Top-right icons */}\n          <div className=\"flex items-center justify-between mb-4\">\n\n            <div className=\"flex items-center gap-3\">\n              <div className=\"flex items-center gap-2 border rounded px-2 py-1 bg-white\">\n                <Search className=\"w-4 h-4 text-gray-400\" />\n                <Input placeholder=\"Search\" value={searchInput} onChange={(e) => setSearchInput(e.target.value)} onKeyDown={(e) => { if (e.key === \"Enter\") { setSearchQuery(searchInput); setCurrentPage(1); } }} className=\"border-0 bg-transparent focus-visible:ring-0\" />\n              </div>\n\n              <div className=\"flex items-center bg-white border rounded-lg overflow-hidden\">\n                {/* List */}\n                {/* <button\n                  onClick={() => toggleView(\"list\")}\n                  className={`px-3 py-2 hover:bg-gray-50 ${viewMode === \"list\" && !calendarOpen ? \"bg-gray-100\" : \"\"}`}\n                  title=\"List view\"\n                >\n                  <List className=\"w-4 h-4\" />\n                </button> */}\n\n                {/* Grid / Table (default) */}\n                <button\n                  onClick={() => toggleView(\"grid\")}\n                  className={`px-3 py-2 hover:bg-gray-50 ${viewMode === \"grid\" && !calendarOpen ? \"bg-violet-600 text-white\" : \"\"}`}\n                  title=\"Grid / Table view\"\n                >\n                  <List className=\"w-4 h-4\" />\n                </button>\n\n                {/* Archive toggle */}\n                {/* <button\n                  onClick={() => { toggleArchivedOnly(); }}\n                  className={`px-3 py-2 hover:bg-gray-50 ${showArchivedOnly ? \"bg-gray-100\" : \"\"}`}\n                  title={showArchivedOnly ? \"Showing archived projects\" : \"Show archived projects\"}\n                >\n                  <Archive className=\"w-4 h-4\" />\n                </button> */}\n\n                {/* Pin toggle */}\n                <button\n                  onClick={() => { togglePinnedOnly(); }}\n                  className={`px-3 py-2 hover:bg-gray-50 ${showPinnedOnly ? \"bg-gray-100\" : \"\"}`}\n                  title={showPinnedOnly ? \"Showing pinned only\" : \"Show pinned only\"}\n                >\n                  <Pin className=\"w-4 h-4\" />\n                </button>\n              </div>\n\n              {/* Calendar toggle (separate button to the right) */}\n              <button\n                onClick={() => toggleView(\"calendar\")}\n                className={`w-10 h-10 rounded bg-white border flex items-center justify-center ${calendarOpen ? \"ring-2 ring-indigo-300\" : \"\"}`}\n                title=\"Calendar view\"\n              >\n                <Calendar className=\"w-4 h-4 text-gray-600\" />\n              </button>\n            </div>\n          </div>\n\n          {/* MAIN content area */}\n          <div className=\"bg-white rounded-lg border overflow-hidden\">\n            <div className=\"bg-blue-50 px-6 py-3 border-b flex items-center justify-between\">\n              <h2 className=\"font-semibold text-gray-900\">Projects ({filteredProjects.length})</h2>\n              <div className=\"text-sm text-gray-600\">{showArchivedOnly ? \"Viewing: Archived\" : showPinnedOnly ? \"Viewing: Pinned\" : \"All active\"}</div>\n            </div>\n\n            <div className=\"overflow-auto p-4\">\n              {viewMode === \"calendar\" || calendarOpen ? (\n                // Using a simple calendar view component - you had a complex CalendarView earlier.\n                // If you want the rich CalendarView re-insert here (I kept it out of the pasted block for brevity).\n                // <div>\n\n                <ProjectCalendarMonth />\n\n\n\n                // {/* </div> */}\n              ) : viewMode === \"list\" ? (\n                // Compact list\n                <div>\n                  {filteredProjects.length === 0 ? (\n                    <div className=\"p-6 text-center text-gray-500\">No projects found</div>\n                  ) : (\n                    <div className=\"space-y-3\">\n                      {filteredProjects.map((p) => (\n                        <div key={p.id} className=\"flex items-center justify-between border rounded p-3 bg-white\">\n                          <div className=\"flex items-center gap-4\">\n                            <div className=\"text-sm font-medium w-28\">{projectCodeFor(p)}</div>\n                            <div className=\"font-medium\">{p.name}</div>\n                            <div className=\"text-xs text-gray-500\">{p.client?.name ?? \"Client\"}</div>\n                          </div>\n                          <div className=\"flex items-center gap-3\">\n                            <div className=\"text-sm\">{p.progressPercent ?? 0}%</div>\n                            <Button variant=\"ghost\" size=\"sm\" onClick={() => window.location.assign(`/employees/work/project/${p.id}`)}>View</Button>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              ) : (\n                // grid / table (default)\n                <div>\n                  <Table>\n                    <TableHeader>\n                      <TableRow className=\"bg-blue-50\">\n                        <TableHead className=\"px-4 py-3\">Code </TableHead>\n                        <TableHead className=\"px-4 py-3\">Project Name</TableHead>\n                        <TableHead className=\"px-4 py-3\">Members</TableHead>\n                        <TableHead className=\"px-4 py-3\">Start Date</TableHead>\n                        <TableHead className=\"px-4 py-3\">Deadline</TableHead>\n                        <TableHead className=\"px-4 py-3\">Client</TableHead>\n                        <TableHead className=\"px-4 py-3\">Status</TableHead>\n                        <TableHead className=\"px-4 py-3 text-right\">Action</TableHead>\n                      </TableRow>\n                    </TableHeader>\n\n                    <TableBody>\n                      {filteredProjects.length === 0 ? (\n                        <TableRow><TableCell colSpan={8} className=\"py-8 text-center text-gray-500\">No projects found</TableCell></TableRow>\n                      ) : (\n                        filteredProjects.map((p) => <ProjectRow key={p.id} p={p} />)\n                      )}\n                    </TableBody>\n                  </Table>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* PAGINATION */}\n          <div className=\"flex items-center justify-between mt-4\">\n            <div className=\"text-sm text-gray-600\">Result per page -{filteredProjects.length ? filteredProjects.length : 0}</div>\n            <div className=\"flex items-center gap-3\">\n              <Button variant=\"outline\" size=\"sm\" onClick={() => { setCurrentPage((c) => Math.max(1, c - 1)); }} disabled={currentPage === 1}><ChevronLeft /> Prev</Button>\n              <div className=\"text-sm text-gray-600\">Page {currentPage} of {totalPages}</div>\n              <Button variant=\"outline\" size=\"sm\" onClick={() => { setCurrentPage((c) => Math.min(totalPages, c + 1)); }} disabled={currentPage === totalPages}>Next <ChevronRight /></Button>\n            </div>\n          </div>\n        </div>\n      </main>\n\n      {/* DRAWER OVERLAY */}\n      <div aria-hidden={!showFilters} onClick={closeFilters} className={`fixed inset-0 transition-opacity duration-300 z-[9990] ${showFilters ? \"opacity-100 pointer-events-auto\" : \"opacity-0 pointer-events-none\"}`} style={{ backgroundColor: \"rgba(0,0,0,0.3)\" }} />\n\n      {/* DRAWER */}\n      <aside aria-hidden={!showFilters} className={`fixed right-0 top-0 h-full w-[360px] bg-white shadow-xl transform transition-transform duration-300 z-[9999] ${showFilters ? \"translate-x-0\" : \"translate-x-full\"}`} role=\"dialog\" aria-modal=\"true\">\n        <div className=\"flex items-center justify-between p-4 border-b\">\n          <div className=\"flex items-center gap-2\"><Filter className=\"w-5 h-5\" /><h3 className=\"font-semibold\">Filters</h3></div>\n          <button onClick={closeFilters} className=\"p-2 rounded hover:bg-gray-100\"><X className=\"w-4 h-4\" /></button>\n        </div>\n\n        <div className=\"p-4 space-y-4 overflow-auto h-[calc(100%-140px)]\">\n          <div>\n            <label className=\"block text-sm text-gray-600 mb-2\">Project</label>\n            <Select value={filterProject} onValueChange={(v) => setFilterProject(v)}>\n              <SelectTrigger className=\"w-full rounded border px-3 py-2\"><SelectValue placeholder=\"All\" /></SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">All</SelectItem>\n                {projectOptions.map((name) => <SelectItem key={name} value={name}>{name}</SelectItem>)}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm text-gray-600 mb-2\">Project Members</label>\n            <Select value={filterMember} onValueChange={(v) => setFilterMember(v)}>\n              <SelectTrigger className=\"w-full rounded border px-3 py-2\"><SelectValue placeholder=\"All\" /></SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">All</SelectItem>\n                {memberOptions.map((m) => <SelectItem key={m} value={m}>{m}</SelectItem>)}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm text-gray-600 mb-2\">Client</label>\n            <Select value={filterClient} onValueChange={(v) => setFilterClient(v)}>\n              <SelectTrigger className=\"w-full rounded border px-3 py-2\"><SelectValue placeholder=\"All\" /></SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">All</SelectItem>\n                {clientOptions.map((c) => <SelectItem key={c.id} value={c.id}>{c.name}</SelectItem>)}\n              </SelectContent>\n            </Select>\n          </div>\n        </div>\n\n        <div className=\"p-4 border-t flex items-center justify-between gap-2\">\n          <Button variant=\"outline\" onClick={resetDrawerFilters}>Reset</Button>\n          <div className=\"flex items-center gap-2\">\n            <Button variant=\"ghost\" onClick={closeFilters}>Close</Button>\n            <Button className=\"bg-blue-600 text-white\" onClick={applyFilters}>Apply</Button>\n          </div>\n        </div>\n      </aside>\n\n      {/* ADD PROJECT MODAL */}\n     \n\n      {/* CATEGORY MODAL */}\n     \n\n      {/* UPDATE MODAL */}\n     \n    </div>\n  );\n\n  // Helper to group projects by start date string\n  function groupByStartDate(items: Project[]) {\n    const map: Record<string, Project[]> = {};\n    items.forEach((p) => {\n      const d = p.startDate ? new Date(p.startDate).toLocaleDateString() : \"No start date\";\n      (map[d] ||= []).push(p);\n    });\n    return map;\n  }\n}\n","\n\"use client\";\n\nimport React, { useEffect, useMemo, useState } from \"react\";\n\n/* ================= BASE URL ================= */\nconst BASE_URL = `${process.env.NEXT_PUBLIC_MAIN}`;\n\n/* ================= TYPES ================= */\ntype Project = {\n  id: number;\n  name: string;\n  startDate: string;\n  deadline: string;\n};\n\n/* ================= HELPERS ================= */\nconst startOfMonth = (date: Date) =>\n  new Date(date.getFullYear(), date.getMonth(), 1);\n\nconst endOfMonth = (date: Date) =>\n  new Date(date.getFullYear(), date.getMonth() + 1, 0);\n\nconst addDays = (date: Date, days: number) => {\n  const d = new Date(date);\n  d.setDate(d.getDate() + days);\n  return d;\n};\n\nconst isSameDay = (a: Date, b: Date) =>\n  a.toDateString() === b.toDateString();\n\n/* ================= COMPONENT ================= */\nexport default function ProjectCalendarMonth() {\n  /* ================= STATE ================= */\n  const [projects, setProjects] = useState<Project[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [currentMonth, setCurrentMonth] = useState(new Date());\n\n  /* ================= API FUNCTION ================= */\n  const fetchProjects = async () => {\n    try {\n      setLoading(true);\n\n      const res = await fetch(`${BASE_URL}/projects`, {\n         headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n          },\n        credentials: \"include\",\n      });\n\n      if (!res.ok) throw new Error(\"Failed to fetch projects\");\n\n      const data = await res.json();\n\n      const mapped: Project[] = data.map((p: any) => ({\n        id: p.id,\n        name: p.name,\n        startDate: p.startDate,\n        deadline: p.deadline,\n      }));\n\n      setProjects(mapped);\n    } catch (err) {\n      console.error(\"Project fetch error:\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  /* ================= EFFECT ================= */\n  useEffect(() => {\n    fetchProjects();\n  }, []);\n\n  /* ================= CALENDAR DAYS ================= */\n  const calendarDays = useMemo(() => {\n    const start = startOfMonth(currentMonth);\n    const end = endOfMonth(currentMonth);\n\n    const days: Date[] = [];\n\n    const startDay = new Date(start);\n    startDay.setDate(start.getDate() - start.getDay());\n\n    const endDay = new Date(end);\n    endDay.setDate(end.getDate() + (6 - end.getDay()));\n\n    let day = startDay;\n    while (day <= endDay) {\n      days.push(new Date(day));\n      day = addDays(day, 1);\n    }\n\n    return days;\n  }, [currentMonth]);\n\n  /* ================= PROJECT MATCH ================= */\n  const getProjectsForDay = (day: Date) => {\n    return projects.filter((project) => {\n      const start = new Date(project.startDate);\n      const end = new Date(project.deadline);\n      return day >= start && day <= end;\n    });\n  };\n\n  /* ================= RENDER ================= */\n  return (\n    <div className=\"w-full bg-white rounded-xl shadow-sm border p-4 \">\n      {/* ===== Header ===== */}\n      <div className=\"flex items-center justify-between mb-4\">\n        <button\n          onClick={() =>\n            setCurrentMonth(\n              new Date(\n                currentMonth.getFullYear(),\n                currentMonth.getMonth() - 1,\n                1\n              )\n            )\n          }\n          className=\"px-3 py-1 border rounded\"\n        >\n          ◀\n        </button>\n\n        <h2 className=\"text-lg font-semibold\">\n          {currentMonth.toLocaleString(\"default\", {\n            month: \"long\",\n            year: \"numeric\",\n          })}\n        </h2>\n\n        <button\n          onClick={() =>\n            setCurrentMonth(\n              new Date(\n                currentMonth.getFullYear(),\n                currentMonth.getMonth() + 1,\n                1\n              )\n            )\n          }\n          className=\"px-3 py-1 border rounded\"\n        >\n          ▶\n        </button>\n      </div>\n\n      {loading && (\n        <div className=\"text-center py-6 text-sm text-gray-500\">\n          Loading projects...\n        </div>\n      )}\n\n      {/* ===== Week Days ===== */}\n      <div className=\"grid grid-cols-7 text-sm font-medium text-center border-b pb-2\">\n        {[\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"].map((d) => (\n          <div key={d}>{d}</div>\n        ))}\n      </div>\n\n      {/* ===== Calendar Grid ===== */}\n    <div className=\"mt-2 max-h-[70vh] overflow-y-auto overflow-x-hidden\">\n      <div className=\"grid grid-cols-7 gap-px bg-gray-200 mt-2\">\n        {calendarDays.map((day, index) => {\n          const dayProjects = getProjectsForDay(day);\n          const isCurrentMonth =\n            day.getMonth() === currentMonth.getMonth();\n\n          return (\n            <div\n              key={index}\n              className={`min-h-[110px] bg-white p-1 text-xs ${\n                !isCurrentMonth ? \"opacity-40\" : \"\"\n              }`}\n            >\n              <div className=\"text-right font-semibold\">\n                {day.getDate()}\n              </div>\n\n              <div className=\"space-y-1 mt-1\">\n                {dayProjects.map((project) => {\n                  const isStart = isSameDay(\n                    day,\n                    new Date(project.startDate)\n                  );\n                  const isEnd = isSameDay(\n                    day,\n                    new Date(project.deadline)\n                  );\n\n                  return (\n                    <div\n                      key={project.id}\n                      className={`px-2 py-1 rounded text-white text-[11px]\n                        ${\n                          isStart || isEnd\n                            ? \"bg-blue-600\"\n                            : \"bg-blue-400\"\n                        }`}\n                    >\n                      {isStart && <span>▶ </span>}\n                      {project.name}\n                      {isEnd && <span> ◀</span>}\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}