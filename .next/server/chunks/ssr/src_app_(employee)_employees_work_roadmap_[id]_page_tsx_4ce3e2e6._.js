module.exports=[822969,a=>{"use strict";a.s(["default",()=>u],822969);var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(886330),f=a.i(83490),g=a.i(782066),h=a.i(89329);function i({open:a,task:d,onClose:e,onMarkComplete:f}){let g,[i,j]=(0,c.useState)("files"),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(!1),o=(0,c.useRef)(null),p=(0,c.useRef)(null),[q,r]=(0,c.useState)(!1),s=(0,c.useRef)(null),t=(0,c.useRef)(null),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(!1),y=(0,c.useRef)(null),z=(0,c.useRef)(null),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)(""),[O,P]=(0,c.useState)(""),[Q,R]=(0,c.useState)(null),[S,T]=(0,c.useState)([{id:1,title:"My Note",type:"public",content:"This is the body of My Note."}]),[U,V]=(0,c.useState)(null),[W,X]=(0,c.useState)(null),[Y,Z]=(0,c.useState)(!1),[$,_]=(0,c.useState)(!1),[aa,ab]=(0,c.useState)(!1),[ac,ad]=(0,c.useState)(!1),[ae,af]=(0,c.useState)(""),[ag,ah]=(0,c.useState)("public"),[ai,aj]=(0,c.useState)(""),[ak,al]=(0,c.useState)(null),[am,an]=(0,c.useState)(""),[ao,ap]=(0,c.useState)("public"),[aq,ar]=(0,c.useState)(""),[as,at]=(0,c.useState)(!1),[au,av]=(0,c.useState)(""),[aw,ax]=(0,c.useState)(""),[ay,az]=(0,c.useState)(""),[aA,aB]=(0,c.useState)(null),[aC,aD]=(0,c.useState)(null),[aE,aF]=(0,c.useState)(!1),[aG,aH]=(0,c.useState)("Doing"),[aI,aJ]=(0,c.useState)(""),[aK,aL]=(0,c.useState)(""),[aM,aN]=(0,c.useState)(""),[aO,aP]=(0,c.useState)(""),[aQ,aR]=(0,c.useState)("Low"),[aS,aT]=(0,c.useState)(!1),[aU,aV]=(0,c.useState)(!1),[aW,aX]=(0,c.useState)(""),[aY,aZ]=(0,c.useState)(!1),[a$,a_]=(0,c.useState)(""),[a0,a1]=(0,c.useState)(null),[a2,a3]=(0,c.useState)(null),[a4]=(0,c.useState)([{id:1,employee:{employeeId:"u1",name:"Jack Smith",profileUrl:void 0,role:"Trainee"},startTime:"2025-08-02T11:00:00",endTime:"2025-08-02T13:00:00",memo:"---",minutesLogged:480},{id:2,employee:{employeeId:"u1",name:"Jack Smith",profileUrl:void 0,role:"Trainee"},startTime:"2025-08-02T11:00:00",endTime:"2025-08-02T13:00:00",memo:"---",minutesLogged:480},{id:3,employee:{employeeId:"u1",name:"Jack Smith",profileUrl:void 0,role:"Trainee"},startTime:"2025-08-02T11:00:00",endTime:"2025-08-02T13:00:00",memo:"---",minutesLogged:480},{id:4,employee:{employeeId:"u1",name:"Jack Smith",profileUrl:void 0,role:"Trainee"},startTime:"2025-08-02T11:00:00",endTime:"2025-08-02T13:00:00",memo:"---",minutesLogged:480}]);(0,c.useEffect)(()=>{a?l(!0):(l(!1),n(!1),r(!1),x(!1),B(!1),J(!1),L(!1),V(null),Z(!1),_(!1),ab(!1),X(null),ad(!1),at(!1))},[a]),(0,c.useEffect)(()=>{function a(a){if(m&&o.current&&!o.current.contains(a.target)&&p.current&&!p.current.contains(a.target)&&n(!1),w&&y.current&&!y.current.contains(a.target)&&z.current&&!z.current.contains(a.target)&&x(!1),q&&s.current&&!s.current.contains(a.target)&&r(!1),null!==U){let b=a.target.closest("[data-notes-menu]"),c=a.target.closest("[data-notes-menu-btn]");b||c||V(null)}}function b(a){"Escape"===a.key&&(n(!1),x(!1),r(!1),B(!1),J(!1),L(!1),V(null),Z(!1),_(!1),ab(!1),ad(!1),at(!1))}return document.addEventListener("mousedown",a),document.addEventListener("keydown",b),()=>{document.removeEventListener("mousedown",a),document.removeEventListener("keydown",b)}},[m,w,q,U,ac]);let a5=(0,c.useMemo)(()=>{switch((d?.priority||"").toLowerCase()){case"low":return"bg-green-500";case"medium":return"bg-yellow-400";case"high":return"bg-orange-500";case"urgent":return"bg-red-600";default:return"bg-gray-400"}},[d?.priority]);if(!a||!d)return null;let a6=a=>a?new Date(a).toLocaleDateString():"--",a7=a=>{if(!a)return"--";let b=new Date(a),c=String(b.getDate()).padStart(2,"0"),d=String(b.getMonth()+1).padStart(2,"0"),e=b.getFullYear();return`${c}/${d}/${e}`},a8=a=>a?new Date(a).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"--",a9=a=>{if(null==a)return"--";let b=Math.floor((a||0)/60),c=(a||0)%60;return b&&c?`${b}h ${c}m`:b?`${b}h`:`${c}m`},ba=()=>{Z(!1),X(null)};return(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex justify-end bg-black/0",children:[(0,b.jsxs)("div",{className:["relative h-full w-[83vw] max-w-[83vw] bg-white shadow-xl border-l transform transition-transform duration-300",k?"translate-x-0":"translate-x-full","flex flex-col"].join(" "),children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"text-sm text-gray-500",children:["Task #",d.projectId?`RTA-${String(d.id).padStart(2,"0")}`:`RTA-${String(d.id)}`]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,b.jsx)("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),(0,b.jsx)("div",{className:"text-lg font-semibold",children:d.title??"Task Name"})]})]}),(0,b.jsx)("button",{"aria-label":"close",onClick:e,className:"p-2 rounded hover:bg-gray-100",title:"Close",children:(0,b.jsx)(h.XMarkIcon,{className:"w-5 h-5 text-gray-600"})})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-auto",children:[(0,b.jsxs)("div",{className:"p-6 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 bg-white border rounded-lg p-5 relative",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsx)("div",{children:(0,b.jsx)("button",{onClick:()=>d.id&&f?.(d.id),className:"inline-block px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 text-sm",children:"Mark As Complete"})}),(0,b.jsxs)("div",{className:"flex items-center gap-2 relative",children:[(0,b.jsx)("button",{ref:p,onClick:()=>n(a=>!a),className:"p-2 rounded hover:bg-gray-100",children:(0,b.jsxs)("svg",{className:"w-5 h-5 text-gray-600",fill:"currentColor",children:[(0,b.jsx)("circle",{cx:"5",cy:"12",r:"1.5"}),(0,b.jsx)("circle",{cx:"12",cy:"12",r:"1.5"}),(0,b.jsx)("circle",{cx:"19",cy:"12",r:"1.5"})]})}),m&&(0,b.jsxs)("div",{ref:o,className:"absolute right-10 top-10 w-48 bg-white border rounded-lg shadow-md p-2 z-50",children:[(0,b.jsx)("button",{onClick:()=>{n(!1),r(!0)},className:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm",children:"ðŸ”” Send Reminder"}),(0,b.jsx)("button",{onClick:()=>{n(!1),av(d.title??""),ax(""),az(d.projectName??""),aB(d.startDate??null),aD(d.dueDate??null),aF(!!d.noDueDate),aH(d.taskStage?.name??"Doing"),aJ((d.assignedEmployees&&d.assignedEmployees.length&&d.assignedEmployees[0].name)??(d.assignedEmployeeIds&&d.assignedEmployeeIds[0])??""),aL(d.description??""),aN((d.labels&&d.labels[0]?.name)??""),aP(d.milestone?.title??""),aR(d.priority?String(d.priority).charAt(0).toUpperCase()+String(d.priority).slice(1):"Low"),aT(!!d.isPrivate),aV(!!d.timeEstimateMinutes),aX(d.timeEstimateMinutes??""),aZ(!!d.isDependent),a_(""),a1(null),a3(null),at(!0)},className:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm",children:"âœï¸ Edit Task"}),(0,b.jsx)("button",{onClick:()=>{n(!1),alert("Pin Task clicked")},className:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm",children:"ðŸ“Œ Pin Task"}),(0,b.jsx)("button",{onClick:()=>{n(!1);let a=`/tasks/${d.id}`;try{navigator.clipboard?.writeText(a),alert("Task link copied to clipboard")}catch{alert("Task link: "+a)}},className:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm",children:"ðŸ”— Copy Task Link"})]}),(0,b.jsx)("button",{onClick:e,className:"p-2 rounded hover:bg-gray-100"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-x-6 gap-y-3 mt-6 text-sm",children:[(0,b.jsx)("div",{className:"text-gray-500",children:"Project"}),(0,b.jsx)("div",{className:"font-medium",children:d.projectName??`Project ${d.projectId??"--"}`}),(0,b.jsx)("div",{className:"text-gray-500",children:"Priority"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:`w-2 h-2 rounded-full ${a5}`}),(0,b.jsx)("span",{className:"font-medium",children:d.priority??"Low"})]}),(0,b.jsx)("div",{className:"text-gray-500",children:"Assigned to"}),(0,b.jsx)("div",{className:"font-medium",children:d.assignedEmployees&&d.assignedEmployees.length?d.assignedEmployees.map(a=>a.name).join(", "):d.assignedEmployeeIds&&d.assignedEmployeeIds.length?d.assignedEmployeeIds.join(", "):"--"}),(0,b.jsx)("div",{className:"text-gray-500",children:"Project Code"}),(0,b.jsxs)("div",{className:"font-medium",children:["RTA-",String(d.id).padStart(2,"0")]}),(0,b.jsx)("div",{className:"text-gray-500",children:"Milestones"}),(0,b.jsx)("div",{className:"font-medium",children:d.milestone?.title??"----"}),(0,b.jsx)("div",{className:"text-gray-500",children:"Label"}),(0,b.jsx)("div",{className:"font-medium",children:d.labels&&d.labels.length?d.labels.map(a=>a.name).join(", "):"--"}),(0,b.jsx)("div",{className:"text-gray-500",children:"Task Category"}),(0,b.jsx)("div",{className:"font-medium",children:"--"}),(0,b.jsx)("div",{className:"text-gray-500",children:"Description"}),(0,b.jsx)("div",{className:"font-medium whitespace-pre-wrap",children:d.description??"--"})]})]}),(0,b.jsxs)("div",{className:"bg-white border rounded-lg p-5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:"w-3 h-3 rounded-full bg-blue-500"}),(0,b.jsx)("div",{className:"font-medium",children:d.taskStage?.name??"Doing"})]}),(0,b.jsxs)("div",{className:"mt-4 text-sm",children:[(0,b.jsxs)("div",{className:"flex justify-between py-2",children:[(0,b.jsx)("div",{className:"text-gray-500",children:"Created On"}),(0,b.jsx)("div",{className:"font-medium",children:(g=d.createdOn)?new Date(g).toLocaleString():"--"})]}),(0,b.jsxs)("div",{className:"flex justify-between py-2",children:[(0,b.jsx)("div",{className:"text-gray-500",children:"Start Date"}),(0,b.jsx)("div",{className:"font-medium",children:a6(d.startDate)})]}),(0,b.jsxs)("div",{className:"flex justify-between py-2",children:[(0,b.jsx)("div",{className:"text-gray-500",children:"Due Date"}),(0,b.jsx)("div",{className:"font-medium",children:d.noDueDate?"--":a6(d.dueDate)})]}),(0,b.jsxs)("div",{className:"flex justify-between py-2",children:[(0,b.jsx)("div",{className:"text-gray-500",children:"Hours Logged"}),(0,b.jsx)("div",{className:"font-medium",children:a9(d.hoursLoggedMinutes??null)})]})]})]})]}),(0,b.jsx)("div",{className:"px-6 pb-6",children:(0,b.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-6",children:[(0,b.jsx)("button",{onClick:()=>j("files"),className:`pb-2 ${"files"===i?"border-b-2 border-blue-600 font-medium":"text-gray-500"}`,children:"Files"}),(0,b.jsx)("button",{onClick:()=>j("subtask"),className:`pb-2 ${"subtask"===i?"border-b-2 border-blue-600 font-medium":"text-gray-500"}`,children:"Sub Task"}),(0,b.jsx)("button",{onClick:()=>j("timesheet"),className:`pb-2 ${"timesheet"===i?"border-b-2 border-blue-600 font-medium":"text-gray-500"}`,children:"Timesheet"}),(0,b.jsx)("button",{onClick:()=>j("notes"),className:`pb-2 ${"notes"===i?"border-b-2 border-blue-600 font-medium":"text-gray-500"}`,children:"Notes"})]}),(0,b.jsx)("div",{})]}),(0,b.jsxs)("div",{className:"mt-4 border rounded-lg p-4 bg-white h-60 overflow-auto",children:[(0,b.jsx)("input",{ref:t,type:"file",className:"hidden",onChange:a=>{let b=a.target.files;b&&0!==b.length&&(alert(`${b.length} file(s) selected. Integrate your upload handler to actually send files to server.`),a.currentTarget.value="")},multiple:!0}),"files"===i&&(0,b.jsxs)("div",{className:"h-full flex flex-col",children:[(0,b.jsx)("div",{className:"flex items-center gap-3",children:(0,b.jsxs)("button",{onClick:()=>t.current?.click(),className:"inline-flex items-center gap-2 text-blue-600 text-sm font-medium hover:underline","aria-label":"Upload File",title:"Upload File",children:[(0,b.jsx)("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-white border border-blue-600 text-blue-600 text-xs",children:"+"}),(0,b.jsx)("span",{children:"Upload File"})]})}),(0,b.jsx)("div",{className:"mt-3 flex-1 overflow-auto",children:d.attachments&&d.attachments.length?(0,b.jsx)("ul",{className:"space-y-2 text-sm",children:d.attachments.map((a,c)=>{let d=a.name??(a=>{if(!a)return"attachment";try{let b=a.split("/").pop()||a;return decodeURIComponent(b.split("?")[0])}catch{return a}})(a.url);return(0,b.jsxs)("li",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"truncate max-w-[80%]",children:d}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a.url?(0,b.jsx)("a",{href:a.url,target:"_blank",rel:"noreferrer",className:"underline",children:"Download"}):null})]},c)})}):(0,b.jsx)("div",{className:"text-gray-500"})})]}),"subtask"===i&&(0,b.jsxs)("div",{className:"h-full flex flex-col",children:[(0,b.jsx)("div",{className:"flex items-center gap-3",children:(0,b.jsxs)("button",{onClick:()=>{D(""),F(""),H(null),B(!0)},className:"inline-flex items-center gap-2 text-blue-600 text-sm font-medium hover:underline","aria-label":"Add a Sub Task",title:"Add a Sub Task",children:[(0,b.jsx)("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-white border border-blue-600 text-blue-600 text-xs",children:"+"}),(0,b.jsx)("span",{children:"Add a Sub Task"})]})}),(0,b.jsx)("div",{className:"mt-4 flex-1 overflow-auto",children:(0,b.jsx)("ul",{className:"space-y-3",children:(0,b.jsxs)("li",{className:"flex items-center justify-between pr-2",children:[(0,b.jsx)("div",{className:"flex items-center gap-3",children:(0,b.jsxs)("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:u,onChange:()=>{v(a=>!a)},className:"w-4 h-4 rounded border-gray-300","aria-label":"toggle subtask done"}),(0,b.jsx)("span",{className:`text-sm ${u?"line-through text-gray-400":"text-gray-700"}`,children:"Title of the sub task"})]})}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("button",{ref:z,onClick:()=>x(a=>!a),className:"p-2 rounded hover:bg-gray-100","aria-label":"subtask menu",children:(0,b.jsxs)("svg",{className:"w-5 h-5 text-gray-600",fill:"currentColor",children:[(0,b.jsx)("circle",{cx:"5",cy:"12",r:"1.5"}),(0,b.jsx)("circle",{cx:"12",cy:"12",r:"1.5"}),(0,b.jsx)("circle",{cx:"19",cy:"12",r:"1.5"})]})}),w&&(0,b.jsxs)("div",{ref:y,className:"absolute right-0 top-8 w-40 bg-white border rounded-lg shadow-md p-1 z-50",children:[(0,b.jsxs)("button",{onClick:()=>{x(!1),J(!0)},className:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-4 h-4 text-gray-600",viewBox:"0 0 24 24",fill:"none",children:(0,b.jsx)("path",{d:"M12 5c-7 0-11 7-11 7s4 7 11 7 11-7 11-7-4-7-11-7z",stroke:"currentColor",strokeWidth:"1.2"})}),"View"]}),(0,b.jsxs)("button",{onClick:()=>{x(!1),N("Title of the sub task"),P(""),R(null),L(!0)},className:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-4 h-4 text-gray-600",viewBox:"0 0 24 24",fill:"none",children:(0,b.jsx)("path",{d:"M3 21l3-1 11-11 2 2-11 11-1 3H3z",stroke:"currentColor",strokeWidth:"1.2"})}),"Edit"]}),(0,b.jsxs)("button",{onClick:()=>{x(!1),confirm("Delete subtask? This is UI-only.")&&alert("Subtask deleted (UI-only). Integrate API to persist.")},className:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm flex items-center gap-2 text-red-600",children:[(0,b.jsx)("svg",{className:"w-4 h-4 text-red-600",viewBox:"0 0 24 24",fill:"none",children:(0,b.jsx)("path",{d:"M3 6h18M8 6v12a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V6M10 6V4a2 2 0 0 1 2-2h0a2 2 0 0 1 2 2v2",stroke:"currentColor",strokeWidth:"1.2"})}),"Delete"]})]})]})]})})})]}),"timesheet"===i&&(0,b.jsx)("div",{className:"h-full flex flex-col",children:(0,b.jsx)("div",{className:"mt-1 flex-1 overflow-auto",children:(0,b.jsxs)("div",{className:"rounded-md overflow-hidden border",children:[(0,b.jsxs)("div",{className:"bg-[#e8f2fb] px-4 py-3 text-sm text-gray-700 grid grid-cols-4 gap-4 items-center rounded-t-md",children:[(0,b.jsx)("div",{className:"font-medium",children:"Employee"}),(0,b.jsx)("div",{className:"font-medium",children:"Start Time"}),(0,b.jsx)("div",{className:"font-medium",children:"End Time"}),(0,b.jsx)("div",{className:"font-medium text-right",children:"Hours Logged"})]}),(0,b.jsx)("div",{className:"bg-white divide-y",children:a4.map(a=>(0,b.jsxs)("div",{className:"px-4 py-4 grid grid-cols-4 gap-4 items-center text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center overflow-hidden",children:a.employee.profileUrl?(0,b.jsx)("img",{src:a.employee.profileUrl,alt:a.employee.name,className:"w-full h-full object-cover"}):(0,b.jsx)("span",{className:"text-xs text-gray-600",children:a.employee.name.split(" ").map(a=>a[0]).join("")})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.employee.name}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a.employee.role??""})]})]}),(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("div",{className:"font-medium",children:a7(a.startTime)}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a8(a.startTime)})]}),(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("div",{className:"font-medium",children:a7(a.endTime)}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a8(a.endTime)})]}),(0,b.jsx)("div",{className:"text-right",children:(0,b.jsx)("div",{className:"font-medium",children:a9(a.minutesLogged)})})]},a.id))}),(0,b.jsx)("div",{className:"h-2 bg-white rounded-b-md"})]})})}),"notes"===i&&(0,b.jsxs)("div",{className:"h-full flex flex-col",children:[(0,b.jsx)("div",{className:"flex items-center gap-3",children:(0,b.jsxs)("button",{onClick:()=>{af(""),aj(""),ah("public"),al(null),ad(!0)},"data-add-note-btn":!0,className:"inline-flex items-center gap-2 text-blue-600 text-sm font-medium hover:underline","aria-label":"Add a Note",title:"Add a Note",children:[(0,b.jsx)("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-white border border-blue-600 text-blue-600 text-xs",children:"+"}),(0,b.jsx)("span",{children:"Add a Note"})]})}),(0,b.jsx)("div",{className:"mt-4 flex-1 overflow-auto relative",children:(0,b.jsxs)("div",{className:"rounded-md overflow-hidden border relative",children:[(0,b.jsxs)("div",{className:"bg-[#e8f2fb] px-4 py-3 text-sm text-gray-700 grid grid-cols-3 gap-4 items-center",children:[(0,b.jsx)("div",{className:"font-medium",children:"Note Title"}),(0,b.jsx)("div",{className:"font-medium",children:"Note Type"}),(0,b.jsx)("div",{className:"font-medium text-right",children:"Action"})]}),null!==U&&W&&(0,b.jsxs)("div",{"data-notes-menu":!0,className:"absolute right-3 top-3 z-50 w-44 bg-white border rounded-lg shadow-md p-1",children:[(0,b.jsx)("button",{onClick:()=>{W&&(Z(!0),V(null))},className:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm flex items-center gap-2",children:"View"}),(0,b.jsx)("button",{onClick:()=>{W&&(an(W.title),ap(W.type),ar(W.content??""),_(!0),V(null))},className:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm flex items-center gap-2",children:"Edit"}),(0,b.jsx)("button",{onClick:()=>{W&&(ab(!0),V(null))},className:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm flex items-center gap-2 text-red-600",children:"Delete"})]}),(0,b.jsx)("div",{className:"bg-white p-3 text-sm",children:S.length?(0,b.jsx)("ul",{className:"space-y-3",children:S.map(a=>(0,b.jsxs)("li",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"truncate max-w-[40%]",children:a.title}),(0,b.jsx)("div",{className:"flex items-center gap-2 text-gray-600",children:"public"===a.type?(0,b.jsx)("span",{children:"Public"}):(0,b.jsx)("span",{children:"Private"})}),(0,b.jsx)("div",{className:"relative",children:(0,b.jsx)("button",{"data-notes-menu-btn":!0,onClick:()=>{X(a),V(a.id)},className:"p-2 rounded hover:bg-gray-100","aria-label":"note actions",children:(0,b.jsxs)("svg",{className:"w-5 h-5 text-gray-600",fill:"currentColor",children:[(0,b.jsx)("circle",{cx:"5",cy:"12",r:"1.5"}),(0,b.jsx)("circle",{cx:"12",cy:"12",r:"1.5"}),(0,b.jsx)("circle",{cx:"19",cy:"12",r:"1.5"})]})})})]},a.id))}):(0,b.jsx)("div",{className:"text-gray-500 p-4",children:"No notes yet"})})]})})]})]})]})})]})]}),q&&(0,b.jsx)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/30 px-4",children:(0,b.jsxs)("div",{ref:s,role:"dialog","aria-modal":"true",className:"w-full max-w-md bg-white rounded-lg shadow-lg p-6",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold",children:"Are You Sure?"}),(0,b.jsx)("p",{className:"mt-3 text-sm text-gray-500",children:"You want to send reminder to the assigned employees."})]}),(0,b.jsxs)("div",{className:"mt-6 flex items-center justify-center gap-4",children:[(0,b.jsx)("button",{onClick:()=>{r(!1)},className:"px-6 py-2 border border-blue-600 text-blue-600 rounded-full text-sm hover:bg-gray-50",children:"Cancel"}),(0,b.jsx)("button",{onClick:()=>{alert("Reminder sent to assigned employees"),r(!1)},className:"px-6 py-2 bg-blue-600 text-white rounded-full text-sm hover:bg-blue-700",children:"Yes"})]})]})}),A&&(0,b.jsx)("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/30 px-4",children:(0,b.jsxs)("div",{role:"dialog","aria-modal":"true",className:"w-full max-w-lg bg-white rounded-lg shadow-lg p-6",children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Title ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{value:C,onChange:a=>{D(a.target.value),G&&H(null)},className:"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter subtask title",autoFocus:!0}),G&&(0,b.jsx)("div",{className:"mt-1 text-xs text-red-600",children:G})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,b.jsx)("textarea",{value:E,onChange:a=>F(a.target.value),className:"mt-2 w-full min-h-[90px] rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter description (optional)"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-6",children:[(0,b.jsx)("button",{onClick:()=>{B(!1),H(null)},className:"px-6 py-2 rounded-full border border-blue-600 text-blue-600 text-sm hover:bg-gray-50",children:"Cancel"}),(0,b.jsx)("button",{onClick:()=>{if(!C.trim())return void H("Title is required");alert(`Subtask "${C}" created (UI-only). Integrate API to persist.`),B(!1)},className:"px-6 py-2 rounded-full bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Save"})]})]})}),I&&(0,b.jsx)("div",{className:"fixed inset-0 z-[80] flex items-center justify-center bg-black/30 px-4",children:(0,b.jsxs)("div",{role:"dialog","aria-modal":"true",className:"w-full max-w-lg bg-white rounded-lg shadow-lg p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Subtask Details"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-x-6 gap-y-3 text-sm",children:[(0,b.jsx)("div",{className:"text-gray-500",children:"Title"}),(0,b.jsx)("div",{className:"font-medium",children:"Title of the sub task"}),(0,b.jsx)("div",{className:"text-gray-500",children:"Description"}),(0,b.jsx)("div",{className:"font-medium",children:"--"})]}),(0,b.jsx)("div",{className:"mt-6 flex justify-end",children:(0,b.jsx)("button",{onClick:()=>J(!1),className:"px-6 py-2 rounded-full border border-gray-300 text-gray-700 text-sm hover:bg-gray-50",children:"Close"})})]})}),K&&(0,b.jsx)("div",{className:"fixed inset-0 z-[90] flex items-center justify-center bg-black/30 px-4",children:(0,b.jsxs)("div",{role:"dialog","aria-modal":"true",className:"w-full max-w-lg bg-white rounded-lg shadow-lg p-6",children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Title ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{value:M,onChange:a=>{N(a.target.value),Q&&R(null)},className:"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter subtask title",autoFocus:!0}),Q&&(0,b.jsx)("div",{className:"mt-1 text-xs text-red-600",children:Q})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,b.jsx)("textarea",{value:O,onChange:a=>P(a.target.value),className:"mt-2 w-full min-h-[90px] rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter description (optional)"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-6",children:[(0,b.jsx)("button",{onClick:()=>{L(!1),R(null)},className:"px-6 py-2 rounded-full border border-blue-600 text-blue-600 text-sm hover:bg-gray-50",children:"Cancel"}),(0,b.jsx)("button",{onClick:()=>{if(!M.trim())return void R("Title is required");alert(`Subtask updated to "${M}" (UI-only). Integrate API to persist.`),L(!1)},className:"px-6 py-2 rounded-full bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Update"})]})]})}),ac&&(0,b.jsx)("div",{className:"fixed inset-0 z-[85] flex items-center justify-center bg-black/30 px-4",children:(0,b.jsxs)("div",{"data-add-note-modal":!0,role:"dialog","aria-modal":"true",className:"w-full max-w-lg bg-white rounded-lg shadow-lg p-6",children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Note Title ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{value:ae,onChange:a=>{af(a.target.value),ak&&al(null)},className:"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter note title",autoFocus:!0}),ak&&(0,b.jsx)("div",{className:"mt-1 text-xs text-red-600",children:ak})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Note Detail"}),(0,b.jsx)("textarea",{value:ai,onChange:a=>aj(a.target.value),className:"mt-2 w-full min-h-[100px] rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter note details (optional)"})]}),(0,b.jsxs)("div",{className:"mb-6 flex items-center gap-6",children:[(0,b.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)("input",{type:"radio",name:"note-type",checked:"public"===ag,onChange:()=>ah("public")}),(0,b.jsx)("span",{className:"text-sm",children:"Public"})]}),(0,b.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)("input",{type:"radio",name:"note-type",checked:"private"===ag,onChange:()=>ah("private")}),(0,b.jsx)("span",{className:"text-sm",children:"Private"})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-6",children:[(0,b.jsx)("button",{onClick:()=>{ad(!1),al(null)},className:"px-8 py-2 rounded-full border border-blue-600 text-blue-600 text-sm hover:bg-gray-50",children:"Cancel"}),(0,b.jsx)("button",{onClick:()=>{if(!ae.trim())return void al("Title is required");let a={id:S.length?Math.max(...S.map(a=>a.id))+1:1,title:ae.trim(),type:ag,content:ai};T(b=>[a,...b]),ad(!1),af(""),aj(""),ah("public")},className:"px-8 py-2 rounded-full bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Save"})]})]})}),Y&&W&&(0,b.jsx)("div",{className:"fixed inset-0 z-[86] flex items-center justify-center bg-black/30 px-4",children:(0,b.jsxs)("div",{role:"dialog","aria-modal":"true",className:"w-full max-w-lg bg-white rounded-lg shadow-lg p-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"View Note"}),(0,b.jsx)("button",{onClick:ba,className:"p-2 rounded hover:bg-gray-100",children:(0,b.jsx)(h.XMarkIcon,{className:"w-5 h-5 text-gray-600"})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-x-6 gap-y-3 text-sm",children:[(0,b.jsx)("div",{className:"text-gray-500",children:"Title"}),(0,b.jsx)("div",{className:"font-medium",children:W.title}),(0,b.jsx)("div",{className:"text-gray-500",children:"Type"}),(0,b.jsx)("div",{className:"font-medium",children:"public"===W.type?"Public":"Private"}),(0,b.jsx)("div",{className:"text-gray-500",children:"Content"}),(0,b.jsx)("div",{className:"font-medium whitespace-pre-wrap",children:W.content??"--"})]}),(0,b.jsx)("div",{className:"mt-6 flex justify-end",children:(0,b.jsx)("button",{onClick:ba,className:"px-6 py-2 rounded-full border border-gray-300 text-gray-700 text-sm hover:bg-gray-50",children:"Close"})})]})}),$&&W&&(0,b.jsx)("div",{className:"fixed inset-0 z-[87] flex items-center justify-center bg-black/30 px-4",children:(0,b.jsxs)("div",{role:"dialog","aria-modal":"true",className:"w-full max-w-lg bg-white rounded-lg shadow-lg p-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Edit Note"}),(0,b.jsx)("button",{onClick:()=>{_(!1),X(null)},className:"p-2 rounded hover:bg-gray-100",children:(0,b.jsx)(h.XMarkIcon,{className:"w-5 h-5 text-gray-600"})})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Title ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{value:am,onChange:a=>an(a.target.value),className:"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter note title",autoFocus:!0})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),(0,b.jsxs)("select",{value:ao,onChange:a=>ap(a.target.value),className:"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"public",children:"Public"}),(0,b.jsx)("option",{value:"private",children:"Private"})]})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Content"}),(0,b.jsx)("textarea",{value:aq,onChange:a=>ar(a.target.value),className:"mt-2 w-full min-h-[120px] rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter note content (optional)"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-6",children:[(0,b.jsx)("button",{onClick:()=>{_(!1),X(null)},className:"px-6 py-2 rounded-full border border-blue-600 text-blue-600 text-sm hover:bg-gray-50",children:"Cancel"}),(0,b.jsx)("button",{onClick:()=>{if(W){if(!am.trim())return void alert("Title is required");T(a=>a.map(a=>a.id===W.id?{...a,title:am.trim(),type:ao,content:aq}:a)),_(!1),X(null)}},className:"px-6 py-2 rounded-full bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Save"})]})]})}),aa&&W&&(0,b.jsx)("div",{className:"fixed inset-0 z-[88] flex items-center justify-center bg-black/30 px-4",children:(0,b.jsxs)("div",{role:"dialog","aria-modal":"true",className:"w-full max-w-md bg-white rounded-lg shadow-lg p-6",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold",children:"Are you sure?"}),(0,b.jsxs)("p",{className:"mt-3 text-sm text-gray-500",children:['Delete note "',W.title,'". This action cannot be undone.']})]}),(0,b.jsxs)("div",{className:"mt-6 flex items-center justify-center gap-4",children:[(0,b.jsx)("button",{onClick:()=>{ab(!1),X(null)},className:"px-6 py-2 border border-blue-600 text-blue-600 rounded-full text-sm hover:bg-gray-50",children:"Cancel"}),(0,b.jsx)("button",{onClick:()=>{if(!W)return void ab(!1);T(a=>a.filter(a=>a.id!==W.id)),ab(!1),X(null)},className:"px-6 py-2 bg-red-600 text-white rounded-full text-sm hover:bg-red-700",children:"Delete"})]})]})}),as&&(0,b.jsx)("div",{className:"fixed inset-0 z-[95] flex items-start justify-center pt-10 pb-10 overflow-auto bg-black/30 px-4",children:(0,b.jsxs)("div",{role:"dialog","aria-modal":"true",className:"w-full max-w-[980px] bg-white rounded-lg shadow-lg p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between border-b pb-3 px-4",children:[(0,b.jsx)("div",{className:"text-lg font-semibold",children:"Update Task Details"}),(0,b.jsx)("button",{onClick:()=>at(!1),className:"p-1 rounded hover:bg-gray-100",children:(0,b.jsx)(h.XMarkIcon,{className:"w-5 h-5 text-gray-600"})})]}),(0,b.jsxs)("div",{className:"p-4 space-y-4",children:[(0,b.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,b.jsx)("div",{className:"text-sm font-medium mb-3",children:"Task Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsxs)("label",{className:"block text-sm text-gray-600",children:["Title ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{value:au,onChange:a=>{av(a.target.value),a2&&a3(null)},className:"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Task Name"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600",children:"Task Category"}),(0,b.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,b.jsx)("select",{value:aw,onChange:a=>ax(a.target.value),className:"flex-1 rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",children:(0,b.jsx)("option",{value:"",children:"--"})}),(0,b.jsx)("button",{onClick:()=>{alert("Add Task Category clicked (UI-only).")},className:"px-3 py-2 rounded border bg-gray-100 text-sm",children:"Add"})]})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsxs)("label",{className:"block text-sm text-gray-600 mt-2",children:["Project ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("select",{value:ay,onChange:a=>az(a.target.value),className:"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",children:(0,b.jsx)("option",{value:d.projectName??"",children:d.projectName??"Project Name"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600 mt-2",children:"Client Details"}),(0,b.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-xs",children:"JD"}),(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("div",{className:"font-medium",children:"John Doe"}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:"Curilo Solutions"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mt-2",children:"Start Date"}),(0,b.jsx)("input",{type:"date",value:aA?aA.split("T")[0]:"",onChange:a=>aB(a.target.value?a.target.value:null),className:"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mt-2",children:"Due Date"}),(0,b.jsx)("input",{type:"date",value:aC?aC.split("T")[0]:"",onChange:a=>aD(a.target.value?a.target.value:null),disabled:aE,className:"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 disabled:opacity-60"}),(0,b.jsxs)("label",{className:"inline-flex items-center gap-2 mt-2 text-sm",children:[(0,b.jsx)("input",{type:"checkbox",checked:aE,onChange:a=>aF(a.target.checked)}),(0,b.jsx)("span",{children:"Without Due Date"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mt-2",children:"Status"}),(0,b.jsxs)("select",{value:aG,onChange:a=>aH(a.target.value),className:"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"Doing",children:"Doing"}),(0,b.jsx)("option",{value:"To Do",children:"To Do"}),(0,b.jsx)("option",{value:"Done",children:"Done"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mt-2",children:"Assigned To"}),(0,b.jsx)("select",{value:aI,onChange:a=>aJ(a.target.value),className:"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",children:(0,b.jsx)("option",{value:aI||"",children:aI||"Riya Sharma"})})]}),(0,b.jsxs)("div",{className:"md:col-span-3",children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mt-2",children:"Description"}),(0,b.jsx)("textarea",{value:aK,onChange:a=>aL(a.target.value),className:"mt-2 w-full min-h-[80px] rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"--"})]})]})]}),(0,b.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,b.jsx)("div",{className:"text-sm font-medium mb-3",children:"Other Details"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-end",children:[(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600",children:"Label"}),(0,b.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,b.jsx)("select",{value:aM,onChange:a=>aN(a.target.value),className:"flex-1 rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",children:(0,b.jsx)("option",{value:"",children:"--"})}),(0,b.jsx)("button",{onClick:()=>{alert("Add Label clicked (UI-only).")},className:"px-3 py-2 rounded border bg-gray-100 text-sm",children:"Add"})]})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600",children:"Milestones"}),(0,b.jsx)("select",{value:aO,onChange:a=>aP(a.target.value),className:"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",children:(0,b.jsx)("option",{value:"",children:"--"})})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600",children:"Priority"}),(0,b.jsx)("div",{className:"mt-2 flex items-center justify-between gap-2",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:`w-3 h-3 rounded-full ${"Low"===aQ?"bg-green-500":"Medium"===aQ?"bg-yellow-400":"High"===aQ?"bg-orange-500":"bg-red-600"}`}),(0,b.jsxs)("select",{value:aQ,onChange:a=>aR(a.target.value),className:"rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"Low",children:"Low"}),(0,b.jsx)("option",{value:"Medium",children:"Medium"}),(0,b.jsx)("option",{value:"High",children:"High"}),(0,b.jsx)("option",{value:"Urgent",children:"Urgent"})]})]})})]}),(0,b.jsx)("div",{className:"md:col-span-2",children:(0,b.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:aS,onChange:a=>aT(a.target.checked)}),(0,b.jsx)("span",{className:"text-sm",children:"Make Private"})]})}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:aU,onChange:a=>aV(a.target.checked)}),(0,b.jsx)("span",{className:"text-sm",children:"Time Estimate"})]}),aU&&(0,b.jsxs)("div",{className:"mt-2",children:[(0,b.jsx)("input",{type:"number",min:0,value:aW,onChange:a=>aX(""===a.target.value?"":Number(a.target.value)),className:"w-32 rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500"}),(0,b.jsx)("span",{className:"ml-2 text-sm text-gray-500",children:"mins"})]})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:aY,onChange:a=>aZ(a.target.checked)}),(0,b.jsx)("span",{className:"text-sm",children:"Task is dependent on other task"})]}),aY&&(0,b.jsxs)("div",{className:"mt-2",children:[(0,b.jsxs)("label",{className:"block text-sm text-gray-600",children:["Dependent Task ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("select",{value:a$,onChange:a=>a_(a.target.value),className:"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",children:(0,b.jsx)("option",{value:"",children:"Task Name"})})]})]}),(0,b.jsxs)("div",{className:"md:col-span-6 mt-2",children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Add File"}),(0,b.jsx)("div",{onClick:()=>{t.current?.click()},className:"w-full min-h-[80px] rounded-md border-dashed border-2 border-gray-200 flex items-center justify-center text-sm text-gray-500 cursor-pointer",children:a0?(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("div",{className:"font-medium",children:a0.name}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:[(a0.size/1024).toFixed(1)," KB"]})]}):(0,b.jsx)("div",{children:"Choose a file"})}),(0,b.jsx)("input",{type:"file",onChange:a=>{let b=a.target.files&&a.target.files[0];b&&a1(b),a.currentTarget.value=""},className:"hidden"})]})]}),a2&&(0,b.jsx)("div",{className:"mt-3 text-sm text-red-600",children:a2})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,b.jsx)("button",{onClick:()=>{at(!1),a3(null)},className:"px-4 py-2 border rounded-md text-sm border-blue-600 text-blue-600 hover:bg-gray-50",children:"Cancel"}),(0,b.jsx)("button",{onClick:()=>au.trim()?aY&&!a$.trim()?void a3("Dependent Task is required when dependency is checked"):void(alert("Update (UI-only) payload:\n"+JSON.stringify({id:d.id,title:au.trim(),category:aw.trim(),project:ay,startDate:aA,dueDate:aE?null:aC,withoutDueDate:aE,status:aG,assignedTo:aI,description:aK.trim(),label:aM,milestone:aO,priority:aQ,isPrivate:aS,timeEstimateMins:aU?Number(aW||0):null,isDependent:aY,dependentTask:a$,fileName:a0?a0.name:null},null,2)),at(!1)):void a3("Title is required"),className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700",children:"Update"})]})]})]})})]})}let j="https://6jnqmj85-80.inc1.devtunnels.ms";function k({projectId:a}){let[d,h]=(0,c.useState)([]),[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(null),E={title:"",category:"",startDate:"",dueDate:"",noDueDate:!1,taskStageId:"",assignedEmployeeIds:[],description:"",labelIds:[],milestoneId:"",priority:"LOW",isPrivate:!1,timeEstimateMinutes:"",isDependent:!1,projectId:a,taskFile:null},[F,G]=(0,c.useState)(E),H=a=>`${j}${a}`,I=async()=>{try{let a=`${j}/status`,b=localStorage.getItem("accessToken"),c=await f.default.get(a,{headers:{Authorization:b?`Bearer ${b}`:""}});Array.isArray(c.data)?p(c.data):p([])}catch(a){console.warn("Failed to fetch statuses:",a),p([])}},J=async()=>{l(!0),n(null);try{let b=localStorage.getItem("accessToken"),c=`${j}/projects/${a}/tasks`,d=await f.default.get(c,{headers:{"Content-Type":"application/json",Authorization:b?`Bearer ${b}`:""}});h(Array.isArray(d.data)?d.data:[])}catch(a){n(a?.response?.data?.message||a?.message||"Failed to load tasks")}finally{l(!1)}};(0,c.useEffect)(()=>{I(),J()},[a]);let K=a=>G(b=>({...b,...a})),L=async b=>{b.preventDefault();try{let b=new FormData;b.append("title",F.title),b.append("category",F.category||""),b.append("startDate",F.startDate||""),b.append("dueDate",F.dueDate||""),b.append("noDueDate",String(F.noDueDate)),b.append("taskStageId",F.taskStageId||""),b.append("assignedEmployeeIds",JSON.stringify(F.assignedEmployeeIds)),b.append("description",F.description||""),b.append("labelIds",JSON.stringify(F.labelIds)),b.append("milestoneId",F.milestoneId||""),b.append("priority",F.priority||""),b.append("isPrivate",String(F.isPrivate)),b.append("timeEstimateMinutes",String(F.timeEstimateMinutes||"")),b.append("isDependent",String(F.isDependent)),b.append("projectId",String(a)),F.taskFile&&b.append("taskFile",F.taskFile),await (0,g.postAPI)(H("/api/projects/tasks"),b,{headers:{"Content-Type":"multipart/form-data"}}),r(!1),G(E),await J()}catch(a){alert("Create task failed: "+(a?.response?.data?.message||a?.message||"unknown"))}},M=async b=>{if(b.preventDefault(),u)try{let b=new FormData;b.append("title",F.title),b.append("category",F.category||""),b.append("noDueDate",String(F.noDueDate)),b.append("description",F.description||""),b.append("labelIds",JSON.stringify(F.labelIds)),b.append("priority",F.priority||""),b.append("isPrivate",String(F.isPrivate)),b.append("timeEstimateMinutes",String(F.timeEstimateMinutes||"")),b.append("isDependent",String(F.isDependent)),b.append("projectId",String(a)),b.append("assignedEmployeeIds",JSON.stringify(F.assignedEmployeeIds)),F.taskFile&&b.append("taskFile",F.taskFile),await (0,g.putAPI)(H(`/api/projects/tasks/${u.id}`),b,{headers:{"Content-Type":"multipart/form-data"}}),t(!1),v(null),G(E),await J()}catch(a){alert("Update task failed: "+(a?.response?.data?.message||a?.message||"unknown"))}},N=a=>{switch(("string"==typeof a?a:a?.name??"").toLowerCase()){case"complete":case"completed":case"complete":case"complete":return"bg-green-600";case"to-do":case"to do":case"todo":return"bg-yellow-500";case"doing":return"bg-blue-600";case"incomplete":return"bg-red-600";case"waiting":case"waiting for approval":return"bg-gray-600";default:return"bg-gray-400"}},O=a=>{if(!a&&0!==a)return"--";let b=Math.floor((a||0)/60),c=(a||0)%60;return b&&c?`${b}h ${c}m`:b?`${b}h`:`${c}m`};return(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Tasks"}),(0,b.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,b.jsx)("div",{className:"flex items-center gap-3",children:(0,b.jsx)("input",{type:"search",placeholder:"Search",onChange:a=>{let b=a.target.value.toLowerCase();b?h(a=>a.filter(a=>(a.title||"").toLowerCase().includes(b)||(a.projectName||"").toLowerCase().includes(b))):J()},className:"border px-3 py-2 rounded-md text-sm"})})}),k?(0,b.jsx)("div",{className:"py-6 text-center text-gray-500",children:"Loading tasks..."}):m?(0,b.jsx)("div",{className:"py-6 text-center text-red-500",children:m}):(0,b.jsxs)("div",{className:"overflow-x-auto",children:[(0,b.jsxs)("table",{className:"min-w-full text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-blue-50 text-left text-gray-600",children:[(0,b.jsx)("th",{className:"px-4 py-3",children:"Code"}),(0,b.jsx)("th",{className:"px-4 py-3",children:"Task"}),(0,b.jsx)("th",{className:"px-4 py-3",children:"Completed On"}),(0,b.jsx)("th",{className:"px-4 py-3",children:"Start Date"}),(0,b.jsx)("th",{className:"px-4 py-3",children:"Due Date"}),(0,b.jsx)("th",{className:"px-4 py-3",children:"Hours Logged"}),(0,b.jsx)("th",{className:"px-4 py-3",children:"Estimated Time"}),(0,b.jsx)("th",{className:"px-4 py-3",children:"Milestones"}),(0,b.jsx)("th",{className:"px-4 py-3",children:"Assigned to"}),(0,b.jsx)("th",{className:"px-4 py-3",children:"Status"})]})}),(0,b.jsx)("tbody",{children:0===d.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:11,className:"py-6 text-center text-gray-500",children:"No tasks found"})}):d.map(a=>{let c=a.dueDate&&!a.noDueDate&&new Date(a.dueDate)<new Date,d=(a=>{if(a.taskStage&&a.taskStage.name)return a.taskStage;if(a.taskStageId){let b=o.find(b=>b.id===a.taskStageId);if(b)return b}return(a=>{if(o&&o.length)return o.find(b=>String(b.name).toLowerCase().includes(String(a).toLowerCase()))})(String(a.taskStage?.name||""))??{id:a.taskStageId??0,name:a.taskStage?.name??"Doing"}})(a),f=d?.name??"Doing";return(0,b.jsxs)("tr",{className:"border-b last:border-b-0 bg-white hover:bg-gray-50",children:[(0,b.jsxs)("td",{className:"px-4 py-4 align-top",children:["RTA-",String(a.id).padStart(2,"0")]}),(0,b.jsxs)("td",{className:"px-4 py-4 align-top",children:[(0,b.jsx)("div",{className:"font-medium",children:a.title}),(0,b.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:a.projectName??`Project ${a.projectId}`})]}),(0,b.jsx)("td",{className:"px-4 py-4 align-top",children:"--"}),(0,b.jsx)("td",{className:"px-4 py-4 align-top",children:a.startDate?new Date(a.startDate).toLocaleDateString():"--"}),(0,b.jsx)("td",{className:`px-4 py-4 align-top ${c?"text-red-600":""}`,children:a.noDueDate?"--":a.dueDate?new Date(a.dueDate).toLocaleDateString():"--"}),(0,b.jsx)("td",{className:"px-4 py-4 align-top",children:O(a.hoursLoggedMinutes??null)}),(0,b.jsx)("td",{className:"px-4 py-4 align-top",children:O(a.timeEstimateMinutes??null)}),(0,b.jsx)("td",{className:"px-4 py-4 align-top",children:a.milestone?.title??"--"}),(0,b.jsx)("td",{className:"px-4 py-4 align-top",children:(0,b.jsx)("div",{className:"flex -space-x-2",children:(a.assignedEmployees||[]).slice(0,3).map(a=>(0,b.jsx)("div",{className:"w-8 h-8 rounded-full border-2 border-white overflow-hidden bg-gray-100",children:a.profileUrl?(0,b.jsx)("img",{src:a.profileUrl,alt:a.name,className:"w-full h-full object-cover"}):(0,b.jsx)(e.UserIcon,{className:"w-full h-full text-gray-400 p-1"})},a.employeeId))})}),(0,b.jsx)("td",{className:"px-4 py-4 align-top relative",children:(0,b.jsxs)("div",{className:"relative inline-block",children:[(0,b.jsxs)("button",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full border text-xs bg-white hover:bg-gray-50",title:"Change status",children:[d&&d.labelColor?(0,b.jsx)("span",{style:{width:8,height:8,borderRadius:9999,display:"inline-block",background:`#${String(d.labelColor).replace(/[^0-9a-fA-F]/g,"").slice(0,6)}`}}):(0,b.jsx)("span",{className:`w-2 h-2 rounded-full ${N(d?.name??"Doing")}`}),(0,b.jsx)("span",{children:String(f)})]}),C===a.id&&(0,b.jsx)("div",{className:"absolute right-0 mt-2 z-30 w-44 bg-white border rounded-md shadow-lg text-sm",children:o.length>0?o.map(a=>(0,b.jsxs)("button",{className:`w-full text-left px-4 py-2 hover:bg-gray-50 flex items-center gap-2 ${a.id===d?.id?"font-medium":""}`,children:[a.labelColor?(0,b.jsx)("span",{style:{width:8,height:8,borderRadius:9999,background:`#${String(a.labelColor).replace(/[^0-9a-fA-F]/g,"").slice(0,6)}`}}):(0,b.jsx)("span",{className:`w-2 h-2 rounded-full ${N(a.name)}`}),(0,b.jsx)("span",{children:a.name})]},a.id)):["To Do","Doing","Completed","Incomplete","Waiting for Approval"].map(a=>(0,b.jsxs)("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-50",children:[(0,b.jsx)("span",{className:`w-2 h-2 rounded-full ${N(a)}`})," ",(0,b.jsx)("span",{children:a})]},a))})]})})]},a.id)})})]}),(0,b.jsxs)("div",{className:"px-4 py-3 border-t bg-gray-50 flex items-center justify-between text-sm text-gray-600 rounded-b-md mt-4",children:[(0,b.jsxs)("div",{children:["Result per page - ",d.length?d.length:0]}),(0,b.jsx)("div",{children:"Page 1 of 1"})]})]}),q&&(0,b.jsx)("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 p-4",children:(0,b.jsxs)("form",{onSubmit:L,className:"bg-white w-full max-w-3xl rounded-lg p-6 shadow-lg overflow-auto max-h-[90vh]",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Add Task"}),(0,b.jsx)("button",{type:"button",onClick:()=>r(!1),className:"text-gray-500",children:"Close"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,b.jsxs)("label",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-xs text-gray-600",children:"Title"}),(0,b.jsx)("input",{required:!0,value:F.title,onChange:a=>K({title:a.target.value}),className:"border px-3 py-2 rounded"})]}),(0,b.jsxs)("label",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-xs text-gray-600",children:"Category (id)"}),(0,b.jsx)("input",{value:F.category,onChange:a=>K({category:a.target.value}),className:"border px-3 py-2 rounded"})]}),(0,b.jsxs)("label",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-xs text-gray-600",children:"Start Date"}),(0,b.jsx)("input",{type:"date",value:F.startDate,onChange:a=>K({startDate:a.target.value}),className:"border px-3 py-2 rounded"})]}),(0,b.jsxs)("label",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-xs text-gray-600",children:"Due Date"}),(0,b.jsx)("input",{type:"date",value:F.dueDate,onChange:a=>K({dueDate:a.target.value}),className:"border px-3 py-2 rounded"})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:F.noDueDate,onChange:a=>K({noDueDate:a.target.checked})}),(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"No Due Date"})]}),(0,b.jsxs)("label",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-xs text-gray-600",children:"Task Stage ID"}),(0,b.jsx)("input",{value:F.taskStageId,onChange:a=>K({taskStageId:a.target.value}),className:"border px-3 py-2 rounded"})]}),(0,b.jsxs)("label",{className:"flex flex-col md:col-span-2",children:[(0,b.jsx)("span",{className:"text-xs text-gray-600",children:"Description"}),(0,b.jsx)("textarea",{value:F.description,onChange:a=>K({description:a.target.value}),className:"border px-3 py-2 rounded"})]}),(0,b.jsxs)("label",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-xs text-gray-600",children:"Assigned Employee IDs (comma separated)"}),(0,b.jsx)("input",{value:F.assignedEmployeeIds.join(","),onChange:a=>K({assignedEmployeeIds:a.target.value.split(",").map(a=>a.trim()).filter(Boolean)}),className:"border px-3 py-2 rounded"})]}),(0,b.jsxs)("label",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-xs text-gray-600",children:"Label IDs (comma separated)"}),(0,b.jsx)("input",{value:F.labelIds.join(","),onChange:a=>K({labelIds:a.target.value.split(",").map(a=>a.trim()).filter(Boolean)}),className:"border px-3 py-2 rounded"})]}),(0,b.jsxs)("label",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-xs text-gray-600",children:"Milestone ID"}),(0,b.jsx)("input",{value:F.milestoneId,onChange:a=>K({milestoneId:a.target.value}),className:"border px-3 py-2 rounded"})]}),(0,b.jsxs)("label",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-xs text-gray-600",children:"Priority"}),(0,b.jsxs)("select",{value:F.priority,onChange:a=>K({priority:a.target.value}),className:"border px-3 py-2 rounded",children:[(0,b.jsx)("option",{value:"LOW",children:"LOW"}),(0,b.jsx)("option",{value:"MEDIUM",children:"MEDIUM"}),(0,b.jsx)("option",{value:"HIGH",children:"HIGH"}),(0,b.jsx)("option",{value:"URGENT",children:"URGENT"})]})]}),(0,b.jsxs)("label",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-xs text-gray-600",children:"Time Estimate (minutes)"}),(0,b.jsx)("input",{type:"number",value:F.timeEstimateMinutes,onChange:a=>K({timeEstimateMinutes:a.target.value}),className:"border px-3 py-2 rounded"})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:F.isPrivate,onChange:a=>K({isPrivate:a.target.checked})}),(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Private"})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:F.isDependent,onChange:a=>K({isDependent:a.target.checked})}),(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Is Dependent"})]}),(0,b.jsxs)("label",{className:"flex flex-col md:col-span-2",children:[(0,b.jsx)("span",{className:"text-xs text-gray-600",children:"Attach file (optional)"}),(0,b.jsx)("input",{type:"file",onChange:a=>K({taskFile:a.target.files?.[0]||null})})]})]}),(0,b.jsxs)("div",{className:"mt-4 flex items-center justify-end gap-3",children:[(0,b.jsx)("button",{type:"button",onClick:()=>r(!1),className:"px-4 py-2 rounded border",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",className:"px-4 py-2 rounded bg-blue-600 text-white",children:"Save"})]})]})}),s&&u&&(0,b.jsx)("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 p-4",children:(0,b.jsxs)("form",{onSubmit:M,className:"bg-white w-full max-w-3xl rounded-lg p-6 shadow-lg overflow-auto max-h-[90vh]",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Edit Task"}),(0,b.jsx)("button",{type:"button",onClick:()=>{t(!1),v(null)},className:"text-gray-500",children:"Close"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,b.jsxs)("label",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-xs text-gray-600",children:"Title"}),(0,b.jsx)("input",{required:!0,value:F.title,onChange:a=>K({title:a.target.value}),className:"border px-3 py-2 rounded"})]}),(0,b.jsxs)("label",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-xs text-gray-600",children:"Category (id)"}),(0,b.jsx)("input",{value:F.category,onChange:a=>K({category:a.target.value}),className:"border px-3 py-2 rounded"})]}),(0,b.jsxs)("label",{className:"flex flex-col md:col-span-2",children:[(0,b.jsx)("span",{className:"text-xs text-gray-600",children:"Description"}),(0,b.jsx)("textarea",{value:F.description,onChange:a=>K({description:a.target.value}),className:"border px-3 py-2 rounded"})]}),(0,b.jsxs)("label",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-xs text-gray-600",children:"Assigned Employee IDs (comma separated)"}),(0,b.jsx)("input",{value:F.assignedEmployeeIds.join(","),onChange:a=>K({assignedEmployeeIds:a.target.value.split(",").map(a=>a.trim()).filter(Boolean)}),className:"border px-3 py-2 rounded"})]}),(0,b.jsxs)("label",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-xs text-gray-600",children:"Label IDs (comma separated)"}),(0,b.jsx)("input",{value:F.labelIds.join(","),onChange:a=>K({labelIds:a.target.value.split(",").map(a=>a.trim()).filter(Boolean)}),className:"border px-3 py-2 rounded"})]}),(0,b.jsxs)("label",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-xs text-gray-600",children:"Priority"}),(0,b.jsxs)("select",{value:F.priority,onChange:a=>K({priority:a.target.value}),className:"border px-3 py-2 rounded",children:[(0,b.jsx)("option",{value:"LOW",children:"LOW"}),(0,b.jsx)("option",{value:"MEDIUM",children:"MEDIUM"}),(0,b.jsx)("option",{value:"HIGH",children:"HIGH"}),(0,b.jsx)("option",{value:"URGENT",children:"URGENT"})]})]}),(0,b.jsxs)("label",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-xs text-gray-600",children:"Time Estimate (minutes)"}),(0,b.jsx)("input",{type:"number",value:F.timeEstimateMinutes,onChange:a=>K({timeEstimateMinutes:a.target.value}),className:"border px-3 py-2 rounded"})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:F.isPrivate,onChange:a=>K({isPrivate:a.target.checked})}),(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Private"})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:F.isDependent,onChange:a=>K({isDependent:a.target.checked})}),(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Is Dependent"})]}),(0,b.jsxs)("label",{className:"flex flex-col md:col-span-2",children:[(0,b.jsx)("span",{className:"text-xs text-gray-600",children:"Attach file (optional)"}),(0,b.jsx)("input",{type:"file",onChange:a=>K({taskFile:a.target.files?.[0]||null})})]})]}),(0,b.jsxs)("div",{className:"mt-4 flex items-center justify-end gap-3",children:[(0,b.jsx)("button",{type:"button",onClick:()=>{t(!1),v(null)},className:"px-4 py-2 rounded border",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",className:"px-4 py-2 rounded bg-blue-600 text-white",children:"Update"})]})]})}),(0,b.jsx)(i,{open:w,task:y,onClose:()=>{x(!1),z(null)}})]})}let l="https://6jnqmj85-80.inc1.devtunnels.ms",m=f.default.create({baseURL:l||"/",timeout:15e3});function n({projectId:a}){let[d,f]=(0,c.useState)(null),[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(!1),[k,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(null),w=async()=>{try{j(!0),n(null);let b=`${l}/projects/${a}`,c=await m.get(b);f(c),h(c?.assignedEmployees??[])}catch(a){n(a.message),f(null),h([])}finally{j(!1)}};(0,c.useEffect)(()=>{w()},[a]);let x=async()=>{let b=q.trim();if(!b)return alert("Enter employee IDs");let c=b.split(",").map(a=>a.trim());try{j(!0),n(null);let b=`${l}/api/projects/${a}/assign`;await m.post(b,{employeeIds:c}),p(!1),r(""),w()}catch(a){n(a.message)}finally{j(!1)}},y=g.filter(a=>{let b=s.toLowerCase();return a.name?.toLowerCase().includes(b)||a.employeeId.toLowerCase().includes(b)||a.designation?.toLowerCase().includes(b)});return(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Member"}),(0,b.jsx)("div",{className:"flex justify-between mb-4",children:(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("input",{type:"search",placeholder:"Search",className:"border px-3 py-2 rounded",value:s,onChange:a=>t(a.target.value)}),(0,b.jsx)("button",{onClick:w,className:"bg-gray-100 px-3 py-2 rounded",children:"Refresh"})]})}),i&&(0,b.jsx)("div",{className:"text-center py-5",children:"Loadingâ€¦"}),k&&(0,b.jsx)("div",{className:"p-3 bg-red-50 text-red-600 rounded mb-3",children:k}),!i&&(0,b.jsxs)("table",{className:"min-w-full text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-blue-50 text-gray-700 text-left",children:[(0,b.jsx)("th",{className:"px-4 py-3",children:"Name"}),(0,b.jsx)("th",{className:"px-4 py-3",children:"User Role"})]})}),(0,b.jsxs)("tbody",{children:[y.map(a=>(0,b.jsxs)("tr",{className:"border-b",children:[(0,b.jsxs)("td",{className:"px-4 py-4 flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center overflow-hidden",children:a.profileUrl?(0,b.jsx)("img",{src:a.profileUrl,className:"w-full h-full object-cover"}):(0,b.jsx)(e.UserIcon,{className:"w-6 h-6 text-gray-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.name}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a.designation??a.department})]})]}),(0,b.jsx)("td",{className:"px-4 py-4",children:(0,b.jsx)("span",{className:"ml-1",children:"Project Admin"})})]},a.employeeId)),0===y.length&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:3,className:"py-6 text-center text-gray-500",children:"No members found"})})]})]}),o&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:(0,b.jsxs)("div",{className:"bg-white p-6 rounded w-full max-w-md",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Add Project Members"}),(0,b.jsx)("input",{className:"border px-3 py-2 w-full rounded",placeholder:"EMP-015, EMP-010",value:q,onChange:a=>r(a.target.value)}),(0,b.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Example: EMP-015, EMP-010"}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 mt-4",children:[(0,b.jsx)("button",{className:"px-4 py-2 border rounded",onClick:()=>p(!1),children:"Cancel"}),(0,b.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:x,children:"Add"})]})]})})]})}function o({projectId:a,gatewayPath:d="/api/projects",authToken:e=null,mainBase:f}){let g=(f||"https://6jnqmj85-80.inc1.devtunnels.ms").replace(/\/$/,""),[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(0),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)({title:"",milestoneCost:"",status:"INCOMPLETE",summary:"",startDate:"",endDate:""}),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)(null),K=a=>{let b=String(a||"");return b.startsWith("http://")||b.startsWith("https://")?b:b.startsWith("/")?`${g}${b}`:`${g}/${b}`},L=(a={})=>{let b={...a};return e&&(b.Authorization=`Bearer ${e}`),b},M=async(a,b={},c=15e3)=>{let d=new AbortController,e=setTimeout(()=>d.abort(),c);try{let c={...b,signal:d.signal},f=await fetch(a,c);clearTimeout(e);let g=f.headers.get("content-type")||"",h=await f.text().catch(()=>"");if(!f.ok){if(g.includes("text/html")||h.trim().startsWith("<!DOCTYPE html"))throw Error(`HTTP ${f.status} ${f.statusText} â€” server returned HTML. Snippet: ${h.slice(0,300)}`);if(g.includes("application/json"))try{let a=JSON.parse(h||"{}");throw Error(`HTTP ${f.status} ${f.statusText} â€” ${JSON.stringify(a)}`)}catch{}throw Error(`HTTP ${f.status} ${f.statusText} ${h?"- "+h.slice(0,300):""}`)}if(g.includes("application/json"))return JSON.parse(h||"[]");return h}catch(a){if("AbortError"===a.name)throw Error("Request timed out");if("Failed to fetch"===a.message)throw Error("Network Error - check CORS / server availability");throw a}finally{clearTimeout(e)}},N=(0,c.useMemo)(()=>{if(null==a)return null;let b=String(a).trim();if(/{{\s*projectId\s*}}/.test(b))return"__INVALID_PLACEHOLDER__";let c=Number(b);return Number.isNaN(c)?"__INVALID_NUMBER__":c},[a]),O=async()=>{l(!0),n(null);try{if(null===N){n("projectId is required."),j([]),l(!1);return}if("__INVALID_PLACEHOLDER__"===N){n('projectId looks like a template placeholder ("{{projectId}}"). Pass a real numeric id.'),j([]),l(!1);return}if("__INVALID_NUMBER__"===N){n(`projectId "${a}" is not a valid number.`),j([]),l(!1);return}let b=K(`${d}/${N}/milestones`);console.info("[milestones] GET",b,"AuthPresent:",!!e);let c=await M(b,{method:"GET",headers:L({"Content-Type":"application/json"}),credentials:"same-origin"});Array.isArray(c)?j(c):c?.data&&Array.isArray(c.data)?j(c.data):c?.milestones&&Array.isArray(c.milestones)?j(c.milestones):(console.warn("Unexpected milestones response:",c),j([]),n("Unexpected response shape from server. See console."))}catch(a){console.error("fetchMilestones error:",a),j([]),n(a?.message||"Failed to load milestones")}finally{l(!1)}};(0,c.useEffect)(()=>{O()},[a,o]);let P=a=>"number"!=typeof a?"-":`$${a.toFixed(2)}`,Q=async()=>{B(!0),D(null);try{if(!E.title?.trim()){D("Title is required."),B(!1);return}if("number"!=typeof N){D("Invalid projectId."),B(!1);return}let a={title:E.title.trim(),milestoneCost:Number(E.milestoneCost||0),status:(E.status||"INCOMPLETE").toUpperCase(),summary:E.summary?.trim()||"",startDate:E.startDate?new Date(E.startDate).toISOString():null,endDate:E.endDate?new Date(E.endDate).toISOString():null},b=K(`${d}/${N}/milestones`);await M(b,{method:"POST",headers:L({"Content-Type":"application/json"}),credentials:"same-origin",body:JSON.stringify(a)}),r(!1),F({title:"",milestoneCost:"",status:"INCOMPLETE",summary:"",startDate:"",endDate:""}),p(a=>a+1)}catch(a){console.error("createMilestone error:",a),D(a?.message||"Failed to create milestone")}finally{B(!1)}},R=async()=>{B(!0),D(null);try{if(!y?.id){D("No milestone selected for update."),B(!1);return}if(!E.title?.trim()){D("Title is required."),B(!1);return}let a={title:E.title.trim(),milestoneCost:Number(E.milestoneCost||0),status:(E.status||"INCOMPLETE").toUpperCase(),summary:E.summary?.trim()||"",startDate:E.startDate?new Date(E.startDate).toISOString():null,endDate:E.endDate?new Date(E.endDate).toISOString():null},b=K(`${d}/${N}/milestones/${y.id}`);await M(b,{method:"PUT",headers:L({"Content-Type":"application/json"}),credentials:"same-origin",body:JSON.stringify(a)}),v(!1),z(null),p(a=>a+1)}catch(a){console.error("updateMilestone error:",a),D(a?.message||"Failed to update milestone")}finally{B(!1)}},S=async()=>{B(!0),D(null);try{if(!y?.id){D("No milestone selected for delete."),B(!1);return}let a=K(`${d}/${N}/milestones/${y.id}`);await M(a,{method:"DELETE",headers:L({"Content-Type":"application/json"}),credentials:"same-origin"}),x(!1),z(null),p(a=>a+1)}catch(a){console.error("deleteMilestone error:",a),D(a?.message||"Failed to delete milestone")}finally{B(!1)}};return(0,b.jsxs)("div",{className:"p-6 bg-white rounded shadow-sm border border-gray-200",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Milestones"}),(0,b.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,b.jsx)("div",{className:"flex items-center gap-3",children:(0,b.jsx)("button",{onClick:()=>p(a=>a+1),className:"bg-gray-100 px-3 py-2 rounded text-sm border hover:bg-gray-200",title:"Refresh",children:"Refresh"})})}),(0,b.jsxs)("div",{className:"rounded-md border overflow-hidden",children:[(0,b.jsx)("div",{className:"bg-blue-50 text-gray-700 text-sm",children:(0,b.jsxs)("div",{className:"grid grid-cols-12 gap-0 items-left px-4 py-3",children:[(0,b.jsx)("div",{className:"col-span-4 font-medium",children:"Title"}),(0,b.jsx)("div",{className:"col-span-3 font-medium",children:"Milestone Cost"}),(0,b.jsx)("div",{className:"col-span-2 font-medium",children:"Task Count"}),(0,b.jsx)("div",{className:"col-span-3 font-medium",children:"Status"})]})}),k?(0,b.jsx)("div",{className:"p-6 text-center text-gray-500",children:"Loading milestones..."}):m?(0,b.jsx)("div",{className:"p-6 text-center text-red-600",children:m}):0===i.length?(0,b.jsx)("div",{className:"p-6 text-center text-gray-500",children:"No milestones found"}):(0,b.jsx)("div",{children:i.map(a=>(0,b.jsxs)("div",{className:"grid grid-cols-12 gap-0 items-center px-4 py-4 border-t",children:[(0,b.jsx)("div",{className:"col-span-4 text-sm",children:a.title}),(0,b.jsx)("div",{className:"col-span-3 text-sm",children:P(a.milestoneCost)}),(0,b.jsx)("div",{className:"col-span-2 text-sm",children:String(a.taskCount??"00").padStart(2,"0")}),(0,b.jsx)("div",{className:"col-span-3 text-sm",children:(0,b.jsx)("div",{className:"relative inline-block",children:(0,b.jsx)("button",{className:`inline-flex items-center justify-between w-full gap-2 px-3 py-1 rounded-md  text-sm bg-white ${(a=>{let b=String(a||"").toLowerCase();return"complete"===b||"completed"===b})(a.status)?"border-green-200":"border-gray-200"}`,title:"Change status","aria-haspopup":"true","aria-expanded":I===a.id,children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:`w-2 h-2 rounded-full ${(a=>{let b=String(a||"").toLowerCase();return"complete"===b||"completed"===b||"COMPLETED"===String(a)?"bg-green-600":"bg-red-600"})(a.status)}`}),(0,b.jsx)("span",{className:"uppercase",children:String(a.status||"INCOMPLETE").toUpperCase()})]})})})})]},a.id??Math.random()))}),(0,b.jsxs)("div",{className:"px-4 py-3 border-t bg-gray-50 flex items-center justify-between text-sm text-gray-600",children:[(0,b.jsxs)("div",{children:["Result per page - ",i.length?i.length:0]}),(0,b.jsx)("div",{children:"Page 1 of 1"})]})]}),q&&(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-12 px-4",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:()=>r(!1)}),(0,b.jsxs)("div",{className:"relative bg-white w-full max-w-3xl rounded-lg shadow-xl overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Create Milestone"}),(0,b.jsx)("button",{onClick:()=>r(!1),className:"p-2 rounded hover:bg-gray-100",children:(0,b.jsx)(h.XMarkIcon,{className:"w-6 h-6 text-gray-500"})})]}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"md:col-span-1",children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Milestone Title *"}),(0,b.jsx)("input",{type:"text",value:E.title,onChange:a=>F(b=>({...b,title:a.target.value})),className:"w-full border rounded px-3 py-2",placeholder:"Project Closure"})]}),(0,b.jsxs)("div",{className:"md:col-span-1",children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Milestone Cost"}),(0,b.jsx)("input",{type:"number",value:E.milestoneCost,onChange:a=>F(b=>({...b,milestoneCost:a.target.value})),className:"w-full border rounded px-3 py-2",placeholder:"0.00",min:0})]}),(0,b.jsxs)("div",{className:"md:col-span-1",children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Status"}),(0,b.jsxs)("select",{value:E.status,onChange:a=>F(b=>({...b,status:a.target.value})),className:"w-full border rounded px-3 py-2",children:[(0,b.jsx)("option",{value:"INCOMPLETE",children:"INCOMPLETE"}),(0,b.jsx)("option",{value:"COMPLETED",children:"COMPLETED"})]})]}),(0,b.jsxs)("div",{className:"md:col-span-3",children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Milestone Summary *"}),(0,b.jsx)("textarea",{value:E.summary,onChange:a=>F(b=>({...b,summary:a.target.value})),className:"w-full border rounded px-3 py-2 min-h-[100px]",placeholder:"Conduct a project review to evaluate overall success and lessons learned..."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Start Date"}),(0,b.jsx)("input",{type:"date",value:E.startDate,onChange:a=>F(b=>({...b,startDate:a.target.value})),className:"w-full border rounded px-3 py-2"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"End Date"}),(0,b.jsx)("input",{type:"date",value:E.endDate,onChange:a=>F(b=>({...b,endDate:a.target.value})),className:"w-full border rounded px-3 py-2"})]})]}),C&&(0,b.jsx)("div",{className:"mt-4 text-sm text-red-600",children:C}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-6 mt-6 pb-6",children:[(0,b.jsx)("button",{onClick:()=>r(!1),className:"px-6 py-2 rounded-md border text-blue-600",disabled:A,children:"Cancel"}),(0,b.jsx)("button",{onClick:Q,className:"px-6 py-2 rounded-md bg-blue-600 text-white",disabled:A,children:A?"Saving...":"Save"})]})]})]})]}),s&&y&&(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-12 px-4",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:()=>t(!1)}),(0,b.jsxs)("div",{className:"relative bg-white w-full max-w-2xl rounded-lg shadow-xl overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Milestone Details"}),(0,b.jsx)("button",{onClick:()=>t(!1),className:"p-2 rounded hover:bg-gray-100",children:(0,b.jsx)(h.XMarkIcon,{className:"w-6 h-6 text-gray-500"})})]}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{children:"Title:"})," ",y.title]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{children:"Milestone Cost:"})," ",P(y.milestoneCost)]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{children:"Task Count:"})," ",y.taskCount??0]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{children:"Status:"})," ",String(y.status??"INCOMPLETE").toUpperCase()]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{children:"Summary:"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded text-sm",children:y.summary??"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{children:"Start Date:"})," ",y.startDate?new Date(y.startDate).toLocaleDateString():"-"]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{children:"End Date:"})," ",y.endDate?new Date(y.endDate).toLocaleDateString():"-"]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{children:"Created At:"})," ",y.createdAt?new Date(y.createdAt).toLocaleString():"-"]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{children:"Raw:"})," ",(0,b.jsx)("pre",{className:"text-xs bg-gray-50 p-2 rounded",children:JSON.stringify(y,null,2)})]})]}),(0,b.jsx)("div",{className:"flex items-center justify-center gap-6 mt-6 pb-6",children:(0,b.jsx)("button",{onClick:()=>t(!1),className:"px-6 py-2 rounded-md border text-blue-600",children:"Close"})})]})]})]}),u&&y&&(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-12 px-4",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:()=>v(!1)}),(0,b.jsxs)("div",{className:"relative bg-white w-full max-w-3xl rounded-lg shadow-xl overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Edit Milestone"}),(0,b.jsx)("button",{onClick:()=>v(!1),className:"p-2 rounded hover:bg-gray-100",children:(0,b.jsx)(h.XMarkIcon,{className:"w-6 h-6 text-gray-500"})})]}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"md:col-span-1",children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Milestone Title *"}),(0,b.jsx)("input",{type:"text",value:E.title,onChange:a=>F(b=>({...b,title:a.target.value})),className:"w-full border rounded px-3 py-2"})]}),(0,b.jsxs)("div",{className:"md:col-span-1",children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Milestone Cost"}),(0,b.jsx)("input",{type:"number",value:E.milestoneCost,onChange:a=>F(b=>({...b,milestoneCost:a.target.value})),className:"w-full border rounded px-3 py-2",min:0})]}),(0,b.jsxs)("div",{className:"md:col-span-1",children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Status"}),(0,b.jsxs)("select",{value:E.status,onChange:a=>F(b=>({...b,status:a.target.value})),className:"w-full border rounded px-3 py-2",children:[(0,b.jsx)("option",{value:"INCOMPLETE",children:"INCOMPLETE"}),(0,b.jsx)("option",{value:"COMPLETED",children:"COMPLETED"})]})]}),(0,b.jsxs)("div",{className:"md:col-span-3",children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Milestone Summary *"}),(0,b.jsx)("textarea",{value:E.summary,onChange:a=>F(b=>({...b,summary:a.target.value})),className:"w-full border rounded px-3 py-2 min-h-[100px]"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Start Date"}),(0,b.jsx)("input",{type:"date",value:E.startDate,onChange:a=>F(b=>({...b,startDate:a.target.value})),className:"w-full border rounded px-3 py-2"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"End Date"}),(0,b.jsx)("input",{type:"date",value:E.endDate,onChange:a=>F(b=>({...b,endDate:a.target.value})),className:"w-full border rounded px-3 py-2"})]})]}),C&&(0,b.jsx)("div",{className:"mt-4 text-sm text-red-600",children:C}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-6 mt-6 pb-6",children:[(0,b.jsx)("button",{onClick:()=>v(!1),className:"px-6 py-2 rounded-md border text-blue-600",disabled:A,children:"Cancel"}),(0,b.jsx)("button",{onClick:R,className:"px-6 py-2 rounded-md bg-blue-600 text-white",disabled:A,children:A?"Saving...":"Save"})]})]})]})]}),w&&y&&(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-12 px-4",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:()=>x(!1)}),(0,b.jsx)("div",{className:"relative bg-white w-full max-w-md rounded-lg shadow-xl overflow-hidden",children:(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Delete Milestone"}),(0,b.jsxs)("p",{className:"text-sm text-gray-700",children:["Are you sure you want to delete milestone ",(0,b.jsx)("strong",{children:y.title})," ? This action cannot be undone."]}),C&&(0,b.jsx)("div",{className:"mt-4 text-sm text-red-600",children:C}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-4 mt-6",children:[(0,b.jsx)("button",{className:"px-4 py-2 rounded border",onClick:()=>x(!1),disabled:A,children:"Cancel"}),(0,b.jsx)("button",{className:"px-4 py-2 rounded bg-red-600 text-white",onClick:S,disabled:A,children:A?"Deleting...":"Delete"})]})]})})]})]})}m.interceptors.request.use(a=>{let b=localStorage.getItem("accessToken");return b&&(a.headers.Authorization=`Bearer ${b}`),a}),m.interceptors.response.use(a=>a.data,a=>Promise.reject(Error(a?.response?.data?.message||a?.response?.statusText||a.message||"Request failed")));let p="https://6jnqmj85-80.inc1.devtunnels.ms",q=a=>{if(!a)return null;let b=String(a).replace(/[^0-9a-fA-F]/g,"");return b.length>=6?`#${b.slice(0,6)}`:null},r=a=>{let b=a.toLowerCase();return b.includes("complete")||b.includes("complete")?"#10b981":b.includes("to-do")||b.includes("todo")||b.includes("to do")?"#f59e0b":b.includes("doing")?"#2563eb":b.includes("incomplete")?"#ef4444":b.includes("wait")||b.includes("waiting")?"#9ca3af":"#6b7280"},s=(a,b,c,d)=>{let e=(d-90)*Math.PI/180;return{x:a+c*Math.cos(e),y:b+c*Math.sin(e)}};function t({projectId:a}){let[d,e]=(0,c.useState)([]),[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(null),m=localStorage.getItem("accessToken")||"";(0,c.useEffect)(()=>{let b=!0;return(async()=>{j(!0),l(null);try{let c=`${p}/status`,[d,g]=await Promise.all([f.default.get(c,{headers:{Authorization:m?`Bearer ${m}`:""}}),f.default.get(`${p}/projects/${a}/tasks`,{headers:{Authorization:m?`Bearer ${m}`:""}})]);b&&(e(Array.isArray(d.data)?d.data:[]),h(Array.isArray(g.data)?g.data:[]))}catch(a){console.error("Failed to load task statistics:",a?.response?.data??a?.message??a),b&&(l("Failed to load task statistics"),e([]),h([]))}finally{b&&j(!1)}})(),()=>{b=!1}},[a,m]);let n=(0,c.useMemo)(()=>{let a=new Map;return d.forEach(b=>a.set(b.id,{status:b,count:0})),g.forEach(b=>{let c=b.taskStageId??b.taskStage?.id??null;if(null!=c){let b=Array.from(a.keys()).find(a=>a===c);if(void 0!==b){let c=a.get(b);c.count+=1,a.set(b,c);return}}let e=b.taskStage?.name??"",f=d.find(a=>e&&String(a.name).toLowerCase().includes(e.toLowerCase()));if(f){let b=a.get(f.id)??{status:f,count:0};b.count+=1,a.set(f.id,b);return}let g="unknown";a.has(g)||a.set(g,{status:{id:0,name:"Other",labelColor:null},count:0});let h=a.get(g);h.count+=1,a.set(g,h)}),Array.from(a.values())},[d,g]),o=n.reduce((a,b)=>a+b.count,0)||0,t=0,u=n.filter(a=>a.count>0).map(a=>{let b=0===o?0:a.count/o,c=t;t+=360*b;let d=q(a.status.labelColor)||r(a.status.name);return{...a,start:c,end:t,color:d}});return(0,b.jsx)("div",{children:i?(0,b.jsx)("div",{className:"py-6 text-center text-gray-500",children:"Loading task statistics..."}):k?(0,b.jsx)("div",{className:"py-6 text-center text-red-500",children:k}):(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsx)("div",{className:"flex items-center",children:(0,b.jsxs)("svg",{viewBox:"0 0 100 100",width:"180",height:"180",className:"flex-shrink-0",children:[0===u.length&&(0,b.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:"#e5e7eb"}),u.map((a,c)=>(0,b.jsx)("path",{d:((a,b,c,d,e)=>{let f=s(50,50,40,e),g=s(50,50,40,d),h=e-d<=180?"0":"1";return`M ${a} ${b} L ${f.x} ${f.y} A ${c} ${c} 0 ${h} 0 ${g.x} ${g.y} Z`})(50,50,40,a.start,a.end),fill:a.color,stroke:"#ffffff",strokeWidth:"0.5"},c))]})}),(0,b.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,b.jsx)("ul",{className:"space-y-3 text-sm",children:n.map((a,c)=>{let d=q(a.status.labelColor)||r(a.status.name);return(0,b.jsxs)("li",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{style:{width:18,height:12,background:d},className:"rounded-sm inline-block"}),(0,b.jsx)("span",{className:"flex-1",children:a.status.name}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:a.count})]},c)})}),(0,b.jsxs)("div",{className:"mt-4 text-xs text-gray-500",children:["Total tasks: ",o]})]})]})})}function u(){let{id:a}=(0,d.useParams)()||{},[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(!0),[l,m]=(0,c.useState)("overview"),[q,r]=(0,c.useState)(null),[s,u]=(0,c.useState)(!1),v=async b=>{try{let c=await fetch(`/api/work/project/${a}`,{headers:b?{Authorization:`Bearer ${b}`}:void 0});if(!c.ok)throw Error("Failed to fetch");let d=await c.json();h(Array.isArray(d)?d[0]:d)}catch(b){h({id:Number(a||1),shortCode:"PRJ-001",name:"Project Name",category:"Website",startDate:"2025-08-02",deadline:"2025-09-12",client:{name:"John Doe",profilePictureUrl:"https://i.pravatar.cc/80?img=5"},summary:"Short description of the project and goals.",currency:"$",budget:0,hoursEstimate:40,assignedEmployees:[{employeeId:"1",name:"Aman Sharma",designation:"Developer",department:"Engineering"},{employeeId:"2",name:"Riya Singh",designation:"Designer",department:"Design"}],progressPercent:76,totalTimeLoggedMinutes:300,createdBy:"Admin",createdAt:new Date().toISOString(),pinned:!1,archived:!1})}finally{j(!1)}},w=async b=>{if(a){u(!0);try{let c=b?{Authorization:`Bearer ${b}`}:void 0,d=`${p}/projects/${a}/metrics`,e=await f.default.get(d,{headers:c});r(e.data??null)}catch(a){console.error("Failed to fetch metrics:",a),r(null)}finally{u(!1)}}};if((0,c.useEffect)(()=>{let a=localStorage.getItem("accessToken")||"";v(a),w(a)},[a]),i)return(0,b.jsx)("p",{className:"p-8 text-center",children:"Loading project..."});if(!g)return(0,b.jsx)("p",{className:"p-8 text-center text-red-600",children:"Project not found"});let x=Math.floor(((q?.totalTimeLoggedMinutes??g.totalTimeLoggedMinutes??0)||0)/60),y=q?.currency??g.currency??"$",z="number"==typeof q?.earning?q.earning:"string"==typeof q?.earning?Number(q.earning):g.budget??0;"number"==typeof q?.expenses&&q.expenses,"number"==typeof q?.profit&&q.profit;let A=q?.hoursEstimate??g.hoursEstimate??0,B=A>0?Math.min(100,Math.round(x/A*100)):0,C=A>0?Math.min(100,Math.round(A/Math.max(A,x||1)*100)):50,D=Math.min(100,Math.round(x/Math.max(A,x||1)*100));return(0,b.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsx)("h1",{className:"text-3xl font-semibold text-gray-800",children:g.name})}),(0,b.jsxs)("div",{className:"bg-white rounded-t-lg shadow-sm border border-b-0",children:[(0,b.jsx)("div",{className:"px-4",children:(0,b.jsx)("nav",{className:"flex items-center gap-6 h-14",children:[{key:"overview",label:"Overview"}].map(a=>{let c=l===a.key;return(0,b.jsx)("button",{onClick:()=>m(a.key),className:`py-3 text-sm font-medium ${c?"text-blue-600":"text-gray-600"}`,"aria-current":c?"page":void 0,children:(0,b.jsxs)("span",{className:"relative inline-block",children:[a.label,c&&(0,b.jsx)("span",{className:"absolute -bottom-5 left-0 w-full h-0.5 bg-blue-400 rounded"})]})},a.key)})})}),(0,b.jsx)("div",{className:"h-1",children:(0,b.jsx)("div",{className:"border-t-2 border-blue-300"})})]}),(0,b.jsxs)("div",{className:"mt-6 space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsx)("div",{className:"lg:col-span-2 bg-white rounded-xl border border-gray-200 p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between gap-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-6",children:[(0,b.jsx)("div",{className:"w-36 h-20",children:(0,b.jsxs)("svg",{viewBox:"0 0 100 50",className:"w-full h-full",children:[(0,b.jsx)("path",{d:"M5 50 A45 45 0 0 1 95 50",fill:"none",stroke:"#e6e6e6",strokeWidth:"10",strokeLinecap:"round"}),(0,b.jsx)("path",{d:"M5 50 A45 45 0 0 1 75 18",fill:"none",stroke:"#f5c518",strokeWidth:"10",strokeLinecap:"round"}),(0,b.jsxs)("text",{x:"50",y:"40",fontSize:"8",textAnchor:"middle",fill:"#374151",children:[g.progressPercent,"%"]})]})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Start Date"}),(0,b.jsx)("p",{className:"font-medium",children:new Date(g.startDate).toLocaleDateString()})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"End Date"}),(0,b.jsx)("p",{className:"font-medium",children:g.noDeadline?"No Deadline":g.deadline?new Date(g.deadline).toLocaleDateString():"TBD"})]})]}),(0,b.jsx)("div",{className:"hidden lg:block max-w-xs text-gray-600",children:g.summary?(0,b.jsx)("p",{children:g.summary}):(0,b.jsx)("p",{className:"text-sm text-gray-400",children:"No summary available"})})]})}),(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-4 flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center",children:g.client?.profilePictureUrl?(0,b.jsx)("img",{src:g.client.profilePictureUrl,alt:"client",className:"w-full h-full object-cover"}):(0,b.jsx)(e.UserIcon,{className:"w-8 h-8 text-gray-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Client"}),(0,b.jsx)("p",{className:"font-medium",children:g.client?.name||`Client ID: ${g.client?.name??""}`}),(0,b.jsx)("p",{className:"text-xs text-gray-400",children:"Qurilo Solutions"})]})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:(0,b.jsxs)("div",{className:"lg:col-span-2 bg-white rounded-xl border border-gray-200 p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Task Statistics"}),(0,b.jsx)(t,{projectId:g.id}),(0,b.jsxs)("div",{className:"mt-6 bg-white rounded border border-gray-200 p-4 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("h4",{className:"text-sm font-medium",children:"Hours Logged"}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:s?"Loading...":`${x} hrs`})]}),(0,b.jsxs)("div",{className:"h-40",children:[(0,b.jsxs)("div",{className:"flex items-end gap-8 h-full",children:[(0,b.jsxs)("div",{className:"flex-1 text-center",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 mb-2",children:"Planned"}),(0,b.jsx)("div",{className:"h-28 flex items-end justify-center",children:(0,b.jsx)("div",{className:"w-24 rounded-t-md",style:{height:`${Math.max(30,C)}%`,background:"#16a34a"},children:(0,b.jsxs)("div",{className:"text-xs text-white text-center py-1",children:[A," hrs"]})})})]}),(0,b.jsxs)("div",{className:"flex-1 text-center",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 mb-2",children:"Actual"}),(0,b.jsx)("div",{className:"h-28 flex items-end justify-center",children:(0,b.jsx)("div",{className:"w-24 rounded-t-md",style:{height:`${Math.max(30,D)}%`,background:"#ef4444"},children:(0,b.jsxs)("div",{className:"text-xs text-white text-center py-1",children:[x," hrs"]})})})]})]}),(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)("div",{className:"h-2 bg-gray-200 rounded overflow-hidden",children:(0,b.jsx)("div",{className:"h-2 rounded",style:{width:`${B}%`,background:B>100?"#ef4444":"#16a34a"}})}),(0,b.jsxs)("div",{className:"mt-2 text-xs text-gray-500 flex justify-between",children:[(0,b.jsxs)("span",{children:[B,"% of estimate"]}),(0,b.jsxs)("span",{children:[y,(z??0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]})]})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 bg-white rounded-xl border border-gray-200 p-4",children:[(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsx)("h4",{className:"text-lg font-medium",children:"Assigned Employees"})}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:g.assignedEmployees&&g.assignedEmployees.length?g.assignedEmployees.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center overflow-hidden",children:a.profileUrl?(0,b.jsx)("img",{src:a.profileUrl,alt:a.name,className:"w-full h-full object-cover"}):(0,b.jsx)(e.UserIcon,{className:"w-5 h-5 text-gray-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-sm",children:a.name}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:[a.designation?a.designation+", ":"",a.department]})]})]},a.employeeId)):(0,b.jsx)("p",{className:"text-gray-500 text-center py-6",children:"No employees assigned"})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[(0,b.jsx)("h4",{className:"text-lg font-medium mb-2",children:"Project Summary"}),(0,b.jsxs)("div",{className:"text-xs text-gray-500 space-y-2",children:[(0,b.jsxs)("div",{children:["Created by: ",g.summary]}),(0,b.jsxs)("div",{children:["Created on: ",new Date(g.createdAt||"").toLocaleDateString()]}),g.pinned&&(0,b.jsxs)("div",{children:["Pinned on: ",new Date(g.pinnedAt||"").toLocaleDateString()]}),g.archived&&(0,b.jsxs)("div",{children:["Archived on: ",new Date(g.archivedAt||"").toLocaleDateString()]})]})]})]})]}),g&&(0,b.jsx)("div",{className:"mt-6",children:(0,b.jsx)(k,{projectId:g.id})}),(0,b.jsxs)("div",{className:"mt-6 grid grid-cols-1 lg:grid-rows-2 gap-2",children:[(0,b.jsx)(n,{projectId:g.id}),(0,b.jsx)(o,{projectId:g.id})]})]})})}}];

//# sourceMappingURL=src_app_%28employee%29_employees_work_roadmap_%5Bid%5D_page_tsx_4ce3e2e6._.js.map