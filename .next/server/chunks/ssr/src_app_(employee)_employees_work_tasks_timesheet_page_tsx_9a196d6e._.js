module.exports=[816381,a=>{"use strict";a.s(["default",()=>L],816381);var b=a.i(187924),c=a.i(572131),d=a.i(699570),e=a.i(580701),f=a.i(613749),g=a.i(50522),h=a.i(587532),i=a.i(633508),j=a.i(866718);let k=({employeeFilter:a,setEmployeeFilter:c,employeeOptions:d,getEmployeeLabel:f,onOpenFiltersDrawer:g})=>(0,b.jsxs)("div",{className:"bg-white rounded-lg border p-3 mb-4 flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Duration"}),(0,b.jsx)(j.Input,{placeholder:"Start Date to End Date",className:"w-64"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Employee"}),(0,b.jsxs)(e.Select,{value:a,onValueChange:a=>c(a),children:[(0,b.jsx)(e.SelectTrigger,{className:"w-40",children:(0,b.jsx)(e.SelectValue,{placeholder:"All"})}),(0,b.jsxs)(e.SelectContent,{children:[(0,b.jsx)(e.SelectItem,{value:"All",children:"All"}),d.slice(1).map(a=>(0,b.jsx)(e.SelectItem,{value:a,children:f(a)},a))]})]})]}),(0,b.jsx)("div",{className:"ml-auto flex items-center gap-4",children:(0,b.jsxs)("button",{onClick:g,className:"flex items-center gap-2 text-sm text-gray-600 hover:text-gray-800",children:[(0,b.jsx)(h.Search,{className:"w-4 h-4"})," Filters"]})})]});var l=a.i(367329),m=a.i(941675);let n=({searchInput:a,setSearchInput:c,setSearchQuery:e,setCurrentPage:f,viewMode:g,setViewMode:i,showCalendarModal:k,setShowCalendarModal:n,openLogForm:o})=>(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("div",{children:(0,b.jsx)(d.Button,{className:"bg-blue-600 text-white",onClick:o,children:"+ Log Time"})}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 border rounded px-2 py-1 bg-white",children:[(0,b.jsx)(h.Search,{className:"w-4 h-4 text-gray-400"}),(0,b.jsx)(j.Input,{placeholder:"Search",value:a,onChange:a=>c(a.target.value),onKeyDown:b=>{"Enter"===b.key&&(e(a),f(()=>1))},className:"border-0 bg-transparent focus-visible:ring-0"})]}),(0,b.jsxs)("div",{className:"flex items-center bg-white border rounded-lg overflow-hidden",children:[(0,b.jsx)("button",{onClick:()=>{let a=document.querySelector('input[placeholder="Search"]');a&&a.focus()},className:"px-3 py-2 hover:bg-gray-50",title:"Search",children:(0,b.jsx)(h.Search,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>i("list"),className:`px-3 py-2 hover:bg-gray-50 ${"list"===g?"bg-gray-100":""}`,title:"List view",children:(0,b.jsx)(l.List,{className:"w-4 h-4"})}),(0,b.jsxs)("button",{onClick:()=>{i("weekly")},"aria-pressed":"weekly"===g,title:"Weekly calendar",className:`relative px-3 py-2 hover:bg-gray-50 ${"weekly"===g?"bg-violet-600 text-white":""}`,children:[(0,b.jsx)(m.Calendar,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:`absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center text-xs font-semibold leading-none
                ${"weekly"===g?"bg-white text-violet-600":"bg-violet-600 text-white"}`,"aria-hidden":"true",children:"7"})]}),(0,b.jsx)("button",{onClick:()=>n(!0),className:`px-3 py-2 hover:bg-gray-50 ${k?"ring-2 ring-indigo-300":""}`,title:"Open calendar view",children:(0,b.jsx)(m.Calendar,{className:"w-4 h-4 text-gray-600"})}),(0,b.jsx)("button",{onClick:()=>i("TimesheetSummary"),className:`px-3 py-2 hover:bg-gray-50 ${"TimesheetSummary"===g?"bg-violet-600 text-white":""}`,title:"User",children:"S"})]})]})]});var o=a.i(177156),p=a.i(510448),q=a.i(781560),r=a.i(879360);let s=({t:a,openMenuId:c,onToggleMenu:d,onCloseMenu:e,onView:f,onEdit:g,onDelete:h,fmtDateTime:i})=>{let j=a.employees&&a.employees.length>0?a.employees[0]:void 0,k=j?.profileUrl??"/_next/static/media/avatar-placeholder.7b9f2b3a.jpg";return(0,b.jsxs)("tr",{className:"even:bg-white odd:bg-white border-t",children:[(0,b.jsx)("td",{className:"py-4 px-4 text-sm text-gray-700 border-r align-top",children:a.projectShortCode??"—"}),(0,b.jsxs)("td",{className:"py-4 px-4 border-r align-top",children:[(0,b.jsxs)("div",{className:"text-sm font-medium",children:["Task ",a.taskId??"—"]}),(0,b.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:a.memo??""})]}),(0,b.jsx)("td",{className:"py-4 px-4 w-48 border-r align-top",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full overflow-hidden",children:(0,b.jsx)("img",{src:k,alt:j?.name??"employee",className:"w-full h-full object-cover"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-800",children:j?.name??a.employeeId??"—"}),(0,b.jsx)("div",{className:"text-xs text-gray-400",children:j?.designation??j?.department??""})]})]})}),(0,b.jsx)("td",{className:"py-4 px-4 border-r align-top text-sm text-gray-600",children:i(a.startDate,a.startTime)}),(0,b.jsx)("td",{className:"py-4 px-4 border-r align-top text-sm text-gray-600",children:i(a.endDate,a.endTime)}),(0,b.jsxs)("td",{className:"py-4 px-4 border-r align-top text-sm text-gray-700",children:[a.durationHours??0,"h"]}),(0,b.jsx)("td",{className:"py-4 px-4 align-top text-right",children:(0,b.jsxs)("div",{className:"inline-flex items-center relative",children:[(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),"number"==typeof a.id&&d(a.id)},className:"p-2 rounded hover:bg-gray-100",title:"Actions","aria-expanded":c===a.id,children:(0,b.jsx)(r.MoreVertical,{className:"h-5 w-5 text-gray-600"})}),c===a.id&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{onClick:e,className:"fixed inset-0 z-[10005]"}),(0,b.jsx)("div",{className:"absolute right-0 top-8 z-[10010] w-44 bg-white rounded-md border shadow-lg",children:(0,b.jsxs)("div",{className:"p-2",children:[(0,b.jsxs)("button",{onClick:()=>f(a),className:"w-full flex items-center gap-3 px-3 py-2 rounded hover:bg-gray-50 text-sm text-gray-700",children:[(0,b.jsx)(o.Eye,{className:"w-4 h-4"}),(0,b.jsx)("span",{children:"View"})]}),(0,b.jsxs)("button",{onClick:()=>g(a),className:"w-full flex items-center gap-3 px-3 py-2 rounded hover:bg-gray-50 text-sm text-gray-700",children:[(0,b.jsx)(p.Edit2,{className:"w-4 h-4"}),(0,b.jsx)("span",{children:"Edit"})]}),(0,b.jsxs)("button",{onClick:()=>h(a),className:"w-full flex items-center gap-3 px-3 py-2 rounded hover:bg-gray-50 text-sm text-red-600",children:[(0,b.jsx)(q.Trash2,{className:"w-4 h-4 text-red-600"}),(0,b.jsx)("span",{children:"Delete"})]})]})})]})]})})]},a.id)};var t=a.i(960702),u=a.i(523312),v=a.i(546842);let w="https://6jnqmj85-80.inc1.devtunnels.ms",x=["Mon","Tue","Wed","Thurs","Fri","Sat","Sun"],y=["January","February","March","April","May","June","July","August","September","October","November","December"],z=({open:a,onClose:d,apiBaseUrl:e=w,authToken:i=null})=>{let j=(0,c.useRef)(null),[k,n]=(0,c.useState)([{id:"r-0",taskId:"",taskLabel:"",hours:Array(7).fill(0)}]),o=D(new Date),[p,q]=(0,c.useState)(E(o)),[r,s]=(0,c.useState)(C(o)),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(null),[B,F]=(0,c.useState)([]),[G,H]=(0,c.useState)(!1);function I(){try{let a=localStorage.getItem("accessToken");if(a&&""!==a.trim())return a.trim()}catch{}return i??null}async function J(){H(!0);let a=I();try{let b=await fetch(`${e}/me/tasks`,{headers:a?{Authorization:`Bearer ${a}`}:{}});if(!b.ok)throw Error("Failed to fetch tasks");let c=await b.json();F(c.map(a=>({id:a.id,title:a.title,projectShortCode:a.projectShortCode})))}catch(a){}finally{H(!1)}}async function K(){y(!0),A("");let a=I(),b={"Content-Type":"application/json"};a&&(b.Authorization=`Bearer ${a}`);try{for(let a of k){if(!a.taskId)continue;let c={taskId:Number(a.taskId),days:p.map((b,c)=>({date:b.iso,hours:Number(a.hours[c]||0)})).filter(a=>a.hours>0)};0!==c.days.length&&await fetch(`${e}/timesheets/weekly`,{method:"POST",headers:b,body:JSON.stringify(c)})}A("Saved successfully.")}catch(a){A("Save failed.")}finally{y(!1)}}return(0,c.useEffect)(()=>{J()},[]),(0,b.jsxs)("div",{className:"w-full bg-white border rounded-md shadow-sm p-6",children:[(0,b.jsx)("input",{type:"date",ref:j,className:"hidden",onChange:function(a){let b=new Date(a.target.value);if(isNaN(b.getTime()))return;let c=D(b);q(E(c)),s(C(c))}}),(0,b.jsxs)("header",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h1",{className:"text-xl font-semibold",children:"Weekly Timesheet"}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("button",{className:"w-9 h-9 rounded-full border flex items-center justify-center",children:(0,b.jsx)(h.Search,{className:"w-4 h-4"})}),(0,b.jsxs)("div",{className:"flex items-center rounded-md border bg-white overflow-hidden",children:[(0,b.jsx)("button",{className:"px-3 h-9 border-r",children:(0,b.jsx)(l.List,{className:"w-4 h-4"})}),(0,b.jsx)("button",{className:"px-3 h-9 bg-indigo-500 text-white",children:(0,b.jsx)(t.CalendarDays,{className:"w-4 h-4"})}),(0,b.jsx)("button",{className:"px-3 h-9 border-l",children:(0,b.jsx)(m.Calendar,{className:"w-4 h-4"})})]}),(0,b.jsx)("button",{className:"w-9 h-9 rounded-full border flex items-center justify-center",children:(0,b.jsx)(u.Bell,{className:"w-4 h-4"})}),(0,b.jsx)("div",{className:"w-9 h-9 rounded-full border bg-gray-100 flex items-center justify-center",children:(0,b.jsx)(v.User,{className:"w-4 h-4"})})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,b.jsx)("span",{className:"w-16 text-sm",children:"Week"}),(0,b.jsxs)("div",{onClick:function(){j.current?.showPicker?.()},className:"flex items-center border rounded-md bg-white cursor-pointer",children:[(0,b.jsx)("button",{className:"h-9 px-3 border-r",children:(0,b.jsx)(f.ChevronLeft,{className:"w-4 h-4"})}),(0,b.jsx)("div",{className:"px-4 text-sm min-w-[160px] text-center",children:r}),(0,b.jsx)("button",{className:"h-9 px-3 border-l",children:(0,b.jsx)(g.ChevronRight,{className:"w-4 h-4"})})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-md border shadow-sm",children:[(0,b.jsx)("div",{className:"bg-[#e8f0ff] border-b",children:(0,b.jsxs)("div",{className:"grid grid-cols-[180px_repeat(7,1fr)]",children:[(0,b.jsx)("div",{className:"px-4 py-3 text-xs font-medium",children:"Task"}),p.map(a=>(0,b.jsxs)("div",{className:"px-2 py-2 text-center border-l",children:[(0,b.jsx)("div",{className:"text-sm font-semibold",children:a.date}),(0,b.jsx)("div",{className:"text-[10px]",children:a.month}),(0,b.jsx)("div",{className:"text-[10px] text-gray-500",children:a.label})]},a.iso))]})}),k.map((a,c)=>(0,b.jsx)("div",{className:"border-b",children:(0,b.jsxs)("div",{className:"grid grid-cols-[180px_repeat(7,1fr)]",children:[(0,b.jsx)("div",{className:"px-4 py-3 border-r",children:(0,b.jsxs)("select",{className:"w-full border rounded-md px-3 py-2 text-sm",value:a.taskId,onChange:a=>(function(a,b){let c=B.find(a=>String(a.id)===b),d=c?`${c.title} (${c.projectShortCode||"PRJ"})`:"";n(c=>c.map((c,e)=>e===a?{...c,taskId:b,taskLabel:d}:c))})(c,a.target.value),children:[(0,b.jsx)("option",{value:"",children:G?"Loading…":"Select Task"}),B.map(a=>(0,b.jsx)("option",{value:a.id,children:a.title},a.id))]})}),p.map((d,e)=>(0,b.jsx)("div",{className:"px-2 py-3 border-l flex justify-center",children:(0,b.jsx)("input",{type:"number",min:0,step:"0.25",className:"w-14 text-center border rounded-md text-sm",value:a.hours[e],onChange:a=>{var b;return b=a.target.value,void n(a=>a.map((a,d)=>d===c?{...a,hours:a.hours.map((a,c)=>c===e?function(a){let b=Number(a);return isNaN(b)||b<0?0:b}(b):a)}:a))}})},e))]})},a.id)),(0,b.jsx)("div",{className:"border-t bg-white",children:(0,b.jsxs)("div",{className:"grid grid-cols-[180px_repeat(7,1fr)]",children:[(0,b.jsx)("div",{className:"px-4 py-3 border-r text-sm",children:"Total"}),p.map((a,c)=>(0,b.jsxs)("div",{className:"px-2 py-3 border-l text-center text-sm",children:[k.reduce((a,b)=>a+(Number(b.hours[c])||0),0)," hrs"]},c))]})})]}),(0,b.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("button",{onClick:function(){n(a=>[...a,{id:`r-${Date.now()}`,taskId:"",taskLabel:"",hours:Array(7).fill(0)}])},className:"px-4 py-2 border border-blue-500 text-blue-600 rounded-md bg-white",children:"+ Add More"}),z&&(0,b.jsx)("div",{className:"mt-3 text-sm whitespace-pre-line",children:z})]}),(0,b.jsx)("button",{onClick:K,disabled:x,className:"px-6 py-2 bg-blue-600 text-white rounded-md",children:x?"Saving…":"Save"})]})]})};function A(a){return String(a).padStart(2,"0")}function B(a){return y[a.getMonth()].slice(0,3)}function C(a){let b=`${A(a.getDate())} ${B(a)}`,c=new Date(a);return c.setDate(a.getDate()+6),`${b} - ${A(c.getDate())} ${B(c)}`}function D(a){let b=new Date(a);return b.setDate(b.getDate()-(b.getDay()+6)%7),b}function E(a){return Array.from({length:7}).map((b,c)=>{let d=new Date(a);return d.setDate(a.getDate()+c),{date:`${d.getDate()}`,month:B(d),label:x[c],iso:`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")}`}})}let F=({events:a,onEventClick:d})=>{let[e,h]=(0,c.useState)(()=>{let a=new Date;return new Date(a.getFullYear(),a.getMonth(),1)}),i=(0,c.useMemo)(()=>{let b=new Map;return a.forEach(a=>{if(!a.startDate)return;let c=a.startDate??"";b.has(c)||b.set(c,[]),b.get(c).push(a)}),b},[a]),j=(0,c.useMemo)(()=>{let a=e.getFullYear(),b=e.getMonth(),c=(new Date(a,b,1).getDay()+6)%7,d=new Date(a,b+1,0).getDate(),f=[];for(let a=0;a<c;a++)f.push({date:null});for(let c=1;c<=d;c++)f.push({date:new Date(a,b,c)});for(;f.length%7!=0;)f.push({date:null});return f},[e]),k=e.toLocaleDateString(void 0,{month:"long",year:"numeric"});function l(a){h(b=>new Date(b.getFullYear(),b.getMonth()+a,1))}return(0,b.jsxs)("div",{className:"w-full bg-white rounded-xl shadow-lg overflow-hidden border",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b  bg-gradient-to-r from-indigo-50 to-blue-50",children:[(0,b.jsx)("button",{onClick:()=>l(-1),className:"p-2 hover:bg-white rounded-full shadow-sm",children:(0,b.jsx)(f.ChevronLeft,{className:"w-5 h-5 text-gray-700"})}),(0,b.jsx)("div",{className:"text-lg font-semibold text-gray-700",children:k}),(0,b.jsx)("button",{onClick:()=>l(1),className:"p-2 hover:bg-white rounded-full shadow-sm",children:(0,b.jsx)(g.ChevronRight,{className:"w-5 h-5 text-gray-700"})})]}),(0,b.jsx)("div",{className:"grid grid-cols-7 text-xs text-center border-b bg-gray-100",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(a=>(0,b.jsx)("div",{className:"py-3 font-semibold text-gray-700 tracking-wide",children:a},a))}),(0,b.jsx)("div",{className:"grid grid-cols-7 gap-[1px] bg-gray-200",children:j.map((a,c)=>{if(!a.date)return(0,b.jsx)("div",{className:"bg-gray-50 h-[120px]"},c);let e=function(a){return`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`}(a.date),f=i.get(e)??[];return(0,b.jsxs)("div",{className:"bg-white h-[120px] p-2 flex flex-col border border-gray-100 hover:bg-gray-50 transition group",children:[(0,b.jsx)("div",{className:"text-[12px] font-semibold text-gray-800 mb-1 group-hover:text-blue-600",children:a.date.getDate()}),(0,b.jsxs)("div",{className:"flex flex-col gap-1 overflow-hidden",children:[f.slice(0,4).map(a=>(0,b.jsxs)("button",{onClick:()=>d(a),className:"text-left rounded-md bg-blue-50 hover:bg-blue-100 transition px-2 py-1 text-[11px] truncate shadow-sm",children:[(0,b.jsxs)("span",{className:"font-medium text-blue-700",children:["Task ",a.taskId??a.id]}),(0,b.jsxs)("span",{className:"text-gray-500",children:[" • ",a.durationHours??0,"h "]})]},a.id)),f.length>4&&(0,b.jsxs)("div",{className:"text-[10px] text-gray-500",children:["+",f.length-4," more…"]})]})]},c)})})]})},G="undefined"!=typeof process&&"https://6jnqmj85-80.inc1.devtunnels.ms"||"undefined"!=typeof process&&process.env.NEXT_PUBLIC_GATEWAY||"http://localhost:3000";function H(a){if(null==a||isNaN(Number(a)))return"0h";let b=Number(a);return 0===b?"0h":`${b%1==0?b.toFixed(0):b.toFixed(2)}h`}function I(a,b){if(!a)return"-";let c=new Date(b?`${a}T${b}`:a);return isNaN(c.getTime())?`${a}${b?" "+b:""}`:c.toLocaleString(void 0,{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}function J(){let[a,d]=(0,c.useState)(null),[e,f]=(0,c.useState)(!1),[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)({});return((0,c.useEffect)(()=>{let a=!0;return async function(){f(!0),h(null);try{let b=await fetch(`${G.replace(/\/$/,"")}/timesheets/summary`,{headers:{"Content-Type":"application/json"},cache:"no-store"});if(401===b.status){try{localStorage.removeItem("accessToken")}catch{}throw Error("401: Unauthorized — please login.")}if(!b.ok){let a=await b.text().catch(()=>"");throw Error(`Failed to fetch: ${b.status} ${a}`)}let c=await b.json();a&&d(c)}catch(b){a&&h(b?.message||"Unknown error")}finally{a&&f(!1)}}(),()=>{a=!1}},[]),e)?(0,b.jsx)("div",{className:"py-6 px-4 text-gray-600",children:"Loading summary…"}):g?(0,b.jsxs)("div",{className:"py-6 px-4 text-red-600",children:["Error loading summaries: ",g]}):a&&0!==a.length?(0,b.jsx)("div",{className:"space-y-3 px-4 pb-8",children:a.map(a=>{let c=!!i[a.employeeId],d=a.timeLogs?.[0]?.employees?.[0]?.profileUrl;return(0,b.jsxs)("div",{className:"border rounded-lg bg-white shadow-sm overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 px-4 py-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-50 flex items-center justify-center overflow-hidden border",children:d?(0,b.jsx)("img",{src:d,alt:a.employeeName,className:"w-full h-full object-cover"}):(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:a.employeeName?a.employeeName.split(" ").map(a=>a[0]).join("").toUpperCase():"?"})}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"font-medium text-sm text-gray-800 truncate",children:a.employeeName}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a.designation??"—"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-6",children:[(0,b.jsxs)("div",{className:"text-right mr-2",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500",children:"Total"}),(0,b.jsx)("div",{className:"font-medium text-sm",children:H(a.totalHours)})]}),(0,b.jsx)("button",{onClick:()=>{var b;return b=a.employeeId,void j(a=>({...a,[b]:!a[b]}))},"aria-expanded":c,className:"w-9 h-9 flex items-center justify-center rounded border hover:bg-gray-50",children:c?(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,"aria-hidden":!0,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 12H4"})}):(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,"aria-hidden":!0,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})})]})]}),c&&(0,b.jsx)("div",{className:"border-t bg-gray-50 px-4 py-4",children:(0,b.jsx)("div",{className:"overflow-auto",children:(0,b.jsxs)("table",{className:"w-full min-w-[720px] table-fixed text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"text-left text-xs text-gray-600",children:[(0,b.jsx)("th",{className:"w-1/3 py-2 px-3",children:"Task"}),(0,b.jsx)("th",{className:"w-1/3 py-2 px-3",children:"Time"}),(0,b.jsx)("th",{className:"w-1/6 py-2 px-3 text-center",children:"Total Hours"}),(0,b.jsx)("th",{className:"w-1/6 py-2 px-3 text-center",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:a.timeLogs&&a.timeLogs.length>0?a.timeLogs.map(a=>(0,b.jsxs)("tr",{className:"border-t bg-white last:border-b",children:[(0,b.jsxs)("td",{className:"py-3 px-3 align-top",children:[(0,b.jsx)("div",{className:"font-medium",children:a.taskName??"Task Name"}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a.projectName??""})]}),(0,b.jsxs)("td",{className:"py-3 px-3 align-top",children:[(0,b.jsx)("div",{className:"text-xs text-gray-600",children:I(a.startDate,a.startTime)}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:I(a.endDate,a.endTime)})]}),(0,b.jsx)("td",{className:"py-3 px-3 align-top text-center",children:(0,b.jsx)("div",{className:"font-medium",children:H(a.durationHours)})}),(0,b.jsx)("td",{className:"py-3 px-3 align-top text-center",children:(0,b.jsx)("button",{title:"More actions",className:"p-1 rounded hover:bg-gray-100",onClick:()=>{},children:(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,b.jsx)("path",{d:"M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM18 10a2 2 0 11-4 0 2 2 0 014 0z"})})})})]},a.id)):(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:4,className:"py-4 px-3 text-gray-500",children:"No time logs available."})})})]})})})]},a.employeeId)})}):(0,b.jsx)("div",{className:"py-6 px-4 text-gray-600",children:"No summary found."})}let K="https://6jnqmj85-80.inc1.devtunnels.ms";function L(){let[a,j]=(0,c.useState)([]),[l,m]=(0,c.useState)(!0),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(null),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)("All"),[A,B]=(0,c.useState)("All"),[C,D]=(0,c.useState)(!1),[E,G]=(0,c.useState)("all"),[H,I]=(0,c.useState)("all"),[L,M]=(0,c.useState)(1),[N,O]=(0,c.useState)(1),[P,Q]=(0,c.useState)("table"),[R,S]=(0,c.useState)(!1),[T,U]=(0,c.useState)(!1),[V,W]=(0,c.useState)(!1),[X,Y]=(0,c.useState)(null),[Z,$]=(0,c.useState)(null),[_,aa]=(0,c.useState)({projectId:"",taskId:"",employeeId:"",startDate:"",startTime:"",endDate:"",endTime:"",memo:""}),[ab,ac]=(0,c.useState)(null),[ad,ae]=(0,c.useState)(!1),[af,ag]=(0,c.useState)(null),[ah,ai]=(0,c.useState)(!1),[aj,ak]=(0,c.useState)([]),[al,am]=(0,c.useState)(!1),[an,ao]=(0,c.useState)(null),[ap,aq]=(0,c.useState)([]),[ar,as]=(0,c.useState)([]),at=(0,c.useMemo)(()=>{let a=new Map;return aj.forEach(b=>{null!=b.id&&b.assignedEmployees?.length&&a.set(String(b.id),b.assignedEmployees)}),a},[aj]),au=(0,c.useMemo)(()=>{let b=new Set;return a.forEach(a=>{a.employees&&a.employees.length>0?a.employees.forEach(a=>{a?.employeeId&&b.add(a.employeeId)}):a.employeeId&&b.add(a.employeeId)}),["--",...Array.from(b)]},[a]),av=(0,c.useMemo)(()=>{let b=new Map;return a.forEach(a=>{a.employees?.forEach(a=>{a?.employeeId&&!b.has(a.employeeId)&&b.set(a.employeeId,a)})}),b},[a]),aw=a=>{if(!a||"--"===a)return"--";let b=av.get(a);return b?.name?`${b.name} (${a})`:a},ax=(0,c.useMemo)(()=>{let b=new Set;return a.forEach(a=>{"number"==typeof a.taskId&&b.add(a.taskId)}),["--",...Array.from(b).map(a=>String(a))]},[a]),ay=a=>{if(!a||"--"===a)return"--";let b=Number(a),c=ap.find(a=>a.id===b);return c?.title?`Task ${b} - ${c.title}`:`Task ${a}`},az=(0,c.useMemo)(()=>{let b=new Set;return a.forEach(a=>a.employees?.forEach(a=>a?.department&&b.add(a.department))),["All",...Array.from(b)]},[a]),aA=(a,b)=>(function(a,b){if(!a)return"";try{let c=b?`${a}T${b}`:`${a}T00:00:00`,d=new Date(c);if(Number.isNaN(d.getTime()))return`${a} ${b??""}`;let e=String(d.getDate()).padStart(2,"0"),f=String(d.getMonth()+1).padStart(2,"0"),g=d.getFullYear(),h=d.getHours(),i=String(d.getMinutes()).padStart(2,"0"),j=h>=12?"PM":"AM";return h%=12,0===h&&(h=12),`${e}/${f}/${g} ${h}:${i} ${j}`}catch{return`${a} ${b??""}`}})(a,b),aB=(a,b,c,d)=>{if(!a||!c)return 0;try{let e=a.split("-").map(Number),f=c.split("-").map(Number),g=0,h=0,i=0,j=0;b&&([g,h]=b.split(":").map(a=>Number(a))),d&&([i,j]=d.split(":").map(a=>Number(a)));let k=new Date(e[0],e[1]-1,e[2],g,h),l=new Date(f[0],f[1]-1,f[2],i,j).getTime()-k.getTime();if(isNaN(l)||l<=0)return 0;return Math.round(l/36e5)}catch{return 0}},aC=aB(_.startDate,_.startTime,_.endDate,_.endTime),aD=(0,c.useCallback)(async a=>{m(!0),r(null);try{let b=a||o||null,c=new URLSearchParams({page:String(L),limit:String(9),search:v||"",employee:"all"!==E?E:"",department:"all"!==H?H:""}),d=`${K}/timesheets?${c.toString()}`,e=await fetch(d,{method:"GET",headers:b?{Authorization:`Bearer ${b}`,Accept:"application/json"}:{Accept:"application/json"},cache:"no-store"});if(401===e.status){try{localStorage.removeItem("accessToken")}catch{}p(null),j([]),O(1),m(!1);return}if(!e.ok){let a=await e.text().catch(()=>"");throw console.error("timesheets fetch failed",e.status,a),Error(`Failed to load timesheets (${e.status})`)}let f=await e.json(),g=[];Array.isArray(f)?(g=f,O(Math.max(1,Math.ceil((f.length||0)/9)))):(g=Array.isArray(f.items)?f.items:[],O(f.totalPages??Math.max(1,Math.ceil((f.total??g.length)/9)))),j(g)}catch(a){console.error("loadTimesheets error",a),r(String(a?.message??a)),j([]),O(1)}finally{m(!1)}},[L,v,E,H,o]),aE=(0,c.useCallback)(async a=>{am(!0),ao(null);try{let b=a||o||null,c=`${K}/projects/AllProject`,d=await fetch(c,{method:"GET",headers:b?{Authorization:`Bearer ${b}`,Accept:"application/json"}:{Accept:"application/json"},cache:"no-store"});if(401===d.status){try{localStorage.removeItem("accessToken")}catch{}p(null),ak([]),am(!1);return}if(!d.ok){let a=await d.text().catch(()=>"");throw console.error("projects fetch failed",d.status,a),Error(`Failed to load projects (${d.status})`)}let e=await d.json();if(Array.isArray(e)){let a=[];e.forEach(b=>{let c=(b?.shortCode??"").toString().trim(),d=b?.id??b?.projectId??b?._id??null,e=(b?.name??"").toString().trim(),f=Array.isArray(b?.assignedEmployees)?b.assignedEmployees:[];null!=d&&c&&a.push({id:d,shortCode:c,name:e,assignedEmployees:f})});let b=new Set,c=[];a.forEach(a=>{b.has(String(a.id))||(b.add(String(a.id)),c.push(a))}),ak(c)}else console.warn("unexpected projects response",e),ak([])}catch(a){console.error("loadProjects error",a),ao(String(a?.message??a)),ak([])}finally{am(!1)}},[o]),aF=(0,c.useCallback)(async(a,b)=>{if(!a){aq([]),as([]);return}let c=Number(a);if(!c||Number.isNaN(c)){aq([]),as([]);return}try{let a=o||null,d=`${K}/projects/${c}/tasks`,e=await fetch(d,{method:"GET",headers:a?{Authorization:`Bearer ${a}`,Accept:"application/json"}:{Accept:"application/json"},cache:"no-store"});if(!e.ok){let a=await e.text().catch(()=>"");console.error("project tasks fetch failed",e.status,a),aq([]),as([]);return}let f=await e.json(),g=Array.isArray(f)?f:[];if(aq(g),null!=b&&g.length>0){let a=g.find(a=>a.id===b);as(a?.assignedEmployees??[])}else as([])}catch(a){console.error("fetchProjectTasks error",a),aq([]),as([])}},[o]);(0,c.useEffect)(()=>{let a=setTimeout(()=>{w(a=>a!==t?(M(1),t):a)},400);return()=>clearTimeout(a)},[t]),(0,c.useEffect)(()=>{m(!1)},[]),(0,c.useEffect)(()=>{o?(aD(o),aE(o)):(aD(null),aE(null))},[aD,aE,o,L,v,E,H]),(0,c.useEffect)(()=>{ac(null)},[L,P]);let aG=a=>{if(aq([]),as([]),a){let b=a.employees&&a.employees[0]?a.employees[0]:void 0;$(a.id),aa({projectId:void 0!==a.projectId&&null!==a.projectId?String(a.projectId):"",taskId:void 0!==a.taskId&&null!==a.taskId?String(a.taskId):"",employeeId:a.employeeId??b?.employeeId??"",startDate:a.startDate??"",startTime:a.startTime??"",endDate:a.endDate??"",endTime:a.endTime??"",memo:a.memo??""}),a.projectId&&aF(a.projectId,a.taskId??null)}else $(null),aa({projectId:"",taskId:"",employeeId:"",startDate:"",startTime:"",endDate:"",endTime:"",memo:""});Y(null),U(!0)},aH=async()=>{W(!0),Y(null);try{if(!_.projectId||!_.taskId||!_.employeeId||!_.startDate||!_.startTime||!_.endDate||!_.endTime||!_.memo){Y("Please fill all required fields."),W(!1);return}let a={projectId:Number(_.projectId),taskId:Number(_.taskId),employeeId:_.employeeId,startDate:_.startDate,startTime:_.startTime,endDate:_.endDate,endTime:_.endTime,memo:_.memo,durationHours:aB(_.startDate,_.startTime,_.endDate,_.endTime)},b=o||null,c=Z?`${K}/timesheets/${Z}`:`${K}/timesheets`,d=await fetch(c,{method:Z?"PUT":"POST",headers:{...b?{Authorization:`Bearer ${b}`}:{},"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(a)});if(!d.ok){let a=await d.text().catch(()=>"");throw console.error("save entry failed",d.status,a),Error("Failed to save entry")}U(!1),$(null),aa({projectId:"",taskId:"",employeeId:"",startDate:"",startTime:"",endDate:"",endTime:"",memo:""}),await aD(o??null)}catch(a){console.error("saveEntry error",a),Y(a?.message||"Failed to save entry")}finally{W(!1)}},aI=a=>{ag(a),ae(!0),ac(null)},aJ=a=>{ag(a),ai(!0),ac(null),Y(null)},aK=async()=>{if(af){W(!0),Y(null);try{let a=o||null,b=await fetch(`${K}/timesheets/${af.id}`,{method:"DELETE",headers:a?{Authorization:`Bearer ${a}`}:void 0});if(!b.ok){let a=await b.text().catch(()=>"");throw console.error("deleteTimesheet failed",b.status,a),Error("Failed to delete timesheet")}ai(!1),ag(null),await aD(o??null)}catch(a){console.error("deleteTimesheet error",a),Y(a?.message||"Failed to delete timesheet")}finally{W(!1)}}},aL=(0,c.useMemo)(()=>{let b=v.trim().toLowerCase();return a.filter(a=>{if("All"!==x){let b=(a.employees??[]).some(a=>a.employeeId===x),c=a.employeeId===x;if(!b&&!c)return!1}return("All"===A||!!(a.employees??[]).some(a=>a.department===A))&&!!(!b||String(a.projectShortCode??"").toLowerCase().includes(b)||String(a.memo??"").toLowerCase().includes(b)||(a.employees??[]).some(a=>(a.name??"").toLowerCase().includes(b)||(a.designation??"").toLowerCase().includes(b)))})},[a,v,x,A]);return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("main",{className:"w-full",children:(0,b.jsxs)("div",{className:"max-w-[1180px] mx-auto ",children:[(0,b.jsx)(k,{employeeFilter:x,setEmployeeFilter:y,employeeOptions:au,getEmployeeLabel:aw,onOpenFiltersDrawer:()=>D(!0)}),(0,b.jsx)(n,{searchInput:t,setSearchInput:u,setSearchQuery:w,setCurrentPage:M,viewMode:P,setViewMode:Q,showCalendarModal:R,setShowCalendarModal:S,openLogForm:()=>aG()}),"table"!==P&&"list"!==P?null:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"bg-white border border-gray-200 rounded-md overflow-hidden",children:(0,b.jsx)("div",{className:"p-0",children:(0,b.jsxs)("table",{className:"w-full table-auto border-collapse",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"text-left text-sm text-gray-600 border-b bg-blue-50",children:[(0,b.jsx)("th",{className:"py-3 px-4 w-28 border-r",children:"Code"}),(0,b.jsx)("th",{className:"py-3 px-4 border-r",children:"Task"}),(0,b.jsx)("th",{className:"py-3 px-4 w-48 border-r",children:"Employee"}),(0,b.jsx)("th",{className:"py-3 px-4 w-40 border-r",children:"Start Time"}),(0,b.jsx)("th",{className:"py-3 px-4 w-40 border-r",children:"End Time"}),(0,b.jsx)("th",{className:"py-3 px-4 w-28 border-r",children:"Total Hours"}),(0,b.jsx)("th",{className:"py-3 px-4 w-16",children:"Action"})]})}),(0,b.jsxs)("tbody",{children:[l&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:7,className:"py-6 text-center text-gray-500",children:"Loading..."})}),!l&&0===aL.length&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:7,className:"py-6 text-center text-gray-500",children:q?`Error: ${q}`:"No timesheets found"})}),!l&&aL.map(a=>(0,b.jsx)(s,{t:a,openMenuId:ab,onToggleMenu:a=>ac(b=>b===a?null:a),onCloseMenu:()=>ac(null),onView:aI,onEdit:aG,onDelete:aJ,fmtDateTime:aA},a.id))]})]})})}),(0,b.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between text-sm text-gray-600",children:[(0,b.jsxs)("div",{children:["Result per page - ",aL.length]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{className:"p-2 rounded hover:bg-gray-100",onClick:()=>M(a=>Math.max(1,a-1)),disabled:1===L,children:(0,b.jsx)(f.ChevronLeft,{})}),(0,b.jsxs)("div",{children:["Page ",L," of ",N]}),(0,b.jsx)("button",{className:"p-2 rounded hover:bg-gray-100",onClick:()=>M(a=>Math.min(N,a+1)),disabled:L===N,children:(0,b.jsx)(g.ChevronRight,{})})]})]})]})]})}),(0,b.jsx)("div",{"aria-hidden":!C,onClick:()=>D(!1),className:`fixed inset-0 transition-opacity duration-300 z-[9990] ${C?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,style:{backgroundColor:"rgba(0,0,0,0.3)"}}),(0,b.jsxs)("aside",{"aria-hidden":!C,className:`fixed right-0 top-0 h-full w-[360px] bg-white shadow-xl transform transition-transform duration-300 z-[9999] ${C?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(h.Search,{className:"w-5 h-5"}),(0,b.jsx)("h3",{className:"font-semibold",children:"Filters"})]}),(0,b.jsx)("button",{onClick:()=>D(!1),className:"p-2 rounded hover:bg-gray-100",children:(0,b.jsx)(i.X,{className:"w-4 h-4"})})]}),(0,b.jsxs)("div",{className:"p-4 space-y-4 overflow-auto h-[calc(100%-140px)]",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Employee"}),(0,b.jsxs)(e.Select,{value:E,onValueChange:a=>G(a),children:[(0,b.jsx)(e.SelectTrigger,{className:"w-full rounded border px-3 py-2",children:(0,b.jsx)(e.SelectValue,{placeholder:"All"})}),(0,b.jsxs)(e.SelectContent,{children:[(0,b.jsx)(e.SelectItem,{value:"all",children:"All"}),au.slice(1).map(a=>(0,b.jsx)(e.SelectItem,{value:a,children:aw(a)},a))]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Department"}),(0,b.jsxs)(e.Select,{value:H,onValueChange:a=>I(a),children:[(0,b.jsx)(e.SelectTrigger,{className:"w-full rounded border px-3 py-2",children:(0,b.jsx)(e.SelectValue,{placeholder:"All"})}),(0,b.jsxs)(e.SelectContent,{children:[(0,b.jsx)(e.SelectItem,{value:"all",children:"All"}),az.slice(1).map(a=>(0,b.jsx)(e.SelectItem,{value:a,children:a},a))]})]})]})]}),(0,b.jsxs)("div",{className:"p-4 border-t flex items-center justify-between gap-2",children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>{G("all"),I("all"),D(!1)},children:"Reset"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(d.Button,{variant:"ghost",onClick:()=>D(!1),children:"Close"}),(0,b.jsx)(d.Button,{className:"bg-blue-600 text-white",onClick:()=>{D(!1),M(1),aD(o??null)},children:"Apply"})]})]})]}),T&&(0,b.jsxs)("div",{className:"fixed inset-0 z-[10020] flex items-start justify-center pt-12 px-4",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:()=>U(!1)}),(0,b.jsxs)("div",{className:"relative bg-white w-full max-w-4xl rounded-xl shadow-xl overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:Z?"Edit TimeLog":"Log Time"}),(0,b.jsx)("button",{className:"p-2 rounded hover:bg-gray-100",onClick:()=>U(!1),"aria-label":"Close",children:(0,b.jsx)(i.X,{className:"w-5 h-5 text-gray-500"})})]}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-md border p-6",children:[(0,b.jsx)("h4",{className:"text-md font-medium mb-4",children:"TimeLog Details"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Project *"}),(0,b.jsxs)("select",{value:_.projectId||"",onChange:a=>{let b=a.target.value;aa(a=>({...a,projectId:b,taskId:"",employeeId:""})),b?aF(b):(aq([]),as([]))},className:"w-full border rounded px-3 py-2 text-sm",children:[(0,b.jsx)("option",{value:"",children:"--"}),al&&(0,b.jsx)("option",{value:"",children:"Loading..."}),an&&(0,b.jsx)("option",{value:"",children:"Error loading projects"}),aj.map(a=>(0,b.jsx)("option",{value:String(a.id),children:null!=a.id?`#${a.id} - ${a.name||a.shortCode}`:a.name||a.shortCode},`${a.id}-${a.shortCode}`))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Task *"}),(0,b.jsx)("select",{value:_.taskId||"--",onChange:a=>{let b=a.target.value;if("--"===b){aa(a=>({...a,taskId:"",employeeId:""})),as([]);return}let c=Number(b),d=ap.find(a=>a.id===c);aa(a=>({...a,taskId:b,employeeId:""})),as(d?.assignedEmployees??[])},className:"w-full border rounded px-3 py-2 text-sm",disabled:!!_.projectId&&0===ap.length,children:_.projectId?0===ap.length?(0,b.jsx)("option",{value:"--",children:"No tasks"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("option",{value:"--",children:"--"}),ap.map(a=>(0,b.jsx)("option",{value:String(a.id),children:ay(String(a.id))},a.id))]}):ax.map(a=>(0,b.jsx)("option",{value:a,children:"--"===a?"--":ay(a)},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Employee *"}),(0,b.jsx)("select",{value:_.employeeId||"--",onChange:a=>aa(b=>({...b,employeeId:"--"===a.target.value?"":a.target.value})),className:"w-full border rounded px-3 py-2 text-sm",disabled:!!_.projectId&&0===ap.length,children:(()=>{let a=_.projectId?at.get(_.projectId)??[]:[];return _.projectId&&0===ap.length?(0,b.jsx)("option",{value:"--",children:"No employees"}):ar.length>0?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("option",{value:"--",children:"--"}),ar.map(a=>(0,b.jsx)("option",{value:a.employeeId,children:a.name?`${a.name} (${a.employeeId})`:a.employeeId},a.employeeId))]}):_.projectId&&a.length>0?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("option",{value:"--",children:"--"}),a.map(a=>(0,b.jsx)("option",{value:a.employeeId,children:a.name?`${a.name} (${a.employeeId})`:a.employeeId},a.employeeId))]}):au.map(a=>(0,b.jsx)("option",{value:a,children:aw(a)},a))})()})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Start Date *"}),(0,b.jsx)("input",{type:"date",value:_.startDate,onChange:a=>aa(b=>({...b,startDate:a.target.value})),className:"w-full border rounded px-3 py-2 text-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Start Time *"}),(0,b.jsx)("input",{type:"time",value:_.startTime,onChange:a=>aa(b=>({...b,startTime:a.target.value})),className:"w-full border rounded px-3 py-2 text-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"End Date *"}),(0,b.jsx)("input",{type:"date",value:_.endDate,onChange:a=>aa(b=>({...b,endDate:a.target.value})),className:"w-full border rounded px-3 py-2 text-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"End Time *"}),(0,b.jsx)("input",{type:"time",value:_.endTime,onChange:a=>aa(b=>({...b,endTime:a.target.value})),className:"w-full border rounded px-3 py-2 text-sm"})]})]}),(0,b.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4 items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Memo *"}),(0,b.jsx)("input",{type:"text",value:_.memo,onChange:a=>aa(b=>({...b,memo:a.target.value})),className:"w-full border rounded px-3 py-2 text-sm",placeholder:"Memo"})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Total Hours"}),(0,b.jsxs)("div",{className:"text-2xl font-semibold text-blue-600",children:[aC,"h"]})]})]}),X&&(0,b.jsx)("div",{className:"mt-4 text-sm text-red-600",children:X})]}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-6 mt-8 pb-6",children:[(0,b.jsx)("button",{onClick:()=>U(!1),className:"px-6 py-2 rounded-md border text-blue-600",disabled:V,children:"Cancel"}),(0,b.jsx)("button",{onClick:aH,className:"px-6 py-2 rounded-md bg-blue-600 text-white shadow",disabled:V,children:V?"Saving...":Z?"Update":"Save"})]})]})]})]}),ad&&af&&(0,b.jsxs)("div",{className:"fixed inset-0 z-[10030] flex items-start justify-center pt-8 px-6",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:()=>ae(!1)}),(0,b.jsxs)("div",{className:"relative bg-white w-full max-w-6xl rounded-xl shadow-xl overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold",children:"Timesheet"}),(0,b.jsx)("button",{className:"p-2 rounded hover:bg-gray-100",onClick:()=>ae(!1),"aria-label":"Close",children:(0,b.jsx)(i.X,{className:"w-5 h-5 text-gray-500"})})]}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 relative bg-white rounded-xl border p-6",children:[(0,b.jsx)("div",{className:"absolute top-4 right-4 text-gray-500",children:"⋮"}),(0,b.jsx)("h4",{className:"text-lg font-medium mb-4",children:"TimeLog Details"}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-y-4 gap-x-6 items-center text-sm",children:[(0,b.jsx)("div",{className:"text-gray-500",children:"Start Time"}),(0,b.jsx)("div",{className:"col-span-2",children:aA(af.startDate,af.startTime)}),(0,b.jsx)("div",{className:"text-gray-500",children:"End Time"}),(0,b.jsx)("div",{className:"col-span-2",children:aA(af.endDate,af.endTime)}),(0,b.jsx)("div",{className:"text-gray-500",children:"Total Hours"}),(0,b.jsx)("div",{className:"col-span-2",children:"number"==typeof af.durationHours?`${af.durationHours}h`:"-"}),(0,b.jsx)("div",{className:"text-gray-500",children:"Memo"}),(0,b.jsx)("div",{className:"col-span-2",children:af.memo??"-"}),(0,b.jsx)("div",{className:"text-gray-500",children:"Project"}),(0,b.jsx)("div",{className:"col-span-2",children:af.projectShortCode??af.projectId??"-"}),(0,b.jsx)("div",{className:"text-gray-500",children:"Task"}),(0,b.jsxs)("div",{className:"col-span-2",children:["Task ",af.taskId??"-"]}),(0,b.jsx)("div",{className:"text-gray-500",children:"Employee"}),(0,b.jsxs)("div",{className:"col-span-2 flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center",children:af.employees&&af.employees[0]?.profileUrl?(0,b.jsx)("img",{src:af.employees[0].profileUrl,alt:af.employees[0].name??"",className:"w-full h-full object-cover"}):(0,b.jsx)("div",{className:"w-6 h-6 rounded-full bg-gray-200"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-sm",children:af.employees&&af.employees[0]?.name?af.employees[0].name:af.employeeId}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:af.employees&&af.employees[0]?.designation?af.employees[0].designation:""})]})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl border p-5",children:[(0,b.jsx)("h5",{className:"font-medium mb-3",children:"History"}),(0,b.jsxs)("div",{className:"space-y-4 text-sm text-gray-700",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("div",{className:"text-gray-500",children:"Start Time"}),(0,b.jsx)("div",{children:aA(af.startDate,af.startTime)})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("div",{className:"text-gray-500",children:"Task"}),(0,b.jsxs)("div",{children:["Task ",af.taskId??"-"]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("div",{className:"text-gray-500",children:"End Time"}),(0,b.jsx)("div",{children:aA(af.endDate,af.endTime)})]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-6 mt-8 pb-6",children:[(0,b.jsx)("button",{onClick:()=>ae(!1),className:"px-6 py-2 rounded-md border text-blue-600",children:"Close"}),(0,b.jsx)("button",{onClick:()=>{af&&aG(af),ae(!1)},className:"px-6 py-2 rounded-md bg-blue-600 text-white",children:"Edit"})]})]})]})]}),ah&&af&&(0,b.jsxs)("div",{className:"fixed inset-0 z-[10040] flex items-start justify-center pt-12 px-4",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:()=>ai(!1)}),(0,b.jsx)("div",{className:"relative bg-white w-full max-w-md rounded-lg shadow-xl overflow-hidden",children:(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Delete TimeLog"}),(0,b.jsxs)("p",{className:"text-sm text-gray-700",children:["Are you sure you want to delete timesheet"," ",(0,b.jsxs)("strong",{children:["RTA-",String(af.id).padStart(2,"0")]}),"? This action cannot be undone."]}),X&&(0,b.jsx)("div",{className:"mt-4 text-sm text-red-600",children:X}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-4 mt-6",children:[(0,b.jsx)("button",{className:"px-4 py-2 rounded border",onClick:()=>ai(!1),disabled:V,children:"Cancel"}),(0,b.jsx)("button",{className:"px-4 py-2 rounded bg-red-600 text-white",onClick:aK,disabled:V,children:V?"Deleting...":"Delete"})]})]})})]}),"weekly"===P&&(0,b.jsx)(z,{open:!0,onClose:()=>Q("table")}),"TimesheetSummary"===P&&(0,b.jsx)(J,{}),R&&(0,b.jsxs)("div",{className:"fixed inset-0 z-[10050] flex items-start justify-center pt-8 px-6",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:()=>S(!1)}),(0,b.jsxs)("div",{className:"relative bg-white w-full max-w-[1180px] rounded-xl shadow-xl overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold",children:"Calendar"}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)("button",{className:"px-3 py-1 rounded hover:bg-gray-100",onClick:()=>S(!1),"aria-label":"Close",children:"Close"})})]}),(0,b.jsx)("div",{className:"p-6",children:(0,b.jsx)("div",{className:"grid grid-cols-1 gap-4",children:(0,b.jsx)(F,{events:a,onEventClick:a=>{aG(a),S(!1)}})})}),(0,b.jsx)("div",{className:"flex items-center justify-end gap-4 px-6 py-4 border-t",children:(0,b.jsx)("button",{onClick:()=>S(!1),className:"px-4 py-2 rounded border",children:"Close"})})]})]})]})}}];

//# sourceMappingURL=src_app_%28employee%29_employees_work_tasks_timesheet_page_tsx_9a196d6e._.js.map