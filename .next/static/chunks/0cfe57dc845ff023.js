(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,534270,e=>{"use strict";e.s(["AddLeadModal",()=>x,"default",()=>f]);var t=e.i(843476),l=e.i(283599),a=e.i(271645),s=e.i(522016),d=e.i(618566),r=e.i(515288),n=e.i(793479),o=e.i(519455),i=e.i(784774);let c="".concat("https://6jnqmj85-80.inc1.devtunnels.ms"),m=async e=>{let t=localStorage.getItem("accessToken");if(!t)throw Error("No access token found. Please log in.");let l=await fetch(e,{cache:"no-store",headers:{Authorization:"Bearer ".concat(t),Accept:"application/json"}});if(!l.ok){let e="Failed to load.";try{e=(await l.json()).message||e}catch(t){e=await l.text()||e}throw Error(e)}return l.json()};function u(e){let{meta:l,fallback:a}=e,s=(null==l?void 0:l.profileUrl)||"/placeholder.svg?height=32&width=32&query=profile-avatar";return(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("img",{src:s,alt:(null==l?void 0:l.name)?"Profile photo of ".concat(l.name):"Profile avatar",className:"h-8 w-8 rounded-full object-cover border",crossOrigin:"anonymous"}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:(null==l?void 0:l.name)||a||"â€”"}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:(null==l?void 0:l.designation)||"â€”"})]})]})}function x(e){let{onClose:l,onCreated:s,employees:d}=e,r=["Default Pipeline","Sales Pipeline","Enterprise Pipeline"],n=["Generated","Qualification","Proposal","Win","Lost"],[o,i]=(0,a.useState)([]),[m,u]=(0,a.useState)([]),[x,h]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=localStorage.getItem("accessToken");e&&(async()=>{try{let t=await fetch("".concat(c,"/deals/dealCategory"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();Array.isArray(e)&&(i(e),h(e))}let l=await fetch("".concat(c,"/deals/dealCategory/LeadSource"),{headers:{Authorization:"Bearer ".concat(e)}});if(l.ok){let e=await l.json();Array.isArray(e)&&u(e)}}catch(e){}})()},[]);let f={title:"",pipeline:r[0],dealStage:n[0],dealCategory:"",value:"",expectedCloseDate:"",dealAgent:"",dealWatchers:[]},[p,g]=(0,a.useState)({name:"",email:"",mobileNumber:"",clientCategory:"",leadSource:"",addedBy:"",leadOwner:"",createDeal:!0,autoConvertToClient:!0,deal:f,companyName:"",officialWebsite:"",officePhone:"",city:"",state:"",postalCode:"",country:"",companyAddress:""}),[v,j]=(0,a.useState)(null),[b,y]=(0,a.useState)(""),[N,C]=(0,a.useState)(!1),[w,k]=(0,a.useState)([]),[S,A]=(0,a.useState)(null),[T,L]=(0,a.useState)(!1),[D,E]=(0,a.useState)(!1),[B,O]=(0,a.useState)(""),W=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=e=>{let t=e.target;D&&W.current&&!W.current.contains(t)&&E(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[D]);let[I,P]=(0,a.useState)(!1),M=(0,a.useRef)(null);(0,a.useEffect)(()=>{requestAnimationFrame(()=>P(!0));let e=setTimeout(()=>{var e;return null==(e=M.current)?void 0:e.focus()},120),t=document.body.style.overflow;document.body.style.overflow="hidden";let a=e=>{"Escape"===e.key&&l()};return document.addEventListener("keydown",a),()=>{clearTimeout(e),document.body.style.overflow=t,document.removeEventListener("keydown",a)}},[l]);let z=(e,t)=>g(l=>({...l,[e]:t})),F=(e,t)=>g(l=>({...l,deal:{...l.deal,[e]:t}})),R=async e=>{null==e||e.preventDefault();let t=(()=>{var e,t,l,a;if(!(null==(e=p.name)?void 0:e.trim())||!(null==(t=p.email)?void 0:t.trim())||!(null==(l=p.companyName)?void 0:l.trim()))return"Name, Email and Company Name are required.";if(p.createDeal||p.autoConvertToClient){let e=p.deal;if(!(null==(a=e.title)?void 0:a.trim())||!e.value||!e.expectedCloseDate||!e.dealAgent)return"Deal title, value, expected close date and deal agent are required when creating a deal."}return null})();if(t)return void A(t);A(null),L(!0);try{let e=localStorage.getItem("accessToken");if(!e)throw Error("No access token found.");let t={name:p.name,email:p.email,mobileNumber:p.mobileNumber||void 0,clientCategory:p.clientCategory||void 0,leadSource:p.leadSource||void 0,addedBy:p.addedBy||void 0,leadOwner:p.leadOwner||void 0,createDeal:!!p.createDeal,autoConvertToClient:!!p.autoConvertToClient,deal:p.createDeal||p.autoConvertToClient?{title:p.deal.title,pipeline:p.deal.pipeline,dealStage:p.deal.dealStage,dealCategory:p.deal.dealCategory,value:Number(p.deal.value),expectedCloseDate:p.deal.expectedCloseDate,dealAgent:p.deal.dealAgent,dealWatchers:p.deal.dealWatchers||[]}:void 0,companyName:p.companyName,officialWebsite:p.officialWebsite||void 0,officePhone:p.officePhone||void 0,city:p.city||void 0,state:p.state||void 0,postalCode:p.postalCode||void 0,country:p.country||void 0,companyAddress:p.companyAddress||void 0},l=await fetch("".concat(c,"/leads"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)});if(!l.ok){let e=await l.text().catch(()=>"");throw Error(e||"Failed to create lead")}s(),alert("Lead created successfully.")}catch(e){A((null==e?void 0:e.message)||"Failed to create lead.")}finally{L(!1)}},H=async e=>{j(e),y(""),C(!0),k([]);try{let t=localStorage.getItem("accessToken");if(!t)throw Error("No token");if("leadSource"===e){let e=await fetch("".concat(c,"/deals/dealCategory/LeadSource"),{headers:{Authorization:"Bearer ".concat(t)}});if(e.ok){let t=await e.json();Array.isArray(t)&&k(t)}}else{let e=await fetch("".concat(c,"/deals/dealCategory"),{headers:{Authorization:"Bearer ".concat(t)}});if(e.ok){let t=await e.json();Array.isArray(t)&&k(t)}}}catch(e){}finally{C(!1)}},U=async e=>{if(!b.trim())return alert("Please enter a name.");C(!0);try{let t=localStorage.getItem("accessToken");if(!t)throw Error("No token");let l="",a={};"leadSource"===e?(l="".concat(c,"/deals/dealCategory/LeadSource"),a={name:b.trim()}):(l="".concat(c,"/deals/dealCategory"),a={categoryName:b.trim()});let s=await fetch(l,{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok){let e=await s.text().catch(()=>"");throw Error(e||"Failed to add")}let d=await s.json();"leadSource"===e?(u(e=>[{id:d.id,name:d.name||b.trim()},...e]),g(e=>({...e,leadSource:d.name||b.trim()}))):(i(e=>[{id:d.id,categoryName:d.categoryName||b.trim()},...e]),h(e=>[{id:d.id,categoryName:d.categoryName||b.trim()},...e]),g(e=>({...e,deal:{...e.deal,dealCategory:d.categoryName||b.trim()},clientCategory:d.categoryName||b.trim()}))),y(""),j(null),alert("Added successfully.")}catch(e){alert("Error: "+((null==e?void 0:e.message)||e))}finally{C(!1)}},q=async(e,t)=>{if(confirm("Are you sure you want to delete this item?"))try{let l=localStorage.getItem("accessToken");if(!l)throw Error("No token");let a="";a="leadSource"===e?"".concat(c,"/deals/dealCategory/LeadSource/").concat(t):"".concat(c,"/deals/dealCategory/").concat(t);let s=await fetch(a,{method:"DELETE",headers:{Authorization:"Bearer ".concat(l)}});if(!s.ok){let e=await s.text().catch(()=>"");throw Error(e||"Delete failed")}"leadSource"===e?u(e=>e.filter(e=>e.id!==t)):(i(e=>e.filter(e=>e.id!==t)),h(e=>e.filter(e=>e.id!==t))),alert("Deleted successfully.")}catch(e){alert("Error deleting: "+((null==e?void 0:e.message)||e))}},V=(0,t.jsxs)("form",{onSubmit:R,className:"space-y-6",children:[S&&(0,t.jsx)("div",{className:"text-destructive text-sm",children:S}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border p-6 shadow-sm flex flex-col",children:[(0,t.jsx)("h4",{className:"text-sm font-medium mb-4 text-left order-first",children:"Lead Contact Detail"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Name *"}),(0,t.jsx)("input",{ref:M,className:"w-full border rounded-md px-3 py-2 text-sm",value:p.name,onChange:e=>z("name",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Email *"}),(0,t.jsx)("input",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.email,type:"email",onChange:e=>z("email",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Client Category"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("select",{className:"flex-1 border rounded-md px-3 py-2 text-sm",value:p.clientCategory,onChange:e=>z("clientCategory",e.target.value),children:[(0,t.jsx)("option",{value:"",children:"--"}),x.map(e=>(0,t.jsx)("option",{value:e.categoryName,children:e.categoryName},e.id))]}),(0,t.jsx)("button",{type:"button",onClick:()=>H("clientCategory"),className:"px-3 py-2 rounded border text-sm",children:"Add"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Lead Source"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("select",{className:"flex-1 border  rounded-md px-3 py-2 text-sm",value:p.leadSource,onChange:e=>z("leadSource",e.target.value),children:[(0,t.jsx)("option",{value:"",children:"--"}),m.map(e=>(0,t.jsx)("option",{value:e.name,children:e.name},e.id))]}),(0,t.jsx)("button",{type:"button",onClick:()=>H("leadSource"),className:"px-3 py-2 rounded border text-sm",children:"Add"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Added By"}),(0,t.jsxs)("select",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.addedBy,onChange:e=>z("addedBy",e.target.value),children:[(0,t.jsx)("option",{value:"",children:"--"}),d.map(e=>(0,t.jsxs)("option",{value:e.employeeId,children:[e.name," (",e.employeeId,")"]},e.employeeId))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Lead Owner"}),(0,t.jsxs)("select",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.leadOwner,onChange:e=>z("leadOwner",e.target.value),children:[(0,t.jsx)("option",{value:"",children:"--"}),d.map(e=>(0,t.jsxs)("option",{value:e.employeeId,children:[e.name," (",e.employeeId,")"]},e.employeeId))]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("input",{id:"createDeal",type:"checkbox",checked:!!p.createDeal,onChange:e=>z("createDeal",e.target.checked)}),(0,t.jsx)("label",{htmlFor:"createDeal",className:"text-sm",children:"Create Deal"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("input",{id:"autoConvert",type:"checkbox",checked:!!p.autoConvertToClient,onChange:e=>z("autoConvertToClient",e.target.checked)}),(0,t.jsx)("label",{htmlFor:"autoConvert",className:"text-sm",children:"Auto convert on WIN"})]})]})]}),(p.createDeal||p.autoConvertToClient)&&(0,t.jsxs)("div",{className:"bg-white rounded-lg border p-5 shadow-sm flex flex-col",children:[(0,t.jsx)("h4",{className:"text-sm font-medium mb-4 text-left order-first",children:"Deal Details"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Deal Name *"}),(0,t.jsx)("input",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.deal.title,onChange:e=>F("title",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Pipeline *"}),(0,t.jsx)("select",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.deal.pipeline,onChange:e=>F("pipeline",e.target.value),children:r.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Deal Stage *"}),(0,t.jsx)("select",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.deal.dealStage,onChange:e=>F("dealStage",e.target.value),children:n.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Deal Value *"}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"px-3 py-2 bg-gray-100 rounded-l text-sm",children:"USD $"}),(0,t.jsx)("input",{className:"flex-1 border rounded-r px-3 py-2 text-sm",type:"number",value:p.deal.value,onChange:e=>F("value",e.target.value)})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Close Date *"}),(0,t.jsx)("input",{className:"w-full border rounded-md px-3 py-2 text-sm",type:"date",value:p.deal.expectedCloseDate,onChange:e=>F("expectedCloseDate",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Deal Category"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("select",{className:"flex-1 border rounded-md px-3 py-2 text-sm",value:p.deal.dealCategory,onChange:e=>F("dealCategory",e.target.value),children:[(0,t.jsx)("option",{value:"",children:"--"}),o.map(e=>(0,t.jsx)("option",{value:e.categoryName,children:e.categoryName},e.id))]}),(0,t.jsx)("button",{type:"button",onClick:()=>H("dealCategory"),className:"px-3 py-2 rounded border text-sm",children:"Add"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Deal Agent *"}),(0,t.jsxs)("select",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.deal.dealAgent,onChange:e=>F("dealAgent",e.target.value),children:[(0,t.jsx)("option",{value:"",children:"--"}),d.map(e=>(0,t.jsxs)("option",{value:e.employeeId,children:[e.name," (",e.employeeId,")"]},e.employeeId))]})]}),(0,t.jsxs)("div",{className:"md:col-span-3",children:[(0,t.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Deal Watcher(s)"}),(0,t.jsxs)("div",{ref:W,className:"relative",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>E(e=>!e),className:"w-full flex items-center justify-between border rounded-md px-3 py-2 text-sm bg-white",children:[(0,t.jsx)("div",{className:"truncate",children:0===p.deal.dealWatchers.length?"-- select --":p.deal.dealWatchers.map(e=>{var t,l;return null!=(l=null==(t=d.find(t=>t.employeeId===e))?void 0:t.name)?l:e}).join(", ")}),(0,t.jsx)("div",{className:"ml-2",children:p.deal.dealWatchers.length>0&&(0,t.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),g(e=>({...e,deal:{...e.deal,dealWatchers:[]}}))},className:"text-xs px-2 py-1 rounded hover:bg-slate-100",children:"Clear"})})]}),D&&(0,t.jsxs)("div",{className:"absolute left-0 right-0 mt-2 z-40 rounded-md bg-white border shadow-lg max-h-60 overflow-auto",children:[(0,t.jsx)("div",{className:"p-2 border-b",children:(0,t.jsx)("input",{className:"w-full border rounded-md p-2 text-sm",placeholder:"Search employees...",value:B,onChange:e=>O(e.target.value)})}),(0,t.jsxs)("ul",{className:"p-2 space-y-1",children:[d.filter(e=>e.name.toLowerCase().includes(B.trim().toLowerCase())||e.employeeId.toLowerCase().includes(B.trim().toLowerCase())).map(e=>{let l=p.deal.dealWatchers.includes(e.employeeId);return(0,t.jsx)("li",{children:(0,t.jsxs)("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-50 cursor-pointer text-sm",children:[(0,t.jsx)("input",{type:"checkbox",checked:l,onChange:()=>{var t;return t=e.employeeId,void g(e=>{let l=new Set(e.deal.dealWatchers||[]);return l.has(t)?l.delete(t):l.add(t),{...e,deal:{...e.deal,dealWatchers:Array.from(l)}}})}}),(0,t.jsxs)("span",{children:[e.name," ",(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",e.employeeId,")"]})]})]})},e.employeeId)}),0===d.length&&(0,t.jsx)("li",{className:"p-2 text-sm text-muted-foreground",children:"No employees"})]}),(0,t.jsx)("div",{className:"p-2 border-t flex justify-end gap-2",children:(0,t.jsx)("button",{type:"button",onClick:()=>E(!1),className:"rounded-md px-3 py-1 border text-sm",children:"Done"})})]})]}),(0,t.jsxs)("div",{className:"mt-2 text-sm text-muted-foreground",children:["Selected: ",0===p.deal.dealWatchers.length?"â€”":p.deal.dealWatchers.map(e=>{var t,l;return null!=(l=null==(t=d.find(t=>t.employeeId===e))?void 0:t.name)?l:e}).join(", ")]})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border p-5 shadow-sm flex flex-col",children:[(0,t.jsx)("h4",{className:"text-sm font-medium mb-4 text-left order-first",children:"Company Details"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Company Name *"}),(0,t.jsx)("input",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.companyName,onChange:e=>z("companyName",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Official Website"}),(0,t.jsx)("input",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.officialWebsite,onChange:e=>z("officialWebsite",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Mobile Number"}),(0,t.jsx)("input",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.mobileNumber,onChange:e=>z("mobileNumber",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Office Phone No."}),(0,t.jsx)("input",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.officePhone,onChange:e=>z("officePhone",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"City"}),(0,t.jsx)("input",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.city,onChange:e=>z("city",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"State"}),(0,t.jsx)("input",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.state,onChange:e=>z("state",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Postal Code"}),(0,t.jsx)("input",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.postalCode,onChange:e=>z("postalCode",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Country"}),(0,t.jsx)("input",{className:"w-full border rounded-md px-3 py-2 text-sm",value:p.country,onChange:e=>z("country",e.target.value)})]}),(0,t.jsxs)("div",{className:"md:col-span-3",children:[(0,t.jsx)("label",{className:"block text-xs text-left text-muted-foreground mb-1",children:"Company Address"}),(0,t.jsx)("textarea",{className:"w-full border rounded-md p-3 text-sm h-28",value:p.companyAddress,onChange:e=>z("companyAddress",e.target.value)})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-2",children:[(0,t.jsx)("button",{type:"button",onClick:l,className:"px-4 py-2 rounded-md border text-sm",disabled:T,children:"Cancel"}),(0,t.jsx)("button",{type:"button",onClick:R,className:"px-4 py-2 rounded-md bg-sky-600 text-white text-sm",disabled:T,children:T?"Saving...":"Save"})]})]}),J=v?(0,t.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/20",onClick:()=>j(null)}),(0,t.jsx)("div",{className:"fixed inset-0 flex items-start justify-center px-4 pt-20",children:(0,t.jsxs)("div",{className:"max-w-2xl w-full bg-white rounded-lg shadow-lg border overflow-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"clientCategory"===v?"Client Category":"leadSource"===v?"Lead Source":"Deal Category"}),(0,t.jsx)("button",{onClick:()=>j(null),className:"text-muted-foreground p-1 rounded hover:bg-slate-100",children:"âœ•"})]}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-blue-50",children:[(0,t.jsx)("th",{className:"p-2 text-left",children:"#"}),(0,t.jsx)("th",{className:"p-2 text-left",children:"Name"}),(0,t.jsx)("th",{className:"p-2 text-left",children:"Action"})]})}),(0,t.jsxs)("tbody",{children:[(w.length?w:"clientCategory"===v?x:"leadSource"===v?m:o).map((e,l)=>(0,t.jsxs)("tr",{className:"border-t",children:[(0,t.jsx)("td",{className:"p-2",children:l+1}),(0,t.jsx)("td",{className:"p-2",children:e.categoryName||e.name}),(0,t.jsx)("td",{className:"p-2",children:(0,t.jsx)("button",{onClick:()=>q("leadSource"===v?"leadSource":"clientCategory"===v?"clientCategory":"dealCategory",e.id),className:"text-destructive",children:"ðŸ—‘"})})]},l)),!w.length&&!("clientCategory"===v?x.length:"leadSource"===v?m.length:o.length)&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:3,className:"p-4 text-sm text-muted-foreground",children:"No items found."})})]})]})})}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm text-muted-foreground mb-1",children:"Name *"}),(0,t.jsx)("input",{value:b,onChange:e=>y(e.target.value),className:"w-full border rounded-md p-2",placeholder:"Enter name"})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)("button",{onClick:()=>j(null),className:"rounded-md px-4 py-2 border",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>U(v),disabled:N,className:"rounded-md bg-sky-600 text-white px-4 py-2",children:N?"Saving...":"Save"})]})]})]})})]}):null;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"fixed inset-0 z-50","aria-modal":"true",role:"dialog",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/30",onClick:l}),(0,t.jsxs)("aside",{className:["absolute right-0 top-0 h-full bg-gray-50 flex flex-col w-full sm:w-[80vw] max-w-full transform transition-transform duration-300 ease-out",I?"translate-x-0":"translate-x-full"].join(" "),style:{willChange:"transform"},children:[(0,t.jsxs)("div",{className:"flex items-start justify-between p-4 border-b bg-white sticky top-0 z-10",children:[(0,t.jsx)("div",{children:(0,t.jsx)("h3",{className:"text-lg font-semibold text-left",children:"Add Lead Contact Information "})}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)("button",{onClick:l,className:"p-2 rounded hover:bg-slate-100",children:"âœ•"})})]}),(0,t.jsx)("div",{className:"p-6 overflow-auto flex-1",children:V})]})]}),J]})}function h(e){let{lead:l,idx:d,mutate:r,onEdit:n,onView:o,onChangeToClient:m}=e,[x,h]=(0,a.useState)(!1),f=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(!x)return;let e=e=>{let t=e.target;f.current&&!f.current.contains(t)&&h(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[x]);let p=async()=>{if(confirm("Delete this lead?"))try{let e=localStorage.getItem("accessToken"),t=await fetch("".concat(c,"/leads/").concat(l.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error(await t.text());alert("Deleted"),await r()}catch(e){alert("Error: "+(e.message||e))}finally{h(!1)}};return(0,t.jsxs)(i.TableRow,{ref:f,children:[(0,t.jsx)(i.TableCell,{children:d+1}),(0,t.jsx)(i.TableCell,{children:(0,t.jsx)(s.default,{href:"/leads/".concat(l.id),children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"font-medium",children:l.name}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:l.companyName||"â€”"})]})})}),(0,t.jsx)(i.TableCell,{children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm",children:l.email||"â€”"}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:l.mobileNumber||"â€”"})]})}),(0,t.jsx)(i.TableCell,{children:(0,t.jsx)(u,{meta:l.leadOwnerMeta,fallback:l.leadOwner})}),(0,t.jsx)(i.TableCell,{children:(0,t.jsx)(u,{meta:l.addedByMeta,fallback:l.addedBy})}),(0,t.jsx)(i.TableCell,{children:(0,t.jsx)("span",{className:"text-sm",children:l.createdAt?new Date(l.createdAt).toLocaleDateString():"â€”"})}),(0,t.jsxs)(i.TableCell,{className:"relative text-right",children:[(0,t.jsx)("button",{onClick:()=>h(e=>!e),className:"inline-flex items-center rounded-full p-2 hover:bg-slate-100",children:(0,t.jsxs)("svg",{className:"w-5 h-5 text-muted-foreground",viewBox:"0 0 24 24",fill:"currentColor",children:[(0,t.jsx)("circle",{cx:"5",cy:"12",r:"1.5"}),(0,t.jsx)("circle",{cx:"12",cy:"12",r:"1.5"}),(0,t.jsx)("circle",{cx:"19",cy:"12",r:"1.5"})]})}),x&&(0,t.jsx)("div",{className:"absolute right-0 z-30 mt-2 w-56 rounded-md bg-white shadow-lg border",children:(0,t.jsxs)("ul",{className:"py-1",children:[(0,t.jsx)("li",{children:(0,t.jsxs)("button",{onClick:()=>{h(!1),o(l.id)},className:"w-full flex items-center gap-3 px-4 py-3 text-sm hover:bg-slate-50",children:[(0,t.jsxs)("svg",{className:"w-5 h-5 text-muted-foreground",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[(0,t.jsx)("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M2 12s4-7 10-7 10 7 10 7-4 7-10 7S2 12 2 12z"}),(0,t.jsx)("circle",{cx:"12",cy:"12",r:"3",strokeWidth:"1.5"})]}),"View"]})}),(0,t.jsx)("li",{children:(0,t.jsxs)("button",{onClick:()=>{h(!1),n(l.id)},className:"w-full flex items-center gap-3 px-4 py-3 text-sm hover:bg-slate-50",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-muted-foreground",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,t.jsx)("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536M9 11l6-6L20 10M3 21h6l11-11a2 2 0 00-2-2L7 19v2z"})}),"Edit"]})}),(0,t.jsx)("li",{children:(()=>{let e="CONVERTED"===l.status;return(0,t.jsxs)("button",{disabled:e,onClick:()=>{e||(h(!1),m(l.id))},className:"w-full flex items-center gap-3 px-4 py-3 text-sm ".concat(e?"cursor-not-allowed text-muted-foreground opacity-50":"hover:bg-slate-50"),children:[(0,t.jsxs)("svg",{className:"w-5 h-5 text-muted-foreground",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[(0,t.jsx)("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11c2.21 0 4-1.79 4-4S14.21 3 12 3 8 4.79 8 7s1.79 4 4 4z"}),(0,t.jsx)("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M6 20v-1a4 4 0 014-4h4a4 4 0 014 4v1"})]}),e?"Already Client":"Change to Client"]})})()}),(0,t.jsx)("li",{children:(0,t.jsxs)("button",{onClick:p,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-destructive hover:bg-slate-50",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-destructive",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,t.jsx)("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M3 6h18M8 6v12a2 2 0 002 2h4a2 2 0 002-2V6M10 6V4a2 2 0 012-2h0a2 2 0 012 2v2"})}),"Delete"]})})]})})]})]})}function f(){let e=(0,d.useRouter)(),{data:s,error:u,isLoading:f,mutate:g}=(0,l.default)("/api/leads/admin/get",m,{refreshInterval:3e4,revalidateOnFocus:!0}),{data:v}=(0,l.default)("".concat(c,"/employee/all?page=0&size=20"),m,{revalidateOnFocus:!1}),j=v&&v.content?v.content:v||[],[b,y]=(0,a.useState)(""),[N,C]=(0,a.useState)(!1),[w,k]=(0,a.useState)("created"),[S,A]=(0,a.useState)(""),[T,L]=(0,a.useState)(""),[D,E]=(0,a.useState)("All"),[B,O]=(0,a.useState)("All"),[W,I]=(0,a.useState)(!1),[P,M]=(0,a.useState)(null),[z,F]=(0,a.useState)(null),R=s||[],H=(0,a.useMemo)(()=>{let e=new Set;return R.forEach(t=>{var l;t.leadOwner&&e.add(t.leadOwner),(null==(l=t.leadOwnerMeta)?void 0:l.name)&&e.add(t.leadOwnerMeta.name)}),["All",...Array.from(e).sort()]},[R]),U=(0,a.useMemo)(()=>{let e=new Set;return R.forEach(t=>{var l;t.addedBy&&e.add(t.addedBy),(null==(l=t.addedByMeta)?void 0:l.name)&&e.add(t.addedByMeta.name)}),["All",...Array.from(e).sort()]},[R]),q=e=>{if(!e)return null;let t=new Date(e);return isNaN(t.getTime())?null:t},V=(0,a.useMemo)(()=>{let e=b.trim().toLowerCase();return(R||[]).filter(t=>{var l,a;if(e&&![t.name,t.email,t.companyName,t.city,t.country,t.status,t.leadOwner,t.addedBy,t.mobileNumber].some(t=>!!t&&t.toLowerCase().includes(e))||"All"!==D&&((null==(l=t.leadOwnerMeta)?void 0:l.name)||t.leadOwner||"")!==D||"All"!==B&&((null==(a=t.addedByMeta)?void 0:a.name)||t.addedBy||"")!==B)return!1;if(S||T){let e=q("created"===w?t.createdAt:t.updatedAt);if(!e)return!1;if(S){let t=q(S);if(!t||e<t)return!1}if(T){let t=q(T);if(!t||(t.setHours(23,59,59,999),e>t))return!1}}return!0})},[R,b,D,B,S,T,w]),J=t=>{e.push("/clients/changeToClient?leadId=".concat(t))};return(0,t.jsxs)("main",{className:"container mx-auto max-w-6xl px-4 py-8",children:[(0,t.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between py-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Duration"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground underline",children:"Start Date to End Date"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("button",{onClick:()=>C(!0),className:"flex items-center gap-2 text-sm text-muted-foreground hover:text-slate-700",children:[(0,t.jsx)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,t.jsx)("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M6 12h12M10 18h4"})}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Filters"})]}),(0,t.jsx)("div",{className:"w-9 h-9 rounded-full bg-gray-200"})]})]})}),(0,t.jsxs)(r.Card,{className:"p-4 md:p-6",children:[(0,t.jsxs)("div",{className:"flex items-start md:items-center justify-between mb-4 gap-3",children:[(0,t.jsx)("div",{className:"flex items-center gap-3",children:(0,t.jsx)("button",{onClick:()=>I(!0),className:"inline-flex items-center gap-2 rounded-md bg-sky-600 px-4 py-2 text-white text-sm font-medium shadow-sm hover:bg-sky-700",children:"+ Add Lead"})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"flex items-center gap-2 rounded-md border bg-white px-3 py-2",children:(0,t.jsx)(n.Input,{value:b,onChange:e=>y(e.target.value),placeholder:"Search","aria-label":"Search leads",className:"border-0 p-0 focus:ring-0"})}),(0,t.jsx)(o.Button,{variant:"secondary",onClick:()=>g(),children:"Refresh"})]})]}),f?(0,t.jsx)("div",{className:"py-10 text-center text-muted-foreground",children:"Loading leadsâ€¦"}):u?(0,t.jsxs)("div",{className:"py-10 text-center",children:[(0,t.jsx)("p",{className:"text-destructive",children:"Failed to load leads."}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:u.message}),(0,t.jsx)(o.Button,{className:"mt-4",onClick:()=>g(),children:"Retry"})]}):0===V.length?(0,t.jsx)("div",{className:"py-10 text-center text-muted-foreground",children:"No leads found."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"mt-4 overflow-x-auto",children:(0,t.jsxs)(i.Table,{children:[(0,t.jsx)(i.TableHeader,{children:(0,t.jsxs)(i.TableRow,{children:[(0,t.jsx)(i.TableHead,{className:"w-16",children:"S.No."}),(0,t.jsx)(i.TableHead,{className:"min-w-[220px]",children:"Lead Name"}),(0,t.jsx)(i.TableHead,{children:"Contact Details"}),(0,t.jsx)(i.TableHead,{children:"Lead Owner"}),(0,t.jsx)(i.TableHead,{children:"Added By"}),(0,t.jsx)(i.TableHead,{children:"Created On"}),(0,t.jsx)(i.TableHead,{className:"text-right",children:"Action"})]})}),(0,t.jsx)(i.TableBody,{children:V.map((l,a)=>(0,t.jsx)(h,{lead:l,idx:a,mutate:()=>g(),onEdit:e=>{M(e)},onView:t=>{e.push("/leads/admin/get/".concat(t))},onChangeToClient:J},l.id))})]})}),(0,t.jsxs)("div",{className:"mt-6 flex items-center justify-between text-sm text-muted-foreground",children:[(0,t.jsx)("div",{children:"Result per page-8"}),(0,t.jsx)("div",{children:"Page 1 of 1 "}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{className:"p-2 rounded hover:bg-slate-100",children:(0,t.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,t.jsx)("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),(0,t.jsx)("button",{className:"p-2 rounded hover:bg-slate-100",children:(0,t.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,t.jsx)("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})})]})]})]})]}),N&&(0,t.jsxs)("div",{className:"fixed inset-0 z-40",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/20"}),(0,t.jsxs)("aside",{className:"absolute right-0 top-0 h-full w-80 bg-white border-l shadow-lg p-6 overflow-auto",role:"dialog","aria-label":"Filters",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Filters"}),(0,t.jsx)("button",{onClick:()=>C(!1),"aria-label":"Close filters",className:"p-1 rounded hover:bg-slate-100",children:"âœ•"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-muted-foreground mb-1",children:"Date Filter On"}),(0,t.jsxs)("select",{value:w,onChange:e=>k(e.target.value),className:"block w-full rounded-md border px-3 py-2",children:[(0,t.jsx)("option",{value:"created",children:"Created"}),(0,t.jsx)("option",{value:"updated",children:"Updated"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-muted-foreground mb-1",children:"Start Date"}),(0,t.jsx)("input",{type:"date",value:S,onChange:e=>A(e.target.value),className:"block w-full rounded-md border px-3 py-2"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-muted-foreground mb-1",children:"End Date"}),(0,t.jsx)("input",{type:"date",value:T,onChange:e=>L(e.target.value),className:"block w-full rounded-md border px-3 py-2"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-muted-foreground mb-1",children:"Lead Owner"}),(0,t.jsx)("select",{value:D,onChange:e=>E(e.target.value),className:"block w-full rounded-md border px-3 py-2",children:H.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-muted-foreground mb-1",children:"Added by"}),(0,t.jsx)("select",{value:B,onChange:e=>O(e.target.value),className:"block w-full rounded-md border px-3 py-2",children:U.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[(0,t.jsx)("button",{onClick:()=>{k("created"),A(""),L(""),E("All"),O("All")},className:"rounded-md px-4 py-2 border",children:"Clear"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.Button,{variant:"secondary",onClick:()=>C(!1),children:"Cancel"}),(0,t.jsx)(o.Button,{onClick:()=>C(!1),children:"Apply"})]})]})]})]})]}),W&&(0,t.jsx)(x,{onClose:()=>I(!1),onCreated:async()=>{I(!1),await g()},employees:j}),null!==P&&(0,t.jsx)(p,{leadId:P,onClose:()=>M(null),onSaved:async()=>{M(null),await g()}})]})}function p(e){let{leadId:l,onClose:s,onSaved:d}=e,[r,n]=(0,a.useState)(null),[o,i]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{let e=!0;return(async()=>{try{let t=localStorage.getItem("accessToken"),a=await fetch("".concat(c,"/leads/").concat(l),{headers:{Authorization:"Bearer ".concat(t)}});if(!a.ok)throw Error(await a.text());let s=await a.json();e&&n(s)}catch(e){alert("Failed to load lead: "+(null==e?void 0:e.message)),s()}finally{e&&i(!1)}})(),()=>{e=!1}},[l,s]),o||!r)?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"bg-white p-6 rounded shadow",children:"Loadingâ€¦"})}):(0,t.jsx)(g,{lead:r,onClose:s,onSaved:d})}function g(e){var l,s,d,r,n,i,m,u,x,h,f,p,g,v,j;let{lead:b,onClose:y,onSaved:N}=e,[C,w]=(0,a.useState)({name:null!=(l=null==b?void 0:b.name)?l:"",email:null!=(s=null==b?void 0:b.email)?s:"",clientCategory:null!=(d=null==b?void 0:b.clientCategory)?d:"",leadSource:null!=(r=null==b?void 0:b.leadSource)?r:"",leadOwner:null!=(n=null==b?void 0:b.leadOwner)?n:"",addedBy:null!=(i=null==b?void 0:b.addedBy)?i:"",autoConvertToClient:!!(null==b?void 0:b.autoConvertToClient),companyName:null!=(m=null==b?void 0:b.companyName)?m:"",officialWebsite:null!=(u=null==b?void 0:b.officialWebsite)?u:"",mobileNumber:String(null!=(x=null==b?void 0:b.mobileNumber)?x:""),officePhone:null!=(h=null==b?void 0:b.officePhone)?h:"",city:null!=(f=null==b?void 0:b.city)?f:"",state:null!=(p=null==b?void 0:b.state)?p:"",postalCode:null!=(g=null==b?void 0:b.postalCode)?g:"",country:null!=(v=null==b?void 0:b.country)?v:"",companyAddress:null!=(j=null==b?void 0:b.companyAddress)?j:""}),[k,S]=(0,a.useState)(!1),[A,T]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&y()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[y]);let L=(e,t)=>w(l=>({...l,[e]:t})),D=async e=>{null==e||e.preventDefault();let t=C.name.trim()&&C.email.trim()?null:"Name and Email are required.";if(t)return void T(t);T(null),S(!0);try{let e=localStorage.getItem("accessToken");if(!e)throw Error("No access token.");let t={name:C.name,email:C.email,clientCategory:C.clientCategory||void 0,leadSource:C.leadSource||void 0,leadOwner:C.leadOwner||void 0,addedBy:C.addedBy||void 0,autoConvertToClient:!!C.autoConvertToClient,companyName:C.companyName||void 0,officialWebsite:C.officialWebsite||void 0,mobileNumber:C.mobileNumber?Number(C.mobileNumber):void 0,officePhone:C.officePhone||void 0,city:C.city||void 0,state:C.state||void 0,postalCode:C.postalCode||void 0,country:C.country||void 0,companyAddress:C.companyAddress||void 0},l=await fetch("".concat(c,"/leads/").concat(b.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)});if(!l.ok){let e=await l.text().catch(()=>"");throw Error(e||"Update failed")}alert("Lead updated successfully."),await N()}catch(e){var l;T(null!=(l=null==e?void 0:e.message)?l:"Failed to update lead.")}finally{S(!1)}};return(0,t.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/30",onClick:y}),(0,t.jsx)("div",{className:"fixed inset-0 flex items-start justify-center px-4 pt-12",children:(0,t.jsxs)("div",{className:"max-w-4xl w-full bg-white rounded-lg shadow-lg border overflow-auto",style:{maxHeight:"92vh"},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Update Lead Contact"}),(0,t.jsx)("button",{onClick:y,className:"text-muted-foreground p-1 rounded hover:bg-slate-100",children:"âœ•"})]}),(0,t.jsxs)("form",{onSubmit:D,className:"p-6 space-y-6",children:[A&&(0,t.jsx)("div",{className:"text-destructive text-sm",children:A}),(0,t.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,t.jsx)("h4",{className:"font-medium mb-3",children:"Contact Details"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground",children:"Name *"}),(0,t.jsx)("input",{className:"w-full border rounded-md p-2",value:C.name,onChange:e=>L("name",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground",children:"Email *"}),(0,t.jsx)("input",{className:"w-full border rounded-md p-2",value:C.email,onChange:e=>L("email",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground",children:"Lead Source"}),(0,t.jsx)("input",{className:"w-full border rounded-md p-2",value:C.leadSource,onChange:e=>L("leadSource",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground",children:"Lead Owner"}),(0,t.jsx)("input",{className:"w-full border rounded-md p-2",value:C.leadOwner,onChange:e=>L("leadOwner",e.target.value)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 md:col-span-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"autoConvert",checked:!!C.autoConvertToClient,onChange:e=>L("autoConvertToClient",e.target.checked)}),(0,t.jsx)("label",{htmlFor:"autoConvert",className:"text-sm",children:'Auto Convert lead to client when the deal stage is set to "WIN".'})]})]})]}),(0,t.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,t.jsx)("h4",{className:"font-medium mb-3",children:"Company Details"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-left",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground",children:"Company Name"}),(0,t.jsx)("input",{className:"w-full border rounded-md p-2",value:C.companyName,onChange:e=>L("companyName",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground",children:"Official Website"}),(0,t.jsx)("input",{className:"w-full border rounded-md p-2",value:C.officialWebsite,onChange:e=>L("officialWebsite",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground ",children:"Mobile Number"}),(0,t.jsx)("input",{className:"w-full border rounded-md p-2",value:C.mobileNumber,onChange:e=>L("mobileNumber",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground",children:"Office Phone No."}),(0,t.jsx)("input",{className:"w-full border rounded-md p-2",value:C.officePhone,onChange:e=>L("officePhone",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground",children:"City"}),(0,t.jsx)("input",{className:"w-full border rounded-md p-2",value:C.city,onChange:e=>L("city",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground",children:"State"}),(0,t.jsx)("input",{className:"w-full border rounded-md p-2",value:C.state,onChange:e=>L("state",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground",children:"Postal Code"}),(0,t.jsx)("input",{className:"w-full border rounded-md p-2",value:C.postalCode,onChange:e=>L("postalCode",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground",children:"Country"}),(0,t.jsx)("input",{className:"w-full border rounded-md p-2",value:C.country,onChange:e=>L("country",e.target.value)})]}),(0,t.jsxs)("div",{className:"md:col-span-3",children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground",children:"Company Address"}),(0,t.jsx)("textarea",{className:"w-full border rounded-md p-2 h-28",value:C.companyAddress,onChange:e=>L("companyAddress",e.target.value)})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,t.jsx)(o.Button,{variant:"outline",onClick:y,disabled:k,children:"Cancel"}),(0,t.jsx)(o.Button,{type:"submit",onClick:D,disabled:k,children:k?"Updating...":"Update"})]})]})]})})]})}}]);