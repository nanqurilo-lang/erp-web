(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,173012,e=>{"use strict";e.s(["default",()=>Y],173012),e.i(247167);var t=e.i(843476),s=e.i(271645),l=e.i(618566),a=e.i(581949),r=e.i(927591);e.i(288683);var n=e.i(427217);function i(e){var l,a,r,i,c,d,o,m,u,x,h,p,g;let j,{open:f,task:b,onClose:y,onMarkComplete:v}=e,[N,w]=(0,s.useState)("files"),[k,S]=(0,s.useState)(!1),[C,T]=(0,s.useState)(!1),D=(0,s.useRef)(null),A=(0,s.useRef)(null),[E,I]=(0,s.useState)(!1),L=(0,s.useRef)(null),P=(0,s.useRef)(null),[U,M]=(0,s.useState)(!1),[z,R]=(0,s.useState)(!1),B=(0,s.useRef)(null),F=(0,s.useRef)(null),[O,_]=(0,s.useState)(!1),[q,H]=(0,s.useState)(""),[J,W]=(0,s.useState)(""),[V,X]=(0,s.useState)(null),[G,K]=(0,s.useState)(!1),[Y,Z]=(0,s.useState)(!1),[$,Q]=(0,s.useState)(""),[ee,et]=(0,s.useState)(""),[es,el]=(0,s.useState)(null),[ea,er]=(0,s.useState)([{id:1,title:"My Note",type:"public",content:"This is the body of My Note."}]),[en,ei]=(0,s.useState)(null),[ec,ed]=(0,s.useState)(null),[eo,em]=(0,s.useState)(!1),[eu,ex]=(0,s.useState)(!1),[eh,ep]=(0,s.useState)(!1),[eg,ej]=(0,s.useState)(!1),[ef,eb]=(0,s.useState)(""),[ey,ev]=(0,s.useState)("public"),[eN,ew]=(0,s.useState)(""),[ek,eS]=(0,s.useState)(null),[eC,eT]=(0,s.useState)(""),[eD,eA]=(0,s.useState)("public"),[eE,eI]=(0,s.useState)(""),[eL,eP]=(0,s.useState)(!1),[eU,eM]=(0,s.useState)(""),[ez,eR]=(0,s.useState)(""),[eB,eF]=(0,s.useState)(""),[eO,e_]=(0,s.useState)(null),[eq,eH]=(0,s.useState)(null),[eJ,eW]=(0,s.useState)(!1),[eV,eX]=(0,s.useState)("Doing"),[eG,eK]=(0,s.useState)(""),[eY,eZ]=(0,s.useState)(""),[e$,eQ]=(0,s.useState)(""),[e0,e1]=(0,s.useState)(""),[e2,e4]=(0,s.useState)("Low"),[e6,e3]=(0,s.useState)(!1),[e5,e8]=(0,s.useState)(!1),[e7,e9]=(0,s.useState)(""),[te,tt]=(0,s.useState)(!1),[ts,tl]=(0,s.useState)(""),[ta,tr]=(0,s.useState)(null),[tn,ti]=(0,s.useState)(null),[tc]=(0,s.useState)([{id:1,employee:{employeeId:"u1",name:"Jack Smith",profileUrl:void 0,role:"Trainee"},startTime:"2025-08-02T11:00:00",endTime:"2025-08-02T13:00:00",memo:"---",minutesLogged:480},{id:2,employee:{employeeId:"u1",name:"Jack Smith",profileUrl:void 0,role:"Trainee"},startTime:"2025-08-02T11:00:00",endTime:"2025-08-02T13:00:00",memo:"---",minutesLogged:480},{id:3,employee:{employeeId:"u1",name:"Jack Smith",profileUrl:void 0,role:"Trainee"},startTime:"2025-08-02T11:00:00",endTime:"2025-08-02T13:00:00",memo:"---",minutesLogged:480},{id:4,employee:{employeeId:"u1",name:"Jack Smith",profileUrl:void 0,role:"Trainee"},startTime:"2025-08-02T11:00:00",endTime:"2025-08-02T13:00:00",memo:"---",minutesLogged:480}]);(0,s.useEffect)(()=>{f?S(!0):(S(!1),T(!1),I(!1),R(!1),_(!1),K(!1),Z(!1),ei(null),em(!1),ex(!1),ep(!1),ed(null),ej(!1),eP(!1))},[f]),(0,s.useEffect)(()=>{function e(e){if(C&&D.current&&!D.current.contains(e.target)&&A.current&&!A.current.contains(e.target)&&T(!1),z&&B.current&&!B.current.contains(e.target)&&F.current&&!F.current.contains(e.target)&&R(!1),E&&L.current&&!L.current.contains(e.target)&&I(!1),null!==en){let t=e.target.closest("[data-notes-menu]"),s=e.target.closest("[data-notes-menu-btn]");t||s||ei(null)}}function t(e){"Escape"===e.key&&(T(!1),R(!1),I(!1),_(!1),K(!1),Z(!1),ei(null),em(!1),ex(!1),ep(!1),ej(!1),eP(!1))}return document.addEventListener("mousedown",e),document.addEventListener("keydown",t),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",t)}},[C,z,E,en,eg]);let td=(0,s.useMemo)(()=>{switch(((null==b?void 0:b.priority)||"").toLowerCase()){case"low":return"bg-green-500";case"medium":return"bg-yellow-400";case"high":return"bg-orange-500";case"urgent":return"bg-red-600";default:return"bg-gray-400"}},[null==b?void 0:b.priority]);if(!f||!b)return null;let to=e=>e?new Date(e).toLocaleDateString():"--",tm=e=>{if(!e)return"--";let t=new Date(e),s=String(t.getDate()).padStart(2,"0"),l=String(t.getMonth()+1).padStart(2,"0"),a=t.getFullYear();return"".concat(s,"/").concat(l,"/").concat(a)},tu=e=>e?new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"--",tx=e=>{if(null==e)return"--";let t=Math.floor((e||0)/60),s=(e||0)%60;return t&&s?"".concat(t,"h ").concat(s,"m"):t?"".concat(t,"h"):"".concat(s,"m")},th=()=>{em(!1),ed(null)};return(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex justify-end bg-black/0",children:[(0,t.jsxs)("div",{className:["relative h-full w-[83vw] max-w-[83vw] bg-white shadow-xl border-l transform transition-transform duration-300",k?"translate-x-0":"translate-x-full","flex flex-col"].join(" "),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:["Task #",b.projectId?"RTA-".concat(String(b.id).padStart(2,"0")):"RTA-".concat(String(b.id))]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),(0,t.jsx)("div",{className:"text-lg font-semibold",children:null!=(r=b.title)?r:"Task Name"})]})]}),(0,t.jsx)("button",{"aria-label":"close",onClick:y,className:"p-2 rounded hover:bg-gray-100",title:"Close",children:(0,t.jsx)(n.XMarkIcon,{className:"w-5 h-5 text-gray-600"})})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-auto",children:[(0,t.jsxs)("div",{className:"p-6 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 bg-white border rounded-lg p-5 relative",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsx)("div",{children:(0,t.jsx)("button",{onClick:()=>b.id&&(null==v?void 0:v(b.id)),className:"inline-block px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 text-sm",children:"Mark As Complete"})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 relative",children:[(0,t.jsx)("button",{ref:A,onClick:()=>T(e=>!e),className:"p-2 rounded hover:bg-gray-100",children:(0,t.jsxs)("svg",{className:"w-5 h-5 text-gray-600",fill:"currentColor",children:[(0,t.jsx)("circle",{cx:"5",cy:"12",r:"1.5"}),(0,t.jsx)("circle",{cx:"12",cy:"12",r:"1.5"}),(0,t.jsx)("circle",{cx:"19",cy:"12",r:"1.5"})]})}),C&&(0,t.jsxs)("div",{ref:D,className:"absolute right-10 top-10 w-48 bg-white border rounded-lg shadow-md p-2 z-50",children:[(0,t.jsx)("button",{onClick:()=>{T(!1),I(!0)},className:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm",children:"ðŸ”” Send Reminder"}),(0,t.jsx)("button",{onClick:()=>{var e,t,s,l,a,r,n,i,c,d,o,m,u,x;T(!1),eM(null!=(l=b.title)?l:""),eR(""),eF(null!=(a=b.projectName)?a:""),e_(null!=(r=b.startDate)?r:null),eH(null!=(n=b.dueDate)?n:null),eW(!!b.noDueDate),eX(null!=(i=null==(e=b.taskStage)?void 0:e.name)?i:"Doing"),eK(null!=(d=null!=(c=b.assignedEmployees&&b.assignedEmployees.length&&b.assignedEmployees[0].name)?c:b.assignedEmployeeIds&&b.assignedEmployeeIds[0])?d:""),eZ(null!=(o=b.description)?o:""),eQ(null!=(m=b.labels&&(null==(t=b.labels[0])?void 0:t.name))?m:""),e1(null!=(u=null==(s=b.milestone)?void 0:s.title)?u:""),e4(b.priority?String(b.priority).charAt(0).toUpperCase()+String(b.priority).slice(1):"Low"),e3(!!b.isPrivate),e8(!!b.timeEstimateMinutes),e9(null!=(x=b.timeEstimateMinutes)?x:""),tt(!!b.isDependent),tl(""),tr(null),ti(null),eP(!0)},className:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm",children:"âœï¸ Edit Task"}),(0,t.jsx)("button",{onClick:()=>{T(!1),alert("Pin Task clicked")},className:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm",children:"ðŸ“Œ Pin Task"}),(0,t.jsx)("button",{onClick:()=>{T(!1);let e="".concat(window.location.origin,"/tasks/").concat(b.id);try{var t;null==(t=navigator.clipboard)||t.writeText(e),alert("Task link copied to clipboard")}catch(t){alert("Task link: "+e)}},className:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm",children:"ðŸ”— Copy Task Link"})]}),(0,t.jsx)("button",{onClick:y,className:"p-2 rounded hover:bg-gray-100"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-x-6 gap-y-3 mt-6 text-sm",children:[(0,t.jsx)("div",{className:"text-gray-500",children:"Project"}),(0,t.jsx)("div",{className:"font-medium",children:null!=(c=b.projectName)?c:"Project ".concat(null!=(i=b.projectId)?i:"--")}),(0,t.jsx)("div",{className:"text-gray-500",children:"Priority"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-2 h-2 rounded-full ".concat(td)}),(0,t.jsx)("span",{className:"font-medium",children:null!=(d=b.priority)?d:"Low"})]}),(0,t.jsx)("div",{className:"text-gray-500",children:"Assigned to"}),(0,t.jsx)("div",{className:"font-medium",children:b.assignedEmployees&&b.assignedEmployees.length?b.assignedEmployees.map(e=>e.name).join(", "):b.assignedEmployeeIds&&b.assignedEmployeeIds.length?b.assignedEmployeeIds.join(", "):"--"}),(0,t.jsx)("div",{className:"text-gray-500",children:"Project Code"}),(0,t.jsxs)("div",{className:"font-medium",children:["RTA-",String(b.id).padStart(2,"0")]}),(0,t.jsx)("div",{className:"text-gray-500",children:"Milestones"}),(0,t.jsx)("div",{className:"font-medium",children:null!=(o=null==(l=b.milestone)?void 0:l.title)?o:"----"}),(0,t.jsx)("div",{className:"text-gray-500",children:"Label"}),(0,t.jsx)("div",{className:"font-medium",children:b.labels&&b.labels.length?b.labels.map(e=>e.name).join(", "):"--"}),(0,t.jsx)("div",{className:"text-gray-500",children:"Task Category"}),(0,t.jsx)("div",{className:"font-medium",children:"--"}),(0,t.jsx)("div",{className:"text-gray-500",children:"Description"}),(0,t.jsx)("div",{className:"font-medium whitespace-pre-wrap",children:null!=(m=b.description)?m:"--"})]})]}),(0,t.jsxs)("div",{className:"bg-white border rounded-lg p-5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"w-3 h-3 rounded-full bg-blue-500"}),(0,t.jsx)("div",{className:"font-medium",children:null!=(u=null==(a=b.taskStage)?void 0:a.name)?u:"Doing"})]}),(0,t.jsxs)("div",{className:"mt-4 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between py-2",children:[(0,t.jsx)("div",{className:"text-gray-500",children:"Created On"}),(0,t.jsx)("div",{className:"font-medium",children:(j=b.createdOn)?new Date(j).toLocaleString():"--"})]}),(0,t.jsxs)("div",{className:"flex justify-between py-2",children:[(0,t.jsx)("div",{className:"text-gray-500",children:"Start Date"}),(0,t.jsx)("div",{className:"font-medium",children:to(b.startDate)})]}),(0,t.jsxs)("div",{className:"flex justify-between py-2",children:[(0,t.jsx)("div",{className:"text-gray-500",children:"Due Date"}),(0,t.jsx)("div",{className:"font-medium",children:b.noDueDate?"--":to(b.dueDate)})]}),(0,t.jsxs)("div",{className:"flex justify-between py-2",children:[(0,t.jsx)("div",{className:"text-gray-500",children:"Hours Logged"}),(0,t.jsx)("div",{className:"font-medium",children:tx(null!=(x=b.hoursLoggedMinutes)?x:null)})]})]})]})]}),(0,t.jsx)("div",{className:"px-6 pb-6",children:(0,t.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsx)("button",{onClick:()=>w("files"),className:"pb-2 ".concat("files"===N?"border-b-2 border-blue-600 font-medium":"text-gray-500"),children:"Files"}),(0,t.jsx)("button",{onClick:()=>w("subtask"),className:"pb-2 ".concat("subtask"===N?"border-b-2 border-blue-600 font-medium":"text-gray-500"),children:"Sub Task"}),(0,t.jsx)("button",{onClick:()=>w("timesheet"),className:"pb-2 ".concat("timesheet"===N?"border-b-2 border-blue-600 font-medium":"text-gray-500"),children:"Timesheet"}),(0,t.jsx)("button",{onClick:()=>w("notes"),className:"pb-2 ".concat("notes"===N?"border-b-2 border-blue-600 font-medium":"text-gray-500"),children:"Notes"})]}),(0,t.jsx)("div",{})]}),(0,t.jsxs)("div",{className:"mt-4 border rounded-lg p-4 bg-white h-60 overflow-auto",children:[(0,t.jsx)("input",{ref:P,type:"file",className:"hidden",onChange:e=>{let t=e.target.files;t&&0!==t.length&&(alert("".concat(t.length," file(s) selected. Integrate your upload handler to actually send files to server.")),e.currentTarget.value="")},multiple:!0}),"files"===N&&(0,t.jsxs)("div",{className:"h-full flex flex-col",children:[(0,t.jsx)("div",{className:"flex items-center gap-3",children:(0,t.jsxs)("button",{onClick:()=>{var e;return null==(e=P.current)?void 0:e.click()},className:"inline-flex items-center gap-2 text-blue-600 text-sm font-medium hover:underline","aria-label":"Upload File",title:"Upload File",children:[(0,t.jsx)("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-white border border-blue-600 text-blue-600 text-xs",children:"+"}),(0,t.jsx)("span",{children:"Upload File"})]})}),(0,t.jsx)("div",{className:"mt-3 flex-1 overflow-auto",children:b.attachments&&b.attachments.length?(0,t.jsx)("ul",{className:"space-y-2 text-sm",children:b.attachments.map((e,s)=>{var l;let a=null!=(l=e.name)?l:(e=>{if(!e)return"attachment";try{let t=e.split("/").pop()||e;return decodeURIComponent(t.split("?")[0])}catch(t){return e}})(e.url);return(0,t.jsxs)("li",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"truncate max-w-[80%]",children:a}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:e.url?(0,t.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",className:"underline",children:"Download"}):null})]},s)})}):(0,t.jsx)("div",{className:"text-gray-500"})})]}),"subtask"===N&&(0,t.jsxs)("div",{className:"h-full flex flex-col",children:[(0,t.jsx)("div",{className:"flex items-center gap-3",children:(0,t.jsxs)("button",{onClick:()=>{H(""),W(""),X(null),_(!0)},className:"inline-flex items-center gap-2 text-blue-600 text-sm font-medium hover:underline","aria-label":"Add a Sub Task",title:"Add a Sub Task",children:[(0,t.jsx)("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-white border border-blue-600 text-blue-600 text-xs",children:"+"}),(0,t.jsx)("span",{children:"Add a Sub Task"})]})}),(0,t.jsx)("div",{className:"mt-4 flex-1 overflow-auto",children:(0,t.jsx)("ul",{className:"space-y-3",children:(0,t.jsxs)("li",{className:"flex items-center justify-between pr-2",children:[(0,t.jsx)("div",{className:"flex items-center gap-3",children:(0,t.jsxs)("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:U,onChange:()=>{M(e=>!e)},className:"w-4 h-4 rounded border-gray-300","aria-label":"toggle subtask done"}),(0,t.jsx)("span",{className:"text-sm ".concat(U?"line-through text-gray-400":"text-gray-700"),children:"Title of the sub task"})]})}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("button",{ref:F,onClick:()=>R(e=>!e),className:"p-2 rounded hover:bg-gray-100","aria-label":"subtask menu",children:(0,t.jsxs)("svg",{className:"w-5 h-5 text-gray-600",fill:"currentColor",children:[(0,t.jsx)("circle",{cx:"5",cy:"12",r:"1.5"}),(0,t.jsx)("circle",{cx:"12",cy:"12",r:"1.5"}),(0,t.jsx)("circle",{cx:"19",cy:"12",r:"1.5"})]})}),z&&(0,t.jsxs)("div",{ref:B,className:"absolute right-0 top-8 w-40 bg-white border rounded-lg shadow-md p-1 z-50",children:[(0,t.jsxs)("button",{onClick:()=>{R(!1),K(!0)},className:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4 text-gray-600",viewBox:"0 0 24 24",fill:"none",children:(0,t.jsx)("path",{d:"M12 5c-7 0-11 7-11 7s4 7 11 7 11-7 11-7-4-7-11-7z",stroke:"currentColor",strokeWidth:"1.2"})}),"View"]}),(0,t.jsxs)("button",{onClick:()=>{R(!1),Q("Title of the sub task"),et(""),el(null),Z(!0)},className:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4 text-gray-600",viewBox:"0 0 24 24",fill:"none",children:(0,t.jsx)("path",{d:"M3 21l3-1 11-11 2 2-11 11-1 3H3z",stroke:"currentColor",strokeWidth:"1.2"})}),"Edit"]}),(0,t.jsxs)("button",{onClick:()=>{R(!1),confirm("Delete subtask? This is UI-only.")&&alert("Subtask deleted (UI-only). Integrate API to persist.")},className:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm flex items-center gap-2 text-red-600",children:[(0,t.jsx)("svg",{className:"w-4 h-4 text-red-600",viewBox:"0 0 24 24",fill:"none",children:(0,t.jsx)("path",{d:"M3 6h18M8 6v12a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V6M10 6V4a2 2 0 0 1 2-2h0a2 2 0 0 1 2 2v2",stroke:"currentColor",strokeWidth:"1.2"})}),"Delete"]})]})]})]})})})]}),"timesheet"===N&&(0,t.jsx)("div",{className:"h-full flex flex-col",children:(0,t.jsx)("div",{className:"mt-1 flex-1 overflow-auto",children:(0,t.jsxs)("div",{className:"rounded-md overflow-hidden border",children:[(0,t.jsxs)("div",{className:"bg-[#e8f2fb] px-4 py-3 text-sm text-gray-700 grid grid-cols-4 gap-4 items-center rounded-t-md",children:[(0,t.jsx)("div",{className:"font-medium",children:"Employee"}),(0,t.jsx)("div",{className:"font-medium",children:"Start Time"}),(0,t.jsx)("div",{className:"font-medium",children:"End Time"}),(0,t.jsx)("div",{className:"font-medium text-right",children:"Hours Logged"})]}),(0,t.jsx)("div",{className:"bg-white divide-y",children:tc.map(e=>{var s;return(0,t.jsxs)("div",{className:"px-4 py-4 grid grid-cols-4 gap-4 items-center text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center overflow-hidden",children:e.employee.profileUrl?(0,t.jsx)("img",{src:e.employee.profileUrl,alt:e.employee.name,className:"w-full h-full object-cover"}):(0,t.jsx)("span",{className:"text-xs text-gray-600",children:e.employee.name.split(" ").map(e=>e[0]).join("")})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.employee.name}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:null!=(s=e.employee.role)?s:""})]})]}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("div",{className:"font-medium",children:tm(e.startTime)}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:tu(e.startTime)})]}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("div",{className:"font-medium",children:tm(e.endTime)}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:tu(e.endTime)})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsx)("div",{className:"font-medium",children:tx(e.minutesLogged)})})]},e.id)})}),(0,t.jsx)("div",{className:"h-2 bg-white rounded-b-md"})]})})}),"notes"===N&&(0,t.jsxs)("div",{className:"h-full flex flex-col",children:[(0,t.jsx)("div",{className:"flex items-center gap-3",children:(0,t.jsxs)("button",{onClick:()=>{eb(""),ew(""),ev("public"),eS(null),ej(!0)},"data-add-note-btn":!0,className:"inline-flex items-center gap-2 text-blue-600 text-sm font-medium hover:underline","aria-label":"Add a Note",title:"Add a Note",children:[(0,t.jsx)("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-white border border-blue-600 text-blue-600 text-xs",children:"+"}),(0,t.jsx)("span",{children:"Add a Note"})]})}),(0,t.jsx)("div",{className:"mt-4 flex-1 overflow-auto relative",children:(0,t.jsxs)("div",{className:"rounded-md overflow-hidden border relative",children:[(0,t.jsxs)("div",{className:"bg-[#e8f2fb] px-4 py-3 text-sm text-gray-700 grid grid-cols-3 gap-4 items-center",children:[(0,t.jsx)("div",{className:"font-medium",children:"Note Title"}),(0,t.jsx)("div",{className:"font-medium",children:"Note Type"}),(0,t.jsx)("div",{className:"font-medium text-right",children:"Action"})]}),null!==en&&ec&&(0,t.jsxs)("div",{"data-notes-menu":!0,className:"absolute right-3 top-3 z-50 w-44 bg-white border rounded-lg shadow-md p-1",children:[(0,t.jsx)("button",{onClick:()=>{ec&&(em(!0),ei(null))},className:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm flex items-center gap-2",children:"View"}),(0,t.jsx)("button",{onClick:()=>{var e;ec&&(eT(ec.title),eA(ec.type),eI(null!=(e=ec.content)?e:""),ex(!0),ei(null))},className:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm flex items-center gap-2",children:"Edit"}),(0,t.jsx)("button",{onClick:()=>{ec&&(ep(!0),ei(null))},className:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm flex items-center gap-2 text-red-600",children:"Delete"})]}),(0,t.jsx)("div",{className:"bg-white p-3 text-sm",children:ea.length?(0,t.jsx)("ul",{className:"space-y-3",children:ea.map(e=>(0,t.jsxs)("li",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"truncate max-w-[40%]",children:e.title}),(0,t.jsx)("div",{className:"flex items-center gap-2 text-gray-600",children:"public"===e.type?(0,t.jsx)("span",{children:"Public"}):(0,t.jsx)("span",{children:"Private"})}),(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)("button",{"data-notes-menu-btn":!0,onClick:()=>{ed(e),ei(e.id)},className:"p-2 rounded hover:bg-gray-100","aria-label":"note actions",children:(0,t.jsxs)("svg",{className:"w-5 h-5 text-gray-600",fill:"currentColor",children:[(0,t.jsx)("circle",{cx:"5",cy:"12",r:"1.5"}),(0,t.jsx)("circle",{cx:"12",cy:"12",r:"1.5"}),(0,t.jsx)("circle",{cx:"19",cy:"12",r:"1.5"})]})})})]},e.id))}):(0,t.jsx)("div",{className:"text-gray-500 p-4",children:"No notes yet"})})]})})]})]})]})})]})]}),E&&(0,t.jsx)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/30 px-4",children:(0,t.jsxs)("div",{ref:L,role:"dialog","aria-modal":"true",className:"w-full max-w-md bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold",children:"Are You Sure?"}),(0,t.jsx)("p",{className:"mt-3 text-sm text-gray-500",children:"You want to send reminder to the assigned employees."})]}),(0,t.jsxs)("div",{className:"mt-6 flex items-center justify-center gap-4",children:[(0,t.jsx)("button",{onClick:()=>{I(!1)},className:"px-6 py-2 border border-blue-600 text-blue-600 rounded-full text-sm hover:bg-gray-50",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>{alert("Reminder sent to assigned employees"),I(!1)},className:"px-6 py-2 bg-blue-600 text-white rounded-full text-sm hover:bg-blue-700",children:"Yes"})]})]})}),O&&(0,t.jsx)("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/30 px-4",children:(0,t.jsxs)("div",{role:"dialog","aria-modal":"true",className:"w-full max-w-lg bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Title ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{value:q,onChange:e=>{H(e.target.value),V&&X(null)},className:"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter subtask title",autoFocus:!0}),V&&(0,t.jsx)("div",{className:"mt-1 text-xs text-red-600",children:V})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,t.jsx)("textarea",{value:J,onChange:e=>W(e.target.value),className:"mt-2 w-full min-h-[90px] rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter description (optional)"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-6",children:[(0,t.jsx)("button",{onClick:()=>{_(!1),X(null)},className:"px-6 py-2 rounded-full border border-blue-600 text-blue-600 text-sm hover:bg-gray-50",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>{if(!q.trim())return void X("Title is required");alert('Subtask "'.concat(q,'" created (UI-only). Integrate API to persist.')),_(!1)},className:"px-6 py-2 rounded-full bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Save"})]})]})}),G&&(0,t.jsx)("div",{className:"fixed inset-0 z-[80] flex items-center justify-center bg-black/30 px-4",children:(0,t.jsxs)("div",{role:"dialog","aria-modal":"true",className:"w-full max-w-lg bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Subtask Details"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-x-6 gap-y-3 text-sm",children:[(0,t.jsx)("div",{className:"text-gray-500",children:"Title"}),(0,t.jsx)("div",{className:"font-medium",children:"Title of the sub task"}),(0,t.jsx)("div",{className:"text-gray-500",children:"Description"}),(0,t.jsx)("div",{className:"font-medium",children:"--"})]}),(0,t.jsx)("div",{className:"mt-6 flex justify-end",children:(0,t.jsx)("button",{onClick:()=>K(!1),className:"px-6 py-2 rounded-full border border-gray-300 text-gray-700 text-sm hover:bg-gray-50",children:"Close"})})]})}),Y&&(0,t.jsx)("div",{className:"fixed inset-0 z-[90] flex items-center justify-center bg-black/30 px-4",children:(0,t.jsxs)("div",{role:"dialog","aria-modal":"true",className:"w-full max-w-lg bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Title ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{value:$,onChange:e=>{Q(e.target.value),es&&el(null)},className:"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter subtask title",autoFocus:!0}),es&&(0,t.jsx)("div",{className:"mt-1 text-xs text-red-600",children:es})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,t.jsx)("textarea",{value:ee,onChange:e=>et(e.target.value),className:"mt-2 w-full min-h-[90px] rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter description (optional)"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-6",children:[(0,t.jsx)("button",{onClick:()=>{Z(!1),el(null)},className:"px-6 py-2 rounded-full border border-blue-600 text-blue-600 text-sm hover:bg-gray-50",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>{if(!$.trim())return void el("Title is required");alert('Subtask updated to "'.concat($,'" (UI-only). Integrate API to persist.')),Z(!1)},className:"px-6 py-2 rounded-full bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Update"})]})]})}),eg&&(0,t.jsx)("div",{className:"fixed inset-0 z-[85] flex items-center justify-center bg-black/30 px-4",children:(0,t.jsxs)("div",{"data-add-note-modal":!0,role:"dialog","aria-modal":"true",className:"w-full max-w-lg bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Note Title ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{value:ef,onChange:e=>{eb(e.target.value),ek&&eS(null)},className:"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter note title",autoFocus:!0}),ek&&(0,t.jsx)("div",{className:"mt-1 text-xs text-red-600",children:ek})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Note Detail"}),(0,t.jsx)("textarea",{value:eN,onChange:e=>ew(e.target.value),className:"mt-2 w-full min-h-[100px] rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter note details (optional)"})]}),(0,t.jsxs)("div",{className:"mb-6 flex items-center gap-6",children:[(0,t.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,t.jsx)("input",{type:"radio",name:"note-type",checked:"public"===ey,onChange:()=>ev("public")}),(0,t.jsx)("span",{className:"text-sm",children:"Public"})]}),(0,t.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,t.jsx)("input",{type:"radio",name:"note-type",checked:"private"===ey,onChange:()=>ev("private")}),(0,t.jsx)("span",{className:"text-sm",children:"Private"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-6",children:[(0,t.jsx)("button",{onClick:()=>{ej(!1),eS(null)},className:"px-8 py-2 rounded-full border border-blue-600 text-blue-600 text-sm hover:bg-gray-50",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>{if(!ef.trim())return void eS("Title is required");let e={id:ea.length?Math.max(...ea.map(e=>e.id))+1:1,title:ef.trim(),type:ey,content:eN};er(t=>[e,...t]),ej(!1),eb(""),ew(""),ev("public")},className:"px-8 py-2 rounded-full bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Save"})]})]})}),eo&&ec&&(0,t.jsx)("div",{className:"fixed inset-0 z-[86] flex items-center justify-center bg-black/30 px-4",children:(0,t.jsxs)("div",{role:"dialog","aria-modal":"true",className:"w-full max-w-lg bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"View Note"}),(0,t.jsx)("button",{onClick:th,className:"p-2 rounded hover:bg-gray-100",children:(0,t.jsx)(n.XMarkIcon,{className:"w-5 h-5 text-gray-600"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-x-6 gap-y-3 text-sm",children:[(0,t.jsx)("div",{className:"text-gray-500",children:"Title"}),(0,t.jsx)("div",{className:"font-medium",children:ec.title}),(0,t.jsx)("div",{className:"text-gray-500",children:"Type"}),(0,t.jsx)("div",{className:"font-medium",children:"public"===ec.type?"Public":"Private"}),(0,t.jsx)("div",{className:"text-gray-500",children:"Content"}),(0,t.jsx)("div",{className:"font-medium whitespace-pre-wrap",children:null!=(h=ec.content)?h:"--"})]}),(0,t.jsx)("div",{className:"mt-6 flex justify-end",children:(0,t.jsx)("button",{onClick:th,className:"px-6 py-2 rounded-full border border-gray-300 text-gray-700 text-sm hover:bg-gray-50",children:"Close"})})]})}),eu&&ec&&(0,t.jsx)("div",{className:"fixed inset-0 z-[87] flex items-center justify-center bg-black/30 px-4",children:(0,t.jsxs)("div",{role:"dialog","aria-modal":"true",className:"w-full max-w-lg bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Edit Note"}),(0,t.jsx)("button",{onClick:()=>{ex(!1),ed(null)},className:"p-2 rounded hover:bg-gray-100",children:(0,t.jsx)(n.XMarkIcon,{className:"w-5 h-5 text-gray-600"})})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Title ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{value:eC,onChange:e=>eT(e.target.value),className:"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter note title",autoFocus:!0})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),(0,t.jsxs)("select",{value:eD,onChange:e=>eA(e.target.value),className:"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"public",children:"Public"}),(0,t.jsx)("option",{value:"private",children:"Private"})]})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Content"}),(0,t.jsx)("textarea",{value:eE,onChange:e=>eI(e.target.value),className:"mt-2 w-full min-h-[120px] rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter note content (optional)"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-6",children:[(0,t.jsx)("button",{onClick:()=>{ex(!1),ed(null)},className:"px-6 py-2 rounded-full border border-blue-600 text-blue-600 text-sm hover:bg-gray-50",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>{if(ec){if(!eC.trim())return void alert("Title is required");er(e=>e.map(e=>e.id===ec.id?{...e,title:eC.trim(),type:eD,content:eE}:e)),ex(!1),ed(null)}},className:"px-6 py-2 rounded-full bg-blue-600 text-white text-sm hover:bg-blue-700",children:"Save"})]})]})}),eh&&ec&&(0,t.jsx)("div",{className:"fixed inset-0 z-[88] flex items-center justify-center bg-black/30 px-4",children:(0,t.jsxs)("div",{role:"dialog","aria-modal":"true",className:"w-full max-w-md bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold",children:"Are you sure?"}),(0,t.jsxs)("p",{className:"mt-3 text-sm text-gray-500",children:['Delete note "',ec.title,'". This action cannot be undone.']})]}),(0,t.jsxs)("div",{className:"mt-6 flex items-center justify-center gap-4",children:[(0,t.jsx)("button",{onClick:()=>{ep(!1),ed(null)},className:"px-6 py-2 border border-blue-600 text-blue-600 rounded-full text-sm hover:bg-gray-50",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>{if(!ec)return void ep(!1);er(e=>e.filter(e=>e.id!==ec.id)),ep(!1),ed(null)},className:"px-6 py-2 bg-red-600 text-white rounded-full text-sm hover:bg-red-700",children:"Delete"})]})]})}),eL&&(0,t.jsx)("div",{className:"fixed inset-0 z-[95] flex items-start justify-center pt-10 pb-10 overflow-auto bg-black/30 px-4",children:(0,t.jsxs)("div",{role:"dialog","aria-modal":"true",className:"w-full max-w-[980px] bg-white rounded-lg shadow-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between border-b pb-3 px-4",children:[(0,t.jsx)("div",{className:"text-lg font-semibold",children:"Update Task Details"}),(0,t.jsx)("button",{onClick:()=>eP(!1),className:"p-1 rounded hover:bg-gray-100",children:(0,t.jsx)(n.XMarkIcon,{className:"w-5 h-5 text-gray-600"})})]}),(0,t.jsxs)("div",{className:"p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,t.jsx)("div",{className:"text-sm font-medium mb-3",children:"Task Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsxs)("label",{className:"block text-sm text-gray-600",children:["Title ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{value:eU,onChange:e=>{eM(e.target.value),tn&&ti(null)},className:"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Task Name"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-600",children:"Task Category"}),(0,t.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,t.jsx)("select",{value:ez,onChange:e=>eR(e.target.value),className:"flex-1 rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",children:(0,t.jsx)("option",{value:"",children:"--"})}),(0,t.jsx)("button",{onClick:()=>{alert("Add Task Category clicked (UI-only).")},className:"px-3 py-2 rounded border bg-gray-100 text-sm",children:"Add"})]})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsxs)("label",{className:"block text-sm text-gray-600 mt-2",children:["Project ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("select",{value:eB,onChange:e=>eF(e.target.value),className:"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",children:(0,t.jsx)("option",{value:null!=(p=b.projectName)?p:"",children:null!=(g=b.projectName)?g:"Project Name"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-600 mt-2",children:"Client Details"}),(0,t.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-xs",children:"JD"}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("div",{className:"font-medium",children:"John Doe"}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"Curilo Solutions"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-600 mt-2",children:"Start Date"}),(0,t.jsx)("input",{type:"date",value:eO?eO.split("T")[0]:"",onChange:e=>e_(e.target.value?e.target.value:null),className:"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-600 mt-2",children:"Due Date"}),(0,t.jsx)("input",{type:"date",value:eq?eq.split("T")[0]:"",onChange:e=>eH(e.target.value?e.target.value:null),disabled:eJ,className:"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 disabled:opacity-60"}),(0,t.jsxs)("label",{className:"inline-flex items-center gap-2 mt-2 text-sm",children:[(0,t.jsx)("input",{type:"checkbox",checked:eJ,onChange:e=>eW(e.target.checked)}),(0,t.jsx)("span",{children:"Without Due Date"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-600 mt-2",children:"Status"}),(0,t.jsxs)("select",{value:eV,onChange:e=>eX(e.target.value),className:"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"Doing",children:"Doing"}),(0,t.jsx)("option",{value:"To Do",children:"To Do"}),(0,t.jsx)("option",{value:"Done",children:"Done"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-600 mt-2",children:"Assigned To"}),(0,t.jsx)("select",{value:eG,onChange:e=>eK(e.target.value),className:"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",children:(0,t.jsx)("option",{value:eG||"",children:eG||"Riya Sharma"})})]}),(0,t.jsxs)("div",{className:"md:col-span-3",children:[(0,t.jsx)("label",{className:"block text-sm text-gray-600 mt-2",children:"Description"}),(0,t.jsx)("textarea",{value:eY,onChange:e=>eZ(e.target.value),className:"mt-2 w-full min-h-[80px] rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"--"})]})]})]}),(0,t.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,t.jsx)("div",{className:"text-sm font-medium mb-3",children:"Other Details"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-end",children:[(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm text-gray-600",children:"Label"}),(0,t.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,t.jsx)("select",{value:e$,onChange:e=>eQ(e.target.value),className:"flex-1 rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",children:(0,t.jsx)("option",{value:"",children:"--"})}),(0,t.jsx)("button",{onClick:()=>{alert("Add Label clicked (UI-only).")},className:"px-3 py-2 rounded border bg-gray-100 text-sm",children:"Add"})]})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm text-gray-600",children:"Milestones"}),(0,t.jsx)("select",{value:e0,onChange:e=>e1(e.target.value),className:"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",children:(0,t.jsx)("option",{value:"",children:"--"})})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm text-gray-600",children:"Priority"}),(0,t.jsx)("div",{className:"mt-2 flex items-center justify-between gap-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"w-3 h-3 rounded-full ".concat("Low"===e2?"bg-green-500":"Medium"===e2?"bg-yellow-400":"High"===e2?"bg-orange-500":"bg-red-600")}),(0,t.jsxs)("select",{value:e2,onChange:e=>e4(e.target.value),className:"rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"Low",children:"Low"}),(0,t.jsx)("option",{value:"Medium",children:"Medium"}),(0,t.jsx)("option",{value:"High",children:"High"}),(0,t.jsx)("option",{value:"Urgent",children:"Urgent"})]})]})})]}),(0,t.jsx)("div",{className:"md:col-span-2",children:(0,t.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:e6,onChange:e=>e3(e.target.checked)}),(0,t.jsx)("span",{className:"text-sm",children:"Make Private"})]})}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:e5,onChange:e=>e8(e.target.checked)}),(0,t.jsx)("span",{className:"text-sm",children:"Time Estimate"})]}),e5&&(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)("input",{type:"number",min:0,value:e7,onChange:e=>e9(""===e.target.value?"":Number(e.target.value)),className:"w-32 rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500"}),(0,t.jsx)("span",{className:"ml-2 text-sm text-gray-500",children:"mins"})]})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:te,onChange:e=>tt(e.target.checked)}),(0,t.jsx)("span",{className:"text-sm",children:"Task is dependent on other task"})]}),te&&(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsxs)("label",{className:"block text-sm text-gray-600",children:["Dependent Task ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("select",{value:ts,onChange:e=>tl(e.target.value),className:"mt-2 w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",children:(0,t.jsx)("option",{value:"",children:"Task Name"})})]})]}),(0,t.jsxs)("div",{className:"md:col-span-6 mt-2",children:[(0,t.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Add File"}),(0,t.jsx)("div",{onClick:()=>{var e;null==(e=P.current)||e.click()},className:"w-full min-h-[80px] rounded-md border-dashed border-2 border-gray-200 flex items-center justify-center text-sm text-gray-500 cursor-pointer",children:ta?(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("div",{className:"font-medium",children:ta.name}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[(ta.size/1024).toFixed(1)," KB"]})]}):(0,t.jsx)("div",{children:"Choose a file"})}),(0,t.jsx)("input",{type:"file",onChange:e=>{let t=e.target.files&&e.target.files[0];t&&tr(t),e.currentTarget.value=""},className:"hidden"})]})]}),tn&&(0,t.jsx)("div",{className:"mt-3 text-sm text-red-600",children:tn})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,t.jsx)("button",{onClick:()=>{eP(!1),ti(null)},className:"px-4 py-2 border rounded-md text-sm border-blue-600 text-blue-600 hover:bg-gray-50",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>eU.trim()?te&&!ts.trim()?void ti("Dependent Task is required when dependency is checked"):void(alert("Update (UI-only) payload:\n"+JSON.stringify({id:b.id,title:eU.trim(),category:ez.trim(),project:eB,startDate:eO,dueDate:eJ?null:eq,withoutDueDate:eJ,status:eV,assignedTo:eG,description:eY.trim(),label:e$,milestone:e0,priority:e2,isPrivate:e6,timeEstimateMins:e5?Number(e7||0):null,isDependent:te,dependentTask:ts,fileName:ta?ta.name:null},null,2)),eP(!1)):void ti("Title is required"),className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700",children:"Update"})]})]})]})})]})}let c="https://6jnqmj85-80.inc1.devtunnels.ms";function d(e){let{projectId:l}=e,[n,d]=(0,s.useState)([]),[o,m]=(0,s.useState)(!0),[u,x]=(0,s.useState)(null),[h,p]=(0,s.useState)([]),[g,j]=(0,s.useState)(!1),[f,b]=(0,s.useState)(!1),[y,v]=(0,s.useState)(null),[N,w]=(0,s.useState)(!1),[k,S]=(0,s.useState)(null),[C,T]=(0,s.useState)(null),[D,A]=(0,s.useState)(null),[E,I]=(0,s.useState)({title:"",category:"",startDate:"",dueDate:"",noDueDate:!1,taskStageId:"",assignedEmployeeIds:[],description:"",labelIds:[],milestoneId:"",priority:"LOW",isPrivate:!1,timeEstimateMinutes:"",isDependent:!1,projectId:l,taskFile:null}),L=async()=>{try{let e=localStorage.getItem("accessToken"),t=await a.default.get("".concat(c,"/status"),{headers:{Authorization:e?"Bearer ".concat(e):""}});Array.isArray(t.data)?p(t.data):p([])}catch(e){console.warn("Failed to fetch statuses:",e),p([])}},P=async()=>{m(!0),x(null);try{let e=localStorage.getItem("accessToken"),t="".concat(c,"/projects/").concat(l,"/tasks"),s=await a.default.get(t,{headers:{"Content-Type":"application/json",Authorization:e?"Bearer ".concat(e):""}});d(Array.isArray(s.data)?s.data:[])}catch(s){var e,t;x((null==s||null==(t=s.response)||null==(e=t.data)?void 0:e.message)||(null==s?void 0:s.message)||"Failed to load tasks")}finally{m(!1)}};(0,s.useEffect)(()=>{L(),P()},[l]);let U=e=>{var t;switch(("string"==typeof e?e:null!=(t=null==e?void 0:e.name)?t:"").toLowerCase()){case"complete":case"completed":case"complete":case"complete":return"bg-green-600";case"to-do":case"to do":case"todo":return"bg-yellow-500";case"doing":return"bg-blue-600";case"incomplete":return"bg-red-600";case"waiting":case"waiting for approval":return"bg-gray-600";default:return"bg-gray-400"}},M=async(e,t)=>{d(s=>s.map(s=>s.id===e.id?{...s,taskStage:{id:t.id,name:t.name},taskStageId:t.id}:s));let s=localStorage.getItem("accessToken");try{let l="".concat(c,"/api/projects/tasks/").concat(e.id,"/status?statusId=").concat(t.id);await a.default.patch(l,{},{headers:{"Content-Type":"application/json",Authorization:s?"Bearer ".concat(s):""}}),A(null)}catch(e){console.error("Failed to update status:",e),alert("Failed to update status on server. Refreshing tasks."),await P(),A(null)}},z=e=>{if(!e&&0!==e)return"--";let t=Math.floor((e||0)/60),s=(e||0)%60;return t&&s?"".concat(t,"h ").concat(s,"m"):t?"".concat(t,"h"):"".concat(s,"m")};return(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Tasks"}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("div",{className:"flex items-center gap-4"}),(0,t.jsx)("div",{className:"flex items-center gap-3",children:(0,t.jsx)("input",{type:"search",placeholder:"Search",onChange:e=>{let t=e.target.value.toLowerCase();t?d(e=>e.filter(e=>(e.title||"").toLowerCase().includes(t)||(e.projectName||"").toLowerCase().includes(t))):P()},className:"border px-3 py-2 rounded-md text-sm"})})]}),o?(0,t.jsx)("div",{className:"py-6 text-center text-gray-500",children:"Loading tasks..."}):u?(0,t.jsx)("div",{className:"py-6 text-center text-red-500",children:u}):(0,t.jsxs)("div",{className:"overflow-x-auto",children:[(0,t.jsxs)("table",{className:"min-w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-blue-50 text-left text-gray-600",children:[(0,t.jsx)("th",{className:"px-4 py-3",children:"Code"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"Task"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"Completed On"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"Start Date"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"Due Date"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"Hours Logged"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"Estimated Time"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"Milestones"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"Assigned to"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"Status"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"Action"})]})}),(0,t.jsx)("tbody",{children:0===n.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:11,className:"py-6 text-center text-gray-500",children:"No tasks found"})}):n.map(e=>{var s,l,a,n,i,c,d;let o=e.dueDate&&!e.noDueDate&&new Date(e.dueDate)<new Date,m=(e=>{var t,s,l,a;if(e.taskStage&&e.taskStage.name)return e.taskStage;if(e.taskStageId){let t=h.find(t=>t.id===e.taskStageId);if(t)return t}let r=(e=>{if(h&&h.length)return h.find(t=>String(t.name).toLowerCase().includes(String(e).toLowerCase()))})(String((null==(t=e.taskStage)?void 0:t.name)||""));return null!=r?r:{id:null!=(l=e.taskStageId)?l:0,name:null!=(a=null==(s=e.taskStage)?void 0:s.name)?a:"Doing"}})(e),u=null!=(l=null==m?void 0:m.name)?l:"Doing";return(0,t.jsxs)("tr",{className:"border-b last:border-b-0 bg-white hover:bg-gray-50",children:[(0,t.jsxs)("td",{className:"px-4 py-4 align-top",children:["RTA-",String(e.id).padStart(2,"0")]}),(0,t.jsxs)("td",{className:"px-4 py-4 align-top",children:[(0,t.jsx)("div",{className:"font-medium",children:e.title}),(0,t.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:null!=(a=e.projectName)?a:"Project ".concat(e.projectId)})]}),(0,t.jsx)("td",{className:"px-4 py-4 align-top",children:"--"}),(0,t.jsx)("td",{className:"px-4 py-4 align-top",children:e.startDate?new Date(e.startDate).toLocaleDateString():"--"}),(0,t.jsx)("td",{className:"px-4 py-4 align-top ".concat(o?"text-red-600":""),children:e.noDueDate?"--":e.dueDate?new Date(e.dueDate).toLocaleDateString():"--"}),(0,t.jsx)("td",{className:"px-4 py-4 align-top",children:z(null!=(n=e.hoursLoggedMinutes)?n:null)}),(0,t.jsx)("td",{className:"px-4 py-4 align-top",children:z(null!=(i=e.timeEstimateMinutes)?i:null)}),(0,t.jsx)("td",{className:"px-4 py-4 align-top",children:null!=(c=null==(s=e.milestone)?void 0:s.title)?c:"--"}),(0,t.jsx)("td",{className:"px-4 py-4 align-top",children:(0,t.jsx)("div",{className:"flex -space-x-2",children:(e.assignedEmployees||[]).slice(0,3).map(e=>(0,t.jsx)("div",{className:"w-8 h-8 rounded-full border-2 border-white overflow-hidden bg-gray-100",children:e.profileUrl?(0,t.jsx)("img",{src:e.profileUrl,alt:e.name,className:"w-full h-full object-cover"}):(0,t.jsx)(r.UserIcon,{className:"w-full h-full text-gray-400 p-1"})},e.employeeId))})}),(0,t.jsx)("td",{className:"px-4 py-4 align-top relative",children:(0,t.jsxs)("div",{className:"relative inline-block",children:[(0,t.jsxs)("button",{onClick:t=>{t.stopPropagation(),T(null),A(t=>t===e.id?null:e.id)},className:"inline-flex items-center gap-2 px-3 py-1 rounded-full border text-xs bg-white hover:bg-gray-50",title:"Change status",children:[m&&m.labelColor?(0,t.jsx)("span",{style:{width:8,height:8,borderRadius:9999,display:"inline-block",background:"#".concat(String(m.labelColor).replace(/[^0-9a-fA-F]/g,"").slice(0,6))}}):(0,t.jsx)("span",{className:"w-2 h-2 rounded-full ".concat(U(null!=(d=null==m?void 0:m.name)?d:"Doing"))}),(0,t.jsx)("span",{children:String(u)}),(0,t.jsx)("span",{className:"text-xs",children:"â–¾"})]}),D===e.id&&(0,t.jsx)("div",{onClick:e=>e.stopPropagation(),className:"absolute right-0 mt-2 z-30 w-44 bg-white border rounded-md shadow-lg text-sm",children:h.length>0?h.map(s=>(0,t.jsxs)("button",{onClick:()=>M(e,s),className:"w-full text-left px-4 py-2 hover:bg-gray-50 flex items-center gap-2 ".concat(s.id===(null==m?void 0:m.id)?"font-medium":""),children:[s.labelColor?(0,t.jsx)("span",{style:{width:8,height:8,borderRadius:9999,background:"#".concat(String(s.labelColor).replace(/[^0-9a-fA-F]/g,"").slice(0,6))}}):(0,t.jsx)("span",{className:"w-2 h-2 rounded-full ".concat(U(s.name))}),(0,t.jsx)("span",{children:s.name})]},s.id)):["To Do","Doing","Completed","Incomplete","Waiting for Approval"].map(s=>(0,t.jsxs)("button",{onClick:()=>{M(e,{id:0,name:s})},className:"w-full text-left px-4 py-2 hover:bg-gray-50",children:[(0,t.jsx)("span",{className:"w-2 h-2 rounded-full ".concat(U(s))})," ",(0,t.jsx)("span",{children:s})]},s))})]})}),(0,t.jsxs)("td",{className:"px-4 py-4 align-top relative",children:[(0,t.jsx)("button",{onClick:()=>{S(e),w(!0),T(null)},className:"w-full text-left px-4 py-2 hover:bg-gray-50",children:"View"}),C===e.id&&(0,t.jsx)("div",{onClick:e=>e.stopPropagation(),className:"absolute right-2 top-10 z-20 w-48 bg-white border rounded-md shadow-md"})]})]},e.id)})})]}),(0,t.jsxs)("div",{className:"px-4 py-3 border-t bg-gray-50 flex items-center justify-between text-sm text-gray-600 rounded-b-md mt-4",children:[(0,t.jsxs)("div",{children:["Result per page - ",n.length?n.length:0]}),(0,t.jsx)("div",{children:"Page 1 of 1"})]})]}),(0,t.jsx)(i,{open:N,task:k,onClose:()=>{w(!1),S(null)}})]})}let o="https://6jnqmj85-80.inc1.devtunnels.ms",m=a.default.create({baseURL:o||"/",timeout:15e3});function u(e){let{projectId:l}=e,[a,n]=(0,s.useState)(null),[i,c]=(0,s.useState)([]),[d,u]=(0,s.useState)(!1),[x,h]=(0,s.useState)(null),[p,g]=(0,s.useState)(!1),[j,f]=(0,s.useState)(""),[b,y]=(0,s.useState)(""),[v,N]=(0,s.useState)(null),w=async()=>{try{var e;u(!0),h(null);let t="".concat(o,"/projects/").concat(l),s=await m.get(t);n(s),c(null!=(e=null==s?void 0:s.assignedEmployees)?e:[])}catch(e){h(e.message),n(null),c([])}finally{u(!1)}};(0,s.useEffect)(()=>{w()},[l]);let k=async()=>{if(confirm("Remove Project Admin?"))try{N("admin"),h(null);let e="".concat(o,"/projects/").concat(l,"/admin");await m.delete(e),w()}catch(e){h(e.message)}finally{N(null)}},S=i.filter(e=>{var t,s;let l=b.toLowerCase();return(null==(t=e.name)?void 0:t.toLowerCase().includes(l))||e.employeeId.toLowerCase().includes(l)||(null==(s=e.designation)?void 0:s.toLowerCase().includes(l))});return(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Member"}),(0,t.jsx)("div",{className:"flex justify-between mb-4",children:(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("input",{type:"search",placeholder:"Search",className:"border px-3 py-2 rounded",value:b,onChange:e=>y(e.target.value)}),(0,t.jsx)("button",{onClick:w,className:"bg-gray-100 px-3 py-2 rounded",children:"Refresh"})]})}),d&&(0,t.jsx)("div",{className:"text-center py-5",children:"Loadingâ€¦"}),x&&(0,t.jsx)("div",{className:"p-3 bg-red-50 text-red-600 rounded mb-3",children:x}),!d&&(0,t.jsxs)("table",{className:"min-w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-blue-50 text-left ",children:[(0,t.jsx)("th",{className:"px-4 py-3",children:"Name"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"User Role "})]})}),(0,t.jsxs)("tbody",{children:[S.map(e=>{var s;return(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsxs)("td",{className:"px-4 py-4 flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center overflow-hidden",children:e.profileUrl?(0,t.jsx)("img",{src:e.profileUrl,className:"w-full h-full object-cover"}):(0,t.jsx)(r.UserIcon,{className:"w-6 h-6 text-gray-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:null!=(s=e.designation)?s:e.department})]})]}),(0,t.jsxs)("td",{className:"px-4 py-4",children:[(0,t.jsx)("span",{className:"ml-1",children:"Project Admin"}),(null==a?void 0:a.projectAdminId)===e.employeeId&&(0,t.jsx)("button",{onClick:()=>k(),disabled:v,className:"ml-3 px-3 py-1 border rounded text-sm bg-white",children:v?"Removing...":"Remove Admin"})]})]},e.employeeId)}),0===S.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:3,className:"py-6 text-center text-gray-500",children:"No members found"})})]})]})]})}m.interceptors.request.use(e=>{let t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),m.interceptors.response.use(e=>e.data,e=>{var t,s,l;return Promise.reject(Error((null==e||null==(s=e.response)||null==(t=s.data)?void 0:t.message)||(null==e||null==(l=e.response)?void 0:l.statusText)||e.message||"Request failed"))});let x=localStorage.getItem("accessToken");function h(e){let{gatewayPath:l="/timesheets",mainBase:a,authToken:n=x,projectId:i}=e,c=(a||"https://6jnqmj85-80.inc1.devtunnels.ms").replace(/\/$/,""),[d,o]=(0,s.useState)([]),[m,u]=(0,s.useState)(!1),[h,p]=(0,s.useState)(null),[g,j]=(0,s.useState)(0),[f,b]=(0,s.useState)(""),[y,v]=(0,s.useState)("All"),[N,w]=(0,s.useState)(!1),[k,S]=(0,s.useState)(!1),[C,T]=(0,s.useState)(null),[D,A]=(0,s.useState)(null),[E,I]=(0,s.useState)({projectId:"",taskId:"",employeeId:"",startDate:"",startTime:"",endDate:"",endTime:"",memo:""}),[L,P]=(0,s.useState)(null),[U,M]=(0,s.useState)(!1),[z,R]=(0,s.useState)(null),[B,F]=(0,s.useState)(!1),O=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={...e};return n&&(t.Authorization="Bearer ".concat(n)),t},_=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15e3,l=new AbortController,a=setTimeout(()=>l.abort(),s);try{let e={...t,signal:l.signal},s=await fetch("".concat(c,"/timesheets/project/").concat(i),e);clearTimeout(a);let r=s.headers.get("content-type")||"",n=await s.text().catch(()=>"");if(!s.ok){if(r.includes("application/json"))try{let e=JSON.parse(n||"{}"),t=(null==e?void 0:e.message)||JSON.stringify(e);throw Error("HTTP ".concat(s.status," ").concat(s.statusText," â€” ").concat(t))}catch(e){throw Error("HTTP ".concat(s.status," ").concat(s.statusText," â€” ").concat(n.slice(0,300)))}if(r.includes("text/html")||n.trim().startsWith("<!DOCTYPE html"))throw Error("HTTP ".concat(s.status," ").concat(s.statusText," â€” server returned HTML (likely auth)."));throw Error("HTTP ".concat(s.status," ").concat(s.statusText," ").concat(n?"- "+n.slice(0,300):""))}if(r.includes("application/json"))return JSON.parse(n||"[]");return n}catch(e){if("AbortError"===e.name)throw Error("Request timed out");if("Failed to fetch"===e.message)throw Error("Network Error - check CORS / server availability");throw e}finally{clearTimeout(a)}},q=async()=>{u(!0),p(null);try{let e=(e=>{let t=String(e||"");return t.startsWith("http://")||t.startsWith("https://")?t:t.startsWith("/")?"".concat(c).concat(t):"".concat(c,"/").concat(t)})(l),t=await _(e,{method:"GET",headers:O({"Content-Type":"application/json"}),credentials:"same-origin"});Array.isArray(t)?o(t):(null==t?void 0:t.data)&&Array.isArray(t.data)?o(t.data):(console.warn("Unexpected timesheets response:",t),o([]),p("Unexpected response shape from server. See console."))}catch(e){console.error("fetchTimesheets error:",e),o([]),p((null==e?void 0:e.message)||"Failed to load timesheets")}finally{u(!1)}};(0,s.useEffect)(()=>{q()},[g]);let H=(0,s.useMemo)(()=>{let e=new Map;return d.forEach(t=>{let s=t.employees&&t.employees[0];s&&s.employeeId?e.set(s.employeeId,s):t.employeeId&&e.set(t.employeeId,{employeeId:t.employeeId})}),Array.from(e.values())},[d]),J=d.filter(e=>{if("All"!==y&&e.employeeId!==y)return!1;if(!f)return!0;let t=f.toLowerCase(),s=e.employees&&e.employees[0];return String(e.employeeId||"").toLowerCase().includes(t)||String(e.projectId||"").toLowerCase().includes(t)||String(e.taskId||"").toLowerCase().includes(t)||String(e.memo||"").toLowerCase().includes(t)||String((null==s?void 0:s.name)||"").toLowerCase().includes(t)}),W=e=>e<10?"0".concat(e):"".concat(e),V=(e,t)=>((e,t)=>{if(!e)return"-";try{let[a,r,n]=e.split("-").map(Number),i=0,c=0;if(t){var s,l;let e=t.split(":").map(Number);i=null!=(s=e[0])?s:0,c=null!=(l=e[1])?l:0}let d=new Date(a,r-1,n,i,c),o=W(d.getDate()),m=W(d.getMonth()+1),u=d.getFullYear(),x=d.getHours(),h=W(d.getMinutes()),p=x>=12?"PM":"AM";x=x%12||12;let g=W(x);return"".concat(o,"/").concat(m,"/").concat(u," ").concat(g,":").concat(h," ").concat(p)}catch(s){return e+(t?" ".concat(t):"")}})(e,t);return((e,t,s,l)=>{if(e&&s)try{let a=e.split("-").map(Number),r=s.split("-").map(Number),n=0,i=0,c=0,d=0;t&&([n,i]=t.split(":").map(e=>Number(e))),l&&([c,d]=l.split(":").map(e=>Number(e)));let o=new Date(a[0],a[1]-1,a[2],n,i),m=new Date(r[0],r[1]-1,r[2],c,d).getTime()-o.getTime();if(isNaN(m)||m<=0)return 0;return Math.round(m/36e5)}catch(e){return 0}})(E.startDate,E.startTime,E.endDate,E.endTime),(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Timesheet"}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("label",{className:"text-sm",children:"Employee"}),(0,t.jsxs)("select",{value:y,onChange:e=>v(e.target.value),className:"border rounded px-3 py-2 text-sm",children:[(0,t.jsx)("option",{value:"All",children:"All"}),H.map(e=>(0,t.jsx)("option",{value:e.employeeId,children:e.name?"".concat(e.name," (").concat(e.employeeId,")"):e.employeeId},e.employeeId))]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("div",{}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{onClick:()=>j(e=>e+1),className:"bg-gray-100 px-3 py-2 rounded text-sm border hover:bg-gray-200",children:"Refresh"}),(0,t.jsx)("input",{type:"search",placeholder:"Search employee, memo, project...",value:f,onChange:e=>b(e.target.value),className:"border px-3 py-2 rounded-md text-sm"})]})]}),m?(0,t.jsx)("div",{className:"py-6 text-center text-gray-500",children:"Loading timesheets..."}):(0,t.jsxs)(t.Fragment,{children:[h&&(0,t.jsxs)("div",{className:"mb-4 p-3 rounded bg-red-50 text-red-700",children:[(0,t.jsx)("strong",{children:"Error:"})," ",h]}),(0,t.jsx)("div",{className:"overflow-x-auto h-full",children:(0,t.jsxs)("table",{className:"min-w-full  text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-blue-50 text-left text-gray-600",children:[(0,t.jsx)("th",{className:"px-4 py-3",children:"Code"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"Task"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"Employee"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"Start Time"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"End Time"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"Total Hours"})]})}),(0,t.jsx)("tbody",{children:0===J.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:7,className:"py-6 text-center text-gray-500",children:"No timesheets found"})}):J.map(e=>{var s,l,a,n;let i=e.employees&&e.employees[0],c="RTA-".concat(String(e.id).padStart(2,"0")),d="Task ".concat(null!=(s=e.taskId)?s:"-"," Â· Project ").concat(null!=(l=e.projectId)?l:"-");return(0,t.jsxs)("tr",{className:"border-b last:border-b-0 bg-white hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-4 py-4 align-top",children:c}),(0,t.jsxs)("td",{className:"px-4 py-4 align-top",children:[(0,t.jsx)("div",{className:"text-sm font-medium",children:d}),(0,t.jsx)("div",{className:"text-xs text-gray-400",children:null!=(a=e.memo)?a:""})]}),(0,t.jsxs)("td",{className:"px-4 py-4 align-top flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center",children:(null==i?void 0:i.profileUrl)?(0,t.jsx)("img",{src:i.profileUrl,alt:null!=(n=null==i?void 0:i.name)?n:"",className:"w-full h-full object-cover"}):(0,t.jsx)(r.UserIcon,{className:"w-6 h-6 text-gray-400 p-1"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:(null==i?void 0:i.name)||e.employeeId}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:(null==i?void 0:i.designation)||(null==i?void 0:i.department)||e.employeeId})]})]}),(0,t.jsx)("td",{className:"px-4 py-4 align-top",children:V(e.startDate,e.startTime)}),(0,t.jsx)("td",{className:"px-4 py-4 align-top",children:V(e.endDate,e.endTime)}),(0,t.jsx)("td",{className:"px-4 py-4 align-top",children:"number"==typeof e.durationHours?"".concat(e.durationHours,"h"):"-"}),(0,t.jsx)("td",{className:"px-4 py-4 align-top",children:(0,t.jsx)("div",{className:"relative inline-block text-left"})})]},e.id)})})]})})]})]})}let p="https://6jnqmj85-80.inc1.devtunnels.ms",g=e=>{if(!e)return null;let t=String(e).replace(/[^0-9a-fA-F]/g,"");return t.length>=6?"#".concat(t.slice(0,6)):null},j=e=>{let t=e.toLowerCase();return t.includes("complete")||t.includes("complete")?"#10b981":t.includes("to-do")||t.includes("todo")||t.includes("to do")?"#f59e0b":t.includes("doing")?"#2563eb":t.includes("incomplete")?"#ef4444":t.includes("wait")||t.includes("waiting")?"#9ca3af":"#6b7280"},f=(e,t,s,l)=>{let a=(l-90)*Math.PI/180;return{x:e+s*Math.cos(a),y:t+s*Math.sin(a)}};function b(e){let{projectId:l}=e,[r,n]=(0,s.useState)([]),[i,c]=(0,s.useState)([]),[d,o]=(0,s.useState)(!0),[m,u]=(0,s.useState)(null),x=localStorage.getItem("accessToken")||"";(0,s.useEffect)(()=>{let e=!0;return(async()=>{o(!0),u(null);try{let[t,s]=await Promise.all([a.default.get("".concat(p,"/status"),{headers:{Authorization:x?"Bearer ".concat(x):""}}),a.default.get("".concat(p,"/projects/").concat(l,"/tasks"),{headers:{Authorization:x?"Bearer ".concat(x):""}})]);e&&(n(Array.isArray(t.data)?t.data:[]),c(Array.isArray(s.data)?s.data:[]))}catch(l){var t,s,r;console.error("Failed to load task statistics:",null!=(r=null!=(s=null==l||null==(t=l.response)?void 0:t.data)?s:null==l?void 0:l.message)?r:l),e&&(u("Failed to load task statistics"),n([]),c([]))}finally{e&&o(!1)}})(),()=>{e=!1}},[l,x]);let h=(0,s.useMemo)(()=>{let e=new Map;return r.forEach(t=>e.set(t.id,{status:t,count:0})),i.forEach(t=>{var s,l,a,n,i,c;let d=null!=(n=null!=(a=t.taskStageId)?a:null==(s=t.taskStage)?void 0:s.id)?n:null;if(null!=d){let t=Array.from(e.keys()).find(e=>e===d);if(void 0!==t){let s=e.get(t);s.count+=1,e.set(t,s);return}}let o=null!=(i=null==(l=t.taskStage)?void 0:l.name)?i:"",m=r.find(e=>o&&String(e.name).toLowerCase().includes(o.toLowerCase()));if(m){let t=null!=(c=e.get(m.id))?c:{status:m,count:0};t.count+=1,e.set(m.id,t);return}let u="unknown";e.has(u)||e.set(u,{status:{id:0,name:"Other",labelColor:null},count:0});let x=e.get(u);x.count+=1,e.set(u,x)}),Array.from(e.values())},[r,i]),b=h.reduce((e,t)=>e+t.count,0)||0,y=0,v=h.filter(e=>e.count>0).map(e=>{let t=0===b?0:e.count/b,s=y;y+=360*t;let l=g(e.status.labelColor)||j(e.status.name);return{...e,start:s,end:y,color:l}});return(0,t.jsx)("div",{children:d?(0,t.jsx)("div",{className:"py-6 text-center text-gray-500",children:"Loading task statistics..."}):m?(0,t.jsx)("div",{className:"py-6 text-center text-red-500",children:m}):(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsxs)("svg",{viewBox:"0 0 100 100",width:"180",height:"180",className:"flex-shrink-0",children:[0===v.length&&(0,t.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:"#e5e7eb"}),v.map((e,s)=>(0,t.jsx)("path",{d:((e,t,s,l,a)=>{let r=f(e,t,s,a),n=f(e,t,s,l);return"M ".concat(e," ").concat(t," L ").concat(r.x," ").concat(r.y," A ").concat(s," ").concat(s," 0 ").concat(a-l<=180?"0":"1"," 0 ").concat(n.x," ").concat(n.y," Z")})(50,50,40,e.start,e.end),fill:e.color,stroke:"#ffffff",strokeWidth:"0.5"},s))]})}),(0,t.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,t.jsx)("ul",{className:"space-y-3 text-sm",children:h.map((e,s)=>{let l=g(e.status.labelColor)||j(e.status.name);return(0,t.jsxs)("li",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{style:{width:18,height:12,background:l},className:"rounded-sm inline-block"}),(0,t.jsx)("span",{className:"flex-1",children:e.status.name}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:e.count})]},s)})}),(0,t.jsxs)("div",{className:"mt-4 text-xs text-gray-500",children:["Total tasks: ",b]})]})]})})}function y(){var e,a,n,i;let{id:c}=(0,l.useParams)()||{},[o,m]=(0,s.useState)(null),[x,p]=(0,s.useState)(!0),[g,j]=(0,s.useState)("overview"),f=async e=>{try{let t=await fetch("/api/work/project/".concat(c),{headers:e?{Authorization:"Bearer ".concat(e)}:void 0});if(!t.ok)throw Error("Failed to fetch");let s=await t.json();m(Array.isArray(s)?s[0]:s)}catch(e){m({id:Number(c||1),shortCode:"PRJ-001",name:"Project Name",category:"Website",startDate:"2025-08-02",deadline:"2025-09-12",client:{name:"John Doe",profilePictureUrl:"https://i.pravatar.cc/80?img=5"},summary:"Short description of the project and goals.",currency:"$",budget:0,hoursEstimate:40,assignedEmployees:[{employeeId:"1",name:"Aman Sharma",designation:"Developer",department:"Engineering"},{employeeId:"2",name:"Riya Singh",designation:"Designer",department:"Design"}],progressPercent:76,totalTimeLoggedMinutes:300,createdBy:"Admin",createdAt:new Date().toISOString(),pinned:!1,archived:!1})}finally{p(!1)}};if((0,s.useEffect)(()=>{f(localStorage.getItem("accessToken")||"")},[c]),x)return(0,t.jsx)("p",{className:"p-8 text-center",children:"Loading project..."});if(!o)return(0,t.jsx)("p",{className:"p-8 text-center text-red-600",children:"Project not found"});let y=o.totalTimeLoggedMinutes?Math.floor(o.totalTimeLoggedMinutes/60):0;return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"px-6 py-6",children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("h1",{className:"text-3xl font-semibold text-gray-800",children:o.name})}),(0,t.jsxs)("div",{className:"mt-6 space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-2 bg-white rounded-xl border border-gray-200 p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsx)("div",{className:"w-36 h-20",children:(0,t.jsxs)("svg",{viewBox:"0 0 100 50",className:"w-full h-full",children:[(0,t.jsx)("path",{d:"M5 50 A45 45 0 0 1 95 50",fill:"none",stroke:"#e6e6e6",strokeWidth:"10",strokeLinecap:"round"}),(0,t.jsx)("path",{d:"M5 50 A45 45 0 0 1 75 18",fill:"none",stroke:"#f5c518",strokeWidth:"10",strokeLinecap:"round"}),(0,t.jsxs)("text",{x:"50",y:"40",fontSize:"8",textAnchor:"middle",fill:"#374151",children:[o.progressPercent,"%"]})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Start Date"}),(0,t.jsx)("p",{className:"font-medium",children:new Date(o.startDate).toLocaleDateString()})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"End Date"}),(0,t.jsx)("p",{className:"font-medium",children:o.noDeadline?"No Deadline":o.deadline?new Date(o.deadline).toLocaleDateString():"TBD"})]})]}),(0,t.jsx)("div",{className:"hidden lg:block max-w-xs text-gray-600",children:o.summary?(0,t.jsx)("p",{children:o.summary}):(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"No summary available"})})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-4 flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center",children:(null==(e=o.client)?void 0:e.profilePictureUrl)?(0,t.jsx)("img",{src:o.client.profilePictureUrl,alt:"client",className:"w-full h-full object-cover"}):(0,t.jsx)(r.UserIcon,{className:"w-8 h-8 text-gray-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Client"}),(0,t.jsx)("p",{className:"font-medium",children:(null==(a=o.client)?void 0:a.name)||"Client ID: ".concat(null!=(i=null==(n=o.client)?void 0:n.name)?i:"")}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"Qurilo Solutions"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 bg-white rounded-xl border border-gray-200 p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Task Statistics"}),(0,t.jsx)(b,{projectId:o.id})]}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Hours Logged"}),(0,t.jsxs)("div",{className:"text-2xl font-semibold text-blue-600 mt-2",children:[y,"hrs 0 min"]})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 bg-white rounded-xl border border-gray-200 p-4",children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("h4",{className:"text-lg font-medium",children:"Assigned Employees"})}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:o.assignedEmployees&&o.assignedEmployees.length?o.assignedEmployees.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center overflow-hidden",children:e.profileUrl?(0,t.jsx)("img",{src:e.profileUrl,alt:e.name,className:"w-full h-full object-cover"}):(0,t.jsx)(r.UserIcon,{className:"w-5 h-5 text-gray-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[e.designation?e.designation+", ":"",e.department]})]})]},e.employeeId)):(0,t.jsx)("p",{className:"text-gray-500 text-center py-6",children:"No employees assigned"})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[(0,t.jsx)("h4",{className:"text-lg font-medium mb-2",children:"Project Summary"}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 space-y-2",children:[(0,t.jsxs)("div",{children:["Created by: ",o.summary]}),(0,t.jsxs)("div",{children:["Created on: ",new Date(o.createdAt||"").toLocaleDateString()]}),o.pinned&&(0,t.jsxs)("div",{children:["Pinned on: ",new Date(o.pinnedAt||"").toLocaleDateString()]}),o.archived&&(0,t.jsxs)("div",{children:["Archived on: ",new Date(o.archivedAt||"").toLocaleDateString()]})]})]})]})]}),o&&(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)(d,{projectId:o.id})}),(0,t.jsxs)("div",{className:"mt-6 grid grid-cols-1 lg:grid-rows-2 gap-2",children:[(0,t.jsx)(u,{projectId:o.id}),(0,t.jsx)(h,{gatewayPath:"https://erp.skavosystem.com/timesheets",projectId:o.id})]})]})})}var v=e.i(657688),N=e.i(541071);let w="".concat("https://6jnqmj85-80.inc1.devtunnels.ms");function k(e){let{projectId:l,authToken:a}=e,r=(0,s.useRef)(null),[n,i]=(0,s.useState)([]),[c,d]=(0,s.useState)(!1),[o,m]=(0,s.useState)(null),[u,x]=(0,s.useState)({}),[h,p]=(0,s.useState)(null);(0,s.useEffect)(()=>{if(!l)return;let e=!0;return d(!0),p(null),fetch("".concat(w,"/files/projects/").concat(l),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}}).then(e=>e.json()).then(t=>{e&&i((Array.isArray(t)?t:[]).map(e=>({id:e.id,filename:e.filename,url:e.url,mimeType:e.mimeType,size:e.size,uploadedBy:e.uploadedBy,createdAt:e.createdAt})))}).catch(()=>p("Failed to load files")).finally(()=>e&&d(!1)),()=>{e=!1}},[l,a]);let g=async e=>{var t;let s=null==(t=e.target.files)?void 0:t[0];if(!s)return;let a="local-".concat(Date.now()),n=s.type.startsWith("image/")?URL.createObjectURL(s):null;i(e=>[{id:a,filename:s.name,url:n,mimeType:s.type},...e]),x(e=>({...e,[a]:!0})),p(null);try{let e=new FormData;e.append("file",s);let t=await fetch("".concat(w,"/files/projects/").concat(l),{method:"POST",body:e,headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}});if(!t.ok)throw Error("Upload failed");let r=await t.json();i(e=>e.map(e=>e.id===a?{id:r.id,filename:r.filename,url:r.url,mimeType:r.mimeType,size:r.size,uploadedBy:r.uploadedBy,createdAt:r.createdAt}:e))}catch(e){i(e=>e.filter(e=>e.id!==a)),p("Upload failed")}finally{x(e=>{let t={...e};return delete t[a],t}),r.current&&(r.current.value="")}},j=(e,t,s)=>{if(!e)return;let l=document.createElement("a");l.href=e,l.target="_blank",t&&(l.download=s||"file"),document.body.appendChild(l),l.click(),l.remove()};return(0,t.jsxs)("div",{className:"bg-white rounded-lg border p-5",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Upload file"}),(0,t.jsxs)("div",{onClick:()=>{var e;return null==(e=r.current)?void 0:e.click()},className:"border-2 border-dashed rounded-lg h-28 flex items-center justify-center cursor-pointer text-gray-500",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",fill:"#bdbdbd",viewBox:"0 0 24 24",className:"mx-auto mb-2",children:(0,t.jsx)("path",{d:"M12 16a1 1 0 0 1-1-1v-4.586l-1.293 1.293a1 1 0 1 1-1.414-1.414l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.414L13 10.414V15a1 1 0 0 1-1 1Zm7-1a5 5 0 0 0-4.546-4.978A7 7 0 0 0 5.062 9.2 5 5 0 0 0 6 19h13a4 4 0 0 0 0-8Z"})}),(0,t.jsx)("div",{className:"text-sm font-medium",children:"Choose a file"})]}),(0,t.jsx)("input",{ref:r,type:"file",className:"hidden",onChange:g})]}),c&&(0,t.jsx)("p",{className:"text-sm mt-3 text-gray-500",children:"Loadingâ€¦"}),h&&(0,t.jsx)("p",{className:"text-sm mt-3 text-red-500",children:h}),(0,t.jsx)("div",{className:"mt-6 grid grid-cols-6 gap-4",children:n.map(e=>{var s;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"h-20 border rounded bg-gray-50 flex items-center justify-center overflow-hidden",children:e.url&&(null==(s=e.mimeType)?void 0:s.startsWith("image/"))?(0,t.jsx)(v.default,{src:e.url,alt:e.filename||"file",fill:!0,className:"object-cover",unoptimized:!0}):(0,t.jsx)("span",{className:"text-xs text-gray-400",children:"File"})}),(0,t.jsx)("button",{onClick:()=>m(o===e.id?null:e.id),className:"absolute top-1 right-1 p-1 rounded hover:bg-white",children:(0,t.jsx)(N.MoreHorizontal,{size:16})}),o===e.id&&(0,t.jsxs)("div",{className:"absolute right-0 mt-7 w-36 bg-white border rounded shadow z-20",children:[(0,t.jsx)("button",{className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:()=>j(e.url,!0,e.filename||void 0),children:"Download"}),(0,t.jsx)("button",{className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50",onClick:()=>j(e.url),children:"View"})]})]}),(0,t.jsx)("div",{className:"mt-2 text-sm",children:(0,t.jsxs)("div",{className:"font-medium truncate",children:[e.filename||"Untitled",u[String(e.id)]&&(0,t.jsxs)("span",{className:"text-xs text-gray-400",children:[" ","Â· uploadingâ€¦"]})]})})]},String(e.id))})})]})}var S=e.i(248256),C=e.i(270756),T=e.i(286536),D=e.i(37727);let A="".concat("https://6jnqmj85-80.inc1.devtunnels.ms");function E(e){let{projectId:l,authToken:a}=e,[r,n]=(0,s.useState)([]),[i,c]=(0,s.useState)(!1),[d,o]=(0,s.useState)(null),[m,u]=(0,s.useState)(null),[x,h]=(0,s.useState)(!1),[p,g]=(0,s.useState)(""),[j,f]=(0,s.useState)(""),[b,y]=(0,s.useState)(!0),[v,N]=(0,s.useState)(!1),[w,k]=(0,s.useState)(!1),[D,E]=(0,s.useState)(null),[P,U]=(0,s.useState)(!1),[M,z]=(0,s.useState)(null),[R,B]=(0,s.useState)(""),[F,O]=(0,s.useState)(""),[_,q]=(0,s.useState)(!0),[H,J]=(0,s.useState)(!1),W={Authorization:"Bearer ".concat(a||localStorage.getItem("accessToken")||"")};return(0,s.useEffect)(()=>{l&&(async()=>{c(!0),o(null);try{let e=await fetch("".concat(A,"/projects/").concat(l,"/notes"),{headers:W});if(!e.ok)throw Error("Failed to load notes");let t=await e.json();n(Array.isArray(t)?t.map(e=>{var t,s;return{id:e.id,title:null!=(t=e.title)?t:"Untitled",content:null!=(s=e.content)?s:"---",isPublic:!!e.isPublic,createdBy:e.createdBy,createdAt:e.createdAt}}):[])}catch(e){o(e.message)}finally{c(!1)}})()},[l]),(0,t.jsxs)("div",{className:"bg-white rounded border",children:[(0,t.jsx)("div",{className:"p-4 flex justify-end border-b"}),(0,t.jsxs)("div",{className:"p-4",children:[i&&(0,t.jsx)("p",{children:"Loadingâ€¦"}),d&&(0,t.jsx)("p",{className:"text-red-600",children:d}),(0,t.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-blue-50",children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left",children:"Note Title"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"Note Type"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left",children:"Action"})]})}),(0,t.jsx)("tbody",{children:r.map(e=>(0,t.jsxs)("tr",{className:"border-t",children:[(0,t.jsx)("td",{className:"px-4 py-3",children:e.title}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[e.isPublic?(0,t.jsx)(S.Globe,{size:14}):(0,t.jsx)(C.Lock,{size:14}),e.isPublic?"Public":"Private"]})}),(0,t.jsxs)("td",{className:"px-4 py-3 text-center relative",children:[(0,t.jsx)("button",{className:"w-full px-3 py-2 flex gap-2 ",onClick:()=>{E(e),k(!0),u(null)},children:(0,t.jsx)(T.Eye,{size:14})}),m===e.id&&(0,t.jsx)("div",{className:"absolute right-0 mt-2 bg-white border rounded shadow w-40 z-20"})]})]},e.id))})]})]}),w&&D&&(0,t.jsxs)(I,{onClose:()=>k(!1),children:[(0,t.jsx)(L,{title:D.title,onClose:()=>k(!1)}),(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"border rounded-lg p-6 space-y-4",children:[(0,t.jsx)("h4",{className:"font-medium text-gray-700",children:"Project Note Details"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,t.jsx)("div",{className:"text-gray-500",children:"Note Title"}),(0,t.jsx)("div",{className:"col-span-2",children:D.title}),(0,t.jsx)("div",{className:"text-gray-500",children:"Note Type"}),(0,t.jsx)("div",{className:"col-span-2",children:D.isPublic?"Public":"Private"}),(0,t.jsx)("div",{className:"text-gray-500",children:"Note Detail"}),(0,t.jsx)("div",{className:"col-span-2 whitespace-pre-wrap",children:D.content||"---"})]})]})})]})]})}function I(e){let{children:s,onClose:l}=e;return(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex justify-center pt-12",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/30",onClick:l}),(0,t.jsx)("div",{className:"relative bg-white w-[900px] max-w-[95%] rounded border shadow",children:s})]})}function L(e){let{title:s,onClose:l}=e;return(0,t.jsxs)("div",{className:"p-4 border-b flex justify-between",children:[(0,t.jsx)("h4",{className:"font-medium",children:s}),(0,t.jsx)("button",{onClick:l,children:(0,t.jsx)(D.X,{size:18})})]})}let P="".concat("https://6jnqmj85-80.inc1.devtunnels.ms");function U(e){let{projectId:l}=e,[a,r]=(0,s.useState)([]),[n,i]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{l&&(async()=>{try{i(!0),localStorage.getItem("token")||localStorage.getItem("authToken");let e=await fetch("".concat(P,"/projects/").concat(l,"/activity"),{cache:"no-store",headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}}),t=await e.text(),s=t?JSON.parse(t):[];r(Array.isArray(s)?s:[])}catch(e){console.error("Failed to load activity",e),r([])}finally{i(!1)}})()},[l]),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Activity"}),(0,t.jsxs)("div",{className:"border rounded-md overflow-hidden",children:[n&&(0,t.jsx)("div",{className:"p-6 text-center text-gray-400",children:"Loading activityâ€¦"}),!n&&0===a.length&&(0,t.jsx)("div",{className:"p-6 text-center text-gray-400",children:"No activity found"}),!n&&a.map(e=>{let{day:s,month:l,time:a}=function(e){let t=new Date(e);return{day:t.toLocaleDateString("en-US",{day:"2-digit"}),month:t.toLocaleDateString("en-US",{month:"short"}),time:t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}}(e.createdAt);return(0,t.jsxs)("div",{className:"flex gap-4 p-4 border-b last:border-b-0",children:[(0,t.jsxs)("div",{className:"w-14 border rounded-md text-center overflow-hidden",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 border-b py-1",children:l}),(0,t.jsx)("div",{className:"text-lg font-semibold py-2",children:s})]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"text-sm text-gray-800",children:function(e){switch(e){case"PROJECT_FILE_UPLOADED":return"New file uploaded to the project.";case"FILE_DELETED":return"File deleted from the project.";case"PROJECT_NOTE_CREATED":return"New note added to the project.";case"PROJECT_NOTE_UPDATED":return"Project note updated.";case"TASK_CREATED":return"New task created.";case"TASK_UPDATED":return"Task updated.";case"TASK_DELETED":return"Task deleted.";case"TASK_STATUS_CHANGED":return"Task status changed.";case"TASK_FILE_UPLOADED":return"File uploaded to a task.";case"TIMELOG_CREATED":return"Time logged on the project.";case"TIMELOG_UPDATED":return"Time log updated.";case"TIMELOG_DELETED":return"Time log deleted.";case"PROJECT_ASSIGNED_EMPLOYEES_ADDED":return"Employee assigned to the project.";case"DISCUSSION_ROOM_CREATED":return"Discussion room created.";case"DISCUSSION_MESSAGE_DELETED":return"Discussion message deleted.";case"PROJECT_CREATED":return"Project created.";default:return e.replaceAll("_"," ").toLowerCase()}}(e.action)}),(0,t.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:a})]})]},e.id)})]})]})}var M=e.i(107233),z=e.i(569074),R=e.i(194983),B=e.i(323585),F=e.i(178583),O=e.i(592930),_=e.i(727612),q=e.i(440160),H=e.i(31592),J=e.i(315636);let W="".concat("https://6jnqmj85-80.inc1.devtunnels.ms");function V(e){let{projectId:l,roomId:a,onClose:r}=e,[n,i]=(0,s.useState)(null),[c,d]=(0,s.useState)([]),[o,m]=(0,s.useState)(""),[u,x]=(0,s.useState)(null),[h,p]=(0,s.useState)(null),[g,j]=(0,s.useState)(""),[f,b]=(0,s.useState)(null),[y,v]=(0,s.useState)(null),N=(0,s.useRef)(null),w=(0,s.useRef)(null),k=localStorage.getItem("employeeId"),S=e=>{let t=new Date(e);return"".concat(t.toLocaleDateString("en-GB")," | ").concat(t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}))},C=async()=>{let e=await fetch("".concat(W,"/api/projects/").concat(l,"/discussion-rooms/").concat(a),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}});i(await e.json())},A=async()=>{let e=await fetch("".concat(W,"/api/projects/discussion-rooms/").concat(a,"/messages"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}}),t=await e.json();t.sort((e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()),d(t)};(0,s.useEffect)(()=>{C(),A()},[a]),(0,s.useEffect)(()=>{var e;null==(e=N.current)||e.scrollIntoView({behavior:"smooth"})},[c]),(0,s.useEffect)(()=>{let e=new H.default("".concat(W,"/ws-discussion")),t=new J.Client({webSocketFactory:()=>e,debug:()=>{},connectHeaders:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))},onConnect:()=>{t.subscribe("/topic/discussion-rooms/".concat(a),e=>{let t=JSON.parse(e.body);d(e=>e.some(e=>e.id===t.id)?e:[...e,t])})}});return t.activate(),w.current=t,()=>{t.deactivate()}},[a]);let E=async()=>{if(!o&&!u)return;let e=new FormData;o&&e.append("content",o),u&&e.append("file",u),e.append("parentMessageId",""),await fetch("".concat(W,"/api/projects/discussion-rooms/").concat(a,"/messages"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))},body:e}),m(""),x(null),A()},I=async()=>{h&&(await fetch("".concat(W,"/api/projects/discussion-rooms/").concat(a,"/messages/").concat(h.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken")),"Content-Type":"text/plain"},body:g}),p(null),j(""))},L=async e=>{b(null),await fetch("".concat(W,"/api/projects/discussion-rooms/").concat(a,"/messages/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}})};return n?(0,t.jsxs)("div",{className:"fixed inset-0 bg-white z-50 flex flex-col",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center px-6 py-4 border-b",children:[(0,t.jsx)("h3",{className:"text-lg font-medium",children:"Discussion"}),(0,t.jsx)(D.X,{className:"cursor-pointer",onClick:r})]}),(0,t.jsxs)("div",{className:"px-6 py-4 border-b",children:[(0,t.jsx)("h2",{className:"font-medium text-lg",children:n.title}),(0,t.jsxs)("p",{className:"text-sm text-gray-400",children:["Requested On ",S(n.createdAt)]})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4",children:[c.map((e,s)=>{var l,a,r;let n,i=0===s,c=(null==(l=e.sender)?void 0:l.employeeId)===k;return(0,t.jsx)("div",{className:"border rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("img",{src:(null==(a=e.sender)?void 0:a.profileUrl)||"/avatar.png",className:"h-9 w-9 rounded-full"}),(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("p",{className:"font-medium",children:null==(r=e.sender)?void 0:r.name}),e.isBestReply&&(0,t.jsx)("span",{className:"bg-green-100 text-green-700 text-xs font-medium px-3 py-1 rounded-full",children:"Best Reply"})]}),"TEXT"===e.messageType&&(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.content}),"FILE"===e.messageType&&e.fileUrl&&(0,t.jsxs)("div",{className:"relative mt-2 border rounded p-2 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(null==(n=e.mimeType)?void 0:n.startsWith("image/"))?(0,t.jsx)("img",{src:e.fileUrl,className:"h-16 w-16 rounded object-cover"}):(0,t.jsx)(F.FileText,{size:32}),(0,t.jsx)("span",{className:"text-sm",children:e.fileName})]}),(0,t.jsx)(B.MoreVertical,{size:16,className:"cursor-pointer",onClick:()=>v(y===e.id?null:e.id)}),y===e.id&&(0,t.jsxs)("div",{className:"absolute right-2 top-10 bg-white border rounded shadow w-40 z-50",children:[(0,t.jsxs)("button",{onClick:()=>{window.open(e.fileUrl,"_blank"),v(null)},className:"flex items-center gap-2 px-4 py-2 text-sm hover:bg-gray-100 w-full",children:[(0,t.jsx)(T.Eye,{size:14}),"View"]}),(0,t.jsxs)("button",{onClick:()=>{((e,t)=>{if(!e)return;let s=document.createElement("a");s.href=e,s.download=t||"",document.body.appendChild(s),s.click(),document.body.removeChild(s)})(e.fileUrl,e.fileName),v(null)},className:"flex items-center gap-2 px-4 py-2 text-sm hover:bg-gray-100 w-full",children:[(0,t.jsx)(q.Download,{size:14}),"Download"]})]})]})]})]}),(0,t.jsxs)("div",{className:"relative flex items-center gap-3 text-xs text-gray-400",children:[S(e.createdAt),i&&c&&(0,t.jsxs)("button",{onClick:()=>{p(e),j(e.content||"")},className:"flex items-center gap-1 border px-3 py-1 rounded",children:[(0,t.jsx)(O.Edit2,{size:14}),"Edit"]}),!i&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(B.MoreVertical,{size:16,className:"cursor-pointer",onClick:()=>b(f===e.id?null:e.id)}),f===e.id&&(0,t.jsxs)("div",{className:"absolute right-0 top-6 bg-white border rounded shadow w-56 z-50",children:[c&&(0,t.jsxs)("button",{onClick:()=>{p(e),j(e.content||""),b(null)},className:"flex items-center gap-2 px-4 py-2 text-sm hover:bg-gray-100 w-full",children:[(0,t.jsx)(O.Edit2,{size:14}),"Edit"]}),(0,t.jsxs)("button",{onClick:()=>L(e.id),className:"flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-gray-100 w-full",children:[(0,t.jsx)(_.Trash2,{size:14}),"Delete"]})]})]})]})]})},e.id)}),(0,t.jsx)("div",{ref:N})]}),(0,t.jsxs)("div",{className:"border-t px-6 py-4",children:[(0,t.jsx)("h1",{children:"Reply *"}),(0,t.jsx)("textarea",{value:o,onChange:e=>m(e.target.value),className:"border rounded px-3 py-2 w-full mb-3 min-h-[80px]"}),(0,t.jsx)("h1",{children:"Add File *"}),(0,t.jsxs)("label",{className:"border border-dashed rounded flex flex-col items-center py-6 cursor-pointer text-gray-400 mb-4",children:[(0,t.jsx)(z.Upload,{}),(0,t.jsx)("span",{className:"text-sm mt-2",children:u?u.name:"Choose a file"}),(0,t.jsx)("input",{type:"file",hidden:!0,onChange:e=>{var t;return x((null==(t=e.target.files)?void 0:t[0])||null)}})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)("button",{onClick:E,className:"bg-blue-600 text-white px-6 py-2 rounded",children:"Reply"})})]}),h&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white w-[500px] rounded p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h3",{className:"font-medium",children:"Update Reply"}),(0,t.jsx)(D.X,{className:"cursor-pointer",onClick:()=>p(null)})]}),(0,t.jsx)("textarea",{value:g,onChange:e=>j(e.target.value),className:"border rounded w-full p-3 min-h-[100px]"}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 mt-4",children:[(0,t.jsx)("button",{onClick:()=>p(null),className:"px-4 py-2 border rounded",children:"Cancel"}),(0,t.jsx)("button",{onClick:I,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Save"})]})]})})]}):null}let X="".concat("https://6jnqmj85-80.inc1.devtunnels.ms");function G(e){let{projectId:l}=e,[a,r]=(0,s.useState)([]),[n,i]=(0,s.useState)([]),[c,d]=(0,s.useState)(!1),[o,m]=(0,s.useState)(!1),[u,x]=(0,s.useState)(!1),[h,p]=(0,s.useState)(null),[g,j]=(0,s.useState)({categoryName:"",colorCode:""}),[f,b]=(0,s.useState)({categoryId:"",title:"",initialMessage:"",file:null}),y=async()=>{try{let e=await fetch("".concat(X,"/api/projects/discussion-categories"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}}),t=await e.json();r(Array.isArray(t)?t:[])}catch(e){r([])}},v=async()=>{try{d(!0);let e=await fetch("".concat(X,"/api/projects/").concat(l,"/discussion-rooms"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}}),t=await e.json();i(Array.isArray(t)?t:[])}catch(e){i([])}finally{d(!1)}};(0,s.useEffect)(()=>{y(),v()},[]);let N=async()=>{if(!g.categoryName||!g.colorCode)return;let e=await fetch("".concat(X,"/api/projects/discussion-categories"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))},body:JSON.stringify(g)}),t=await e.json();r(e=>[...e,t]),j({categoryName:"",colorCode:""}),m(!1)},w=async()=>{if(!f.categoryId||!f.title||!f.initialMessage)return;let e=new FormData;e.append("title",f.title),e.append("categoryId",f.categoryId),e.append("initialMessage",f.initialMessage),f.file&&e.append("initialFile",f.file),await fetch("".concat(X,"/api/projects/").concat(l,"/discussion-rooms"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))},body:e}),b({categoryId:"",title:"",initialMessage:"",file:null}),x(!1),v()};return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium",children:"Discussion"}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsxs)("button",{onClick:()=>x(!0),className:"flex items-center gap-2 bg-blue-600 text-white px-3 py-1.5 rounded text-sm",children:[(0,t.jsx)(M.Plus,{size:16}),"New Discussion"]})})]}),n.map(e=>{var s,l,a,r,n;let i=(null==(s=e.lastMessage)?void 0:s.createdAt)||e.updatedAt||e.createdAt;return(0,t.jsxs)("div",{onClick:()=>p(e.id),className:"border rounded-md p-4 mb-3 flex justify-between items-center cursor-pointer",children:[(0,t.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,t.jsx)("img",{src:(null==(l=e.createdByUser)?void 0:l.profileUrl)||"/avatar.png",className:"h-10 w-10 rounded-full"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.title}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:(e=>{if(!e)return"";let t=new Date(e),s=t.toLocaleDateString("en-GB"),l=t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return"replied at ".concat(s," | ").concat(l)})(i)}),(null==(a=e.lastMessage)?void 0:a.messageType)==="FILE"&&(0,t.jsx)("img",{src:e.lastMessage.fileUrl,className:"h-16 mt-2 rounded"}),(null==(r=e.lastMessage)?void 0:r.messageType)==="TEXT"&&(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e.lastMessage.content})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(R.MessageCircle,{size:14}),null!=(n=e.messageCount)?n:0]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"h-2 w-2 rounded-full",style:{background:e.category.colorCode}}),e.category.categoryName]})]})]},e.id)}),0===n.length&&(0,t.jsx)("div",{className:"border rounded-md p-4 text-gray-400 text-center",children:"Team discussion will appear here"}),u&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg w-[700px] p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,t.jsx)("h4",{className:"font-medium text-lg",children:"New Discussion"}),(0,t.jsx)(D.X,{className:"cursor-pointer",onClick:()=>x(!1)})]}),(0,t.jsxs)("select",{value:f.categoryId,onChange:e=>b({...f,categoryId:e.target.value}),className:"border rounded px-3 py-2 w-full mb-3 text-sm",children:[(0,t.jsx)("option",{value:"",children:"Select category"}),a.map(e=>(0,t.jsx)("option",{value:e.id,children:e.categoryName},e.id))]}),(0,t.jsx)("input",{placeholder:"Title",value:f.title,onChange:e=>b({...f,title:e.target.value}),className:"border rounded px-3 py-2 w-full mb-3 text-sm"}),(0,t.jsx)("textarea",{placeholder:"Reply",value:f.initialMessage,onChange:e=>b({...f,initialMessage:e.target.value}),className:"border rounded px-3 py-2 w-full mb-4 text-sm min-h-[100px]"}),(0,t.jsxs)("label",{className:"border border-dashed rounded flex flex-col items-center justify-center py-6 cursor-pointer text-gray-400 mb-4",children:[(0,t.jsx)(z.Upload,{}),(0,t.jsx)("span",{className:"text-sm mt-2",children:"Choose a file"}),(0,t.jsx)("input",{type:"file",hidden:!0,onChange:e=>{var t;return b({...f,file:(null==(t=e.target.files)?void 0:t[0])||null})}})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,t.jsx)("button",{onClick:()=>x(!1),className:"border px-6 py-2 rounded text-sm",children:"Cancel"}),(0,t.jsx)("button",{onClick:w,className:"bg-blue-600 text-white px-6 py-2 rounded text-sm",children:"Save"})]})]})}),o&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg w-[600px] p-5",children:[(0,t.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Discussion Category"}),(0,t.jsx)(D.X,{className:"cursor-pointer",onClick:()=>m(!1)})]}),a.map(e=>(0,t.jsx)("div",{className:"flex justify-between items-center border-b py-2 text-sm",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"h-2 w-2 rounded-full",style:{background:e.colorCode}}),e.categoryName]})},e.id)),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[(0,t.jsx)("input",{placeholder:"Category Name",value:g.categoryName,onChange:e=>j({...g,categoryName:e.target.value}),className:"border rounded px-3 py-2 text-sm"}),(0,t.jsx)("input",{placeholder:"#3498db",value:g.colorCode,onChange:e=>j({...g,colorCode:e.target.value}),className:"border rounded px-3 py-2 text-sm"})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 mt-4",children:[(0,t.jsx)("button",{onClick:()=>m(!1),className:"border px-4 py-2 rounded text-sm",children:"Cancel"}),(0,t.jsx)("button",{onClick:N,className:"bg-blue-600 text-white px-4 py-2 rounded text-sm",children:"Save"})]})]})}),h&&(0,t.jsx)(V,{projectId:l,roomId:h,onClose:()=>p(null)})]})}let K="https://6jnqmj85-80.inc1.devtunnels.ms";function Y(){let e=(0,l.useParams)(),r=null==e?void 0:e.id,[n,i]=(0,s.useState)(null),[c,d]=(0,s.useState)(null),[o,m]=(0,s.useState)(!0),[u,x]=(0,s.useState)("overview");return((0,s.useEffect)(()=>{if(!r)return;let e=localStorage.getItem("accessToken")||"";(async()=>{try{let[t,s]=await Promise.all([a.default.get("".concat(K,"/projects/").concat(r),{headers:{Authorization:"Bearer ".concat(e)}}),a.default.get("".concat(K,"/projects/").concat(r,"/metrics"),{headers:{Authorization:"Bearer ".concat(e)}})]);i(Array.isArray(t.data)?t.data[0]:t.data),d(s.data)}catch(e){console.error(e)}finally{m(!1)}})()},[r]),o)?(0,t.jsx)("div",{className:"p-8 text-center",children:"Loading project..."}):n?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-semibold text-gray-800 mb-4",children:n.name}),(0,t.jsx)("div",{className:"bg-white rounded-t-xl border",children:(0,t.jsx)("nav",{className:"flex gap-6 px-6 h-14 items-center",children:[{key:"overview",label:"Overview"},{key:"files",label:"Files"},{key:"notes",label:"Notes"},{key:"activity",label:"Activity"},{key:"discussion",label:"Discussion"}].map(e=>{let s=u===e.key;return(0,t.jsxs)("button",{onClick:()=>x(e.key),className:"relative text-sm font-medium py-3 ".concat(s?"text-blue-600":"text-gray-600"),children:[e.label,s&&(0,t.jsx)("span",{className:"absolute -bottom-3 left-0 w-full h-0.5 bg-blue-500 rounded"})]},e.key)})})}),(0,t.jsxs)("div",{className:"bg-white rounded-b-xl border border-t-0 p-6",children:["overview"===u&&(0,t.jsx)(y,{project:n,metrics:c}),"files"===u&&(0,t.jsx)(k,{projectId:n.id}),"notes"===u&&(0,t.jsx)(E,{projectId:n.id}),"activity"===u&&(0,t.jsx)(U,{projectId:n.id}),"discussion"===u&&(0,t.jsx)(G,{projectId:n.id})]})]})}):(0,t.jsx)("div",{className:"p-8 text-center text-red-500",children:"Project not found"})}}]);