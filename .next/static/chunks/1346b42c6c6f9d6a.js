(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,515288,e=>{"use strict";e.s(["Card",()=>a,"CardContent",()=>l,"CardDescription",()=>s,"CardHeader",()=>n,"CardTitle",()=>i]);var t=e.i(843476),r=e.i(975157);function a(e){let{className:a,...n}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...n})}function n(e){let{className:a,...n}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...n})}function i(e){let{className:a,...n}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",a),...n})}function s(e){let{className:a,...n}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",a),...n})}function l(e){let{className:a,...n}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",a),...n})}},755838,(e,t,r)=>{"use strict";var a=e.r(271645),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=a.useState,s=a.useEffect,l=a.useLayoutEffect,c=a.useDebugValue;function d(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!n(e,r)}catch(e){return!0}}var o="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),a=i({inst:{value:r,getSnapshot:t}}),n=a[0].inst,o=a[1];return l(function(){n.value=r,n.getSnapshot=t,d(n)&&o({inst:n})},[e,r,t]),s(function(){return d(n)&&o({inst:n}),e(function(){d(n)&&o({inst:n})})},[e]),c(r),r};r.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:o},802239,(e,t,r)=>{"use strict";t.exports=e.r(755838)},727612,e=>{"use strict";e.s(["Trash2",()=>t],727612);let t=(0,e.i(475254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},286536,e=>{"use strict";e.s(["Eye",()=>t],286536);let t=(0,e.i(475254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},487486,e=>{"use strict";e.s(["Badge",()=>s]);var t=e.i(843476),r=e.i(991918),a=e.i(225913),n=e.i(975157);let i=(0,a.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function s(e){let{className:a,variant:s,asChild:l=!1,...c}=e,d=l?r.Slot:"span";return(0,t.jsx)(d,{"data-slot":"badge",className:(0,n.cn)(i({variant:s}),a),...c})}},541071,e=>{"use strict";e.s(["MoreHorizontal",()=>t],541071);let t=(0,e.i(475254).default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},688511,e=>{"use strict";e.s(["Edit",()=>t],688511);let t=(0,e.i(475254).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},799676,e=>{"use strict";e.s(["Avatar",()=>b,"AvatarFallback",()=>C,"AvatarImage",()=>w],799676);var t=e.i(843476),r=e.i(271645),a=e.i(30030),n=e.i(30207),i=e.i(934620),s=e.i(248425),l=e.i(802239);function c(){return()=>{}}var d="Avatar",[o,u]=(0,a.createContextScope)(d),[h,f]=o(d),m=r.forwardRef((e,a)=>{let{__scopeAvatar:n,...i}=e,[l,c]=r.useState("idle");return(0,t.jsx)(h,{scope:n,imageLoadingStatus:l,onImageLoadingStatusChange:c,children:(0,t.jsx)(s.Primitive.span,{...i,ref:a})})});m.displayName=d;var v="AvatarImage",x=r.forwardRef((e,a)=>{let{__scopeAvatar:d,src:o,onLoadingStatusChange:u=()=>{},...h}=e,m=f(v,d),x=function(e,t){let{referrerPolicy:a,crossOrigin:n}=t,s=(0,l.useSyncExternalStore)(c,()=>!0,()=>!1),d=r.useRef(null),o=s?(d.current||(d.current=new window.Image),d.current):null,[u,h]=r.useState(()=>j(o,e));return(0,i.useLayoutEffect)(()=>{h(j(o,e))},[o,e]),(0,i.useLayoutEffect)(()=>{let e=e=>()=>{h(e)};if(!o)return;let t=e("loaded"),r=e("error");return o.addEventListener("load",t),o.addEventListener("error",r),a&&(o.referrerPolicy=a),"string"==typeof n&&(o.crossOrigin=n),()=>{o.removeEventListener("load",t),o.removeEventListener("error",r)}},[o,n,a]),u}(o,h),g=(0,n.useCallbackRef)(e=>{u(e),m.onImageLoadingStatusChange(e)});return(0,i.useLayoutEffect)(()=>{"idle"!==x&&g(x)},[x,g]),"loaded"===x?(0,t.jsx)(s.Primitive.img,{...h,ref:a,src:o}):null});x.displayName=v;var g="AvatarFallback",p=r.forwardRef((e,a)=>{let{__scopeAvatar:n,delayMs:i,...l}=e,c=f(g,n),[d,o]=r.useState(void 0===i);return r.useEffect(()=>{if(void 0!==i){let e=window.setTimeout(()=>o(!0),i);return()=>window.clearTimeout(e)}},[i]),d&&"loaded"!==c.imageLoadingStatus?(0,t.jsx)(s.Primitive.span,{...l,ref:a}):null});function j(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}p.displayName=g;var y=e.i(975157);function b(e){let{className:r,...a}=e;return(0,t.jsx)(m,{"data-slot":"avatar",className:(0,y.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",r),...a})}function w(e){let{className:r,...a}=e;return(0,t.jsx)(x,{"data-slot":"avatar-image",className:(0,y.cn)("aspect-square size-full",r),...a})}function C(e){let{className:r,...a}=e;return(0,t.jsx)(p,{"data-slot":"avatar-fallback",className:(0,y.cn)("bg-muted flex size-full items-center justify-center rounded-full",r),...a})}},126500,e=>{"use strict";e.s(["default",()=>x],126500),e.i(247167);var t=e.i(843476),r=e.i(271645),a=e.i(618566),n=e.i(515288),i=e.i(799676),s=e.i(487486),l=e.i(784774),c=e.i(519455),d=e.i(541071),o=e.i(286536),u=e.i(688511);let h=(0,e.i(475254).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);var f=e.i(727612),m=e.i(755146);let v="https://6jnqmj85-80.inc1.devtunnels.ms";function x(){let[e,x]=(0,r.useState)([]),[g,p]=(0,r.useState)([]),[j,y]=(0,r.useState)(!0),[b,w]=(0,r.useState)(null),C=(0,a.useRouter)(),[k,S]=(0,r.useState)("all"),[E,T]=(0,r.useState)("all"),[N,A]=(0,r.useState)(""),[L,M]=(0,r.useState)(1),[D,I]=(0,r.useState)(10),[H,z]=(0,r.useState)("All"),[B,R]=(0,r.useState)("All"),P=(0,r.useCallback)(async()=>{y(!0),w(null);try{let e=localStorage.getItem("accessToken");if(!e){w("Token missing — please login again."),y(!1);return}let t=await fetch("".concat(v,"/clients"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("Failed to fetch clients: ".concat(t.status));let r=await t.json();x(Array.isArray(r)?r:[]),p(Array.isArray(r)?r:[])}catch(e){w(e.message||"Error fetching clients")}finally{y(!1)}},[]);(0,r.useEffect)(()=>{P()},[P]),(0,r.useEffect)(()=>{let e=e=>{"clients:refresh"===e.key&&P()},t=()=>{P()},r=()=>{"visible"===document.visibilityState&&P()};return window.addEventListener("storage",e),window.addEventListener("clients:refresh",t),document.addEventListener("visibilitychange",r),()=>{window.removeEventListener("storage",e),window.removeEventListener("clients:refresh",t),document.removeEventListener("visibilitychange",r)}},[P]),(0,r.useEffect)(()=>{let t=[...e];if(N){let e=N.toLowerCase();t=t.filter(t=>(t.name||"").toLowerCase().includes(e)||(t.email||"").toLowerCase().includes(e)||(t.clientId||"").toLowerCase().includes(e))}"all"!==k&&(t=t.filter(e=>e.status===k)),"all"!==E&&(t=t.filter(e=>e.category===E)),"All"!==H&&(t=t.filter(e=>e.name===H)),"All"!==B&&(t=t.filter(e=>e.category===B)),p(t),M(1)},[N,k,E,H,B,e]);let F=Math.ceil(g.length/D),O=g.slice((L-1)*D,L*D),V=async e=>{if(confirm("Delete ".concat(e.name,"?")))try{if(!(await fetch("".concat(v,"/clients/").concat(e.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}})).ok)throw Error("Delete failed");P()}catch(e){alert("Failed to delete")}};return j?(0,t.jsx)("div",{className:"h-screen flex justify-center items-center",children:"Loading..."}):b?(0,t.jsx)("div",{className:"h-screen flex justify-center items-center text-red-600",children:b}):(0,t.jsxs)("div",{className:"container mx-auto py-6 px-4",children:[(0,t.jsx)("div",{className:"mb-4 flex justify-end",children:(0,t.jsx)(c.Button,{onClick:()=>C.push("/clients/new"),children:"+ Add Client"})}),(0,t.jsxs)(n.Card,{children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsxs)(n.CardTitle,{children:["Clients (",g.length,")"]})}),(0,t.jsxs)(n.CardContent,{children:[(0,t.jsxs)(l.Table,{children:[(0,t.jsx)(l.TableHeader,{children:(0,t.jsxs)(l.TableRow,{children:[(0,t.jsx)(l.TableHead,{children:"Client ID"}),(0,t.jsx)(l.TableHead,{children:"Name"}),(0,t.jsx)(l.TableHead,{children:"Email"}),(0,t.jsx)(l.TableHead,{children:"Mobile"}),(0,t.jsx)(l.TableHead,{children:"Category"}),(0,t.jsx)(l.TableHead,{children:"Created"}),(0,t.jsx)(l.TableHead,{children:"Action"})]})}),(0,t.jsx)(l.TableBody,{children:O.map(e=>{var r,a,n,v,x;return(0,t.jsxs)(l.TableRow,{children:[(0,t.jsx)(l.TableCell,{children:e.clientId}),(0,t.jsx)(l.TableCell,{children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(i.Avatar,{children:[(0,t.jsx)(i.AvatarImage,{src:e.profilePictureUrl||"/placeholder.png"}),(0,t.jsx)(i.AvatarFallback,{children:null!=(v=null==(a=e.name)||null==(r=a[0])?void 0:r.toUpperCase())?v:"?"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-semibold",children:e.name}),(null==(n=e.company)?void 0:n.companyName)&&(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:e.company.companyName})]})]})}),(0,t.jsx)(l.TableCell,{children:e.email}),(0,t.jsx)(l.TableCell,{children:null!=(x=e.mobile)?x:"—"}),(0,t.jsx)(l.TableCell,{children:e.category?(0,t.jsx)(s.Badge,{children:e.category}):"—"}),(0,t.jsx)(l.TableCell,{children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"—"}),(0,t.jsx)(l.TableCell,{children:(0,t.jsxs)(m.DropdownMenu,{children:[(0,t.jsx)(m.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(c.Button,{variant:"ghost",size:"sm",children:(0,t.jsx)(d.MoreHorizontal,{})})}),(0,t.jsxs)(m.DropdownMenuContent,{align:"end",children:[(0,t.jsxs)(m.DropdownMenuItem,{onClick:()=>{let t;return t=e.id,C.push("/clients/".concat(t))},children:[(0,t.jsx)(o.Eye,{className:"mr-2 h-4 w-4"})," View"]}),(0,t.jsxs)(m.DropdownMenuItem,{onClick:()=>{let t;return t=e.id,C.push("/clients/".concat(t,"/edit"))},children:[(0,t.jsx)(u.Edit,{className:"mr-2 h-4 w-4"})," Edit"]}),(0,t.jsxs)(m.DropdownMenuItem,{onClick:()=>(e.id,C.push("/deals/create")),children:[(0,t.jsx)(h,{className:"mr-2 h-4 w-4"})," Move to Deal"]}),(0,t.jsx)(m.DropdownMenuSeparator,{}),(0,t.jsxs)(m.DropdownMenuItem,{className:"text-red-600",onClick:()=>V(e),children:[(0,t.jsx)(f.Trash2,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]},e.id)})})]}),(0,t.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:["Page ",L," of ",Math.max(1,F)]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.Button,{onClick:()=>M(e=>Math.max(1,e-1)),disabled:L<=1,children:"Prev"}),(0,t.jsx)(c.Button,{onClick:()=>M(e=>Math.min(F,e+1)),disabled:L>=F,children:"Next"})]})]})]})]})]})}}]);