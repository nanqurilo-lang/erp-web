(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,489593,e=>{"use strict";e.s(["default",()=>s]);var t=e.i(843476),a=e.i(271645),n=e.i(618566);function s(){let e=(0,n.useRouter)(),s=(0,n.useParams)(),i=null==s?void 0:s.id,[o,l]=(0,a.useState)({oldDesignationId:1,oldDepartmentId:1,newDepartmentId:2,newDesignationId:2,isPromotion:!0,sendNotification:!0,remarks:""}),[r,c]=(0,a.useState)(!1),[d,m]=(0,a.useState)(null);async function p(t){if(t.preventDefault(),!i)return void m("Missing employee ID in route");if(!o.oldDesignationId||!o.newDesignationId)return void m("Both old and new designation IDs are required");c(!0),m(null);try{let t=localStorage.getItem("accessToken");if(!t)throw Error("Authentication required");let a=await fetch("/api/hr/employee/".concat(i,"/promotions"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(o)}),n=a.headers.get("content-type")||"application/json",s=await a.text(),l=s;if(n.includes("application/json"))try{l=JSON.parse(s)}catch(e){}if(!a.ok){let e="string"==typeof l&&l.trim().length>0?l:(null==l?void 0:l.message)||"Failed to create promotion (status ".concat(a.status,")");throw Error(e)}alert("Promotion saved successfully"),e.push("/hr/employee/".concat(i))}catch(e){m((null==e?void 0:e.message)||"Unexpected error occurred")}finally{c(!1)}}return(0,t.jsxs)("div",{className:"p-4 max-w-2xl",children:[(0,t.jsx)("h1",{className:"text-xl font-semibold mb-4",children:"Add Promotion"}),d&&(0,t.jsx)("div",{className:"mb-4 text-red-600 text-sm",children:d}),(0,t.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{label:"Old Designation ID",key:"oldDesignationId"},{label:"Old Department ID",key:"oldDepartmentId"},{label:"New Department ID",key:"newDepartmentId"},{label:"New Designation ID",key:"newDesignationId"}].map(e=>{let{label:a,key:n}=e;return(0,t.jsxs)("label",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"text-sm",children:a}),(0,t.jsx)("input",{type:"number",className:"border rounded px-3 py-2",value:o[n],onChange:e=>l(t=>({...t,[n]:Number(e.target.value)})),required:!0,min:1})]},n)})}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:o.isPromotion,onChange:e=>l(t=>({...t,isPromotion:e.target.checked}))}),(0,t.jsx)("span",{className:"text-sm",children:"Is Promotion"})]}),(0,t.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:o.sendNotification,onChange:e=>l(t=>({...t,sendNotification:e.target.checked}))}),(0,t.jsx)("span",{className:"text-sm",children:"Send Notification"})]})]}),(0,t.jsxs)("label",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"text-sm",children:"Remarks"}),(0,t.jsx)("textarea",{className:"border rounded px-3 py-2 min-h-[100px]",value:o.remarks,onChange:e=>l(t=>({...t,remarks:e.target.value})),placeholder:"Exceptional performance in Q2"})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{type:"submit",disabled:r,className:"bg-black text-white px-4 py-2 rounded disabled:opacity-60",children:r?"Saving...":"Save Promotion"}),(0,t.jsx)("button",{type:"button",className:"border px-4 py-2 rounded",onClick:()=>e.back(),children:"Cancel"})]})]})]})}}]);