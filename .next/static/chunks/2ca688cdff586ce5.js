(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,193876,e=>{"use strict";e.s(["default",()=>c]);var t=e.i(843476),l=e.i(271645),a=e.i(522016);let s="https://6jnqmj85-80.inc1.devtunnels.ms";function c(){let[e,c]=(0,l.useState)([]),[r,n]=(0,l.useState)(!0),[i,d]=(0,l.useState)(""),[o,m]=(0,l.useState)("all"),[h,x]=(0,l.useState)(0),[p,u]=(0,l.useState)(!1),[j,g]=(0,l.useState)(""),[y,v]=(0,l.useState)(""),[f,N]=(0,l.useState)(!1),[b,w]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{let e=localStorage.getItem("accessToken"),t=await fetch("".concat(s,"/employee?page=0&size=200"),{headers:{Authorization:"Bearer ".concat(e)}});c((await t.json()).content),n(!1)})()},[]);let I=async()=>{if(!j)return void alert("Email is required");N(!0);try{let e=localStorage.getItem("accessToken");if(!(await fetch("".concat(s,"/employee/invite"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({to:j,message:y})})).ok)throw Error("Failed to send invite");u(!1),g(""),v(""),alert("Invitation sent successfully")}catch(e){alert(e.message)}finally{N(!1)}},S=e.filter(e=>{let t=e.name.toLowerCase().includes(i.toLowerCase())||e.email.toLowerCase().includes(i.toLowerCase())||e.employeeId.toLowerCase().includes(i.toLowerCase()),l="all"===o||"active"===o&&e.active||"inactive"===o&&!e.active;return t&&l});S.length;let C=S.slice(9*h,(h+1)*9);if(r)return(0,t.jsx)("div",{className:"p-6",children:"Loading..."});let E=async e=>{try{let t=localStorage.getItem("accessToken");await fetch("".concat(s,"/employee/").concat(encodeURIComponent(e)),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}),c(t=>t.filter(t=>t.employeeId!==e))}catch(e){alert("Failed to delete employee")}};return(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg border p-4 flex gap-4",children:[(0,t.jsx)("input",{placeholder:"Search employee...",className:"border px-3 py-2 rounded w-64",value:i,onChange:e=>{d(e.target.value),x(0)}}),(0,t.jsxs)("select",{className:"border px-3 py-2 rounded",value:o,onChange:e=>{m(e.target.value),x(0)},children:[(0,t.jsx)("option",{value:"all",children:"All Status"}),(0,t.jsx)("option",{value:"active",children:"Active"}),(0,t.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h1",{className:"text-xl font-semibold",children:"Employees"}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(a.default,{href:"/hr/employee/new",className:"bg-blue-600 text-white px-4 py-2 rounded",children:"+ Add Employee"}),(0,t.jsx)("button",{onClick:()=>u(!0),className:"border px-4 py-2 rounded",children:"+ Invite Employee"})]})]}),(0,t.jsx)("div",{className:"bg-white border rounded-lg overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{className:"bg-gray-100",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"p-3 text-left",children:"Employee ID"}),(0,t.jsx)("th",{className:"p-3 text-left",children:"Name"}),(0,t.jsx)("th",{className:"p-3 text-left",children:"Email"}),(0,t.jsx)("th",{className:"p-3 text-left",children:"Department"}),(0,t.jsx)("th",{className:"p-3 text-left",children:"Designation"}),(0,t.jsx)("th",{className:"p-3 text-left",children:"Role"}),(0,t.jsx)("th",{className:"p-3 text-left",children:"Status"}),(0,t.jsx)("th",{className:"p-3 text-left",children:"Action"})]})}),(0,t.jsx)("tbody",{children:C.map(e=>(0,t.jsxs)("tr",{className:"border-t",children:[(0,t.jsx)("td",{className:"p-3",children:e.employeeId}),(0,t.jsx)("td",{className:"p-3",children:e.name}),(0,t.jsx)("td",{className:"p-3",children:e.email}),(0,t.jsx)("td",{className:"p-3",children:e.departmentName||"—"}),(0,t.jsx)("td",{className:"p-3",children:e.designationName||"—"}),(0,t.jsx)("td",{className:"p-3",children:e.role}),(0,t.jsx)("td",{className:"p-3",children:(0,t.jsx)("span",{className:"px-2 py-1 text-xs rounded ".concat(e.active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e.active?"Active":"Inactive"})}),(0,t.jsxs)("td",{className:"p-3 relative",children:[(0,t.jsx)("button",{onClick:()=>w(b===e.employeeId?null:e.employeeId),className:"px-2 py-1 rounded hover:bg-gray-100",children:"⋮"}),b===e.employeeId&&(0,t.jsxs)("div",{className:"absolute right-0 mt-2 w-32 bg-white border rounded-lg shadow-lg z-50",children:[(0,t.jsx)(a.default,{href:"/hr/employee/".concat(e.employeeId),className:"block px-4 py-2 text-sm hover:bg-gray-100",onClick:()=>w(null),children:"View"}),(0,t.jsx)(a.default,{href:"/hr/employee/".concat(e.employeeId,"/edit"),className:"block px-4 py-2 text-sm hover:bg-gray-100",children:"Edit"}),(0,t.jsx)("button",{onClick:()=>{w(null),E(e.employeeId)},className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:"Delete"})]})]})]},e.employeeId))})]})}),p&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white w-full max-w-lg rounded-xl p-6 relative",children:[(0,t.jsx)("button",{onClick:()=>u(!1),className:"absolute right-4 top-4 text-gray-400 text-xl",children:"×"}),(0,t.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"Invite Employee"}),(0,t.jsx)("div",{className:"border rounded p-3 text-sm text-gray-600 mb-4",children:"Employees will receive an email to log in and update their profile through the self-service portal."}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Email *"}),(0,t.jsx)("input",{className:"w-full border rounded px-3 py-2 mt-1",value:j,onChange:e=>g(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Message"}),(0,t.jsx)("textarea",{className:"w-full border rounded px-3 py-2 mt-1",rows:4,placeholder:"Add a message (optional)",value:y,onChange:e=>v(e.target.value)})]}),(0,t.jsx)("div",{className:"flex justify-center mt-6",children:(0,t.jsx)("button",{disabled:f,onClick:I,className:"bg-blue-600 text-white px-8 py-2 rounded-lg",children:f?"Sending...":"Send Invite"})})]})]})})]})}}]);