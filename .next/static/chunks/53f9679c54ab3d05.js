(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87316,e=>{"use strict";e.s(["Calendar",()=>t],87316);let t=(0,e.i(475254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},370956,e=>{"use strict";e.s(["List",()=>t],370956);let t=(0,e.i(475254).default)("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]])},581285,e=>{"use strict";e.s(["default",()=>c],581285);var t=e.i(843476),a=e.i(519455),l=e.i(87316),s=e.i(370956),i=e.i(271645);function n(e){let{holidays:a,year:l,month:s}=e,i=new Date(l,s-1,1),n=new Date(l,s,0),d=i.getDay(),c=n.getDate(),r={};a.forEach(e=>{r[e.date]=r[e.date]?[...r[e.date],e]:[e]});let o=[];for(let e=0;e<d;e++)o.push(null);for(let e=1;e<=c;e++)o.push(e);return(0,t.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,t.jsx)("div",{className:"grid grid-cols-7 bg-gray-100 text-center text-sm font-medium",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,t.jsx)("div",{className:"py-2 border-r",children:e},e))}),(0,t.jsx)("div",{className:"grid grid-cols-7",children:o.map((e,a)=>{if(!e)return(0,t.jsx)("div",{className:"h-28 border"},a);let i=r["".concat(l,"-").concat(String(s).padStart(2,"0"),"-").concat(String(e).padStart(2,"0"))]||[];return(0,t.jsxs)("div",{className:"h-28 border p-1 text-sm",children:[(0,t.jsx)("div",{className:"font-semibold",children:e}),i.map(e=>(0,t.jsx)("div",{className:"mt-1 px-1 py-0.5 bg-blue-100 text-blue-800 rounded text-xs truncate",title:e.occasion,children:e.occasion},e.id))]},a)})})]})}let d="https://6jnqmj85-80.inc1.devtunnels.ms";function c(){let[e,c]=(0,i.useState)([]),[r,o]=(0,i.useState)([]),[h,u]=(0,i.useState)(!0),[x,p]=(0,i.useState)(!1),[m,y]=(0,i.useState)(""),[g,j]=(0,i.useState)(new Date().getFullYear()),[f,b]=(0,i.useState)(new Date().getMonth()+1),[v,N]=(0,i.useState)(""),[w,k]=(0,i.useState)(!1),[C,S]=(0,i.useState)([{date:"",occasion:""}]),[T,A]=(0,i.useState)(null),[D,M]=(0,i.useState)(null),[z,E]=(0,i.useState)("list"),B=async()=>{try{u(!0);let e=localStorage.getItem("accessToken"),t=await fetch("".concat(d,"/employee/api/holidays"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("Failed to fetch holidays");c(await t.json())}catch(e){y(e.message)}finally{u(!1)}};(0,i.useEffect)(()=>{B()},[]),(0,i.useEffect)(()=>{let t=e;(g||f)&&(t=t.filter(e=>{let[t,a]=e.date.split("-").map(Number);return(!g||t===g)&&(!f||a===f)})),v.trim()&&(t=t.filter(e=>e.occasion.toLowerCase().includes(v.toLowerCase()))),o(t)},[e,g,f,v]);let L=(e,t,a)=>{let l=[...C];l[e][t]=a,S(l)},O=async()=>{let e=C.filter(e=>e.date&&e.occasion.trim());if(!e.length)return void y("At least one holiday is required");try{p(!0),y("");let t=localStorage.getItem("accessToken");if(!t)return void y("Authentication required");let a=await fetch("".concat("https://6jnqmj85-80.inc1.devtunnels.ms","/employee/api/holidays/bulk"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({holidays:e})});if(!a.ok){let e=await a.text();throw Error(e||"Failed to add holidays")}await B(),k(!1),S([{date:"",occasion:""}])}catch(e){y(e.message)}finally{p(!1)}},q=async()=>{if(T)try{p(!0);let e=localStorage.getItem("accessToken");await fetch("".concat(d,"/employee/api/holidays/").concat(T.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({date:T.date,occasion:T.occasion})}),await B(),A(null)}finally{p(!1)}},F=async e=>{if(confirm("Delete this holiday?"))try{p(!0);let t=localStorage.getItem("accessToken");await fetch("".concat(d,"/employee/api/holidays/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}),await B()}finally{p(!1)}};return((0,i.useEffect)(()=>{M(null),A(null)},[z]),h)?(0,t.jsx)("p",{className:"p-6",children:"Loading…"}):(0,t.jsxs)("div",{className:"p-6 max-w-7xl mx-auto bg-white rounded-lg border",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("button",{onClick:()=>{k(!0),S([{date:"",occasion:""}])},className:"bg-blue-600 text-white px-4 py-2 rounded-md",children:"+ Add Holiday"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(a.Button,{size:"icon",variant:"list"===z?"default":"outline",onClick:()=>E("list"),"aria-label":"List View",children:(0,t.jsx)(s.List,{className:"h-4 w-4"})}),(0,t.jsx)(a.Button,{size:"icon",variant:"calendar"===z?"default":"outline",onClick:()=>E("calendar"),"aria-label":"Calendar View",children:(0,t.jsx)(l.Calendar,{className:"h-4 w-4"})})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 mb-4",children:[(0,t.jsx)("input",{type:"number",value:g,onChange:e=>j(+e.target.value),className:"border px-2 py-1 rounded w-24"}),(0,t.jsxs)("select",{value:f,onChange:e=>b(e.target.value?+e.target.value:""),className:"border px-2 py-1 rounded",children:[(0,t.jsx)("option",{value:"",children:"All Months"}),Array.from({length:12}).map((e,a)=>(0,t.jsx)("option",{value:a+1,children:new Date(0,a).toLocaleString("default",{month:"long"})},a))]}),(0,t.jsx)("input",{value:v,onChange:e=>N(e.target.value),placeholder:"Search occasion",className:"border px-3 py-1 rounded flex-1"})]}),"list"===z?(0,t.jsxs)("table",{className:"w-full border rounded-lg overflow-hidden",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Date"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Day"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Occasion"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Action"})]})}),(0,t.jsx)("tbody",{children:r.map(e=>(0,t.jsxs)("tr",{className:"border-t",children:[(0,t.jsx)("td",{className:"px-4 py-2",children:(null==T?void 0:T.id)===e.id?(0,t.jsx)("input",{type:"date",value:T.date,onChange:e=>A({...T,date:e.target.value}),className:"border px-2 py-1 rounded w-full"}):e.date}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.day}),(0,t.jsx)("td",{className:"px-4 py-2",children:(null==T?void 0:T.id)===e.id?(0,t.jsx)("input",{value:T.occasion,onChange:e=>A({...T,occasion:e.target.value}),className:"border px-2 py-1 rounded w-full"}):e.occasion}),(0,t.jsx)("td",{className:"px-4 py-2 relative",children:(null==T?void 0:T.id)===e.id?(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:q,className:"bg-green-600 text-white px-3 py-1 rounded",children:"Save"}),(0,t.jsx)("button",{onClick:()=>A(null),className:"bg-gray-300 px-3 py-1 rounded",children:"Cancel"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>M(D===e.id?null:e.id),className:"px-2 py-1",children:"⋮"}),D===e.id&&(0,t.jsxs)("div",{className:"absolute right-0 mt-2 w-32 bg-white border rounded shadow z-20",children:[(0,t.jsx)("button",{onClick:()=>{A(e),M(null)},className:"block w-full text-left px-3 py-2 hover:bg-gray-100",children:"Edit"}),(0,t.jsx)("button",{onClick:()=>{F(e.id),M(null)},className:"block w-full text-left px-3 py-2 text-red-600 hover:bg-red-50",children:"Delete"})]})]})})]},e.id))})]}):(0,t.jsx)(n,{holidays:r,year:g,month:f||new Date().getMonth()+1}),w&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"bg-white w-full max-w-3xl rounded-lg shadow-lg",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center p-4 border-b",children:[(0,t.jsx)("h2",{className:"font-semibold",children:"Add Holidays"}),(0,t.jsx)("button",{onClick:()=>k(!1),children:"✕"})]}),(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[C.map((e,a)=>(0,t.jsxs)("div",{className:"grid grid-cols-5 gap-3",children:[(0,t.jsx)("input",{type:"date",value:e.date,onChange:e=>L(a,"date",e.target.value),className:"border px-2 py-1 rounded col-span-2"}),(0,t.jsx)("input",{value:e.occasion,onChange:e=>L(a,"occasion",e.target.value),className:"border px-2 py-1 rounded col-span-2",placeholder:"Occasion"}),C.length>1&&(0,t.jsx)("button",{onClick:()=>S(C.filter((e,t)=>t!==a)),className:"bg-red-500 text-white rounded",children:"✕"})]},a)),(0,t.jsx)("button",{onClick:()=>S([...C,{date:"",occasion:""}]),className:"text-blue-600",children:"+ Add Row"})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 p-4 border-t",children:[(0,t.jsx)("button",{onClick:()=>k(!1),className:"px-4 py-2 bg-gray-200 rounded",children:"Cancel"}),(0,t.jsx)("button",{onClick:O,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Save"})]})]})})]})}}]);