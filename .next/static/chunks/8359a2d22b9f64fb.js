(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,755838,(e,t,r)=>{"use strict";var n=e.r(271645),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},l=n.useState,c=n.useEffect,i=n.useLayoutEffect,o=n.useDebugValue;function s(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!a(e,r)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=l({inst:{value:r,getSnapshot:t}}),a=n[0].inst,d=n[1];return i(function(){a.value=r,a.getSnapshot=t,s(a)&&d({inst:a})},[e,r,t]),c(function(){return s(a)&&d({inst:a}),e(function(){s(a)&&d({inst:a})})},[e]),o(r),r};r.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:d},802239,(e,t,r)=>{"use strict";t.exports=e.r(755838)},283599,20353,e=>{"use strict";let t;e.s(["default",()=>ea],283599);var r=e.i(271645),n=e.i(802239);e.s(["B",()=>p,"I",()=>S,"O",()=>m,"S",()=>$,"U",()=>u,"a",()=>f,"b",()=>s,"c",()=>z,"d",()=>Y,"e",()=>h,"f",()=>J,"g",()=>G,"i",()=>v,"j",()=>q,"m",()=>x,"n",()=>U,"o",()=>W,"r",()=>C,"s",()=>P,"t",()=>I,"u",()=>D,"z",()=>w],20353),e.s(["ERROR_REVALIDATE_EVENT",()=>i,"FOCUS_EVENT",()=>a,"MUTATE_EVENT",()=>c,"RECONNECT_EVENT",()=>l],211671);let a=0,l=1,c=2,i=3;var o=Object.prototype.hasOwnProperty;let s=new WeakMap,d=()=>{},u=d(),m=Object,h=e=>e===u,f=e=>"function"==typeof e,x=(e,t)=>({...e,...t}),p=e=>f(e.then),g={},y={},j="undefined",v=typeof window!=j,b=typeof document!=j,k=v&&"Deno"in window,w=(e,t)=>{let r=s.get(e);return[()=>!h(t)&&e.get(t)||g,n=>{if(!h(t)){let a=e.get(t);t in y||(y[t]=a),r[5](t,x(a,n),a||g)}},r[6],()=>!h(t)&&t in y?y[t]:!h(t)&&e.get(t)||g]},N=!0,[T,O]=v&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[d,d],E={initFocus:e=>(b&&document.addEventListener("visibilitychange",e),T("focus",e),()=>{b&&document.removeEventListener("visibilitychange",e),O("focus",e)}),initReconnect:e=>{let t=()=>{N=!0,e()},r=()=>{N=!1};return T("online",t),T("offline",r),()=>{O("online",t),O("offline",r)}}},S=!r.default.useId,C=!v||k,I=e=>v&&typeof window.requestAnimationFrame!=j?window.requestAnimationFrame(e):setTimeout(e,1),D=C?r.useEffect:r.useLayoutEffect,L="undefined"!=typeof navigator&&navigator.connection,A=!C&&L&&(["slow-2g","2g"].includes(L.effectiveType)||L.saveData),R=new WeakMap,F=(e,t)=>e==="[object ".concat(t,"]"),_=0,V=e=>{let t,r,n=typeof e,a=m.prototype.toString.call(e),l=F(a,"Date"),c=F(a,"RegExp"),i=F(a,"Object");if(m(e)!==e||l||c)t=l?e.toJSON():"symbol"==n?e.toString():"string"==n?JSON.stringify(e):""+e;else{if(t=R.get(e))return t;if(t=++_+"~",R.set(e,t),Array.isArray(e)){for(r=0,t="@";r<e.length;r++)t+=V(e[r])+",";R.set(e,t)}if(i){t="#";let n=m.keys(e).sort();for(;!h(r=n.pop());)h(e[r])||(t+=r+":"+V(e[r])+",");R.set(e,t)}}return t},P=e=>{if(f(e))try{e=e()}catch(t){e=""}let t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?V(e):"",t]},M=0,W=()=>++M;async function U(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let[n,a,l,i]=t,o=x({populateCache:!0,throwOnError:!0},"boolean"==typeof i?{revalidate:i}:i||{}),d=o.populateCache,m=o.rollbackOnError,g=o.optimisticData,y=o.throwOnError;if(f(a)){let e=[];for(let t of n.keys())!/^\$(inf|sub)\$/.test(t)&&a(n.get(t)._k)&&e.push(t);return Promise.all(e.map(j))}return j(a);async function j(e){let r,[a]=P(e);if(!a)return;let[i,x]=w(n,a),[j,v,b,k]=s.get(n),N=()=>{let t=j[a];return(f(o.revalidate)?o.revalidate(i().data,e):!1!==o.revalidate)&&(delete b[a],delete k[a],t&&t[0])?t[0](c).then(()=>i().data):i().data};if(t.length<3)return N();let T=l,O=!1,E=W();v[a]=[E,0];let S=!h(g),C=i(),I=C.data,D=C._c,L=h(D)?I:D;if(S&&x({data:g=f(g)?g(L,I):g,_c:L}),f(T))try{T=T(L)}catch(e){r=e,O=!0}if(T&&p(T)){let e;if(T=await T.catch(e=>{r=e,O=!0}),E!==v[a][0]){if(O)throw r;return T}O&&S&&(e=r,"function"==typeof m?m(e):!1!==m)&&(d=!0,x({data:L,_c:u}))}if(d&&!O&&(f(d)?x({data:d(T,L),error:u,_c:u}):x({data:T,error:u,_c:u})),v[a][1]=W(),Promise.resolve(N()).then(()=>{x({_c:u})}),O){if(y)throw r;return}return T}}let B=(e,t)=>{for(let r in e)e[r][0]&&e[r][0](t)},H=(e,t)=>{if(!s.has(e)){let r=x(E,t),n=Object.create(null),c=U.bind(u,e),i=d,o=Object.create(null),m=(e,t)=>{let r=o[e]||[];return o[e]=r,r.push(t),()=>r.splice(r.indexOf(t),1)},h=(t,r,n)=>{e.set(t,r);let a=o[t];if(a)for(let e of a)e(r,n)},f=()=>{if(!s.has(e)&&(s.set(e,[n,Object.create(null),Object.create(null),Object.create(null),c,h,m]),!C)){let t=r.initFocus(setTimeout.bind(u,B.bind(u,n,a))),c=r.initReconnect(setTimeout.bind(u,B.bind(u,n,l)));i=()=>{t&&t(),c&&c(),s.delete(e)}}};return f(),[e,c,f,i]}return[e,s.get(e)[4]]},[z,q]=H(new Map),Y=x({onLoadingSlow:d,onSuccess:d,onError:d,onErrorRetry:(e,t,r,n,a)=>{let l=r.errorRetryCount,c=a.retryCount,i=~~((Math.random()+.5)*(1<<(c<8?c:8)))*r.errorRetryInterval;(h(l)||!(c>l))&&setTimeout(n,i,a)},onDiscarded:d,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:A?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:A?5e3:3e3,compare:function e(t,r){var n,a;if(t===r)return!0;if(t&&r&&(n=t.constructor)===r.constructor){if(n===Date)return t.getTime()===r.getTime();if(n===RegExp)return t.toString()===r.toString();if(n===Array){if((a=t.length)===r.length)for(;a--&&e(t[a],r[a]););return -1===a}if(!n||"object"==typeof t){for(n in a=0,t)if(o.call(t,n)&&++a&&!o.call(r,n)||!(n in r)||!e(t[n],r[n]))return!1;return Object.keys(r).length===a}}return t!=t&&r!=r},isPaused:()=>!1,cache:z,mutate:q,fallback:{}},{isOnline:()=>N,isVisible:()=>{let e=b&&document.visibilityState;return h(e)||"hidden"!==e}}),J=(e,t)=>{let r=x(e,t);if(t){let{use:n,fallback:a}=e,{use:l,fallback:c}=t;n&&l&&(r.use=n.concat(l)),a&&c&&(r.fallback=x(a,c))}return r},$=(0,r.createContext)({}),G=e=>{let{value:t}=e,n=(0,r.useContext)($),a=f(t),l=(0,r.useMemo)(()=>a?t(n):t,[a,n,t]),c=(0,r.useMemo)(()=>a?l:J(n,l),[a,n,l]),i=l&&l.provider,o=(0,r.useRef)(u);i&&!o.current&&(o.current=H(i(c.cache||z),l));let s=o.current;return s&&(c.cache=s[0],c.mutate=s[1]),D(()=>{if(s)return s[2]&&s[2](),s[3]},[]),(0,r.createElement)($.Provider,x(e,{value:c}))};var K=e.i(211671);let Q=v&&window.__SWR_DEVTOOLS_USE__,X=(Q?window.__SWR_DEVTOOLS_USE__:[]).concat(e=>(t,r,n)=>{let a=r&&function(){for(var e=arguments.length,n=Array(e),a=0;a<e;a++)n[a]=arguments[a];let[l]=P(t),[,,,c]=s.get(z);if(l.startsWith("$inf$"))return r(...n);let i=c[l];return h(i)?r(...n):(delete c[l],i)};return e(t,a,n)});Q&&(window.__SWR_DEVTOOLS_REACT__=r.default);let Z=()=>{},ee=Z();new WeakMap;let et=r.default.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),er={dedupe:!0},en=Promise.resolve(u);m.defineProperty(G,"defaultValue",{value:Y});let ea=(t=(e,t,a)=>{let{cache:l,compare:c,suspense:i,fallbackData:o,revalidateOnMount:d,revalidateIfStale:m,refreshInterval:g,refreshWhenHidden:y,refreshWhenOffline:j,keepPreviousData:v}=a,[b,k,N,T]=s.get(l),[O,E]=P(e),L=(0,r.useRef)(!1),A=(0,r.useRef)(!1),R=(0,r.useRef)(O),F=(0,r.useRef)(t),_=(0,r.useRef)(a),V=()=>_.current.isVisible()&&_.current.isOnline(),[M,B,H,z]=w(l,O),q=(0,r.useRef)({}).current,Y=h(o)?h(a.fallback)?u:a.fallback[O]:o,J=(e,t)=>{for(let r in q)if("data"===r){if(!c(e[r],t[r])&&(!h(e[r])||!c(ec,t[r])))return!1}else if(t[r]!==e[r])return!1;return!0},$=(0,r.useMemo)(()=>{let e=!!O&&!!t&&(h(d)?!_.current.isPaused()&&!i&&!1!==m:d),r=t=>{let r=x(t);return(delete r._k,e)?{isValidating:!0,isLoading:!0,...r}:r},n=M(),a=z(),l=r(n),c=n===a?l:r(a),o=l;return[()=>{let e=r(M());return J(e,o)?(o.data=e.data,o.isLoading=e.isLoading,o.isValidating=e.isValidating,o.error=e.error,o):(o=e,e)},()=>c]},[l,O]),G=(0,n.useSyncExternalStore)((0,r.useCallback)(e=>H(O,(t,r)=>{J(r,t)||e()}),[l,O]),$[0],$[1]),Q=!L.current,X=b[O]&&b[O].length>0,Z=G.data,ee=h(Z)?Y&&p(Y)?et(Y):Y:Z,ea=G.error,el=(0,r.useRef)(ee),ec=v?h(Z)?h(el.current)?ee:el.current:Z:ee,ei=(!X||!!h(ea))&&(Q&&!h(d)?d:!_.current.isPaused()&&(i?!h(ee)&&m:h(ee)||m)),eo=!!(O&&t&&Q&&ei),es=h(G.isValidating)?eo:G.isValidating,ed=h(G.isLoading)?eo:G.isLoading,eu=(0,r.useCallback)(async e=>{let t,r,n=F.current;if(!O||!n||A.current||_.current.isPaused())return!1;let l=!0,i=e||{},o=!N[O]||!i.dedupe,s=()=>S?!A.current&&O===R.current&&L.current:O===R.current,d={isValidating:!1,isLoading:!1},m=()=>{B(d)},x=()=>{let e=N[O];e&&e[1]===r&&delete N[O]},p={isValidating:!0};h(M().data)&&(p.isLoading=!0);try{if(o&&(B(p),a.loadingTimeout&&h(M().data)&&setTimeout(()=>{l&&s()&&_.current.onLoadingSlow(O,a)},a.loadingTimeout),N[O]=[n(E),W()]),[t,r]=N[O],t=await t,o&&setTimeout(x,a.dedupingInterval),!N[O]||N[O][1]!==r)return o&&s()&&_.current.onDiscarded(O),!1;d.error=u;let e=k[O];if(!h(e)&&(r<=e[0]||r<=e[1]||0===e[1]))return m(),o&&s()&&_.current.onDiscarded(O),!1;let i=M().data;d.data=c(i,t)?i:t,o&&s()&&_.current.onSuccess(t,O,a)}catch(r){x();let e=_.current,{shouldRetryOnError:t}=e;!e.isPaused()&&(d.error=r,o&&s()&&(e.onError(r,O,e),(!0===t||f(t)&&t(r))&&(!_.current.revalidateOnFocus||!_.current.revalidateOnReconnect||V())&&e.onErrorRetry(r,O,e,e=>{let t=b[O];t&&t[0]&&t[0](K.ERROR_REVALIDATE_EVENT,e)},{retryCount:(i.retryCount||0)+1,dedupe:!0})))}return l=!1,m(),!0},[O,l]),em=(0,r.useCallback)(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return U(l,R.current,...t)},[]);if(D(()=>{F.current=t,_.current=a,h(Z)||(el.current=Z)}),D(()=>{if(!O)return;let e=eu.bind(u,er),t=0;_.current.revalidateOnFocus&&(t=Date.now()+_.current.focusThrottleInterval);let r=((e,t,r)=>{let n=t[e]||(t[e]=[]);return n.push(r),()=>{let e=n.indexOf(r);e>=0&&(n[e]=n[n.length-1],n.pop())}})(O,b,function(r){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r==K.FOCUS_EVENT){let r=Date.now();_.current.revalidateOnFocus&&r>t&&V()&&(t=r+_.current.focusThrottleInterval,e())}else if(r==K.RECONNECT_EVENT)_.current.revalidateOnReconnect&&V()&&e();else if(r==K.MUTATE_EVENT)return eu();else if(r==K.ERROR_REVALIDATE_EVENT)return eu(n)});return A.current=!1,R.current=O,L.current=!0,B({_k:E}),ei&&!N[O]&&(h(ee)||C?e():I(e)),()=>{A.current=!0,r()}},[O]),D(()=>{let e;function t(){let t=f(g)?g(M().data):g;t&&-1!==e&&(e=setTimeout(r,t))}function r(){!M().error&&(y||_.current.isVisible())&&(j||_.current.isOnline())?eu(er).then(t):t()}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[g,y,j,O]),(0,r.useDebugValue)(ec),i){let e=O&&h(ee);if(!S&&C&&e)throw Error("Fallback data is required when using Suspense in SSR.");e&&(F.current=t,_.current=a,A.current=!1);let r=T[O];if(et(!h(r)&&e?em(r):en),!h(ea)&&e)throw ea;let n=e?eu(er):en;!h(ec)&&e&&(n.status="fulfilled",n.value=!0),et(n)}return{mutate:em,get data(){return q.data=!0,ec},get error(){return q.error=!0,ea},get isValidating(){return q.isValidating=!0,es},get isLoading(){return q.isLoading=!0,ed}}},function(){for(var e=arguments.length,n=Array(e),a=0;a<e;a++)n[a]=arguments[a];let l=(()=>{let e=(0,r.useContext)($);return(0,r.useMemo)(()=>x(Y,e),[e])})(),[c,i,o]=f(n[1])?[n[0],n[1],n[2]||{}]:[n[0],null,(null===n[1]?n[2]:n[1])||{}],s=J(l,o),d=t,{use:u}=s,m=(u||[]).concat(X);for(let e=m.length;e--;)d=m[e](d);return d(c,i||s.fetcher||null,s)})},773253,e=>{"use strict";e.s(["mutate",()=>t.j]);var t=e.i(20353)},831017,e=>{"use strict";e.s(["default",()=>b],831017),e.i(247167);var t=e.i(843476),r=e.i(283599),n=e.i(773253),a=e.i(271645),l=e.i(618566);let c="https://6jnqmj85-80.inc1.devtunnels.ms";function i(e){var r;let{open:n,onClose:i}=e,[d,u]=(0,a.useState)(!1),[m,h]=(0,a.useState)("MONTH"),[f,x]=(0,a.useState)([]),[p,g]=(0,a.useState)([]),[y,j]=(0,a.useState)(!1),v=(0,l.useRouter)(),[b,k]=(0,a.useState)({employeeId:"",year:new Date().getFullYear(),month:new Date().getMonth()+1,clockInTime:"09:00",clockOutTime:"17:00",clockInLocation:"Office",clockOutLocation:"Office",clockInWorkingFrom:"Office",clockOutWorkingFrom:"Office",late:!1,halfDay:!1,overwrite:!1});if((0,a.useEffect)(()=>{n&&(async()=>{let e=localStorage.getItem("accessToken");if(!e)return;let t=await fetch("".concat(c,"/employee/all"),{headers:{Authorization:"Bearer ".concat(e)}});t.ok&&g((await t.json()).filter(e=>e.active))})()},[n]),!n)return null;let w=async()=>{if(!b.employeeId)return void alert("Please select employee");if("DATE"===m&&!f.length)return void alert("Please select date");u(!0);try{let e=localStorage.getItem("accessToken");if(!e)throw Error("Unauthorized");let t={clockInTime:b.clockInTime,clockInLocation:b.clockInLocation,clockInWorkingFrom:b.clockInWorkingFrom,clockOutTime:b.clockOutTime,clockOutLocation:b.clockOutLocation,clockOutWorkingFrom:b.clockOutWorkingFrom,late:b.late,halfDay:b.halfDay},r="",n={};if("DATE"===m?(r="".concat(c,"/employee/attendance/mark"),n={employeeIds:[b.employeeId],dates:f,payload:t,overwrite:b.overwrite,markedBy:b.employeeId}):(r="".concat(c,"/employee/attendance/mark/month"),n={year:b.year,month:b.month,employeeIds:[b.employeeId],payload:t,overwrite:b.overwrite,markedBy:b.employeeId}),!(await fetch(r,{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(n)})).ok)throw Error("Failed to mark attendance");v.push("/hr/attendence"),i()}catch(e){alert(e.message)}finally{u(!1)}};return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:(0,t.jsxs)("div",{className:"bg-white w-full max-w-3xl rounded-xl shadow-lg",children:[(0,t.jsxs)("div",{className:"flex justify-between px-6 py-4 border-b",children:[(0,t.jsx)("h2",{className:"font-semibold",children:"Mark Attendance"}),(0,t.jsx)("button",{onClick:i,children:"Ã—"})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Employee *"}),(0,t.jsx)("button",{onClick:()=>j(!y),className:"w-full mt-1 border rounded-lg px-3 py-2 text-left",children:b.employeeId?null==(r=p.find(e=>e.employeeId===b.employeeId))?void 0:r.name:"Select employee"}),y&&(0,t.jsx)("div",{className:"absolute z-50 w-full bg-white border rounded-lg shadow mt-1 max-h-60 overflow-y-auto",children:p.map(e=>(0,t.jsxs)("div",{onClick:()=>{k({...b,employeeId:e.employeeId}),j(!1)},className:"px-3 py-2 hover:bg-gray-100 cursor-pointer flex gap-2",children:[e.profilePictureUrl?(0,t.jsx)("img",{src:e.profilePictureUrl,className:"w-6 h-6 rounded-full"}):(0,t.jsx)("div",{className:"w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-xs",children:e.name[0]}),(0,t.jsx)("span",{children:e.name})]},e.employeeId))})]}),(0,t.jsxs)("div",{className:"flex gap-6 text-sm",children:[(0,t.jsx)("span",{className:"font-medium",children:"Mark Attendance by"}),(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"radio",checked:"MONTH"===m,onChange:()=>h("MONTH")})," ","Month"]}),(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"radio",checked:"DATE"===m,onChange:()=>h("DATE")})," ","Date"]})]}),"MONTH"===m&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(o,{label:"Year",children:(0,t.jsx)("input",{type:"number",value:b.year,onChange:e=>k({...b,year:+e.target.value}),className:"input border rounded-xl py-2 px-4"})}),(0,t.jsx)(o,{label:"Month",children:(0,t.jsx)("select",{value:b.month,onChange:e=>k({...b,month:+e.target.value}),className:"input border rounded-xl py-2 px-4",children:Array.from({length:12}).map((e,r)=>(0,t.jsx)("option",{value:r+1,children:new Date(0,r).toLocaleString("default",{month:"long"})},r))})})]}),"DATE"===m&&(0,t.jsx)(o,{label:"Select Date",children:(0,t.jsx)("input",{type:"date",onChange:e=>x([e.target.value]),className:"input border rounded-xl py-2 px-4"})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(o,{label:"Clock In",children:(0,t.jsx)("input",{type:"time",value:b.clockInTime,onChange:e=>k({...b,clockInTime:e.target.value}),className:"input border rounded-xl py-2 px-4"})}),(0,t.jsx)(o,{label:"Clock Out",children:(0,t.jsx)("input",{type:"time",value:b.clockOutTime,onChange:e=>k({...b,clockOutTime:e.target.value}),className:"input border rounded-xl py-2 px-4"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(s,{label:"Late",value:b.late,onChange:e=>k({...b,late:e})}),(0,t.jsx)(s,{label:"Half Day",value:b.halfDay,onChange:e=>k({...b,halfDay:e})})]}),(0,t.jsxs)("label",{className:"flex gap-2 text-sm",children:[(0,t.jsx)("input",{type:"checkbox",checked:b.overwrite,onChange:e=>k({...b,overwrite:e.target.checked})}),"Attendance Overwrite"]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-4 px-6 py-4 border-t",children:[(0,t.jsx)("button",{onClick:i,className:"border px-4 py-2 rounded",children:"Cancel"}),(0,t.jsx)("button",{onClick:w,disabled:d,className:"bg-blue-600 text-white px-6 py-2 rounded",children:d?"Saving...":"Update"})]})]})})}let o=e=>{let{label:r,children:n}=e;return(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("label",{className:"text-xs text-gray-600",children:r}),n]})},s=e=>{let{label:r,value:n,onChange:a}=e;return(0,t.jsxs)("div",{className:"flex gap-4 text-sm",children:[(0,t.jsx)("span",{children:r}),(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"radio",checked:n,onChange:()=>a(!0)})," Yes"]}),(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"radio",checked:!n,onChange:()=>a(!1)})," No"]})]})},d="https://6jnqmj85-80.inc1.devtunnels.ms";function u(e){let{open:r,onClose:n,data:l,onUpdated:c}=e,[i,o]=(0,a.useState)(!1),[s,u]=(0,a.useState)(!1),[p,g]=(0,a.useState)("view");if(!r||!l)return null;let y=l.employeeId,j=l.date,v=async()=>{if(confirm("Are you sure you want to delete this attendance?"))try{u(!0);let e=localStorage.getItem("accessToken");await fetch("".concat(d,"/employee/attendance/delete?employeeId=").concat(y,"&date=").concat(j),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}}),n(),null==c||c()}catch(e){alert("Failed to delete attendance")}finally{u(!1)}},b=e=>e?new Date("1970-01-01T".concat(e)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"--",k=l.clockInTime&&l.clockOutTime?function(e,t){let r=new Date("1970-01-01T".concat(e)),n=(new Date("1970-01-01T".concat(t)).getTime()-r.getTime())/1e3,a=Math.floor(n/3600),l=Math.floor(n%3600/60);return"".concat(a,"h ").concat(l,"m")}(l.clockInTime,l.clockOutTime):"â€”";return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:(0,t.jsxs)("div",{className:"bg-white w-full max-w-4xl rounded-xl shadow-lg relative",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center px-6 py-4 border-b",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"view"===p?"Attendance Details":"Edit Attendance"}),(0,t.jsxs)("div",{className:"flex items-center gap-3 relative",children:["view"===p&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>o(e=>!e),className:"text-xl px-2 hover:bg-gray-100 rounded",children:"â‹®"}),i&&(0,t.jsxs)("div",{className:"absolute right-0 top-10 w-32 bg-white border rounded-lg shadow-md z-10",children:[(0,t.jsx)("button",{onClick:()=>{o(!1),g("edit")},className:"w-full text-left px-4 py-2 hover:bg-gray-50",children:"âœ Edit"}),(0,t.jsx)("button",{onClick:v,disabled:s,className:"w-full text-left px-4 py-2 text-red-600 hover:bg-red-50",children:"ðŸ—‘ Delete"})]})]}),(0,t.jsx)("button",{onClick:n,className:"text-2xl",children:"Ã—"})]})]}),"view"===p?(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-6 p-6",children:[(0,t.jsxs)("div",{className:"border rounded-lg p-4 space-y-4",children:[(0,t.jsxs)("h3",{className:"font-medium",children:["Date â€“ ",l.date," (",new Date(l.date).toLocaleDateString("en-US",{weekday:"long"}),")"]}),(0,t.jsx)(h,{label:"Clock In",value:b(l.clockInTime)}),(0,t.jsx)("div",{className:"flex justify-center py-6",children:(0,t.jsx)("div",{className:"w-32 h-32 rounded-full border-4 border-blue-500 flex items-center justify-center text-lg font-semibold",children:k})}),(0,t.jsx)(h,{label:"Clock Out",value:b(l.clockOutTime)})]}),(0,t.jsxs)("div",{className:"border rounded-lg p-4 space-y-6",children:[(0,t.jsx)(f,{title:"Clock In",time:b(l.clockInTime),location:l.clockInLocation,workingFrom:l.clockInWorkingFrom,late:l.late}),(0,t.jsx)(f,{title:"Clock Out",time:l.clockOutTime?b(l.clockOutTime):"Did not clock out",location:l.clockOutLocation,workingFrom:l.clockOutWorkingFrom}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 pt-2 text-sm",children:[l.holiday&&x("Holiday","â­"),l.leave&&x("Leave","â›”"),l.late&&x("Late","â°"),l.halfDay&&x("Half Day","Â½"),l.isPresent&&x("Present","âœ”")]})]})]}):(0,t.jsx)(m,{data:l,onCancel:()=>g("view"),onSaved:()=>{g("view"),null==c||c(),n()}})]})})}function m(e){let{data:r,onCancel:n,onSaved:l}=e,[c,i]=(0,a.useState)(!1),[o,s]=(0,a.useState)({clockInTime:r.clockInTime||"",clockInLocation:r.clockInLocation||"",clockInWorkingFrom:r.clockInWorkingFrom||"",clockOutTime:r.clockOutTime||"",clockOutLocation:r.clockOutLocation||"",clockOutWorkingFrom:r.clockOutWorkingFrom||"",late:!!r.late,halfDay:!!r.halfDay}),u=async()=>{try{i(!0);let e=localStorage.getItem("accessToken");await fetch("".concat(d,"/employee/attendance/edit?employeeId=").concat(r.employeeId,"&date=").concat(r.date,"&overwrite=true&markedBy=ADMIN"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(o)}),l()}catch(e){alert("Failed to update attendance")}finally{i(!1)}};return(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(p,{label:"Clock In Time",type:"time",value:o.clockInTime,onChange:e=>s({...o,clockInTime:e})}),(0,t.jsx)(p,{label:"Clock Out Time",type:"time",value:o.clockOutTime,onChange:e=>s({...o,clockOutTime:e})}),(0,t.jsx)(p,{label:"Clock In Location",value:o.clockInLocation,onChange:e=>s({...o,clockInLocation:e})}),(0,t.jsx)(p,{label:"Clock Out Location",value:o.clockOutLocation,onChange:e=>s({...o,clockOutLocation:e})}),(0,t.jsx)(p,{label:"Working From (In)",value:o.clockInWorkingFrom,onChange:e=>s({...o,clockInWorkingFrom:e})}),(0,t.jsx)(p,{label:"Working From (Out)",value:o.clockOutWorkingFrom,onChange:e=>s({...o,clockOutWorkingFrom:e})})]}),(0,t.jsxs)("div",{className:"flex gap-6",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:o.late,onChange:e=>s({...o,late:e.target.checked})}),"Late"]}),(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:o.halfDay,onChange:e=>s({...o,halfDay:e.target.checked})}),"Half Day"]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,t.jsx)("button",{onClick:n,className:"px-4 py-2 border rounded",children:"Cancel"}),(0,t.jsx)("button",{onClick:u,disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Save Changes"})]})]})}let h=e=>{let{label:r,value:n}=e;return(0,t.jsxs)("div",{className:"bg-gray-50 border rounded-lg p-3",children:[(0,t.jsx)("div",{className:"text-sm text-gray-500",children:r}),(0,t.jsx)("div",{className:"font-medium",children:n})]})},f=e=>{let{title:r,time:n,location:a,workingFrom:l,late:c}=e;return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:r}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 flex gap-3 items-center",children:["â± ",n,a&&(0,t.jsxs)(t.Fragment,{children:["ðŸ“ ",a]}),l&&(0,t.jsxs)(t.Fragment,{children:["(",l,")"]}),c&&(0,t.jsx)("span",{className:"text-red-500",children:"âš  Late"})]})]})},x=(e,r)=>(0,t.jsxs)("span",{className:"flex items-center gap-1 px-2 py-1 border rounded text-xs",children:[r," ",e]});function p(e){let{label:r,value:n,onChange:a,type:l="text"}=e;return(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-gray-500",children:r}),(0,t.jsx)("input",{type:l,value:n,onChange:e=>a(e.target.value),className:"w-full border rounded px-3 py-2"})]})}let g="https://6jnqmj85-80.inc1.devtunnels.ms",y="".concat(g,"/employee/attendance/GetAllAttendance"),j=async e=>{let t=localStorage.getItem("accessToken");if(!t)throw Error("No token");let r=await fetch("".concat(g,"/employee/attendance/GetAllAttendance"),{headers:{Authorization:"Bearer ".concat(t)}});if(!r.ok)throw Error("Failed to fetch attendance");return r.json()},v={PRESENT:(0,t.jsx)("span",{className:"text-green-600",children:"âœ”"}),HOLIDAY:(0,t.jsx)("span",{className:"text-yellow-500",children:"â˜…"}),LEAVE:(0,t.jsx)("span",{className:"text-red-500",children:"â›”"}),ABSENT:(0,t.jsx)("span",{className:"text-gray-400",children:"â€”"})};function b(){let e=new Date,[l,c]=(0,a.useState)(e.getMonth()+1),[o,s]=(0,a.useState)(e.getFullYear()),[d,m]=(0,a.useState)(!1),[h,f]=(0,a.useState)(null),[x,p]=(0,a.useState)(!1),{data:g,isLoading:b}=(0,r.default)(y,j,{revalidateOnFocus:!1});(0,a.useEffect)(()=>{},[d]);let k=(0,a.useMemo)(()=>{let e={};return null==g||g.forEach(t=>{e[t.employeeId]||(e[t.employeeId]={employeeName:t.employeeName,profilePictureUrl:t.profilePictureUrl,records:{}}),e[t.employeeId].records[t.date]=t}),e},[g]),w=new Date(o,l,0).getDate();return b?(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Loading attendanceâ€¦"}):(0,t.jsxs)("div",{className:"bg-white border rounded-lg p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-blue-600 text-white rounded text-sm",children:"+ Mark Attendance"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)("select",{value:l,onChange:e=>c(Number(e.target.value)),className:"border rounded px-4 py-2",children:Array.from({length:12}).map((e,r)=>(0,t.jsx)("option",{value:r+1,children:new Date(0,r).toLocaleString("default",{month:"long"})},r))}),(0,t.jsx)("select",{value:o,onChange:e=>s(Number(e.target.value)),className:"border rounded px-4 py-2",children:[2025,2026,2027,2028].map(e=>(0,t.jsx)("option",{children:e},e))})]})]}),(0,t.jsxs)("div",{className:"flex gap-4 text-xs text-gray-600",children:[(0,t.jsx)("span",{children:"â˜… Holiday"}),(0,t.jsx)("span",{children:"âœ” Present"}),(0,t.jsx)("span",{children:"â›” Leave"}),(0,t.jsx)("span",{children:"â° Late"}),(0,t.jsx)("span",{children:"Â½ Half Day"})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full border text-xs",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-3 py-2 text-left",children:"Employee"}),Array.from({length:w}).map((e,r)=>(0,t.jsx)("th",{className:"px-2 py-2 text-center",children:r+1},r)),(0,t.jsx)("th",{className:"px-3 py-2",children:"Total"})]})}),(0,t.jsx)("tbody",{children:Object.entries(k).map(e=>{let[r,n]=e;return(0,t.jsxs)("tr",{className:"border-t",children:[(0,t.jsxs)("td",{className:"px-3 py-2 font-medium flex items-center gap-2",children:[n.profilePictureUrl&&(0,t.jsx)("img",{src:n.profilePictureUrl,className:"w-6 h-6 rounded-full",alt:""}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:n.employeeName}),(0,t.jsx)("div",{className:"text-[10px] text-gray-500",children:r})]})]}),Array.from({length:w}).map((e,r)=>{let a=String(r+1).padStart(2,"0"),c="".concat(o,"-").concat(String(l).padStart(2,"0"),"-").concat(a),i=n.records[c];return(0,t.jsx)("td",{className:"px-2 py-2 text-center",children:i?(0,t.jsxs)("button",{onClick:()=>{f(i),p(!0)},className:"flex flex-col items-center text-xs hover:scale-110 transition",children:[v[i.status],i.late&&(0,t.jsx)("span",{children:"â°"}),i.halfDay&&(0,t.jsx)("span",{children:"Â½"})]}):"--"},r)}),(0,t.jsxs)("td",{className:"px-3 py-2 text-center font-semibold",children:[Object.values(n.records).filter(e=>"PRESENT"===e.status&&e.date.startsWith("".concat(o,"-").concat(String(l).padStart(2,"0")))).length,"/",w]})]},r)})})]})}),(0,t.jsx)(i,{open:d,onClose:()=>{m(!1),(0,n.mutate)(y)}}),(0,t.jsx)(u,{open:x,onClose:()=>p(!1),data:h})]})}}]);