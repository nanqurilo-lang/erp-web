(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87316,e=>{"use strict";e.s(["Calendar",()=>t],87316);let t=(0,e.i(475254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},370956,e=>{"use strict";e.s(["List",()=>t],370956);let t=(0,e.i(475254).default)("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]])},663438,e=>{"use strict";e.s(["default",()=>d],663438);var t=e.i(843476),a=e.i(519455),l=e.i(87316),s=e.i(370956),n=e.i(271645);function i(e){let{holidays:a,year:l,month:s}=e,n=new Date(l,s-1,1),i=new Date(l,s,0),r=n.getDay(),d=i.getDate(),c={};a.forEach(e=>{c[e.date]=c[e.date]?[...c[e.date],e]:[e]});let o=[];for(let e=0;e<r;e++)o.push(null);for(let e=1;e<=d;e++)o.push(e);return(0,t.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,t.jsx)("div",{className:"grid grid-cols-7 bg-gray-100 text-center text-sm font-medium",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,t.jsx)("div",{className:"py-2 border-r",children:e},e))}),(0,t.jsx)("div",{className:"grid grid-cols-7",children:o.map((e,a)=>{if(!e)return(0,t.jsx)("div",{className:"h-28 border"},a);let n=c["".concat(l,"-").concat(String(s).padStart(2,"0"),"-").concat(String(e).padStart(2,"0"))]||[];return(0,t.jsxs)("div",{className:"h-28 border p-1 text-sm",children:[(0,t.jsx)("div",{className:"font-semibold",children:e}),n.map(e=>(0,t.jsx)("div",{className:"mt-1 px-1 py-0.5 bg-blue-100 text-blue-800 rounded text-xs truncate",title:e.occasion,children:e.occasion},e.id))]},a)})})]})}let r="https://6jnqmj85-80.inc1.devtunnels.ms";function d(){let[e,d]=(0,n.useState)([]),[c,o]=(0,n.useState)([]),[u,h]=(0,n.useState)(!0),[p,x]=(0,n.useState)(!1),[m,y]=(0,n.useState)(""),[g,j]=(0,n.useState)(new Date().getFullYear()),[f,v]=(0,n.useState)(new Date().getMonth()+1),[b,N]=(0,n.useState)(""),[w,S]=(0,n.useState)(!1),[k,C]=(0,n.useState)([{date:"",occasion:""}]),[M,D]=(0,n.useState)(null),[T,z]=(0,n.useState)(null),[L,A]=(0,n.useState)("list"),B=async()=>{try{h(!0);let e=localStorage.getItem("accessToken"),t=await fetch("".concat(r,"/employee/api/holidays"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("Failed to fetch holidays");d(await t.json())}catch(e){y(e.message)}finally{h(!1)}};(0,n.useEffect)(()=>{B()},[]),(0,n.useEffect)(()=>{let t=e;(g||f)&&(t=t.filter(e=>{let[t,a]=e.date.split("-").map(Number);return(!g||t===g)&&(!f||a===f)})),b.trim()&&(t=t.filter(e=>e.occasion.toLowerCase().includes(b.toLowerCase()))),o(t)},[e,g,f,b]);let E=async()=>{if(M)try{x(!0);let e=localStorage.getItem("accessToken");await fetch("".concat(r,"/employee/api/holidays/").concat(M.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({date:M.date,occasion:M.occasion})}),await B(),D(null)}finally{x(!1)}};return((0,n.useEffect)(()=>{z(null),D(null)},[L]),u)?(0,t.jsx)("p",{className:"p-6",children:"Loadingâ€¦"}):(0,t.jsxs)("div",{className:"p-6 max-w-7xl mx-auto bg-white rounded-lg border",children:[(0,t.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,t.jsxs)("div",{className:"flex text-right gap-2",children:[(0,t.jsx)(a.Button,{size:"icon",variant:"list"===L?"default":"outline",onClick:()=>A("list"),"aria-label":"List View",children:(0,t.jsx)(s.List,{className:"h-4 w-4"})}),(0,t.jsx)(a.Button,{size:"icon",variant:"calendar"===L?"default":"outline",onClick:()=>A("calendar"),"aria-label":"Calendar View",children:(0,t.jsx)(l.Calendar,{className:"h-4 w-4"})})]})}),(0,t.jsxs)("div",{className:"flex gap-3 mb-4",children:[(0,t.jsx)("input",{type:"number",value:g,onChange:e=>j(+e.target.value),className:"border px-2 py-1 rounded w-24"}),(0,t.jsxs)("select",{value:f,onChange:e=>v(e.target.value?+e.target.value:""),className:"border px-2 py-1 rounded",children:[(0,t.jsx)("option",{value:"",children:"All Months"}),Array.from({length:12}).map((e,a)=>(0,t.jsx)("option",{value:a+1,children:new Date(0,a).toLocaleString("default",{month:"long"})},a))]}),(0,t.jsx)("input",{value:b,onChange:e=>N(e.target.value),placeholder:"Search occasion",className:"border px-3 py-1 rounded flex-1"})]}),"list"===L?(0,t.jsxs)("table",{className:"w-full border rounded-lg overflow-hidden",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Date"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Day"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Occasion"})]})}),(0,t.jsx)("tbody",{children:c.map(e=>(0,t.jsxs)("tr",{className:"border-t",children:[(0,t.jsx)("td",{className:"px-4 py-2",children:(null==M?void 0:M.id)===e.id?(0,t.jsx)("input",{type:"date",value:M.date,onChange:e=>D({...M,date:e.target.value}),className:"border px-2 py-1 rounded w-full"}):e.date}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.day}),(0,t.jsx)("td",{className:"px-4 py-2",children:(null==M?void 0:M.id)===e.id?(0,t.jsx)("input",{value:M.occasion,onChange:e=>D({...M,occasion:e.target.value}),className:"border px-2 py-1 rounded w-full"}):e.occasion}),(0,t.jsx)("td",{className:"px-4 py-2 relative",children:(null==M?void 0:M.id)===e.id?(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:E,className:"bg-green-600 text-white px-3 py-1 rounded",children:"Save"}),(0,t.jsx)("button",{onClick:()=>D(null),className:"bg-gray-300 px-3 py-1 rounded",children:"Cancel"})]}):(0,t.jsx)(t.Fragment,{})})]},e.id))})]}):(0,t.jsx)(i,{holidays:c,year:g,month:f||new Date().getMonth()+1})]})}}]);