(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,373375,463059,e=>{"use strict";e.s(["ChevronLeft",()=>l],373375);let l=(0,e.i(475254).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronRight",()=>s.default],463059);var s=e.i(246349)},727612,e=>{"use strict";e.s(["Trash2",()=>l],727612);let l=(0,e.i(475254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},592930,e=>{"use strict";e.s(["Edit2",()=>l],592930);let l=(0,e.i(475254).default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},555436,e=>{"use strict";e.s(["Search",()=>l],555436);let l=(0,e.i(475254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},246349,e=>{"use strict";e.s(["default",()=>l]);let l=(0,e.i(475254).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},286536,e=>{"use strict";e.s(["Eye",()=>l],286536);let l=(0,e.i(475254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},786108,e=>{"use strict";e.s(["default",()=>l]);let l=(0,e.i(475254).default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},323585,e=>{"use strict";e.s(["MoreVertical",()=>l.default]);var l=e.i(786108)},840433,e=>{"use strict";e.s(["Pin",()=>l],840433);let l=(0,e.i(475254).default)("pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]])},722915,e=>{"use strict";e.s(["Archive",()=>l],722915);let l=(0,e.i(475254).default)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]])},736862,e=>{"use strict";e.s(["default",()=>v]);var l=e.i(843476),s=e.i(522016),a=e.i(271645),t=e.i(519455),r=e.i(793479),c=e.i(967489),i=e.i(784774),n=e.i(755146),d=e.i(373375),o=e.i(463059),h=e.i(555436),x=e.i(323585),u=e.i(286536),j=e.i(592930),m=e.i(840433),p=e.i(722915),g=e.i(727612);function v(){let[e,v]=(0,a.useState)([]),[y,b]=(0,a.useState)(!0),[f,w]=(0,a.useState)(null),[N,S]=(0,a.useState)(""),[T,k]=(0,a.useState)("all"),[C,M]=(0,a.useState)("all"),[I,P]=(0,a.useState)("all"),[A,D]=(0,a.useState)(1),[E,V]=(0,a.useState)(1),H=(0,a.useCallback)(async e=>{b(!0);try{let l=new URLSearchParams({page:A.toString(),limit:"10",search:N,status:"all"!==T?T:"",progress:"all"!==C?C:"",duration:"all"!==I?I:"",pinned:"true"}),s=await fetch("/api/work/project?".concat(l),{headers:{Authorization:"Bearer ".concat(e)}});if(!s.ok)throw Error("Failed to load projects");let a=await s.json();v(a.projects||[]),V(a.totalPages||1)}catch(e){console.error("Error loading projects:",e)}finally{b(!1)}},[A,N,T,C,I]);(0,a.useEffect)(()=>{let e=localStorage.getItem("accessToken");w(e),e?H(e):b(!1)},[H]);let z=async l=>{if(-1!==e.findIndex(e=>e.id===l)){v(e.filter(e=>e.id!==l));try{if(!(await fetch("/api/work/project/".concat(l,"/pin"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(f),"Content-Type":"application/json"}})).ok)throw Error("Failed to unpin project");await H(f)}catch(l){v(e),console.error("Failed to unpin:",l)}}},B=a=>{var r,c,d,o;let{project:h}=a,y=new Date(h.startDate),b=Math.ceil((new Date(h.deadline).getTime()-y.getTime())/864e5);return(0,l.jsxs)(i.TableRow,{className:"hover:bg-gray-50",children:[(0,l.jsxs)(i.TableCell,{children:[(0,l.jsx)(s.default,{href:"/work/project/".concat(h.id),className:"text-blue-600 hover:underline font-medium",children:h.name}),(0,l.jsx)("p",{className:"text-xs text-gray-500",children:h.shortCode})]}),(0,l.jsx)(i.TableCell,{children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(null==(r=h.client)?void 0:r.profilePictureUrl)&&(0,l.jsx)("img",{src:h.client.profilePictureUrl||"/placeholder.svg",alt:"client",className:"w-6 h-6 rounded-full object-cover"}),(0,l.jsx)("span",{className:"text-sm",children:(null==(c=h.client)?void 0:c.name)||"N/A"})]})}),(0,l.jsx)(i.TableCell,{children:(0,l.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"completed":return"bg-blue-100 text-blue-800";case"on-hold":return"bg-yellow-100 text-yellow-800";case"planning":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}})(h.status)),children:h.status||"N/A"})}),(0,l.jsx)(i.TableCell,{children:(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,l.jsx)("div",{className:"h-2 rounded-full ".concat((o=h.progress)?o<33?"bg-red-500":o<66?"bg-yellow-500":"bg-green-500":"bg-gray-200"),style:{width:"".concat(h.progress||0,"%")}})}),(0,l.jsxs)("p",{className:"text-xs text-gray-600",children:[h.progress||0,"%"]})]})}),(0,l.jsx)(i.TableCell,{children:(0,l.jsxs)("span",{className:"font-medium",children:[h.currency," ",h.budget.toLocaleString()]})}),(0,l.jsx)(i.TableCell,{children:(0,l.jsxs)("span",{className:"text-sm",children:[b," days"]})}),(0,l.jsx)(i.TableCell,{children:(0,l.jsx)("span",{className:"text-sm",children:new Date(h.deadline).toLocaleDateString()})}),(0,l.jsx)(i.TableCell,{children:(0,l.jsxs)("div",{className:"flex -space-x-2",children:[null==(d=h.assignedEmployees)?void 0:d.slice(0,3).map(e=>(0,l.jsx)("div",{className:"w-6 h-6 rounded-full bg-blue-500 text-white text-xs flex items-center justify-center border-2 border-white",title:e.name,children:e.name.charAt(0)},e.employeeId)),h.assignedEmployees&&h.assignedEmployees.length>3&&(0,l.jsxs)("div",{className:"w-6 h-6 rounded-full bg-gray-400 text-white text-xs flex items-center justify-center border-2 border-white",children:["+",h.assignedEmployees.length-3]})]})}),(0,l.jsx)(i.TableCell,{className:"text-right",children:(0,l.jsxs)(n.DropdownMenu,{children:[(0,l.jsx)(n.DropdownMenuTrigger,{asChild:!0,children:(0,l.jsx)(t.Button,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,l.jsx)(x.MoreVertical,{className:"h-4 w-4"})})}),(0,l.jsxs)(n.DropdownMenuContent,{align:"end",className:"w-48",children:[(0,l.jsxs)(n.DropdownMenuItem,{onClick:()=>{h.id},className:"gap-2",children:[(0,l.jsx)(u.Eye,{className:"h-4 w-4"}),(0,l.jsx)(s.default,{href:"/work/project/".concat(h.id),children:"View"})]}),(0,l.jsx)(n.DropdownMenuItem,{asChild:!0,className:"gap-2",children:(0,l.jsxs)(s.default,{href:"/work/project/".concat(h.id,"/update"),className:"flex items-center gap-2",children:[(0,l.jsx)(j.Edit2,{className:"h-4 w-4"}),"Edit"]})}),(0,l.jsxs)(n.DropdownMenuItem,{onClick:()=>z(h.id),className:"gap-2",children:[(0,l.jsx)(m.Pin,{className:"h-4 w-4"}),"Unpin Project"]}),(0,l.jsx)(n.DropdownMenuSeparator,{}),(0,l.jsxs)(n.DropdownMenuItem,{onClick:()=>{var l;return l=h.id,void v(e.map(e=>e.id===l?{...e,isArchived:!e.isArchived}:e))},className:"gap-2",children:[(0,l.jsx)(p.Archive,{className:"h-4 w-4"}),h.isArchived?"Unarchive":"Archive"]}),(0,l.jsxs)(n.DropdownMenuItem,{onClick:()=>{var l;return l=h.id,void v(e.filter(e=>e.id!==l))},className:"gap-2 text-red-600 focus:text-red-600",children:[(0,l.jsx)(g.Trash2,{className:"h-4 w-4"}),"Delete"]})]})]})})]},h.id)};return y?(0,l.jsx)("p",{className:"p-4",children:"Loading Projects..."}):f?(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg border p-4 space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 bg-gray-50 px-3 py-2 rounded-lg border",children:[(0,l.jsx)(h.Search,{className:"w-4 h-4 text-gray-400"}),(0,l.jsx)(r.Input,{placeholder:"Search projects by name or code...",value:N,onChange:e=>{S(e.target.value),D(1)},className:"border-0 bg-transparent focus-visible:ring-0"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsxs)(c.Select,{value:T,onValueChange:e=>{k(e),D(1)},children:[(0,l.jsx)(c.SelectTrigger,{children:(0,l.jsx)(c.SelectValue,{placeholder:"Filter by Status"})}),(0,l.jsxs)(c.SelectContent,{children:[(0,l.jsx)(c.SelectItem,{value:"all",children:"All Status"}),(0,l.jsx)(c.SelectItem,{value:"active",children:"Active"}),(0,l.jsx)(c.SelectItem,{value:"completed",children:"Completed"}),(0,l.jsx)(c.SelectItem,{value:"on-hold",children:"On Hold"}),(0,l.jsx)(c.SelectItem,{value:"planning",children:"Planning"})]})]}),(0,l.jsxs)(c.Select,{value:C,onValueChange:e=>{M(e),D(1)},children:[(0,l.jsx)(c.SelectTrigger,{children:(0,l.jsx)(c.SelectValue,{placeholder:"Filter by Progress"})}),(0,l.jsxs)(c.SelectContent,{children:[(0,l.jsx)(c.SelectItem,{value:"all",children:"All Progress"}),(0,l.jsx)(c.SelectItem,{value:"0-33",children:"0-33%"}),(0,l.jsx)(c.SelectItem,{value:"33-66",children:"33-66%"}),(0,l.jsx)(c.SelectItem,{value:"66-100",children:"66-100%"})]})]}),(0,l.jsxs)(c.Select,{value:I,onValueChange:e=>{P(e),D(1)},children:[(0,l.jsx)(c.SelectTrigger,{children:(0,l.jsx)(c.SelectValue,{placeholder:"Filter by Duration"})}),(0,l.jsxs)(c.SelectContent,{children:[(0,l.jsx)(c.SelectItem,{value:"all",children:"All Duration"}),(0,l.jsx)(c.SelectItem,{value:"0-30",children:"0-30 days"}),(0,l.jsx)(c.SelectItem,{value:"30-60",children:"30-60 days"}),(0,l.jsx)(c.SelectItem,{value:"60-90",children:"60-90 days"}),(0,l.jsx)(c.SelectItem,{value:"90+",children:"90+ days"})]})]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg border overflow-hidden",children:[(0,l.jsx)("div",{className:"bg-blue-50 px-6 py-3 border-b",children:(0,l.jsxs)("h2",{className:"font-semibold text-blue-900 flex items-center gap-2",children:[(0,l.jsx)(m.Pin,{className:"w-4 h-4"}),"Pinned Projects (",e.length,")"]})}),(0,l.jsxs)(i.Table,{children:[(0,l.jsx)(i.TableHeader,{children:(0,l.jsxs)(i.TableRow,{className:"bg-gray-50",children:[(0,l.jsx)(i.TableHead,{children:"Project"}),(0,l.jsx)(i.TableHead,{children:"Client"}),(0,l.jsx)(i.TableHead,{children:"Status"}),(0,l.jsx)(i.TableHead,{children:"Progress"}),(0,l.jsx)(i.TableHead,{children:"Budget"}),(0,l.jsx)(i.TableHead,{children:"Duration"}),(0,l.jsx)(i.TableHead,{children:"Deadline"}),(0,l.jsx)(i.TableHead,{children:"Employees"}),(0,l.jsx)(i.TableHead,{className:"text-right",children:"Actions"})]})}),(0,l.jsx)(i.TableBody,{children:e.length>0?e.map(e=>(0,l.jsx)(B,{project:e},e.id)):(0,l.jsx)(i.TableRow,{children:(0,l.jsx)(i.TableCell,{colSpan:9,className:"text-center py-8 text-gray-500",children:"No pinned projects yet. Pin a project to see it here."})})})]})]}),e.length>0&&(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["Page ",A," of ",E]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)(t.Button,{variant:"outline",size:"sm",onClick:()=>D(e=>Math.max(1,e-1)),disabled:1===A,children:[(0,l.jsx)(d.ChevronLeft,{className:"w-4 h-4"}),"Previous"]}),(0,l.jsxs)(t.Button,{variant:"outline",size:"sm",onClick:()=>D(e=>Math.min(E,e+1)),disabled:A===E,children:["Next",(0,l.jsx)(o.ChevronRight,{className:"w-4 h-4"})]})]})]})]}):(0,l.jsx)("p",{className:"p-4 text-red-500",children:"Unauthorized! Token not found."})}}]);