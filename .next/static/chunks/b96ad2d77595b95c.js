(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,978348,e=>{"use strict";e.s(["default",()=>T],978348);var t=e.i(843476),a=e.i(271645),l=e.i(519455),s=e.i(793479),r=e.i(967489),n=e.i(784774),c=e.i(755146),i=e.i(373375),d=e.i(463059),o=e.i(555436),x=e.i(323585),h=e.i(286536),m=e.i(592930),u=e.i(840433),p=e.i(727612);let j=(0,e.i(475254).default)("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);var g=e.i(87316),v=e.i(687130),y=e.i(370956),N=e.i(37727),f=e.i(722915);let S="".concat("https://6jnqmj85-80.inc1.devtunnels.ms"),b=(e,t)=>{let a=new Date(e);return a.setDate(a.getDate()+t),a},w=(e,t)=>e.toDateString()===t.toDateString();function C(){let[e,l]=(0,a.useState)([]),[s,r]=(0,a.useState)(!1),[n,c]=(0,a.useState)(new Date),i=async()=>{try{r(!0);let e=await fetch("".concat(S,"/api/projects"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))},credentials:"include"});if(!e.ok)throw Error("Failed to fetch projects");let t=(await e.json()).map(e=>({id:e.id,name:e.name,startDate:e.startDate,deadline:e.deadline}));l(t)}catch(e){console.error("Project fetch error:",e)}finally{r(!1)}};(0,a.useEffect)(()=>{i()},[]);let d=(0,a.useMemo)(()=>{let e=new Date(n.getFullYear(),n.getMonth(),1),t=new Date(n.getFullYear(),n.getMonth()+1,0),a=[],l=new Date(e);l.setDate(e.getDate()-e.getDay());let s=new Date(t);s.setDate(t.getDate()+(6-t.getDay()));let r=l;for(;r<=s;)a.push(new Date(r)),r=b(r,1);return a},[n]);return(0,t.jsxs)("div",{className:"w-full bg-white rounded-xl shadow-sm border p-4 ",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("button",{onClick:()=>c(new Date(n.getFullYear(),n.getMonth()-1,1)),className:"px-3 py-1 border rounded",children:"◀"}),(0,t.jsx)("h2",{className:"text-lg font-semibold",children:n.toLocaleString("default",{month:"long",year:"numeric"})}),(0,t.jsx)("button",{onClick:()=>c(new Date(n.getFullYear(),n.getMonth()+1,1)),className:"px-3 py-1 border rounded",children:"▶"})]}),s&&(0,t.jsx)("div",{className:"text-center py-6 text-sm text-gray-500",children:"Loading projects..."}),(0,t.jsx)("div",{className:"grid grid-cols-7 text-sm font-medium text-center border-b pb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,t.jsx)("div",{children:e},e))}),(0,t.jsx)("div",{className:"mt-2 max-h-[70vh] overflow-y-auto overflow-x-hidden",children:(0,t.jsx)("div",{className:"grid grid-cols-7 gap-px bg-gray-200 mt-2",children:d.map((a,l)=>{let s=e.filter(e=>{let t=new Date(e.startDate),l=new Date(e.deadline);return a>=t&&a<=l}),r=a.getMonth()===n.getMonth();return(0,t.jsxs)("div",{className:"min-h-[110px] bg-white p-1 text-xs ".concat(r?"":"opacity-40"),children:[(0,t.jsx)("div",{className:"text-right font-semibold",children:a.getDate()}),(0,t.jsx)("div",{className:"space-y-1 mt-1",children:s.map(e=>{let l=w(a,new Date(e.startDate)),s=w(a,new Date(e.deadline));return(0,t.jsxs)("div",{className:"px-2 py-1 rounded text-white text-[11px]\n                        ".concat(l||s?"bg-blue-600":"bg-blue-400"),children:[l&&(0,t.jsx)("span",{children:"▶ "}),e.name,s&&(0,t.jsx)("span",{children:" ◀"})]},e.id)})})]},l)})})})]})}let k="https://6jnqmj85-80.inc1.devtunnels.ms",D=["IN_PROGRESS","NOT_STARTED","ON_HOLD","CANCELLED","FINISHED"],I="projectProgressOverrides";function T(){let[e,S]=(0,a.useState)([]),[b,w]=(0,a.useState)(!0),[T,A]=(0,a.useState)(null),[P,E]=(0,a.useState)(""),[F,M]=(0,a.useState)(""),[B,O]=(0,a.useState)("all"),[U,R]=(0,a.useState)("all"),[V,L]=(0,a.useState)(null),[z,H]=(0,a.useState)(null),[K,_]=(0,a.useState)(!1),[Y,J]=(0,a.useState)("all"),[G,q]=(0,a.useState)("all"),[X,Z]=(0,a.useState)("all"),[$,W]=(0,a.useState)(1),[Q,ee]=(0,a.useState)(1),[et,ea]=(0,a.useState)(!1),[el,es]=(0,a.useState)(""),[er,en]=(0,a.useState)(""),[ec,ei]=(0,a.useState)(""),[ed,eo]=(0,a.useState)(""),[ex,eh]=(0,a.useState)(!1),[em,eu]=(0,a.useState)("none"),[ep,ej]=(0,a.useState)("none"),[eg,ev]=(0,a.useState)("none"),[ey,eN]=(0,a.useState)(""),[ef,eS]=(0,a.useState)(!0),[eb,ew]=(0,a.useState)(""),[eC,ek]=(0,a.useState)(null),[eD,eI]=(0,a.useState)("USD"),[eT,eA]=(0,a.useState)(""),[eP,eE]=(0,a.useState)(""),[eF,eM]=(0,a.useState)(!1),eB=(0,a.useRef)(null),[eO,eU]=(0,a.useState)("you"),[eR,eV]=(0,a.useState)(!1),[eL,ez]=(0,a.useState)(!1),[eH,eK]=(0,a.useState)([]),[e_,eY]=(0,a.useState)(!1),[eJ,eG]=(0,a.useState)(""),[eq,eX]=(0,a.useState)(!1),[eZ,e$]=(0,a.useState)([]),[eW,eQ]=(0,a.useState)(!1),[e0,e1]=(0,a.useState)([]),[e4,e3]=(0,a.useState)(!1),[e2,e6]=(0,a.useState)(!1),[e5,e8]=(0,a.useState)(null),[e7,e9]=(0,a.useState)("grid"),[te,tt]=(0,a.useState)(!1),[ta,tl]=(0,a.useState)(!1),[ts,tr]=(0,a.useState)(!1);(0,a.useEffect)(()=>{document.body.style.overflow=K||et||eL||e2||ts?"hidden":"auto"},[K,et,eL,e2,ts]);let tn=Array.from(new Set(e.map(e=>e.name))).filter(Boolean),tc=Array.from(new Set(e.flatMap(e=>(e.assignedEmployees||[]).map(e=>e.name)))).filter(Boolean),ti=eH.map(e=>({id:String(e.id),name:e.name})),td=eZ.map(e=>({id:String(e.id),name:e.name})),to=e0.map(e=>({id:String(e.id),name:e.departmentName})),tx=()=>{try{let e=localStorage.getItem(I);if(!e)return{};return JSON.parse(e)}catch(e){return{}}},th=(e,t)=>{let a=tx(),l=String(e);null==t?delete a[l]:a[l]=t;try{localStorage.setItem(I,JSON.stringify(a))}catch(e){}},tm=(0,a.useCallback)(async e=>{w(!0);try{let t=e||localStorage.getItem("accessToken")||T||null;if(!t){S([]),ee(1),w(!1);return}let a=new URLSearchParams({page:String($),limit:String(9),search:F||"",status:"all"!==B?B:"",progress:"all"!==U?U:"",project:"all"!==Y?Y:"",member:"all"!==G?G:"",client:"all"!==X?X:""}),l=await fetch("".concat(k,"/api/projects?").concat(a.toString()),{headers:{Authorization:"Bearer ".concat(t)},cache:"no-store"});if(401===l.status){try{localStorage.removeItem("accessToken")}catch(e){}A(null),S([]),ee(1),w(!1);return}if(!l.ok){let e=await l.text().catch(()=>"");throw console.error("getProjects failed",l.status,e),Error("Failed to load projects")}let s=await l.json(),r=[];Array.isArray(s)?r=s:(r=s.projects||s.items||[],ee(s.totalPages||Math.max(1,Math.ceil((s.total||9)/9))));let n=tx();Object.keys(n).length>0&&(r=r.map(e=>{let t=n[String(e.id)];return null!=t?{...e,progressPercent:t}:e})),S(r)}catch(e){console.error("Error loading projects:",e),S([]),ee(1)}finally{w(!1)}},[$,F,B,U,Y,G,X,T]),tu=(0,a.useCallback)(async e=>{eY(!0);try{let t=e||T||localStorage.getItem("accessToken"),a=await fetch("".concat(k,"/api/projects/category"),{headers:t?{Authorization:"Bearer ".concat(t)}:void 0,cache:"no-store"});if(!a.ok){console.warn("Failed to load categories, status:",a.status),eK([]),eY(!1);return}let l=await a.json();Array.isArray(l)?l.length>0&&"string"==typeof l[0]?eK(l.map((e,t)=>({id:t+1,name:String(e)}))):eK(l.map(e=>{var t,a,l;return{id:null!=(a=null!=(t=e.id)?t:e.name)?a:Math.random(),name:null!=(l=e.name)?l:String(e)}})):eK([])}catch(e){console.error("Error loading categories:",e),eK([])}finally{eY(!1)}},[T]),tp=async()=>{ez(!0),await tu()},tj=()=>{ez(!1),eG("")},tg=async()=>{let e=eJ.trim();if(!e)return alert("Category name required");eX(!0);let t=eH.slice(),a={id:"temp-".concat(Date.now()),name:e};eK(e=>[...e,a]);try{let r=T||localStorage.getItem("accessToken"),n=await fetch("".concat(k,"/api/projects/category"),{method:"POST",headers:{"Content-Type":"application/json",...r?{Authorization:"Bearer ".concat(r)}:{}},body:JSON.stringify({name:e}),cache:"no-store"});if(!n.ok){let e=await n.text().catch(()=>"");console.error("Add category failed",n.status,e),eK(t),alert("Failed to add category");return}let c=await n.json().catch(()=>null);if(c&&(c.id||c.name)){var l,s;eK(t=>t.map(t=>{var l,s,r;return t.id===a.id?{id:null!=(s=null!=(l=c.id)?l:c.name)?s:Math.random(),name:null!=(r=c.name)?r:e}:t})),eu(String(null!=(s=null!=(l=c.id)?l:c.name)?s:e))}else{await tu();let t=eH.find(t=>t.name===e);t&&eu(String(t.id))}eG("")}catch(e){console.error("Add category error:",e),eK(t),alert("Failed to add category")}finally{eX(!1)}},tv=async e=>{if(!confirm("Delete this category?"))return;let t=eH.slice();eK(t=>t.filter(t=>t.id!==e));try{let t=T||localStorage.getItem("accessToken");if(!(await fetch("".concat(k,"/api/projects/category/").concat(encodeURIComponent(String(e))),{method:"DELETE",headers:t?{Authorization:"Bearer ".concat(t)}:void 0,cache:"no-store"})).ok)throw Error("Delete failed")}catch(e){console.error("Delete category failed:",e),eK(t),alert("Failed to delete category")}},ty=(0,a.useCallback)(async e=>{eQ(!0);try{let t=e||T||localStorage.getItem("accessToken"),a=await fetch("".concat(k,"/clients"),{headers:t?{Authorization:"Bearer ".concat(t)}:void 0,cache:"no-store"});if(!a.ok){console.warn("Failed to load clients, status:",a.status),e$([]),eQ(!1);return}let l=await a.json();Array.isArray(l)?e$(l):Array.isArray(l.items)?e$(l.items):e$([])}catch(e){console.error("Error loading clients:",e),e$([])}finally{eQ(!1)}},[T]),tN=(0,a.useCallback)(async e=>{e3(!0);try{let t=e||T||localStorage.getItem("accessToken"),a=await fetch("".concat(k,"/admin/departments"),{headers:t?{Authorization:"Bearer ".concat(t)}:void 0,cache:"no-store"});if(!a.ok){console.warn("Failed to load departments, status:",a.status),e1([]),e3(!1);return}let l=await a.json();Array.isArray(l)?e1(l):Array.isArray(l.items)?e1(l.items):e1([])}catch(e){console.error("Error loading departments:",e),e1([])}finally{e3(!1)}},[T]);async function tf(t,a){if(!T)return alert("Not authenticated");S(e=>e.map(e=>e.id===t?{...e,projectStatus:a}:e));try{let e=new FormData;e.append("status",a);let l=await fetch("".concat(k,"/api/projects/").concat(t,"/status"),{method:"PUT",body:e,headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}}),s=null;try{s=await l.json()}catch(e){s=null}s&&s.id?(S(e=>e.map(e=>e.id===s.id?{...e,...s}:e)),null!=s.progressPercent&&th(s.id,null)):await tm(T)}catch(t){console.error("Status update failed",t),S(e),alert("Failed to update status on server")}}async function tS(t,a){if(!T)return alert("Not authenticated");let l=Math.max(0,Math.min(100,Math.round(a)));S(e=>e.map(e=>e.id===t?{...e,progressPercent:l}:e)),th(t,l);try{let a=new FormData;a.append("percent",String(l));let s=await fetch("".concat(k,"/api/projects/").concat(t,"/progress"),{method:"PUT",body:a,headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}});if(401===s.status){console.error("patchProgress 401 unauthorized"),S(e),th(t,null),localStorage.removeItem("accessToken"),A(null),alert("Session expired. Please login again.");return}if(!s.ok){let a=await s.text().catch(()=>"");console.error("patchProgress failed:",s.status,a),S(e),th(t,null),alert("Failed to update progress on server");return}let r=null;try{r=204!==s.status?await s.json():null}catch(e){r=null}r&&r.id?(S(e=>e.map(e=>e.id===r.id?{...e,...r}:e)),null!=r.progressPercent&&th(r.id,null)):await tm(T)}catch(a){console.error("Progress update failed:",a),S(e),th(t,null),alert("Failed to update progress on server")}}(0,a.useEffect)(()=>{let e=setTimeout(()=>{M(e=>e!==P?(W(1),P):e)},500);return()=>clearTimeout(e)},[P]),(0,a.useEffect)(()=>{{let e=localStorage.getItem("accessToken");A(e),tu(e||null),ty(e||null),tN(e||null),e?tm(e):w(!1)}},[]),(0,a.useEffect)(()=>{if(!T){let e=localStorage.getItem("accessToken");e&&(A(e),tm(e),tu(e),ty(e),tN(e));return}T&&tm(T)},[tm,T,$,F,B,U,Y,G,X]);let tb=async t=>{if(!T)return alert("Not authenticated");let a=e.findIndex(e=>e.id===t);if(-1===a)return;let l=!e[a].pinned;S(e=>e.map(e=>e.id===t?{...e,pinned:l}:e));try{let e=await fetch("".concat(k,"/projects/").concat(t,"/pin"),{method:"POST",headers:{Authorization:"Bearer ".concat(T),"Content-Type":"application/json"},body:JSON.stringify({pinned:l}),cache:"no-store"});if(!e.ok)throw Error("Pin failed");try{let t=await e.json();t&&t.id?S(e=>e.map(e=>e.id===t.id?{...e,...t}:e)):await tm(T)}catch(e){await tm(T)}}catch(t){console.error(t),S(e),alert("Failed to toggle pin")}},tw=async t=>{if(!T)return alert("Not authenticated");let a=e.findIndex(e=>e.id===t);if(-1===a)return;let l=!e[a].archived;S(e=>e.map(e=>e.id===t?{...e,archived:l}:e));try{let e=await fetch("".concat(k,"/projects/").concat(t,"/archive"),{method:"POST",headers:{Authorization:"Bearer ".concat(T),"Content-Type":"application/json"},body:JSON.stringify({archived:l}),cache:"no-store"});if(!e.ok)throw Error("Archive toggle failed");try{let t=await e.json();t&&t.id?S(e=>e.map(e=>e.id===t.id?{...e,...t}:e)):await tm(T)}catch(e){await tm(T)}}catch(t){console.error("Archive toggle error:",t),S(e),alert("Failed to toggle archive state on server")}},tC=async t=>{if(confirm("Delete this project?")){S(e=>e.filter(e=>e.id!==t));try{if(!(await fetch("".concat(k,"/api/projects/").concat(t),{method:"DELETE",headers:{Authorization:T?"Bearer ".concat(T):""},cache:"no-store"})).ok)throw Error("Delete failed");th(t,null)}catch(t){console.error(t),S(e),alert("Failed to delete project")}}},tk=()=>{es(""),en(""),ei(""),eo(""),eh(!1),eu("none"),ej("none"),ev("none"),eN(""),eS(!0),ew(""),ek(null),eI("USD"),eA(""),eE(""),eM(!1),eU("you"),eV(!1)},tD=async()=>{if(!er.trim())return alert("Project Name is required");eV(!0);try{let e=el.trim();if(!e){let t=er.toString().normalize("NFKD").replace(/[\u0300-\u036F]/g,"").toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"");e=t?t.toUpperCase().replace(/-/g,"").slice(0,10):"PRJ".concat(Date.now().toString().slice(-6))}let t=new FormData;t.append("shortCode",e),t.append("name",er),t.append("projectName",er),t.append("startDate",ec||""),ex?t.append("deadline",""):t.append("deadline",ed||""),t.append("noDeadline",String(!!ex)),t.append("category","none"===em?"":String(em)),t.append("department","none"===ep?"":String(ep)),t.append("clientId","none"===eg?"":String(eg)),t.append("summary",ey||""),t.append("tasksNeedAdminApproval",String(!!ef));let a=Array.isArray(eb)?eb:String(eb||"").split(",").map(e=>e.trim()).filter(Boolean);t.append("assignedEmployeeIds",JSON.stringify(a)),eC&&t.append("companyFile",eC),t.append("currency",eD||""),t.append("budget",""!==eT?String(eT):"0"),t.append("hoursEstimate",""!==eP?String(eP):"0"),t.append("allowManualTimeLogs",String(!!eF)),t.append("addedBy",String(eO||""));let l=T||localStorage.getItem("accessToken"),s=await fetch("".concat(k,"/api/projects"),{method:"POST",body:t,headers:l?{Authorization:"Bearer ".concat(l)}:void 0});if(!s.ok){let e=await s.text().catch(()=>"");console.error("Create project failed",s.status,e);let t="Failed to create project (status ".concat(s.status,")");try{let a=JSON.parse(e||"{}");a&&a.message&&(t=a.message)}catch(e){}alert(t),eV(!1);return}try{await s.json()}catch(e){}await tm(l),ea(!1),tk()}catch(e){console.error("Create project error",e),alert("Failed to create project")}finally{eV(!1)}},tI=e=>e.shortCode||e.code||e.projectCode||"RTA-".concat(String(e.id).padStart(2,"0")),tT=()=>_(!1),tA=async()=>{W(1),await tm(null!=T?T:null),_(!1)},tP=async()=>{J("all"),q("all"),Z("all"),W(1),await tm(null!=T?T:null),_(!1)},tE=(0,a.useMemo)(()=>e.filter(e=>{if("all"!==B&&(!e.projectStatus||e.projectStatus!==B))return!1;if("all"!==U){if("number"!=typeof e.progressPercent)return!1;let t=e.progressPercent;if("0-33"===U&&!(t>=0&&t<=33)||"34-66"===U&&!(t>=34&&t<=66)||"67-100"===U&&!(t>=67&&t<=100))return!1}if(V||z){let t=e.startDate?new Date(e.startDate):null,a=e.deadline?new Date(e.deadline):null;if(!t||!a||V&&t<new Date(V)||z&&a>new Date(z))return!1}return!0}),[e,B,U,V,z]);if(b)return(0,t.jsx)("p",{className:"p-8 text-center",children:"Loading projects..."});let tF=e=>{var a,s,r,i,d,o,j,g,v,y,N;let{p:b}=e,w=b.startDate?new Date(b.startDate).toLocaleDateString():"-",C=b.noDeadline?"No Deadline":b.deadline?new Date(b.deadline).toLocaleDateString():"-",k=Math.max(0,Math.min(100,null!=(o=b.progressPercent)?o:0)),I=null==k?"bg-gray-300":k<33?"bg-red-500":k<66?"bg-yellow-400":"bg-green-500";return(0,t.jsxs)(n.TableRow,{className:"bg-white hover:bg-gray-50",children:[(0,t.jsx)(n.TableCell,{className:"py-4 px-4 align-top w-28",children:(0,t.jsx)("div",{className:"text-sm font-medium",children:tI(b)})}),(0,t.jsx)(n.TableCell,{className:"py-4 px-4 align-top",children:(0,t.jsx)("div",{className:"font-medium",children:b.name})}),(0,t.jsx)(n.TableCell,{className:"py-4 px-4 align-top",children:(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsxs)("div",{className:"flex -space-x-2",children:[(b.assignedEmployees||[]).slice(0,3).map(e=>(0,t.jsx)("div",{className:"w-8 h-8 rounded-full border-2 border-white overflow-hidden bg-gray-100",title:e.name,children:e.profileUrl?(0,t.jsx)("img",{src:e.profileUrl,alt:e.name,className:"w-full h-full object-cover"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center text-xs text-white bg-gray-400",children:(e.name||"U").charAt(0)})},e.employeeId)),(b.assignedEmployees||[]).length>3&&(0,t.jsxs)("div",{className:"w-8 h-8 rounded-full border-2 border-white bg-gray-200 text-xs text-gray-700 flex items-center justify-center",children:["+",(b.assignedEmployees||[]).length-3]})]})})}),(0,t.jsx)(n.TableCell,{className:"py-4 px-4 align-top text-sm",children:w}),(0,t.jsx)(n.TableCell,{className:"py-4 px-4 align-top text-sm",children:C}),(0,t.jsx)(n.TableCell,{className:"py-4 px-4 align-top",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center",children:(null==(a=b.client)?void 0:a.profilePictureUrl)?(0,t.jsx)("img",{src:b.client.profilePictureUrl,alt:null==(s=b.client)?void 0:s.name,className:"w-full h-full object-cover"}):(0,t.jsx)("div",{className:"text-xs text-gray-500",children:((null==(r=b.client)?void 0:r.name)||"C").charAt(0)})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium",children:null!=(j=null==(i=b.client)?void 0:i.name)?j:"Client"}),(0,t.jsx)("div",{className:"text-xs text-gray-400",children:null!=(g=null==(d=b.client)?void 0:d.company)?g:""})]})]})}),(0,t.jsx)(n.TableCell,{className:"py-4 px-4 align-top",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("div",{className:"w-44 cursor-pointer",title:"Click to filter by this progress bucket",onClick:()=>{var e,t;null==(t=null!=(e=b.progressPercent)?e:null)?R("all"):t<=33?R("0-33"):t<=66?R("34-66"):R("67-100"),W(1)},children:(0,t.jsxs)("div",{className:"relative bg-gray-200 h-4 rounded-full overflow-hidden",children:[(0,t.jsx)("div",{className:"h-4 rounded-full ".concat(I),style:{width:"".concat(k,"%")}}),(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,t.jsxs)("span",{className:"text-xs font-semibold text-white drop-shadow-sm",children:[k,"%"]})})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("button",{className:"inline-flex items-center gap-2 px-2 py-1 rounded-full text-xs ".concat(function(e){switch(e){case"IN_PROGRESS":return"bg-green-600 text-white";case"NOT_STARTED":default:return"bg-gray-400 text-white";case"ON_HOLD":return"bg-yellow-500 text-white";case"CANCELLED":return"bg-red-600 text-white";case"FINISHED":return"bg-blue-600 text-white"}}(b.projectStatus)),title:"Click to filter by this status",onClick:()=>{var e;O(null!=(e=b.projectStatus)?e:"all"),W(1)},children:[(0,t.jsx)("span",{className:"w-2 h-2 rounded-full",style:{background:function(e){switch(e){case"IN_PROGRESS":return"#10B981";case"NOT_STARTED":default:return"#9CA3AF";case"ON_HOLD":return"#F59E0B";case"CANCELLED":return"#EF4444";case"FINISHED":return"#3B82F6"}}(b.projectStatus)}}),(0,t.jsx)("span",{children:null!=(v=b.projectStatus)?v:"N/A"})]}),(0,t.jsx)("div",{className:"relative",children:(0,t.jsxs)(c.DropdownMenu,{children:[(0,t.jsx)(c.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)("button",{className:"inline-flex items-center gap-1 px-2 py-1 border rounded text-sm bg-white hover:bg-gray-50",children:(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"▾"})})}),(0,t.jsxs)(c.DropdownMenuContent,{align:"start",className:"w-64 p-2",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Change status"}),(0,t.jsx)("div",{className:"space-y-1",children:D.map(e=>(0,t.jsx)("button",{onClick:()=>tf(b.id,e),className:"w-full text-left px-3 py-2 rounded text-sm hover:bg-gray-50 ".concat(e===b.projectStatus?"font-medium":""),children:e},e))}),(0,t.jsx)(c.DropdownMenuSeparator,{}),(0,t.jsx)("div",{className:"text-xs text-gray-500 mt-2 mb-1",children:"Adjust progress"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{type:"range",min:0,max:100,value:null!=(y=b.progressPercent)?y:0,onChange:e=>{let t=Number(e.target.value);S(e=>e.map(e=>e.id===b.id?{...e,progressPercent:t}:e))},onMouseUp:async e=>{let t=Number(e.target.value);await tS(b.id,t)},onTouchEnd:async e=>{let t=Number(e.target.value);await tS(b.id,t)},className:"w-full"}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,t.jsx)("span",{children:"0%"}),(0,t.jsxs)("span",{children:[null!=(N=b.progressPercent)?N:0,"%"]}),(0,t.jsx)("span",{children:"100%"})]})]}),(0,t.jsx)("div",{className:"flex justify-end mt-2",children:(0,t.jsx)(l.Button,{size:"sm",variant:"ghost",onClick:()=>tm(null!=T?T:null),children:"Refresh"})})]})]})})]})]})}),(0,t.jsx)(n.TableCell,{className:"py-4 px-4 align-top text-right",children:(0,t.jsxs)(c.DropdownMenu,{children:[(0,t.jsx)(c.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,t.jsx)(x.MoreVertical,{className:"h-4 w-4"})})}),(0,t.jsxs)(c.DropdownMenuContent,{align:"end",className:"w-48",children:[(0,t.jsxs)(c.DropdownMenuItem,{onClick:()=>window.location.assign("/work/project/".concat(b.id)),children:[(0,t.jsx)(h.Eye,{className:"h-4 w-4 mr-2"})," View"]}),(0,t.jsxs)(c.DropdownMenuItem,{onClick:()=>{e8(b.id),e6(!0)},children:[(0,t.jsx)(m.Edit2,{className:"h-4 w-4 mr-2"})," Edit"]}),(0,t.jsxs)(c.DropdownMenuItem,{onClick:()=>tb(b.id),children:[(0,t.jsx)(u.Pin,{className:"h-4 w-4 mr-2"})," ",b.pinned?"Unpin":"Pin"," Project"]}),(0,t.jsxs)(c.DropdownMenuItem,{onClick:()=>tw(b.id),children:[(0,t.jsx)(f.Archive,{className:"h-4 w-4 mr-2"})," ",b.archived?"Unarchive":"Archive"]}),(0,t.jsx)(c.DropdownMenuSeparator,{}),(0,t.jsxs)(c.DropdownMenuItem,{onClick:()=>tC(b.id),className:"text-red-600",children:[(0,t.jsx)(p.Trash2,{className:"h-4 w-4 mr-2"})," Delete"]})]})]})})]},b.id)},tM=e=>{"calendar"===e?(tr(!ts),e9(ts?"grid":"calendar")):(tr(!1),e9(e))};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("main",{className:"w-full",children:(0,t.jsxs)("div",{className:"max-w-[1200px] mx-auto p-6  overflow-y-auto overflow-x-hidden",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg border p-3 mb-4 flex items-center gap-4 overflow-y-auto overflow-x-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Duration"}),(0,t.jsx)(s.Input,{type:"date",value:null!=V?V:"",onChange:e=>{L(e.target.value||null),W(1)},className:"w-40"}),(0,t.jsx)("span",{className:"text-gray-400 text-sm",children:"to"}),(0,t.jsx)(s.Input,{type:"date",value:null!=z?z:"",onChange:e=>{H(e.target.value||null),W(1)},className:"w-40"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Status"}),(0,t.jsxs)(r.Select,{value:B,onValueChange:e=>{O(e),W(1)},children:[(0,t.jsx)(r.SelectTrigger,{className:"w-40",children:(0,t.jsx)(r.SelectValue,{placeholder:"All"})}),(0,t.jsxs)(r.SelectContent,{children:[(0,t.jsx)(r.SelectItem,{value:"all",children:"All"}),(0,t.jsx)(r.SelectItem,{value:"IN_PROGRESS",children:"In Progress"}),(0,t.jsx)(r.SelectItem,{value:"NOT_STARTED",children:"Not Started"}),(0,t.jsx)(r.SelectItem,{value:"ON_HOLD",children:"On Hold"}),(0,t.jsx)(r.SelectItem,{value:"CANCELLED",children:"Cancelled"}),(0,t.jsx)(r.SelectItem,{value:"FINISHED",children:"Finished"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Progress"}),(0,t.jsxs)(r.Select,{value:U,onValueChange:e=>{R(e),W(1)},children:[(0,t.jsx)(r.SelectTrigger,{className:"w-40",children:(0,t.jsx)(r.SelectValue,{placeholder:"All"})}),(0,t.jsxs)(r.SelectContent,{children:[(0,t.jsx)(r.SelectItem,{value:"all",children:"All"}),(0,t.jsx)(r.SelectItem,{value:"0-33",children:"0 - 33%"}),(0,t.jsx)(r.SelectItem,{value:"34-66",children:"34 - 66%"}),(0,t.jsx)(r.SelectItem,{value:"67-100",children:"67 - 100%"})]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("div",{children:(0,t.jsx)(l.Button,{className:"bg-blue-600 text-white",onClick:()=>ea(!0),children:"+ Add Project"})}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 border rounded px-2 py-1 bg-white",children:[(0,t.jsx)(o.Search,{className:"w-4 h-4 text-gray-400"}),(0,t.jsx)(s.Input,{placeholder:"Search",value:P,onChange:e=>E(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(M(P),W(1))},className:"border-0 bg-transparent focus-visible:ring-0"})]}),(0,t.jsxs)("div",{className:"flex items-center bg-white border rounded-lg overflow-hidden",children:[(0,t.jsx)("button",{onClick:()=>tM("list"),className:"px-3 py-2 hover:bg-gray-50 ".concat("list"!==e7||ts?"":"bg-gray-100"),title:"List view",children:(0,t.jsx)(y.List,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>tM("grid"),className:"px-3 py-2 hover:bg-gray-50 ".concat("grid"!==e7||ts?"":"bg-violet-600 text-white"),title:"Grid / Table view",children:(0,t.jsx)(j,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>{tt(e=>!e),!te&&ta&&tl(!1)},className:"px-3 py-2 hover:bg-gray-50 ".concat(te?"bg-gray-100":""),title:te?"Showing archived projects":"Show archived projects",children:(0,t.jsx)(f.Archive,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>{tl(e=>!e),!ta&&te&&tt(!1)},className:"px-3 py-2 hover:bg-gray-50 ".concat(ta?"bg-gray-100":""),title:ta?"Showing pinned only":"Show pinned only",children:(0,t.jsx)(u.Pin,{className:"w-4 h-4"})})]}),(0,t.jsx)("button",{onClick:()=>tM("calendar"),className:"w-10 h-10 rounded bg-white border flex items-center justify-center ".concat(ts?"ring-2 ring-indigo-300":""),title:"Calendar view",children:(0,t.jsx)(g.Calendar,{className:"w-4 h-4 text-gray-600"})})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border overflow-hidden",children:[(0,t.jsxs)("div",{className:"bg-blue-50 px-6 py-3 border-b flex items-center justify-between",children:[(0,t.jsxs)("h2",{className:"font-semibold text-gray-900",children:["Projects (",tE.length,")"]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:te?"Viewing: Archived":ta?"Viewing: Pinned":"All active"})]}),(0,t.jsx)("div",{className:"overflow-auto p-4",children:"calendar"===e7||ts?(0,t.jsx)(C,{}):"list"===e7?(0,t.jsx)("div",{children:0===tE.length?(0,t.jsx)("div",{className:"p-6 text-center text-gray-500",children:"No projects found"}):(0,t.jsx)("div",{className:"space-y-3",children:tE.map(e=>{var a,s,r;return(0,t.jsxs)("div",{className:"flex items-center justify-between border rounded p-3 bg-white",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"text-sm font-medium w-28",children:tI(e)}),(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:null!=(s=null==(a=e.client)?void 0:a.name)?s:"Client"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"text-sm",children:[null!=(r=e.progressPercent)?r:0,"%"]}),(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:()=>window.location.assign("/work/project/".concat(e.id)),children:"View"})]})]},e.id)})})}):(0,t.jsx)("div",{children:(0,t.jsxs)(n.Table,{children:[(0,t.jsx)(n.TableHeader,{children:(0,t.jsxs)(n.TableRow,{className:"bg-blue-50",children:[(0,t.jsx)(n.TableHead,{className:"px-4 py-3",children:"Code"}),(0,t.jsx)(n.TableHead,{className:"px-4 py-3",children:"Project Name"}),(0,t.jsx)(n.TableHead,{className:"px-4 py-3",children:"Members"}),(0,t.jsx)(n.TableHead,{className:"px-4 py-3",children:"Start Date"}),(0,t.jsx)(n.TableHead,{className:"px-4 py-3",children:"Deadline"}),(0,t.jsx)(n.TableHead,{className:"px-4 py-3",children:"Client"}),(0,t.jsx)(n.TableHead,{className:"px-4 py-3",children:"Status"}),(0,t.jsx)(n.TableHead,{className:"px-4 py-3 text-right",children:"Action"})]})}),(0,t.jsx)(n.TableBody,{children:0===tE.length?(0,t.jsx)(n.TableRow,{children:(0,t.jsx)(n.TableCell,{colSpan:8,className:"py-8 text-center text-gray-500",children:"No projects found"})}):tE.map(e=>(0,t.jsx)(tF,{p:e},e.id))})]})})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Result per page -",tE.length?tE.length:0]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:()=>{W(e=>Math.max(1,e-1))},disabled:1===$,children:[(0,t.jsx)(i.ChevronLeft,{})," Prev"]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Page ",$," of ",Q]}),(0,t.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:()=>{W(e=>Math.min(Q,e+1))},disabled:$===Q,children:["Next ",(0,t.jsx)(d.ChevronRight,{})]})]})]})]})}),(0,t.jsx)("div",{"aria-hidden":!K,onClick:tT,className:"fixed inset-0 transition-opacity duration-300 z-[9990] ".concat(K?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),style:{backgroundColor:"rgba(0,0,0,0.3)"}}),(0,t.jsxs)("aside",{"aria-hidden":!K,className:"fixed right-0 top-0 h-full w-[360px] bg-white shadow-xl transform transition-transform duration-300 z-[9999] ".concat(K?"translate-x-0":"translate-x-full"),role:"dialog","aria-modal":"true",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(v.Filter,{className:"w-5 h-5"}),(0,t.jsx)("h3",{className:"font-semibold",children:"Filters"})]}),(0,t.jsx)("button",{onClick:tT,className:"p-2 rounded hover:bg-gray-100",children:(0,t.jsx)(N.X,{className:"w-4 h-4"})})]}),(0,t.jsxs)("div",{className:"p-4 space-y-4 overflow-auto h-[calc(100%-140px)]",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Project"}),(0,t.jsxs)(r.Select,{value:Y,onValueChange:e=>J(e),children:[(0,t.jsx)(r.SelectTrigger,{className:"w-full rounded border px-3 py-2",children:(0,t.jsx)(r.SelectValue,{placeholder:"All"})}),(0,t.jsxs)(r.SelectContent,{children:[(0,t.jsx)(r.SelectItem,{value:"all",children:"All"}),tn.map(e=>(0,t.jsx)(r.SelectItem,{value:e,children:e},e))]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Project Members"}),(0,t.jsxs)(r.Select,{value:G,onValueChange:e=>q(e),children:[(0,t.jsx)(r.SelectTrigger,{className:"w-full rounded border px-3 py-2",children:(0,t.jsx)(r.SelectValue,{placeholder:"All"})}),(0,t.jsxs)(r.SelectContent,{children:[(0,t.jsx)(r.SelectItem,{value:"all",children:"All"}),tc.map(e=>(0,t.jsx)(r.SelectItem,{value:e,children:e},e))]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Client"}),(0,t.jsxs)(r.Select,{value:X,onValueChange:e=>Z(e),children:[(0,t.jsx)(r.SelectTrigger,{className:"w-full rounded border px-3 py-2",children:(0,t.jsx)(r.SelectValue,{placeholder:"All"})}),(0,t.jsxs)(r.SelectContent,{children:[(0,t.jsx)(r.SelectItem,{value:"all",children:"All"}),td.map(e=>(0,t.jsx)(r.SelectItem,{value:e.id,children:e.name},e.id))]})]})]})]}),(0,t.jsxs)("div",{className:"p-4 border-t flex items-center justify-between gap-2",children:[(0,t.jsx)(l.Button,{variant:"outline",onClick:tP,children:"Reset"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.Button,{variant:"ghost",onClick:tT,children:"Close"}),(0,t.jsx)(l.Button,{className:"bg-blue-600 text-white",onClick:tA,children:"Apply"})]})]})]}),et&&(0,t.jsxs)("div",{className:"fixed inset-0 z-[10000] flex items-start justify-center pt-12 px-4 overflow-y-auto",children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black/40",onClick:()=>{ea(!1),tk()}}),(0,t.jsxs)("div",{className:"relative w-full max-w-4xl bg-white rounded-xl shadow-2xl overflow-y-auto z-10",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Add Project"}),(0,t.jsx)("button",{onClick:()=>{ea(!1),tk()},className:"p-2 rounded hover:bg-gray-100",children:(0,t.jsx)(N.X,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,t.jsx)("h4",{className:"font-medium mb-3",children:"Project Details"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:"Short Code *"}),(0,t.jsx)(s.Input,{value:el,onChange:e=>es(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:"Project Name *"}),(0,t.jsx)(s.Input,{value:er,onChange:e=>en(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:"Start Date *"}),(0,t.jsx)(s.Input,{type:"date",value:ec,onChange:e=>ei(e.target.value)})]}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:"Deadline *"}),(0,t.jsx)(s.Input,{type:"date",value:ed,onChange:e=>eo(e.target.value),disabled:ex})]}),(0,t.jsx)("div",{className:"pt-6",children:(0,t.jsxs)("label",{className:"inline-flex items-center gap-2 text-sm text-gray-600",children:[(0,t.jsx)("input",{type:"checkbox",checked:ex,onChange:e=>eh(e.target.checked)}),(0,t.jsx)("span",{className:"text-xs",children:"There is no project deadline"})]})})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:"Project Category *"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(r.Select,{value:em,onValueChange:e=>eu(e),children:[(0,t.jsx)(r.SelectTrigger,{className:"w-full",children:(0,t.jsx)(r.SelectValue,{placeholder:"--"})}),(0,t.jsxs)(r.SelectContent,{children:[(0,t.jsx)(r.SelectItem,{value:"none",children:"--"}),ti.map(e=>(0,t.jsx)(r.SelectItem,{value:e.id,children:e.name},e.id))]})]}),(0,t.jsx)(l.Button,{variant:"outline",onClick:tp,children:"Add"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:"Department *"}),(0,t.jsxs)(r.Select,{value:ep,onValueChange:e=>ej(e),children:[(0,t.jsx)(r.SelectTrigger,{className:"w-full",children:(0,t.jsx)(r.SelectValue,{placeholder:"--"})}),(0,t.jsxs)(r.SelectContent,{children:[(0,t.jsx)(r.SelectItem,{value:"none",children:"--"}),to.map(e=>(0,t.jsx)(r.SelectItem,{value:e.id,children:e.name},e.id))]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:"Client *"}),(0,t.jsxs)(r.Select,{value:eg,onValueChange:e=>ev(e),children:[(0,t.jsx)(r.SelectTrigger,{className:"w-full",children:(0,t.jsx)(r.SelectValue,{placeholder:"--"})}),(0,t.jsxs)(r.SelectContent,{children:[(0,t.jsx)(r.SelectItem,{value:"none",children:"--"}),td.map(e=>(0,t.jsx)(r.SelectItem,{value:e.id,children:e.name},e.id))]})]})]}),(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:"Project Summary"}),(0,t.jsx)("textarea",{rows:4,value:ey,onChange:e=>eN(e.target.value),className:"w-full p-2 border rounded"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Tasks needs approval by Admin"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,t.jsx)("input",{type:"radio",name:"approval",checked:!0===ef,onChange:()=>eS(!0)}),(0,t.jsx)("span",{className:"text-sm",children:"Yes"})]}),(0,t.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,t.jsx)("input",{type:"radio",name:"approval",checked:!1===ef,onChange:()=>eS(!1)}),(0,t.jsx)("span",{className:"text-sm",children:"No"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:"Add Project Members *"}),(0,t.jsx)(s.Input,{placeholder:"Comma separated names",value:Array.isArray(eb)?eb.join(","):eb,onChange:e=>ew(e.target.value)})]})]})]}),(0,t.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,t.jsx)("h4",{className:"font-medium mb-3",children:"Company Details"}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"text-sm text-gray-600 mb-2 block",children:"Add File"}),(0,t.jsxs)("div",{onClick:()=>{var e;return null==(e=eB.current)?void 0:e.click()},className:"border-2 border-dashed rounded-lg h-28 flex items-center justify-center cursor-pointer text-gray-500",children:[eC?(0,t.jsx)("div",{children:eC.name}):(0,t.jsx)("div",{children:"Choose File"}),(0,t.jsx)("input",{ref:eB,type:"file",className:"hidden",onChange:e=>{var t,a;return ek(null!=(a=null==(t=e.target.files)?void 0:t[0])?a:null)}})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:"Currency"}),(0,t.jsxs)(r.Select,{value:eD,onValueChange:e=>eI(e),children:[(0,t.jsx)(r.SelectTrigger,{className:"w-full",children:(0,t.jsx)(r.SelectValue,{placeholder:"USD"})}),(0,t.jsxs)(r.SelectContent,{children:[(0,t.jsx)(r.SelectItem,{value:"USD",children:"USD $"}),(0,t.jsx)(r.SelectItem,{value:"USD",children:"USD ₹"}),(0,t.jsx)(r.SelectItem,{value:"EUR",children:"EUR €"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:"Project Budget"}),(0,t.jsx)(s.Input,{value:eT,onChange:e=>eA(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:"Hours Estimate (In Hours)"}),(0,t.jsx)(s.Input,{value:eP,onChange:e=>eE(e.target.value)})]})]}),(0,t.jsxs)("div",{className:"mt-3 flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:eF,onChange:e=>eM(e.target.checked)}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Allow manual time logs"})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("label",{className:"text-sm text-gray-600 mr-2",children:"Added by*"}),(0,t.jsxs)(r.Select,{value:eO,onValueChange:e=>eU(e),children:[(0,t.jsx)(r.SelectTrigger,{className:"w-44",children:(0,t.jsx)(r.SelectValue,{placeholder:"You"})}),(0,t.jsxs)(r.SelectContent,{children:[(0,t.jsx)(r.SelectItem,{value:"you",children:"You"}),tc.map(e=>(0,t.jsx)(r.SelectItem,{value:e,children:e},e))]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,t.jsx)(l.Button,{variant:"outline",onClick:()=>{ea(!1),tk()},children:"Cancel"}),(0,t.jsx)(l.Button,{className:"bg-blue-600 text-white",onClick:tD,disabled:eR,children:eR?"Saving...":"Save"})]})]})]})]}),eL&&(0,t.jsxs)("div",{className:"fixed inset-0 z-[11000] flex items-center justify-center px-4",children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black/40",onClick:()=>tj()}),(0,t.jsxs)("div",{className:"relative w-full max-w-2xl bg-white rounded-lg shadow-2xl z-20 overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,t.jsx)("h3",{className:"font-semibold",children:"Project Category"}),(0,t.jsx)("button",{onClick:()=>tj(),className:"p-2 rounded hover:bg-gray-100",children:(0,t.jsx)(N.X,{className:"w-4 h-4"})})]}),(0,t.jsxs)("div",{className:"p-4 space-y-4",children:[(0,t.jsx)("div",{className:"rounded border overflow-auto",children:(0,t.jsxs)("table",{className:"min-w-full text-left",children:[(0,t.jsx)("thead",{className:"bg-blue-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-2 text-sm",children:"#"}),(0,t.jsx)("th",{className:"px-4 py-2 text-sm",children:"Category Name"}),(0,t.jsx)("th",{className:"px-4 py-2 text-sm",children:"Action"})]})}),(0,t.jsx)("tbody",{children:e_?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:3,className:"px-4 py-6 text-center text-gray-500",children:"Loading..."})}):0===eH.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:3,className:"px-4 py-6 text-center text-gray-500",children:"No categories"})}):eH.map((e,a)=>(0,t.jsxs)("tr",{className:"border-t",children:[(0,t.jsx)("td",{className:"px-4 py-3 text-sm",children:a+1}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm",children:e.name}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,t.jsx)("button",{className:"p-2 rounded hover:bg-gray-100 text-red-600",onClick:()=>tv(e.id),title:"Delete",children:(0,t.jsx)(p.Trash2,{className:"w-4 h-4"})})})]},e.id))})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Category Name *"}),(0,t.jsx)(s.Input,{placeholder:"Enter category name",value:eJ,onChange:e=>eG(e.target.value)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,t.jsx)(l.Button,{variant:"outline",onClick:()=>tj(),children:"Cancel"}),(0,t.jsx)(l.Button,{className:"bg-blue-600 text-white",onClick:tg,disabled:eq,children:eq?"Saving...":"Save"})]})]})]})]}),e2&&null!=e5&&(0,t.jsx)(function(e){let{projectId:n,onClose:c,onSaved:i}=e,[d,o]=(0,a.useState)(!1),[x,h]=(0,a.useState)(!1),[m,u]=(0,a.useState)(""),[p,j]=(0,a.useState)(""),[g,v]=(0,a.useState)(""),[y,f]=(0,a.useState)(""),[b,w]=(0,a.useState)(!1),[C,D]=(0,a.useState)("none"),[I,A]=(0,a.useState)("none"),[P,E]=(0,a.useState)("none"),[F,M]=(0,a.useState)(""),[B,O]=(0,a.useState)(!0),[U,R]=(0,a.useState)(""),[V,L]=(0,a.useState)(null),z=(0,a.useRef)(null),[H,K]=(0,a.useState)("USD"),[_,Y]=(0,a.useState)(""),[J,G]=(0,a.useState)(""),[q,X]=(0,a.useState)(!1),[Z,$]=(0,a.useState)("none"),[W,Q]=(0,a.useState)(0),[ee,et]=(0,a.useState)(!1),[ea,el]=(0,a.useState)("you"),es=()=>{u(""),j(""),v(""),f(""),w(!1),D("none"),A("none"),E("none"),M(""),O(!0),R(""),L(null),K("USD"),Y(""),G(""),X(!1),$("none"),Q(0),et(!1),el("you")};(0,a.useEffect)(()=>{if(!n)return;let e=!0;return(async()=>{o(!0);try{var t,a,l,s,r,c,i,d,x,h,m,p,g,y,N,S,b,C,I,P;let o=T||localStorage.getItem("accessToken"),F=await fetch("".concat(k,"/api/projects/").concat(n),{headers:o?{Authorization:"Bearer ".concat(o)}:void 0,cache:"no-store"});if(!F.ok){let t=await F.text().catch(()=>"");console.error("Failed to fetch project",F.status,t),e&&alert("Failed to load project details");return}let B=await F.json();if(!e)return;u(null!=(r=null!=(s=null!=(l=B.shortCode)?l:B.code)?s:B.projectCode)?r:""),j(null!=(c=B.name)?c:""),v(B.startDate?B.startDate.split("T")[0]:null!=(i=B.startDate)?i:""),f(B.deadline?B.deadline.split("T")[0]:null!=(d=B.deadline)?d:""),w(!!B.noDeadline),D(B.category?String(B.category):"none"),A(null!=(x=B.department)?x:"none"),E((null==(t=B.client)?void 0:t.clientId)?String(B.client.clientId):null!=(m=null!=(h=null==(a=B.client)?void 0:a.name)?h:B.client)?m:"none"),M(null!=(p=B.summary)?p:""),O(!!(null==(g=B.tasksNeedAdminApproval)||g)),R(Array.isArray(B.assignedEmployees)?B.assignedEmployees.map(e=>e.name).join(","):null!=(y=B.members)?y:""),K(null!=(N=B.currency)?N:"USD"),Y(null!=B.budget?String(B.budget):""),G(null!=B.hoursEstimate?String(B.hoursEstimate):""),X(!!(null!=(S=B.allowManualTimeLogs)&&S)),$(null!=(b=B.projectStatus)?b:"none"),Q(Number(null!=(C=B.progressPercent)?C:0)),et(!!(null!=(I=B.calculateProgressThroughTasks)&&I)),el(null!=(P=B.addedBy)?P:"you")}catch(t){console.error("Error loading project:",t),e&&alert("Failed to load project details")}finally{e&&o(!1)}})(),()=>{e=!1}},[n,T]);let er=async()=>{if(n){if(!p.trim())return alert("Project name required");h(!0);try{let e=new FormData;m&&e.append("shortCode",m),e.append("name",p),g&&e.append("startDate",g),b?e.append("deadline",""):e.append("deadline",y||""),e.append("noDeadline",String(!!b)),e.append("category","none"===C?"":C),e.append("department","none"===I?"":I),e.append("clientId","none"===P?"":P),e.append("summary",F||""),e.append("tasksNeedAdminApproval",String(!!B));let t=Array.isArray(U)?U:String(U||"").split(",").map(e=>e.trim()).filter(Boolean);e.append("assignedEmployeeIds",JSON.stringify(t)),V&&e.append("companyFile",V),e.append("currency",H||""),e.append("budget",_||"0"),e.append("hoursEstimate",J||"0"),e.append("allowManualTimeLogs",String(!!q)),Z&&"none"!==Z&&e.append("projectStatus",String(Z)),null==W||Number.isNaN(Number(W))||e.append("progressPercent",String(Math.max(0,Math.min(100,Math.round(W||0))))),e.append("calculateProgressThroughTasks",String(!!ee)),e.append("addedBy",String(ea||""));let a=T||localStorage.getItem("accessToken"),l=await fetch("".concat(k,"/api/projects/").concat(n),{method:"PUT",body:e,headers:a?{Authorization:"Bearer ".concat(a)}:void 0});if(!l.ok){let e=await l.text().catch(()=>"");console.error("Update failed",l.status,e),alert("Failed to update project");return}let s=null;try{s=await l.json()}catch(e){s=null}s&&s.id?S(e=>e.map(e=>e.id===s.id?{...e,...s}:e)):await tm(a),i(),c(),es()}catch(e){console.error("Update error:",e),alert("Failed to update project")}finally{h(!1)}}};return(0,t.jsxs)("div",{className:"fixed inset-0 z-[12000] flex items-start justify-center pt-12 px-4 overflow-y-auto; ",children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black/40",onClick:()=>{c(),es()}}),(0,t.jsxs)("div",{className:"relative w-full max-w-4xl bg-white rounded-xl shadow-2xl overflow-y-auto z-10",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Update Project"}),(0,t.jsx)("button",{onClick:()=>{c(),es()},className:"p-2 rounded hover:bg-gray-100",children:(0,t.jsx)(N.X,{className:"w-5 h-5"})})]}),(0,t.jsx)("div",{className:"p-6 space-y-6",children:d?(0,t.jsx)("p",{className:"p-4 text-center",children:"Loading project..."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,t.jsx)("h4",{className:"font-medium mb-3",children:"Project Details"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:"Short Code *"}),(0,t.jsx)(s.Input,{value:m,onChange:e=>u(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:"Project Name  *"}),(0,t.jsx)(s.Input,{value:p,onChange:e=>j(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:"Start Date *"}),(0,t.jsx)(s.Input,{type:"date",value:g,onChange:e=>v(e.target.value)})]}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:"Deadline *"}),(0,t.jsx)(s.Input,{type:"date",value:y,onChange:e=>f(e.target.value),disabled:b})]}),(0,t.jsx)("div",{className:"pt-6",children:(0,t.jsxs)("label",{className:"inline-flex items-center gap-2 text-sm text-gray-600",children:[(0,t.jsx)("input",{type:"checkbox",checked:b,onChange:e=>w(e.target.checked)}),(0,t.jsx)("span",{className:"text-xs",children:"There is no project deadline"})]})})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:"Project Category *"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(r.Select,{value:C,onValueChange:e=>D(e),children:[(0,t.jsx)(r.SelectTrigger,{className:"w-full",children:(0,t.jsx)(r.SelectValue,{placeholder:"--"})}),(0,t.jsxs)(r.SelectContent,{children:[(0,t.jsx)(r.SelectItem,{value:"none",children:"--"}),ti.map(e=>(0,t.jsx)(r.SelectItem,{value:e.id,children:e.name},e.id))]})]}),(0,t.jsx)(l.Button,{variant:"outline",onClick:tp,children:"Add"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:"Department *"}),(0,t.jsxs)(r.Select,{value:I,onValueChange:e=>A(e),children:[(0,t.jsx)(r.SelectTrigger,{className:"w-full",children:(0,t.jsx)(r.SelectValue,{placeholder:"--"})}),(0,t.jsxs)(r.SelectContent,{children:[(0,t.jsx)(r.SelectItem,{value:"none",children:"--"}),to.map(e=>(0,t.jsx)(r.SelectItem,{value:e.id,children:e.name},e.id))]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:"Client *"}),(0,t.jsxs)(r.Select,{value:P,onValueChange:e=>E(e),children:[(0,t.jsx)(r.SelectTrigger,{className:"w-full",children:(0,t.jsx)(r.SelectValue,{placeholder:"--"})}),(0,t.jsxs)(r.SelectContent,{children:[(0,t.jsx)(r.SelectItem,{value:"none",children:"--"}),td.map(e=>(0,t.jsx)(r.SelectItem,{value:e.id,children:e.name},e.id))]})]})]}),(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:"Project Summary"}),(0,t.jsx)("textarea",{rows:4,value:F,onChange:e=>M(e.target.value),className:"w-full p-2 border rounded"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Tasks needs approval by Admin"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,t.jsx)("input",{type:"radio",name:"ucApproval",checked:!0===B,onChange:()=>O(!0)}),(0,t.jsx)("span",{className:"text-sm",children:"Yes"})]}),(0,t.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,t.jsx)("input",{type:"radio",name:"ucApproval",checked:!1===B,onChange:()=>O(!1)}),(0,t.jsx)("span",{className:"text-sm",children:"No"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:"Assigned to *"}),(0,t.jsx)(s.Input,{placeholder:"Comma separated names or ids",value:Array.isArray(U)?U.join(","):U,onChange:e=>R(e.target.value)})]}),(0,t.jsx)("div",{className:"col-span-2",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:"Project Status"}),(0,t.jsxs)(r.Select,{value:Z,onValueChange:e=>$(e),children:[(0,t.jsx)(r.SelectTrigger,{className:"w-full",children:(0,t.jsx)(r.SelectValue,{placeholder:"Select status"})}),(0,t.jsxs)(r.SelectContent,{children:[(0,t.jsx)(r.SelectItem,{value:"none",children:"--"}),(0,t.jsx)(r.SelectItem,{value:"IN_PROGRESS",children:"In Progress"}),(0,t.jsx)(r.SelectItem,{value:"NOT_STARTED",children:"Not Started"}),(0,t.jsx)(r.SelectItem,{value:"ON_HOLD",children:"On Hold"}),(0,t.jsx)(r.SelectItem,{value:"CANCELLED",children:"Cancelled"}),(0,t.jsx)(r.SelectItem,{value:"FINISHED",children:"Finished"})]})]})]}),(0,t.jsxs)("div",{className:"w-1/2",children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:"Project Progress Status"}),(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsxs)("div",{className:"relative bg-gray-200 h-4 rounded-full overflow-hidden",children:[(0,t.jsx)("div",{className:"h-4 rounded-full ".concat(null==W?"bg-gray-300":W<33?"bg-red-500":W<66?"bg-yellow-400":"bg-green-500"),style:{width:"".concat(Math.max(0,Math.min(100,W)),"%")}}),(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,t.jsxs)("span",{className:"text-xs font-semibold text-white drop-shadow-sm",children:[Math.round(W),"%"]})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,t.jsx)("input",{type:"range",min:0,max:100,value:W,onChange:e=>Q(Number(e.target.value)),className:"flex-1"}),(0,t.jsxs)("label",{className:"inline-flex items-center gap-2 text-sm",children:[(0,t.jsx)("input",{type:"checkbox",checked:ee,onChange:e=>et(e.target.checked)}),(0,t.jsx)("span",{className:"text-xs",children:"Calculate Progress through tasks"})]})]})]})]})]})})]})]}),(0,t.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,t.jsx)("h4",{className:"font-medium mb-3",children:"Company Details"}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"text-sm text-gray-600 mb-2 block",children:"Add File"}),(0,t.jsxs)("div",{onClick:()=>{var e;return null==(e=z.current)?void 0:e.click()},className:"border-2 border-dashed rounded-lg h-28 flex items-center justify-center cursor-pointer text-gray-500",children:[V?(0,t.jsx)("div",{children:V.name}):(0,t.jsx)("div",{children:"Choose File"}),(0,t.jsx)("input",{ref:z,type:"file",className:"hidden",onChange:e=>{var t,a;return L(null!=(a=null==(t=e.target.files)?void 0:t[0])?a:null)}})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:"Currency"}),(0,t.jsxs)(r.Select,{value:H,onValueChange:e=>K(e),children:[(0,t.jsx)(r.SelectTrigger,{className:"w-full",children:(0,t.jsx)(r.SelectValue,{placeholder:"USD"})}),(0,t.jsxs)(r.SelectContent,{children:[(0,t.jsx)(r.SelectItem,{value:"EUR",children:"EUR € (Euro)"}),(0,t.jsx)(r.SelectItem,{value:"GBP",children:"GBP £ (British Pound)"}),(0,t.jsx)(r.SelectItem,{value:"CHF",children:"CHF ₣ (Swiss Franc)"}),(0,t.jsx)(r.SelectItem,{value:"SEK",children:"SEK kr (Swedish Krona)"}),(0,t.jsx)(r.SelectItem,{value:"NOK",children:"NOK kr (Norwegian Krone)"}),(0,t.jsx)(r.SelectItem,{value:"DKK",children:"DKK kr (Danish Krone)"}),(0,t.jsx)(r.SelectItem,{value:"PLN",children:"PLN zł (Polish Złoty)"}),(0,t.jsx)(r.SelectItem,{value:"CZK",children:"CZK Kč (Czech Koruna)"}),(0,t.jsx)(r.SelectItem,{value:"HUF",children:"HUF Ft (Hungarian Forint)"}),(0,t.jsx)(r.SelectItem,{value:"RON",children:"RON lei (Romanian Leu)"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:"Project Budget"}),(0,t.jsx)(s.Input,{value:_,onChange:e=>Y(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:"Hours Estimate (In Hours)"}),(0,t.jsx)(s.Input,{value:J,onChange:e=>G(e.target.value)})]})]}),(0,t.jsxs)("div",{className:"mt-3 flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:q,onChange:e=>X(e.target.checked)}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Allow manual time logs "})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("label",{className:"text-sm text-gray-600 mr-2",children:"Added by*"}),(0,t.jsxs)(r.Select,{value:ea,onValueChange:e=>el(e),children:[(0,t.jsx)(r.SelectTrigger,{className:"w-44",children:(0,t.jsx)(r.SelectValue,{placeholder:"You"})}),(0,t.jsxs)(r.SelectContent,{children:[(0,t.jsx)(r.SelectItem,{value:"you",children:"You"}),tc.map(e=>(0,t.jsx)(r.SelectItem,{value:e,children:e},e))]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,t.jsx)(l.Button,{variant:"outline",onClick:()=>{c(),es()},children:"Cancel"}),(0,t.jsx)(l.Button,{className:"bg-blue-600 text-white",onClick:er,disabled:x,children:x?"Updating...":"Update"})]})]})})]})]})},{projectId:e5,onClose:()=>{e6(!1),e8(null)},onSaved:()=>{tm(null!=T?T:null)}})]})}}]);