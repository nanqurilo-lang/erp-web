(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,937373,e=>{"use strict";e.s(["default",()=>d]);var l=e.i(843476),a=e.i(271645),n=e.i(618566);let s="https://6jnqmj85-80.inc1.devtunnels.ms",o=e=>{let{label:a,children:n}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-600",children:a}),n]})};function d(){let e=(0,n.useRouter)(),d=(0,n.useParams)().id,[r,i]=(0,a.useState)(!1),[t,c]=(0,a.useState)(!0),[u,p]=(0,a.useState)(null),[m,h]=(0,a.useState)([]),[g,x]=(0,a.useState)([]),[b,j]=(0,a.useState)([]),[y,N]=(0,a.useState)({employeeId:"",name:"",email:"",password:"",gender:"Male",birthday:"",bloodGroup:"",joiningDate:"",language:"",designationId:"",departmentId:"",reportingToId:"",role:"ROLE_EMPLOYEE",country:"",mobile:"",address:"",about:"",loginAllowed:!0,receiveEmailNotification:!1,hourlyRate:"",slackMemberId:"",skills:"",probationEndDate:"",noticePeriodStartDate:"",noticePeriodEndDate:"",employmentType:"",maritalStatus:"",businessAddress:"",officeShift:""});(0,a.useEffect)(()=>{if(!d)return;let e=localStorage.getItem("accessToken");if(!e)return;let l={Authorization:"Bearer ".concat(e)};Promise.all([fetch("".concat(s,"/admin/departments"),{headers:l}).then(e=>e.json()),fetch("".concat(s,"/admin/designations"),{headers:l}).then(e=>e.json()),fetch("".concat(s,"/employee?page=0&size=2000"),{headers:l}).then(e=>e.json()).then(e=>e.content)]).then(e=>{var l,a,n,s,o,r,i,t,u,p,m,g,b,y,v,f,E,I,C,D,S,k,P,w,A,T,R,M,O,L,B;let[G,U,F]=e;h(G),x(U),j(F.map(e=>({employeeId:e.employeeId,name:e.name})));let Y=F.find(e=>e.employeeId===d);if(!Y){alert("Employee not found"),c(!1);return}N({employeeId:Y.employeeId,name:null!=(o=Y.name)?o:"",email:null!=(r=Y.email)?r:"",password:"",gender:null!=(i=Y.gender)?i:"Male",birthday:null!=(t=Y.birthday)?t:"",bloodGroup:null!=(u=Y.bloodGroup)?u:"",joiningDate:null!=(p=Y.joiningDate)?p:"",language:null!=(m=Y.language)?m:"",designationId:null!=(g=null==(l=Y.designationId)?void 0:l.toString())?g:"",departmentId:null!=(b=null==(a=Y.departmentId)?void 0:a.toString())?b:"",reportingToId:null!=(y=Y.reportingToId)?y:"",role:null!=(v=Y.role)?v:"ROLE_EMPLOYEE",country:null!=(f=Y.country)?f:"",mobile:null!=(E=Y.mobile)?E:"",address:null!=(I=Y.address)?I:"",about:null!=(C=Y.about)?C:"",loginAllowed:null==(D=Y.loginAllowed)||D,receiveEmailNotification:null!=(S=Y.receiveEmailNotification)&&S,hourlyRate:null!=(k=null==(n=Y.hourlyRate)?void 0:n.toString())?k:"",slackMemberId:null!=(P=Y.slackMemberId)?P:"",skills:null!=(w=null==(s=Y.skills)?void 0:s.join(", "))?w:"",probationEndDate:null!=(A=Y.probationEndDate)?A:"",noticePeriodStartDate:null!=(T=Y.noticePeriodStartDate)?T:"",noticePeriodEndDate:null!=(R=Y.noticePeriodEndDate)?R:"",employmentType:null!=(M=Y.employmentType)?M:"",maritalStatus:null!=(O=Y.maritalStatus)?O:"",businessAddress:null!=(L=Y.businessAddress)?L:"",officeShift:null!=(B=Y.officeShift)?B:""}),c(!1)}).catch(e=>{console.error(e),c(!1),alert("Failed to load employee data")})},[d]);let v=e=>{let{name:l,value:a,type:n,checked:s}=e.target;N(e=>({...e,[l]:"checkbox"===n?s:a}))},f=async l=>{l.preventDefault(),i(!0);try{let l=localStorage.getItem("accessToken");if(!l)throw Error("No token");let a={...y,departmentId:Number(y.departmentId),designationId:Number(y.designationId),hourlyRate:Number(y.hourlyRate),skills:y.skills?y.skills.split(",").map(e=>e.trim()):[]},n=new FormData;n.append("employee",JSON.stringify(a)),u&&n.append("file",u);let o=await fetch("".concat(s,"/employee/").concat(d),{method:"PUT",headers:{Authorization:"Bearer ".concat(l)},body:n});if(!o.ok)throw Error("Failed to update employee");await o.json(),e.push("/hr/employee")}catch(e){alert(e.message)}finally{i(!1)}};return t?(0,l.jsx)("div",{className:"p-6",children:"Loading employee details... "}):(0,l.jsxs)("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[(0,l.jsx)("h1",{className:"text-xl font-semibold",children:"Edit Employee"}),(0,l.jsxs)("div",{className:"bg-white border rounded-xl p-6",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold mb-6",children:"Account Details"}),(0,l.jsxs)("form",{onSubmit:f,className:"space-y-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,l.jsx)(o,{label:"Employee ID *",children:(0,l.jsx)("input",{name:"employeeId",value:y.employeeId,disabled:!0,className:"border rounded-lg px-3 py-2 bg-gray-100"})}),(0,l.jsx)(o,{label:"Employee Name *",children:(0,l.jsx)("input",{name:"name",value:y.name,onChange:v,className:"border rounded-lg px-3 py-2",required:!0})}),(0,l.jsxs)("div",{className:"row-span-2",children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Profile Picture"}),(0,l.jsxs)("label",{className:"mt-2 flex flex-col items-center justify-center h-36 border-2 border-dashed rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,l.jsx)("span",{className:"text-sm text-gray-400",children:"Change picture"}),(0,l.jsx)("input",{type:"file",hidden:!0,onChange:e=>{var l;return p((null==(l=e.target.files)?void 0:l[0])||null)}})]})]}),(0,l.jsx)(o,{label:"Employee Email *",children:(0,l.jsx)("input",{name:"email",value:y.email,onChange:v,className:"border rounded-lg px-3 py-2",required:!0})}),(0,l.jsx)(o,{label:"Password",children:(0,l.jsx)("input",{type:"password",name:"password",value:y.password,onChange:v,className:"border rounded-lg px-3 py-2"})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-5 gap-4",children:[(0,l.jsx)(o,{label:"Gender *",children:(0,l.jsxs)("select",{name:"gender",value:y.gender,onChange:v,className:"border rounded-lg px-3 py-2",children:[(0,l.jsx)("option",{children:"Male"}),(0,l.jsx)("option",{children:"Female"})]})}),(0,l.jsx)(o,{label:"Date of Birth *",children:(0,l.jsx)("input",{type:"date",name:"birthday",value:y.birthday||"",onChange:v,className:"border rounded-lg px-3 py-2"})}),(0,l.jsx)(o,{label:"Blood Group *",children:(0,l.jsx)("input",{name:"bloodGroup",value:y.bloodGroup,onChange:v,className:"border rounded-lg px-3 py-2"})}),(0,l.jsx)(o,{label:"Joining Date *",children:(0,l.jsx)("input",{type:"date",name:"joiningDate",value:y.joiningDate||"",onChange:v,className:"border rounded-lg px-3 py-2"})}),(0,l.jsx)(o,{label:"Language *",children:(0,l.jsx)("input",{name:"language",value:y.language,onChange:v,className:"border rounded-lg px-3 py-2"})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,l.jsx)(o,{label:"Designation *",children:(0,l.jsxs)("select",{name:"designationId",value:y.designationId,onChange:v,className:"border rounded-lg px-3 py-2",children:[(0,l.jsx)("option",{value:"",children:"Select Designation"}),g.map(e=>(0,l.jsx)("option",{value:e.id,children:e.designationName},e.id))]})}),(0,l.jsx)(o,{label:"Department *",children:(0,l.jsxs)("select",{name:"departmentId",value:y.departmentId,onChange:v,className:"border rounded-lg px-3 py-2",children:[(0,l.jsx)("option",{value:"",children:"Select Department"}),m.map(e=>(0,l.jsx)("option",{value:e.id,children:e.departmentName},e.id))]})}),(0,l.jsx)(o,{label:"Reporting To *",children:(0,l.jsxs)("select",{name:"reportingToId",value:y.reportingToId,onChange:v,className:"border rounded-lg px-3 py-2",children:[(0,l.jsx)("option",{value:"",children:"Select Manager"}),b.map(e=>(0,l.jsxs)("option",{value:e.employeeId,children:[e.name," (",e.employeeId,")"]},e.employeeId))]})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,l.jsx)(o,{label:"User Role *",children:(0,l.jsxs)("select",{name:"role",value:y.role,onChange:v,className:"border rounded-lg px-3 py-2",children:[(0,l.jsx)("option",{value:"ROLE_EMPLOYEE",children:"Employee"}),(0,l.jsx)("option",{value:"ROLE_ADMIN",children:"Admin"})]})}),(0,l.jsx)(o,{label:"Country",children:(0,l.jsx)("input",{name:"country",value:y.country,onChange:v,className:"border rounded-lg px-3 py-2"})}),(0,l.jsx)(o,{label:"Mobile",children:(0,l.jsx)("input",{name:"mobile",value:y.mobile,onChange:v,className:"border rounded-lg px-3 py-2"})})]}),(0,l.jsx)(o,{label:"Address *",children:(0,l.jsx)("input",{name:"address",value:y.address,onChange:v,className:"border rounded-lg px-3 py-2"})}),(0,l.jsx)(o,{label:"About",children:(0,l.jsx)("textarea",{name:"about",value:y.about,onChange:v,className:"border rounded-lg px-3 py-2 h-24"})})]})]}),(0,l.jsxs)("div",{className:"bg-white border rounded-xl p-6",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold mb-6",children:"Other Details"}),(0,l.jsxs)("div",{className:"grid grid-cols-4 gap-6",children:[(0,l.jsx)(o,{label:"Login Allowed?",children:(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsxs)("label",{children:[(0,l.jsx)("input",{type:"radio",checked:y.loginAllowed,onChange:()=>N(e=>({...e,loginAllowed:!0}))})," Yes"]}),(0,l.jsxs)("label",{children:[(0,l.jsx)("input",{type:"radio",checked:!y.loginAllowed,onChange:()=>N(e=>({...e,loginAllowed:!1}))})," No"]})]})}),(0,l.jsx)(o,{label:"Receive Email Notifications?",children:(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsxs)("label",{children:[(0,l.jsx)("input",{type:"radio",checked:y.receiveEmailNotification,onChange:()=>N(e=>({...e,receiveEmailNotification:!0}))})," Yes"]}),(0,l.jsxs)("label",{children:[(0,l.jsx)("input",{type:"radio",checked:!y.receiveEmailNotification,onChange:()=>N(e=>({...e,receiveEmailNotification:!1}))})," No"]})]})}),(0,l.jsx)(o,{label:"Hourly Rate",children:(0,l.jsx)("input",{name:"hourlyRate",value:y.hourlyRate,onChange:v,className:"border rounded-lg px-3 py-2"})}),(0,l.jsx)(o,{label:"Slack Member ID",children:(0,l.jsx)("input",{name:"slackMemberId",value:y.slackMemberId,onChange:v,className:"border rounded-lg px-3 py-2"})})]}),(0,l.jsx)(o,{label:"Skills",children:(0,l.jsx)("input",{name:"skills",value:y.skills,onChange:v,className:"border rounded-lg px-3 py-2"})}),(0,l.jsxs)("div",{className:"grid grid-cols-4 gap-4 mt-6",children:[(0,l.jsx)(o,{label:"Probation End Date",children:(0,l.jsx)("input",{type:"date",name:"probationEndDate",value:y.probationEndDate||"",onChange:v,className:"border rounded-lg px-3 py-2"})}),(0,l.jsx)(o,{label:"Notice Period Start Date",children:(0,l.jsx)("input",{type:"date",name:"noticePeriodStartDate",value:y.noticePeriodStartDate||"",onChange:v,className:"border rounded-lg px-3 py-2"})}),(0,l.jsx)(o,{label:"Notice Period End Date",children:(0,l.jsx)("input",{type:"date",name:"noticePeriodEndDate",value:y.noticePeriodEndDate||"",onChange:v,className:"border rounded-lg px-3 py-2"})}),(0,l.jsx)(o,{label:"Employment Type",children:(0,l.jsxs)("select",{name:"employmentType",value:y.employmentType,onChange:v,className:"border rounded-lg px-3 py-2",children:[(0,l.jsx)("option",{children:"Full Time"}),(0,l.jsx)("option",{children:"Part Time"}),(0,l.jsx)("option",{children:"Contract"})]})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[(0,l.jsx)(o,{label:"Marital Status",children:(0,l.jsxs)("select",{name:"maritalStatus",value:y.maritalStatus,onChange:v,className:"border rounded-lg px-3 py-2",children:[(0,l.jsx)("option",{children:"Single"}),(0,l.jsx)("option",{children:"Married"})]})}),(0,l.jsx)(o,{label:"Business Address *",children:(0,l.jsx)("input",{name:"businessAddress",value:y.businessAddress,onChange:v,className:"border rounded-lg px-3 py-2"})})]})]}),(0,l.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,l.jsx)("button",{onClick:()=>e.back(),className:"px-6 py-2 border rounded-lg",children:"Cancel"}),(0,l.jsx)("button",{disabled:r,onClick:f,className:"px-8 py-2 bg-blue-600 text-white rounded-lg",children:r?"Updating...":"Update"})]})]})}}]);