(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,102507,e=>{"use strict";e.s(["default",()=>x]);var t=e.i(843476),s=e.i(618566),l=e.i(283599),d=e.i(271645),a=e.i(515288),n=e.i(519455),i=e.i(487486),r=e.i(871689);let c="".concat("https://6jnqmj85-80.inc1.devtunnels.ms"),o="".concat(c,"/employee/all?page=0&size=20"),m=async e=>{let t=localStorage.getItem("accessToken");if(!t)throw Error("No access token found. Please log in.");let s=await fetch(e,{cache:"no-store",headers:{Authorization:"Bearer ".concat(t),Accept:"application/json"}});if(!s.ok){let e="Failed to load data.";try{let t=await s.json();e=(null==t?void 0:t.message)||(null==t?void 0:t.error)||e}catch(t){e=await s.text()||e}throw Error(e)}return s.json()};function u(e){return e&&"null"!==e?e:"--"}function x(e){var x,h,v,j,f,N;let{params:g}=e,p=(0,s.useRouter)(),{data:w,error:y,isLoading:b,mutate:S}=(0,l.default)("/api/leads/admin/get/".concat(g.id),m,{refreshInterval:3e4,revalidateOnFocus:!0}),[E,C]=(0,d.useState)("profile"),[L,A]=(0,d.useState)(!1),k=(0,d.useRef)(null),[O,P]=(0,d.useState)(!1),{data:B,error:I,isLoading:z,mutate:F}=(0,l.default)("deals"===E?"".concat(c,"/deals/lead/").concat(g.id):null,m,{refreshInterval:3e4,revalidateOnFocus:!0}),{data:T}=(0,l.default)(o,m,{refreshInterval:0});T&&Array.isArray(T.content)&&T.content.map(e=>{var t,s,l;return{employeeId:e.employeeId,name:e.name,designation:null!=(t=e.designationName)?t:null,department:null!=(s=e.departmentName)?s:null,profileUrl:null!=(l=e.profilePictureUrl)?l:null}});let[R,U]=(0,d.useState)(!1),[D,M]=(0,d.useState)(null),[W,K]=(0,d.useState)(null);(0,d.useEffect)(()=>{let e=e=>{if(!k.current)return;let t=e.target;L&&!k.current.contains(t)&&A(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[L]);let[q,G]=(0,d.useState)([]),[H,J]=(0,d.useState)(!1),[Q,V]=(0,d.useState)(null),[X,Y]=(0,d.useState)(!1),[Z,$]=(0,d.useState)(null),[_,ee]=(0,d.useState)(null),[et,es]=(0,d.useState)(null),el=(0,d.useRef)(null),[ed,ea]=(0,d.useState)(null),en=async()=>{J(!0),V(null);try{let e,t=localStorage.getItem("accessToken");if(!t)throw Error("No access token.");let s=await fetch((e=g.id,"".concat(c,"/leads/").concat(e,"/notes")),{headers:{Authorization:"Bearer ".concat(t)}});if(!s.ok)throw Error(await s.text());let l=await s.json();G(Array.isArray(l)?l:[])}catch(t){var e;V(null!=(e=null==t?void 0:t.message)?e:"Failed to load notes")}finally{J(!1)}};return(0,d.useEffect)(()=>{"notes"===E&&en()},[E,g.id]),(0,d.useEffect)(()=>{if(null==_)return;let e=e=>{let t=e.target;el.current&&(el.current.contains(t)||(ee(null),es(null)))},t=()=>{ee(null),es(null)},s=()=>{ee(null),es(null)};return document.addEventListener("mousedown",e),window.addEventListener("scroll",t,!0),window.addEventListener("resize",s),()=>{document.removeEventListener("mousedown",e),window.removeEventListener("scroll",t,!0),window.removeEventListener("resize",s)}},[_]),(0,t.jsx)("main",{className:"min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"container mx-auto max-w-6xl px-4 py-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,t.jsx)(n.Button,{variant:"ghost",size:"icon",onClick:()=>p.back(),"aria-label":"Back",children:(0,t.jsx)(r.ArrowLeft,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl md:text-3xl font-semibold",children:null!=(h=null==w?void 0:w.name)?h:"—"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Detailed information about the selected lead."})]})]}),(0,t.jsx)(a.Card,{className:"p-6",children:b?(0,t.jsx)("div",{className:"py-12 text-center text-muted-foreground",children:"Loading lead details…"}):y?(0,t.jsxs)("div",{className:"py-12 text-center",children:[(0,t.jsx)("p",{className:"text-destructive",children:"Failed to load lead details."}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:null==y?void 0:y.message}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(n.Button,{variant:"ghost",onClick:()=>p.back(),children:"Back to Leads"})})]}):w?(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"flex items-start justify-between mb-6",children:(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"profile"===E?"Profile Information":"deals"===E?"Deals":"Notes"})}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"rounded-lg border p-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("dl",{className:"hidden md:block md:col-span-1 space-y-4 text-sm text-muted-foreground",children:[(0,t.jsx)("dt",{children:"Name"}),(0,t.jsx)("dt",{children:"Email"}),(0,t.jsx)("dt",{children:"Lead Owner"}),(0,t.jsx)("dt",{children:"Source"}),(0,t.jsx)("dt",{children:"Company Name"}),(0,t.jsx)("dt",{children:"Website"}),(0,t.jsx)("dt",{children:"Mobile"}),(0,t.jsx)("dt",{children:"Office Phone Number"}),(0,t.jsx)("dt",{children:"City"}),(0,t.jsx)("dt",{children:"State"}),(0,t.jsx)("dt",{children:"Country"}),(0,t.jsx)("dt",{children:"Postal Code"}),(0,t.jsx)("dt",{children:"Address"})]}),(0,t.jsx)("div",{className:"md:col-span-2",children:(0,t.jsxs)("div",{className:"grid gap-y-3",children:[(0,t.jsxs)("div",{className:"flex items-start gap-6",children:[(0,t.jsx)("div",{className:"w-48 md:hidden text-sm text-muted-foreground",children:"Name"}),(0,t.jsx)("div",{className:"text-sm",children:u(null==w?void 0:w.name)})]}),(0,t.jsxs)("div",{className:"flex items-start gap-6",children:[(0,t.jsx)("div",{className:"w-48 md:hidden text-sm text-muted-foreground",children:"Email"}),(0,t.jsx)("div",{className:"text-sm",children:u(null==w?void 0:w.email)})]}),(0,t.jsxs)("div",{className:"flex items-start gap-6",children:[(0,t.jsx)("div",{className:"w-48 md:hidden text-sm text-muted-foreground",children:"Lead Owner"}),(0,t.jsx)("div",{className:"text-sm",children:null!=(j=null!=(v=null==w||null==(x=w.leadOwnerMeta)?void 0:x.name)?v:null==w?void 0:w.leadOwner)?j:"--"})]}),(0,t.jsxs)("div",{className:"flex items-start gap-6",children:[(0,t.jsx)("div",{className:"w-48 md:hidden text-sm text-muted-foreground",children:"Source"}),(0,t.jsx)("div",{className:"text-sm",children:u(null==w?void 0:w.leadSource)})]}),(0,t.jsxs)("div",{className:"flex items-start gap-6",children:[(0,t.jsx)("div",{className:"w-48 md:hidden text-sm text-muted-foreground",children:"Company Name"}),(0,t.jsx)("div",{className:"text-sm",children:u(null==w?void 0:w.companyName)})]}),(0,t.jsxs)("div",{className:"flex items-start gap-6",children:[(0,t.jsx)("div",{className:"w-48 md:hidden text-sm text-muted-foreground",children:"Website"}),(0,t.jsx)("div",{className:"text-sm",children:u(null==w?void 0:w.officialWebsite)})]}),(0,t.jsxs)("div",{className:"flex items-start gap-6",children:[(0,t.jsx)("div",{className:"w-48 md:hidden text-sm text-muted-foreground",children:"Mobile"}),(0,t.jsx)("div",{className:"text-sm",children:u(null==w?void 0:w.mobileNumber)})]}),(0,t.jsxs)("div",{className:"flex items-start gap-6",children:[(0,t.jsx)("div",{className:"w-48 md:hidden text-sm text-muted-foreground",children:"Office Phone Number"}),(0,t.jsx)("div",{className:"text-sm",children:u(null==w?void 0:w.officePhone)})]}),(0,t.jsxs)("div",{className:"flex items-start gap-6",children:[(0,t.jsx)("div",{className:"w-48 md:hidden text-sm text-muted-foreground",children:"City"}),(0,t.jsx)("div",{className:"text-sm",children:u(null==w?void 0:w.city)})]}),(0,t.jsxs)("div",{className:"flex items-start gap-6",children:[(0,t.jsx)("div",{className:"w-48 md:hidden text-sm text-muted-foreground",children:"State"}),(0,t.jsx)("div",{className:"text-sm",children:u(null==w?void 0:w.state)})]}),(0,t.jsxs)("div",{className:"flex items-start gap-6",children:[(0,t.jsx)("div",{className:"w-48 md:hidden text-sm text-muted-foreground",children:"Country"}),(0,t.jsx)("div",{className:"text-sm",children:u(null==w?void 0:w.country)})]}),(0,t.jsxs)("div",{className:"flex items-start gap-6",children:[(0,t.jsx)("div",{className:"w-48 md:hidden text-sm text-muted-foreground",children:"Postal Code"}),(0,t.jsx)("div",{className:"text-sm",children:u(null==w?void 0:w.postalCode)})]}),(0,t.jsxs)("div",{className:"flex items-start gap-6",children:[(0,t.jsx)("div",{className:"w-48 md:hidden text-sm text-muted-foreground",children:"Address"}),(0,t.jsx)("div",{className:"text-sm",children:u(null==w?void 0:w.companyAddress)})]})]})})]})}),(0,t.jsxs)("div",{className:"mt-6 text-sm text-muted-foreground grid md:grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{children:["Created: ",(N=null==w?void 0:w.createdAt)?new Date(N).toLocaleString():"--"]}),(0,t.jsxs)("div",{className:"text-right",children:["Status: ",(0,t.jsx)(i.Badge,{variant:"secondary",children:null!=(f=null==w?void 0:w.status)?f:"--"})]})]})]})]}):(0,t.jsx)("div",{className:"py-12 text-center text-muted-foreground",children:"No lead found."})})]})})}}]);