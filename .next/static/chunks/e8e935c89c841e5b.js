(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,37727,e=>{"use strict";e.s(["X",()=>t.default]);var t=e.i(841947)},286536,e=>{"use strict";e.s(["Eye",()=>t],286536);let t=(0,e.i(475254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},284614,e=>{"use strict";e.s(["User",()=>t],284614);let t=(0,e.i(475254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},370956,e=>{"use strict";e.s(["List",()=>t],370956);let t=(0,e.i(475254).default)("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]])},87316,e=>{"use strict";e.s(["Calendar",()=>t],87316);let t=(0,e.i(475254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},732809,e=>{"use strict";e.s(["default",()=>p],732809),e.i(247167);var t=e.i(843476),a=e.i(271645),s=e.i(286536);function l(e){let{status:l,onView:n,onApprove:r,onReject:i,onDelete:c,loading:d}=e,[o,m]=(0,a.useState)(!1);return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(s.Eye,{className:"text-right    w-4 h-4",onClick:()=>{m(!1),n()}}),o&&(0,t.jsxs)("div",{className:"absolute right-0 mt-2 w-40 bg-white border rounded shadow-md z-50",children:["PENDING"===l&&(0,t.jsx)(t.Fragment,{}),(0,t.jsx)("div",{className:"border-t my-1"})]})]})}var n=e.i(618566),r=e.i(37727);let i="https://6jnqmj85-80.inc1.devtunnels.ms";function c(e){let{open:s,onClose:l,onSuccess:n}=e,[c,d]=(0,a.useState)([]),[o,m]=(0,a.useState)([]),[x,p]=(0,a.useState)(!1),[h,u]=(0,a.useState)({employeeIds:[],leaveType:"",durationType:"FULL_DAY",singleDate:"",reason:"",status:"PENDING"});(0,a.useEffect)(()=>{s&&(async()=>{let e=localStorage.getItem("accessToken");if(!e)return;let t=await fetch("".concat(i,"/employee/all"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)return console.error("Failed to load employees");d((await t.json()).filter(e=>e.active))})()},[s]);let j=async()=>{if(!h.employeeIds.length||!h.leaveType||!h.singleDate||!h.reason)return void alert("Please fill all required fields");p(!0);let e=localStorage.getItem("accessToken"),t=new FormData;if(t.append("leaveData",JSON.stringify({employeeIds:h.employeeIds,leaveType:h.leaveType,durationType:h.durationType,singleDate:h.singleDate,reason:h.reason,status:h.status})),o.forEach(e=>t.append("documents",e)),!(await fetch("".concat(i,"/employee/api/leaves/admin/apply"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:t})).ok){alert("Failed to apply leave"),p(!1);return}n(),l(),p(!1)};return s?(0,t.jsxs)("div",{className:"fixed inset-0 z-[10000]",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:l}),(0,t.jsxs)("div",{className:"absolute right-0 top-0 h-full w-[83vw] max-w-[82vw] bg-white shadow-xl overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"New Leave"}),(0,t.jsx)("button",{onClick:l,children:(0,t.jsx)(r.X,{className:"w-6 h-6 text-gray-500"})})]}),(0,t.jsx)("div",{className:"p-6 space-y-6",children:(0,t.jsxs)("div",{className:"border rounded-xl p-6",children:[(0,t.jsx)("h3",{className:"font-medium mb-6",children:"Assign Leave"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Choose Member *"}),(0,t.jsx)("div",{className:"mt-1 border rounded-lg max-h-56 overflow-y-auto",children:c.map(e=>{let a=h.employeeIds.includes(e.employeeId);return(0,t.jsxs)("label",{className:"flex items-center gap-3 px-3 py-2 hover:bg-gray-50 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:a,onChange:()=>{u(t=>({...t,employeeIds:a?t.employeeIds.filter(t=>t!==e.employeeId):[...t.employeeIds,e.employeeId]}))}}),e.profilePictureUrl?(0,t.jsx)("img",{src:e.profilePictureUrl,className:"w-8 h-8 rounded-full object-cover"}):(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center text-xs",children:e.name.charAt(0)}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:e.name}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:e.role})]})]},e.employeeId)})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Leave Type *"}),(0,t.jsxs)("select",{className:"w-full mt-1 border rounded px-3 py-2",onChange:e=>u({...h,leaveType:e.target.value}),children:[(0,t.jsx)("option",{value:"",children:"--"}),(0,t.jsx)("option",{value:"SICK",children:"Sick"}),(0,t.jsx)("option",{value:"CASUAL",children:"Casual"}),(0,t.jsx)("option",{value:"EARNED",children:"Earned"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Status *"}),(0,t.jsxs)("select",{className:"w-full mt-1 border rounded px-3 py-2",onChange:e=>u({...h,status:e.target.value}),children:[(0,t.jsx)("option",{value:"PENDING",children:"Pending"}),(0,t.jsx)("option",{value:"APPROVED",children:"Approved"})]})]})]}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)("label",{className:"text-sm font-medium block mb-2",children:"Select Duration"}),(0,t.jsx)("div",{className:"flex gap-6 text-sm",children:[["FULL_DAY","Full Day"],["MULTIPLE_DAYS","Multiple Days"],["FIRST_HALF","First Half"],["SECOND_HALF","Second Half"]].map(e=>{let[a,s]=e;return(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"radio",checked:h.durationType===a,onChange:()=>u({...h,durationType:a})}),s]},a)})})]}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"You can select multiple dates"}),(0,t.jsx)("input",{type:"date",className:"w-full mt-1 border rounded px-3 py-2",onChange:e=>u({...h,singleDate:e.target.value})})]}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Reason for absence *"}),(0,t.jsx)("textarea",{rows:4,className:"w-full mt-1 border rounded px-3 py-2",onChange:e=>u({...h,reason:e.target.value})})]}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Add File"}),(0,t.jsx)("input",{type:"file",multiple:!0,className:"mt-2",onChange:e=>m(Array.from(e.target.files||[]))})]})]})}),(0,t.jsxs)("div",{className:"flex justify-end gap-4 px-6 py-4 border-t",children:[(0,t.jsx)("button",{onClick:l,className:"px-6 py-2 border rounded text-blue-600",children:"Cancel"}),(0,t.jsx)("button",{onClick:j,disabled:x,className:"px-8 py-2 bg-blue-600 text-white rounded",children:x?"Saving...":"Save"})]})]})]}):null}var d=e.i(87316),o=e.i(370956),m=e.i(284614);let x="https://6jnqmj85-80.inc1.devtunnels.ms";function p(){var e;let[s,r]=(0,a.useState)("LIST"),[i,p]=(0,a.useState)([]),[h,u]=(0,a.useState)([]),[j,y]=(0,a.useState)(null),[g,v]=(0,a.useState)(null),[f,N]=(0,a.useState)(!1),b=(0,n.useRouter)(),[D,w]=(0,a.useState)({fromDate:"",toDate:"",status:"",leaveType:"",paid:""}),S=async()=>{let e=localStorage.getItem("accessToken");if(!e)return;let t=await fetch("".concat(x,"/employee/api/leaves/my-leaves"),{headers:{Authorization:"Bearer ".concat(e)}});p(await t.json())},T=async()=>{let e=localStorage.getItem("employeeId"),t=localStorage.getItem("accessToken");if(!e||!t)return;let a=await fetch("".concat(x,"/employee/leave-quota/me"),{headers:{Authorization:"Bearer ".concat(t)}});u(await a.json())},k=async()=>{let e=localStorage.getItem("employeeId"),t=localStorage.getItem("accessToken");if(!e||!t)return;let a=await fetch("".concat(x,"/employee/me"),{headers:{Authorization:"Bearer ".concat(t)}});y(await a.json())};(0,a.useEffect)(()=>{S()},[]),(0,a.useEffect)(()=>{"PROFILE"===s&&(T(),k())},[s]);let C=(0,a.useMemo)(()=>i.filter(e=>{var t;let a=null!=(t=e.singleDate)?t:e.startDate;return!!a&&(!D.fromDate||!(a<D.fromDate))&&(!D.toDate||!(a>D.toDate))&&(!D.status||e.status===D.status)&&(!D.leaveType||e.leaveType===D.leaveType)&&(""===D.paid||String(e.isPaid)===D.paid)&&!0}),[i,D]),[A,E]=(0,a.useState)(new Date),I=A.getFullYear(),P=A.getMonth(),L=new Date(I,P+1,0).getDate(),R=new Date(I,P,1).getDay(),F=(0,a.useMemo)(()=>{let e={};return C.forEach(t=>{if(t.singleDate)e[t.singleDate]=[...e[t.singleDate]||[],t];else if(t.startDate&&t.endDate){let a=new Date(t.startDate),s=new Date(t.endDate);for(;a<=s;){let s=a.toISOString().split("T")[0];e[s]=[...e[s]||[],t],a.setDate(a.getDate()+1)}}}),e},[C]),M=(0,a.useMemo)(()=>h.reduce((e,t)=>e+t.remainingLeaves,0),[h]),O=async e=>{let t=localStorage.getItem("accessToken");t&&(v(e),await fetch("".concat(x,"/employee/api/leaves/").concat(e,"/status"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({status:"APPROVED"})}),await S(),v(null))},z=async(e,t)=>{let a=localStorage.getItem("accessToken");a&&t&&(v(e),await fetch("".concat(x,"/employee/api/leaves/").concat(e,"/status"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({status:"REJECTED",rejectionReason:t})}),await S(),v(null))};return(0,t.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:["PROFILE"!==s&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded",onClick:()=>N(!0),children:"+ New Leave"}),(0,t.jsx)(c,{open:f,onClose:()=>N(!1),onSuccess:S})]}),"PROFILE"===s&&j&&(0,t.jsxs)("div",{className:"flex gap-6 mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 border rounded-xl p-4 w-1/2",children:[(0,t.jsx)("img",{src:j.profilePictureUrl||"/avatar.png",className:"w-14 h-14 rounded-full object-cover"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold",children:j.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[j.designationName," · ",j.departmentName]}),(0,t.jsxs)("p",{className:"text-xs text-gray-400",children:["Last login: ",null==(e=j.createdAt)?void 0:e.split("T")[0]]})]})]}),(0,t.jsxs)("div",{className:"border rounded-xl p-4 w-1/2",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Remaining Leaves"}),(0,t.jsx)("p",{className:"text-2xl font-semibold text-blue-600",children:M})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(o.List,{onClick:()=>r("LIST")}),(0,t.jsx)(d.Calendar,{onClick:()=>r("CALENDAR")}),(0,t.jsx)(m.User,{onClick:()=>r("PROFILE")})]})]}),"PROFILE"===s&&(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full border",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"p-3 text-left",children:"Leave Type"}),(0,t.jsx)("th",{className:"p-3",children:"Total"}),(0,t.jsx)("th",{className:"p-3",children:"Monthly"}),(0,t.jsx)("th",{className:"p-3",children:"Taken"}),(0,t.jsx)("th",{className:"p-3",children:"Over"}),(0,t.jsx)("th",{className:"p-3",children:"Remaining"})]})}),(0,t.jsx)("tbody",{children:h.map(e=>(0,t.jsxs)("tr",{className:"border-t",children:[(0,t.jsx)("td",{className:"p-3",children:e.leaveType}),(0,t.jsx)("td",{className:"p-3",children:e.totalLeaves}),(0,t.jsx)("td",{className:"p-3",children:e.monthlyLimit}),(0,t.jsx)("td",{className:"p-3",children:e.totalTaken}),(0,t.jsx)("td",{className:"p-3",children:e.overUtilized}),(0,t.jsx)("td",{className:"p-3",children:e.remainingLeaves})]},e.id))})]})}),"LIST"===s&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-wrap gap-3 mb-6",children:[(0,t.jsx)("input",{type:"date",className:"border py-3 px-6 rounded-2xl",onChange:e=>w(t=>({...t,fromDate:e.target.value}))}),(0,t.jsx)("input",{type:"date",className:"border py-3 px-6 rounded-2xl",onChange:e=>w(t=>({...t,toDate:e.target.value}))}),(0,t.jsxs)("select",{className:"border py-3 px-6 rounded-2xl",onChange:e=>w(t=>({...t,status:e.target.value})),children:[(0,t.jsx)("option",{value:"",children:"Status"}),(0,t.jsx)("option",{value:"APPROVED",children:"Approved"}),(0,t.jsx)("option",{value:"PENDING",children:"Pending"}),(0,t.jsx)("option",{value:"REJECTED",children:"Rejected"})]}),(0,t.jsxs)("select",{className:"border py-3 px-6 rounded-2xl",onChange:e=>w(t=>({...t,leaveType:e.target.value})),children:[(0,t.jsx)("option",{value:"",children:"Leave Type"}),(0,t.jsx)("option",{value:"SICK",children:"Sick"}),(0,t.jsx)("option",{value:"CASUAL",children:"Casual"}),(0,t.jsx)("option",{value:"EARNED",children:"Earned"})]}),(0,t.jsxs)("select",{className:"border py-3 px-6 rounded-2xl",onChange:e=>w(t=>({...t,paid:e.target.value})),children:[(0,t.jsx)("option",{value:"",children:"Paid"}),(0,t.jsx)("option",{value:"true",children:"Paid"}),(0,t.jsx)("option",{value:"false",children:"Unpaid"})]})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium",children:"Employee"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium",children:"Leave Type"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium",children:"Duration"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium",children:"Dates"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium",children:"Paid"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:C.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-4",children:e.employeeName}),(0,t.jsx)("td",{className:"px-6 py-4",children:e.leaveType}),(0,t.jsx)("td",{className:"px-6 py-4",children:e.durationType}),(0,t.jsx)("td",{className:"px-6 py-4",children:e.singleDate?e.singleDate:e.startDate&&e.endDate?"".concat(e.startDate," to ").concat(e.endDate):"N/A"}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("span",{className:"px-2 py-1 text-xs rounded-full font-medium\n      ".concat(e.isPaid?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e.isPaid?"Paid":"Unpaid"})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("span",{className:(e=>{switch(e){case"APPROVED":return"text-green-700 flex items-center gap-2";case"REJECTED":return"text-red-600 flex items-center gap-2";case"PENDING":return"text-yellow-600 flex items-center gap-2";default:return"text-gray-600"}})(e.status),children:e.status})}),(0,t.jsx)("td",{className:"px-6 py-4 text-right",children:(0,t.jsx)(l,{status:e.status,loading:g===e.id,onView:()=>b.push("/hr/leave/admin/".concat(e.id)),onApprove:()=>O(e.id),onReject:()=>{let t=prompt("Enter rejection reason");t&&z(e.id,t)},onDelete:()=>confirm("Delete this leave?")})})]},e.id))})]})})]}),"CALENDAR"===s&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,t.jsx)("button",{onClick:()=>E(new Date(I,P-1)),children:"←"}),(0,t.jsxs)("h2",{className:"font-semibold",children:[A.toLocaleString("default",{month:"long"})," ",I]}),(0,t.jsx)("button",{onClick:()=>E(new Date(I,P+1)),children:"→"})]}),(0,t.jsx)("div",{className:"grid grid-cols-7 text-center font-medium mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,t.jsx)("div",{children:e},e))}),(0,t.jsxs)("div",{className:"grid grid-cols-7 gap-2",children:[Array.from({length:R}).map((e,a)=>(0,t.jsx)("div",{},a)),Array.from({length:L}).map((e,a)=>{var s;let l=a+1,n="".concat(I,"-").concat(String(P+1).padStart(2,"0"),"-").concat(String(l).padStart(2,"0"));return(0,t.jsxs)("div",{className:"border rounded p-1 min-h-[90px]",children:[(0,t.jsx)("div",{className:"font-semibold",children:l}),null==(s=F[n])?void 0:s.map(e=>(0,t.jsxs)("div",{className:"text-xs bg-blue-100 rounded px-1 mt-1",children:[e.employeeName," (",e.leaveType,")"]},e.id))]},n)})]})]})]})}}]);