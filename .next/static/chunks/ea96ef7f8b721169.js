(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,107233,e=>{"use strict";e.s(["Plus",()=>s],107233);let s=(0,e.i(475254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},220689,e=>{"use strict";e.s(["default",()=>i]);var s=e.i(843476),a=e.i(271645),t=e.i(522016),l=e.i(618566),n=e.i(107233),r=e.i(519455);let c="".concat("https://6jnqmj85-80.inc1.devtunnels.ms");function i(){let e=(0,l.useRouter)(),i=(0,a.useRef)(null),[d,o]=(0,a.useState)(!0),[m,u]=(0,a.useState)(!1),[x,h]=(0,a.useState)(null),[p,j]=(0,a.useState)(null),[g,N]=(0,a.useState)({companyName:"",email:"",contactNo:"",website:"",address:""});(0,a.useEffect)(()=>{let e=!0;return(async()=>{try{var s,a,t,l,n;let r=await fetch("".concat(c,"/employee/company"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken")||""),Accept:"application/json"}});if(!r.ok)return void console.warn("Company load failed",r.status);let i=await r.json();if(!e)return;N({companyName:null!=(s=i.companyName)?s:"",email:null!=(a=i.email)?a:"",contactNo:null!=(t=i.contactNo)?t:"",website:null!=(l=i.website)?l:"",address:null!=(n=i.address)?n:""}),i.logoUrl&&h(i.logoUrl)}catch(e){console.error("Error loading company:",e)}finally{e&&o(!1)}})(),()=>{e=!1}},[]);let v=()=>{var e;null==(e=i.current)||e.click()},f=async s=>{if(s&&s.preventDefault(),!g.companyName||!g.email||!g.contactNo||!g.website||!g.address)return void alert("Please fill all required fields.");u(!0);try{let s=new FormData;s.append("companyName",g.companyName),s.append("email",g.email),s.append("contactNo",g.contactNo),s.append("website",g.website),s.append("address",g.address),p&&s.append("logo",p);let a=await fetch("".concat(c,"/employee/company"),{method:"PUT",headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken")||"")},body:s});if(!a.ok){let e=await a.text().catch(()=>"");console.error("Save failed:",a.status,e),alert("Save failed: ".concat(a.status,". Check console for details.")),u(!1);return}let t=await a.json();t.logoUrl&&h(t.logoUrl),alert("Company saved successfully."),e.push("/settings/company-settings")}catch(e){console.error("Unexpected save error:",e),alert("Unexpected error while saving (see console).")}finally{u(!1)}};return d?(0,s.jsx)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-8",children:(0,s.jsxs)("div",{className:"w-full max-w-3xl bg-white rounded-lg border p-8 shadow",children:[(0,s.jsx)("div",{className:"h-8 w-56 bg-gray-100 rounded mb-6 animate-pulse"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"h-12 bg-gray-100 rounded animate-pulse"}),(0,s.jsx)("div",{className:"h-12 bg-gray-100 rounded animate-pulse"}),(0,s.jsx)("div",{className:"h-12 bg-gray-100 rounded animate-pulse"})]})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 py-10 px-4",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-slate-900",children:"Company Settings"}),(0,s.jsx)("p",{className:"text-sm text-slate-600 mt-1",children:"Manage company profile and logo"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(t.default,{href:"/settings/company-settings",children:(0,s.jsx)(r.Button,{variant:"ghost",children:"Back"})}),(0,s.jsxs)(r.Button,{onClick:v,children:[(0,s.jsx)(n.Plus,{className:"mr-2 w-4 h-4"})," Upload Logo"]})]})]}),(0,s.jsxs)("form",{onSubmit:f,className:"bg-white border rounded-xl p-6 shadow-sm",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("label",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"text-sm font-medium text-slate-700",children:["Company Name ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{required:!0,value:g.companyName,onChange:e=>N(s=>({...s,companyName:e.target.value})),className:"border rounded-md h-11 px-3 w-full",placeholder:"--"})]}),(0,s.jsxs)("label",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"text-sm font-medium text-slate-700",children:["Email Id ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{required:!0,type:"email",value:g.email,onChange:e=>N(s=>({...s,email:e.target.value})),className:"border rounded-md h-11 px-3 w-full",placeholder:"--"})]}),(0,s.jsxs)("label",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"text-sm font-medium text-slate-700",children:["Contact No. ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{required:!0,value:g.contactNo,onChange:e=>N(s=>({...s,contactNo:e.target.value})),className:"border rounded-md h-11 px-3 w-full",placeholder:"--"})]}),(0,s.jsxs)("label",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"text-sm font-medium text-slate-700",children:["Company Website ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{required:!0,value:g.website,onChange:e=>N(s=>({...s,website:e.target.value})),className:"border rounded-md h-11 px-3 w-full",placeholder:"--"})]})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsxs)("label",{className:"space-y-1 w-full",children:[(0,s.jsxs)("div",{className:"text-sm font-medium text-slate-700",children:["Company Address ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("textarea",{required:!0,value:g.address,onChange:e=>N(s=>({...s,address:e.target.value})),className:"border rounded-md p-3 h-28 w-full",placeholder:"--"})]})}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsxs)("div",{className:"text-sm font-medium text-slate-700 mb-2",children:["Company Logo ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("div",{onClick:v,className:"border rounded-md h-36 flex items-center justify-center cursor-pointer bg-white hover:bg-gray-50",children:x?(0,s.jsxs)("div",{className:"flex items-center gap-4 px-4",children:[(0,s.jsx)("img",{src:x,alt:"logo preview",className:"h-24 object-contain rounded-md border"}),(0,s.jsx)("div",{className:"text-sm text-slate-600",children:"Click to change logo"})]}):(0,s.jsxs)("div",{className:"text-center text-slate-400",children:[(0,s.jsxs)("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",className:"mx-auto mb-2",children:[(0,s.jsx)("path",{d:"M12 3v10",stroke:"#9CA3AF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",stroke:"#9CA3AF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M7 10l5-5 5 5",stroke:"#9CA3AF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,s.jsx)("div",{className:"text-sm",children:"Choose a file"})]})}),(0,s.jsx)("input",{ref:i,type:"file",accept:"image/*",className:"hidden",onChange:e=>{var s,a;(e=>{if(!e)return j(null);j(e),h(URL.createObjectURL(e))})(null!=(a=null==(s=e.target.files)?void 0:s[0])?a:null)}})]}),(0,s.jsxs)("div",{className:"mt-6 flex justify-center gap-4",children:[(0,s.jsx)(r.Button,{variant:"outline",onClick:()=>e.push("/settings/company-settings"),children:"Cancel"}),(0,s.jsx)(r.Button,{type:"submit",onClick:f,disabled:m,children:m?"Saving...":"Save"})]})]}),(0,s.jsx)("div",{className:"mt-6 text-center text-sm text-slate-500",children:(0,s.jsx)(t.default,{href:"/settings/company-settings",className:"underline",children:"Back to company list"})})]})})}}]);