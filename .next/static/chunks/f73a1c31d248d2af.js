(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,37727,e=>{"use strict";e.s(["X",()=>t.default]);var t=e.i(841947)},624687,e=>{"use strict";e.s(["Textarea",()=>s]);var t=e.i(843476),a=e.i(975157);function s(e){let{className:s,...r}=e;return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,a.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...r})}},531278,e=>{"use strict";e.s(["Loader2",()=>t],531278);let t=(0,e.i(475254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},116019,e=>{"use strict";e.s(["Trash",()=>t],116019);let t=(0,e.i(475254).default)("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},929592,e=>{"use strict";e.s(["Alert",()=>l,"AlertDescription",()=>c]);var t=e.i(843476),a=e.i(225913),s=e.i(975157);let r=(0,a.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function l(e){let{className:a,variant:l,...c}=e;return(0,t.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,s.cn)(r({variant:l}),a),...c})}function c(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"alert-description",className:(0,s.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...r})}},595468,e=>{"use strict";e.s(["CheckCircle2",()=>t],595468);let t=(0,e.i(475254).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},63209,e=>{"use strict";e.s(["AlertCircle",()=>t],63209);let t=(0,e.i(475254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},634344,e=>{"use strict";e.s(["default",()=>j]);var t=e.i(843476),a=e.i(271645),s=e.i(618566),r=e.i(519455),l=e.i(793479),c=e.i(624687),n=e.i(929592),i=e.i(967489),d=e.i(63209),o=e.i(595468),m=e.i(531278),u=e.i(116019),x=e.i(37727);let h="".concat("https://6jnqmj85-80.inc1.devtunnels.ms");function p(e){let{open:s,onClose:r,onAdded:c}=e,[i,d]=(0,a.useState)([]),[o,m]=(0,a.useState)(!1),[p,g]=(0,a.useState)(!1),[j,y]=(0,a.useState)(null),[f,v]=(0,a.useState)(""),b=localStorage.getItem("accessToken"),N=async()=>{m(!0),y(null);try{if(!b){y({type:"error",text:"No token found (login required)."}),d([]),m(!1);return}let e=await fetch("".concat(h,"/api/projects/category"),{headers:{Authorization:"Bearer ".concat(b)}}),t=await e.json().catch(()=>null);if("string"==typeof t)try{t=JSON.parse(t)}catch(e){}if(e.ok){let e=Array.isArray(t)?t.map(e=>({id:Number(e.id),name:String(e.name)})):[];d(e)}else y({type:"error",text:"Failed to load categories (".concat(e.status,")")}),d([])}catch(e){console.error(e),y({type:"error",text:"Error loading categories"})}finally{m(!1)}};(0,a.useEffect)(()=>{s&&(N(),v(""),y(null))},[s]);let S=async()=>{y(null);let e=(f||"").trim();if(!e)return void y({type:"error",text:"Please enter a category name."});if(!b)return void y({type:"error",text:"No token found (login required)."});g(!0);try{let a=await fetch("".concat(h,"/api/projects/category"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(b)},body:JSON.stringify({name:e})}),s=await a.text(),r=null;try{r=JSON.parse(s)}catch(e){r=s}if(a.ok){y({type:"success",text:"Category added."}),await N(),v("");try{let t="object"==typeof r&&(null==r?void 0:r.id)?String(r.id):String((i.find(t=>t.name===e)||{}).id||"");t&&(null==c||c(t))}catch(e){}}else{var t;let e="string"==typeof r?r:null!=(t=null==r?void 0:r.message)?t:JSON.stringify(r);y({type:"error",text:"Failed to add: ".concat(e)})}}catch(e){console.error(e),y({type:"error",text:"Error while saving category"})}finally{g(!1)}},w=async(e,t)=>{if(window.confirm('Delete category "'.concat(null!=t?t:e,'" ?'))){if(!b)return void y({type:"error",text:"No token found (login required)."});try{let t=await fetch("".concat(h,"/api/projects/category/").concat(e),{method:"DELETE",headers:{"Content-Type":"text/plain",Authorization:"Bearer ".concat(b)}}),a=await t.text().catch(()=>"");t.ok?(y({type:"success",text:"Deleted successfully."}),await N()):y({type:"error",text:"Delete failed: ".concat(a||t.statusText)})}catch(e){console.error(e),y({type:"error",text:"Error deleting category"})}}};return s?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-4xl shadow-lg overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[(0,t.jsx)("h3",{className:"text-lg font-medium",children:"Project Category"}),(0,t.jsx)("button",{"aria-label":"Close",onClick:r,className:"rounded-full p-1 hover:bg-gray-100",title:"Close",children:(0,t.jsx)(x.X,{className:"h-5 w-5 text-gray-600"})})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsx)("div",{className:"rounded-md border overflow-hidden",children:(0,t.jsxs)("table",{className:"min-w-full divide-y",children:[(0,t.jsx)("thead",{className:"bg-blue-50",children:(0,t.jsxs)("tr",{className:"text-sm text-gray-700",children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left w-12",children:"#"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left",children:"Category Name"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left w-28",children:"Action"})]})}),(0,t.jsx)("tbody",{className:"bg-white",children:o?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:3,className:"px-4 py-6 text-center text-sm text-gray-500",children:"Loading..."})}):0===i.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:3,className:"px-4 py-6 text-center text-sm text-gray-500",children:"No categories found."})}):i.map((e,a)=>(0,t.jsxs)("tr",{className:"text-sm text-gray-700 border-t",children:[(0,t.jsx)("td",{className:"px-4 py-3",children:a+1}),(0,t.jsx)("td",{className:"px-4 py-3",children:e.name}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)("button",{onClick:()=>w(e.id,e.name),className:"inline-flex items-center gap-2 rounded px-2 py-1 text-sm bg-red-50 text-red-600 hover:bg-red-100",title:"Delete",children:(0,t.jsx)(u.Trash,{className:"h-4 w-4"})})})]},e.id))})]})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm text-gray-700",children:"Category Name *"}),(0,t.jsx)(l.Input,{placeholder:"--",value:f,onChange:e=>v(e.target.value),className:"w-full"})]}),j&&(0,t.jsx)(n.Alert,{className:"border ".concat("success"===j.type?"border-green-300 bg-green-50":"border-red-300 bg-red-50"),children:(0,t.jsx)(n.AlertDescription,{className:"success"===j.type?"text-green-800":"text-red-800",children:j.text})}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-4 pt-2 border-t mt-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{v(""),r()},className:"px-6 py-2 rounded border border-blue-200 text-blue-600 hover:bg-blue-50",children:"Cancel"}),(0,t.jsx)("button",{type:"button",onClick:S,disabled:p,className:"px-6 py-2 rounded text-white ".concat(p?"bg-blue-300":"bg-blue-600 hover:bg-blue-700"),children:p?"Saving...":"Save"})]})]})]})}):null}function g(e){let{employees:s,selected:r,onChange:l,placeholder:c="Select employees"}=e,[n,i]=(0,a.useState)(!1),d=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let e=e=>{d.current&&(d.current.contains(e.target)||i(!1))};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]),(0,t.jsxs)("div",{ref:d,className:"relative",children:[(0,t.jsxs)("div",{onClick:()=>i(e=>!e),className:"border rounded-md px-3 py-2 min-h-[44px] flex items-center gap-2 cursor-pointer bg-white",role:"button",children:[(0,t.jsx)("div",{className:"flex-1 flex items-center gap-2 flex-wrap",children:0===r.length?(0,t.jsx)("div",{className:"text-gray-400 text-sm",children:c}):r.map(e=>{var a;let r=s.find(t=>t.employeeId===e);return(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 bg-gray-100 rounded-full px-2 py-1 text-xs",children:[(null==r?void 0:r.profilePictureUrl)?(0,t.jsx)("img",{src:r.profilePictureUrl,alt:null==r?void 0:r.name,className:"h-5 w-5 rounded-full object-cover"}):(0,t.jsx)("div",{className:"h-5 w-5 rounded-full bg-gray-300 flex items-center justify-center text-xs text-white",children:((null==r?void 0:r.name)||"U").slice(0,1)}),(0,t.jsx)("span",{className:"whitespace-nowrap",children:null!=(a=null==r?void 0:r.name)?a:e})]},e)})}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:n?"▲":"▼"})]}),n&&(0,t.jsx)("div",{className:"absolute z-40 mt-2 w-full bg-white border rounded-md shadow-lg max-h-60 overflow-auto",children:(0,t.jsx)("div",{className:"p-2",children:0===s.length?(0,t.jsx)("div",{className:"text-sm text-gray-500 p-2",children:"No employees"}):s.map(e=>{let a=r.includes(e.employeeId);return(0,t.jsxs)("label",{className:"flex items-center gap-2 px-2 py-2 hover:bg-gray-50 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:a,onChange:()=>{var t;return t=e.employeeId,void(r.includes(t)?l(r.filter(e=>e!==t)):l([...r,t]))}}),e.profilePictureUrl?(0,t.jsx)("img",{src:e.profilePictureUrl,alt:e.name,className:"h-7 w-7 rounded-full object-cover"}):(0,t.jsx)("div",{className:"h-7 w-7 rounded-full bg-gray-200 flex items-center justify-center text-xs",children:e.name.slice(0,1)}),(0,t.jsxs)("div",{className:"flex-1 text-sm",children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:e.employeeId})]})]},e.employeeId)})})})]})}function j(){var e;let u=(0,s.useParams)(),x=(0,s.useRouter)(),j=u.id,[y,f]=(0,a.useState)(!1),[v,b]=(0,a.useState)(!0),[N,S]=(0,a.useState)(""),[w,k]=(0,a.useState)(""),[C,A]=(0,a.useState)(null),[I,T]=(0,a.useState)([]),[E,D]=(0,a.useState)([]),[P,B]=(0,a.useState)([]),[U,V]=(0,a.useState)([]),[O,z]=(0,a.useState)([]),[L,M]=(0,a.useState)("none"),[J,R]=(0,a.useState)("none"),[F,H]=(0,a.useState)("none"),[_,q]=(0,a.useState)("none"),[Y,K]=(0,a.useState)(0),[X,$]=(0,a.useState)(!1),[G,Q]=(0,a.useState)("you"),[W,Z]=(0,a.useState)(!1),ee=localStorage.getItem("accessToken");(0,a.useEffect)(()=>{(async()=>{b(!0);try{var e,t,a,s,r,l,c,n,i,d,o,m,u;if(!ee){S("No token found!"),k("error"),b(!1);return}let x=await fetch("/api/work/project?id=".concat(j),{headers:{Authorization:"Bearer ".concat(ee)}}),h=await x.json().catch(()=>({}));if(x.ok){let x=Array.isArray(h)?h[0]:h,p=Array.isArray(x.assignedEmployeeIds)?x.assignedEmployeeIds.join(","):null!=(e=x.assignedEmployeeIds)?e:"",g={projectName:x.projectName||"",shortCode:x.shortCode||"",startDate:x.startDate?x.startDate.split("T")[0]:"",deadline:x.deadline?x.deadline.split("T")[0]:"",noDeadline:!!x.noDeadline,projectCategory:x.projectCategory?String(x.projectCategory):"",departmentId:x.departmentId||"",clientId:x.clientId||"",assignedEmployeeIds:p,projectSummary:x.projectSummary||"",currency:x.currency||"USD",projectBudget:null!=(t=x.projectBudget)?t:"",hoursEstimate:null!=(a=x.hoursEstimate)?a:"",tasksNeedAdminApproval:!!x.tasksNeedAdminApproval,allowManualTimeLogs:!!x.allowManualTimeLogs,projectStatus:null!=(s=x.projectStatus)?s:"none",progressPercent:void 0!==x.progressPercent?Number(x.progressPercent):0,calculateProgressThroughTasks:!!(null!=(r=x.calculateProgressThroughTasks)&&r),addedBy:null!=(l=x.addedBy)?l:"you"};A(g),q(null!=(c=g.projectStatus)?c:"none"),K(Number(null!=(n=g.progressPercent)?n:0)),$(!!(null!=(i=g.calculateProgressThroughTasks)&&i)),Q(null!=(d=g.addedBy)?d:"you"),M(null!=(o=g.projectCategory)?o:"none"),R(null!=(m=g.departmentId)?m:"none"),H(null!=(u=g.clientId)?u:"none");let j=(g.assignedEmployeeIds||"").split(",").map(e=>e.trim()).filter(Boolean);z(j)}else{let e="string"==typeof(null==h?void 0:h.error)?h.error:(null==h?void 0:h.message)||"Failed to fetch project";S(e),k("error")}}catch(e){console.error(e),S("Error fetching project"),k("error")}finally{b(!1)}})()},[j]),(0,a.useEffect)(()=>{if(!ee)return;let e=async()=>{try{let e=await fetch("".concat(h,"/admin/departments"),{headers:{Authorization:"Bearer ".concat(ee)}}),t=await e.json().catch(()=>null);if("string"==typeof t)try{t=JSON.parse(t)}catch(e){}let a=Array.isArray(t)?t.map(e=>({id:Number(e.id),departmentName:e.departmentName})):[];D(a)}catch(e){console.error("Error loading departments",e)}},t=async()=>{try{let e=await fetch("".concat(h,"/clients"),{headers:{Authorization:"Bearer ".concat(ee)}}),t=await e.json().catch(()=>null);if("string"==typeof t)try{t=JSON.parse(t)}catch(e){}let a=Array.isArray(t)?t.map(e=>{var t;return{id:Number(e.id),name:e.name||(null==(t=e.company)?void 0:t.companyName)||"Client ".concat(e.id)}}):[];B(a)}catch(e){console.error("Error loading clients",e)}},a=async()=>{try{var e;let t=await fetch("".concat(h,"/employee/all?page=0&size=20"),{headers:{Authorization:"Bearer ".concat(ee)}}),a=await t.json().catch(()=>null);if("string"==typeof a)try{a=JSON.parse(a)}catch(e){}let s=null!=(e=null==a?void 0:a.content)?e:a,r=Array.isArray(s)?s.map(e=>({employeeId:e.employeeId,name:e.name||e.employeeId,profilePictureUrl:e.profilePictureUrl||""})):[];V(r)}catch(e){console.error("Error loading employees",e)}};(async()=>{try{let e=await fetch("".concat(h,"/api/projects/category"),{headers:{Authorization:"Bearer ".concat(ee)}}),t=await e.json().catch(()=>null);if("string"==typeof t)try{t=JSON.parse(t)}catch(e){}let a=Array.isArray(t)?t.map(e=>({id:Number(e.id),name:String(e.name)})):[];T(a)}catch(e){console.error("Error loading categories",e)}})(),e(),t(),a()},[ee]);let et=C?Array.from(new Set((C.assignedEmployeeIds||"").split(",").map(e=>e.trim()).filter(Boolean))):[],ea=async e=>{var t,a,s;e.preventDefault(),f(!0),S(""),k("");let r=e.currentTarget,l=new FormData(r);if(l.set("noDeadline",(null==(t=r.noDeadline)?void 0:t.checked)?"true":"false"),l.set("tasksNeedAdminApproval",(null==(a=r.tasksNeedAdminApproval)?void 0:a.checked)?"true":"false"),l.set("allowManualTimeLogs",(null==(s=r.allowManualTimeLogs)?void 0:s.checked)?"true":"false"),l.set("projectCategory","none"===L?"":L),l.set("departmentId","none"===J?"":J),l.set("clientId","none"===F?"":F),l.set("assignedEmployeeIds",O.join(",")),_&&"none"!==_&&l.set("projectStatus",String(_)),l.set("progressPercent",String(Math.max(0,Math.min(100,Math.round(Y||0))))),l.set("calculateProgressThroughTasks",String(!!X)),l.set("addedBy",String(G||"")),!ee){S("No token found!"),k("error"),f(!1);return}try{let e=await fetch("/api/work/project?id=".concat(j),{method:"PUT",headers:{Authorization:"Bearer ".concat(ee)},body:l}),t=await e.json().catch(()=>({}));if(e.ok)S("Project updated successfully!"),k("success"),setTimeout(()=>x.push("/work/project/all"),1200);else{let e="string"==typeof(null==t?void 0:t.error)?t.error:(null==t?void 0:t.message)||JSON.stringify(t);S(e),k("error")}}catch(e){console.error(e),S("Error submitting form"),k("error")}finally{f(!1)}};return v?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-background to-muted p-6 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(m.Loader2,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-primary"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading project..."})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-background to-muted p-6",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,t.jsx)("div",{children:(0,t.jsx)("h1",{className:"text-2xl font-semibold",children:"Update Project"})}),(0,t.jsx)("div",{})]}),N&&(0,t.jsx)(n.Alert,{className:"mb-6 ".concat("success"===w?"border-green-500 bg-green-50":"border-red-500 bg-red-50"),children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["success"===w?(0,t.jsx)(o.CheckCircle2,{className:"h-4 w-4 text-green-600"}):(0,t.jsx)(d.AlertCircle,{className:"h-4 w-4 text-red-600"}),(0,t.jsx)(n.AlertDescription,{className:"success"===w?"text-green-800":"text-red-800",children:N})]})}),C&&(0,t.jsxs)("form",{onSubmit:ea,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg border",children:[(0,t.jsx)("div",{className:"p-4 border-b",children:(0,t.jsx)("h3",{className:"font-medium",children:"Project Details"})}),(0,t.jsxs)("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Short Code *"}),(0,t.jsx)(l.Input,{name:"shortCode",defaultValue:C.shortCode})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Project Name *"}),(0,t.jsx)(l.Input,{name:"projectName",defaultValue:C.projectName})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Start Date *"}),(0,t.jsx)(l.Input,{type:"date",name:"startDate",defaultValue:C.startDate})]}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Deadline *"}),(0,t.jsx)(l.Input,{type:"date",name:"deadline",defaultValue:C.deadline})]}),(0,t.jsx)("div",{className:"pt-6",children:(0,t.jsxs)("label",{className:"inline-flex items-center gap-2 text-sm text-gray-600",children:[(0,t.jsx)("input",{type:"checkbox",name:"noDeadline",defaultChecked:C.noDeadline}),(0,t.jsx)("span",{className:"text-xs",children:"There is no project deadline"})]})})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Project Category *"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(i.Select,{value:L,onValueChange:e=>M(e),children:[(0,t.jsx)(i.SelectTrigger,{className:"w-full",children:(0,t.jsx)(i.SelectValue,{placeholder:"--"})}),(0,t.jsxs)(i.SelectContent,{children:[(0,t.jsx)(i.SelectItem,{value:"none",children:"--"}),I.map(e=>(0,t.jsx)(i.SelectItem,{value:String(e.id),children:e.name},e.id))]})]}),(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>Z(!0),children:"Add"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Department *"}),(0,t.jsxs)(i.Select,{value:J,onValueChange:e=>R(e),children:[(0,t.jsx)(i.SelectTrigger,{className:"w-full",children:(0,t.jsx)(i.SelectValue,{placeholder:"--"})}),(0,t.jsxs)(i.SelectContent,{children:[(0,t.jsx)(i.SelectItem,{value:"none",children:"--"}),E.map(e=>(0,t.jsx)(i.SelectItem,{value:String(e.id),children:e.departmentName},e.id))]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Client *"}),(0,t.jsxs)(i.Select,{value:F,onValueChange:e=>H(e),children:[(0,t.jsx)(i.SelectTrigger,{className:"w-full",children:(0,t.jsx)(i.SelectValue,{placeholder:"--"})}),(0,t.jsxs)(i.SelectContent,{children:[(0,t.jsx)(i.SelectItem,{value:"none",children:"--"}),P.map(e=>(0,t.jsx)(i.SelectItem,{value:String(e.id),children:e.name},e.id))]})]})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Project Summary"}),(0,t.jsx)(c.Textarea,{name:"projectSummary",rows:4,defaultValue:C.projectSummary})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Tasks needs approval by Admin"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,t.jsx)("input",{type:"radio",name:"tasksNeedAdminApproval",value:"true",defaultChecked:!0===C.tasksNeedAdminApproval}),(0,t.jsx)("span",{className:"text-sm",children:"Yes"})]}),(0,t.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,t.jsx)("input",{type:"radio",name:"tasksNeedAdminApproval",value:"false",defaultChecked:!1===C.tasksNeedAdminApproval}),(0,t.jsx)("span",{className:"text-sm",children:"No"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Assigned to *"}),(0,t.jsx)("input",{type:"hidden",name:"assignedEmployeeIds",value:O.join(",")}),(0,t.jsx)(g,{employees:U,selected:O,onChange:e=>z(e),placeholder:"Select employees"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border",children:[(0,t.jsx)("div",{className:"p-4 border-b",children:(0,t.jsx)("h3",{className:"font-medium",children:"Project Status"})}),(0,t.jsxs)("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6 items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Project Status"}),(0,t.jsxs)(i.Select,{value:_,onValueChange:e=>q(e),children:[(0,t.jsx)(i.SelectTrigger,{className:"w-full",children:(0,t.jsx)(i.SelectValue,{placeholder:"Select status"})}),(0,t.jsxs)(i.SelectContent,{children:[(0,t.jsx)(i.SelectItem,{value:"none",children:"--"}),(0,t.jsx)(i.SelectItem,{value:"IN_PROGRESS",children:"In Progress"}),(0,t.jsx)(i.SelectItem,{value:"NOT_STARTED",children:"Not Started"}),(0,t.jsx)(i.SelectItem,{value:"ON_HOLD",children:"On Hold"}),(0,t.jsx)(i.SelectItem,{value:"CANCELLED",children:"Cancelled"}),(0,t.jsx)(i.SelectItem,{value:"FINISHED",children:"Finished"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Project Progress Status"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"relative bg-gray-200 h-3 rounded-full overflow-hidden",children:[(0,t.jsx)("div",{className:"".concat(null==Y?"bg-gray-300":Y<33?"bg-red-500":Y<66?"bg-yellow-400":"bg-green-500"," h-3 rounded-full"),style:{width:"".concat(Math.max(0,Math.min(100,Y)),"%")}}),(0,t.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none text-xs font-semibold text-white",children:[Math.round(Y),"%"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("input",{type:"range",min:0,max:100,value:Y,onChange:e=>K(Number(e.target.value)),className:"flex-1"}),(0,t.jsxs)("label",{className:"inline-flex items-center gap-2 text-sm",children:[(0,t.jsx)("input",{type:"checkbox",checked:X,onChange:e=>$(e.target.checked)}),(0,t.jsx)("span",{className:"text-xs",children:"Calculate Progress through tasks"})]})]})]})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border",children:[(0,t.jsx)("div",{className:"p-4 border-b",children:(0,t.jsx)("h3",{className:"font-medium",children:"Company Details"})}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Currency"}),(0,t.jsxs)(i.Select,{value:null!=(e=C.currency)?e:"USD",onValueChange:()=>{},children:[(0,t.jsx)(i.SelectTrigger,{className:"w-full",children:(0,t.jsx)(i.SelectValue,{placeholder:"USD $"})}),(0,t.jsxs)(i.SelectContent,{children:[(0,t.jsx)(i.SelectItem,{value:"USD",children:"USD $"}),(0,t.jsx)(i.SelectItem,{value:"USD",children:"USD ₹"}),(0,t.jsx)(i.SelectItem,{value:"EUR",children:"EUR €"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Project Budget"}),(0,t.jsx)(l.Input,{type:"number",name:"projectBudget",defaultValue:C.projectBudget})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Hours Estimate (In Hours)"}),(0,t.jsx)(l.Input,{type:"number",name:"hoursEstimate",defaultValue:C.hoursEstimate})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",name:"allowManualTimeLogs",defaultChecked:C.allowManualTimeLogs}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Allow manual time logs"})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("label",{className:"text-sm text-gray-600 mr-2",children:"Added by*"}),(0,t.jsxs)(i.Select,{value:G,onValueChange:e=>Q(e),children:[(0,t.jsx)(i.SelectTrigger,{className:"w-44",children:(0,t.jsx)(i.SelectValue,{placeholder:"You"})}),(0,t.jsxs)(i.SelectContent,{children:[(0,t.jsx)(i.SelectItem,{value:"you",children:"You"}),et.map(e=>(0,t.jsx)(i.SelectItem,{value:e,children:e},e))]})]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>x.back(),children:"Cancel"}),(0,t.jsx)(r.Button,{className:"bg-blue-600 text-white",type:"submit",disabled:y,children:y?"Updating...":"Update"})]})]}),(0,t.jsx)(p,{open:W,onClose:()=>Z(!1),onAdded:e=>{(async()=>{if(ee)try{let t=await fetch("".concat(h,"/api/projects/category"),{headers:{Authorization:"Bearer ".concat(ee)}}),a=await t.json().catch(()=>null);if("string"==typeof a)try{a=JSON.parse(a)}catch(e){}let s=Array.isArray(a)?a.map(e=>({id:Number(e.id),name:String(e.name)})):[];T(s),e&&M(e)}catch(e){console.error(e)}finally{Z(!1)}})()}})]})})}}]);